<html>
<head>
<title>React Crash Course — Deploying to Netlify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React速成班—部署到网络生活</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-crash-course-deploying-to-netlify-80cee518a3cc?source=collection_archive---------20-----------------------#2022-03-08">https://javascript.plainenglish.io/react-crash-course-deploying-to-netlify-80cee518a3cc?source=collection_archive---------20-----------------------#2022-03-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6a82" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第12部分:让React应用程序准备好在Netlify上部署</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/26a1ca9296b83c659db0e6779f8114a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKcpy_AQVd4HmC7J0GRGfA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae kv" href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="17cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls"> Live dev笔记由</em><a class="ae kv" href="https://www.youtube.com/channel/UCTZRcDjjkVajGL6wd76UnGg" rel="noopener ugc nofollow" target="_blank"><em class="ls">Dennis Ivy</em></a><em class="ls">——</em><a class="ae kv" href="https://www.youtube.com/watch?v=6fM3ueN9nYM" rel="noopener ugc nofollow" target="_blank"><em class="ls">React JS速成班</em> </a></p><p id="6e9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个速成系列课程的最后一部分，我们将研究如何构建React应用程序，以便为部署做好准备。在这个过程中，我们将研究测试构建以及部署到Netlify和处理可能出现的错误的方法。</p><h1 id="6d54" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">构建我们的React应用</h1><p id="43ef" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在我们将React应用程序部署到Netlify上之前，我们需要测试当我们构建应用程序时，它是否与开发中一样工作。为此，我们将首先运行以下命令:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3739" class="mv lu iq mr b gy mw mx l my mz">npm run build</span></pre><p id="9ed4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将创建一个应用程序的优化版本，它由一系列HTML、CSS和JS文件(也称为静态文件)组成，这些文件位于我们项目中新创建的<code class="fe na nb nc mr b">build</code>文件夹中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/4da3c0293ddf2233ece797cbaf1662d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/0*9EfUMuVptJKHEtDi"/></div></figure><p id="1876" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着React应用程序的构建，我们可以通过首先全局安装<code class="fe na nb nc mr b">serve</code>包来测试它是否真的在工作。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="790f" class="mv lu iq mr b gy mw mx l my mz">npm install -g serve</span></pre><p id="3371" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装静态服务器后，让我们使用以下命令测试我们构建的项目:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="6630" class="mv lu iq mr b gy mw mx l my mz">serve -s build</span></pre><p id="f6dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果您当前仍然在默认端口3000上运行您的开发项目，那么您可以使用<code class="fe na nb nc mr b">-p</code>标志指定一个端口来服务构建的项目。在本例中，它被设置为端口5000</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2832" class="mv lu iq mr b gy mw mx l my mz">serve -s build -p 5000</span></pre><p id="79d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>我们对位于<code class="fe na nb nc mr b">src</code>文件夹中的工作文件所做的任何更改都不会自动出现在我们构建的应用程序中。为了看到这些变化，我们需要重新构建我们的应用程序来重新捆绑和替换我们当前的静态文件。</p><p id="6c3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着我们构建的项目成功地服务和测试，让我们部署到Netlify。在我们开始之前，请确保拥有Netlify帐户。</p><h1 id="f720" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">网络部署选项1 —拖放</h1><p id="0e61" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">部署到Netlify最简单(但效率最低——长期而言)的方法是创建一个新项目，然后将<code class="fe na nb nc mr b">build</code>文件夹直接拖放到项目中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/51f3984343fd1baf0af521f1738b6383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cYy9HCKNJFLyb_UO"/></div></div></figure><p id="bb3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦它完成上传，网站将自动生成，蓄势待发！</p><p id="fc69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>当在Netlify上创建一个站点时，它将被创建在一个随机的URL下。但是您可以通过域设置来更改它。只是要确保你想要的名字没有被占用！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/112e7c8ee3234b86a450a50536067446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AZtdK7LOhi2z2FMQ"/></div></div></figure><p id="1624" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您的本地JSON服务器仍然在后台运行，那么部署的应用程序将继续获取这些笔记。否则，默认情况下，如果该站点与其他人共享，他们将无法正确使用该应用程序，因为他们无法通过端口8000连接到您的本地服务器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/b5aa604818933780ae1c1d857c3d105c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*INLpMv7NlPks-R-z"/></div></div></figure><h1 id="9fff" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">Netlify部署选项2 —从Github部署</h1><p id="9ac1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">第二种方法的设置时间稍长一些，但是在进行更改时，这是长时间部署的理想过程。</p><p id="434c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了开始，您需要将项目代码提交到Github存储库中。您也可以通过创建一个空的Github存储库来实现这一点，该存储库将提供一个使用Github CLI将现有代码推送到存储库的指令列表。</p><p id="d761" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这里，我们将返回Netlify，并通过选择“从现有项目导入”来创建一个新项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/eb38f52625b8b8cb9f74e750cd5c8ac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LQ4Z6JEjfONto9L6"/></div></div></figure><p id="10c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，我们将选择Github，它将引导我们登录Github并提供Netlify访问我们项目的权限。在我的例子中，我只授予它对notes应用程序存储库的权限。</p><p id="1238" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将看到应用程序的站点设置。向下滚动，我们会看到Netlify为我们提供了一个build命令——与我们用来构建React应用程序的命令相同。这意味着当我们部署应用程序时，它将调用build命令，这样我们就不必这样做了。它所需要的是我们到目前为止一直在处理的项目文件。此外，由于我已经为node包含了一个<code class="fe na nb nc mr b">.gitignore</code>文件，它已经有了一个内置引用，当我将任何更改推送到Github存储库时，它会忽略构建文件夹。</p><p id="c3fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我还确保选择了<code class="fe na nb nc mr b">production</code>分支(在截图中显示为<code class="fe na nb nc mr b">master</code>)。这样，当我在主/主分支上工作时，我可以保持构建工作流是独立的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/6050cdd687d4e5390e6ee15922a4eb73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LOPE4GDSVHE9rVzn"/></div></div></figure><p id="48cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一点上，点击<code class="fe na nb nc mr b">Deploy Site</code>是有意义的——我们就是这样。但事实是，Netlify很可能会返回一些错误(当我们在开发中检查它们时，这些错误实际上是警告)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/31ff7a35dcca5c90014a575b52cec3b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/0*k-nKgLqqxqxP23Lw"/></div></figure><p id="817c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了解决这个问题，我们将把Netlify提供的持续集成环境变量更新为false，因为它目前将这些警告视为错误。任何像一个没有使用的包一样小的东西在React中都被认为是一个警告，因此它会导致Netlify将其视为Netlify部署过程中的一个错误。</p><p id="5bc8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来自Netlify的这些错误的目的是帮助我们更好地维护我们的代码——但是对于一个小的测试项目来说，这不是一个需要解决的关键问题。</p><p id="d55c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了让Netlify忽略这些小警告，我们将前往:</p><p id="40c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe na nb nc mr b">Site settings</code>&gt;<code class="fe na nb nc mr b">Build &amp; deploy</code>&gt;T6】</p><p id="d7b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的build命令中，我们将在开头包含以下内容:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="5a98" class="mv lu iq mr b gy mw mx l my mz"><strong class="mr ir">CI=</strong> npm run build</span></pre><p id="7b55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将有效地将持续集成设置为false。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/bf4325c486492652324f347ee4a243c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/0*cRcOK9nzMCGnIoLu"/></div></figure><p id="ef23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着build命令的更新，我们现在可以重新部署应用程序了。</p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="df02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我的现场演示:</p><div class="ns nt gp gr nu nv"><a href="https://notesapp-test.netlify.app/" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">React应用</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">使用create-react-app创建的网站</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">notesapp-test.netlify.app</p></div></div></div></a></div><p id="e700" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是我的Github回购:</p><div class="ns nt gp gr nu nv"><a href="https://github.com/emilyyleung/notesapp" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">GitHub-Emily leung/notes app</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">在GitHub上创建一个帐户，为Emily leung/notes app的开发做出贡献。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">github.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kp nv"/></div></div></a></div></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h1 id="47d9" class="lt lu iq bd lv lw ok ly lz ma ol mc md jw om jx mf jz on ka mh kc oo kd mj mk bi translated">总结想法</h1><p id="a769" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这一系列教程的重点是用create-react-app创建一个简单的notes应用程序。在这个过程中，我们学习了如何创建使用JSON数据的React组件、页面和路由。为了测试这个应用程序能否与后端一起工作，我们用<code class="fe na nb nc mr b">json-server</code>包创建了一个模拟API服务器。</p><p id="67e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为后端是使用模拟API服务器创建的，该服务器将数据存储在一个JSON文件中，所以我们部署的最终应用程序被认为功能不全。相反，只有在端口8000上有一个本地JSON服务器打开时，它才能工作。</p><p id="0ca1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，另一种选择是将源代码从本地JSON服务器更改为使用localStorage API，我在这里的“便笺——业务逻辑”中已经提到过:</p><div class="ns nt gp gr nu nv"><a rel="noopener  ugc nofollow" target="_blank" href="/sticky-notes-business-logic-f69253fb45fd"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">便笺——业务逻辑</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">第2部分:JavaScript应用程序——构建时没有框架</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oe l"><div class="op l og oh oi oe oj kp nv"/></div></div></a></div><p id="6803" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容尽在</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">说白了. io </em> </strong> </a> <em class="ls">。报名参加我们的</em><strong class="ky ir"><em class="ls"/></strong><a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">Twitter</em></strong></a><em class="ls">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">LinkedIn</em></strong></a><em class="ls">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">社区不和谐</em> </strong> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>