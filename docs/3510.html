<html>
<head>
<title>Should You use Controlled Components to Handle Passwords in React?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中应该使用受控组件来处理密码吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/should-you-use-controlled-components-to-handle-passwords-in-react-b816be47ebf6?source=collection_archive---------11-----------------------#2022-09-02">https://javascript.plainenglish.io/should-you-use-controlled-components-to-handle-passwords-in-react-b816be47ebf6?source=collection_archive---------11-----------------------#2022-09-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a349fa8fbf16b3d083d327436e939931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I7Dv7IwYxcCrEX0u"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@danny144?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dan Nelson</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f834" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我最近在为一个客户做一个项目，这个项目包括认证和登录页面。当我去设置用户名和密码的文本输入时，一个我以前没有想到的问题出现了。对带有密码类型的输入使用受控组件是一种好的安全做法吗？</p><p id="35ef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们深入回答这个问题之前，我们应该先看看什么是受控组件，以及输入的“password”属性如何实际影响屏幕上的输入文本以及存储在DOM中的数据。</p><p id="8398" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">什么是受控组件？</strong></p><p id="d5fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于传统的输入，输入的值作为属性存储在元素中。为了访问这些值，我们必须使用JavaScript来挂接元素，否则就要等待提交表单才能访问这些值。</p><p id="00b7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">React通过使用受控组件提供了一种处理输入值的新方法。我们没有让输入元素控制它们的状态，而是混合使用状态变量和onChange挂钩将输入值的所有权从输入元素转移到React组件。</p><p id="2c62" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们使用下图中的模式:</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ky"><img src="../Images/3d077390fcdc2acd01a15ab354120e5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pzbh2Ks1rH6krsYqKCMCEw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Figure 1. Basic password input managed by React controlled components.</figcaption></figure><p id="0e16" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我们设置了一个useState钩子来存储和更新密码的值。我们将输入的值设置为密码变量，并设置一个onChange事件处理程序，以便在每次输入发生变化时更新密码变量的值。这就形成了一个循环过程，在这个过程中，用户与input元素进行交互，从而触发一个onChange调用来更新password变量，这个变量又会改变input元素中的value属性。</p><p id="91d7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这样做的好处是可以更集中、更直接地访问这些输入值，因为它们存储在组件的状态中，但是这也提出了一个问题，即这种集中状态和将输入的责任推迟到反应组件是否会将我们的输入值置于更大的风险中。</p><p id="43bb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">输入密码时会发生什么？</strong></p><p id="c426" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">默认情况下，输入HTML元素具有文本类型。这意味着任何放置在HTML文件中没有指定类型的<input/>标签将默认为纯文本。当然，我们可能希望向用户询问许多不同类型的数据，我们希望避免为每种类型的数据重写验证和元素功能。正是因为这种需要，HTML增加了输入类型，包括密码、电子邮件和电话等等。</p><p id="31ff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这些不同的类型提供了默认文本类型所不具备的表层验证或额外功能。当我们想要帮助保持用户的密码不被窥探时，我们可以创建一个带有密码类型的输入标签。使用该属性，输入到输入中的所有字符将显示为统一的点，而不是特定的字符。</p><p id="3b01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以在下面的代码片段中看到这一点:</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/3c4c05265754a2c862feda2b97cb98a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*ET4CnkDQrIYphC3yS2pBqg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Figure 2. Comparison of text and password input elements.</figcaption></figure><p id="d5b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这对于防止离你很近的其他人看到你屏幕上的字符很有用，但是它对存储在DOM中的内容有什么影响呢？要回答这个问题，我们需要研究值属性。除了类型属性，输入HTML标签还有一个值属性。这可以预先设置，但是一旦用户与输入交互，这个值属性将存储结果值。</p><p id="bd8c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然我们的密码值在屏幕上看起来像点，但在DOM中它看起来像这样:</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi le"><img src="../Images/f3e262127148cb34eec5872024c92a92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BfJ7nJuZ2T8qVT92yyp3Uw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Figure 3. Example of password showed in plain text in input’s value attribute.</figcaption></figure><p id="97fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我们看到输入属性的值是我们的密码“password1”。密码类型输入提供的点和安全性仅扩展到屏幕上的视觉效果，并不保护存储在DOM中的密码。换句话说，任何输入值对于有权访问DOM的人来说都是完全可见的，不管它们在UI中是如何显示的。</p><p id="52ca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们是否应该让密码输入成为一个受控组件？</p><p id="c68f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们已经讨论了什么是受控组件，如何使用它们，以及不同的输入元素类型，特别是密码类型。我们问题的答案——我们应该在React中使用受控组件来管理密码吗？—是肯定的。虽然带有密码类型的input元素会使物理用户看不到屏幕上的内容，但它不会改变DOM中值的可见性。</p><p id="4f9f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">受控组件不会使情况变得更糟，因为它们所做的只是将密码状态的控制权从输入元素本身转移到JSX元素中的状态变量。因此，无论是采用传统的输入方法来获取和提交密码，还是采用有状态组件来处理密码状态，您都应该感觉良好。两种方式都有效，并且具有相同的安全性。</p><p id="ec87" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lf">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lf">plain English . io</em></strong></a><em class="lf">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lf">免费周报</em> </strong> </a> <em class="lf">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lf">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lf">LinkedIn</em></strong></a><strong class="kc io"><em class="lf"/></strong><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lf">YouTube</em></strong></a><strong class="kc io"><em class="lf">，以及</em></strong><em class="lf"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lf">不和</em> </strong> </a>  <em class="lf">对成长黑客感兴趣？检查</em> <a class="ae jz" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lf">电路</em> </strong> </a> <strong class="kc io"> <em class="lf">。</em> </strong></p></div></div>    
</body>
</html>