<html>
<head>
<title>How to Use Spectator to Test your Angular Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用旁观者测试您的角度分量</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-spectator-to-test-your-angular-components-a125c95cf24b?source=collection_archive---------2-----------------------#2022-03-13">https://javascript.plainenglish.io/how-to-use-spectator-to-test-your-angular-components-a125c95cf24b?source=collection_archive---------2-----------------------#2022-03-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3ab9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用示例应用程序的操作指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9cfff5ef5050876ab72ef2dbb004425d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xM9LIkTrN8ydWgRrz0x1_A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@austindistel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Austin Distel</a> on <a class="ae kv" href="https://unsplash.com/collections/96621150/software-development-and-testing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e523" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我一直在用<a class="ae kv" href="https://ngneat.github.io/spectator/" rel="noopener ugc nofollow" target="_blank">旁观者</a>来测试我的Angular应用程序。它是我在目前公司和个人项目中的测试工具。它的特点足以解释为什么。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/5ec82cf42642c8ed0da17e47d6a24822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*z-7xjss7h-1XH5ic8YHkGg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Spectator’s features from github.com/ngneat/spectator.</figcaption></figure><p id="20ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将带您了解如何使用旁观者来测试一个带有使用服务的组件的角度应用程序。关于如何使用旁观者，有很好的文档。然而，本文将把重点放在如何在一个示例的Angular应用程序中使用它。希望这能帮助您在现有应用程序中快速开始使用旁观者测试。我的帖子假设你有一些用RxJS构建Angular应用程序的经验。</p><h1 id="0f3e" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">示例应用程序</h1><p id="2223" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">我们将在我之前的一篇博客文章<a class="ae kv" href="https://betterprogramming.pub/unsubscribing-multiple-observables-in-angular-46c9c4833ffc" rel="noopener ugc nofollow" target="_blank"> <em class="lt">中的示例应用程序的修改版本中添加旁观者测试如何在角度</em> </a>中自动取消多个可观察项的订阅。</p><p id="34de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快速回顾一下。</p><h2 id="6edf" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">看起来怎么样</h2><blockquote class="nd ne nf"><p id="1104" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated">我们有一个带有两个GitHub搜索框的web应用程序，一个用于搜索存储库，另一个用于搜索用户。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/1808fd030da92aa6e07c8a392f8de248.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*o8JjtdiFc7g8nXdPtHtXVw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Screenshot of the sample web app by the author.</figcaption></figure><blockquote class="nd ne nf"><p id="6eff" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated">搜索结果将显示在搜索框下方。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/9ea1da173776abcaada4f78fc0e7d4e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*yIqSQGqrs10oVP9rBj4BUQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Screenshot of the sample web app by the author.</figcaption></figure><h2 id="2a48" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">它在引擎盖下是如何工作的</h2><p id="67f9" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">让我们简单回顾一下我们的示例应用程序是如何在幕后工作的。</p><blockquote class="nd ne nf"><p id="1d71" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated">在任何搜索框中输入文本后，我们的web应用程序都会调用GitHub Search API。为了实现这一点，我们需要订阅我们的formControls valueChanges。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/83b099bf87b88b12e502e706fe0d2f20.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*K4VE7j7y26Ssx7dGOYWNZQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">AppComponent and GithubService.</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source code example on GitHub by the author.</figcaption></figure><blockquote class="nd ne nf"><p id="648f" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated">线路<code class="fe no np nq nr b"><em class="iq">this.searchSubject$.next(searchString)</em></code>“发出”调用GitHub搜索应用编程接口的信号。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source code example on GitHub by the author.</figcaption></figure><blockquote class="nd ne nf"><p id="ac15" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated">我们的结果将在我们的模板中呈现。</p></blockquote><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="6086" class="mr lv iq nr b gy nw nx l ny nz">&lt;div *ngFor="let result of results$ | async"&gt;<br/>  &lt;div&gt;<br/>    &lt;a [href]="result.html_url" target="_blank"&gt;{{<br/>      result.name || result.login<br/>    }}&lt;/a&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><h1 id="0b13" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">安装观众</h1><p id="57d0" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">安装很简单。从他们的医生那里:</p><blockquote class="nd ne nf"><p id="bf99" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated">NPM</p><p id="9752" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated"><code class="fe no np nq nr b">npm install @ngneat/spectator --save-dev</code></p><p id="db75" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated">故事</p><p id="00f4" class="kw kx lt ky b kz la jr lb lc ld ju le ng lg lh li nh lk ll lm ni lo lp lq lr ij bi translated"><code class="fe no np nq nr b">yarn add @ngneat/spectator --dev</code></p></blockquote><h1 id="786c" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">设置观众</h1><p id="d9c5" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">在我们的单元测试文件<code class="fe no np nq nr b"><a class="ae kv" href="https://github.com/ardydedase/spectator-sample/blob/main/src/app/app.component.spec.ts" rel="noopener ugc nofollow" target="_blank">app.component.spec.ts</a></code>中，我们将导入我们的组件和旁观者依赖项。</p><h2 id="d62e" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">设置组件工厂</h2><p id="c0a0" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">我们的检测需要《旁观者》包装中的<code class="fe no np nq nr b">Spectator</code>和<code class="fe no np nq nr b">createComponentFactory</code>。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="7d55" class="mr lv iq nr b gy nw nx l ny nz">import { AppComponent } from './app.component';<br/>import { Spectator, createComponentFactory } from '<a class="ae kv" href="http://twitter.com/ngneat/spectator" rel="noopener ugc nofollow" target="_blank">@ngneat/spectator</a>';</span></pre><p id="6e92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe no np nq nr b">createComponentFactory</code>初始化我们的组件工厂。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="a602" class="mr lv iq nr b gy nw nx l ny nz">let spectator: Spectator&lt;AppComponent&gt;;<br/>const createComponent = createComponentFactory(AppComponent);</span></pre><p id="81e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在每次测试之前创建我们的组件工厂。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="03e4" class="mr lv iq nr b gy nw nx l ny nz">beforeEach(() =&gt; spectator = createComponent());</span></pre><h2 id="4d95" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">导入依赖项</h2><p id="e344" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">我们的<code class="fe no np nq nr b">AppComponent</code>依赖于<code class="fe no np nq nr b">GithubService</code>来调用GitHub的API。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="80ce" class="mr lv iq nr b gy nw nx l ny nz">import { GithbService } from './github.service';</span></pre><p id="368d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们创建观众组件时，声明<code class="fe no np nq nr b">GithubService</code>为提供者。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="79c7" class="mr lv iq nr b gy nw nx l ny nz">const createComponent = createComponentFactory({<br/>    component: AppComponent,<br/>    providers: [<br/>      { provide: GithubService, useValue: {} }<br/>    ],<br/>});</span></pre><p id="fb9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们不像上面的<code class="fe no np nq nr b">GithubService</code>那样导入组件的依赖项，我们将在下面的截图中得到类似的错误消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/97518c81bc34dd69e3cbd139aa5b32b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*24Ho8i15k-DPs15lGy-QkA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Error message when there’s a missing dependency in the unit test file.</figcaption></figure><h2 id="a8bc" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">验证它是否工作</h2><p id="7ec9" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">我们可以通过添加一个测试来验证我们的基本设置是否正常工作，这个测试将检查我们的组件是否被成功创建。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="ac76" class="mr lv iq nr b gy nw nx l ny nz">it('should create', () =&gt; {<br/>  expect(spectator.component).toBeTruthy();<br/>});</span></pre><p id="4ef7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的基本设置如下所示。我们现在可以运行一个测试来检查是否成功创建了一个观众组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source code example by the author.</figcaption></figure><h1 id="3913" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">使用init方法进行单元测试</h1><p id="7fa2" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">我的示例应用程序初始化了<code class="fe no np nq nr b">ngOnInit</code>中的所有可观察对象。让我们先重写这段代码，让我们的应用程序更容易测试。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source code example on GitHub by the author.</figcaption></figure><p id="3a88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将把我们的<code class="fe no np nq nr b">formControl</code>可观察订阅<code class="fe no np nq nr b">searchUsersFormControl</code>和<code class="fe no np nq nr b">searchRepoesFormControl</code>分别转移到单独的方法<code class="fe no np nq nr b">initSearchUsers()</code>和<code class="fe no np nq nr b">initSearchRepos()</code>中。</p><p id="19ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是为搜索用户，这将是类似的搜索库。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">this.initSearchUsers() will be called from ngOnInit().</figcaption></figure><p id="e763" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的方法<code class="fe no np nq nr b">initSearchUsers()</code>和<code class="fe no np nq nr b">initSearchRepos()</code>将从<code class="fe no np nq nr b">ngOnInit()</code>调用。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="adc7" class="mr lv iq nr b gy nw nx l ny nz">ngOnInit(): void {<br/>  //...<br/>  this.initSearchUsers();<br/>  this.initSearchRepos();<br/>}</span></pre><h1 id="d384" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">向我们的组件添加测试</h1><p id="2906" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">在我们引入了<code class="fe no np nq nr b">initSearchUsers()</code>和<code class="fe no np nq nr b">initSearchRepos()</code>来分解我们的<code class="fe no np nq nr b">ngOnInit</code>声明之后，我们的组件更容易测试。这两种方法的测试是相似的。我将为<code class="fe no np nq nr b">initSearchUsers()</code>添加测试，这只是一个例子。</p><h2 id="c42b" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">断言从可观测量发出的值</h2><p id="246a" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">当测试observables时，有时我们需要在调用我们想要测试的方法之前，首先在<code class="fe no np nq nr b">subscribe</code>回调中声明断言。</p><p id="7cf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了测试<code class="fe no np nq nr b">initSearchUsers()</code>是否正常工作，必须满足两个条件:</p><ol class=""><li id="741c" class="ob oc iq ky b kz la lc ld lf od lj oe ln of lr og oh oi oj bi translated">作为输入输入到<code class="fe no np nq nr b">searchUsersFormControl</code>的搜索值应该触发<code class="fe no np nq nr b">searchSubject$ </code> observable。如果搜索值为空，那么它不应该触发<code class="fe no np nq nr b">searchSubject$</code>可观察值。</li><li id="30e4" class="ob oc iq ky b kz ok lc ol lf om lj on ln oo lr og oh oi oj bi translated">搜索结果是从<code class="fe no np nq nr b">results$</code>可观察点发出的。</li></ol><p id="ebee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将订阅<code class="fe no np nq nr b">searchSubject$</code>来检查发出的值是否正确。无论输入到<code class="fe no np nq nr b">searchUsersFormControl</code>的搜索值是多少，都应该触发<code class="fe no np nq nr b">searchSubject$</code>观察值:</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="7155" class="mr lv iq nr b gy nw nx l ny nz">spectator.component.searchSubject$.subscribe(res =&gt; {<br/>  expect(res).toBe(searchTerm);<br/>  done();<br/>});</span></pre><p id="fb65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将对可观测的<code class="fe no np nq nr b">results$</code>做同样的事情。我们的组件将根据搜索类型返回搜索结果:存储库或用户。</p><p id="c5da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果我们有一个mock为用户搜索返回100个结果。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="ba26" class="mr lv iq nr b gy nw nx l ny nz">spectator.component.results$.subscribe(res =&gt; {<br/>  expect(res.total_count).toBe(100);<br/>  done();<br/>});</span></pre><p id="0b28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么我们应该期望我们的用户搜索的总结果是100。</p><h2 id="efbf" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">嘲笑服务</h2><p id="1b82" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">在我们的断言被设置在我们的observables中之后，让我们模拟服务的搜索结果。使用Spectator模仿服务很简单。</p><p id="a2ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从注入服务开始。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="f6f4" class="mr lv iq nr b gy nw nx l ny nz">const githubService = spectator.inject(GithubService);</span></pre><p id="5804" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，分配模拟返回值。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="12ca" class="mr lv iq nr b gy nw nx l ny nz">githubService.searchUsers.andReturn(of({<br/>  total_count: 100,<br/>}));</span></pre><h2 id="cad8" class="mr lv iq bd lw ms mt dn ma mu mv dp me lf mw mx mg lj my mz mi ln na nb mk nc bi translated">调用方法</h2><p id="0248" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">有了我们的断言和模拟，我们现在就可以调用我们想要测试的方法了。这就是<code class="fe no np nq nr b">initSearchUsers</code>和<code class="fe no np nq nr b">initSearchRepos</code>派上用场的地方。</p><p id="302f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">初始化我们的<code class="fe no np nq nr b">searchUsersFormControl</code>可观测性。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="8ed0" class="mr lv iq nr b gy nw nx l ny nz">spectator.component.initSearchUsers();</span></pre><p id="78c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后设置我们的<code class="fe no np nq nr b">searchUsersFormControl</code>的值。就像用户在我们的搜索输入中键入搜索文本一样。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="8387" class="mr lv iq nr b gy nw nx l ny nz">spectator.component.searchUsersFormControl.setValue(searchTerm);</span></pre><p id="7952" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们完整的测试文件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="9fd9" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">你自己试试</h1><p id="d4c3" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">代码可以在GitHub上找到。</p><div class="op oq gp gr or os"><a href="https://github.com/ardydedase/spectator-sample" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">GitHub-ardydedase/旁观者-示例</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">此项目是使用Angular CLI版本13.2.0生成的。为开发服务器运行ng serve。导航到…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">github.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg kp os"/></div></div></a></div><p id="c936" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">克隆repo后，安装软件包。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="79ef" class="mr lv iq nr b gy nw nx l ny nz">npm install</span></pre><p id="befe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进行测试。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="c91a" class="mr lv iq nr b gy nw nx l ny nz">ng test</span></pre><p id="987d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会得到下面类似的输出。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/e5bd2ded4878eccca7923eee2b4e59fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*68mUXe9VI4wEOJuP2RZltQ.png"/></div></div></figure><p id="e2ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这个故事，你可能也会喜欢我关于Angular的其他故事:</p><div class="op oq gp gr or os"><a href="https://betterprogramming.pub/unsubscribing-multiple-observables-in-angular-46c9c4833ffc" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">如何在Angular中自动退订多个可观测量</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">让我们使用异步管道和RxJS操作符的力量</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">better编程. pub</p></div></div><div class="pb l"><div class="pi l pd pe pf pb pg kp os"/></div></div></a></div><div class="op oq gp gr or os"><a href="https://betterprogramming.pub/why-i-prefer-to-use-the-parameter-object-pattern-in-angular-pipes-7fd999060cb5" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">为什么我喜欢在角形管道中使用参数对象模式</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">而不是直接传递参数</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">better编程. pub</p></div></div><div class="pb l"><div class="pj l pd pe pf pb pg kp os"/></div></div></a></div><div class="op oq gp gr or os"><a href="https://blog.ardy.me/membership" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">通过我的推荐链接加入媒体</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">阅读Ardy Gallego Dedase(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">blog.ardy.me</p></div></div><div class="pb l"><div class="pk l pd pe pf pb pg kp os"/></div></div></a></div><p id="91ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lt">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lt">说白了就是</em> </strong> </a> <em class="lt">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lt">免费周报</em> </strong> </a> <em class="lt">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="lt">Twitter</em></strong></a><em class="lt">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="lt">LinkedIn</em></strong></a><em class="lt">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lt">社区</em> </strong> </a> <em class="lt">。</em></p></div></div>    
</body>
</html>