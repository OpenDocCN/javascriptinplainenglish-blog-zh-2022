<html>
<head>
<title>What Fixing a Bug Looks Like</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复一个Bug是什么样子</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-fixing-a-bug-looks-like-a4289d3113?source=collection_archive---------22-----------------------#2022-05-19">https://javascript.plainenglish.io/what-fixing-a-bug-looks-like-a4289d3113?source=collection_archive---------22-----------------------#2022-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e5c957500534fdee10aa4b34f09a2f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N-HfyqOVFIKdJMX0"/></div></div></figure><p id="2339" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">修复bug是不可或缺的编程活动。编写没有错误的代码是不可能的——你总是从某个东西开始，测试它，然后修复任何错误。处理bug的体验在你自己做的项目和工作中的商业项目之间是非常不同的。在本文中，我展示了我是如何处理工作中的新bug的。</p><h1 id="42fa" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">虫子是从哪里来的</h1><p id="912c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">我遇到的大多数错误都来自我的同事，他们在服务台或客户成功岗位上与客户密切合作。他们在帮助客户解决问题或实现目标的同时发现问题。一些问题的解决方案是调整应用程序中的设置或更新数据库中损坏的数据:在这种情况下，服务台人员会解决这些问题。当他们看不到自己解决问题的方法时，他们就开出了发展的罚单。这些票最终会送到我的办公桌上。</p><h1 id="563d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">它是一个bug吗？</h1><p id="5f95" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">与业务应用程序相关的bug可能非常微妙——以至于不清楚给定的行为是否正确。有时，这在很大程度上取决于上下文:也许一个客户有一个他们喜欢的行为，但是当前的行为对其他客户来说是最佳的。</p><p id="52a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在大多数情况下，是某个特定客户的需求触发了票证的创建。因此，我们需要确保<em class="lz">修复</em>不会让所有其他客户不高兴。为了避免这种倒退，我们经常在一个更大的群体中讨论需要哪种行为。如果不同的客户需要不同的行为，也许我们需要在每个客户的基础上控制这一部分。在这些情况下，错误报告变成了一个特性请求。</p><h1 id="6f83" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">复制bug</h1><p id="0355" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">当我们同意一些行为是出乎意料的，我需要一种方法来看它是如何发生的。否则，我将会在看不到我的更改的影响的情况下更改代码。盲目地调整代码可能会导致引入更多的错误。我们对应用程序的设置有点复杂:我可以在本地重现大多数问题，但对于一些问题，我需要使用外部服务器。</p><h1 id="5302" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">在本地</h1><p id="e90e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在开发人员的机器上重现问题是最好的情况。这允许在处理票据时快速反馈循环。系统的大部分被很好地隔离重新创建，以在我维护的应用程序中创建本地环境。当我可以在我的本地机器上重现有问题的行为时，我有一个简短的<a class="ae ma" href="https://how-to.dev/how-to-speed-up-your-progress-with-feedback" rel="noopener ugc nofollow" target="_blank">反馈循环</a>用于我的更改，我可以快速迭代代码并修复bug，而不会浪费很多时间。</p><p id="d6b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不幸的是，我们的项目有一些复杂性，使得它不可能在本地重现一些错误。对于开发环境，系统的一些部分是不同的:</p><ul class=""><li id="16d0" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">非生产环境只能使用部分旧数据库，以及</li><li id="6665" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">我们为本地和测试环境关闭的第三方集成——比如在订单上订购包裹运输。</li></ul><h1 id="2716" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">在测试服务器上</h1><p id="31e7" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">对于我的工作，我们为测试环境复制了一些客户数据，它比本地设置更接近实际应用程序。如果错误不是在本地发生的，那么测试服务器就是下一个要检查的地方。这样做远非完美；任何修正都需要走很长的路，我才能在行动中测试它们。</p><p id="77ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在专用的测试服务器上进行测试比直接在产品上进行测试要好得多，因为如果事情变得非常糟糕，我们仍然可以在客户受到影响之前修复它们。</p><h1 id="5534" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">在生产上</h1><p id="57ed" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">最后的希望是亲眼看到错误。如果该错误是客户特有的，则可能取决于他们帐户或数据中设置的确切组合。在产品上重现bug有助于保持理智:它可以确认bug报告没有出错。但是使用产品作为测试区域，即使是最微小的代码更改也是一个坏主意——它很慢，如果我搞砸了什么，客户将会受到影响。</p><h1 id="03bc" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">将票证返回给其作者</h1><p id="f748" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果我自己不能复制这个bug，我也无能为力。在这种情况下，我请求检票员提供更多信息，有时我甚至通过屏幕共享与他们通话，这样我们就不会花太多时间来同步。</p><p id="234b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">许多事情都可能导致bug。</p><ul class=""><li id="4310" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">也许票证遗漏了一些关于bug应该出现的场景的关键细节，或者</li><li id="1f86" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">也许我漏掉了一些细节，或者</li><li id="b4de" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">也许这只是一个小故障</li></ul><p id="e532" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一种可能性是，有人在最初的错误报告后修复了这个问题。</p><h1 id="3d62" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">在代码中查找源代码</h1><p id="0fb5" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在讨论了预期的行为并看到了运行中的错误之后，我准备浏览代码并研究它的工作方式。根据代码质量的不同，在一个组织良好的项目中，这个任务可能相当简单，如果我们有一个“意大利面条代码”的情况，这个任务可能相当复杂。</p><h1 id="9bee" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">修复+添加测试</h1><p id="adf7" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">最后一步是改变行为并测试改变。作为绝对的最低要求，我需要看到我的bug从应用程序中消失了，所以我重复复制步骤，看看结果是否比以前更好。</p><p id="8904" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果应用程序表现正常，那么下一步就是添加一些自动化测试。最直接的方法是向您刚刚更改的方面添加一些单元测试。完整的覆盖包括用端到端(E2E)测试检查用户体验的变化。你可以在我的其他文章中读到更多关于测试各个方面的内容:</p><ul class=""><li id="8dde" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated"><a class="ae ma" href="https://how-to.dev/how-the-lack-of-internal-state-makes-your-classes-easier-to-test-and-refactor" rel="noopener ugc nofollow" target="_blank">缺少内部状态如何让你的代码更易测试</a></li><li id="42aa" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><a class="ae ma" href="https://betterprogramming.pub/how-to-add-end-to-end-tests-to-a-project-99297dd31f0" rel="noopener ugc nofollow" target="_blank">如何将E2E添加到您的项目中</a></li></ul><h1 id="d3ce" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">想多读点？</h1><p id="bae4" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果你觉得这篇文章有帮助，你可以关注我，下周当我发表新的东西时，你会收到通知。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="e61e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lz">最初发布于</em><a class="ae ma" href="https://how-to.dev/what-fixing-a-bug-looks-like" rel="noopener ugc nofollow" target="_blank"><em class="lz">https://how-to . dev</em></a><em class="lz">。</em></p><p id="90cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lz">更多内容看</em> <a class="ae ma" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lz">说白了。报名参加我们的</em> <a class="ae ma" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lz">免费周报</em> </strong> </a> <em class="lz">。关注我们关于</em><a class="ae ma" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="lz">Twitter</em></strong></a><em class="lz">和</em><a class="ae ma" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="lz">LinkedIn</em></strong></a><em class="lz">。查看我们的</em> <a class="ae ma" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lz">社区不和谐</em> </strong> </a> <em class="lz">加入我们的</em> <a class="ae ma" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lz">人才集体</em> </strong> </a> <em class="lz">。</em></strong></a></p></div></div>    
</body>
</html>