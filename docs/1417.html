<html>
<head>
<title>How to Create the LWC Multi-Select Combobox that Salesforce is Still Missing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建Salesforce仍然缺少的LWC多选组合框</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-the-lwc-multi-select-combobox-that-salesforce-is-still-missing-c7bf3a2850dd?source=collection_archive---------0-----------------------#2022-03-23">https://javascript.plainenglish.io/how-to-create-the-lwc-multi-select-combobox-that-salesforce-is-still-missing-c7bf3a2850dd?source=collection_archive---------0-----------------------#2022-03-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="48ab" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Salesforce Lightning设计系统(SLDS)创建您自己的可重用自定义组件</h2></div><p id="14f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你看看各种系统和网络应用，多选下拉是一种常见的模式。但是，如果您查看Lightning Web组件的<a class="ae lb" href="https://developer.salesforce.com/docs/component-library/overview/components" rel="noopener ugc nofollow" target="_blank"> Salesforce组件引用</a>，仍然只有一个提供了单选的<a class="ae lb" href="https://developer.salesforce.com/docs/component-library/bundle/lightning-combobox/example" rel="noopener ugc nofollow" target="_blank">组合框。如这里的</a><a class="ae lb" href="https://developer.salesforce.com/docs/component-library/bundle/lightning-combobox/documentation" rel="noopener ugc nofollow" target="_blank">所述</a>，Salesforce推荐的解决方案是使用<a class="ae lb" href="https://developer.salesforce.com/docs/component-library/bundle/lightning-dual-listbox/example" rel="noopener ugc nofollow" target="_blank"> lightning-dual-listbox </a>进行多值选择。然而，与你在网上所习惯的相比，这并不令人满意。此外，双重列表框也占据了屏幕上相对较大的空间。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/2486bcc3c338587e25f5c9cebaf2dc5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SxZOqs1fFRifxLAVcbehqw.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Who would use a <a class="ae lb" href="https://developer.salesforce.com/docs/component-library/bundle/lightning-dual-listbox/example" rel="noopener ugc nofollow" target="_blank">Lightning Dual Listbox</a> instead of a Multi-Select Combobox? (created with <a class="ae lb" href="https://www.kapwing.com/meme-maker" rel="noopener ugc nofollow" target="_blank">Kapwing Meme Generator</a>)</figcaption></figure><p id="843f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://www.lightningdesignsystem.com/" rel="noopener ugc nofollow" target="_blank">SLDS</a>(sales force Lightning设计系统)甚至包括早期的多选组合框的<a class="ae lb" href="https://www.lightningdesignsystem.com/components/combobox/#Multiple-selections" rel="noopener ugc nofollow" target="_blank">蓝图。那么为什么没有相应的现成组件呢？没关系，我们将简单地基于SLDS模板实现我们自己的多选组合框。这也允许我们使用现有的实用程序类，而不必自己用自定义CSS定义所有样式。</a></p><h1 id="d1f7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">LWC组合框的结构</h1><p id="2002" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我们的多选组合框由以下两部分组成:</p><ul class=""><li id="0441" class="mp mq iq kh b ki kj kl km ko mr ks ms kw mt la mu mv mw mx bi translated"><strong class="kh ir">多选组合框</strong> -应该提供不同配置选项的组合框父组件。</li><li id="4403" class="mp mq iq kh b ki my kl mz ko na ks nb kw nc la mu mv mw mx bi translated"><strong class="kh ir">多选组合框项目</strong> -代表父组件中单个可选项目的子组件。</li></ul><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nd"><img src="../Images/d21223dde744274621f10235ea5d67cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGy7GZY3ImyNC4jKHV0jwA.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Multi-Select Combobox component structure</figcaption></figure><h1 id="5d89" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建父combobox组件</h1><p id="555b" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我们的组件应该具有官方<a class="ae lb" href="https://developer.salesforce.com/docs/component-library/bundle/lightning-combobox/specification" rel="noopener ugc nofollow" target="_blank"> lightning-combobox </a>的基本功能、参数和行为，此外，它不仅应该支持单选，还应该支持多选。因此，我们需要首先定义适当的公共属性，并实现它们背后相应的逻辑。</p><p id="8c4d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了标准的combobox属性之外，还有一个<em class="ne"> singleSelect </em>属性，用于决定单选模式和多选模式。此外，还有一个名为<em class="ne"> showPills </em>的附加属性，它允许在多选模式下将当前选择的选项显示为组合框下方的药丸容器。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="a3d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于父组件的模板，我们尽可能遵循SLDS模板。然而，我们不能只使用现有的SLDS实用程序类，还必须另外定义一些自己的CSS类。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="8b77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模板中附加CSS类的定义如下所示:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="ad5c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">生成子combobox项</h1><p id="273a" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">在我们实现了父组件之后，我们需要关注combobox的单个可选项目。我们的子组件将从父组件接收要显示的项目，父组件具有以下属性:<em class="ne">标签</em>和<em class="ne">值</em>。此外，当用户选择相应选项时，它随后还接收<em class="ne">选择的</em>状态。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="58a2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的模板中，与父组件不同，这次我们不需要定制样式。使用现有的SLDS实用程序就足够了。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="029e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就这样，我们的组件现在可以使用了！</p><h1 id="a6e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">如何使用我们新的LWC组合框？</h1><p id="a74d" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在要使用我们的组件，我们可以简单地将它添加到HTML模板中的任何父组件，如下所示:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="297a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所看到的，我们已经指定了需要从父组件传递到combobox的可选选项以及一个“onchange”侦听器，这样我们就可以从父组件中访问当前选中的选项。为了实现这两个目标，代码如下所示:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="79b6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在组件构建过程中，我使用了本地的LWC开发服务器，特别是在之后的测试中。如果你对使用本地开发感兴趣，我也写了一个<a class="ae lb" href="https://medium.com/@svierk/local-development-for-lightning-web-components-7a3fdc1c4b7d" rel="noopener">指南，里面有安装说明</a>。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nh"><img src="../Images/af842646fc36f13a897b1da7f6936cb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WrIe8vWhnDGLkBjLZKLGgQ.gif"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Preview of the Multi-Select Combobox</figcaption></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="680e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">GitHub上提供了完整的源代码，包括JEST单元测试和JSDoc注释:</p><div class="np nq gp gr nr ns"><a href="https://github.com/svierk/awesome-lwc-collection/tree/main/force-app/main/default/lwc/multiSelectCombobox" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">awesome-LWC-collection/force-app/main/default/LWC/multiSelectCombobox at main…</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">⚡️收集了一些现成的Lightning Web组件，可能会对您的SFDX项目有所帮助…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og lm ns"/></div></div></a></div><p id="05f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ne">更多内容看</em> <strong class="kh ir"> <em class="ne"> </em> </strong> <a class="ae lb" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="ne">说白了. io </em> </strong> </a> <em class="ne">。报名参加我们的</em> <a class="ae lb" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="ne">免费周报</em> </strong> </a> <em class="ne">。关注我们关于</em><a class="ae lb" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="ne">Twitter</em></strong></a><em class="ne">和</em><a class="ae lb" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="ne">LinkedIn</em></strong></a><em class="ne">。加入我们的</em> <a class="ae lb" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="ne">社区</em> </strong> </a> <em class="ne">。</em></p></div></div>    
</body>
</html>