<html>
<head>
<title>Create a Simple Pagination Component in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular中创建一个简单的分页组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-simple-pagination-component-in-angular-17b909ea03e1?source=collection_archive---------3-----------------------#2022-08-26">https://javascript.plainenglish.io/create-a-simple-pagination-component-in-angular-17b909ea03e1?source=collection_archive---------3-----------------------#2022-08-26</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="6dc5" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">如何在Angular中创建分页器的循序渐进的初学者指南。</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/47a0fe1ef5fbbdd63e561590feedc196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abRK6HE9kFFdGZjtj0bYVg.png"/></div></div></figure><p id="6fb8" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">随着二十一世纪的无限加载UX，分页对于现代web应用程序来说已经成为过去。然而，将结果列表分成页面仍然是确保低内存占用和一致UI的有效方法。特别是在许多后台应用程序中，分页优于无限加载。今天，让我们回到基础，学习如何在Angular中创建这样的分页器:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj lp"><img src="../Images/dbe7d1d04abd183a8acd2c378e79dec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0tQZEFOFt0wjBFORv0F9aA.png"/></div></div><figcaption class="lq lr gk gi gj ls lt bd b be z dk">Fig: Paginator that we will be creating</figcaption></figure><h1 id="3ea3" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">第一步:设计</h1><p id="c235" class="pw-post-body-paragraph ks kt ir ku b kv mm js kx ky mn jv la lb mo ld le lf mp lh li lj mq ll lm ln ik bi translated">使用Angular CLI或您喜欢的方法创建一个<code class="fe mr ms mt mu b">pagination</code>组件。在处理控制器之前，让我们来设计分页栏的样式:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mv mw l"/></div></figure><h1 id="ec52" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">第二步:输入</h1><p id="e382" class="pw-post-body-paragraph ks kt ir ku b kv mm js kx ky mn jv la lb mo ld le lf mp lh li lj mq ll lm ln ik bi translated">现在是研究控制器逻辑的时候了。用以下输入修饰控制器:</p><ul class=""><li id="52d6" class="mx my ir ku b kv kw ky kz lb mz lf na lj nb ln nc nd ne nf bi translated"><code class="fe mr ms mt mu b">currentPage</code> —表示当前页面。</li><li id="a675" class="mx my ir ku b kv ng ky nh lb ni lf nj lj nk ln nc nd ne nf bi translated"><code class="fe mr ms mt mu b">totalPages</code>——有多少页？</li><li id="b9b6" class="mx my ir ku b kv ng ky nh lb ni lf nj lj nk ln nc nd ne nf bi translated"><code class="fe mr ms mt mu b">size</code> —页面尺寸。</li><li id="708e" class="mx my ir ku b kv ng ky nh lb ni lf nj lj nk ln nc nd ne nf bi translated"><code class="fe mr ms mt mu b">windowSize</code> —活动链接的每一边应该有多少个链接可见？</li><li id="278f" class="mx my ir ku b kv ng ky nh lb ni lf nj lj nk ln nc nd ne nf bi translated"><code class="fe mr ms mt mu b">showFirstLastButton</code> —显示“第一个”和“最后一个”导航链接。如果<code class="fe mr ms mt mu b">false</code>，分页栏将只包含“上一页”和“下一页”链接，没有“第一页”和“最后一页”。</li><li id="3b7a" class="mx my ir ku b kv ng ky nh lb ni lf nj lj nk ln nc nd ne nf bi translated"><code class="fe mr ms mt mu b">routerLinkBase</code> —分页栏将被激活的页面的路由器链接。</li></ul><p id="a4b0" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">以下是输入的直观解释:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj lp"><img src="../Images/ce4f0f087a4db9023051c0d176828901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4h2XsWxOukSS0N_YcS6E6g.png"/></div></div></figure><p id="33d5" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">此时的控制器:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mv mw l"/></div></figure><h1 id="5492" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">第三步:计算左右页码</h1><p id="0db2" class="pw-post-body-paragraph ks kt ir ku b kv mm js kx ky mn jv la lb mo ld le lf mp lh li lj mq ll lm ln ik bi translated">我们只知道当前页面。要在分页栏中显示相邻的页面，让我们计算最近的页码:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mv mw l"/></div></figure><h1 id="cd95" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">步骤4:路由器链接和查询参数</h1><p id="215f" class="pw-post-body-paragraph ks kt ir ku b kv mm js kx ky mn jv la lb mo ld le lf mp lh li lj mq ll lm ln ik bi translated">我们打算应用分页的列表肯定会有路径，比如说——<code class="fe mr ms mt mu b">/movies.</code>在角度语言学中，叫做<em class="lo">路由器链接</em>。那是我们的<strong class="ku is"> routerLinkBase </strong>。点击页码时，角度路由器将使用<code class="fe mr ms mt mu b">routerLinkBase</code>和<code class="fe mr ms mt mu b">page</code> &amp; <code class="fe mr ms mt mu b">size</code>查询参数进行导航。因此，每次点击后，URL将如下所示:</p><pre class="kh ki kj kk gu nl mu nm nn aw no bi"><span id="84e5" class="np lv ir mu b gz nq nr l ns nt">[1-clicked] /movies?page=1&amp;size=24<br/>[2-clicked] /movies?page=2&amp;size=24<br/>[3-clicked] /movies?page=3&amp;size=24<br/>...</span></pre><p id="6ff2" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">为了实现这一点，在链接上添加<code class="fe mr ms mt mu b">routerLink</code>指令和<code class="fe mr ms mt mu b">queryParams</code>输入。</p><pre class="kh ki kj kk gu nl mu nm nn aw no bi"><span id="d113" class="np lv ir mu b gz nq nr l ns nt">&lt;ul class="navlinks"&gt;<br/>    &lt;li <strong class="mu is">*ngIf="showFirstLastButton"</strong>&gt;<br/>        &lt;a<br/>            <strong class="mu is">[queryParams]="{ size: size, page: 1 }"<br/>            [routerLink]="routerLinkBase"<br/>            queryParamsHandling="merge"</strong><br/>            class="navlink"<br/>        &gt;<br/>            First<br/>        &lt;/a&gt;<br/>    &lt;/li&gt;<br/>    &lt;li&gt;<br/>        &lt;a<br/>            <strong class="mu is">[queryParams]="{ size: size, page: currentPage - 1 }"<br/>            [routerLink]="routerLinkBase"<br/>            queryParamsHandling="merge"</strong><br/>            class="navlink"<br/>        &gt;<br/>            &lt; Prev<br/>        &lt;/a&gt;<br/>    &lt;/li&gt;<br/>    &lt;li <strong class="mu is">*ngFor="let page of getNavigablePages()"</strong>&gt;<br/>        &lt;a<br/>            <strong class="mu is">[queryParams]="{ size: size, page: page }"<br/>            [routerLink]="routerLinkBase"<br/>            queryParamsHandling="merge"<br/>            [class.active]="page === currentPage"</strong><br/>            class="navlink"<br/>        &gt;<br/>            {{ page }}<br/>        &lt;/a&gt;<br/>    &lt;/li&gt;<br/>    &lt;li&gt;<br/>        &lt;a<br/>            <strong class="mu is">[queryParams]="{ size: size, page: currentPage + 1 }"<br/>            [routerLink]="routerLinkBase"<br/>            queryParamsHandling="merge"</strong><br/>            class="navlink"<br/>        &gt;<br/>            Next &gt;<br/>        &lt;/a&gt;<br/>    &lt;/li&gt;<br/>    &lt;li <strong class="mu is">*ngIf="showFirstLastButton"</strong>&gt;<br/>        &lt;a<br/>            <strong class="mu is">[queryParams]="{ size: size, page: totalPages }"<br/>            [routerLink]="routerLinkBase"<br/>            queryParamsHandling="merge"</strong><br/>            class="navlink"<br/>        &gt;<br/>            Last<br/>        &lt;/a&gt;<br/>    &lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="023b" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">通过<code class="fe mr ms mt mu b">queryParamsHandling="merge"</code>,我们告诉angular路由器合并并覆盖现有的查询参数，这样任何其他与分页无关的查询参数都保持不变。</p><h1 id="f161" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">第五步:用法</h1><p id="0b26" class="pw-post-body-paragraph ks kt ir ku b kv mm js kx ky mn jv la lb mo ld le lf mp lh li lj mq ll lm ln ik bi translated">是时候使用刚出炉的组件了。当然，您的实现会因项目的底层REST API而有所不同。这里我只是展示了一个使用虚构API的示例:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mv mw l"/></div></figure><p id="b425" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">在这里，分页组件接收从活动URL获得的页面和大小输入。如果这些值最初不在查询参数中，那么<strong class="ku is">页面$ </strong>大小<strong class="ku is">大小$ </strong>流保存一些相同的默认值。接下来，每当在分页栏上单击一个新的页码时，活动URL的大小和页面查询参数都会改变，从而产生一个更新的<code class="fe mr ms mt mu b">movies$</code>流。我们可以在页面上看到新的结果。</p><h1 id="81ff" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated"><strong class="ak">结论</strong></h1><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nu mw l"/></div><figcaption class="lq lr gk gi gj ls lt bd b be z dk">Fig: Paginator in action</figcaption></figure><p id="836c" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">你可以看到分页器工作正常。虽然它有一个小故障——当页码靠近终端页面(第一页和最后一页)时，因为链接较少，所以条形会缩小。但是那是你要解决的问题！😉</p><p id="a4b6" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">在评论里告诉我，你是怎么解决的。感谢阅读！</p></div><div class="ab cl nv nw hv nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ik il im in io"><h2 id="cbc1" class="np lv ir bd lw oc od dn ma oe of dp me lb og oh mg lf oi oj mi lj ok ol mk om bi translated">完整代码</h2><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mv mw l"/></div></figure></div><div class="ab cl nv nw hv nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ik il im in io"><p id="8707" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated"><em class="lo">更多内容看</em> <a class="ae on" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku is"> <em class="lo">说白了。报名参加我们的</em> <a class="ae on" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku is"> <em class="lo">免费周报</em> </strong> </a> <em class="lo">。关注我们关于</em> <a class="ae on" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ku is"> <em class="lo">推特</em> </strong> </a>，<a class="ae on" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="lo">LinkedIn</em></strong></a><em class="lo">，</em><a class="ae on" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="lo">YouTube</em></strong></a><em class="lo">，</em> <a class="ae on" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku is"> <em class="lo">不和</em> </strong> </a> <em class="lo">。</em></strong></a></p></div></div>    
</body>
</html>