<html>
<head>
<title>Dynamic Imports: The Best Way to Improve an Angular App’s Performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动态导入:提高Angular应用程序性能的最佳方式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/dynamic-imports-the-best-way-to-improve-angular-application-performance-2295f25adf83?source=collection_archive---------0-----------------------#2022-03-31">https://javascript.plainenglish.io/dynamic-imports-the-best-way-to-improve-angular-application-performance-2295f25adf83?source=collection_archive---------0-----------------------#2022-03-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8dd0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用动态导入提高Angular应用程序性能的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c599700aaed9978e1e1ee3664b68cc11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wkArpBT6TmDNc_ZHIz4JiQ.png"/></div></div></figure><p id="1b6f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">惰性加载模块是提高初始加载时Angular应用程序性能的好方法。您只能通过使用角度路由器来实现这一点。</p><p id="9216" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">假设你不想使用路由，但仍然可以实现相同的行为，比如侧边栏面板，模态就是一个很好的用例。</p><p id="95da" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">创建一个角度项目来查看动态导入的效果。我将使用Angular CLI来简化您的工作。</p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="c852" class="lp lq in ll b gy lr ls l lt lu">ng n dynamic-imports</span></pre><p id="ddab" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一旦应用程序准备就绪，请确保运行“ng serve ”,并通过访问localhost:4200在浏览器中查看该应用程序。例如，我们将在应用程序组件中有一个按钮，当用户单击该按钮时，我们需要显示一个组件。我们把这个组件命名为“项目”。</p><p id="6ea5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一个非常简单的例子来理解Angular的一个强大的特性。</p><p id="e573" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你打开浏览器，查看网络，你会看到下面下载的文件的大小。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lv"><img src="../Images/a0d5f471cbd8ec3a3eb830b78b9f39d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MP589h5FAOF0ZIIRxfUUWA.png"/></div></div></figure><p id="3880" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们生成一个新模块，点击按钮的<em class="lw">显示<em class="lw">项目组件</em>。就这个例子来说，item组件的HTML除了“item works”之外不包含任何内容。当我们重新加载浏览器并注意到网络选项卡时，您会看到如下内容:</em></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="cc06" class="lp lq in ll b gy lr ls l lt lu">ng g module items</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lx"><img src="../Images/63f68ec2d09755deff3f09edacb18f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y45l5BgJ40FIyvbOhrme6g.png"/></div></div></figure><p id="06cc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">注意:看看main.js文件的大小(11.1 kB)</p><p id="76c5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用当前的方法，即使我们没有在UI中显示items组件，我们仍然在浏览器中下载它。在我们的例子中，它只有5KB，但是在任何真实世界的应用中，它可以是巨大的模块。</p><p id="8b7c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们知道了问题所在，让我们使用动态导入来解决这个问题。</p><p id="5d4b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，从应用程序模块导入中移除项目模块，并在应用程序组件中单击“让我们拥有以下代码”:</p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="faf1" class="lp lq in ll b gy lr ls l lt lu">import { Component, ViewChild, ViewContainerRef} from '@angular/core';</span><span id="8508" class="lp lq in ll b gy ly ls l lt lu">@Component({<br/>  selector: 'app-root',<br/>  template: `<br/>    APP works<br/>    &lt;button type="button" (click)="onShow()"&gt;Show items&lt;/button&gt;<br/>    &lt;ng-container #viewContainerRef&gt;&lt;/ng-container&gt;<br/>  `<br/>})<br/>export class AppComponent {<br/>  @ViewChild('viewContainerRef', { read: ViewContainerRef, static: true })<br/>  public readonly itemViewContainer!: ViewContainerRef</span><span id="60dc" class="lp lq in ll b gy ly ls l lt lu">  constructor() { }</span><span id="0d5b" class="lp lq in ll b gy ly ls l lt lu">  async onShow() {<br/>    const {ItemComponent} = await import('./items/item/item.component');<br/>    const resolvedComponent = this.itemViewContainer<br/>      .createComponent(ItemComponent);<br/>  }<br/>}</span></pre><p id="f23b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们在代码片段中分解我们正在尝试做的事情:</p><ul class=""><li id="91b0" class="lz ma in kq b kr ks ku kv kx mb lb mc lf md lj me mf mg mh bi translated">在onShow方法的第一行，我们手动导入items组件。</li><li id="7fd2" class="lz ma in kq b kr mi ku mj kx mk lb ml lf mm lj me mf mg mh bi translated">使用ViewContainerRef，我们可以动态地将items组件添加到视图中。</li></ul><p id="4b54" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，让我们在浏览器中运行它，看看上面的代码能得到什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/86ee01faa22affcbcdaebdabc22f8dbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kF6yJ37yZ1tQQS2ILvQ34g.png"/></div></div></figure><p id="e0d6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在上图中，您可能会注意到下载了一个2 KB的新文件，主文件恢复为8 KB。“src_app_items**”文件只有在用户请求时才会被下载。</p><p id="53d3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你可以在这里找到完整的工作示例<a class="ae mo" href="https://stackblitz.com/edit/angular-ivy-ssgwwg?file=src%2Fapp%2Fapp.component.ts" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="4713" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<a class="ae mo" href="https://medium.com/@manthenav01" rel="noopener"> Medium </a>或<a class="ae mo" href="https://twitter.com/SunilManthena08" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，阅读更多关于Angular和JavaScript的内容！</p><p id="b2a6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="lw">更多内容请看</em><a class="ae mo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lw">plain English . io</em></strong></a><em class="lw">。报名参加我们的</em> <a class="ae mo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lw">免费周报</em> </strong> </a> <em class="lw">。关注我们关于</em><a class="ae mo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lw">Twitter</em></strong></a><em class="lw">和</em><a class="ae mo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lw">LinkedIn</em></strong></a><em class="lw">。加入我们的</em><strong class="kq io"><em class="lw"/></strong><a class="ae mo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lw">社区不和谐</em> </strong> </a> <em class="lw">。</em></p></div></div>    
</body>
</html>