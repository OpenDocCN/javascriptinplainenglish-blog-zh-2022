<html>
<head>
<title>How to Use WebSockets in Vue 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Vue 3中使用WebSockets</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-websockets-in-vue-3-fb37d20627c0?source=collection_archive---------2-----------------------#2022-05-19">https://javascript.plainenglish.io/using-websockets-in-vue-3-fb37d20627c0?source=collection_archive---------2-----------------------#2022-05-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c217" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">WebSockets其实超级好用。请继续阅读并查看示例。</h2></div><p id="d924" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">阅读<a class="ae ky" href="https://betterprogramming.pub/serverless-websocket-how-and-why-with-examples-e83b05c14040" rel="noopener ugc nofollow" target="_blank">这里</a>了解如何建立一个WebSocket无服务器后端。总体思路是创建一个从客户机到服务器的双向连接，我们可以利用它将消息“推”到客户机，而不是普通的请求-响应方法。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/077ddef7257af8ad08d192c15847bf82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OO8dgiEVtn9Lv1A_icx92A.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Vue 3 and Websockets</figcaption></figure><p id="40bb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最简单的方法是使用本地WebSocket API，它在所有现代浏览器中都可用。然而，您可以使用一些WebSocket库来使您的生活变得更加轻松。这些库可以帮助数据格式化、重试逻辑等等。最著名的图书馆之一是https://socket.io/ T4的T3图书馆。</p><p id="2e93" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了简化示例，我将向您展示一个Vue 3项目中的本机实现。</p><h2 id="2b9a" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">语境</h2><p id="9cc7" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">这个想法很简单。我们想要创建一个简单的UI来显示WebSocket连接的结果。我要用这里描述的输出<a class="ae ky" href="https://betterprogramming.pub/serverless-websocket-how-and-why-with-examples-e83b05c14040" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mn"><img src="../Images/1444173d25ca7ab0b907f528d44e1947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JM8wv_R0kBXNJMUCX68Xpw.gif"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Socket Vue 3 output</figcaption></figure><p id="8219" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面是一个简单的例子，除了Vue 3没有使用任何依赖。我们所做的就是连接到一个WebSocket，并显示结果。</p><p id="0366" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以在下面看到确切的实现，但是由于我们依赖服务器将消息推送到客户端，您必须在本地运行<a class="ae ky" href="https://betterprogramming.pub/serverless-websocket-how-and-why-with-examples-e83b05c14040" rel="noopener ugc nofollow" target="_blank">代码</a>来实现上面的效果。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="mo mp l"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Vue 3 using native WebSockets</figcaption></figure><p id="7386" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于测试，您可以尝试注释掉在<code class="fe mq mr ms mt b">eventsFromServer</code>数组中注释的事件。</p><h2 id="3485" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">结论</h2><p id="76ed" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">WebSockets背后的想法可以创造一些非常好的功能。我实现的一个真实的用例是一个类似于脸书的“你的朋友正在写作”的功能，你有时会在聊天中看到。这类事情看起来有点像魔术，但所需要的只是一些WebSockets和一些状态。有了这个，你就可以告诉用户其他人是否在看他们正在看的同一个网站，或者是否有人正在写他们。</p><p id="783a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mu">保持联系！</em></p><p id="63a0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mu">更多内容请看</em><a class="ae ky" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mu">plain English . io</em></strong></a><em class="mu">。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mu">免费周报</em> </strong> </a> <em class="mu">。关注我们关于</em><a class="ae ky" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mu">Twitter</em></strong></a><em class="mu">和</em><a class="ae ky" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mu">LinkedIn</em></strong></a><em class="mu">。查看我们的</em> <a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mu">社区不和谐</em> </strong> </a> <em class="mu">加入我们的</em> <a class="ae ky" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mu">人才集体</em> </strong> </a> <em class="mu">。</em></p></div></div>    
</body>
</html>