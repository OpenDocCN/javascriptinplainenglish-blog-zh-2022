<html>
<head>
<title>Testing JS &amp; JSON Objects, Arrays, Object Arrays, Nested Objects, Sets, and Maps Using Chai.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Chai.js测试JS &amp; JSON对象、数组、对象数组、嵌套对象、集合和映射</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/testing-js-json-objects-arrays-object-arrays-nested-objects-sets-and-maps-using-chai-js-6bd04ac1e896?source=collection_archive---------5-----------------------#2022-05-25">https://javascript.plainenglish.io/testing-js-json-objects-arrays-object-arrays-nested-objects-sets-and-maps-using-chai-js-6bd04ac1e896?source=collection_archive---------5-----------------------#2022-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b99a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Chai库比较和测试JavaScript非原始/引用数据类型</h2></div><p id="6520" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://www.chaijs.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">柴</strong> </a>是一个流行的<strong class="kh ir">断言库，为</strong> <a class="ae lb" href="http://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> Node.js </strong> </a>。它既支持<strong class="kh ir"> BDD测试风格又支持</strong>TDD测试风格，并且可以<strong class="kh ir">与您选择的任何JavaScript测试框架</strong>配对(例如<a class="ae lb" href="https://mochajs.org/#assertions" rel="noopener ugc nofollow" target="_blank"> Mocha </a> + Chai)。</p><p id="3ac1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个快速指南中，让我们讨论如何使用Chai特性来比较和测试上述数据类型。</p><h2 id="130f" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">关于Chai.js语法和功能的重要说明</h2><ul class=""><li id="dea4" class="lv lw iq kh b ki lx kl ly ko lz ks ma kw mb la mc md me mf bi translated">柴提供了几个支持<strong class="kh ir"> TDD </strong>和<strong class="kh ir"> BDD </strong>样式的接口(<code class="fe mg mh mi mj b">assert</code>、<code class="fe mg mh mi mj b">should</code>、<code class="fe mg mh mi mj b">expect</code>)。</li><li id="bfa0" class="lv lw iq kh b ki mk kl ml ko mm ks mn kw mo la mc md me mf bi translated">柴支持两种主要的比较类型——<strong class="kh ir">严格</strong> <strong class="kh ir">相等</strong> ( <code class="fe mg mh mi mj b">===</code>)和<strong class="kh ir">深度相等</strong>。</li><li id="8298" class="lv lw iq kh b ki mk kl ml ko mm ks mn kw mo la mc md me mf bi translated">在JavaScript中，一个变量可以有两种类型的数据，一个<strong class="kh ir">原语</strong>值或者一个<strong class="kh ir">引用</strong>值。简单地说，如果值是数字、字符串、布尔值、未定义值、空值或符号，那么它就是一个原始值。如果是别的什么(如<code class="fe mg mh mi mj b">typeof object</code>，那就是参考值。</li><li id="6502" class="lv lw iq kh b ki mk kl ml ko mm ks mn kw mo la mc md me mf bi translated">为了比较<strong class="kh ir">原始值</strong>，可以使用<strong class="kh ir">严格</strong> <strong class="kh ir">等式</strong>。默认情况下，Chai在几乎所有断言操作中都使用<strong class="kh ir">严格</strong> <strong class="kh ir">等式</strong>。</li><li id="e5a1" class="lv lw iq kh b ki mk kl ml ko mm ks mn kw mo la mc md me mf bi translated">为了比较<strong class="kh ir">参考值</strong>(如<strong class="kh ir">对象、数组、对象数组、集合和映射</strong>)，可以使用<strong class="kh ir">深度相等</strong>。当使用这种方法时，它将递归地检查对象的键，直到找到检查引用相等性的原语，而不是引用相等性(<a class="ae lb" href="https://github.com/chaijs/deep-eql" rel="noopener ugc nofollow" target="_blank"> deep-eql </a>)。</li><li id="2b7b" class="lv lw iq kh b ki mk kl ml ko mm ks mn kw mo la mc md me mf bi translated">除了两种主要的比较类型——<strong class="kh ir">严格</strong> <strong class="kh ir">相等</strong> ( <code class="fe mg mh mi mj b">===</code>)和<strong class="kh ir">深度相等</strong>之外，其他<strong class="kh ir">松散比较</strong>也可以通过使用其他Chai特性和特殊插件的组合来实现。</li></ul><p id="9340" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好，现在让我们看看如何在代码中使用这些概念。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="2e7c" class="mw ld iq bd le mx my mz lh na nb nc lk jw nd jx ln jz ne ka lq kc nf kd lt ng bi translated">用Chai比较数组</h1><pre class="nh ni nj nk gt nl mj nm nn aw no bi"><span id="dbaa" class="lc ld iq mj b gy np nq l nr ns"><em class="nt">// Empty check</em><br/>expect(<strong class="mj ir">[]</strong>).to.be.empty;<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.not.be.empty;</span><span id="e802" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check length</em><br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.lengthOf(3);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.lengthOf.above(2);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.lengthOf.below(5);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.lengthOf.at.least(2);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.lengthOf.at.most(4);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.lengthOf.within(0, 4);</span><span id="d6f7" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Verify the array and require given members to be in the array</em><br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.be.an(<strong class="mj ir">'array'</strong>).that.includes(<strong class="mj ir">2</strong>);</span><span id="9b4f" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require given members to be in the array</em><br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.include(<strong class="mj ir">2</strong>);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.include.members(<strong class="mj ir">[1, 2]</strong>);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.include.members(<strong class="mj ir">[1, 2, 2, 2]</strong>);</span><span id="788d" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require given members to be in the array in the same order</em><br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.include.ordered.members(<strong class="mj ir">[1, 2]</strong>);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.not.include.ordered.members(<strong class="mj ir">[2, 3]</strong>);</span><span id="2f5e" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require all members to be in the array<br/></em>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.members(<strong class="mj ir">[1, 2, 3]</strong>);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.have.members(<strong class="mj ir">[3, 2, 1]</strong>);<br/>expect(<strong class="mj ir">[1, 2, 3]</strong>).to.not.have.members(<strong class="mj ir">[1, 2]</strong>);</span><span id="795d" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require all members to be in the array to be in the same order</em><br/>expect(<strong class="mj ir">[1, 2]</strong>).to.have.ordered.members(<strong class="mj ir">[1, 2]</strong>);<br/>expect(<strong class="mj ir">[1, 2]</strong>).to.not.have.ordered.members(<strong class="mj ir">[2, 1]</strong>);</span><span id="3369" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check deep equality <br/>// (NOTE: </em><strong class="mj ir"><em class="nt">.deep.equal </em></strong><em class="nt">and</em><strong class="mj ir"><em class="nt"> .eql </em></strong><em class="nt">keywords behave the same)</em><br/>expect(<strong class="mj ir">[1, 2]</strong>).to.eql(<strong class="mj ir">[1, 2]</strong>);<br/>expect(<strong class="mj ir">[1, 2]</strong>).to.deep.equal(<strong class="mj ir">[1, 2]</strong>);<br/>expect(<strong class="mj ir">[1, 2]</strong>).to.not.eql(<strong class="mj ir">[2, 1]</strong>);<br/>expect(<strong class="mj ir">[1, 2]</strong>).to.not.deep.equal(<strong class="mj ir">[2, 1]</strong>);<br/>expect(<strong class="mj ir">[1, 2]</strong>).to.not.equal(<strong class="mj ir">[1, 2]</strong>);</span><span id="ab6c" class="lc ld iq mj b gy nu nq l nr ns">// <em class="nt">Require one value from the given subset to be in the array</em><br/>expect(<strong class="mj ir">[1,2,3]</strong>).to.contain.oneOf(<strong class="mj ir">[3,4,5]</strong>)<br/>expect(<strong class="mj ir">[1,2,3]</strong>).to.not.contain.oneOf(<strong class="mj ir">[4,5,6]</strong>)</span></pre><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi nv"><img src="../Images/904333b108d2f1e9b98c50e18996394a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rD_DRol_TSu7gBzdshNQ7Q.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk">Compare Arrays with Chai (Source: Author)</figcaption></figure><h1 id="4faa" class="mw ld iq bd le mx oh mz lh na oi nc lk jw oj jx ln jz ok ka lq kc ol kd lt ng bi translated">用柴比较物体</h1><pre class="nh ni nj nk gt nl mj nm nn aw no bi"><span id="d892" class="lc ld iq mj b gy np nq l nr ns"><em class="nt">// Empty check</em><br/>expect(<strong class="mj ir">{}</strong>).to.be.empty;<br/>expect(<strong class="mj ir">{a: 1}</strong>).to.not.be.empty;</span><span id="e023" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check length</em><br/>expect(Object.keys(<strong class="mj ir">{a: 1}</strong>)).to.have.lengthOf(1);<br/>expect(Object.keys(<strong class="mj ir">{a: 1}</strong>)).to.have.lengthOf.above(0);<br/>expect(Object.keys(<strong class="mj ir">{a: 1}</strong>)).to.have.lengthOf.below(5);<br/>expect(Object.keys(<strong class="mj ir">{a: 1}</strong>)).to.have.lengthOf.at.least(1);<br/>expect(Object.keys(<strong class="mj ir">{a: 1}</strong>)).to.have.lengthOf.at.most(4);<br/>expect(Object.keys(<strong class="mj ir">{a: 1}</strong>)).to.have.lengthOf.within(0, 4);</span><span id="099b" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check deep equality<br/></em>expect(<strong class="mj ir">{a: 1}</strong>).to.eql(<strong class="mj ir">{a: 1}</strong>);<br/>expect(<strong class="mj ir">{a: 1}</strong>).to.deep.equal(<strong class="mj ir">{a: 1}</strong>);<br/>expect(<strong class="mj ir">{a: 1}</strong>).to.not.equal(<strong class="mj ir">{a: 1}</strong>);</span><span id="b10e" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check keys</em><br/>expect(<strong class="mj ir">{a: 1, b: 2, c: 3}</strong>).to.have.all.keys(<strong class="mj ir">'a', 'b', 'c'</strong>);<br/>expect(<strong class="mj ir">{a: 1, b: 2, c: 3}</strong>).to.not.have.all.keys(<strong class="mj ir">'a', 'b'</strong>);<br/>expect(<strong class="mj ir">{a: 1, b: 2, c: 3}</strong>).to.include.all.keys(<strong class="mj ir">'a', 'b'</strong>);</span><span id="b443" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">{a: 1, b: 2}</strong>).to.have.all.keys(<strong class="mj ir">{a: 4, b: 5}</strong>); // ignore 4 and 5<br/>expect(<strong class="mj ir">['x', 'y']</strong>).to.have.all.keys(<strong class="mj ir">{0: 4, 1: 5}</strong>); // ignore 4 and 5</span><span id="9e35" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">{a: 1, b: 2}</strong>).to.have.any.keys(<strong class="mj ir">'a', 'c', 'd'</strong>);<br/>expect(<strong class="mj ir">{a: 1, b: 2}</strong>).to.include.any.keys(<strong class="mj ir">'a', 'c', 'd'</strong>);</span><span id="d861" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">{a: 1, b: 2}</strong>).to.not.have.any.keys(<strong class="mj ir">'c', 'd'</strong>);<br/>expect(<strong class="mj ir">{a: 1, b: 2}</strong>).to.not.include.any.keys(<strong class="mj ir">'c', 'd'</strong>);</span><span id="98cb" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require subset of the target’s properties to be in the object</em><br/>expect(<strong class="mj ir">{a: 1, b: 2, c: 3}</strong>).to.include(<strong class="mj ir">{a: 1, b: 2}</strong>);</span><span id="3ea1" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">{a: 3, b: 4}</strong>).to.include(<strong class="mj ir">{a: 3, b: 4}</strong>); <br/>expect(<strong class="mj ir">{a: 3, b: 4}</strong>).to.not.include(<strong class="mj ir">{a: 1, b: 2}</strong>); </span><span id="f308" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">{c: 3}</strong>).to.not.have.any.keys(<strong class="mj ir">'a', 'b'</strong>); <br/>expect(<strong class="mj ir">{c: 3}</strong>).to.not.include(<strong class="mj ir">{a: 1, b: 2}</strong>); </span><span id="ecfe" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check inherited and/or non-enumerable properties (Note: having </em>.own excludes the inherited properties)<br/>Object.prototype.<strong class="mj ir">b = 2</strong>;  <br/>expect(<strong class="mj ir">{a: 1}</strong>).to.include(<strong class="mj ir">{a: 1}</strong>);<br/>expect(<strong class="mj ir">{a: 1}</strong>).to.include(<strong class="mj ir">{b: 2}</strong>);<br/>expect(<strong class="mj ir">{a: 1}</strong>).to.include(<strong class="mj ir">{a: 1, b: 2}</strong>);<br/>expect(<strong class="mj ir">{a: 1}</strong>).to.own.include(<strong class="mj ir">{a: 1}</strong>); <br/>expect(<strong class="mj ir">{a: 1}</strong>).to.not.own.include(<strong class="mj ir">{b: 2}</strong>);</span><span id="df85" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check property with/without its value</em><br/>expect(<strong class="mj ir">{a: 1}</strong>).to.have.property(<strong class="mj ir">'a'</strong>);<br/>expect(<strong class="mj ir">{a: 1}</strong>).to.have.property(<strong class="mj ir">'a', 1</strong>);</span></pre><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi om"><img src="../Images/c67d4299a01e64015505b2401ec7d44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sArwP8qIRPUtpWAonedWvw.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk">Compare Objects with Chai (Source: Author)</figcaption></figure><h1 id="810d" class="mw ld iq bd le mx oh mz lh na oi nc lk jw oj jx ln jz ok ka lq kc ol kd lt ng bi translated"><strong class="ak">用Chai比较嵌套对象</strong></h1><pre class="nh ni nj nk gt nl mj nm nn aw no bi"><span id="1137" class="lc ld iq mj b gy np nq l nr ns"><em class="nt">// Check deep equality</em> </span><span id="ee27" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">{x: {a: 1}}</strong>).to.deep.include(<strong class="mj ir">{x: {a: 1}}</strong>); <br/>expect(<strong class="mj ir">{x: {a: 1}}</strong>).to.not.include(<strong class="mj ir">{x: {a: 1}}</strong>);</span><span id="156b" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">{x: {a: 1}}</strong>).to.have.deep.property(<strong class="mj ir">'x', {a: 1}</strong>); <br/>expect(<strong class="mj ir">{x: {a: 1}}</strong>).to.not.have.property(<strong class="mj ir">'x', {a: 1}</strong>);</span><span id="1924" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Enable dot- and bracket-notation when referencing nested properties</em><br/>expect(<strong class="mj ir">{a: {b: ['x', 'y']}}</strong>).to.nested.include(<strong class="mj ir">{'a.b[1]': 'y'}</strong>);<br/>expect(<strong class="mj ir">{'.a': {'[b]': 2}}</strong>).to.nested.include(<strong class="mj ir">{'\\.a.\\[b\\]': 2}</strong>);<br/>expect(<strong class="mj ir">{a: {b: [{c: 3}]}}</strong>).to.deep.nested.include(<strong class="mj ir">{'a.b[0]': {c: 3}}</strong>);</span></pre><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi on"><img src="../Images/ecf0696a925ae37fcdb875758685d7ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RzrLlYwvSWNofv0CbYoPPw.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk">Compare Nested Objects with Chai (Source: Author)</figcaption></figure><h1 id="7c98" class="mw ld iq bd le mx oh mz lh na oi nc lk jw oj jx ln jz ok ka lq kc ol kd lt ng bi translated">用Chai比较对象数组</h1><pre class="nh ni nj nk gt nl mj nm nn aw no bi"><span id="460d" class="lc ld iq mj b gy np nq l nr ns"><em class="nt">// Check deep </em>equality </span><span id="5457" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{a: 1}]</strong>).to.deep.include(<strong class="mj ir">{a: 1}</strong>); <br/>expect(<strong class="mj ir">[{a: 1}]</strong>).to.not.include(<strong class="mj ir">{a: 1}</strong>);</span><span id="0d16" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{a: 1}, {b: 2}, {c: 3}]</strong>).to.deep.include(<strong class="mj ir">{a: 1}</strong>);<br/>expect(<strong class="mj ir">[{a: 1}, {b: 2}, {c: 3}]</strong>).to.deep.include(<strong class="mj ir">{a: 1}, {c: 3}</strong>);</span><span id="e73b" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{a: 1}]</strong>).to.have.deep.members(<strong class="mj ir">[{a: 1}]</strong>); <br/>expect(<strong class="mj ir">[{a: 1}]</strong>).to.not.have.members(<strong class="mj ir">[{a: 1}]</strong>);</span><span id="8383" class="lc ld iq mj b gy nu nq l nr ns">// When <em class="nt">.include and .ordered are combined, the ordering begins at the start of both arrays.</em><br/>expect(<strong class="mj ir">[{a: 1}, {b: 2}, {c: 3}]</strong>)<br/>  .to.include.deep.ordered.members(<strong class="mj ir">[{a: 1}, {b: 2}]</strong>);<br/>expect(<strong class="mj ir">[{a: 1}, {b: 2}, {c: 3}]</strong>)<br/>  .to.not.include.deep.ordered.members(<strong class="mj ir">[{b: 2}, {c: 3}]</strong>);</span><span id="d667" class="lc ld iq mj b gy nu nq l nr ns">// More examples</span><span id="edd4" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>)<br/>  .to.not.equal(<strong class="mj ir">[{ a: 2, b: 2 }, { a: 1, b: 1 }]</strong>);</span><span id="ff86" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>)<br/>  .to.deep.equal(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>);</span><span id="f133" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>)<br/>  .to.not.deep.equal(<strong class="mj ir">[{ a: 2, b: 2 }, { a: 1, b: 1 }]</strong>);</span><span id="9109" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>)<br/>  .to.include.deep.members(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>);</span><span id="18c1" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>)<br/>  .to.include.deep.members(<strong class="mj ir">[{ a: 2, b: 2 }, { a: 1, b: 1 }]</strong>);</span><span id="cfb8" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{ a: 1, b: 1 }, { a: 2, b: 2 }]</strong>)<br/>  .to.include.deep.members(<strong class="mj ir">[{ b: 2, a: 2 }, { b: 1, a: 1 }]</strong>);</span></pre><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi oo"><img src="../Images/67ce7c549c061e99a2edab440040e344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOOASI4ZwYEpL5Xc4wXQpQ.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk">Compare Object Arrays with Chai (Source: Author)</figcaption></figure><h2 id="d11f" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">复杂场景:对象数组的部分比较</h2><pre class="nh ni nj nk gt nl mj nm nn aw no bi"><span id="f4b2" class="lc ld iq mj b gy np nq l nr ns">const chai = require('chai'),<br/>    expect = chai.expect;</span><span id="7caf" class="lc ld iq mj b gy nu nq l nr ns">chai.use(require('chai-like'));<br/>chai.use(require('chai-things')); // Don't swap these two</span><span id="a158" class="lc ld iq mj b gy nu nq l nr ns">expect(<strong class="mj ir">[{a: 1, b: 2}, {a: 10, b: 20}]</strong>).to.be.an('array').<br/>    that.contains.something.like(<strong class="mj ir">{a: 1}</strong>);</span></pre><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi op"><img src="../Images/8a8513157f74e86a8a75193f5ed372fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pf0iof2vXUBWZNraqqcH9A.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk">Complex Scenario: Partial Comparisons of Object Arrays (Source: Author)</figcaption></figure><h1 id="1a1f" class="mw ld iq bd le mx oh mz lh na oi nc lk jw oj jx ln jz ok ka lq kc ol kd lt ng bi translated">用柴比较器械包</h1><pre class="nh ni nj nk gt nl mj nm nn aw no bi"><span id="12d0" class="lc ld iq mj b gy np nq l nr ns"><em class="nt">// Empty check</em><br/>expect(new Set()).to.be.empty;</span><span id="0645" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check length</em><br/>expect(new Set(<strong class="mj ir">[1, 2, 3]</strong>)).to.have.property('size', 3);<br/>expect(new Set(<strong class="mj ir">[1, 2, 3]</strong>)).to.not.be.empty;</span><span id="29b6" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require a given value to be a member of the target set</em><br/>expect(new Set(<strong class="mj ir">[1, 2]</strong>)).to.include(<strong class="mj ir">2</strong>);</span><span id="80ad" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require all keys<br/></em>expect(new<strong class="mj ir"> </strong>Set(<strong class="mj ir">['a', 'b']</strong>)).to.have.all.keys(<strong class="mj ir">'a', 'b'</strong>);</span><span id="5085" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Check deep equality</em> <br/>expect(new Set(<strong class="mj ir">[{a: 1}]</strong>)).to.have.deep.keys(<strong class="mj ir">[{a: 1}]</strong>); <br/>expect(new Set(<strong class="mj ir">[{a: 1}]</strong>)).to.not.have.keys(<strong class="mj ir">[{a: 1}]</strong>);<br/>expect(new Set(<strong class="mj ir">[{a: 1}]</strong>)).to.have.all.deep.keys(<strong class="mj ir">[{a: 1}]</strong>);<br/>expect(new Set(<strong class="mj ir">[{a: 1}]</strong>)).to.not.have.all.keys(<strong class="mj ir">[{a: 1}]</strong>);</span></pre><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi oq"><img src="../Images/bea4b4c8aa40a4cfce28bf6fe0faea8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7iR5mQk5aIMuIXR3ulWrpg.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk">Compare Sets with Chai (Source: Author)</figcaption></figure><h1 id="83d0" class="mw ld iq bd le mx oh mz lh na oi nc lk jw oj jx ln jz ok ka lq kc ol kd lt ng bi translated">与柴比较地图</h1><pre class="nh ni nj nk gt nl mj nm nn aw no bi"><span id="b225" class="lc ld iq mj b gy np nq l nr ns"><em class="nt">// Empty check</em><br/>expect(new Map()).to.be.empty;</span><span id="7a11" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require a given value to be one of the values of the target map</em><br/>expect(new Map(<strong class="mj ir">[['a', 1], ['b', 2]]</strong>)).to.include(<strong class="mj ir">2</strong>);</span><span id="f2f6" class="lc ld iq mj b gy nu nq l nr ns"><em class="nt">// Require all keys</em><br/>expect(new Map(<strong class="mj ir">[['a', 1], ['b', 2]]</strong>)).to.have.all.keys(<strong class="mj ir">'a', 'b'</strong>);</span></pre><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div role="button" tabindex="0" class="nx ny di nz bf oa"><div class="gh gi or"><img src="../Images/631b133ba3fe12e6f9de43fe762d1990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myWhHxlYScqv7cguYihuzA.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk">Compare Maps with Chai (Source: Author)</figcaption></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="307e" class="mw ld iq bd le mx my mz lh na nb nc lk jw nd jx ln jz ne ka lq kc nf kd lt ng bi translated">结论</h1><p id="7ef6" class="pw-post-body-paragraph kf kg iq kh b ki lx jr kk kl ly ju kn ko os kq kr ks ot ku kv kw ou ky kz la ij bi translated">最初，我在我的个人笔记中收集了所有这些信息，以便我可以重用它们作为在Node.js项目中为数组和对象类型编写Chai测试的首选资源。然后，我意识到了它的价值，决定发表这篇博文，供大家使用。如果你有任何改进这篇文章的建议或问题，我很乐意在评论区听到。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="a8c1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nt">敬请关注下一期编程技巧。在那之前，编码快乐！</em></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="2ad3" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated">如果你喜欢这篇文章，你可能也会喜欢读这些:</h2><div class="ov ow gp gr ox oy"><a href="https://codeburst.io/a-short-summary-on-clean-coding-best-practices-d8afbfa7677" rel="noopener follow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd ir gy z fp pd fr fs pe fu fw ip bi translated">干净编码最佳实践的简短总结</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">成为一名干净的程序员</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">codeburst.io</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ob oy"/></div></div></a></div><div class="ov ow gp gr ox oy"><a href="https://betterprogramming.pub/application-logging-best-practices-a-support-engineers-perspective-b17d0ef1c5df" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd ir gy z fp pd fr fs pe fu fw ip bi translated">企业应用程序日志记录最佳实践(支持工程师的视角)</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">大家来写点大家都爱的有意义的日志吧！</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">better编程. pub</p></div></div><div class="ph l"><div class="pn l pj pk pl ph pm ob oy"/></div></div></a></div></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="2765" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nt">更多内容请看</em> <a class="ae lb" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nt">说白了。报名参加我们的</em> <a class="ae lb" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nt">免费周报</em> </strong> </a> <em class="nt">。关注我们</em><a class="ae lb" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nt">Twitter</em></strong></a><em class="nt">和</em><a class="ae lb" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nt">LinkedIn</em></strong></a><em class="nt">。查看我们的</em> <a class="ae lb" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nt">社区不和谐</em> </strong> </a> <em class="nt">加入我们的</em> <a class="ae lb" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nt">人才集体</em> </strong> </a> <em class="nt">。</em></strong></a></p></div></div>    
</body>
</html>