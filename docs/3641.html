<html>
<head>
<title>Automatically Generate YouTube Playlists from Spotify Playlists with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript从Spotify播放列表自动生成YouTube播放列表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-youtube-playlist-from-a-spotify-playlist-using-javascript-bb84b1532638?source=collection_archive---------9-----------------------#2022-09-13">https://javascript.plainenglish.io/create-a-youtube-playlist-from-a-spotify-playlist-using-javascript-bb84b1532638?source=collection_archive---------9-----------------------#2022-09-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5f55" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用JavaScript(Chrome+puppeter+node . js)构建一个web scraper</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/dd1641a35f18a6c7c013d820e114bf59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qQWa-3FrgEeOom1-"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Photo by <a class="ae kr" href="https://unsplash.com/@buduczki?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Norbert Buduczki</a> on <a class="ae kr" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fa25" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你非常喜欢看音乐视频，你一定会喜欢在YouTube上自动创建播放列表。好吧，让我们试试有趣的东西。</p><p id="d934" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我是一个音乐爱好者，我一直在听我喜欢的歌曲，但我不仅喜欢听他们还喜欢看他们的视频。然而，我有许多包含许多曲目的播放列表，逐一搜索每个视频会花费我太多的时间。</p><p id="6c31" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果我们可以从Spotify等音乐流媒体网站导出一个播放列表，并自动生成相同的播放列表，但带有视频，那就太好了。你不觉得吗？</p><p id="80e8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">所以，这一次，我们将开发一个web scraper来帮助完成这项任务。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/6646790a461f9fd22af83a2bc77dc858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*4-qdoRNb4F8kNblg.gif"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Final result</figcaption></figure><h1 id="8c78" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">开始前</h1><p id="22db" class="pw-post-body-paragraph ks kt iq ku b kv mh jr kx ky mi ju la lb mj ld le lf mk lh li lj ml ll lm ln ij bi translated">开始之前，我们需要在我们的计算机上安装Node 8+。这里 可以看到如何安装<a class="ae kr" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir">。确保选择“当前”版本，因为它是8+。</strong></a></p><h1 id="3d1e" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">项目设置</h1><p id="82f3" class="pw-post-body-paragraph ks kt iq ku b kv mh jr kx ky mi ju la lb mj ld le lf mk lh li lj ml ll lm ln ij bi translated">首先创建项目目录</p><pre class="kg kh ki kj gt mm mn mo mp aw mq bi"><span id="ad00" class="mr lq iq mn b gy ms mt l mu mv">$ mkdir you-spoti<br/>$ cd you-spoti</span></pre><p id="788c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">启动NPM。并加入必要的细节。</p><pre class="kg kh ki kj gt mm mn mo mp aw mq bi"><span id="6061" class="mr lq iq mn b gy ms mt l mu mv">$ npm init</span></pre><p id="30a5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">安装<strong class="ku ir">木偶师</strong>。这里 可以看到入门<a class="ae kr" href="https://pptr.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir">。如果你想使用最新的功能，你可以直接从它的GitHub库安装。</strong></a></p><pre class="kg kh ki kj gt mm mn mo mp aw mq bi"><span id="da67" class="mr lq iq mn b gy ms mt l mu mv">$ npm i --save puppeteer</span></pre><p id="678c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">木偶师包括它自己的chrome/chrome，保证可以无头工作。所以，每次你安装或更新木偶师，它会下载其特定的chrome版本。</p><p id="e430" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">安装<strong class="ku ir"> urlencode。</strong>这个包将帮助我们编码我们的Scraper需要访问的URL。</p><pre class="kg kh ki kj gt mm mn mo mp aw mq bi"><span id="ba06" class="mr lq iq mn b gy ms mt l mu mv">$ npm i urlencode</span></pre><p id="2605" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">最后，在您喜欢的代码编辑器中打开文件夹，创建一个<code class="fe mw mx my mn b">index.js</code>文件。</p><h1 id="db8d" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">编码</h1><h2 id="ea4d" class="mr lq iq bd lr mz na dn lv nb nc dp lz lb nd ne mb lf nf ng md lj nh ni mf nj bi translated">第一步</h2><p id="3586" class="pw-post-body-paragraph ks kt iq ku b kv mh jr kx ky mi ju la lb mj ld le lf mk lh li lj ml ll lm ln ij bi translated">我们将从识别我们的网页抓取器将要访问的URL开始。</p><ul class=""><li id="2852" class="nk nl iq ku b kv kw ky kz lb nm lf nn lj no ln np nq nr ns bi translated"><a class="ae kr" href="https://open.spotify.com/" rel="noopener ugc nofollow" target="_blank">https://open.spotify.com/</a>—Spotify网络播放器网址</li><li id="9575" class="nk nl iq ku b kv nt ky nu lb nv lf nw lj nx ln np nq nr ns bi translated"><a class="ae kr" href="https://www.youtube.com/" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/</a>——YouTube的主要网址</li></ul><p id="012e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果我们浏览Spotify网站，我们会看到这个网站有友好的URL，这使我们的工作更容易。</p><p id="b1d5" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">通常，我们必须插入要搜索的文本，然后点击网站的搜索按钮，将我们带到下一页的搜索结果，但是我们可以省去这些步骤，只使用下面的URIs。</p><ul class=""><li id="72d2" class="nk nl iq ku b kv kw ky kz lb nm lf nn lj no ln np nq nr ns bi translated"><a class="ae kr" href="https://open.spotify.com/" rel="noopener ugc nofollow" target="_blank">https://open.spotify.com/</a>搜索/{ {要搜索的文本}}</li><li id="44e0" class="nk nl iq ku b kv nt ky nu lb nv lf nw lj nx ln np nq nr ns bi translated"><a class="ae kr" href="https://open.spotify.com/playlist/76wniFNIRnxCXGXIvV5JUw" rel="noopener ugc nofollow" target="_blank">https://open.spotify.com/playlist/</a>{ {播放列表名称}}</li></ul><h2 id="6f49" class="mr lq iq bd lr mz na dn lv nb nc dp lz lb nd ne mb lf nf ng md lj nh ni mf nj bi translated">用木偶师打开浏览器，在Spotify上进行第一次搜索。</h2><p id="5f76" class="pw-post-body-paragraph ks kt iq ku b kv mh jr kx ky mi ju la lb mj ld le lf mk lh li lj ml ll lm ln ij bi translated">正如我们在下面的代码中看到的，在我的例子中，我想搜索艺术家“The Doors”的播放列表，所以我将输入该文本。我们可以看到，我已经用urlencode连接了编码文本，以避免Spotify URLs出现问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="fbfa" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">默认情况下，木偶师是无头运行的，这意味着我们看不到浏览器。我们确实想看到它，所以我们将这个属性设置为false。</p><p id="bb2e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果我们执行scraper，到目前为止，我们将停留在这个屏幕上。</p><pre class="kg kh ki kj gt mm mn mo mp aw mq bi"><span id="fa8d" class="mr lq iq mn b gy ms mt l mu mv">$ node index.js</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/1bc98a5657573ccda94b6afddaed04fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hCmCn-rrlzGt1wvu.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Part 1</figcaption></figure><h2 id="50c4" class="mr lq iq bd lr mz na dn lv nb nc dp lz lb nd ne mb lf nf ng md lj nh ni mf nj bi translated">找到播放列表并选择第一个。</h2><p id="13a1" class="pw-post-body-paragraph ks kt iq ku b kv mh jr kx ky mi ju la lb mj ld le lf mk lh li lj ml ll lm ln ij bi translated">在这一部分，我们查找播放列表部分，然后单击第一个播放列表。</p><p id="9873" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">为此，我们使用了<code class="fe mw mx my mn b">page.evaluate</code>函数。这个函数用于输入给定页面的DOM，并像在浏览器控制台中一样访问它。</p><p id="e5ba" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><code class="fe mw mx my mn b">page.evaluate</code>内的代码在chrome浏览器内运行，所以在脚本中声明在它之外的变量不能被浏览器访问，除非我们把它们作为参数传递。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="f921" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">现在我们在这个屏幕上，在选定的播放列表中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/e9795ccd5e7e9efe47d8f5a8a0c89902.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GGKw6XHP2SzqWc9n.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Part 2</figcaption></figure><h2 id="0602" class="mr lq iq bd lr mz na dn lv nb nc dp lz lb nd ne mb lf nf ng md lj nh ni mf nj bi translated">恢复播放列表的曲目</h2><p id="8636" class="pw-post-body-paragraph ks kt iq ku b kv mh jr kx ky mi ju la lb mj ld le lf mk lh li lj ml ll lm ln ij bi translated">现在我们想检索播放列表中包含的所有曲目。为此，我们恢复父选择器的所有子元素，对于每个子元素，我们提取文本并清理它以避免奇怪的字符。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="bec2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这样，我们将拥有一个包含播放列表中所有曲目的对象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/d6a68534f43ee987e746a646037e0393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*e1OexmeZxSqt6Dcl.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Part 3</figcaption></figure><h2 id="c021" class="mr lq iq bd lr mz na dn lv nb nc dp lz lb nd ne mb lf nf ng md lj nh ni mf nj bi translated">在YouTube上创建播放列表</h2><p id="7503" class="pw-post-body-paragraph ks kt iq ku b kv mh jr kx ky mi ju la lb mj ld le lf mk lh li lj ml ll lm ln ij bi translated">最后，我们去YouTube，一首一首地搜索每首曲目。在的<strong class="ku ir">for<strong class="ku ir">loop</strong>中，我们输入要搜索的曲目名称。在我的例子中，我添加了文本“live”来搜索直播视频，然后单击搜索图标。</strong></p><p id="4e62" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">要将曲目添加到播放列表中，我们必须将光标放在视频所在的行上，以便add按钮出现在DOM中，我们可以单击它。</p><p id="ce83" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果我们看这一部分，我们添加超时，这是因为很多时候木偶师比我们访问的网站更快，我们没有时间在DOM中出现我们需要的所有元素。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="24da" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">就是这样！</p><p id="4cb8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果我们运行脚本，我们可以看到神奇！我们可以看到每个曲目是如何添加到列表中的。一旦完成运行，我们将在YouTube上拥有我们的Spotify播放列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/ae9669db12aee182ab85868f4182f0a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rXtL8YdJodGpMNRc.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Result</figcaption></figure><p id="f70c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">项目回购:</strong></p><div class="oa ob gp gr oc od"><a href="https://github.com/ljaviertovar/you-spoti" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">GitHub-ljaviertovar/you-spoti:Scraper获取Spotify的歌曲并在youtube上创建播放列表</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">github.com</p></div></div><div class="om l"><div class="on l oo op oq om or kl od"/></div></div></a></div><p id="f9a3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你仍然不清楚网络抓取是如何工作的，你可以看看我以前的文章。</p><div class="oa ob gp gr oc od"><a href="https://medium.com/codex/web-scraping-what-is-it-and-what-is-it-used-for-e5c04ac8191" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">网页抓取:它是什么，它是用来做什么的？</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">了解网络搜集如何帮助您完成日常任务</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="os l oo op oq om or kl od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://medium.com/geekculture/what-you-need-to-know-to-develop-your-first-web-scraper-with-javascript-b3296b758258" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">用JavaScript开发第一个Web Scraper需要知道什么</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">网页抓取快速入门指南</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="ot l oo op oq om or kl od"/></div></div></a></div></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><p id="1570" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">请记住，在抓取之前，您必须考虑网站的服务条款和隐私政策。所以你要为此负责。</strong></p><pre class="kg kh ki kj gt mm mn mo mp aw mq bi"><span id="1d3b" class="mr lq iq mn b gy ms mt l mu mv"><strong class="mn ir">Want to Connect?</strong></span><span id="e697" class="mr lq iq mn b gy pb mt l mu mv">Love connecting with friends all around the world on <a class="ae kr" href="https://twitter.com/ljaviertovar" rel="noopener ugc nofollow" target="_blank">Twitter</a></span></pre></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><p id="3249" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><em class="pc">更多内容请看</em><a class="ae kr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="pc">plain English . io</em></strong></a><em class="pc">。报名参加我们的</em> <a class="ae kr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="pc">免费周报</em> </strong> </a> <em class="pc">。关注我们关于</em><a class="ae kr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="pc">Twitter</em></strong></a><a class="ae kr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="pc">LinkedIn</em></strong></a><em class="pc"/><a class="ae kr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="pc">YouTube</em></strong></a><em class="pc"/><a class="ae kr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="pc">不和</em> </strong> </a> <em class="pc">。对增长黑客感兴趣？检查</em> <a class="ae kr" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="pc">电路</em> </strong> </a> <em class="pc">。</em></p></div></div>    
</body>
</html>