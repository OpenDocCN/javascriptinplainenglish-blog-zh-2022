<html>
<head>
<title>Build Your First Node.js API Using Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Express构建您的第一个Node.js API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-your-first-node-api-and-express-238f23af3341?source=collection_archive---------16-----------------------#2022-03-21">https://javascript.plainenglish.io/build-your-first-node-api-and-express-238f23af3341?source=collection_archive---------16-----------------------#2022-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f427" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Express在Node.js中创建简单API的指南。</h2></div><p id="c5a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嘿，现在你想开始做一些真正有趣和重要的事情吗？如果你想开始，你需要坚实的技术基础，了解正确的框架和特性会有很大帮助。所以，今天我们在这里开始使用Express在Node.js中创建我们的第一个简单API。我们开始吧。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/e0ba5d74335bae0168f30de447f4416c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*uIZddM1te88-1RrWVqK5fA.jpeg"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Node.js and Express</figcaption></figure><h1 id="c8b4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">Node.js和Express快速演练</h1><p id="113f" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">所以，我们要用的技术是Node.js和Express。但是它们是什么呢？</p><p id="e00c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，Node.js是一个JavaScript运行时环境。这意味着它使JavaScript代码在您的机器上运行，而不是像通常那样在浏览器上运行。这是一项非常有用和强大的技术，因为它允许我们在后端开发和服务器端运行时使用JavaScript及其所有的额外功能和特性。</p><p id="1d09" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，Express可能是为Node.js编写的最著名的框架。当谈到API、web服务和一般的web应用程序时，它可以被认为是事实上的标准。它可以创建路由、接收请求并给出响应。它真的很强大，也有不错的性能，同时记住Javascript是一种解释语言，所以速度不是他的主要优势。虽然，它比许多著名的后端开发替代方法要快得多，这也是它被广泛使用的原因。</p><h1 id="1b43" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">让我们创建API</h1><p id="406b" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated"><strong class="kh ir">配置</strong></p><p id="39d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，您需要正确安装Node.js。如有需要请点击此处链接:【https://nodejs.org/】<em class="ml"/></p><p id="da6a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想在Node.js中编写我们的第一个API，我们必须选择一个存储库，从那里开始所有的开发过程。在这个特定的存储库中，您必须打开终端并编写:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="62a5" class="mr lo iq mn b gy ms mt l mu mv">&gt;&gt; npm init</span></pre><p id="d09f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，点击输入一串时间。此时，将创建一个package.json文件。不要删，永远不要。在这一点上，我们必须安装一些有用的软件包，使我们的应用程序运行。它们是Express、cors、morgan和nodemon。</p><p id="37aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们之前说过，Express用于管理所有的API。Morgan很有用，因为当API运行时，在服务器终端上，您可以以一种用户友好的方式看到所有到达和发送的请求。这不是强制性的，但最好有。</p><p id="af06" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">需要Cors来使Javascript正确工作并避免问题。Nodemon不是强制性的，但它将使开发过程更快，因为它将让我们看到我们在服务器中做了什么改变，而不用关闭它。它将我们的更改推送到实时服务器上。绝对有帮助。要安装这些依赖项，您需要在终端中键入以下内容:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="0313" class="mr lo iq mn b gy ms mt l mu mv">&gt;&gt; npm install express cors morgan nodemon</span></pre><p id="9099" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装所有东西需要几秒钟时间。至此，我们已经准备好用真正的代码构建我们的API了。用Javascript创建一个文件，在终端中触摸或者用视觉命令。您可以随意调用它，但建议使用index.js或server.js。我们将使用名为server.js的文件</p><p id="3554" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第一行代码</strong></p><p id="c875" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，我们需要导入我们之前导入的所有依赖项，因此我们需要输入该代码的第一行，这样就可以完成所有工作了:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="0412" class="mr lo iq mn b gy ms mt l mu mv">const express = require('express');</span><span id="01f6" class="mr lo iq mn b gy mw mt l mu mv">const morgan = require('morgan');</span><span id="d7ae" class="mr lo iq mn b gy mw mt l mu mv">const cors = require('cors');</span></pre><p id="146d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您已经成功地导入了使一切正常工作所需的所有依赖项。</p><p id="d552" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们需要创建我们的服务器，它将能够管理来自世界各地的各种类型的所有请求，我们可以想象。因此，我们需要初始化应用程序，并将所有依赖功能放入其中。让我们用这段代码来做这件事:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="79dc" class="mr lo iq mn b gy ms mt l mu mv">const app = express();</span><span id="4292" class="mr lo iq mn b gy mw mt l mu mv">app.use(cors());</span><span id="031b" class="mr lo iq mn b gy mw mt l mu mv">app.use(morgan('dev'));</span><span id="772d" class="mr lo iq mn b gy mw mt l mu mv">app.use(express.json());</span></pre><p id="a865" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">写完这些，我们初始化了express应用程序，这是我们第一个API的核心。然后，我们将导入的所有有用的功能与其他依赖项放在一起。关于morgan和cors，现在他们很好，并且会帮助我们以我们喜欢的方式开发应用程序。</p><p id="608e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一行允许我们将JSON字符串解析为API的请求和响应。否则，我们就无法理解客户想要什么，也就无法回答正确的方式。</p><p id="c7d6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">路线和响应</strong></p><p id="6a45" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，服务器需要有一些他可以等待请求的路由，他还需要知道如何正确地回答这些请求。所以，我们来定义一下。</p><p id="e2f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文中我们的目标是构建一个简单的API，而不是大规模的API或连接到数据库的东西。如果你对更高级的话题感兴趣，告诉我，我会实现的。</p><p id="ecb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，每当带有route /connected的GET请求到达时，我们简单的第一个API将简单地响应“Welcome”，并且每当带有route /sends的POST请求到达时，将响应“You send me this string:"+string”。</p><p id="943b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">万一你不知道什么是路由，你可以把它想象成某个类型的所有请求都到达的地方，所以服务器已经知道如何回答了。它们通过斜线和某种测试来区分，这使得路由在特定服务器中是唯一的。</p><p id="346f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不知道什么是GET和POST方法，它们是两个最著名和最常用的HTTP方法。GET用于客户端需要从服务器获取数据的时候，POST用于客户端需要向服务器发送数据的时候。可以找到很多有价值的资源，让你了解整个HTTP协议。</p><p id="603f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两种方法之间的另一个区别是POST带有一个主体，一个给出请求所需的所有信息的地方，而GET没有。如果你想用GET方法检索一些特定的东西，你必须通过URL传递它，而不是在主体中。</p><p id="e750" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，要实现这两条非常简单的路线，我们需要的代码如下:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="4f9d" class="mr lo iq mn b gy ms mt l mu mv">app.get('/connect', (req, res) =&gt; {<br/>     res.send('Welcome');<br/>});</span><span id="8c0c" class="mr lo iq mn b gy mw mt l mu mv">app.post('/sends', (req, res) =&gt; {<br/>     const string= req.body.string; <br/>     res.send('You sent me this string:' + string);<br/>});</span></pre><p id="fef0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些函数看起来很简单，但是我将对它们进行一些评论。两者都有两个参数，req是请求，res是响应。从req中你可以得到你需要的所有信息，例如在post中我们得到正文中发送的文本。</p><p id="08c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，为了向客户机发回一个答案，我们使用res. send()，它将括号内的内容返回给客户机。现在，服务器只需要打开并可供客户端使用。所需的代码行如下:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="57fa" class="mr lo iq mn b gy ms mt l mu mv">const port = 3000;</span><span id="c408" class="mr lo iq mn b gy mw mt l mu mv">app.listen(port, () =&gt; {</span><span id="5cd8" class="mr lo iq mn b gy mw mt l mu mv">        console.log(`Hello world app listening on port ${port}!`);</span><span id="b659" class="mr lo iq mn b gy mw mt l mu mv">});</span></pre><p id="67d9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您可以在终端上运行命令:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="c290" class="mr lo iq mn b gy ms mt l mu mv">&gt;&gt; nodemon server</span></pre><p id="2dc8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">服务器将处于活动状态并正常工作。但是如何测试API呢？可以用很多工具，比如邮差或者失眠。选一个，第一个也有网络版。当服务器正在运行时，您必须输入您选择的应用程序的URL来测试GET和POST:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="205a" class="mr lo iq mn b gy ms mt l mu mv">&gt;&gt; http://localhost:3000/connect<br/>&gt;&gt; http://localhost:3000/sends</span></pre><p id="c552" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一定要在正确的时刻将方法放入GET或POST，否则什么都不会起作用。对于POST请求，您还必须添加一个主体。我建议你去正文部分，或者有写JSON之类的东西的地方。此时，您可以在编辑器中键入以下JSON字符串:</p><pre class="lc ld le lf gt mm mn mo mp aw mq bi"><span id="9d67" class="mr lo iq mn b gy ms mt l mu mv">{"string": "RANDOM STRING FOR THE TEST"}</span></pre><p id="4b6d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论你写什么，都会有一个字符串，你会在响应中看到它。我知道也许关于测试它们的教程和需要的软件不是最好的，但是如果你对邮差或失眠有兴趣，请告诉我，我会尽快提供。</p><h2 id="2dc2" class="mr lo iq bd lp mx my dn lt mz na dp lx ko nb nc lz ks nd ne mb kw nf ng md nh bi translated"><strong class="ak">结论</strong></h2><p id="82c9" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">在本文中，我们学习了如何在Node.js和Express中构建我们的第一个简单的API，这是JavaScript世界中两个最重要的后端技术。至此，你的基础知识就建立起来了，以后你就可以轻松地对它们进行缩放了。这也可以是一篇为更有经验的人写的文章，当他从零开始一个新项目时，他可以简单地复制代码，而不是再次搜索所有容易忘记的简单基础。</p><p id="984b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您的阅读，希望您喜欢这个内容。如果你做到了，让我知道并考虑鼓掌。希望不久能见到你。</p><p id="8931" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ml">更多内容请看</em><a class="ae mk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="ml">plain English . io</em></strong></a><em class="ml">。报名参加我们的</em> <a class="ae mk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="ml">免费周报</em> </strong> </a> <em class="ml">。关注我们关于</em><a class="ae mk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="ml">Twitter</em></strong></a><em class="ml">和</em><a class="ae mk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="ml">LinkedIn</em></strong></a><em class="ml">。加入我们的</em> <a class="ae mk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="ml">社区不和谐</em> </strong> </a> <em class="ml">。</em></p></div></div>    
</body>
</html>