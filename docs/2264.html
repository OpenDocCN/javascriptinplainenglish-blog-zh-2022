<html>
<head>
<title>Regular Expressions—a Rite of Passage: Completing the Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">正则表达式—成年礼:完成应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/regular-expressions-a-rite-of-passage-completing-the-application-526589605075?source=collection_archive---------17-----------------------#2022-05-25">https://javascript.plainenglish.io/regular-expressions-a-rite-of-passage-completing-the-application-526589605075?source=collection_archive---------17-----------------------#2022-05-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0dfe" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第3部分:从基础设施到完整应用程序的构建</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/116f5ce5963b3d470f4d2e212e46c66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2R02GmdYykVbpZrNFxlZ_Q.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><strong class="bd ks">Photo by </strong><a class="ae kt" href="https://unsplash.com/@thisisengineering?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"><strong class="bd ks">ThisisEngineering RAEng</strong></a><strong class="bd ks"> on </strong><a class="ae kt" href="https://unsplash.com/s/photos/software?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"><strong class="bd ks">Unsplash</strong></a></figcaption></figure><p id="ab34" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io"> <em class="lq">欢迎回来！</em>T3】</strong></p><p id="fd8d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">我们的时刻到了。我们现在准备完成我们在<a class="ae kt" href="https://rhieger-98255.medium.com/regular-expressions-a-rite-of-passage-from-theory-to-practice-f4f23bec6044" rel="noopener"> <strong class="kw io"> <em class="lq">正则表达式中开始的应用程序——一个通过的仪式:从理论到实践</em> </strong> </a> <strong class="kw io"> <em class="lq">。</em>T13】</strong></p><p id="2c4d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">我们在本教程的第2部分中的<strong class="kw io">步骤6 </strong>处停止了，其中我们构建了应用程序的基础设施，提供了所有必要的<strong class="kw io">数据结构<br/> </strong>和<strong class="kw io">助手函数。</strong></p><p id="b9e9" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">完成应用程序还需要两个步骤。</p><ol class=""><li id="1861" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">我们需要编写<strong class="kw io">回调函数</strong>，这些函数<strong class="kw io"> </strong>将被第2部分<strong class="kw io">中提到的两个<strong class="kw io">事件监听器</strong>使用。</strong></li><li id="c6bd" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">我们需要编写<strong class="kw io">事件监听器</strong>，它们将调用<strong class="kw io">回调函数</strong>来执行它们的工作。</li></ol><h2 id="bdeb" class="mf mg in bd mh mi mj dn mk ml mm dp mn ld mo mp mq lh mr ms mt ll mu mv mw mx bi translated">步骤7:编写回调函数</h2><p id="7f09" class="pw-post-body-paragraph ku kv in kw b kx my jo kz la mz jr lc ld na lf lg lh nb lj lk ll nc ln lo lp ig bi translated">让我们思考一下这些<strong class="kw io">回调函数</strong>需要完成什么。我们知道它们作为<strong class="kw io">参数</strong>被附加到两个<strong class="kw io">事件监听器</strong>，一个监听<strong class="kw io">验证邮政编码</strong>按钮上的<strong class="kw io">点击事件</strong>，另一个监听<strong class="kw io">点击事件<strong class="kw io">上的</strong></strong>重置按钮。</p><p id="5cbb" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在<strong class="kw io">第2部分的结尾，我们将从您代码中停止的地方开始。</strong></p><p id="6c97" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io">图1，下面的</strong>显示了在<strong class="kw io">第2部分:</strong>中下载的起始代码中剩余的相关行</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/95650179b05bef0e01efeab8bc19794a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0p_T0R2Swl7V0dS1h13Kw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><strong class="bd ks">Fig 1. Excerpt of Relevant Code in app.js Starter Code</strong></figcaption></figure><p id="59c4" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">对于<strong class="kw io"> Validate Zip Codes </strong>按钮，我们需要一个<strong class="kw io">回调函数</strong>，它将<br/>与默认消息<strong class="kw io"> NO MATCH </strong>交换内容，并用有效邮政编码匹配的<strong class="kw io">滚动窗口</strong>填充其<strong class="kw io">父节点</strong>。</p><p id="df0c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io">populateResultBox()函数</strong> <br/>返回参考<strong class="kw io">图1 </strong>，用以下代码替换<strong class="kw io">第65行</strong>(修改后的代码中的第108行)中的注释:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="8e3d" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">const</strong> populateResultBox = () =&gt; {<br/>  <br/>  <strong class="nf io">resultBox.classList.remove</strong>('default-result');<br/>  <strong class="nf io">resultBox.removeChild</strong>(placeHolder);<br/>  <strong class="nf io">resultBox.classList.add</strong>('custom-scrollbar');</span><span id="debd" class="mf mg in nf b gy nn nk l nl nm">  <strong class="nf io">createParagraphText();</strong></span><span id="0d49" class="mf mg in nf b gy nn nk l nl nm">  // Create paragraphs and set textContent only<br/>  // if not already created. Prevents doubling<br/>  // of result data if old paragraphs have not<br/>  // yet been garbage collected.</span><span id="da3d" class="mf mg in nf b gy nn nk l nl nm"><strong class="nf io">  if</strong> (<strong class="nf io">paragraphs.length</strong> === 0) {<br/>    <strong class="nf io">createParagraphs();</strong><br/>  }</span><span id="10af" class="mf mg in nf b gy nn nk l nl nm"><strong class="nf io">  </strong>// Append all result paragraphs to resultBox.</span><span id="9914" class="mf mg in nf b gy nn nk l nl nm">  <strong class="nf io">appendParagraphs</strong>(resultBox, paragraphs);</span><span id="5539" class="mf mg in nf b gy nn nk l nl nm">};</span></pre><p id="1dc7" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在这个函数中发生了很多事情，尽管在我们讨论<strong class="kw io">助手函数时已经分解了很多。尽管如此，这里仍然存在一些新概念。</strong></p><p id="78dc" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io">前三行代码</strong>是对<strong class="kw io"> DOM </strong>的操作，我们在本教程中还没有看到过。为了充分理解这三行代码，我们需要查看来自我们的<strong class="kw io"> HTML </strong>和<strong class="kw io"> CSS </strong>的一些代码片段。</p><p id="f676" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io">下面的代码清单1 </strong>显示了<strong class="kw io">结果框</strong>引用的<strong class="kw io"> HTML </strong>元素:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/6527eb340d66fa1a83f61db31795acb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YHcgRBasD0OtB6eVuK24NA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><strong class="bd ks">Code Listing 1. HTML Elements Captured by resultBox</strong></figcaption></figure><p id="4c1e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">您可能会从第2部分的<strong class="kw io">中回忆起以元素<br/> <code class="fe np nq nr nf b"><strong class="kw io">&lt;div id="getResults"&gt;</strong></code>开始的代码清单，它包含带有两个按钮<br/>的整个小部件和带有<strong class="kw io">不匹配</strong>消息的<code class="fe np nq nr nf b"><strong class="kw io">&lt;p&gt;</strong></code>元素，如上面的<strong class="kw io">清单1 </strong>所示。</strong></p><p id="08e3" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">我们需要简单浏览一下<strong class="kw io"> CSS </strong>代码，以充分理解<code class="fe np nq nr nf b"><strong class="kw io">populateResultBox()</strong></code>正在改变什么。</p><p id="682d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">看看下面的<strong class="kw io">代码清单2 </strong>:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/e2274746ad9c3a34ffeface6b36b7a3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bhDoypTyU-Pytpog9pZrSg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><strong class="bd ks">Code Listing 2: CSS Class Controlling resultBox Background Color</strong></figcaption></figure><p id="c456" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">可以看到，<code class="fe np nq nr nf b"><strong class="kw io">.default-result</strong></code> <strong class="kw io"> </strong>类指定了灰色背景。由于这个背景是将要填充<code class="fe np nq nr nf b"><strong class="kw io">resultBox</strong></code>的结果的占位符的一部分，我们想要清除它。</p><p id="6385" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在我们来看看<code class="fe np nq nr nf b"><strong class="kw io">populateResultBox()</strong></code> <strong class="kw io">回调函数中的第一行代码:</strong></p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="05a6" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">resultBox.classList.remove</strong>('default-result');</span></pre><p id="cc8f" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">我们知道，<code class="fe np nq nr nf b"><strong class="kw io">resultBox</strong></code> <strong class="kw io">对象</strong>捕获了<code class="fe np nq nr nf b"><strong class="kw io">&lt;div id=</strong>"results"<strong class="kw io">&gt;</strong></code>，如<strong class="kw io">代码清单1所示。</strong></p><p id="b923" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在<strong class="kw io">文档对象模型(DOM) </strong>，<strong class="kw io"> HTML元素</strong>具有<code class="fe np nq nr nf b"><strong class="kw io">classList</strong></code> <strong class="kw io">属性</strong>，该属性跟踪与它们关联的所有<strong class="kw io"> CSS类</strong>。</p><p id="39bf" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">链接到<code class="fe np nq nr nf b"><strong class="kw io">classList</strong></code> <strong class="kw io">属性</strong>的<code class="fe np nq nr nf b"><strong class="kw io">remove()</strong></code> <strong class="kw io">方法</strong>完全按照它所说的做——它从<code class="fe np nq nr nf b"><strong class="kw io">classList</strong></code> <strong class="kw io">中移除传递给它的<strong class="kw io">类</strong>。</strong>这并不意味着从<strong class="kw io"> CSS样式表</strong>中删除该类。的意思是，在你的浏览器中显示的网页将不再在结果的滚动窗口中显示灰色背景。</p><p id="6df7" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在让我们回顾一下第二行代码:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="ff93" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">resultBox.removeChild</strong>(placeHolder);</span></pre><p id="5600" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这一行代码与<strong class="kw io"> DOM树中的<strong class="kw io">节点</strong>有关。</strong>您<br/>可能还记得之前的内容，<code class="fe np nq nr nf b"><strong class="kw io">placeHolder</strong></code> <strong class="kw io"> </strong>是捕获<br/> <code class="fe np nq nr nf b">&lt;<strong class="kw io">p class</strong>="default-message" <strong class="kw io">id</strong>="message"&gt;no match&lt;<strong class="kw io">/p</strong>&gt;</code>的<strong class="kw io"> DOM节点</strong>。</p><p id="03cf" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这一段是我们的应用程序的打开屏幕上显示的<strong class="kw io">不匹配</strong>消息。显然，我们需要把它从我们的展示中移除。</p><p id="5971" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><code class="fe np nq nr nf b"><strong class="kw io">removeChild()</strong></code> <strong class="kw io">方法</strong>从<strong class="kw io">父节点中移除<strong class="kw io">子节点</strong>。</strong>的<code class="fe np nq nr nf b"><strong class="kw io">placeHolder</strong></code>是<code class="fe np nq nr nf b"><strong class="kw io">resultBox</strong></code>的子节点。和上面的<code class="fe np nq nr nf b"><strong class="kw io">remove()</strong></code> <strong class="kw io">方法</strong>一样，<code class="fe np nq nr nf b"><strong class="kw io">removeChild()</strong></code>保持<strong class="kw io"> HTML </strong>中的段落不变。它只是从我们的现场展示中移除。</p><p id="a4b4" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">接下来让我们回顾一下第三行代码:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="4563" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">resultBox.classList.add</strong>('custom-scrollbar');</span></pre><p id="b506" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在这里，我们正在做一些完全不同的事情。这里，我们<em class="lq">给<strong class="kw io"> resultBox添加</strong></em>一个<strong class="kw io"> CSS <br/>类</strong>。 <strong class="kw io">代码清单3 </strong>下面显示了<strong class="kw io"> CSS <br/>类</strong>T10<strong class="kw io">:</strong>的代码</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/171b521cdce1db98bf08d3bfc09d07cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vm6NhgwPa7P7-HjtUTtDuQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><strong class="bd ks">Code Listing 3. CSS Class Controlling Scrollbar Styling for resultBox</strong></figcaption></figure><p id="97fb" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">无需深入研究上面的代码，我们所需要知道的就是这个类在<strong class="kw io"> resultBox </strong>中设置滚动条的前景和背景样式。对于那些有兴趣深入研究样式的人来说，上述样式是由<strong class="kw io"> CSS Tricks </strong> (Coyier，<a class="ae kt" href="http://Coyier, Chris. “The Current State of Styling Scrollbars in CSS (2022 Update): CSS-Tricks.” CSS Tricks, 21 Feb. 2022, https://css-tricks.com/the-current-state-of-styling-scrollbars-in-css/#aa-using-custom-properties-for-styling-scrollbars-in-css." rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="lq">“在CSS中使用自定义属性对滚动条进行样式化”</em> </strong> </a> <em class="lq">)的工作提供的。</em></p><p id="36e1" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">链接到<strong class="kw io"> classList </strong> <strong class="kw io">属性</strong>的<code class="fe np nq nr nf b"><strong class="kw io">add()</strong></code> <strong class="kw io">方法</strong>，与我们刚才看到的<code class="fe np nq nr nf b"><strong class="kw io">remove()</strong></code> <strong class="kw io">方法</strong>相比，增加了一个<strong class="kw io"> CSS </strong> <strong class="kw io">类</strong>到<strong class="kw io"> resultBox </strong>。</p><p id="4bc4" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><code class="fe np nq nr nf b"><strong class="kw io">populateResultBox()</strong></code> <strong class="kw io">回调函数</strong>中剩余的代码已经在本教程<strong class="kw io">的<strong class="kw io">第2部分、</strong> <strong class="kw io">第6步</strong>中有所涉及。</strong></p><p id="99da" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在我们可以将注意力转向编写<code class="fe np nq nr nf b"><strong class="kw io">depopulateResultBox()</strong></code> <strong class="kw io">回调函数。</strong>正如你可能猜到的，这个函数的目的是删除填充了<strong class="kw io">结果框</strong>的所有段落，并恢复与之相关的默认消息和样式。</p><p id="40fb" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">回头参考图1中的<strong class="kw io">，</strong>用下面的函数替换<strong class="kw io">第69行</strong>(修改代码中的第133行)上的注释:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="1b4b" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">const</strong> depopulateResultBox = () =&gt; {<br/>  <strong class="nf io">while</strong> (resultBox.firstChild) {<br/>    <strong class="nf io">resultBox.removeChild</strong>(resultBox.firstChild);<br/>  }<br/>  <strong class="nf io">resultBox.classList.remove</strong>('custom-scrollbar');<br/>  <strong class="nf io">resultBox.classList.add</strong>('default-result');<br/>  <strong class="nf io">resultBox.appendChild</strong>(placeHolder);<br/>};</span></pre><p id="07cd" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">当我们编写上面的<code class="fe np nq nr nf b"><strong class="kw io">populateResultBox()</strong></code> <strong class="kw io">辅助函数</strong>时，我们遇到了这个函数中的每一个方法。下面是这段代码中发生的事情的快速分解:</p><ol class=""><li id="748e" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">我们从一个<strong class="kw io"> while循环</strong>开始，它接受单个参数— <code class="fe np nq nr nf b"><strong class="kw io">resultBox.firstChild</strong></code>。我们已经知道<strong class="kw io"> resultBox </strong>是一个<strong class="kw io"> DOM节点。</strong>因此它公开了<strong class="kw io">属性</strong>和<strong class="kw io">方法</strong>。<code class="fe np nq nr nf b"><strong class="kw io">firstChild</strong></code>属性捕获<strong class="kw io"> resultBox </strong>的第一个子元素，这将是<strong class="kw io"> resultBox中的第一个段落。</strong></li><li id="2e7b" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">这个<strong class="kw io"> while循环</strong>中的参数是一个<strong class="kw io">布尔值</strong>，如果<strong class="kw io"> resultBox </strong>中有一个<strong class="kw io"> firstChild </strong>段落节点，则该布尔值计算为<strong class="kw io"> true </strong>。每次通过循环，<code class="fe np nq nr nf b"><strong class="kw io">resultBox.removeChild</strong>(resultBox.firstChild);</code>被执行，它删除一个段落。在循环的每次迭代中，下一段成为f <strong class="kw io"> irstChild。</strong>一旦没有剩余的<strong class="kw io">第一个孩子</strong>，循环终止，因为没有剩余的段落。</li><li id="5f16" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">一旦所有的段落都被删除，循环中<strong class="kw io">之外的<br/>代码的剩余三行从<strong class="kw io"> resultBox中删除<code class="fe np nq nr nf b"><strong class="kw io">.custom-scrollbar</strong></code>类<br/>，</strong>添加<code class="fe np nq nr nf b"><strong class="kw io">.default-result</strong></code> <strong class="kw io">类</strong>，从而恢复灰色背景，最后使用<code class="fe np nq nr nf b"><strong class="kw io">appendChild()</strong></code> <strong class="kw io">方法</strong>恢复<br/> <strong class="kw io">不匹配</strong>消息。</strong></li></ol><p id="3cc0" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">我们现在已经完成了我们的<strong class="kw io">回调函数</strong>，并准备好进行最后一步——为<strong class="kw io">验证邮政编码</strong>和<strong class="kw io">重置</strong>按钮编写<strong class="kw io">事件监听器</strong>。</p><h2 id="dbee" class="mf mg in bd mh mi mj dn mk ml mm dp mn ld mo mp mq lh mr ms mt ll mu mv mw mx bi translated">第八步。编写事件侦听器代码</h2><p id="24da" class="pw-post-body-paragraph ku kv in kw b kx my jo kz la mz jr lc ld na lf lg lh nb lj lk ll nc ln lo lp ig bi translated">现在我们接近完成应用程序的最后一步——为我们的按钮编写<strong class="kw io">事件监听器</strong>。</p><p id="9c21" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">首先，我想回忆一下我们在<strong class="kw io">第2部分</strong>、<a class="ae kt" href="https://rhieger-98255.medium.com/regular-expressions-a-rite-of-passage-from-theory-to-practice-f4f23bec6044" rel="noopener"> <strong class="kw io"> <em class="lq">正则表达式—从理论到实践</em> </strong> </a>的开头创建的两个声明的<strong class="kw io">节点对象</strong>:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="64ee" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">const</strong> resultButton = <strong class="nf io">document.getElementById</strong>('validate');<br/><strong class="nf io">const</strong> resetButton = <strong class="nf io">document.getElementById</strong>('reset');</span></pre><p id="ac3b" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这两行代码是我们的起点，因为我们将需要它们来构建我们的<strong class="kw io">事件监听器。</strong></p><p id="ce8c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io"> resultButton </strong>是捕获我们的<br/><strong class="kw io">index.html</strong>文件中的<br/> <code class="fe np nq nr nf b">&lt;<strong class="kw io">button class="</strong>controlButton" <strong class="kw io">id</strong>="validate"&gt;</code> <strong class="kw io">元素</strong>的<strong class="kw io"> DOM节点</strong>。</p><p id="2aca" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io"> resetButton </strong>是捕获<br/> <code class="fe np nq nr nf b">&lt;<strong class="kw io">button class=</strong>"controlButton"<strong class="kw io"> id</strong>="reset"&gt;</code> <strong class="kw io">元素的<strong class="kw io"> DOM节点</strong>。</strong></p><p id="08fd" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">有了这些信息，我们就可以开始了。回到图1的<strong class="kw io">，</strong>用下面的代码<strong class="kw io"> </strong>替换<strong class="kw io">第75行</strong>(修改后代码的第146行)中的注释:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="f78c" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">resultButton.addEventListener</strong>(<strong class="nf io">'click',</strong> populateResultBox);</span></pre><p id="a71a" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">使用<strong class="kw io"> resultButton DOM节点，</strong>我们将<code class="fe np nq nr nf b"><strong class="kw io">addEventListener()</strong></code>方法链接到它。如你所见，这个方法有两个参数。</p><p id="241e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">第一个指定要监听的事件类型(有许多不同的种类)。我们的是一个<strong class="kw io">点击事件</strong>，这意味着JavaScript将监听任何鼠标点击<strong class="kw io"> resultButton。</strong></p><p id="913c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">第二个是检测到<strong class="kw io">点击事件</strong>时要执行的<strong class="kw io">回调函数</strong>。这个<strong class="kw io">回调函数</strong>可以是作为第二个参数包含的匿名函数。在我们的例子中，<strong class="kw io">回调函数</strong>是<code class="fe np nq nr nf b"><strong class="kw io">populateResultBox()</strong></code>。</p><p id="a37a" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">有了这个<strong class="kw io">事件监听器</strong>，当我们点击<strong class="kw io"> Validate Zip Codes </strong>按钮时，我们现在应该能够用有效的邮政编码匹配填充<strong class="kw io"> resultBox </strong>。我们来测试一下。</p><p id="d91b" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">如果您还没有这样做，请在您喜欢的浏览器中打开<strong class="kw io">index.html</strong>文件。如果您已经打开了该文件，请确保刷新浏览器。</p><p id="5016" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">点击<strong class="kw io">验证邮政编码</strong>按钮。</p><p id="e74b" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">您的屏幕看起来应该很像下面的<strong class="kw io">图2 </strong>所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/9e7f608724755db5e1505875480cb63a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-LbL5tJ3gT94Pc48DNgRvQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><strong class="bd ks">Fig. 2 resultBox with Scrollbar and Populated with Valid Zip Codes</strong></figcaption></figure><p id="8a82" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在让我们为<strong class="kw io">重置</strong>按钮编写<strong class="kw io">事件监听器</strong>。</p><p id="12a6" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">回头参考<strong class="kw io">图1，</strong>用以下代码替换<strong class="kw io">第79行</strong>(修改代码中的第150行)的注释:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="f957" class="mf mg in nf b gy nj nk l nl nm"><strong class="nf io">resetButton.addEventListener</strong>(<strong class="nf io">'click',</strong> depopulateResultBox);</span></pre><p id="9460" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这个<strong class="kw io">事件监听器</strong>也监听一个<strong class="kw io">点击事件</strong>，但是这次是在我们的<strong class="kw io">重置</strong>按钮上，并且调用<code class="fe np nq nr nf b"><strong class="kw io">depopulateResultBox()</strong></code> <strong class="kw io">回调函数</strong>来将我们的页面重置到它的开始状态。</p><p id="ec82" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">要对此进行测试，请刷新您的浏览器。现在点击<strong class="kw io">验证邮政编码</strong>按钮。一旦您看到<strong class="kw io">结果框</strong>已经填充了邮政编码匹配，单击<strong class="kw io">重置</strong>按钮。</p><p id="c070" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">如果一切按计划进行，您的屏幕应重置到其初始状态，在<strong class="kw io">结果框中显示消息<strong class="kw io"> NO MATCH </strong>。</strong></p><h1 id="e548" class="nv mg in bd mh nw nx ny mk nz oa ob mn jt oc ju mq jw od jx mt jz oe ka mw of bi translated">结论</h1><p id="23df" class="pw-post-body-paragraph ku kv in kw b kx my jo kz la mz jr lc ld na lf lg lh nb lj lk ll nc ln lo lp ig bi translated"><strong class="kw io"> <em class="lq">祝贺你！</em> </strong>您已经完成了演示邮政编码验证<strong class="kw io">单页应用程序(SPA) </strong>。</p><p id="5223" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io"> <em class="lq">如果你的代码不工作，你不确定为什么，</em> </strong> <em class="lq">你可以下载我的</em> <a class="ae kt" href="https://github.com/RHieger/regex-zip-code-tutorial/releases/tag/v2.2" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io">完成的代码</strong> </a> <em class="lq">和你的对比一下，看看有没有错误。</em></p><p id="ff8f" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">也可以在<a class="ae kt" href="https://codepen.io/RHieger/live/yLvLJPO" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> codepen.io </strong> </a>上查看这里的直播应用。</p><h2 id="a68c" class="mf mg in bd mh mi mj dn mk ml mm dp mn ld mo mp mq lh mr ms mt ll mu mv mw mx bi translated">后续步骤</h2><p id="44a5" class="pw-post-body-paragraph ku kv in kw b kx my jo kz la mz jr lc ld na lf lg lh nb lj lk ll nc ln lo lp ig bi translated">现在你已经有了一个从测试字符串<strong class="kw io"> <em class="lq">中返回有效邮政编码的功能性演示web应用程序，接下来你会怎么做呢？</em>T45】</strong></p><p id="025a" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">摆弄你已经完成的代码。以下是一些建议:</p><ol class=""><li id="f369" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><strong class="kw io">尝试进一步将</strong> <strong class="kw io">助手函数</strong>从它们操作的<br/>数据中解耦，就像我的<code class="fe np nq nr nf b"><strong class="kw io">createParagraphs()</strong></code> <strong class="kw io">函数</strong>的例子一样。</li><li id="7c69" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw io">考虑如何让这个应用成为真正的交互式应用</strong>，用户只需输入一个测试字符串，然后点击<strong class="kw io"> Validate Zip Codes </strong>按钮即可获得结果。</li></ol><p id="595a" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">最后，随意叉<a class="ae kt" href="https://github.com/RHieger/regex-zip-code-tutorial" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io">我的资源库</strong> </a>创建自己的版本。</p><p id="29c6" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io"> <em class="lq">快乐编码！</em> </strong></p><p id="ad90" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><em class="lq">更多内容请看</em><a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="lq">plain English . io</em></strong></a><em class="lq">。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="lq">免费周报</em> </strong> </a> <em class="lq">。关注我们关于</em><a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="lq">Twitter</em></strong></a><em class="lq">和</em><a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="lq">LinkedIn</em></strong></a><em class="lq">。查看我们的</em> <a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="lq">社区不和谐</em> </strong> </a> <em class="lq">加入我们的</em> <a class="ae kt" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="lq">人才集体</em> </strong> </a> <em class="lq">。</em></p></div></div>    
</body>
</html>