<html>
<head>
<title>How to Convert a Map to JSON in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript将地图转换成JSON</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-convert-map-to-json-51ee1232e2b9?source=collection_archive---------11-----------------------#2022-06-07">https://javascript.plainenglish.io/javascript-convert-map-to-json-51ee1232e2b9?source=collection_archive---------11-----------------------#2022-06-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7ef7" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何用JavaScript轻松地将地图转换成JSON字符串。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/f10453b84a49486b8b98f240ad7bbb09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQw_ezMJq_6oKYVtGfuGsw.png"/></div></div></figure><p id="f5a5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在JavaScript中将一个<code class="fe lk ll lm ln b">Map</code>转换成JSON，调用带有<code class="fe lk ll lm ln b">Map</code>作为参数的<code class="fe lk ll lm ln b">Object.fromEntries()</code>方法，并将结果传递给<code class="fe lk ll lm ln b">JSON.stringify()</code>方法。例如:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="2c82" class="ls lt in ln b gy lu lv l lw lx">const map = new Map([<br/>  ['user1', 'John'],<br/>  ['user2', 'Kate'],<br/>  ['user3', 'Peter'],<br/>]);</span><span id="1d76" class="ls lt in ln b gy ly lv l lw lx">const json = JSON.stringify(Object.fromEntries(map));</span><span id="8b09" class="ls lt in ln b gy ly lv l lw lx">// {"user1":"John","user2":"Kate","user3":"Peter"}<br/>console.log(json);</span></pre><p id="d006" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们首先用<code class="fe lk ll lm ln b">Object.fromEntries()</code>转换<code class="fe lk ll lm ln b">Map</code>，因为我们不能直接将<code class="fe lk ll lm ln b">Map</code>序列化为JSON字符串。<code class="fe lk ll lm ln b">Object.fromEntries()</code>方法将任何键值对列表转换成一个对象:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="f8cf" class="ls lt in ln b gy lu lv l lw lx">const map = new Map([<br/>  ['user1', 'John'],<br/>  ['user2', 'Kate'],<br/>  ['user3', 'Peter'],<br/>]);</span><span id="ae56" class="ls lt in ln b gy ly lv l lw lx">const obj = Object.fromEntries(map);</span><span id="4666" class="ls lt in ln b gy ly lv l lw lx">// { user1: 'John', user2: 'Kate', user3: 'Peter' }<br/>console.log(obj);</span></pre><h1 id="b9a5" class="lz lt in bd ma mb mc md me mf mg mh mi jt mj ju mk jw ml jx mm jz mn ka mo mp bi translated">将JSON转换为Map</h1><p id="288b" class="pw-post-body-paragraph ko kp in kq b kr mq jo kt ku mr jr kw kx ms kz la lb mt ld le lf mu lh li lj ig bi translated">要将JSON字符串转换回一个<code class="fe lk ll lm ln b">Map</code>:</p><ol class=""><li id="75d9" class="mv mw in kq b kr ks ku kv kx mx lb my lf mz lj na nb nc nd bi translated">用<code class="fe lk ll lm ln b">JSON.parse()</code>将JSON字符串解析成一个对象。</li><li id="2d87" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">用这个对象作为参数调用<code class="fe lk ll lm ln b">Object.entries()</code>。</li><li id="899a" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">创建一个新的<code class="fe lk ll lm ln b">Map</code>对象，将<code class="fe lk ll lm ln b">Object.entries()</code>的结果传递给构造函数。</li></ol><p id="13ce" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="1ca5" class="ls lt in ln b gy lu lv l lw lx">const map = new Map([<br/>  ['user1', 'John'],<br/>  ['user2', 'Kate'],<br/>  ['user3', 'Peter'],<br/>]);</span><span id="51ab" class="ls lt in ln b gy ly lv l lw lx">const jsonFromMap = JSON.stringify(Object.fromEntries(map));</span><span id="0bdd" class="ls lt in ln b gy ly lv l lw lx">const obj = JSON.parse(jsonFromMap);<br/>const mapFromObj = new Map(Object.entries(obj));</span><span id="214f" class="ls lt in ln b gy ly lv l lw lx">// Map(3) { 'user1' =&gt; 'John', 'user2' =&gt; 'Kate', 'user3' =&gt; 'Peter' }<br/>console.log(mapFromObj);</span></pre><p id="9a57" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们首先将字符串转换为对象，然后转换为数组，因为我们不能将JSON字符串直接解析为<code class="fe lk ll lm ln b">Map</code>。<code class="fe lk ll lm ln b">Object.entries()</code>方法获取一个对象并返回一个键值对列表，这些键值对对应于该对象的每个属性的键和值:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="5c19" class="ls lt in ln b gy lu lv l lw lx">const obj = {<br/>  user1: 'John',<br/>  user2: 'Kate',<br/>  user3: 'Peter',<br/>};</span><span id="cd5a" class="ls lt in ln b gy ly lv l lw lx">const arr = Object.entries(obj);</span><span id="1ea9" class="ls lt in ln b gy ly lv l lw lx">// [ [ 'user1', 'John' ], [ 'user2', 'Kate' ], [ 'user3', 'Peter' ] ]<br/>console.log(arr);</span></pre><p id="2ef0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">Map()</code>构造函数可以接受一个键值对的iterable来创建<code class="fe lk ll lm ln b">Map</code>元素，所以我们将<code class="fe lk ll lm ln b">Object.entries()</code>的结果直接传递给它。</p></div><div class="ab cl nj nk hr nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ig ih ii ij ik"><p id="fc0e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nq">更新于:</em><a class="ae nr" href="https://codingbeautydev.com/blog/javascript-convert-map-to-json/" rel="noopener ugc nofollow" target="_blank">【codingbeautydev.com】T21</a></p><p id="a83d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">每周获取新的web开发技巧和教程。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/b8db4799ac3fa2b55b41c7ca714bdf64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KLG9Wxq6Sqt3jxTaL00Tnw.png"/></div></div></figure><p id="3723" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nr" href="https://codingbeautydev.com/newsletter" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">订阅</strong> </a></p></div></div>    
</body>
</html>