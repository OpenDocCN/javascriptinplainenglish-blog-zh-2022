<html>
<head>
<title>How to Build Your Own Custom Directive in Vue 3 in 2 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在2分钟内在Vue 3中构建自己的自定义指令</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-your-own-custom-directive-in-vue-3-in-2-minutes-dd94f4e5be01?source=collection_archive---------6-----------------------#2022-05-10">https://javascript.plainenglish.io/how-to-build-your-own-custom-directive-in-vue-3-in-2-minutes-dd94f4e5be01?source=collection_archive---------6-----------------------#2022-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="727d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何在几分钟内开始在Vue.js中构建自己的自定义指令的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/402d6102ac6af43d41e3e59b84f2112e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GbaQvAzfBnGJJHb7BZ29_A.png"/></div></div></figure><p id="f13b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可能已经知道，Vue.js附带了许多不同的本机指令，您可以使用它们。还有指令如<strong class="kt ir"><em class="ln">v-代表</em> </strong>、<strong class="kt ir"> <em class="ln"> v-if </em> </strong>、<strong class="kt ir"> <em class="ln"> v-show </em> </strong>等等。这些都超级厉害，真的很有用。但是，在某些情况下，您可能需要创建自己的自定义指令，因为您想要某种非Vue内置的功能。</p><p id="e92e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">幸运的是，在Vue.js中构建自定义指令非常简单。在本文中，我将向您展示如何在几分钟内开始构建您自己的自定义指令。</p><h1 id="f89d" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">构建自定义指令</h1><p id="862f" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">为了使本文尽可能简单，我们将构建一个非常简单的指令，用我们自己选择的颜色为元素添加虚线边框。这应该会让您在构建定制指令方面有一个良好的开端。这个例子可能不是您在实际应用程序中会做的事情，但同样，这只是为了演示如何创建一个指令。一旦您掌握了如何构建它们，我相信您可以从那里扩展并开始制定更高级的指令。</p><p id="0517" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们需要利用<strong class="kt ir"> <em class="ln"> app </em> </strong>上的<strong class="kt ir"> <em class="ln">指令()</em> </strong>功能。这需要两个论据。指令的名称和指令本身。让我们试着设置一下。首先打开<strong class="kt ir"> <em class="ln"> src </em> </strong>文件夹中的<strong class="kt ir"> main.ts(或js) </strong>文件</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="5e09" class="mq lp iq mm b gy mr ms l mt mu">....</span><span id="4337" class="mq lp iq mm b gy mv ms l mt mu">const app = <strong class="mm ir"><em class="ln">createApp</em></strong>(App);</span><span id="f5c8" class="mq lp iq mm b gy mv ms l mt mu">//Register the directive + functionality<br/>app.directive("dashed-border", {<br/>  beforeMount: (el, { value }) =&gt; {<br/>    el.style.border = `1px dashed ${value}`;<br/>  },<br/>});</span></pre><p id="ef3f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你在上面的例子中看到的，我们注册了一个名为<strong class="kt ir">虚线边框</strong>的指令，它具有一些功能。您可能会注意到，我们正在获取想要应用该指令的元素，并为其添加一些样式。</p><p id="9d7e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这允许我们在HTML元素上使用它，如下所示:</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="ed1e" class="mq lp iq mm b gy mr ms l mt mu">&lt;div <strong class="mm ir">v-dashed-border</strong>="'#f00'"&gt;Hi! My name is Vue&lt;/div&gt;</span></pre><p id="ce2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您运行这个，您应该能够看到如下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/c92f29ca1360a4a5570ce13f4e6d0223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6RyEa0aa5p4CIuwXLPEIjg.png"/></div></div></figure><p id="5bfe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">干得好！你现在有了一个工作指令。<br/>请注意，红色边框来自向元素添加指令时指定的参数:</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="2d08" class="mq lp iq mm b gy mr ms l mt mu">&lt;div v-dashed-border="'#f00'"&gt; &lt;----- The red color</span></pre><p id="8b32" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，假设您有许多不同的指令，<strong class="kt ir"> main.ts </strong>文件将很快变得混乱。一个好主意是将每个指令拆分到各自的文件中。为此，请创建一个新的。ts文件—将其保存到:<strong class="kt ir">指令/虚线边框. ts </strong>中，并添加以下代码:</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="a50c" class="mq lp iq mm b gy mr ms l mt mu">import { App } from 'vue';<br/><br/>const directiveDashedBorder = (app: App&lt;Element&gt;) =&gt; {<br/>  return app.directive("dashed-border", {<br/>    beforeMount: (el, { value }) =&gt; {<br/>      el.style.border = `1px dashed ${value}`;<br/>    },<br/>  });<br/>}<br/><br/>export default directiveDashedBorder;</span></pre><p id="b48e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了利用这一点，我们需要稍微改变一下要点:</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="05a6" class="mq lp iq mm b gy mr ms l mt mu">.....<br/>import directiveDashedBorder from './test-directive';</span><span id="6efe" class="mq lp iq mm b gy mv ms l mt mu">const app = <strong class="mm ir"><em class="ln">createApp</em></strong>(App);</span><span id="dc20" class="mq lp iq mm b gy mv ms l mt mu">// Custom directives<br/>directiveDashedBorder(app);</span></pre><p id="4c57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">再次运行您的应用程序，您应该会看到与之前相同的结果。<br/>这一切！看看开始构建自己的定制指令有多容易？我很好奇你下一步会构建什么指令？请在评论中让我知道。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="5313" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢你的阅读，我希望你喜欢这篇文章，如果是的话，请点击按钮支持我。</p><p id="414c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">附注:首先，你应该在收件箱里收到我的帖子。</em> <a class="ae ne" href="https://nickychristensen.medium.com/subscribe" rel="noopener"> <strong class="kt ir"> <em class="ln">做到这里</em> </strong> <em class="ln">！</em> </a></p><p id="9083" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">其次，如果你自己喜欢体验媒介，可以考虑通过报名成为会员</em>  <em class="ln">来支持我和其他成千上万的作家</em> <a class="ae ne" href="https://nickychristensen.medium.com/membership" rel="noopener"> <strong class="kt ir"> <em class="ln">。</em>通过这个链接 <a class="ae ne" href="https://nickychristensen.medium.com/membership" rel="noopener"> <strong class="kt ir"> <em class="ln">报名</em> </strong> </a> <em class="ln">，你就直接用你的一部分费用支持我，不会多花你多少钱。如果你这样做了，万分感谢。</em></strong></a></p><div class="nf ng gp gr nh ni"><a href="https://medium.com/js-dojo/vue-3-tips-tricks-d820b04f452f" rel="noopener follow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">Vue 3提示和技巧</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">使用这些提示和技巧，成为更好、更高效的Vue开发人员</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><div class="nf ng gp gr nh ni"><a href="https://blog.devgenius.io/convert-text-to-speech-with-javascript-using-the-web-speech-api-97bc2a9df75d" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">使用Web Speech API通过JavaScript将文本转换为语音</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">如何用几行JavaScript轻松地将文本转换成语音。</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">blog.devgenius.io</p></div></div><div class="nr l"><div class="nx l nt nu nv nr nw kp ni"/></div></div></a></div><div class="nf ng gp gr nh ni"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-conditionally-add-properties-to-an-object-with-javascript-in-2-minutes-7cce88b316b4"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">如何在2分钟内用JavaScript有条件地向对象添加属性</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">您是否曾经遇到过想要有条件地给对象添加属性的情况？有几种方法可以…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nr l"><div class="ny l nt nu nv nr nw kp ni"/></div></div></a></div><p id="f350" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">如果你想找个时间和我聊聊，可以关注我的</em><a class="ae ne" href="https://twitter.com/nickycdk" rel="noopener ugc nofollow" target="_blank"><em class="ln">Twitter</em></a><em class="ln">|</em><a class="ae ne" href="https://www.linkedin.com/in/dknickychristensen/" rel="noopener ugc nofollow" target="_blank"><em class="ln">LinkedIn</em></a><em class="ln">或者直接访问我的</em> <a class="ae ne" href="https://nickychristensen.dk/" rel="noopener ugc nofollow" target="_blank"> <em class="ln">网站</em> </a> <em class="ln">。</em></p><p id="cd74" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">更多内容请看</em><a class="ae ne" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln">plain English . io</em></strong></a><em class="ln">。报名参加我们的</em> <a class="ae ne" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ln">免费周报</em> </strong> </a> <em class="ln">。关注我们关于</em><a class="ae ne" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln">Twitter</em></strong></a><em class="ln">和</em><a class="ae ne" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln">LinkedIn</em></strong></a><em class="ln">。加入我们的</em> <a class="ae ne" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ln">社区不和谐</em> </strong> </a> <em class="ln">。</em></p></div></div>    
</body>
</html>