<html>
<head>
<title>Analysis of the New React Native Architecture with Results</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新反应原生架构的分析与结果</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/analysis-of-react-native-new-architecture-with-results-1c157ab9c9c8?source=collection_archive---------2-----------------------#2022-09-06">https://javascript.plainenglish.io/analysis-of-react-native-new-architecture-with-results-1c157ab9c9c8?source=collection_archive---------2-----------------------#2022-09-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7474652076a27c83d38786ab1bd6ef59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BTiQDNWNjyHNXFotg3s1Mw.jpeg"/></div></div></figure><p id="740b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">欢迎来到另一个博客！这个博客将是一个特别的博客，因为在这个博客中，我将讨论我在React Native &amp; Flutter——Hybrid meetup之前发表的技术演讲的摘要。meetup由为React本地爱好者组织免费社区聚会的GeekyAnts提供支持。作为meetup的发言人之一，我演讲的题目是— <strong class="jx io"> <em class="ku">新React本地架构的成果。</em> </strong></p><p id="edbe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这次演讲更像是一次技术分析，我讨论了新的React Native架构在性能和结果方面的改进。这是通过新旧架构<strong class="jx io"> (react原生版本— 0.69.5) </strong>在应用存储、构建时间和应用加载时间方面的比较实现的。此外，我还讨论了新架构的主要亮点，如Turbo模块的延迟加载(以及创建它们有多容易)以及下一代视图管理器Fabric。</p><blockquote class="kv kw kx"><p id="129d" class="jv jw ku jx b jy jz ka kb kc kd ke kf ky kh ki kj kz kl km kn la kp kq kr ks ig bi translated">想看整个聚会的视频，请点击这里的链接:<a class="ae kt" href="https://youtu.be/T1LyKRbpYxE" rel="noopener ugc nofollow" target="_blank">https://youtu.be/T1LyKRbpYxE</a></p></blockquote><figure class="lb lc ld le gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/277c726bf15c4fbb6a78ff479fc44f4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYpr4ODY65_gYAjO8XKlpg.jpeg"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk"><a class="ae kt" href="https://youtu.be/T1LyKRbpYxE" rel="noopener ugc nofollow" target="_blank">https://youtu.be/T1LyKRbpYxE</a></figcaption></figure><p id="6ea3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在开始之前，我想建议你看看我以前的博客(如果你还没看过的话)，这样你就能更清楚地了解我，因为这篇博客是我以前博客的延伸版。在这里找到链接:<a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/react-native-new-architecture-old-vs-new-d0130f42bc79?source=your_stories_page-------------------------------------"> <strong class="jx io"> React Native新架构—旧Vs新</strong> </a> <strong class="jx io">。</strong></p><p id="0f69" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们需要做以下设置-</p><figure class="lb lc ld le gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lj"><img src="../Images/68d44d6c1221afffd5e60f81a4e6f861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1LoFq3Hi5-VCH8fs"/></div></div></figure><p id="166b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过这样的设置，它可以在iOS和android上自动启用turbo模块和结构，这样我们就可以开始将这些功能作为新架构的一部分来使用。此外，确保您使用最新的react原生版本构建应用程序，否则您可能需要更新gradle版本，并手动更新ios和android上的turbo模块和结构。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="ac45" class="lr ls in bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated"><strong class="ak">分析</strong></h1><p id="a1f8" class="pw-post-body-paragraph jv jw in jx b jy mp ka kb kc mq ke kf kg mr ki kj kk ms km kn ko mt kq kr ks ig bi translated"><strong class="jx io">注意</strong>:分析是对react原生旧版本0.67.0(采用旧架构)和react原生新版本0.69.5(采用新架构)进行比较，结果仅考虑android版本。</p><ul class=""><li id="b25f" class="mu mv in jx b jy jz kc kd kg mw kk mx ko my ks mz na nb nc bi translated"><strong class="jx io"> App构建时间:</strong></li></ul><p id="2ab9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于使用一些卡组件构建非常基本的应用程序，与旧架构相比，新架构的构建时间通常更长。</p><figure class="lb lc ld le gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/3d2add348b077fc4de81581cae3228ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mz25QeVBUPfBkfw__vpbZw.png"/></div></div></figure><p id="2e88" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以运行<strong class="jx io">$ yarn react-native run-Android-active-arch-only</strong>来减少大约75%的构建时间。</p><ul class=""><li id="b42f" class="mu mv in jx b jy jz kc kd kg mw kk mx ko my ks mz na nb nc bi translated"><strong class="jx io">存储分析:</strong></li></ul><p id="fd52" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于相同的应用程序，使用新架构构建的应用程序的存储也比旧架构高。</p><figure class="lb lc ld le gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/97abc58d4068ab92b3a1724ddcb08dbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KHzGSZ7aJPgO8couix7Twg.png"/></div></div></figure><ul class=""><li id="203e" class="mu mv in jx b jy jz kc kd kg mw kk mx ko my ks mz na nb nc bi translated"><strong class="jx io">织物渲染器和卷轴分析:</strong></li></ul><p id="357c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们知道基于桥的架构的缺点，在新的架构中，这被JSI层所取代。为了分析使用Flatlist的滚动效果，我采用了一个包含1000个列表项的数据集，执行连续滚动，并且使用新旧架构构建了相同的应用程序。</p><p id="c17e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="ku">结果</em> </strong>:从UI方面来看没有如此显著的差异，但我想提一下，与使用旧架构构建的相同应用相比，使用新架构，我们获得了更平滑的滚动效果。</p><figure class="lb lc ld le gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/4a1a19904aa6ecda1013c65683ce8263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CcKhcriZoh5d6zIPrORdrA.png"/></div></div></figure><div class="lb lc ld le gt ab cb"><figure class="ng jo nh ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/04e8c5e428b61e6f09a8289cd3b07cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/0*rrIgv7BXJpRmQ3Yw"/></div></figure><figure class="ng jo nm ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/1fce5875386f794f18ef9fdb818a9a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/0*TlwpUw3ERgtcc1fP"/></div></figure></div><div class="ab cb"><figure class="ng jo nn ni nj nk nl paragraph-image"><img src="../Images/e537218e4cebaa46aef4f3521e0c51ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:216/0*UOA2x8biK0Sen8SZ"/></figure><figure class="ng jo no ni nj nk nl paragraph-image"><img src="../Images/6b5434ee4dcb5048aa2629335ef937e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/0*0leVrdycoTr3Dwp7"/></figure></div><ul class=""><li id="d6b3" class="mu mv in jx b jy jz kc kd kg mw kk mx ko my ks mz na nb nc bi translated"><strong class="jx io"> App加载时间分析:</strong></li></ul><p id="5e37" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">应用程序加载时间参数是最重要的参数之一，因为对于任何应用程序，加载/应用程序启动时间应该非常短。这为客户提供了良好的用户体验。此外，如果您的应用程序启动时间很长，那么您可能会失去您的客户。</p><p id="1a6f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">与使用旧架构构建的应用程序(加载时间为1.2秒)相比，使用新架构构建的应用程序加载时间相对较短(加载时间为0.86秒)，并且我们获得了一些性能优势。</p><figure class="lb lc ld le gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/4a1a19904aa6ecda1013c65683ce8263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CcKhcriZoh5d6zIPrORdrA.png"/></div></div></figure><div class="lb lc ld le gt ab cb"><figure class="ng jo np ni nj nk nl paragraph-image"><img src="../Images/a5f37b68dcb7f6d73377f4577d76dea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/0*mDjMKO5PdY1LUVN-"/></figure><figure class="ng jo np ni nj nk nl paragraph-image"><img src="../Images/37cfa12b76a048f9474d02a7774b9d53.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/0*a2q4pyWj910k3_Su"/></figure></div><p id="1b6c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">可能的原因是-</p><ol class=""><li id="d5d6" class="mu mv in jx b jy jz kc kd kg mw kk mx ko my ks nq na nb nc bi translated">默认情况下，<strong class="jx io"> Hermes </strong>将被设置为下一个react原生版本的默认JS引擎。</li><li id="aeef" class="mu mv in jx b jy nr kc ns kg nt kk nu ko nv ks nq na nb nc bi translated">turbo模块的延迟加载可防止不必要的本地模块加载，如访问位置、摄像头、蓝牙等。这减少了应用程序的加载时间。</li></ol><ul class=""><li id="5619" class="mu mv in jx b jy jz kc kd kg mw kk mx ko my ks mz na nb nc bi translated"><strong class="jx io">涡轮模块的延迟加载:</strong></li></ul><p id="c94b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了Turbo模块的概念，我们就不需要预先加载原生模块了。它在JavaScript中以同步方式运行，并延迟加载到内存中，使应用程序启动更快。新的架构需要用JavaScript的类型化方言指定的接口。您可以使用TypeScript来创建这个规范，或者如果您想使用Javascript，您可能需要使用Flow。该规范只是定义了Turbo模块应该执行的接口。这个规范的实现应该用本机代码编写。现在，codegen将使用这些规范来生成强类型语言的代码。</p><p id="c902" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">创建我们自己的turbo模块- </strong></p><figure class="lb lc ld le gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/f4362bf28fb0060e9c77c2494ca69b36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mwIROgrZ9qFuzI-LApNa1A.gif"/></div></div></figure><p id="e347" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">结论:</strong></p><p id="d091" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">借助react原生新架构，我们在应用加载时间、turbo模块的延迟加载和Fabric view manager方面获得了一些性能优势。</p><p id="409e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">虽然在存储和应用程序构建时间等参数方面有一些小缺点。但是因为我们都知道2022年将是新的react原生架构之年，所以到今年年底，我们可以期待一些更稳定的版本，其中这些问题可能会得到解决，我们可以围绕这些空间获得一些更清晰的信息。新架构目前处于实验阶段T3。</p><p id="8809" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">到目前为止，我可以有把握地说，新的体系结构非常棒，您应该开始构建您的跨平台应用程序，并尝试自己尝试这些参数。您肯定会发现惊人的结果和性能优势，这必将扩大您的应用程序。</p><p id="570d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">想在React Native上看到更多这样令人惊叹的博客，请看看这些—</p><ol class=""><li id="d998" class="mu mv in jx b jy jz kc kd kg mw kk mx ko my ks nq na nb nc bi translated"><a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/a-beginners-friendly-article-on-react-native-simply-explained-f3098b1873ec?source=your_stories_page-------------------------------------">所有关于React Native的初学者:优点、缺点和未来</a></li><li id="002e" class="mu mv in jx b jy nr kc ns kg nt kk nu ko nv ks nq na nb nc bi translated"><a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/best-coding-practices-react-native-edition-2022-da833c8161de?source=your_stories_page-------------------------------------">最佳编码实践— React本地版2022 </a></li></ol><p id="8192" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><p id="52df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ku">更多内容看</em> <a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ku">说白了。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ku">免费周报</em> </strong> </a> <em class="ku">。关注我们上</em> <a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ku">推特</em> </strong> </a>，<a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ku">LinkedIn</em></strong></a><strong class="jx io"><em class="ku">，</em></strong><a class="ae kt" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ku">YouTube</em></strong></a><strong class="jx io"><em class="ku">，以及</em></strong><em class="ku"><a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ku">不和</em> </strong> </a></em> </strong> <em class="ku">对成长黑客感兴趣？检查出</em> </a><a class="ae kt" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ku">电路</em> </strong> </a> <strong class="jx io"> <em class="ku">。</em>T75】</strong></p></div></div>    
</body>
</html>