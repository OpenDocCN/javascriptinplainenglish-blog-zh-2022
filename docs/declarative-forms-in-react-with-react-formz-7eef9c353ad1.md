# React with React-Formz 中的声明形式

> 原文：<https://javascript.plainenglish.io/declarative-forms-in-react-with-react-formz-7eef9c353ad1?source=collection_archive---------6----------------------->

## React-Formz 简介:一个 React 库，它使得构建复杂表单具有声明性和执行性。

![](img/7c551f2cbeaa09bffc60f9bdde71e21f.png)

> 程序必须写给人们阅读，并且只是附带地给机器执行。— **哈罗德·艾贝尔森，计算机程序的结构和解释**

到目前为止，我们已经听过无数次了:React 代码是声明性的。阅读 React 代码有时就像阅读一本概念清晰、语言浅显的非常简单的书。其他时候，就像阅读宜家家具手册一样。这让你想拔毛，因为你刚刚重读了同样的 10 行 5 遍，而你现在实际上比 10 分钟前理解得更少。

我们经常忘记 React 代码应该是声明性的。有时是因为我们在早期选择了一个我们认为很棒的库，然后随着我们产品的增长或变得更复杂，我们的代码也跟着变得更复杂。其他时候，这是因为我们很匆忙，只需要满足最后期限，我们告诉自己，我们最终会重构它，使代码更清晰，但是，我们曾经这样做过吗？

正因为如此，我相信第三方库的部分工作是让开发者更容易地编写声明性代码。如果 React 库的 API 是以这样一种方式编写的，即开箱即用的组件/方法是声明性的，那么它将使开发人员更容易遵循声明性代码的原则，即使他们不一定有时间明确地这样做。

这就是为什么我决定构建 React-Formz，使构建复杂表单具有声明性和执行性。

# 动机

在我 8 年的软件开发生涯中，我主要专注于 React，在不同的行业中构建了许多表单，并且使用了市场上所有主要的表单库。我构建的大多数表单都很复杂，其中字段可能依赖于另一个字段，或者表单可能在一系列页面上收集数据，例如向导或表格界面。

每种形式的库，我总是遇到同样的两个问题:

1.  随着表单复杂性的增加，性能开始下降，特别是对于使用较慢计算机的用户
2.  随着表单复杂性的增加，代码的复杂性也在增加，随之而来的是可读性的降低。

因此，我决定自己动手构建一个我喜欢使用的表单库，它可以:

1.  使得构建易于理解的形式成为可能。
2.  无需特殊语法即可轻松与第三方库集成。
3.  即使输入增加，也能保持一致的性能。
4.  字段相互依赖的内置功能，即字段 a 依赖于字段 b。

我相信，React Formz 实现了我的所有目标，我很高兴与大家分享它！

# 基础知识

首先，您可以通过 npm 或 yarn 安装 React Formz:

```
npm install @zerry/react-formz immeryarn add @zerry/react-formz immer
```

正如我提到的，React Formz 基本上基于两个原则:

*   声明式编程
*   可扩展的性能

React Formz 中有两个基本组件:

*   形式
*   田

所有其他概念都建立在这两个基本组件之上。让我们看一些示例代码。

正如您所看到的，上面的代码非常容易理解，但在它的背后，您可以获得以下特性:

1.  无论渲染多少输入，性能几乎保持不变。React Formz 确保字段只在它们的值改变或者它们的一个依赖项的值改变时才重新呈现。
2.  通用验证的内置字段验证和实现自定义验证的能力。
3.  对于任何开发人员来说，只要看一下代码，就很容易理解声明性字段。
4.  依赖字段根据另一个字段的值更改其值。
5.  没有提供者、控制器或快速字段。无论字段在组件树中有多深，每个字段都已经被优化来响应和管理它自己的值。
6.  类型安全字段，以确保使用正确类型的值。

# 确认

React Formz 还支持如上所述的字段验证和通过模式的表单验证。到目前为止，模式验证已经被 Yup 和 Zod 所支持，但是还会有更多的模式验证被添加进来。

正如您所看到的，用几行代码就可以获得上一节提到的所有特性，以及根据预定义的模式使整个表单无效的能力。

# 钩住

我想要一个不强迫开发人员使用钩子或组件的库，我想允许开发人员使用满足他们需求的最佳方法。React Formz 也有一个 hooks API，可以用于字段:

# 摘要

希望你喜欢这本书，并且很乐意尝试一下这个图书馆。我的目标是让 React Formz 在不牺牲性能的情况下让表单构建感觉自然。

市场上有很多很棒的表单库，它们启发了我使用 React Formz 的工作，特别是 Formik 和 React Hook 表单。所以，我想对那些库的开发者们说声谢谢，谢谢你们的启发！

你可以在官网了解更多关于 React Formz 的信息:[https://react-formz.zerry.dev/](https://react-formz.zerry.dev/)

如果你对这个库感兴趣，请告诉我，如果你讨厌它，也请告诉我！

*更多内容请看*[***plain English . io***](https://plainenglish.io/)*。报名参加我们的* [***免费周报***](http://newsletter.plainenglish.io/) *。关注我们关于*[***Twitter***](https://twitter.com/inPlainEngHQ)[***LinkedIn***](https://www.linkedin.com/company/inplainenglish/)*[***YouTube***](https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw)*[***不和***](https://discord.gg/GtDtUAvyhW) *。对增长黑客感兴趣？检查* [***电路***](https://circuit.ooo/) *。***