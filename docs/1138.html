<html>
<head>
<title>How to Handle Different Endpoints in Axios and Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何处理Axios和Node.js中的不同端点</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-handle-different-endpoints-in-axios-and-nodejs-8b288d92e940?source=collection_archive---------2-----------------------#2022-03-05">https://javascript.plainenglish.io/how-to-handle-different-endpoints-in-axios-and-nodejs-8b288d92e940?source=collection_archive---------2-----------------------#2022-03-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f867" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">为Axios创建基于类的实例，并有效地使用它们。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3eba12ac870558cd0cbc535787ac6d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SKtYM_nJr-A12_gU"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@arawark?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Arawark chen</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="fdef" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">Axios</h1><p id="6600" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">Axios 是一个基于JS和Promise的库，它可以帮助任何给定HTTP客户端的服务器发出HTTP请求。它可以通过<code class="fe mh mi mj mk b">npm i axios</code>安装，并在任何JS应用程序中使用。</p><p id="b522" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">几乎所有需要创建HTTP的应用程序都在使用某种HTTP客户端，Axios是这场竞赛中的主要参与者之一。这篇文章将关注一个非常小的主题，但是对于如何在Axios项目中处理不同的域非常有效。</p><h2 id="9708" class="mq ku in bd kv mr ms dn kz mt mu dp ld lu mv mw lf ly mx my lh mc mz na lj nb bi translated">开始</h2><p id="1277" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">让我们创建一个小节点应用程序，并假设它必须进行几次API调用来从不同的域获取数据，并且在调用之前，每个API调用都有一组授权。</p><p id="712e" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">我们将调用三种服务:</p><ul class=""><li id="efc9" class="nc nd in ln b lo ml lr mm lu ne ly nf mc ng mg nh ni nj nk bi translated">JSON占位符</li><li id="c34a" class="nc nd in ln b lo nl lr nm lu nn ly no mc np mg nh ni nj nk bi translated">公共API</li><li id="0509" class="nc nd in ln b lo nl lr nm lu nn ly no mc np mg nh ni nj nk bi translated">NASA公共API(受保护)</li></ul><h2 id="1dd9" class="mq ku in bd kv mr ms dn kz mt mu dp ld lu mv mw lf ly mx my lh mc mz na lj nb bi translated">方法I —将其作为常量传递</h2><p id="ca19" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">方法1非常简单，用基本URL名称创建几个变量，然后一起传递</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nq"><img src="../Images/18d5511e0b2e6b51eba14e3a0cb49565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r70oKxqsaVlAxUoBiDhUgw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Approach I example</figcaption></figure><p id="6d18" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">这里，我们声明了基本URL的常量变量，并把它附加到我们想要的URL上。这里的挑战是，我们必须在所有请求中重复配置，这不会非常通用。</p><h2 id="0869" class="mq ku in bd kv mr ms dn kz mt mu dp ld lu mv mw lf ly mx my lh mc mz na lj nb bi translated">方法二——为实例创建类</h2><p id="cb3f" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">现在让我们创建一个Axios类的类实例，我们可以为每个类创建一个单独的方法和配置。当我说配置时，这意味着我们可以定义自定义Axios路径，并默认为类级别。</p><p id="7fa5" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">这种方法的一个例子是Nasa的类，它将为Axios定制默认值。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/dd5103138d15017b2daaa396bb049995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*OiRFXRt-mF1wf3MfkdYy3A.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Nasa.js file with custom Axios instance</figcaption></figure><p id="9616" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">这里，我们将API_KEY作为构造函数参数，它将实例化Axios实例，并将其附加到类变量Axios中，默认参数包括baseURL、timeout和api_key。</p><p id="2407" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">如果你仔细观察这个方法，你会发现我们调用的不是Axios，而是我们在类变量中从它创建的实例。</p><p id="7e65" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">同样的方法还有几个例子。</p><p id="9991" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated"><strong class="ln io"> Placeholder.js </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/9f95ef0f4f876cc5ea26067dc2e88890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*tzVkv5i98eIjM82AJgClIA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Placeholder API similar to Nasa</figcaption></figure><p id="7c60" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated"><strong class="ln io"> OpenAPI.js </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/66f6d0484432eebb2417d0791a21245c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*3uuqR1ykFrUFSUV0Naf-mA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">OpenAPI example similar to Nasa and Placeholder</figcaption></figure><h2 id="734a" class="mq ku in bd kv mr ms dn kz mt mu dp ld lu mv mw lf ly mx my lh mc mz na lj nb bi translated">方法的使用</h2><p id="7440" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">要使用我们刚刚创建的类，我们可以简单地创建一个方法来执行它们。就像下面的例子:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/8f7d154c2775a71ea48edc8259774372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qsDMwQ9Q2NoYsctDw_X7Ww.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">usage of the classes including Nasa, Placeholder and OpenAPI</figcaption></figure><h2 id="0db6" class="mq ku in bd kv mr ms dn kz mt mu dp ld lu mv mw lf ly mx my lh mc mz na lj nb bi translated">结论</h2><p id="1e4b" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">人们喜欢他们自己的版本，但是我个人建议使用基于类的方法，这种方法可以让你对提取和方法暴露有更多的控制。你可以在这里找到整个项目的源代码。</p><h2 id="c386" class="mq ku in bd kv mr ms dn kz mt mu dp ld lu mv mw lf ly mx my lh mc mz na lj nb bi translated"><strong class="ak">打字稿版本</strong></h2><p id="9158" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">对于类的typescript版本，您可以从repo中访问<a class="ae ks" href="https://github.com/Piyush-Use-Personal/axios-class-instances/blob/main/axiosCreator/gumroad.ts" rel="noopener ugc nofollow" target="_blank"> Gumroad.ts </a>文件来创建增强的类。</p><p id="3ef0" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">希望你喜欢这篇文章，并从中学到一些好的东西。</p><p id="00ab" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated"><em class="nv">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="nv">plain English . io</em></strong></a><em class="nv">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="nv">免费周报</em> </strong> </a> <em class="nv">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="nv">Twitter</em></strong></a><em class="nv">和</em><strong class="ln io"><em class="nv"/></strong><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="nv">LinkedIn</em></strong></a><em class="nv">。加入我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="nv">社区</em> </strong> </a> <em class="nv">。</em></p></div></div>    
</body>
</html>