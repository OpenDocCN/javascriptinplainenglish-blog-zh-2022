<html>
<head>
<title>Write Atomic CSS like Facebook with Stylify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Stylify写原子CSS像脸书</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/write-atomic-css-like-facebook-with-stylify-72a0fecdc5fa?source=collection_archive---------10-----------------------#2022-01-11">https://javascript.plainenglish.io/write-atomic-css-like-facebook-with-stylify-72a0fecdc5fa?source=collection_archive---------10-----------------------#2022-01-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="283f" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">像素完美的网页设计，原子CSS，错位的选择器，极简输出？是🤩！</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/19e1a9ce46fe0d3462193d40ce5e3340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXExIcsBVPFbr5vm2J7Z0g.jpeg"/></div></div></figure></div><div class="ab cl ko kp hr kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ig ih ii ij ik"><p id="565f" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">前一段时间在☕喝咖啡休息时，我一直在挖掘Facebook的CSS。我检查了多个页面，从它们那里下载了CSS，并想到了一个可以简化我编写CSS的方法的工具。</p><p id="4060" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">懒惰是一件伟大的事情。它让人们简化他们的工作，所以最终，他们什么也不用做。这也让我创造了<a class="ae lr" href="https://stylifycss.com" rel="noopener ugc nofollow" target="_blank">Stylifycss.com</a>💎。</p><p id="e72a" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">当我一直在挖掘脸书代码时，我发现了以下内容。</p><p id="cac0" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">HTML:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ls"><img src="../Images/f7895949c9dd2c0669ffcb58d90883f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9p9ILiCnRuMV05bMyqWZ7A.jpeg"/></div></div></figure><p id="6285" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">CSS:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/dff4d8d1063c23c6dd28cadcc30c5459.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*lS49iVTuQWUDWNUGJQGCUg.jpeg"/></div></figure><p id="f98b" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">如果你仔细观察，你会发现他们使用的是原子CSS，他们破坏了选择器。</p><p id="16d9" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我还找到了一篇来自脸书的文章<a class="ae lr" href="https://engineering.fb.com/2020/05/08/web/facebook-redesign/" rel="noopener ugc nofollow" target="_blank">为新的Facebook.com</a>重建我们的技术体系，文章解释了他们为新的脸书版本做了哪些改变。这篇文章还说，在切换到原子CSS之前，他们一直在加载超过400 kB的压缩CSS。</p><p id="27e9" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">从我的经验来看，手动编写CSS只是速度慢而且耗时。组件框架很棒，直到你开始转换每个组件。Tailwind的JIT已经足够接近了，但是我不喜欢当我必须记住或者搜索我想要使用的选择器的时候。我还需要更小的块，并将它们集成到现有的项目中，而不增加它们的大小。</p><p id="8f5b" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">所以目标很明确。创建一个工具，它将能够:</p><ul class=""><li id="40cc" class="lu lv in kx b ky kz lb lc le lw li lx lm ly lq lz ma mb mc bi translated">根据内容分别生成CSS</li><li id="6e89" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated">轧花机选择器</li><li id="9f90" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated">按需生成CSS</li><li id="051d" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated">默认使用原生CSS <code class="fe mi mj mk ml b">properties:values</code>作为选择器</li><li id="8b2d" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated">独立工作，无需捆绑器、框架和后/预处理程序</li></ul><h1 id="5b5e" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">带有风格化的原子CSS</h1><p id="9bb6" class="pw-post-body-paragraph kv kw in kx b ky ne jo la lb nf jr ld le ng lg lh li nh lk ll lm ni lo lp lq ig bi translated">Stylify附带了<a class="ae lr" href="https://stylifycss.com/docs/stylify/native-preset" rel="noopener ugc nofollow" target="_blank">原生预置</a>，其中选择器与CSS <code class="fe mi mj mk ml b">property:value</code>相同。由于这一点，它没有必要记住或搜索选择器。本机预设是可选的，您可以定义自己的选择器。Stylify还提供以下功能(未全部列出):</p><ul class=""><li id="1199" class="lu lv in kx b ky kz lb lc le lw li lx lm ly lq lz ma mb mc bi translated"><strong class="kx io">小块</strong>:可以分别为每个文件、组件、布局生成CSS</li><li id="7bbc" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated"><strong class="kx io">没有预生成的CSS </strong>:只有在内容中找到组件或选择器时，才会生成CSS</li><li id="9724" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated">尽可能在内部组合和重用选择器，以保持CSS较小</li><li id="87b6" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated"><strong class="kx io">宏</strong>:可用于定义自定义选择器，如页边距的<code class="fe mi mj mk ml b">m:20px</code></li><li id="a1c9" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated"><strong class="kx io">屏幕的逻辑操作数</strong>:如<code class="fe mi mj mk ml b">&amp;&amp;</code>和<code class="fe mi mj mk ml b">||</code>屏幕组合的操作数:<code class="fe mi mj mk ml b">sm&amp;&amp;tolg:font-size:24px</code></li><li id="4d88" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated"><strong class="kx io">选择器抓取</strong>:从长<code class="fe mi mj mk ml b">font-weight:bold</code>到短<code class="fe mi mj mk ml b">_ab</code></li><li id="dd47" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated">不需要预处理器、后处理器或捆绑器</li><li id="01a0" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated"><strong class="kx io">按需生成的CSS</strong>:CSS可以按需捆绑，例如在请求期间</li><li id="9dfb" class="lu lv in kx b ky md lb me le mf li mg lm mh lq lz ma mb mc bi translated">因为它可以单独生成CSS，默认情况下不会带来任何CSS，所以它<strong class="kx io">可以很容易地集成到现有的项目中，而不会在全局范围内增加它的大小</strong></li></ul><h1 id="2877" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">写HTML。获取CSS。撕裂选择器。全自动的。</h1><p id="abb4" class="pw-post-body-paragraph kv kw in kx b ky ne jo la lb nf jr ld le ng lg lh li nh lk ll lm ni lo lp lq ig bi translated">以下示例及其所有代码可在<a class="ae lr" href="https://stackblitz.com/edit/expressjs-bvexzl?file=index.html" rel="noopener ugc nofollow" target="_blank">堆栈</a>中找到并编辑。</p><p id="bcb1" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在下面的示例中，有一个简单图库图像的代码:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/d3c93dd894d51122cb4d9a49de523784.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gJ08jTHD9Wiguroq6UPpw.png"/></div></div></figure><p id="5bb2" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">上面代码的结果将如下所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/62e7eb2343c414b34262746e766fee2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4JJXtEk34UjOQc6cJQh5w.jpeg"/></div></div></figure><p id="3e39" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">如果用纯CSS编写，上面的代码看起来几乎是一样的。只有<code class="fe mi mj mk ml b">box-shadow</code>使用了<code class="fe mi mj mk ml b">__</code>(两个下划线)而不是空格。</p><p id="bc1c" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">由于可维护性和上述代码可以在多个地方使用的事实，有必要使其更具可重用性。所以让我们定义一些组件、宏和变量！</p><h1 id="afa1" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">清理和配置</h1><p id="e846" class="pw-post-body-paragraph kv kw in kx b ky ne jo la lb nf jr ld le ng lg lh li nh lk ll lm ni lo lp lq ig bi translated">对于上面的例子，我使用了下面的初始化，它可以在<a class="ae lr" href="https://stackblitz.com/edit/expressjs-bvexzl?file=index.html" rel="noopener ugc nofollow" target="_blank">的StackBlitz </a>上找到(它在index.js中，为了在那个环境中工作，稍微做了一些修改):</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/88c0a50a56e44e1a8c0e6fbf2618c409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gJqNXJkw4aa1ekMlOdpuOA.png"/></div></div></figure><p id="163a" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">让我们首先将影子变量添加到编译器配置中:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c7d42bcecee1572259d5118ab2834f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q0LJi2eKKpxbLfQBG_CkQw.png"/></div></div></figure><p id="d5b4" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">当变量被定义后，我们可以这样使用:<code class="fe mi mj mk ml b">box-shadow:$shadow</code>。</p><p id="c96c" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">不需要本机预设。您可以定义自己的选择器。例如，对于边距，它看起来像这样:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/d0c699c6dde26e447332b298c4aef93b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UM5l_hTjnYUt2z2AvOutPw.png"/></div></div></figure><p id="dfd9" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">当宏被定义时，它可以与自定义值一起使用，如<code class="fe mi mj mk ml b">m:24px</code>和<code class="fe mi mj mk ml b">md:m:48px</code>。</p><p id="fe20" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">如果应该在多个地方使用多个相同的选择器，那么为它们定义一个组件来简化可维护性和可读性是一个很好的做法:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/32500537b96e8d921fe86a079775bced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rzv2txA-EwDCyv0syXkwtw.png"/></div></div></figure><p id="317d" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">添加<code class="fe mi mj mk ml b">box-sizing:border-box</code>也是一个很好的做法，以防止将来某个地方出现wtf时刻:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/511576044520e3335a17e482d6a0602c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a1FQ7o3gGP0Keafzovzu7w.png"/></div></div></figure><p id="78a4" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">有了以上所有的改进，最终的代码要小得多:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/6fe4a8bfdd5641ea3961a59aee305b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6Pr-wcOr7RpeQvtR8If8Q.png"/></div></div></figure><h1 id="533d" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">缩小和优化</h1><p id="b13f" class="pw-post-body-paragraph kv kw in kx b ky ne jo la lb nf jr ld le ng lg lh li nh lk ll lm ni lo lp lq ig bi translated">在幕后，Stylify以下列方式优化CSS:</p><ol class=""><li id="c67d" class="lu lv in kx b ky kz lb lc le lw li lx lm ly lq nl ma mb mc bi translated">只有在内容中找到选择器和组件时，才会生成它们</li><li id="3e4c" class="lu lv in kx b ky md lb me le mf li mg lm mh lq nl ma mb mc bi translated">它试图尽可能多地重用选择器</li><li id="d687" class="lu lv in kx b ky md lb me le mf li mg lm mh lq nl ma mb mc bi translated">它将像<code class="fe mi mj mk ml b">font-weight:bold</code>这样的长选择器转换成短选择器<code class="fe mi mj mk ml b">_ab12</code></li></ol><p id="517f" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">下面是StackBlitz经过处理和优化的输出图像。CSS(没有新的行和空格)只有<strong class="kx io"> 0.78kb </strong>:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nm"><img src="../Images/7b7d1cd9a35ba17a399e3d696028bd0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6AEVEWL9bIYHo84o6Ma1RA.jpeg"/></div></div></figure><h1 id="2a56" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">让我知道你的想法！</h1><p id="bb92" class="pw-post-body-paragraph kv kw in kx b ky ne jo la lb nf jr ld le ng lg lh li nh lk ll lm ni lo lp lq ig bi translated">Stylify花了一年时间开发，一个月前发布了第一个版本。<br/>我将非常乐意接受任何反馈、问题或想法！😊。</p></div><div class="ab cl ko kp hr kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ig ih ii ij ik"><p id="4b74" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">保持联系:<br/>👉<a class="ae lr" href="https://twitter.com/8machy" rel="noopener ugc nofollow" target="_blank">8 machy</a>T8】👉<a class="ae lr" href="https://dev.to/machy8" rel="noopener ugc nofollow" target="_blank">dev.to/machy8</a>T11】👉<a class="ae lr" href="https://medium.com/@8machy" rel="noopener">medium.com/@8machy</a></p><p id="8bee" class="pw-post-body-paragraph kv kw in kx b ky kz jo la lb lc jr ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated"><em class="nn">更多内容看</em> <a class="ae lr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx io"> <em class="nn">说白了就是</em> </strong> </a> <em class="nn">。报名参加我们的</em> <a class="ae lr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx io"> <em class="nn">免费周报</em> </strong> </a> <em class="nn">。在我们的</em> <a class="ae lr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kx io"> <em class="nn">社区不和谐</em> </strong> </a> <em class="nn">获得独家获取写作机会和建议。</em></p></div></div>    
</body>
</html>