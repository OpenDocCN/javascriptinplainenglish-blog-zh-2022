<html>
<head>
<title>Scope Chain &amp; Lexical Environment in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的作用域链和词汇环境</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/scope-chain-and-lexical-environment-in-javascript-eb1f6e60997e?source=collection_archive---------9-----------------------#2022-07-04">https://javascript.plainenglish.io/scope-chain-and-lexical-environment-in-javascript-eb1f6e60997e?source=collection_archive---------9-----------------------#2022-07-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d27d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">理解JavaScript中的作用域链和词法环境。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/5aca5fe03ec7dcf3f5a9b2d7377e5140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CXiY22oPKRN5R4RF.jpeg"/></div></div></figure><p id="b922" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当执行一个函数或脚本时，JavaScript解释器创建一个新的上下文。每个脚本/函数都有一个称为全局执行上下文的基本上下文。每当我们调用一个函数时，一个新的执行上下文就会被创建，并被放在<em class="lk">执行堆栈的顶部。当到达调用另一个嵌套函数的嵌套函数时，遵循相同的模式。JavaScript中有两个作用域。</em></p><ol class=""><li id="a9fa" class="ll lm in kq b kr ks ku kv kx ln lb lo lf lp lj lq lr ls lt bi translated">全球范围</li><li id="953c" class="ll lm in kq b kr lu ku lv kx lw lb lx lf ly lj lq lr ls lt bi translated">局部范围</li></ol><h2 id="712e" class="lz ma in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated">全球范围</h2><p id="acb1" class="pw-post-body-paragraph ko kp in kq b kr ms jo kt ku mt jr kw kx mu kz la lb mv ld le lf mw lh li lj ig bi translated">整个JavaScript文档中只有一个全局范围。我们可以在全局范围内访问和更改变量。</p><h2 id="edc5" class="lz ma in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated">局部范围</h2><p id="5235" class="pw-post-body-paragraph ko kp in kq b kr ms jo kt ku mt jr kw kx mu kz la lb mv ld le lf mw lh li lj ig bi translated">函数内部定义的变量在局部范围内。并且它们对该函数的每次调用都有不同的作用域。这意味着相同的变量名也可以存在于其他函数中。这是因为这些变量被绑定到该范围。</p><p id="3095" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="lk">举例:</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mx"><img src="../Images/a4bf046a5c6b95e9ec6aac774a9a05f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cDCz7J0Mtm5jJTiKK8dDTw.png"/></div></div></figure><h2 id="01ee" class="lz ma in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated">范围链</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi my"><img src="../Images/f97fcc0ddc63aa75dfcb078fc173d428.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*RgabKWNx9PaWRHIs9SZe-g.png"/></div></figure><p id="3f65" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">范围链有助于解析变量。当一个变量需要解析时，JavaScript从代码的最内层开始，不断跳回父作用域，直到找到它所寻找的变量。</p><h2 id="f3d4" class="lz ma in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated">词汇范围</h2><p id="c128" class="pw-post-body-paragraph ko kp in kq b kr ms jo kt ku mt jr kw kx mu kz la lb mv ld le lf mw lh li lj ig bi translated">当我们有一组嵌套的函数时，内部函数可以访问父函数的变量和其他资源。这意味着子函数在词汇上与其父函数的执行上下文绑定在一起。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/e18f266e067e714d205b24e02c9ef700.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*XsL0084kMZGg2xPQ0PgQiw.png"/></div></figure><p id="733e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">printMyName()函数可以访问findMyName()函数的名称变量。这只在一个方向有效，你不能从父函数中访问内部函数中的变量和其他资源。</p><h2 id="0763" class="lz ma in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated">词汇环境</h2><p id="2e2c" class="pw-post-body-paragraph ko kp in kq b kr ms jo kt ku mt jr kw kx mu kz la lb mv ld le lf mw lh li lj ig bi translated">当JavaScript引擎为一个函数创建新的执行上下文时，它会创建一个新的词法环境来存储在执行阶段在该函数中定义的变量。</p><p id="049c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一个<strong class="kq io">词汇环境</strong>是一个数据结构，它保存了一个<em class="lk">标识符-变量</em>的映射。(这里的标识符指的是变量/函数的名称，变量是对实际对象[包括函数类型对象]或原语值的引用)。</p><p id="646c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">词汇环境包含两个部分:</p><ol class=""><li id="33a5" class="ll lm in kq b kr ks ku kv kx ln lb lo lf lp lj lq lr ls lt bi translated">环境记录:它是存储变量和函数声明的实际位置。</li><li id="8226" class="ll lm in kq b kr lu ku lv kx lw lb lx lf ly lj lq lr ls lt bi translated">对外部环境的引用:这意味着它可以访问其外部(父)词汇环境。</li></ol><pre class="kd ke kf kg gt na nb nc nd aw ne bi"><span id="1d8d" class="lz ma in nb b gy nf ng l nh ni">let language = '<!-- -->JavaScript<!-- -->';<br/>function a() {<br/>  const b = "Dart";<br/>  console.log("Inside function a");<br/>}</span><span id="b14a" class="lz ma in nb b gy nj ng l nh ni">a();<br/>console.log("Global execution context")</span></pre><p id="8beb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当JavaScript引擎为global创建一个新的执行上下文时，它会创建一个新的词法环境来存储作用域中定义的变量和函数。看起来是这样的:</p><pre class="kd ke kf kg gt na nb nc nd aw ne bi"><span id="5171" class="lz ma in nb b gy nf ng l nh ni">globalLexicalEnvironment = {<br/>  environmentRecord: {<br/>      language    : '<!-- -->JavaScript<!-- -->',<br/>      a : &lt; reference to function object &gt;<br/>  }<br/>  outer: null<br/>}</span></pre><p id="6dc7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当JavaScript引擎为函数a()创建新的执行上下文时，它会创建一个新的词法环境来存储在作用域中定义的变量和函数。看起来是这样的:</p><pre class="kd ke kf kg gt na nb nc nd aw ne bi"><span id="e8a9" class="lz ma in nb b gy nf ng l nh ni">functionLexicalEnvironment = {<br/>  environmentRecord: {<br/>      b    : '<!-- -->Dart'<!-- -->,<br/>  }<br/>  outer: &lt;globalLexicalEnvironment&gt;<br/>}</span></pre><p id="c5c4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当函数完成执行时，它可能会也可能不会从堆栈中删除，这取决于该词法环境是否被其外部词法环境属性中的任何其他词法环境引用。</p><h2 id="ee61" class="lz ma in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated"><em class="nk">结束</em></h2><p id="f685" class="pw-post-body-paragraph ko kp in kq b kr ms jo kt ku mt jr kw kx mu kz la lb mv ld le lf mw lh li lj ig bi translated">所以这就是这篇文章。我知道这在一篇文章中要消耗很多。我希望它在某种程度上有所帮助。让我们在另一篇文章中相遇。</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><p id="e41c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="lk">更多内容看</em> <a class="ae ns" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lk">说白了。报名参加我们的</em> <a class="ae ns" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lk">免费周报</em> </strong> </a> <em class="lk">。关注我们关于</em> <a class="ae ns" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lk">推特</em></strong></a><a class="ae ns" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lk">LinkedIn</em></strong></a><em class="lk"/><a class="ae ns" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lk">YouTube</em></strong></a><em class="lk"/><a class="ae ns" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lk">不和</em> </strong> </a> <em class="lk">。</em></strong></a></p></div></div>    
</body>
</html>