<html>
<head>
<title>Manage State Globally Using the useContext() Hook in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React中的useContext()钩子全局管理状态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/usecontext-react-hooks-a-way-to-manage-state-globally-ce475abd63dc?source=collection_archive---------9-----------------------#2022-06-22">https://javascript.plainenglish.io/usecontext-react-hooks-a-way-to-manage-state-globally-ce475abd63dc?source=collection_archive---------9-----------------------#2022-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9606" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用一个例子详细解释useContext() hook。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f82564d31fad20e718cb808468928bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEJ_DDY3G-ozb2GQQABHjg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image created by the author on Canva</figcaption></figure><p id="44b8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">React挂钩是React 16.8版本中添加的JavaScript函数。它们允许我们在函数组件中使用状态和其他React特性，这意味着不再需要类组件。</p><h1 id="d4ac" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">useContext()</h1><p id="9b9b" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">React上下文用于全局管理状态。它使得在深度嵌套的组件之间传递状态比单独使用状态更容易。让我解释几个关键词来清楚地理解<em class="mo">使用上下文</em>。</p><p id="bd66" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> <em class="mo">上下文对象</em> </strong> <em class="mo"> </em>是React.createContext返回的值<strong class="kx ir">当前上下文值</strong>由调用组件上方最近的<em class="mo">上下文提供者</em>的<em class="mo">值属性</em>决定。因此，useContext()接受上下文对象作为参数，并返回当前上下文值作为结果。当提供者更新时，useContext钩子用提供者的最新值属性触发重新呈现器。</p><p id="d26f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如React文档中提到的，上下文被设计为共享可以被视为React组件树的“全局”数据，比如当前已验证的用户、主题或首选语言。使用上下文的主要目的是当一些数据需要由不同嵌套级别的许多组件访问时。以下是一些语法:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="8004" class="mu ls iq mq b gy mv mw l mx my"><strong class="mq ir"><em class="mo">// Here we have created a new context.</em></strong><br/>const NewContext = createContext();</span><span id="77be" class="mu ls iq mq b gy mz mw l mx my">&lt;NewContext.Provider value={state}&gt;<br/>    <strong class="mq ir"><em class="mo">//Wrapping of child components in the Context Provider.</em></strong><br/>    &lt;second/&gt;<br/>&lt;/NewContext.Provider&gt;</span><span id="7413" class="mu ls iq mq b gy mz mw l mx my">const stateValue = useContext(NewContext);</span></pre><h1 id="fb5d" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">例子</h1><p id="6c2f" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">让我们看看下面的例子，以便清楚地理解在React应用程序中使用useContext()钩子的目的。在我们的例子中，我们有一个父组件和三个不同的子组件。这里，我们在父组件中定义了名为<strong class="kx ir"> <em class="mo"> bookName </em> </strong>的状态，该状态正被<em class="mo">父组件</em>和<em class="mo"> LastChild </em>组件使用。</p><p id="cee4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们的应用程序中，名为<em class="mo"> LastChild </em>的组件不是父组件的直接子组件，但是它是<em class="mo"> Child2 </em>组件的子组件，而后者是<em class="mo"> Child1 </em>组件的子组件。用专业术语来说，我们可以称之为深度嵌套组件。现在，问题是<em class="mo"> LastChild </em>组件使用了在父组件中声明的<em class="mo"> bookName </em>状态。</p><h2 id="b921" class="mu ls iq bd lt na nb dn lx nc nd dp mb le ne nf md li ng nh mf lm ni nj mh nk bi translated">案例1:</h2><p id="5bdd" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">在第一种情况下，我创建了一个应用程序，但没有使用useContext()钩子。因此，我将<em class="mo"> bookName </em>状态作为道具传递给每个孩子，直到最后一个孩子，即使中间的任何其他孩子都不使用该状态。在我们的场景中，这种方式看起来不错。然而，当我们在React中开发一个大规模的应用程序并遇到同样的情况时，它肯定会创建一个混乱的道具。请看下面的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h2 id="b12a" class="mu ls iq bd lt na nb dn lx nc nd dp mb le ne nf md li ng nh mf lm ni nj mh nk bi translated">案例二:</h2><p id="7cc1" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">第二种情况是我在上面的代码中创建的混乱的解决方案。这里，我使用useContext()钩子来避免通过中间组件传递道具。为了使用useContext()，我们首先需要全局创建一个上下文<strong class="kx ir"> <em class="mo">(注意:一定要在组件外全局创建)</em> </strong>。然后在父组件中，我们需要将下一个子组件包装在上下文提供者中，并将状态作为值传递给提供者。最后，用一个上下文对象作为参数声明useContext()钩子，它返回传递给父组件中的提供者的值。查看以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h1 id="76be" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">结论</h1><p id="b9e5" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">本文的目的是理解reactor中useContext()钩子的概念。我还创建了一个示例场景来理解在什么情况下我们需要这个钩子。我用一个简单的父子组件的例子来演示它。我希望本文能帮助您详细理解useContext()钩子。请跟我来读更多像这样有趣的文章。</p><div class="nn no gp gr np nq"><a href="https://medium.com/@kardaniyagnik/membership" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">通过我的推荐链接加入media-YAG Nik kar dani</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">作为一名中型会员，您的部分会员费将支付给您所阅读的作家，您可以完全接触到每个故事……</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kp nq"/></div></div></a></div><div class="nn no gp gr np nq"><a href="https://www.buymeacoffee.com/kardaniyagnik" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">Yagnik Kardani正在创作有助于他人成长的技术研究材料。</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">你好👋，我是一个媒体技术作家。我喜欢在软件开发和云计算领域学习并帮助他人成长…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="nz l"><div class="of l ob oc od nz oe kp nq"/></div></div></a></div><p id="b3a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mo">更多内容见于</em><a class="ae og" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="mo"/></strong></a><em class="mo">。报名参加我们的</em> <a class="ae og" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。</em> <a class="ae og" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mo">推特</em> </strong> </a>和 <a class="ae og" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mo">领英</em> </strong> </a> <em class="mo">上跟随我们。查看我们的</em> <a class="ae og" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mo">社区不和</em> </strong> </a> <em class="mo">并加入我们的</em> <a class="ae og" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mo">人才集体</em> </strong> </a> <em class="mo">。</em></p></div></div>    
</body>
</html>