<html>
<head>
<title>State Management using Context in Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Next.js中的上下文进行状态管理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/state-management-using-context-in-nextjs-6929b8eeb5f8?source=collection_archive---------2-----------------------#2022-08-13">https://javascript.plainenglish.io/state-management-using-context-in-nextjs-6929b8eeb5f8?source=collection_archive---------2-----------------------#2022-08-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/></div><div class="ab cl jk jl hr jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="ig ih ii ij ik"><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi jr"><img src="../Images/ab996b5d01f5a1440946429b1aae7fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3XndYeIsBtk4CkpMf7vmA.jpeg"/></div></div></figure></div><div class="ab cl jk jl hr jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="ig ih ii ij ik"><p id="47a7" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">无论您是否使用过React并使用Context API进行过状态管理，或者您从未尝试过，本文都将帮助您掌握相同的内容。所以让我们从基础开始。</p><h2 id="7c73" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">什么是状态管理，我们为什么需要它？</h2><p id="94d9" class="pw-post-body-paragraph kd ke in kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ig bi translated">您已经知道React和Next.js(一个基于React的框架)中有状态。</p><p id="64b8" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">现在，假设你正在开发下一个应用程序，你需要几个不同的状态，并且需要更新这些状态。</p><p id="2559" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">如果你只有一个页面，那么你可以使用 <code class="fe lz ma mb mc b"><strong class="kf io">useState</strong></code> <strong class="kf io">钩子</strong>简单地<strong class="kf io">更新本地状态。</strong></p><p id="9ae3" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">一旦你试图管理多个组件的状态，事情会变得有点棘手。</p><p id="9485" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">在你的应用程序中，你将会到达这样一个点，像“提升状态”和向下传递回调以从组件更新你的状态这样的模式会导致很多很多的道具。</p><p id="2576" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">如果你想在应用程序的任何地方更新一个组件的状态，你会怎么做？你把它变成<strong class="kf io">全局状态</strong>。</p><p id="22ea" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">这就是<em class="md">状态管理</em>发挥作用的地方。ContextAPI在这方面创造了奇迹。</p><h2 id="1be3" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">开始使用上下文</h2><p id="aed6" class="pw-post-body-paragraph kd ke in kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ig bi translated">在您的<strong class="kf io">根目录</strong>或您的组件或页面所在的目录中，创建一个名为<em class="md"> Context </em>的<strong class="kf io">新文件夹</strong>。</p><p id="7998" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">在其中，我们将创建我们的上下文(<em class="md">，它就像一个存储所有全局状态的地方</em>)。在我们的例子中，我们将制作一个<strong class="kf io">公司关键字搜索仪表板</strong>。因此，让我们将上下文称为<em class="md"> SearchContext </em>，并在上下文文件夹中创建一个名为<strong class="kf io"> SearchContext.js </strong>的新文件</p><h2 id="2f90" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">导入createContext和useState</h2><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi me"><img src="../Images/9965ca0296847461cee819bbb1e17979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XWH95OtZw6_TIL6DB0U8ug.png"/></div></div></figure><h2 id="dbfa" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">创造环境</h2><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mf"><img src="../Images/80ecdb38fd56fda57b78050b40a80184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TYfE46ZW5y4w3tN-k4xQmw.png"/></div></div></figure><h2 id="dccd" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">创建上下文提供者</h2><p id="4bd0" class="pw-post-body-paragraph kd ke in kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ig bi translated">这就像是为所有组件提供全局状态的函数。</p><p id="fbdf" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">为您的全局状态创建一个<em class="md"> useState钩子</em>，这里我们保留它comp keyword(company keyword的缩写)。</p><p id="ad99" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">然后返回SearchContext。以值作为状态的提供者及其各自的函数。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mg"><img src="../Images/2f9c7fd352995b6aaa85a9737f54e5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sil-r2CtHS9o4hiAtq1oAQ.png"/></div></div></figure><h2 id="2bbc" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">SearchContext.js的最终外观</h2><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mg"><img src="../Images/fa8cbfd5d4e3c183fceed14fe13e4100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQKQHIV4V810W_O4BB2cfw.png"/></div></div></figure><h2 id="42be" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">用提供者in _app.js包装</h2><p id="9962" class="pw-post-body-paragraph kd ke in kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ig bi translated">现在，在你开始使用之前，你需要告诉你的Next.js应用程序，你已经添加了一个上下文，并且用提供者包装你的组件。</p><p id="7415" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated"><em class="md">另外，确保按照我显示的那样导入提供程序。</em></p><p id="91f5" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">you _app.js应该是这样的:</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mh"><img src="../Images/09800d7279f1b190b2fbbb92302ae539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zuaZByvSs5U4vAburmEXMw.png"/></div></div></figure><h2 id="5e35" class="lb lc in bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">使用全局状态</h2><p id="df99" class="pw-post-body-paragraph kd ke in kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ig bi translated">无论您希望使用哪个组件，只需提取您需要的全局状态，如下所示:</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mi"><img src="../Images/ed37217739abe884a574c156d8ff0991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dpVROssgSgRTVqMJ0SkbyA.png"/></div></div></figure><p id="209c" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">然后像使用本地状态一样使用它们。这里，我们在输入组件中使用它。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mj"><img src="../Images/9d1240109842f7a208764c9d877d820d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_mDXb32NzNyJarLpfNEL5Q.png"/></div></div></figure><p id="2311" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">瞧啊。您已经在Next.js中学习了如何使用上下文进行状态管理。</p><p id="ec26" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated"><em class="md">更多内容请看</em><a class="ae mk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="md">plain English . io</em></strong></a><em class="md">。报名参加我们的</em> <a class="ae mk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf io"> <em class="md">免费周报</em> </strong> </a> <em class="md">。关注我们关于</em><a class="ae mk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="md">Twitter</em></strong></a><a class="ae mk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="md">LinkedIn</em></strong></a><em class="md"/><a class="ae mk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="md">YouTube</em></strong></a><em class="md"/><a class="ae mk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="md">不和</em> </strong> </a> <em class="md">。</em></p></div></div>    
</body>
</html>