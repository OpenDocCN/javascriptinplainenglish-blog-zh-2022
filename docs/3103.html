<html>
<head>
<title>How to Build a Reusable iFrame with Lightning Web Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Lightning Web组件构建可重用的iFrame</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-reusable-iframe-with-lightning-web-components-76a2ad27286?source=collection_archive---------0-----------------------#2022-08-01">https://javascript.plainenglish.io/how-to-build-a-reusable-iframe-with-lightning-web-components-76a2ad27286?source=collection_archive---------0-----------------------#2022-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c7ea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Salesforce平台中显示外部网站的简单方法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2b8482009e1a746f40786cfce946afb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qEng2ic2td5efl1F"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@pinewatt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">pine watt</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2703" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时，Salesforce项目的开发人员会面临将其他网站的内容或功能集成到平台中的需求，以使用户更容易访问它们。</p><p id="1f61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这些场景中，使用iFrame通常是集成外部视频或PDF文件以及网站小部件的快速简单的解决方案，例如，显示股票交易信息或当前天气预报。</p><p id="a562" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Salesforce中，我们可以使用Lightning Web组件来构建iFrame组件，然后我们可以在平台的不同位置使用该组件。所以让我们看看这是如何工作的！</p><h1 id="0315" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">建造iFrame LWC酒店</h1><p id="0dbe" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，我们需要将iFrame元素及其可配置属性添加到LWC的HTML模板中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="3993" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在组件的JS文件中，我们还需要选取这些属性，并通过<em class="mr"> @api </em>注释将它们暴露给外部。这是必要的，这样我们以后就可以从外部随意配置iFrame的属性，而不必再次修改组件代码中的任何内容。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="ef0b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使iFrame可配置</h1><p id="7435" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了使iFrame LWC可重用和更加动态，必须公开其属性，以便可以在Lightning应用程序构建器中轻松配置它们。</p><p id="9e0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们可以将已经通过JS文件中的<em class="mr"> @api </em>注释公开的属性添加到LWC的XML文件中，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="d644" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，还添加了各种目标，以便以后可以在不同类型的页面和流中使用该组件。</p><h1 id="2300" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">iFrame LWC的示例性使用</h1><p id="4101" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们的组件已经准备好了，我们可以在任何页面上使用它。例如，让我们将组件添加到我们组织的主页。然而，在我们这样做之前，我们应该将我们想要加载内容的网站的域名添加到我们的<a class="ae kv" href="https://help.salesforce.com/s/articleView?id=sf.csp_trusted_sites.htm&amp;type=5" rel="noopener ugc nofollow" target="_blank"> Salesforce org的可信站点</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/e500357ea8b2f830e5340273aa5b1bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ta6BjSV7ExoL6kklB98srQ.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Add iFrame LWC to Home Page using Lightning App Builder</figcaption></figure><p id="ebdf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们使用App Builder将组件拖动到主页上的所需位置后，我们仍然需要配置之前定义的属性。对于我们的例子，我们想要显示德国汉堡的当前天气预报，我居住的城市。为此，我们使用<a class="ae kv" href="https://www.meteoblue.com/" rel="noopener ugc nofollow" target="_blank">meteoblue.com</a>来配置一个适当的天气小部件，然后将它的URL复制到组件的适当iFrame URL属性中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/da86ad614d20137d3db0040d5902b035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xfeyZMrq26yvV4j_tuVN-Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Configured LWC Properties in Lightning App Builder</figcaption></figure><p id="a3a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧，在我们保存页面后，现在所有用户都可以在他们的主页上看到我们的组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/15150477eec28bd91e96265e6447847d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FrZRh88fs0D6N5aF2vwwdA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Home Page with embedded Weather Forecast iFrame</figcaption></figure><h1 id="2271" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="b66e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们已经看到了如何通过LWC使用iFrames快速将外部内容集成到Salesforce平台中。只要不需要在Salesforce和iFrame之间交换数据，这对于这种情况可能是一个很好的解决方案。</p><p id="eae4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，应该考虑到不是所有的网站都允许通过iFrame嵌入。在某些情况下，甚至有必要从LWC代码中删除<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-sandbox" rel="noopener ugc nofollow" target="_blank">沙箱属性</a>以包含某些网站，因为这将对iFrame的允许内容施加额外的限制。当然，这应该只在例外情况下使用，因为一般来说，在使用iFrames时，安全性应该总是最重要的。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="022d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">GitHub上提供了完整的源代码，包括JEST单元测试和JSDoc注释:</p><div class="nc nd gp gr ne nf"><a href="https://github.com/svierk/awesome-lwc-collection/tree/main/force-app/main/default/lwc/iFrame" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">awesome-LWC-collection/force-app/main/default/LWC/iFrame at main svierk/awesome-LWC-collection</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">⚡️收集了一些现成的Lightning Web组件，可能会对您的SFDX项目有所帮助…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">github.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt kp nf"/></div></div></a></div><p id="a130" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mr">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mr">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mr">免费周报</em> </strong> </a> <em class="mr">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mr">Twitter</em></strong></a><em class="mr">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mr">LinkedIn</em></strong></a><em class="mr">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mr">社区不和谐</em> </strong> </a> <em class="mr">，加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mr">人才集体</em> </strong> </a> <em class="mr">。</em></strong></a></p></div></div>    
</body>
</html>