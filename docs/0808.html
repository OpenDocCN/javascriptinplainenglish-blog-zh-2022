<html>
<head>
<title>Object.freeze() VS Object.seal() in Plain English</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Object.freeze()与Object.seal()的简单对比</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/object-freeze-vs-object-seal-in-plain-english-813f27a71eb8?source=collection_archive---------8-----------------------#2022-02-15">https://javascript.plainenglish.io/object-freeze-vs-object-seal-in-plain-english-813f27a71eb8?source=collection_archive---------8-----------------------#2022-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="994b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这两种方法的主要区别，简单地说就是并列。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b4859d3266516bbaca4f88cb651df353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKXUVbnNW4mzq5pqFcjdkA.png"/></div></div></figure><h1 id="24bb" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">它们是什么？</h1><p id="646f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><code class="fe mf mg mh mi b">Object.freeze()</code>和<code class="fe mf mg mh mi b">Object.seal()</code>是JavaScript中两个非常相似的对象方法。但它们只是第一眼看上去相似。简而言之，它们都防止对象的突变，然而，它们有一些不同之处！时刻。在本文中，我将把它们放在一起，看看它们在特定情况下是如何工作的。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h2 id="4c6d" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">添加新属性</h2><div class="kg kh ki kj gt ab cb"><figure class="nc kk nd ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/07b410ddee81bb1bb18d0975507a9f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*LnwCQxfrLgs4Cb20Tv1Tcw.png"/></div></figure><figure class="nc kk nd ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/b65f52382c72db089ad06daf89c83f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*1NCWB81hmX61UOsiP3dh-Q.png"/></div></figure></div><p id="2267" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">如您所见，当您尝试添加新属性时，它们的行为完全相同。所以不管对象是冻结的还是密封的，它都不会让你添加新的属性。如果代码没有严格模式，它将会悄悄地失败，但是如果你这样做了，它会抛出一个<code class="fe mf mg mh mi b">TypeError</code>，就像这样:<code class="fe mf mg mh mi b">TypeError: can’t define property “city”: Object is not extensible.</code></p><h2 id="91ca" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">删除新属性</h2><div class="kg kh ki kj gt ab cb"><figure class="nc kk nd ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/8fe526ed6a61a6458f02b774d96481b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*25IKr_e12ZHHlbAoacgdAg.png"/></div></figure><figure class="nc kk nd ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/1fc140354b535630c1023883ff82c3f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*A7N85s8GEBmMAJ-l8xnlYA.png"/></div></figure></div><p id="343b" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">从对象中删除属性也是一样的，它们的行为是一样的。没有<code class="fe mf mg mh mi b">use strict</code>，它会无声地失败，但是如果代码处于严格模式，它会抛出一个<code class="fe mf mg mh mi b">TypeError</code>，就像这样:<code class="fe mf mg mh mi b">TypeError: property “lastname” is non-configurable and can’t be deleted</code></p><h2 id="b692" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">更改现有属性</h2><div class="kg kh ki kj gt ab cb"><figure class="nc kk nn ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/eefc88fba63a682e2040c26940960fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*tZQ2riYYCp6FwShGIJKeRA.png"/></div></figure><figure class="nc kk no ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/05e8cb7f88a87619bd69a5d088030054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*lIgWAf5CPe_Eyusgrf07Mg.png"/></div></figure></div><p id="0c2d" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">在这里，他们最终采取了不同的行动，现在让我们来看看发生了什么。<code class="fe mf mg mh mi b">Object.freeze()</code>顾名思义，冻结对象，所以不会发生突变。如果你尝试使用<code class="fe mf mg mh mi b">Object.defineProperty()</code>也是如此。值得一提的是，当一个对象被冻结时，它的原型也被冻结。</p><p id="9469" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">然而，它做得很浅，但我们稍后会回来。另一方面，<code class="fe mf mg mh mi b">Object.seal()</code>只是不允许您添加或删除新的属性，但是您仍然可以更改现有的属性。如果您尝试使用<code class="fe mf mg mh mi b">Object.defineProperty()</code>更改该值，它仍然会工作。</p><p id="4214" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">从图片中可以看出，当对象被冻结时，你不能改变现有属性的值，它会抛出一个<code class="fe mf mg mh mi b">TypeError</code>像这样:<code class="fe mf mg mh mi b">TypeError: “lastname” is read-only</code>。而当它被密封时，值很容易被更改，这可以在登录到控制台时看到。</p><h2 id="0f09" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">更改可枚举性、可配置性和可写性</h2><div class="kg kh ki kj gt ab cb"><figure class="nc kk no ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/5b1ec5f88b0941144650130e1dc95d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*1UC4vG1xrEfLITQRXcNNIg.png"/></div></figure><figure class="nc kk nn ne nf ng nh paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/9739c06ab71f8ce7a998a60d16a4ab85.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*xo6XEDQTwPYOEfxjuNZvDg.png"/></div></figure></div><p id="b4be" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">在这两种情况下，它都会抛出一个<code class="fe mf mg mh mi b">TypeError</code>，就像这样:<code class="fe mf mg mh mi b">TypeError: can’t define property “city”: Object is not extensible,</code>不管代码是否处于严格模式。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h2 id="c337" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">额外收获:深度冷冻物品</h2><p id="f001" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">记得我在上面写了<code class="fe mf mg mh mi b">Object.freeze()</code>只是浅冻结物体，这就是我的意思:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/74986686e2e7c55e3da8dec8258fdbe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ueD_KrrwgcP_fdlTWzF1g.png"/></div></div></figure><p id="ca41" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">虽然对象被冻结了，但是我仍然能够改变它的属性值，不管你是否使用<code class="fe mf mg mh mi b">use strict</code>，不管这个值是另一个对象、数组、布尔还是原始类型，它仍然是可变的。所以<code class="fe mf mg mh mi b">Object.freeze()</code>只冻结了对象的第一层，因此称之为shallow。</p><p id="8a18" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">现在让我们看看如何冻结整个对象，而不仅仅是第一层。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/982eeee7a3f28a48a295eea3dd11fbac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YIzASaYphOV-ryfx6b5NZw.png"/></div></div></figure><p id="c35c" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">我创建了接受一个应该是T4的T3的T2函数。然后我们用<code class="fe mf mg mh mi b">Object.getOwnPropertyNames(obj)</code>获取给定对象的所有属性，它从<code class="fe mf mg mh mi b">obj</code>返回所有属性的数组。</p><p id="eb0c" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">所以之后，我在数组中循环，对于每一项，我检查以确保它们的类型是<code class="fe mf mg mh mi b">“object”</code>并且对象是<strong class="ll ir">而不是</strong>冻结的。如果条件返回<code class="fe mf mg mh mi b">true</code>，函数<code class="fe mf mg mh mi b">deepFreeze()</code>递归调用自身，直到条件返回<code class="fe mf mg mh mi b">false.</code></p><p id="0e12" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">最后，当我尝试编辑任何值时，没有任何反应。除非在严格模式下，在那种情况下<code class="fe mf mg mh mi b">TypeError</code>被抛出，<code class="fe mf mg mh mi b">TypeError: “state” is read-only</code>。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="8510" class="kr ks iq bd kt ku nq kw kx ky nr la lb jw ns jx ld jz nt ka lf kc nu kd lh li bi translated">概括起来</h1><p id="6cd4" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">这两种方法有很多相似之处，但它们并不相同。当一个物体被冻结时，它不能以任何形状或形式变异。然而，<code class="fe mf mg mh mi b">Object.freeze()</code>只是浅度冻结对象，但是有一个简单的解决方案来实现如上图所示的深度冻结功能。通过该函数运行对象后，它会完全冻结，无法更改、添加或删除任何属性。</p><p id="7603" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">另一方面，<code class="fe mf mg mh mi b">Object.seal()</code>允许改变当前属性的值，但不允许添加或删除新属性。因为它已经允许值的突变，所以不需要深度密封函数或类似的东西。</p><p id="a9a6" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated">最后，还有两种方法来检查对象是否被冻结或密封。这是它们的样子，<code class="fe mf mg mh mi b">Object.isFrozen(obj)</code>和<code class="fe mf mg mh mi b">Object.isSealed(obj)</code>。它们都返回一个<code class="fe mf mg mh mi b">Boolean</code>值，如果对象被冻结或密封，它们返回<code class="fe mf mg mh mi b">true,</code>，否则返回<code class="fe mf mg mh mi b">false</code>。</p><div class="nv nw gp gr nx ny"><a href="https://medium.com/@kens_visuals/membership" rel="noopener follow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">通过我的推荐链接加入Medium-Ken Nersisyan</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">用媒介释放你的潜能。立即加入，阅读我和其他顶尖作家的文章。读书，学习，变得更好…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">medium.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kp ny"/></div></div></a></div></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h2 id="92cc" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">进一步阅读</h2><div class="nv nw gp gr nx ny"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-master-problem-solving-as-a-programmer-d16a0b8780ab"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">作为程序员如何掌握解决问题的能力</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">14种练习解决问题的资源以及我是如何掌握技能的。</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oh l"><div class="on l oj ok ol oh om kp ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a rel="noopener  ugc nofollow" target="_blank" href="/dos-and-don-ts-or-how-to-insert-code-in-medium-6c98fab86948"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">注意事项或如何在媒体中插入代码</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">有许多方法可以做到这一点，但我将向您展示最有效的方法。</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oh l"><div class="oo l oj ok ol oh om kp ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a href="https://medium.com/@kens_visuals/this-is-your-sign-to-start-blogging-c9c39739ba65" rel="noopener follow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">这是你开始写博客的标志</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">首先，让我告诉你，我不相信迹象，迷信，或任何这类事情。</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">medium.com</p></div></div><div class="oh l"><div class="op l oj ok ol oh om kp ny"/></div></div></a></div><h2 id="922c" class="mq ks iq bd kt mr ms dn kx mt mu dp lb ls mv mw ld lw mx my lf ma mz na lh nb bi translated">让我们连接</h2><div class="nv nw gp gr nx ny"><a href="https://twitter.com/kens_visuals" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">在推特上关注我﹫kens_visuals</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk">👨🏻‍💻👾</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">twitter.com</p></div></div><div class="oh l"><div class="oq l oj ok ol oh om kp ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a href="https://github.com/kens-visuals" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">kens-视觉效果-概述</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">前端开发者| JS爱好者|科技写手。kens-visual有58个可用的存储库。遵循他们的准则…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">github.com</p></div></div><div class="oh l"><div class="or l oj ok ol oh om kp ny"/></div></div></a></div><p id="de0e" class="pw-post-body-paragraph lj lk iq ll b lm ni jr lo lp nj ju lr ls nk lu lv lw nl ly lz ma nm mc md me ij bi translated"><em class="os">更多内容请看</em><a class="ae ot" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="os">plain English . io</em></strong></a><em class="os">。报名参加我们的</em> <a class="ae ot" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="os">免费周报</em> </strong> </a> <em class="os">。在我们的</em> <a class="ae ot" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="os">社区</em> </strong> </a> <em class="os">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>