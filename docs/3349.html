<html>
<head>
<title>Should All Rest APIs Use POST Requests?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">所有的Rest APIs都应该使用POST请求吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/should-all-rest-apis-use-post-requests-3d59eefc39f7?source=collection_archive---------2-----------------------#2022-08-22">https://javascript.plainenglish.io/should-all-rest-apis-use-post-requests-3d59eefc39f7?source=collection_archive---------2-----------------------#2022-08-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5f1c3ade9b7d576bc42e8a1bea7c8efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2JVW5i1ZCoxESWjW"/></div></div></figure><p id="4e74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个朋友对我说:“要连接一个同事的接口，他定义的接口都是POST请求。原因是<code class="fe kw kx ky kz b">HTTPS</code>与POST请求一起使用更安全。我以前用过RESTful API。如果只有POST请求对<code class="fe kw kx ky kz b">HTTPS</code>来说是安全的，那么为什么还需要其他请求——GET、PUT、DELETE？我该怎么反驳他？”</p><h1 id="4bd2" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">你能一直使用POST吗？</h1><p id="81ed" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">我们都知道<code class="fe kw kx ky kz b">GET</code>请求一般用于获取服务器信息，<code class="fe kw kx ky kz b">POST</code>一般用于更新信息。一个<code class="fe kw kx ky kz b">GET</code>请求能做的，一个<code class="fe kw kx ky kz b">POST</code>能做，一个<code class="fe kw kx ky kz b">GET</code>请求不能做的，一个<code class="fe kw kx ky kz b">POST</code>能做。</p><p id="134e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你的团队有很好的团队纪律，每个人都在平均水平以上，有很好的纠错机制，就没有这样的规则。</p><p id="7dcc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但如果团队成员水平参差不齐，尤其是小团队、创业团队，往往一上来就动手，没有规范，代码的好坏完全由开发人员的个人素质决定。这样的团队要制定这样的规范。</p><p id="09ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">毕竟可以减少很多问题，<code class="fe kw kx ky kz b">POST</code>不用担心<code class="fe kw kx ky kz b">URL</code>长度限制，也不会误用缓存。通过一个规则来降低出错的可能性，使得这个决策非常划算。</p><p id="c5aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">结果:</strong>公司有新人受到这样的要求。你可能会想，什么样的公司会有这样的要求？</p><p id="e5fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是有原因的。一些外包公司或者提供第三方接口的公司为了方便也会选择只使用<code class="fe kw kx ky kz b">POST</code>。</p><h1 id="12e6" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">怎么反驳他？</h1><h1 id="df3c" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">首先来说说GET，POST，PUT，DELETE</h1><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e607f074643f776e9ebd978a62f88f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vkuqr4XAWoTWwkUv.png"/></div></div></figure><h1 id="72f7" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">得到</h1><p id="a764" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated"><code class="fe kw kx ky kz b">GET</code>方法用于从服务器检索数据。这是一个只读方法，因此没有更改或破坏数据的风险，使用<code class="fe kw kx ky kz b">GET</code>的请求应该只用于获取数据。</p><p id="4632" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">GET API</code>是等幂的。多个相同的请求每次都必须产生相同的结果，直到另一个<code class="fe kw kx ky kz b">API (POST or PUT)</code>改变服务器上的资源状态。</p><h1 id="277e" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">邮政</h1><p id="1556" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated"><code class="fe kw kx ky kz b">POST</code>方法用于将实体提交给指定的资源，通常会导致服务器上的状态改变或新资源的创建。<code class="fe kw kx ky kz b">POST</code>既不安全也不幂等，调用两个相同的<code class="fe kw kx ky kz b">POST</code>请求将导致两个不同的资源包含相同的信息(除了资源ID)。</p><h1 id="71b4" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">放</h1><p id="0422" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">主要使用<code class="fe kw kx ky kz b">PUT API</code>更新已有的资源(如果资源不存在，<code class="fe kw kx ky kz b">API</code>可以决定是否创建新的资源)。</p><h1 id="294e" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">删除</h1><p id="c771" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">方法删除指定的资源。<code class="fe kw kx ky kz b">DELETE</code>运算是幂等的。如果删除资源，它将从资源集合中移除。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d02cfcdb7f5076f012f9191dd8ce2a7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eqsgZU2Zl1X57qkB.png"/></div></div></figure><h1 id="d4d4" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">邮政更安全吗？</h1><p id="07cc" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">答案是<strong class="ka ir">否</strong>。</p><p id="f412" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很多人认为<code class="fe kw kx ky kz b">GET</code>的请求数据在URL中，而<code class="fe kw kx ky kz b">POST</code>没有，所以认为<code class="fe kw kx ky kz b">POST</code>更安全。事实并非如此，整个请求的<code class="fe kw kx ky kz b">HTTP URL PATH</code>将被封装在<code class="fe kw kx ky kz b">HTTP</code>协议头中。只要是<code class="fe kw kx ky kz b">HTTPS</code>，就是安全的。当然有些网关比如<code class="fe kw kx ky kz b">NGINX</code>会把<code class="fe kw kx ky kz b">URL</code>放在日志里或者放在浏览器的历史里，所以有人会说<code class="fe kw kx ky kz b">GET</code>请求不安全，但是<code class="fe kw kx ky kz b">POST</code>也好不到哪里去。<code class="fe kw kx ky kz b">CSRF</code>是最常见的安全问题，它完全是针对<code class="fe kw kx ky kz b">POST</code>的。安全是复杂的，无论你使用什么方法或动词都不意味着你更安全。</p><h1 id="7aca" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">最后</h1><p id="fce8" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated"><strong class="ka ir">感谢阅读。我期待着您的关注和阅读更多高质量的文章。</strong></p><p id="1f04" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mh">更多内容请看</em><a class="ae mi" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mh">plain English . io</em></strong></a><em class="mh">。报名参加我们的</em> <a class="ae mi" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="mh">免费周报</em> </strong> </a> <em class="mh">。关注我们关于</em><a class="ae mi" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mh">Twitter</em></strong></a><a class="ae mi" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mh">LinkedIn</em></strong></a><em class="mh"/><a class="ae mi" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mh">YouTube</em></strong></a><em class="mh"/><a class="ae mi" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mh">不和</em> </strong> </a> <em class="mh">。</em></p></div></div>    
</body>
</html>