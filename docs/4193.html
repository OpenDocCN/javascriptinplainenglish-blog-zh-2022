<html>
<head>
<title>JavaScript Loops: for vs forEach vs for…in vs for…of</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript循环:for vs forEach vs for…in vs for…of</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-loops-for-vs-foreach-vs-for-in-vs-for-of-1ffa4cce18e0?source=collection_archive---------9-----------------------#2022-11-07">https://javascript.plainenglish.io/javascript-loops-for-vs-foreach-vs-for-in-vs-for-of-1ffa4cce18e0?source=collection_archive---------9-----------------------#2022-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1a07" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript中有很多方法可以迭代，但是它们都是什么意思呢？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8509c55159a77e4d111100fa5b2e9692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lZwSpyhMtrcY2qzE9-yByQ.png"/></div></div></figure><p id="687d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Javascript中有很多方法可以遍历一个项目数组或Javascript中的任何其他可迭代项目。你可能见过他们:</p><ul class=""><li id="5daa" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">arr.forEach()</code></li><li id="5a6c" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">for(let item of arr)</code></li><li id="4460" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">for(let item in arr)</code></li><li id="d69c" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">for(let item = 0; item &lt; arr.length; ++item)</code></li></ul><p id="993b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这可能看起来像是完成同一件事情的许多方法，但它们都有自己的细微差别。为了让这些工作，有问题的项目也需要是<strong class="kt ir">可重复</strong>。因此，虽然它们可以处理像<a class="ae mf" href="https://fjolt.com/article/javascript-map-data" rel="noopener ugc nofollow" target="_blank"> Map </a>、<a class="ae mf" href="https://fjolt.com/article/javascript-sets" rel="noopener ugc nofollow" target="_blank"> Set </a>和数组这样的东西，但是它们不能处理对象。字符串也是可迭代的。</p><p id="ab1e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然有这么多种方式，在Javascript中什么时候使用<code class="fe lw lx ly lz b">forEach</code>、<code class="fe lw lx ly lz b">in</code>或<code class="fe lw lx ly lz b">of</code>可能会令人困惑。今天，让我们来详细了解一下它们各自的作用，以及何时使用它们。</p><h1 id="cdda" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">forEach方法</h1><p id="64c6" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">许多人被这个工具所吸引，因为从语言学上来说它是有意义的。<code class="fe lw lx ly lz b">arr.forEach</code>听起来不错，它提供了一个简单的回调函数，可以像数组一样对iterable中的每个项做任何我们想做的事情:</p><pre class="kg kh ki kj gt nd lz ne nf aw ng bi"><span id="56b4" class="nh mh iq lz b gy ni nj l nk nl">let x = [ 1, 2, 3, 4, 5 ];<br/>x.forEach((item, index) =&gt; {<br/>    x[index] += 1;<br/>});<br/>console.log(x); // [ 2, 3, 4, 5, 6 ];</span></pre><p id="b0db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，<code class="fe lw lx ly lz b">forEach</code>是一个方法——这意味着它只出现在Javascript中的某些数据类型上。例如，所有的<code class="fe lw lx ly lz b">Array</code>都有一个<code class="fe lw lx ly lz b">forEach</code>方法，<code class="fe lw lx ly lz b">Map</code>和<code class="fe lw lx ly lz b">Set</code>也是如此——但是尽管是可迭代的，<code class="fe lw lx ly lz b">String</code>却没有。值得注意的是，<a class="ae mf" href="https://fjolt.com/article/javascript-multiple-elements-addeventlistener" rel="noopener ugc nofollow" target="_blank"> DOM元素直到最近才有forEach。因此，虽然它在许多不同的情况下都是可靠可用的。它也比常规的老式循环慢得多。</a></p><p id="097f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除此之外，<code class="fe lw lx ly lz b">forEach</code>并不真正与像<code class="fe lw lx ly lz b">await</code>这样的异步方法一起工作，或者承诺。在需要使用承诺或<code class="fe lw lx ly lz b">await</code>的情况下，最好避免使用承诺或<code class="fe lw lx ly lz b">await</code>而使用<code class="fe lw lx ly lz b">for</code>循环。</p><p id="2ae5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然<code class="fe lw lx ly lz b">forEach</code>绝对是一种迭代数组的简单方法，但它并不总是最好的。</p><h1 id="4d91" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">在可迭代表上使用for循环</h1><p id="6236" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">在Javascript中，有三种类型的<code class="fe lw lx ly lz b">for</code>循环可以在可重复项上运行:</p><ul class=""><li id="6374" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">for(let item of arr)</code></li><li id="e347" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">for(let item in arr)</code></li><li id="6377" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">for(let item = 0; item &lt; arr.length; ++item)</code></li></ul><p id="c08f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这种语言的新手来说，语法可能会很混乱。当Javascript首次出现时，大家使用的最初的<code class="fe lw lx ly lz b">for</code>循环是上面列出的最后一个:</p><pre class="kg kh ki kj gt nd lz ne nf aw ng bi"><span id="83ac" class="nh mh iq lz b gy ni nj l nk nl">let x = [ 1, 2, 3, 4, 5 ];<br/>for(let i = 0; i &lt; x.length; ++i) {<br/>    console.log(x[i]); // 1.. 2.. 3.. 4.. 5<br/>}</span></pre><p id="90fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一种简单直接的访问数组索引的方法。这里，<code class="fe lw lx ly lz b">i</code>从<code class="fe lw lx ly lz b">0</code>开始，对于数组<code class="fe lw lx ly lz b">x</code>中的每一项递增。因此，<code class="fe lw lx ly lz b">i</code>可靠地表示了每一项的索引，因此编写<code class="fe lw lx ly lz b">x[i]</code>将让我们对数组中的每一项做一些事情。</p><p id="c703" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此后，引入了两种新型的<code class="fe lw lx ly lz b">for</code>回路- <code class="fe lw lx ly lz b">in</code>和<code class="fe lw lx ly lz b">of</code>。</p><h1 id="1230" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">Javascript for循环中的in vs of</h1><p id="36d7" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">理解Javascript for循环中的<code class="fe lw lx ly lz b">in</code>和<code class="fe lw lx ly lz b">of</code>的最佳方式是<code class="fe lw lx ly lz b">in</code>是我们刚刚看到的<code class="fe lw lx ly lz b">for</code>循环的简化。访问数组中的索引是一种更简单的方法。</p><p id="ce12" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">同时，<code class="fe lw lx ly lz b">of</code>是表示<strong class="kt ir">数组项本身</strong>的一种简单方法。让我们看一个简单的例子。这里，我们使用<code class="fe lw lx ly lz b">in</code>获取数组中每一项的索引:</p><pre class="kg kh ki kj gt nd lz ne nf aw ng bi"><span id="313c" class="nh mh iq lz b gy ni nj l nk nl">let x = [ 5, 10, 15, 20, 25, 30 ];<br/>for(let i in x) {<br/>    console.log(i); // 0.. 1.. 2.. 3.. 4.. 5<br/>}</span></pre><p id="a751" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">同时，如果我们使用<code class="fe lw lx ly lz b">of</code>，它将获得数组项的实际值:</p><pre class="kg kh ki kj gt nd lz ne nf aw ng bi"><span id="e273" class="nh mh iq lz b gy ni nj l nk nl">let x = [ 5, 10, 15, 20, 25, 30 ];<br/>for(let i of x) {<br/>    console.log(i); // 5.. 10.. 15.. 20.. 25.. 30<br/>}</span></pre><p id="583e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，虽然<code class="fe lw lx ly lz b">in</code>基本上简化了<code class="fe lw lx ly lz b">for(let i = 0; i &lt; x.length; ++i)</code>，但<code class="fe lw lx ly lz b">of</code>实际上为我们提供了访问数组内容本身的新功能。如果我们的数组中有对象，这可能特别有用:</p><pre class="kg kh ki kj gt nd lz ne nf aw ng bi"><span id="1b04" class="nh mh iq lz b gy ni nj l nk nl">let x = [ { name: "John" }, { name: "Jacob" }, { name: "Jingleheimer" }, { name: "Schmidt" }]<br/>for(let item of x) {<br/>    console.log(item.name); // John.. Jacob.. Jingleheimer.. Schmidt<br/>}</span></pre><p id="6a4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还需要注意的是，对于像<code class="fe lw lx ly lz b">Map</code> s和<code class="fe lw lx ly lz b">Set</code> s这样的其他可迭代对象，<code class="fe lw lx ly lz b">for.. of</code>将返回一个既有键又有值的数组，而<code class="fe lw lx ly lz b">in</code>将不起作用。例如:</p><pre class="kg kh ki kj gt nd lz ne nf aw ng bi"><span id="49a0" class="nh mh iq lz b gy ni nj l nk nl">let myMap = new Map();<br/>myMap.set('x', 5);</span><span id="2e5c" class="nh mh iq lz b gy nm nj l nk nl">for(let x of myMap) {<br/>    console.log(x); // [ 'x', 5 ]<br/>}</span><span id="f581" class="nh mh iq lz b gy nm nj l nk nl">for(let x in myMap) {<br/>    console.log(x); // does not console log anything<br/>}</span></pre><p id="5da1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要了解更多关于地图和集合的信息，你可以在这里阅读我的详细的<a class="ae mf" href="https://fjolt.com/article/javascript-map-data" rel="noopener ugc nofollow" target="_blank"> Javascript地图指南</a>和<a class="ae mf" href="https://fjolt.com/article/javascript-sets" rel="noopener ugc nofollow" target="_blank"> Javascript集合指南</a>。</p><h1 id="bbc4" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">遍历对象</h1><p id="a89d" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">虽然对象本身在Javascript中是不可迭代的，但是它们可以通过使用<code class="fe lw lx ly lz b">Object.keys()</code>或<code class="fe lw lx ly lz b">Object.values()</code>转换成可迭代的。这将转换对象的键或值的数组，然后可以迭代该数组:</p><pre class="kg kh ki kj gt nd lz ne nf aw ng bi"><span id="422a" class="nh mh iq lz b gy ni nj l nk nl">let obj = { name: "John", secondName: "Jacob", age: 154 };<br/>let iterableKeys = Object.keys(obj);<br/>for(let item of iterableKeys) {<br/>    console.log(item); // name.. secondName.. age<br/>}</span></pre><h1 id="d3d9" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="2985" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">这大概包括了你需要知道的一切。总而言之:</p><ul class=""><li id="a6ee" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><code class="fe lw lx ly lz b">forEach</code>是一个附加到Javascript中大多数可迭代项的方法，只有少数例外。它是基于回调的，通常不支持承诺，并且比传统的for循环要慢。</li><li id="06d9" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated">每个可迭代对象上都有循环，过去,<code class="fe lw lx ly lz b">for(let i = 0; i &lt; x.length; ++i)</code>是人们使用的唯一格式。</li><li id="32ed" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated">引入<code class="fe lw lx ly lz b">for.. in</code>是为了将<code class="fe lw lx ly lz b">for(let i = 0; i &lt; x.length; ++i)</code>简化为<code class="fe lw lx ly lz b">for(let i in x)</code>。</li><li id="8e6e" class="ln lo iq kt b ku ma kx mb la mc le md li me lm ls lt lu lv bi translated">最后，我们使用<code class="fe lw lx ly lz b">for.. of</code>获得了访问iterable中每一项的值而不仅仅是键的能力。</li></ul><p id="6b93" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望你喜欢这个指南，并且更好地了解在JavaScript中什么时候使用<code class="fe lw lx ly lz b">in</code>、<code class="fe lw lx ly lz b">forEach</code>和<code class="fe lw lx ly lz b">of</code>。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="14cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nu">更多内容请看</em><a class="ae mf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">plain English . io</em></strong></a><em class="nu">。报名参加我们的</em> <a class="ae mf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nu">免费周报</em> </strong> </a> <em class="nu">。关注我们关于</em><a class="ae mf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">Twitter</em></strong></a><a class="ae mf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">LinkedIn</em></strong></a><em class="nu"/><a class="ae mf" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">YouTube</em></strong></a><em class="nu"/><a class="ae mf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">不和</em> </strong> </a> <em class="nu">。对增长黑客感兴趣？检查</em> <a class="ae mf" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nu">电路</em> </strong> </a> <em class="nu">。</em></p></div></div>    
</body>
</html>