<html>
<head>
<title>RegExp is Hard to Write, Easy to Use</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">正则表达式很难写，很容易使用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/regexp-is-hard-to-write-easy-to-use-2cd94236e48d?source=collection_archive---------9-----------------------#2022-06-29">https://javascript.plainenglish.io/regexp-is-hard-to-write-easy-to-use-2cd94236e48d?source=collection_archive---------9-----------------------#2022-06-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2aa9" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">10个有用的正则表达式。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d45124c4b09827aeb9ce917f9920d583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PBp5ZyI0iLkKI55UiNnmYA.jpeg"/></div></div></figure><p id="711f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当你用JavaScript编码时，<code class="fe lk ll lm ln b">RegExp</code>对你来说可能是一项艰苦的工作。虽然有很多教程和网站可以帮助你学习正则表达式，但是当你看到<code class="fe lk ll lm ln b">(?!^)(?=(\\d{3})+</code>时，它看起来就像是外星文字一样。另一方面，做<code class="fe lk ll lm ln b">verification</code>、<code class="fe lk ll lm ln b"> string extraction</code>、<code class="fe lk ll lm ln b">deformation</code>真的很容易。最好的是能够直接使用复制粘贴。</p><p id="47b9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">今天，我们来看看10个有用的正则表达式。</p><h1 id="a0aa" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">1.电子邮件验证</h1><p id="0600" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">电子邮件验证是我们用户注册最常用的方法。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="167c" class="mp lp in ln b gy mq mr l ms mt">const checkEmailRegExp = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/<br/>console.log(checkEmailRegExp.test('<a class="ae mu" href="mailto:aabbcc@gmail.com" rel="noopener ugc nofollow" target="_blank">aabbcc@gmail.com</a>')) //true<br/>console.log(checkEmailRegExp.test('aabbcc_gmail.com')) //false<br/>console.log(checkEmailRegExp.test('aabbcc@gmail_com')) //false<br/>console.log(checkEmailRegExp.test('aabbcc@'))          //false<br/>console.log(checkEmailRegExp.test('@aabbcc'))          //false</span></pre><h1 id="5e48" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">2.十六进制颜色</h1><p id="3fa0" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">确定十六进制颜色是否合法。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="5aa7" class="mp lp in ln b gy mq mr l ms mt">const checkHexColorRegExp = /^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/</span><span id="09d7" class="mp lp in ln b gy mv mr l ms mt">console.log(checkHexColorRegExp.test('#fff'))     //true<br/>console.log(checkHexColorRegExp.test('#808080'))  //true  console.log(checkHexColorRegExp.test('#ffff'))    //false<br/>console.log(checkHexColorRegExp.test('#8080801')) //false</span></pre><h1 id="d435" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">3.千位格式</h1><p id="8218" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">在项目中，页面显示经常遇到的货币量。为了使金额的显示更加人性化和规范化，需要增加一个货币格式化策略。这就是所谓的千位格式化。</p><ol class=""><li id="28a1" class="mw mx in kq b kr ks ku kv kx my lb mz lf na lj nb nc nd ne bi translated"><code class="fe lk ll lm ln b">123456789</code> = &gt; <code class="fe lk ll lm ln b">123,456,789</code></li><li id="910f" class="mw mx in kq b kr nf ku ng kx nh lb ni lf nj lj nb nc nd ne bi translated"><code class="fe lk ll lm ln b">123456789.123</code> = &gt; <code class="fe lk ll lm ln b">123,456,789.123</code></li></ol><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="631d" class="mp lp in ln b gy mq mr l ms mt">const toThousands = (price) =&gt; {   <br/>return price.replace(new RegExp(`(?!^)(?=(\\d{3})+${price.includes('.') ? '\\.' : '$'})`, 'g'), ',')   <br/>} <br/>toThousands('123456789')     // '123,456,789' toThousands('123456789.123') // '123,456,789.123' <br/>toThousands('123')           // '123'</span></pre><h1 id="84c9" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated"><strong class="ak"> 4。日期格式</strong></h1><p id="7d08" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated"><code class="fe lk ll lm ln b">2022–06–29</code> = &gt; <code class="fe lk ll lm ln b">06/29/2022</code></p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="b130" class="mp lp in ln b gy mq mr l ms mt">var regex = /(\d{4})-(\d{1,2})-(\d{1,2})/;<br/>console.log("2022-06-29".replace(regex, "$2/$3/$1")); //'06/29/2022'<br/>console.log("2022-6-9".replace(regex, "$2/$3/$1"));   //'9/6/2022'</span></pre><h1 id="1f11" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated"><strong class="ak"> 5。修剪弦</strong></h1><p id="8b3e" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">删除前导空格是很常见的。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="ac07" class="mp lp in ln b gy mq mr l ms mt">let trim = (string) =&gt; {     <br/>   return string.replace(/^\s+|\s+$/g, '') <br/>}<br/>console.log(trim(' hello world ')) //hello world<br/>console.log(trim(' hello world'))  //hello world<br/>console.log(trim('hello world '))  //hello world</span></pre><h1 id="cfc9" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">6.HTML转义</h1><p id="8a8c" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">防止XSS攻击的方法之一是执行HTML转义，即对应于符号的转义字符。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="20cc" class="mp lp in ln b gy mq mr l ms mt">const escape = (string) =&gt; {<br/>  const escapeMaps = {<br/>    '&amp;': 'amp',<br/>    '&lt;': 'lt',<br/>    '&gt;': 'gt',<br/>    '"': 'quot',<br/>    "'": '#39'<br/>  }<br/>  // The effect here is the same as that of /[&amp;amp;&lt;&gt; "']/g<br/>  const escapeRegexp = new RegExp(`[${Object.keys(escapeMaps).join('')}]`, 'g')<br/>  return string.replace(escapeRegexp, (match) =&gt; `&amp;${escapeMaps[match]};`)<br/>}</span><span id="e29e" class="mp lp in ln b gy mv mr l ms mt">console.log(escape(`<br/>  &lt;div&gt;<br/>    &lt;p&gt;hello world&lt;/p&gt;<br/>  &lt;/div&gt;<br/>`))<br/>/*<br/>&amp;lt;div&amp;gt;<br/>  &amp;lt;p&amp;gt;hello world&amp;lt;/p&amp;gt;<br/>&amp;lt;/div&amp;gt;<br/>*/</span></pre><h1 id="a6a2" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">7.HTML反向转义</h1><p id="a0b3" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">HTML转义的逆过程。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="6164" class="mp lp in ln b gy mq mr l ms mt">const unescape = (string) =&gt; {<br/>  const unescapeMaps = {<br/>    'amp': '&amp;',<br/>    'lt': '&lt;',<br/>    'gt': '&gt;',<br/>    'quot': '"',<br/>    '#39': "'"<br/>  }<br/>  const unescapeRegexp = /&amp;([^;]+);/g<br/>  return string.replace(unescapeRegexp, (match, unescapeKey) =&gt; {<br/>    return unescapeMaps[ unescapeKey ] || match<br/>  })<br/>}</span><span id="65d4" class="mp lp in ln b gy mv mr l ms mt">console.log(unescape(`<br/>  &amp;lt;div&amp;gt;<br/>    &amp;lt;p&amp;gt;hello world&amp;lt;/p&amp;gt;<br/>  &amp;lt;/div&amp;gt;<br/>`))<br/>/*<br/>&lt;div&gt;<br/>  &lt;p&gt;hello world&lt;/p&gt;<br/>&lt;/div&gt;<br/>*/</span></pre><h1 id="53c3" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">8.解析链接参数</h1><p id="0355" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">如何从该链接中获取参数值:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="2312" class="mp lp in ln b gy mq mr l ms mt"><a class="ae mu" href="https://www.google.com/search?q=reg&amp;oq=ex'" rel="noopener ugc nofollow" target="_blank">https://www.google.com/search?q=reg&amp;oq=ex</a></span><span id="964a" class="mp lp in ln b gy mv mr l ms mt">const q = getQueryByName('q')  //reg<br/>const oq = getQueryByName('oq') //ex</span></pre><p id="4ca4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">通过使用<code class="fe lk ll lm ln b">RegExp</code>，你可以实现<code class="fe lk ll lm ln b">getQueryByName</code>。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="3398" class="mp lp in ln b gy mq mr l ms mt">const url = '<a class="ae mu" href="https://www.google.com/search?q=reg&amp;oq=ex'" rel="noopener ugc nofollow" target="_blank">https://www.google.com/search?q=reg&amp;oq=ex'</a><br/>const getQueryByName = (name) =&gt; {<br/>  const queryNameRegex = new RegExp(`[?&amp;]${name}=([^&amp;]*)(&amp;|$)`)<br/>  const queryNameMatch = url.match(queryNameRegex)<br/>  // Generally, it will be decoded by decodeURIComponent<br/>  return queryNameMatch ? decodeURIComponent(queryNameMatch[1]) : ''<br/>}</span><span id="eda0" class="mp lp in ln b gy mv mr l ms mt">const q = getQueryByName('q')<br/>const oq = getQueryByName('oq')</span><span id="92b5" class="mp lp in ln b gy mv mr l ms mt">console.log(q, oq) // reg, ex</span></pre><h1 id="7eb2" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">9.URL验证</h1><p id="a543" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">检查URL是否有效。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="5dbc" class="mp lp in ln b gy mq mr l ms mt">const regExp = /https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&amp;\/\/=]*)/</span><span id="0c72" class="mp lp in ln b gy mv mr l ms mt">console.log(regExp.test('abcdef'))           //false<br/>console.log(regExp.test('www.whatever.com')) //false<br/>console.log(regExp.test('https://github.com/geongeorge/i-hate-regex'))                                     //true<br/>console.log(checkUrlRegEx.test('https://www.facebook.com/')) //true<br/>console.log(regExp.test('https://www.google.com/')) //true<br/>console.log(regExp.test('https://xkcd.com/2293/'))  //true<br/>console.log(regExp.test('https://this-shouldn\'t.match@example.com'))                     //false<br/>console.log(regExp.test('http://www.example.com/')) //true</span></pre><h1 id="e043" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">10.获取网页图像地址</h1><p id="9c6f" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">这个需求可能会被爬虫更多的使用，定期使用来获取当前网页上所有图片的地址。尝试在控制台中打印它，它非常有用。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="b17a" class="mp lp in ln b gy mq mr l ms mt">const matchImgs = (sHtml) =&gt; {<br/>  const imgUrlRegex = /&lt;img[^&gt;]+src="((?:https?:)?\/\/[^"]+)"[^&gt;]*?&gt;/gi<br/>  let matchImgUrls = []<br/>  <br/>  sHtml.replace(imgUrlRegex, (match, $1) =&gt; {<br/>    $1 &amp;&amp; matchImgUrls.push($1)<br/>  })<br/>  return matchImgUrls<br/>}</span><span id="0b3f" class="mp lp in ln b gy mv mr l ms mt">console.log(matchImgs(document.body.innerHTML))</span></pre><h1 id="031d" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">最后</h1><p id="21bd" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">以上就是关于<code class="fe lk ll lm ln b">RegExp</code>的全部内容，如果你觉得还不够，我给你推荐一个名为<code class="fe lk ll lm ln b"><a class="ae mu" href="https://ihateregex.io/" rel="noopener ugc nofollow" target="_blank">i Hate Regex</a></code>的正则表达式工具网站，它是一个在线开源工具，可以快速检索和匹配正确的正则表达式，帮助你完成<code class="fe lk ll lm ln b">username</code>、<code class="fe lk ll lm ln b">email</code>、<code class="fe lk ll lm ln b">date</code>、<code class="fe lk ll lm ln b">mobile phone number</code>、<code class="fe lk ll lm ln b">password</code>等常用规则的验证。</p><div class="nk nl gp gr nm nn"><a href="https://ihateregex.io/" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd io gy z fp ns fr fs nt fu fw im bi translated">我讨厌正则表达式-正则表达式备忘单</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">我讨厌正则表达式是一个正则表达式备忘单，它也解释了常用的表达式，以便你理解它。停下来…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">ihateregex.io</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob km nn"/></div></div></a></div><p id="1c4f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="oc">更多内容请看</em><a class="ae mu" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="oc">plain English . io</em></strong></a><em class="oc">。报名参加我们的</em> <a class="ae mu" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="oc">免费周报</em> </strong> </a> <em class="oc">。关注我们关于</em><a class="ae mu" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="oc">Twitter</em></strong></a><em class="oc">和</em><a class="ae mu" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="oc">LinkedIn</em></strong></a><em class="oc">。查看我们的</em> <a class="ae mu" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="oc">社区不和谐</em> </strong> </a> <em class="oc">加入我们的</em> <a class="ae mu" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="oc">人才集体</em> </strong> </a> <em class="oc">。</em></p></div></div>    
</body>
</html>