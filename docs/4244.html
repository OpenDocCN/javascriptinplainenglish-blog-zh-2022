<html>
<head>
<title>Clean Code in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清除类型脚本中的代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/clean-code-in-typescript-a183d43f3bf0?source=collection_archive---------0-----------------------#2022-11-14">https://javascript.plainenglish.io/clean-code-in-typescript-a183d43f3bf0?source=collection_archive---------0-----------------------#2022-11-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/724563f4f30e7f9f253a7b0ab62d167b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lkHTQhkAmuQPcH9j.png"/></div></div></figure><h1 id="c5d9" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h1><p id="04fc" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">上周我<a class="ae lr" href="https://medium.com/bitsrc/what-are-code-smells-and-how-clean-code-can-help-typescript-version-990697a87f46" rel="noopener">写了一篇关于打字稿中代码味道的文章，</a>这篇文章受到了很多关注和好评。所以我想很多人想知道更多关于代码味道的一般知识，更具体地说是TypeScript。</p><p id="2271" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">记住，代码有味道或者代码不好并不意味着代码不可用。但是作为一名程序员，我认为我们应该生产可重用的、可读的、可重构的软件。</p><p id="1589" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">我不会重复上一篇文章中的错误，如果你没有看过，请检查一下</p><h1 id="b272" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">不要添加不必要的上下文</h1><p id="9a74" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">如果你的类/类型/对象名告诉你一些事情，不要在你的变量名中重复。</p><p id="23e8" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="2eb7" class="mg jw in mc b be mh mi l mj mk">type Car = {<br/>  carMake: string;<br/>  carModel: string;<br/>  carColor: string;<br/>}<br/><br/>function print(car: Car): void {<br/>  console.log(`${car.carMake} ${car.carModel} (${car.carColor})`);<br/>}</span></pre><p id="3f89" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="26cf" class="mg jw in mc b be mh mi l mj mk">type Car = {<br/>  make: string;<br/>  model: string;<br/>  color: string;<br/>}<br/><br/>function print(car: Car): void {<br/>  console.log(`${car.make} ${car.model} (${car.color})`);<br/>}</span></pre><h1 id="0bed" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">使用枚举</h1><p id="597c" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">枚举可以帮助你记录代码的意图。例如，当我们关心的是不同的值，而不是这些值的精确值时。</p><p id="59c5" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="9a1d" class="mg jw in mc b be mh mi l mj mk">const GENRE = {<br/>  ROMANTIC: 'romantic',<br/>  DRAMA: 'drama',<br/>  COMEDY: 'comedy',<br/>  DOCUMENTARY: 'documentary',<br/>}<br/><br/>projector.configureFilm(GENRE.COMEDY);<br/><br/>class Projector {<br/>  // declaration of Projector<br/>  configureFilm(genre) {<br/>    switch (genre) {<br/>      case GENRE.ROMANTIC:<br/>        // some logic to be executed <br/>    }<br/>  }<br/>}</span></pre><p id="2a63" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="3b10" class="mg jw in mc b be mh mi l mj mk">enum GENRE {<br/>  ROMANTIC,<br/>  DRAMA,<br/>  COMEDY,<br/>  DOCUMENTARY,<br/>}<br/><br/>projector.configureFilm(GENRE.COMEDY);<br/><br/>class Projector {<br/>  // declaration of Projector<br/>  configureFilm(genre) {<br/>    switch (genre) {<br/>      case GENRE.ROMANTIC:<br/>        // some logic to be executed <br/>    }<br/>  }</span></pre><h1 id="3b41" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">函数名应该说明它们是做什么的</h1><p id="0296" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="e666" class="mg jw in mc b be mh mi l mj mk">function addToDate(date: Date, month: number): Date {<br/>  // ...<br/>}<br/><br/>const date = new Date();<br/><br/>// It's hard to tell from the function name what is added<br/>addToDate(date, 1);</span></pre><p id="c36d" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="2b16" class="mg jw in mc b be mh mi l mj mk">function addMonthToDate(date: Date, month: number): Date {<br/>  // ...<br/>}<br/><br/>const date = new Date();<br/>addMonthToDate(date, 1);</span></pre><h1 id="4e85" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">比起命令式编程，更喜欢函数式编程</h1><p id="5f90" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="42ad" class="mg jw in mc b be mh mi l mj mk">const contributions = [<br/>  {<br/>    name: 'Uncle Bobby',<br/>    linesOfCode: 500<br/>  }, {<br/>    name: 'Suzie Q',<br/>    linesOfCode: 1500<br/>  }, {<br/>    name: 'Jimmy Gosling',<br/>    linesOfCode: 150<br/>  }, {<br/>    name: 'Gracie Hopper',<br/>    linesOfCode: 1000<br/>  }<br/>];<br/><br/>let totalOutput = 0;<br/><br/>for (let i = 0; i &lt; contributions.length; i++) {<br/>  totalOutput += contributions[i].linesOfCode;<br/>}</span></pre><p id="2b26" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="1119" class="mg jw in mc b be mh mi l mj mk">const contributions = [<br/>  {<br/>    name: 'Uncle Bobby',<br/>    linesOfCode: 500<br/>  }, {<br/>    name: 'Suzie Q',<br/>    linesOfCode: 1500<br/>  }, {<br/>    name: 'Jimmy Gosling',<br/>    linesOfCode: 150<br/>  }, {<br/>    name: 'Gracie Hopper',<br/>    linesOfCode: 1000<br/>  }<br/>];<br/><br/>const totalOutput = contributions<br/>  .reduce((totalLines, output) =&gt; totalLines + output.linesOfCode, 0);</span></pre><h1 id="f205" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">避免消极条件句</h1><p id="9990" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="fde8" class="mg jw in mc b be mh mi l mj mk">function isEmailNotUsed(email: string): boolean {<br/>  // ...<br/>}<br/><br/>if (isEmailNotUsed(email)) {<br/>  // ...<br/>}</span></pre><p id="cc81" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="c386" class="mg jw in mc b be mh mi l mj mk">function isEmailUsed(email: string): boolean {<br/>  // ...<br/>}<br/><br/>if (!isEmailUsed(email)) {<br/>  // ...<br/>}</span></pre><h1 id="c4db" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">偏好不变性</h1><p id="caf6" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="46b1" class="mg jw in mc b be mh mi l mj mk">interface Config {<br/>  host: string;<br/>  port: string;<br/>  db: string;<br/>}</span></pre><p id="ffe5" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="b94e" class="mg jw in mc b be mh mi l mj mk">interface Config {<br/>  readonly host: string;<br/>  readonly port: string;<br/>  readonly db: string;<br/>}</span></pre><h1 id="d893" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">类型与接口</h1><p id="91ff" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">当您可能需要并集或交集时，请使用类型。想要<code class="fe ml mm mn mc b">extends</code>或者<code class="fe ml mm mn mc b">implements</code>的时候用一个接口。没有严格的规则，但是，使用一个适合你的。</p><p id="aac4" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="2dcb" class="mg jw in mc b be mh mi l mj mk">interface EmailConfig {<br/>  // ...<br/>}<br/><br/>interface DbConfig {<br/>  // ...<br/>}<br/><br/>interface Config {<br/>  // ...<br/>}<br/><br/>//...<br/><br/>type Shape = {<br/>  // ...<br/>}</span></pre><p id="1b99" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="1fc9" class="mg jw in mc b be mh mi l mj mk">type EmailConfig = {<br/>  // ...<br/>}<br/><br/>type DbConfig = {<br/>  // ...<br/>}<br/><br/>type Config  = EmailConfig | DbConfig;<br/><br/>// ...<br/><br/>interface Shape {<br/>  // ...<br/>}<br/><br/>class Circle implements Shape {<br/>  // ...<br/>}<br/><br/>class Square implements Shape {<br/>  // ...<br/>}</span></pre><h1 id="291e" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">每个测试一个概念</h1><p id="a540" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">测试还应遵循<em class="mo">单一责任原则</em>。每个单元测试只做一个断言。</p><p id="9150" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">应该避免:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="1331" class="mg jw in mc b be mh mi l mj mk">import { assert } from 'chai';<br/><br/>describe('AwesomeDate', () =&gt; {<br/>  it('handles date boundaries', () =&gt; {<br/>    let date: AwesomeDate;<br/><br/>    date = new AwesomeDate('1/1/2015');<br/>    assert.equal('1/31/2015', date.addDays(30));<br/><br/>    date = new AwesomeDate('2/1/2016');<br/>    assert.equal('2/29/2016', date.addDays(28));<br/><br/>    date = new AwesomeDate('2/1/2015');<br/>    assert.equal('3/1/2015', date.addDays(28));<br/>  });<br/>});</span></pre><p id="c552" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">请改为这样做:</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="e0e6" class="mg jw in mc b be mh mi l mj mk">import { assert } from 'chai';<br/><br/>describe('AwesomeDate', () =&gt; {<br/>  it('handles 30-day months', () =&gt; {<br/>    const date = new AwesomeDate('1/1/2015');<br/>    assert.equal('1/31/2015', date.addDays(30));<br/>  });<br/><br/>  it('handles leap year', () =&gt; {<br/>    const date = new AwesomeDate('2/1/2016');<br/>    assert.equal('2/29/2016', date.addDays(28));<br/>  });<br/><br/>  it('handles non-leap year', () =&gt; {<br/>    const date = new AwesomeDate('2/1/2015');<br/>    assert.equal('3/1/2015', date.addDays(28));<br/>  });<br/>});</span></pre><h1 id="99ad" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="6d87" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">关于干净代码有很多东西要说，一篇文章是不够的。但是如果你想要更详细的信息，请查看我的参考资料。</p><h1 id="c1e1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">遗言</h1><p id="8ca2" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">虽然我的内容对每个人都是免费的，但是如果你觉得这篇文章有帮助，<a class="ae lr" href="https://www.buymeacoffee.com/kylele19" rel="noopener ugc nofollow" target="_blank">你可以在这里给我买杯咖啡</a></p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="26c0" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated"><em class="mo">更多内容请看</em><a class="ae lr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mo">plain English . io</em></strong></a><em class="mo">。报名参加我们的</em> <a class="ae lr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。关注我们关于</em><a class="ae lr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mo">Twitter</em></strong></a><a class="ae lr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mo">LinkedIn</em></strong></a><em class="mo"/><a class="ae lr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mo">YouTube</em></strong></a><em class="mo"/><a class="ae lr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mo">不和</em> </strong> </a> <em class="mo">。对增长黑客感兴趣？检查</em> <a class="ae lr" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mo">电路</em> </strong> </a> <em class="mo">。</em></p><h1 id="e50b" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">进一步阅读</h1><div class="mw mx gp gr my mz"><a rel="noopener  ugc nofollow" target="_blank" href="/typescript-made-easy-a-guide-to-your-first-type-safe-app-with-next-js-wundergraph-and-prisma-e197a59e2b30"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">轻松编写类型脚本:使用Next.js、WunderGraph和Prisma编写第一个类型安全应用程序的指南</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">是时候抛开恐惧，学习TypeScript了。让我们给你第一次“发现！”瞬间通过建立一个完整的…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn jt mz"/></div></div></a></div></div></div>    
</body>
</html>