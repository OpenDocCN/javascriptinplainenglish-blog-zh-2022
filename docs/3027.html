<html>
<head>
<title>Bun: A Hot Take</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">小圆面包:热食</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/bun-a-hot-take-9a92673805a7?source=collection_archive---------1-----------------------#2022-07-24">https://javascript.plainenglish.io/bun-a-hot-take-9a92673805a7?source=collection_archive---------1-----------------------#2022-07-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c77cd4f79bfc57128dc7432c96817141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N1B8EYq8uUmDdgDL.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Credit: <a class="ae jz" href="https://bun.sh/" rel="noopener ugc nofollow" target="_blank">Bun.sh</a></figcaption></figure><p id="4377" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如<a class="ae jz" href="https://qr.ae/pvMnFm" rel="noopener ugc nofollow" target="_blank">去年</a>预测的那样，围绕定制JavaScript运行时的创建出现了一种趋势。起初，它只是浏览器。然后是纳尔瓦尔。然后是Node.js和Vert.x等鲜为人知的运行时。今天，世界上有Cloudflare Workers、Deno，以及现在的<a class="ae jz" href="https://bun.sh" rel="noopener ugc nofollow" target="_blank"> Bun.sh </a>。</p><p id="dec6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Bun是一个新的JavaScript运行时，有望比现有的运行时更快。当前的性能指标评测在提供web内容、与SQLite交互和支持外部函数接口(FFI)方面进行了令人印象深刻的比较。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ky"><img src="../Images/c7100909f482576d0d5b1dd2a73db801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HnqX7NaABS8DlXGqAEo9mg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Bun Benchmarks</figcaption></figure><p id="5414" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Node.js、Deno、Cloudflare Workers、Chrome、Edge、Opera和the Brave Browser都基于谷歌<a class="ae jz" href="https://v8.dev/" rel="noopener ugc nofollow" target="_blank"> V8 JavaScript引擎</a>。这些运行时利用<a class="ae jz" href="https://v8docs.nodesource.com/node-0.8/d5/dda/classv8_1_1_isolate.html" rel="noopener ugc nofollow" target="_blank"> V8隔离</a>，这是V8 JavaScript引擎的一个未修改的实例。引擎本身解释JavaScript代码，但是功能仅限于ECMAScript规范。开发人员熟悉的大多数功能实际上都是附加到V8隔离上的独立库的一部分。浏览器增加了Web APIs，提供了类似<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/API/console" rel="noopener ugc nofollow" target="_blank"> console.log </a>的熟悉功能。Node.js添加了<a class="ae jz" href="https://libuv.org/" rel="noopener ugc nofollow" target="_blank"> libuv </a>，它提供了对文件系统(fs)的访问。Deno使用Rusty V8和Tokio，而Cloudflare添加了自己的缓存库。</p><h2 id="1af4" class="ld le in bd lf lg lh dn li lj lk dp ll kl lm ln lo kp lp lq lr kt ls lt lu lv bi translated">每个人都喜欢快速软件</h2><p id="5326" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">像其他JavaScript运行时一样，Bun添加了自己的API。与其他运行时不同，它是基于<a class="ae jz" href="https://developer.apple.com/documentation/javascriptcore" rel="noopener ugc nofollow" target="_blank"> JavaScriptCore </a>而不是V8构建的。众所周知，JavaScriptCore的启动速度比V8稍快，这减少了延迟(无服务器环境中的一个关键因素)。它也是用Zig编写的，这是一种带有手动内存管理的低级语言。通过手动处理内存，作者可以更好地控制性能。Bun团队已经花了很多时间使用这些工具来优化运行时。</p><h2 id="cd32" class="ld le in bd lf lg lh dn li lj lk dp ll kl lm ln lo kp lp lq lr kt ls lt lu lv bi translated">给每个人的东西…差不多。</h2><p id="3735" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Bun的一个特别有趣的特性是支持节点模块(常见的JS/CJS)和es模块(imports/ESM)。通过支持这两种方法，Bun开发人员可以使用现有库的大型生态系统，而不用考虑他们喜欢的开发方法。Node.js也支持这两种方法，但不是同时支持。Deno只支持ESM。在这方面，Bun通过消除痛苦的选择推进了JavaScript社区。</p><blockquote class="mb mc md"><p id="6490" class="ka kb me kc b kd ke kf kg kh ki kj kk mf km kn ko mg kq kr ks mh ku kv kw kx ig bi translated"><strong class="kc io">更新:</strong> Deno现在支持npm模块。</p></blockquote><p id="c963" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Bun也支持现成的打字稿和JSX。它包含一个本地测试运行器(类似于Jest)。它支持环境文件概念(加载。env文件转换成环境变量)。它有一个npm的替代品，根据Bun网站的说法，它的运行速度“快20倍”。有很多特色，但是很多都是固执己见。</p><p id="a577" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就我个人而言，我不喜欢玩笑式的测试。我不用JSX。我不反对打字稿，但这不是我日常工作的一部分。Bun看起来像是为与服务器端React一起工作而定制的，但我并没有真正发现自己在这样做。不管你是否同意我的观点，Bun是固执己见的，我证明了那些观点并不被普遍接受。</p><h2 id="0d38" class="ld le in bd lf lg lh dn li lj lk dp ll kl lm ln lo kp lp lq lr kt ls lt lu lv bi translated">迷失的观众</h2><p id="d673" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Bun有一个非常明显的缺失。它不支持Windows。</p><p id="53cd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">与一些假设相反，Windows在个人和专业用途上仍然占据主导市场份额。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mi"><img src="../Images/c68f6e7f8faac93dfd9c326110cfbc8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1yF6jOcMtGzYK4w2xy8Ow.png"/></div></div></figure><p id="8c81" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">多年来，macOS和Linux已经获得了市场份额，但是排除一个主要的操作系统就消除了市场的一个巨大部分。JavaScript的主要吸引力之一是它的跨平台性。</p><p id="7a3f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Bun是新的，Windows上支持JavaScriptCore，所以也许Bun会在某个时候支持Windows。然而；很明显，Bun团队有自己的工作要做。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/6ba932fddc83706944a5817763f965f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Yn14o12MCRIKzHo6JgtRw.png"/></div></div></figure><p id="2082" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让Bun在Windows上工作是有可能的，但是它能兑现它在Windows上做出的承诺吗？Bun依赖于快速I/O，这是操作系统的一个功能。如果在Windows上不能实现同样的I/O提升，那么Bun可能无法兑现它做出的承诺。</p><h2 id="a06b" class="ld le in bd lf lg lh dn li lj lk dp ll kl lm ln lo kp lp lq lr kt ls lt lu lv bi translated">Bun与Node/Deno</h2><p id="de22" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Bun号称是Node或者Deno的降代，其实不然。</p><p id="13f6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">缺乏对Windows的支持使这一替代方案无法运行，但还有其他因素。Node和Deno都可以生成可执行文件(参见<a class="ae jz" href="https://medium.com/swlh/javascript-executables-5644ead7016d" rel="noopener"> JavaScript可执行文件</a>)。Deno是可嵌入的。这些差异不会影响每个人，但会影响很多人。</p><p id="bd4d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从这个作者的角度来看，Bun更适合像Cloudflare Workers这样的运行时。Workers是一个封闭的服务器端生态系统，是为特定用途设计的。Bun可以用来构建一个更快的服务器端JS worker环境，其中的用例仅限于web开发或API。</p><p id="6132" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Bun也可以作为开发人员的构建工具。对大多数开发工作流挑战的本机支持使它非常适合Bun支持的操作系统。</p><h2 id="ea6f" class="ld le in bd lf lg lh dn li lj lk dp ll kl lm ln lo kp lp lq lr kt ls lt lu lv bi translated">我应该用面包吗？</h2><p id="1b7e" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Bun是新的，有一些很酷的功能。为此付出的巨大努力令人钦佩。这是JavaScript生态系统继续加速发展的又一个例子。仅仅因为这个原因，我会用面包做实验。在某些用例中，它将是最佳选择。然而；要确定Bun是否能够广泛支持许多JavaScript开发人员对运行时的期望，还有很多障碍。</p><p id="58a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您正在构建自己的无服务器/工作环境，或者如果您经常使用React，Bun可能是一个非常好的选择。</p><p id="e8b3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当决定Bun是否适合你时，你可能要考虑项目的长期可行性。这种范围的开源项目需要资源、时间，最终需要资金。Node.js在市场上有着稳固的立足点和可靠的支持，这需要大约十年的时间来建立。Deno已经在两轮融资中筹集了2600万美元，并在许多原始节点开发者(包括Ryan Dahl)的指导下运营。这些人在长达十年的旅程中学到了很多东西。Cloudflare的市值为168亿美元。很高兴看到Bun被JavaScript生态系统所接受，但是这个项目能够获得足够的支持，在一个拥挤的市场中作为一个开源项目保持可行性吗？是不是太小众了？不够小众？时间会证明一切，但Bun绝对值得关注。</p><h2 id="ba08" class="ld le in bd lf lg lh dn li lj lk dp ll kl lm ln lo kp lp lq lr kt ls lt lu lv bi translated">结论</h2><p id="bc0b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">我对Bun的工程努力印象深刻。然而；我看到它沿着Node.js走过的路，利用了许多可能很快就失宠的早期观点。</p><p id="734d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是一个非常年轻的项目，所以与其他项目相比，这本身就是一项成就。就我个人而言，我会用Bun进行实验，并留意适合我的开发的场景，但是在这些问题得到回答之前，我不打算用它构建任何实质性的东西。</p><p id="513a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">更新:2022年8月</strong></p><p id="e6aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Bun刚刚宣布了一家名为Oven的新公司，获得了700万美元的新资金。它得到了通常的嫌疑人的支持，包括像吉列尔莫·劳赫这样的人……他也支持德诺。我指出这一点是因为天使投资和风险投资似乎都在跳入JavaScript运行时领域。许多风险投资者会投资一个行业内的几个(有时是所有)竞争对手，以增加其中一个做大的机会。</p><p id="9365" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">也就是说，资金肯定有助于加快Bun的发展步伐。然而；正如尼古拉斯·c·扎卡斯<a class="ae jz" href="https://twitter.com/slicknet/status/1562916330113605633" rel="noopener ugc nofollow" target="_blank">指出的</a>，Bun还没有做任何新的或创新的事情，而Deno做了。</p><p id="19d4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="me">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="me">plain English . io</em></strong></a><em class="me">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="me">免费周报</em> </strong> </a> <em class="me">。关注我们关于</em> <a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="me">推特</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="me">领英</em></strong></a><strong class="kc io"><em class="me"/></strong><em class="me">和</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="me">不和</em> </strong> </a> <strong class="kc io"> <em class="me">。</em>T45】</strong></p></div></div>    
</body>
</html>