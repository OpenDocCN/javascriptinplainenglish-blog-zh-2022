<html>
<head>
<title>Interviewer: Can You Implement a JavaScript Template Engine? Me: Crap…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面试官:你能实现一个JavaScript模板引擎吗？我:废话……</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/interviewer-can-you-implement-a-javascript-template-engine-me-crap-fcd1dd6a3889?source=collection_archive---------0-----------------------#2022-11-24">https://javascript.plainenglish.io/interviewer-can-you-implement-a-javascript-template-engine-me-crap-fcd1dd6a3889?source=collection_archive---------0-----------------------#2022-11-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="89a9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">实现JavaScript模板引擎的3种方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/40943b73a29ba0177f49e5159713d927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HN2RqCCNRP_CvJt_"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@larm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Larm Rmah</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0241" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">朋友们，我相信即使你是一个有经验的开发者，也不一定能很快解决这个面试问题。如果你想挑战这种说法，请跟我一起读下去。</p><p id="75a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近，我的好朋友南希遇到了一个让她抓狂的问题。面试官让她现场实现一个JavaScript模板引擎。</p><p id="5e4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">令人难过的是，我的朋友刚开始找工作，但面试官让她去造一架飞机。</p><h1 id="40e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">问题信息</h1><p id="fe84" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">请向<code class="fe mp mq mr ms b">String</code>对象添加一个<code class="fe mp mq mr ms b">render(obj)</code>方法。其作用是将字符串中的特定字符替换为<code class="fe mp mq mr ms b">obj</code>的相应属性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="0187" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是模板引擎？</h1><p id="aab6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">你一定用过类似<a class="ae kv" href="https://mozilla.github.io/nunjucks/getting-started.html" rel="noopener ugc nofollow" target="_blank"> nunjucks </a>这样的模板引擎，问题很像它的功能。请跟着我举个例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="90b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我可怜的朋友被要求实现这样的东西，它只是用<code class="fe mp mq mr ms b">{{name}}</code>代替了<code class="fe mp mq mr ms b">${name}</code>，几乎没有其他东西。</p><h1 id="3946" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">解决方案1:正则表达式</h1><p id="db9b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">看到这个面试问题，我的第一反应是用正则表达式解决。只要能提取出字符串中的特定字符(<code class="fe mp mq mr ms b">name</code>、<code class="fe mp mq mr ms b">age</code>、<code class="fe mp mq mr ms b">job.name</code>)，问题就好解决了。</p><p id="70f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第一步:提取变量</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/83a449b3866f2f78b9753e9683d652a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/0*hp0ZiCMVO86IqASS.png"/></div></figure><p id="4fd7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太好了，我们得到了<code class="fe mp mq mr ms b">name</code>、<code class="fe mp mq mr ms b">age</code>、<code class="fe mp mq mr ms b">job.name</code>变量。我们来看看这个正则表达式是什么意思，可以<a class="ae kv" href="https://jex.im/regulex/#!flags=&amp;re=%5C%24%5C%7B(%5B%5E%24%7B%7D%5D%2B)%5C%7D" rel="noopener ugc nofollow" target="_blank">点击这里</a>查看。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b448" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们要把重点放在<code class="fe mp mq mr ms b">([^${}]+)</code>上，它是指除了<code class="fe mp mq mr ms b">$</code>、<code class="fe mp mq mr ms b">{</code>、<code class="fe mp mq mr ms b">}</code>之外的至少一个角色。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/75ff523d9e7bbbd8cc6c41809802449d.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/0*oe4WpexSV9C0MV2X.png"/></div></figure><p id="2640" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">第二步:获取obj </strong>的具体值</p><p id="eb1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们得到<code class="fe mp mq mr ms b">name</code>、<code class="fe mp mq mr ms b">age</code>、<code class="fe mp mq mr ms b">job.name</code>时，如何将其与<code class="fe mp mq mr ms b">employee</code>关联起来？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="e1d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我们通过正则表达式实现了一个简单的模板引擎，朋友们请为自己加油。</strong></p><h1 id="72d9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">解决方案2:评估</h1><p id="e7a2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">朋友们，我们来复习一下<code class="fe mp mq mr ms b">es6</code>中模板字符串的基本用法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="3e6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模板字符串非常有用，它们允许我们在字符串中嵌入表达式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/8ba5e1f847a199c64851b2dec7fc5702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/0*8BvubktAHk9njGPJ.png"/></div></figure><p id="e207" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">让我们再次学习如何使用eval】。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/2354f94f0558d9a59d433e9872601747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8VG8UKDMIUKNhw8O.png"/></div></div></figure><p id="1e66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很神奇，就好像我们声明了三个变量<code class="fe mp mq mr ms b">name</code>、<code class="fe mp mq mr ms b">age</code>、<code class="fe mp mq mr ms b">job</code>，可以随意打印出它们的值。</p><p id="c06d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这两个知识点，我们的第二个解决方案就有了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/dbe12df2f5252052060f866b1cad0b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vDTpAmYSobFjsVvZ.png"/></div></div></figure><p id="6a03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再给自己一点掌声，因为您已经用两种方式实现了一个lite模板引擎。</p><h1 id="0967" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.随着</h1><p id="b5bd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">虽然我们很少使用<code class="fe mp mq mr ms b">with</code>关键字，但是可以用来解决这个问题。</p><p id="fac4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这段代码的输出是什么？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/d31138c3918ae39524b3b3589e1c4095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vr98l6WWkDJbrIX0.png"/></div></div></figure><p id="aa90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这和上面的代码效果差不多，但是更简洁易懂。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="8924" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">嗯，我想你已经猜到答案了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="da17" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">最后</h1><p id="ca8f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><strong class="ky ir">感谢阅读。</strong>我期待<strong class="ky ir"> </strong>期待您的关注和阅读更多高质量的文章。</p><div class="nb nc gp gr nd ne"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-what-happened-to-npm-run-xxx-cdcb37dbaf44"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">采访者:“npm跑xxx”怎么了？</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">一个大多数人都不知道的秘密。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nn l"><div class="no l np nq nr nn ns kp ne"/></div></div></a></div><div class="nb nc gp gr nd ne"><a rel="noopener  ugc nofollow" target="_blank" href="/my-boss-you-dont-know-react-at-all-f493970f1807"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">我老板:你根本不知道反应！😠</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">你必须知道的React的3种错误用法。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nn l"><div class="nt l np nq nr nn ns kp ne"/></div></div></a></div><div class="nb nc gp gr nd ne"><a rel="noopener  ugc nofollow" target="_blank" href="/8-cool-github-tricks-to-make-you-look-like-a-senior-developer-ab8fe9ae9b14"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">让你看起来像高级开发人员的8个很酷的GitHub技巧</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">使用GitHub可以做的8件很酷的事情</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nn l"><div class="nu l np nq nr nn ns kp ne"/></div></div></a></div><div class="nb nc gp gr nd ne"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-can-x-x-return-true-in-javascript-7e1d1fa7b5cd"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">面试官:可以“x！== x "在JavaScript中返回True？</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">你可能不知道的五个神奇的JavaScript知识点！</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nn l"><div class="nv l np nq nr nn ns kp ne"/></div></div></a></div><div class="nb nc gp gr nd ne"><a rel="noopener  ugc nofollow" target="_blank" href="/what-does-123-tostring-length-123-print-out-in-javascript-2c804a414325"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">123['toString']。length + 123)用JavaScript打印出来？</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">95%的前端开发者回答错误的问题。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nn l"><div class="nw l np nq nr nn ns kp ne"/></div></div></a></div><p id="b86f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nx">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nx">plain English . io</em></strong></a><em class="nx">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nx">免费周报</em> </strong> </a> <em class="nx">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nx">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nx">LinkedIn</em></strong></a><em class="nx"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nx">YouTube</em></strong></a><em class="nx"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nx">不和</em> </strong> </a> <em class="nx">。对增长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nx">电路</em> </strong> </a> <em class="nx">。</em></p></div></div>    
</body>
</html>