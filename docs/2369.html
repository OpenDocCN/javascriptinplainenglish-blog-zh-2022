<html>
<head>
<title>How to Create a Download Button Using React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React创建下载按钮</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-download-files-on-button-click-reactjs-f7257e55a26b?source=collection_archive---------4-----------------------#2022-06-02">https://javascript.plainenglish.io/how-to-download-files-on-button-click-reactjs-f7257e55a26b?source=collection_archive---------4-----------------------#2022-06-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9a9f" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用React创建下载按钮的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/24a5f8e39a87c58bee9f3756e30157b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xqyPKaWSUKLDpS3l"/></div></div></figure><p id="3360" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当我在构建<a class="ae lk" href="https://thelearning.dev/100ideas.thelearning.dev" rel="noopener ugc nofollow" target="_blank"> 100创意</a>时，我想给用户一个选项，将他们的内容导出到一个文本文件中。这非常简单。这篇文章试图分享这些知识，并记录下来以备将来使用。假设您已经知道React的基本知识，让我们开始吧。</p><h2 id="a187" class="ll lm in bd ln lo lp dn lq lr ls dp lt kx lu lv lw lb lx ly lz lf ma mb mc md bi translated">创建按钮</h2><pre class="kd ke kf kg gt me mf mg mh aw mi bi"><span id="cb08" class="ll lm in mf b gy mj mk l ml mm">&lt;div className="btnDiv"&gt;<br/>     &lt;button id="downloadBtn" value="download"&gt;Download&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><h2 id="aa56" class="ll lm in bd ln lo lp dn lq lr ls dp lt kx lu lv lw lb lx ly lz lf ma mb mc md bi translated">添加事件处理程序</h2><pre class="kd ke kf kg gt me mf mg mh aw mi bi"><span id="5d0a" class="ll lm in mf b gy mj mk l ml mm">const downloadTxtFile = () =&gt; {<br/>    console.log("download logic goes here")<br/>}</span><span id="9d3d" class="ll lm in mf b gy mn mk l ml mm">&lt;div className="btnDiv"&gt;<br/>     &lt;button id="downloadBtn" onClick={downloadTxtFile} value="download"&gt;Download&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="6a76" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来，我们需要将一个事件处理程序挂接到按钮的<code class="fe mo mp mq mf b">onClick</code>事件。让我们这样做，看看是否一切正常。</p><h2 id="7a08" class="ll lm in bd ln lo lp dn lq lr ls dp lt kx lu lv lw lb lx ly lz lf ma mb mc md bi translated">添加下载逻辑</h2><p id="d594" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">要下载一个文件，我们需要四样东西。</p><ol class=""><li id="fe2e" class="mw mx in kq b kr ks ku kv kx my lb mz lf na lj nb nc nd ne bi translated">应该放入文件的内容</li><li id="fd44" class="mw mx in kq b kr nf ku ng kx nh lb ni lf nj lj nb nc nd ne bi translated">文件对象</li><li id="d609" class="mw mx in kq b kr nf ku ng kx nh lb ni lf nj lj nb nc nd ne bi translated">下载文件对象的链接</li><li id="0ee6" class="mw mx in kq b kr nf ku ng kx nh lb ni lf nj lj nb nc nd ne bi translated">最后，模拟用户点击链接</li></ol><pre class="kd ke kf kg gt me mf mg mh aw mi bi"><span id="4f20" class="ll lm in mf b gy mj mk l ml mm">const downloadTxtFile = () =&gt; {<br/>    // text content<br/>    const texts = ["line 1", "line 2", "line 3"]</span><span id="3c30" class="ll lm in mf b gy mn mk l ml mm">// file object<br/>    const file = new Blob(texts, {type: 'text/plain'});</span><span id="e176" class="ll lm in mf b gy mn mk l ml mm">// anchor link<br/>    const element = document.createElement("a");<br/>    element.href = URL.createObjectURL(file);<br/>    element.download = "100ideas-" + Date.now() + ".txt";</span><span id="7373" class="ll lm in mf b gy mn mk l ml mm">// simulate link click<br/>    document.body.appendChild(element); // Required for this to work in FireFox<br/>    element.click();<br/>}</span></pre><p id="5a19" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注释</strong></p><ol class=""><li id="b728" class="mw mx in kq b kr ks ku kv kx my lb mz lf na lj nb nc nd ne bi translated"><code class="fe mo mp mq mf b">Date.now()</code>是给文件下载添加时间戳</li><li id="848d" class="mw mx in kq b kr nf ku ng kx nh lb ni lf nj lj nb nc nd ne bi translated">文件blob不会自动给<code class="fe mo mp mq mf b">texts</code>添加新行。您可以使用<code class="fe mo mp mq mf b">[texts.join('\n')]</code>添加新行</li></ol></div><div class="ab cl nk nl hr nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ig ih ii ij ik"><p id="0351" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nr">原发布于</em><a class="ae lk" href="https://thelearning.dev/how-to-download-files-on-button-click-reactjs" rel="noopener ugc nofollow" target="_blank"><em class="nr">https://the learning . dev</em></a><em class="nr">。</em></p><p id="2436" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nr">更多内容请看</em> <a class="ae lk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">说白了就是</em> </strong> </a> <em class="nr">。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">免费每周简讯</em> </strong> </a> <em class="nr">。关注我们</em> <a class="ae lk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">推特</em> </strong> </a> <em class="nr">和</em><a class="ae lk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nr">LinkedIn</em></strong></a><em class="nr">。查看我们的</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">社区不和谐</em> </strong> </a> <em class="nr">加入我们的</em> <a class="ae lk" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">人才集体</em> </strong> </a> <em class="nr">。</em></p></div></div>    
</body>
</html>