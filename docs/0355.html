<html>
<head>
<title>Monorepo Setup with NPM and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用NPM和类型脚本的Monorepo设置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/monorepo-setup-with-npm-and-typescript-90b329ba7275?source=collection_archive---------0-----------------------#2022-01-21">https://javascript.plainenglish.io/monorepo-setup-with-npm-and-typescript-90b329ba7275?source=collection_archive---------0-----------------------#2022-01-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f96fa1f4a104871b188c61ba0ce0865a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*20feF-xGXfolSSne"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Safar Safarov</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="96eb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您是否曾经想要创建一个项目，但是使用本地包？能够从其他本地包中导入本地包？最好的部分是，有一个单一的node_modules目录？有一个<em class="ky">单个</em> <code class="fe kz la lb lc b">tsc</code>来重建改变后的包(但保持其他的不变)？作为一个不错的奖励，减少transpile和启动程序的时间？</p><blockquote class="ld"><p id="c4c9" class="le lf in bd lg lh li lj lk ll lm kx dk translated">解决办法就是用一个<code class="fe kz la lb lc b">monorepo</code>！本指南展示了使用NPM + TypeScript手动设置monorepo的步骤。</p></blockquote><h1 id="2163" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">目标</h1><ul class=""><li id="9871" class="ml mm in kc b kd mn kh mo kl mp kp mq kt mr kx ms mt mu mv bi translated">只有一个<code class="fe kz la lb lc b">node_modules</code>文件夹(在monorepo的根目录下)。</li><li id="ecd8" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">产品的每个部分(阅读:本地包)将有自己的文件夹，有自己的<code class="fe kz la lb lc b">package.json</code>、<code class="fe kz la lb lc b">tsconfig.json</code>，但使用monorepo的<code class="fe kz la lb lc b">node_modules</code>。</li><li id="bad6" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">在monorepo根传输中运行<code class="fe kz la lb lc b">tsc</code>,按顺序传输所有包。</li><li id="1be4" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">使用<code class="fe kz la lb lc b">import .. from</code>可以正确引用本地包。</li></ul><p id="8c17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">本指南未涉及:</strong>构建生产构建—本指南侧重于开发人员体验:)</p><h1 id="8439" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">TL；DR；—演示回购？</h1><p id="5a87" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">有，有demo <a class="ae jz" href="https://github.com/tomnil/monorepoplate" rel="noopener ugc nofollow" target="_blank">回购</a>。</p><h1 id="f440" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">Monorepo基础</h1><p id="8818" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">monorepo由两部分组成。</p><ul class=""><li id="d27d" class="ml mm in kc b kd ke kh ki kl nh kp ni kt nj kx ms mt mu mv bi translated">monorepo本身(包含配置文件的根文件夹，如<code class="fe kz la lb lc b">package.json</code>、<code class="fe kz la lb lc b">node_modules</code>、<code class="fe kz la lb lc b">tsconfig.json</code>等)</li><li id="ce7a" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">每个本地包一个文件夹，位于包文件夹中。每个本地包都有自己的配置，如<code class="fe kz la lb lc b">package.json</code>、<code class="fe kz la lb lc b">tsconfig.json</code>、<code class="fe kz la lb lc b">src</code>-文件夹等(但<strong class="kc io">没有</strong>、<code class="fe kz la lb lc b"><strong class="kc io">node_modules</strong></code>)。</li><li id="fc49" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">我建议在monorepo的根目录下设置一个<code class="fe kz la lb lc b">tsconfig.package.json</code>，参考一下。</li></ul><p id="66b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">..当然还有工具，<code class="fe kz la lb lc b">npm</code>和<code class="fe kz la lb lc b">tsc</code>🙂</p><h2 id="7c11" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">包裹？本地套餐？</h2><p id="01fe" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">这是一个旁注，但是开发者使用的“包”通常是指通过<code class="fe kz la lb lc b">npm</code>或<code class="fe kz la lb lc b">yarn</code>从互联网下载的包。本指南既指远程包(位于互联网上，可能是由你之外的其他人开发的)也指本地包。</p><h1 id="3a23" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">核心monorepo设置</h1><p id="bf12" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">让我们创建最基本的文件夹。这个演示项目将被命名为“SuzieQ”。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="cea9" class="nk lo in lc b gy oe of l og oh"># Create new empty folder</span><span id="cbf9" class="nk lo in lc b gy oi of l og oh">mkdir monorepodemo<br/>cd monorepodemo</span><span id="eacc" class="nk lo in lc b gy oi of l og oh"># Create subdirectories<br/>mkdir src</span></pre><h2 id="494e" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">。/package.json</h2><p id="ab5d" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">接下来，创建一个包含以下内容的<code class="fe kz la lb lc b">./package.json</code>:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="20d3" class="nk lo in lc b gy oe of l og oh">{<br/>  "name": "suzieq",<br/>  "private": true,<br/>  "scripts": {<br/>    "compile": "tsc -b -w -i",<br/>    "eslint": "eslint src/**/**.{ts,tsx}",<br/>    "eslint:fix": "eslint src/**/**.{ts,tsx} --fix"<br/>  },<br/>  "devDependencies": {},<br/><strong class="lc io">  "workspaces": [<br/>    "packages/*"<br/>  ]</strong><br/>}</span></pre><p id="40f3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️Make确信“工作区”一节是存在的，<code class="fe kz la lb lc b">npm</code>就依赖于此。</p><h2 id="a503" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">添加核心依赖项</h2><p id="5a82" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">这里是添加核心依赖项的好地方。这也创建了整个monorepo所需的单个<code class="fe kz la lb lc b">node_modules</code>目录。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="4687" class="nk lo in lc b gy oe of l og oh">npm install <a class="ae jz" href="http://twitter.com/types/node" rel="noopener ugc nofollow" target="_blank">@types/node</a> --save-dev<br/>npm install typescript<br/>npm install ts-node --save-dev</span></pre><h2 id="8834" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">。/tsconfig.json</h2><p id="08cd" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">接下来，用下面的内容创建一个<code class="fe kz la lb lc b">./tsconfig.json</code>。</p><p id="a9b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️️ <code class="fe kz la lb lc b">composite</code>必须设置为<code class="fe kz la lb lc b">true</code>并且<code class="fe kz la lb lc b">files</code>必须设置为数组(参见<a class="ae jz" href="https://www.typescriptlang.org/docs/handbook/project-references.html#overall-structure" rel="noopener ugc nofollow" target="_blank">https://www . typescriptlang . org/docs/handbook/project-references . html # overall-structure</a>)</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="71e5" class="nk lo in lc b gy oe of l og oh">{<br/>  "compilerOptions": {<br/>    "incremental": true,<br/>    "target": "es2019",<br/>    "module": "commonjs",<br/> <strong class="lc io">   "declaration": true,</strong><br/>    "sourceMap": true,<br/>    "strict": true,<br/>    "moduleResolution": "node",<br/>    "esModuleInterop": true,<br/>    "skipLibCheck": true,<br/>    "forceConsistentCasingInFileNames": true,<br/>   <strong class="lc io"> "rootDir": "./src",<br/>    "outDir": "./superbin"</strong><br/>  },<br/><strong class="lc io">  "files": [<br/>    "./src/index.ts"<br/>  ]</strong><br/>}</span></pre><h2 id="a3e1" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">。/src/索引. ts</h2><p id="a1a7" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">创建<code class="fe kz la lb lc b">./src/index.ts</code>文件:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="dd81" class="nk lo in lc b gy oe of l og oh">console.log("This is index.ts");<!-- --> </span></pre><p id="f6cd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">…并测试其工作情况:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="0ad9" class="nk lo in lc b gy oe of l og oh"># Build, this will create the "superbin" folder<br/>tsc -b  </span><span id="7879" class="nk lo in lc b gy oi of l og oh"># Run index.ts<br/>node -r ts-node/register/transpile-only src/index.ts</span></pre><h2 id="71fc" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">准备包文件夹</h2><p id="8b19" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">下一步是创建packages文件夹，所有本地包都将放在该文件夹中:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="368f" class="nk lo in lc b gy oe of l og oh">mkdir packages  # This folder should be found directly under "./"<br/>cd packages<!-- --> </span></pre><p id="964b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简单提醒一下:</p><ul class=""><li id="ea1f" class="ml mm in kc b kd ke kh ki kl nh kp ni kt nj kx ms mt mu mv bi translated">每个包将被放置在文件夹<code class="fe kz la lb lc b">/packages</code>的子文件夹中。</li><li id="129d" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">monorepo配置将存储在根目录下(即<code class="fe kz la lb lc b">"./"</code>)</li></ul><h1 id="5dd2" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">添加本地包</h1><p id="d8db" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">本指南展示了如何手动创建软件包所需的所有文件。也可以使用npm，见下文。这一部分可以根据需要重复多次。</p><p id="5aa3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将创建的包被命名为<code class="fe kz la lb lc b">ValidatorHelper</code>(只是为了挑选任何东西)。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="be3e" class="nk lo in lc b gy oe of l og oh"><em class="ky"># create package folder inside of "packages"<br/></em>mkdir ValidatorHelper<br/>cd ValidatorHelper</span></pre><h2 id="8b9e" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">。/packages/ <code class="fe kz la lb lc b">ValidatorHelper</code> /package.json</h2><p id="1424" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">在新创建的文件夹中，创建一个<code class="fe kz la lb lc b">package.json</code> as(这意味着您现在将有两个package.json，一个在monorepo根目录，另一个在这里):</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="7796" class="nk lo in lc b gy oe of l og oh">{<br/>  "name": "@suzieq/validatorhelper",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "bin/index.js",<br/>  "scripts": {<br/>    "compile": "tsc -b",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "author": "",<br/>  "license": "ISC"<br/>}</span></pre><p id="d6cc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️更改名称并<strong class="kc io">确保</strong> <strong class="kc io">名称是唯一的</strong>(并且它不能干扰npm可下载的包)。建议选择一个作用域名，比如“@suzieq”(它会让你的monorepos <code class="fe kz la lb lc b">node_modules</code>目录更干净，阅读下面的更多内容)。</p><p id="4327" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️不使用<em class="ky">相同的</em>“范围名称”和“项目目录名称”。<code class="fe kz la lb lc b">npm</code>将node_modules中的“优化”从目录名中移除作用域名称🙄</p><p id="5ab5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你喜欢减少控制，基本上同样的结果可以通过:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="0d44" class="nk lo in lc b gy oe of l og oh">cd /   # Go to root of monorepo<br/>npm init --scope=@suzieq -w ./packages/<!-- -->ValidatorHelper</span></pre><h2 id="3d56" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">节点模块的“破解”</h2><p id="f80e" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">这非常重要。<code class="fe kz la lb lc b">npm</code>将自动处理在“packages”下找到的任何<code class="fe kz la lb lc b">package.json</code>，并在<code class="fe kz la lb lc b">node_modules</code>与该文件夹之间创建一个链接。</p><figure class="nw nx ny nz gt jo gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/6a59c37cb7b1fbcad2cf7c29f14eb737.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*YbXDCkZMiI1TMvh6UaoWGQ.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">inside node_modules</figcaption></figure><figure class="nw nx ny nz gt jo gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/a464005082386d616415b252c30d7747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*KO2rrkKf5PUMa_5U3Bl90w.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">link to the packages\validatorhelper folder</figcaption></figure><p id="75c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，每次在<strong class="kc io">之后，</strong>一个本地包已经被创建(或者说，一个<code class="fe kz la lb lc b">package.json </code>已经被创建/修改)，然后转到monorepo根并运行<code class="fe kz la lb lc b">npm install</code>(并可选地检查<code class="fe kz la lb lc b">node_modules</code>以获得更新的链接)。</p><p id="f61d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️在包目录中做<em class="ky">而不是</em>运行<code class="fe kz la lb lc b">npm install</code>。<code class="fe kz la lb lc b">node_modules</code>从此被单一回购“拥有”，应该存在于单一回购的根本。以下是关于这个话题的更多信息。</p><h2 id="946b" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">。/packages/ <code class="fe kz la lb lc b">ValidatorHelper/</code> tsconfig.json</h2><p id="9efc" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">现在有很多例子说明这个文件扩展了一个已经存在的<code class="fe kz la lb lc b">tsconfig.json</code>。这很好，但是为了简单起见，这里没有使用这个特性。</p><p id="1887" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">必须指定<code class="fe kz la lb lc b">rootDir</code>、<code class="fe kz la lb lc b">outDir</code>和<code class="fe kz la lb lc b">composite</code>设置。</p><p id="fef8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该配置将使包使用包含的TypeScript定义将其结果构建到<code class="fe kz la lb lc b">./bin</code>。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="79f3" class="nk lo in lc b gy oe of l og oh">{<br/>    "compilerOptions": {<br/>        "incremental": true,<br/>        "target": "es2019",<br/>        "module": "commonjs",<br/>        "declaration": true,<br/>        "sourceMap": true,<br/>        "strict": true,<br/>        "moduleResolution": "node",<br/>        "esModuleInterop": true,<br/>        "skipLibCheck": true,<br/>        "forceConsistentCasingInFileNames": true,<br/><strong class="lc io">        "rootDir": "./src",<br/>        "outDir": "./bin",<br/>        "composite": true</strong><br/>    },<br/>}</span></pre><h2 id="4dee" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">。/packages/ <code class="fe kz la lb lc b">ValidatorHelper/src/</code> index.ts</h2><p id="6c4f" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">最后，创建文件夹<code class="fe kz la lb lc b">src</code>和<code class="fe kz la lb lc b">index.ts</code>文件。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="2fc1" class="nk lo in lc b gy oe of l og oh">console.log("Debug: Loading ValidateHelper/index");</span><span id="3f55" class="nk lo in lc b gy oi of l og oh">export function ValidateUserName(name: string): boolean {<br/>    return (name !== undefined &amp;&amp; name.length &gt; 10);<br/>}</span></pre><h2 id="a794" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">验证包装是否正常</h2><p id="2f2c" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">在这一点上，可以检查一切看起来都正常。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="d175" class="nk lo in lc b gy oe of l og oh"># Change working directory<br/>cd /packages/<!-- -->ValidatorHelper</span><span id="8367" class="nk lo in lc b gy oi of l og oh"># Examine the combined tsconfig-file (this and the root one)<br/>tsc --showconfig</span><span id="6b38" class="nk lo in lc b gy oi of l og oh"># Testrun the module (as-is)<br/>node -r ts-node/register src/index.ts</span></pre><p id="f768" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里运行<code class="fe kz la lb lc b">tsc</code>应该是transpile没有错误，产生一个<code class="fe kz la lb lc b">bin</code>文件夹，包含两个文件:<code class="fe kz la lb lc b">index.js</code>和<code class="fe kz la lb lc b">types.d.ts</code>。</p><p id="e5f7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果在monorepo根目录下运行<code class="fe kz la lb lc b">tsc</code>，将会生成相同的文件。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="9972" class="nk lo in lc b gy oe of l og oh"># Just check tsc succeeds without creating "bin" folder:<br/>tsc --noEmit</span><span id="38ed" class="nk lo in lc b gy oi of l og oh"># Build (choose the one you prefer)<br/>tsc -b --listEmittedFiles --diagnostics<br/>tsc -b -v<!-- --> </span><span id="c7ae" class="nk lo in lc b gy oi of l og oh"># Test run<br/>node bin\index.js</span></pre><h1 id="cc9c" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">重复:)</h1><p id="5106" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">在进入下一节之前，再添加一些任何类型的本地包。</p><h1 id="fa24" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">使用tsc传输所有修改过的包(以特定的顺序)</h1><p id="8785" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">现在，这就是有趣的地方😁通过在顶层发出<code class="fe kz la lb lc b">tsc</code>，可以贯穿<em class="ky">所有</em>修改过的包并进行编译。这在手表模式下运行<code class="fe kz la lb lc b">tsc</code>时特别有效。但是为了做到这一点，需要修改<code class="fe kz la lb lc b">tsconfig.json</code>来列出包。</p><p id="b79e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开monorepo根<code class="fe kz la lb lc b">./tsconfig.json</code>并添加如下图所示的<code class="fe kz la lb lc b">references</code>部分。</p><p id="866b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️将按照列出的顺序构建，所以这意味着你必须对包之间的依赖有所了解。</p><p id="aa32" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">️️⚠️If的<code class="fe kz la lb lc b">files</code>配置丢失(或者设置错误)，那么您的类型脚本文件可以构建两次<strong class="kc io">😟导致你的软件包src文件夹中出现“垃圾”文件。解决这一问题的良好开端是将<code class="fe kz la lb lc b">files</code>设置为<code class="fe kz la lb lc b">[]</code>。</strong></p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="6f9e" class="nk lo in lc b gy oe of l og oh">{<br/>  "compilerOptions": {<br/>      // leave as-is<br/>  },<br/>  <strong class="lc io">"references": [<br/>    {<br/>      "path": "./packages/ValidatorHelper"<br/>    }<br/>  ],<br/>  "files": [<br/>    "./src/index.ts"<br/>  ]<br/></strong>}</span></pre><p id="77bd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">试试看:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="98ac" class="nk lo in lc b gy oe of l og oh"># Transpiles packages in the order listed *and*<br/># then build the files referenced by "paths"</span><span id="67c9" class="nk lo in lc b gy oi of l og oh">cd /  # Go to root of monorepo<br/>tsc -b -v</span></pre><h2 id="abf0" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">在这点上…</h2><p id="f0d5" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">此时，每个本地包将具有:</p><ul class=""><li id="5dca" class="ml mm in kc b kd ke kh ki kl nh kp ni kt nj kx ms mt mu mv bi translated">制作一个<code class="fe kz la lb lc b">./packages/&lt;packagename&gt;/bin</code>文件夹</li><li id="bec7" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">作为从<code class="fe kz la lb lc b">node_modules/@scopename/&lt;packagename&gt;</code>到<code class="fe kz la lb lc b">./packages/&lt;packagename&gt;</code>的链接而存在</li></ul><h1 id="1c5d" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">NPM包:在本地包之间添加引用</h1><p id="3d9b" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">我们可以利用TypeScript/JavaScript作品中模块解析的一个漏洞。😁如果你喜欢用“真实的方式”来做这件事，请阅读下一节。</p><p id="318c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们所有的本地包都可以立即使用，不需要对任何文件做任何更改(想了解更多吗？阅读此<a class="ae jz" href="https://www.typescriptlang.org/docs/handbook/module-resolution.html" rel="noopener ugc nofollow" target="_blank">链接</a>。只需打开<code class="fe kz la lb lc b">./src/index.ts</code>并添加这个，你就可以开始了。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="6e43" class="nk lo in lc b gy oe of l og oh">import ValidatorHelper from '@<!-- -->suzieq<!-- -->/validatorhelper'</span></pre><h2 id="7a78" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">添加更好的参考</h2><p id="8b12" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">打开一个<code class="fe kz la lb lc b">package.json</code>，用下面的代码添加一个对本地(已经存在)包的引用。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="4c13" class="nk lo in lc b gy oe of l og oh">"dependencies": {<br/>    "<a class="ae jz" href="http://twitter.com/suzieq/products" rel="noopener ugc nofollow" target="_blank">@suzieq/products</a>": "*"<br/>}</span></pre><p id="33b0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe kz la lb lc b">*</code>意味着我们允许任何版本。</p><h2 id="1316" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">避免文件引用？</h2><p id="b47e" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">因此<code class="fe kz la lb lc b">npm</code>建议使用文件引用:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="70d4" class="nk lo in lc b gy oe of l og oh">npm install .\packages\&lt;packagename&gt; -w packages\&lt;packagename&gt;</span></pre><p id="ec40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个命令将在<code class="fe kz la lb lc b">package.json</code>中给出类似这样的结果，但它并没有带来任何好处。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="faaf" class="nk lo in lc b gy oe of l og oh">"dependencies": {<br/>        "<a class="ae jz" href="http://twitter.com/suzieq/products" rel="noopener ugc nofollow" target="_blank">@suzieq/products</a>": "file:packages/Products"<br/>}</span></pre><h1 id="37fc" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">npm软件包:将外部NPM软件包添加到本地软件包</h1><p id="7d0b" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">这很重要，因为这和通常的做法不同。要将外部npm软件包添加到本地npm软件包，必须遵循以下步骤:</p><p id="8b97" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">转到monorepo的根目录，运行<code class="fe kz la lb lc b">npm</code>通过传递<code class="fe kz la lb lc b">-w</code>参数在工作区安装一个包<strong class="kc io">。该参数接受包的名称(在本例中为<code class="fe kz la lb lc b">@suzieq/validatorhelper)</code>)或路径(<code class="fe kz la lb lc b">./packages/ValidatorHelper</code>)</strong></p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="3401" class="nk lo in lc b gy oe of l og oh"># Go to the root of the monorepo<br/>cd /</span><span id="f52b" class="nk lo in lc b gy oi of l og oh"># Add axios to ValidatorHelper<br/>npm install axios -w @suzieq/validatorhelper</span><span id="cf5f" class="nk lo in lc b gy oi of l og oh"># Or use the path<br/>npm install axios -w .\packages\ValidatorHelper</span></pre><p id="6fb7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将在monorepos <code class="fe kz la lb lc b">node_modules</code>中安装<code class="fe kz la lb lc b">axios</code>，并修改<code class="fe kz la lb lc b">./packages/ValidatorHelper/packages.json</code>。通过检查monorepo根目录下是否只存在一个<code class="fe kz la lb lc b">node_modules</code>文件夹来验证成功。</p><p id="4e98" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️:非常明确地说，<strong class="kc io">不要这样做</strong>(如果你设法做到了，请参见下面的故障排除解决方法):</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="bb4a" class="nk lo in lc b gy oe of l og oh">cd packages\ValidatorHelper<br/>npm install axios</span></pre><h2 id="9a96" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">在正确的地方引用？</h2><p id="821e" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">下载包的引用存储在monorepo <code class="fe kz la lb lc b">package.json</code>中与拥有它<code class="fe kz la lb lc b">packages\packagename\package.json</code>真的有关系吗？不，反正有用。</p><h1 id="9b88" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">开始测试一个特定的或所有的包</h1><p id="d7eb" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">要为所有包启动一个<code class="fe kz la lb lc b">npm</code>命令，只需添加<code class="fe kz la lb lc b">-ws</code>:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="cd23" class="nk lo in lc b gy oe of l og oh"># Run tests for a specific package from root<br/>npm test -w @<!-- -->suzieq<!-- -->/validatorhelper</span><span id="3210" class="nk lo in lc b gy oi of l og oh"># Run tests for all local packages<br/>npm test -ws</span></pre><h1 id="7ce3" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">为一个特定或所有程序包启动tsc</h1><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="6014" class="nk lo in lc b gy oe of l og oh"># Build a specific package from root<br/>cd /<br/>tsc -b packages\ValidatorHelper</span><span id="73be" class="nk lo in lc b gy oi of l og oh"># Build all<br/>cd /<br/>tsc -b -v -w -i</span></pre><h1 id="f50f" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">解决纷争</h1><h2 id="5d77" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">正在修复…</h2><p id="ef1f" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">如果你已经陷入了一个似乎没有任何帮助的境地，通过以下步骤来修复你的设置:</p><ul class=""><li id="023b" class="ml mm in kc b kd ke kh ki kl nh kp ni kt nj kx ms mt mu mv bi translated">删除<code class="fe kz la lb lc b">node_modules\@scopename\</code>中的链接(不需要删除整个<code class="fe kz la lb lc b">node_modules</code>)。运行<code class="fe kz la lb lc b">npm install</code>重新创建它们。</li><li id="ac3f" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">删除在整个系统中找到的任何<code class="fe kz la lb lc b">bin</code>或<code class="fe kz la lb lc b">out</code>文件夹</li><li id="8613" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">验证所有包装<code class="fe kz la lb lc b">package.json</code> :s是否正常</li><li id="2837" class="ml mm in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">停止所有正在运行的<code class="fe kz la lb lc b">tsc</code> :s，删除<em class="ky">所有</em> <code class="fe kz la lb lc b">tsconfig.tsbuildinfo</code>文件，重新启动<code class="fe kz la lb lc b">tsc</code> <em class="ky">，不增加标志</em></li></ul><h2 id="a176" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">VSCode和/或TypeScript没有检测到/看到本地包？</h2><p id="b5cb" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">重启<code class="fe kz la lb lc b">vscode</code>:)同时，确保<code class="fe kz la lb lc b">outDir</code>设置<code class="fe kz la lb lc b">tsconfig.json</code>与<code class="fe kz la lb lc b">package.json</code>中的<code class="fe kz la lb lc b">main</code>设置相匹配</p><figure class="nw nx ny nz gt jo gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/4ff53499bd24bc73f2ce1394f8a8df27.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*nhl_hBOcpB9e-bLTcoRxHA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">tsconfig.json</figcaption></figure><figure class="nw nx ny nz gt jo gh gi paragraph-image"><div class="gh gi om"><img src="../Images/e690409d439cf7208888c6f8f6e1f680.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*sR-_30JzDFpJDEVnMSZDoA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">package.json</figcaption></figure><h2 id="eac1" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">节点_模块</h2><p id="cd98" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">问:我已经在一个本地包中运行了<code class="fe kz la lb lc b">npm install packagename</code>，并且(错误地)创建了<code class="fe kz la lb lc b">packages\packagename\node_modules</code>。</p><p id="7164" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">答:只需删除<code class="fe kz la lb lc b">node_modules</code>文件夹，然后重试从monorepo根目录安装软件包。</p><h2 id="3fe4" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">找不到工作区</h2><p id="a727" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">问:我不能跑<code class="fe kz la lb lc b">npm install axios --workspace=@xyz/abc</code></p><p id="10ca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">解决方案1: <br/> </strong>该部分在monorepo <code class="fe kz la lb lc b">package.json</code>中缺失:</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="4370" class="nk lo in lc b gy oe of l og oh">  "workspaces": [<br/>    "packages/*"<br/>  ]</span></pre><p id="e888" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">解决方案二:</strong> <br/>你实际上拼对名字了吗？:)</p><p id="d6b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">a)如果您选择使用包的路径，请确保它存在。Eg测试<code class="fe kz la lb lc b">dir ./thepath</code></p><p id="15c5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">b)如果你选择使用包的<em class="ky">名</em>(如包<code class="fe kz la lb lc b">package.json</code>中所述)，确保你完全复制它(包括斜线)。</p><figure class="nw nx ny nz gt jo gh gi paragraph-image"><div class="gh gi on"><img src="../Images/4db04a1d46b7cf275de09cf437ad680e.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*4qw-u8YgO6KEmoPnDB_WAw.png"/></div></figure><p id="f1d0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">c)<code class="fe kz la lb lc b">outDir</code>设置<code class="fe kz la lb lc b">tsconfig.json</code>是否与<code class="fe kz la lb lc b">package.json</code>中的<code class="fe kz la lb lc b">main</code>设置相匹配？</p><h2 id="5257" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">EDUPLICATEWORKSPACE</h2><p id="dd1b" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">问:试图和NPM一起工作，我得到了重复的工作空间</p><p id="696e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">答:<code class="fe kz la lb lc b">name</code>字段的值在<code class="fe kz la lb lc b">packages</code>的一个子目录中的一个<code class="fe kz la lb lc b">package.json</code>中被多次使用。NPM将列出冲突的文件，只要确保所有本地包有唯一的名字。</p><h2 id="8572" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">npm警告工作区abc/xyz筛选器集，但不存在工作区文件夹</h2><p id="90f4" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">问:我不能跑<code class="fe kz la lb lc b">npm install axios --workspace=@suzieq/apple</code></p><p id="2926" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">答:所以工作区设置看起来没问题，但是没有找到提交的工作区名称。确保<code class="fe kz la lb lc b">--workspace</code>的名称参数可以在<code class="fe kz la lb lc b">package.json</code>s<code class="fe kz la lb lc b">name</code>字段中找到；</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="4bc4" class="nk lo in lc b gy oe of l og oh">"name": "@<!-- -->suzieq/xyz<!-- -->"</span></pre><h2 id="5385" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">无法设置null的属性(设置“dev”)</h2><p id="0bbb" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">这个错误可能是由几个原因造成的。</p><p id="65ef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">解决方案一:<br/> </strong>从删除<code class="fe kz la lb lc b">node_modules\@suzieq</code>中的所有文件开始。要重新创建内容，只需运行<code class="fe kz la lb lc b">npm install</code>。</p><p id="92a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">验证文件夹<code class="fe kz la lb lc b">node_modules\@suzieq</code>创建无误。</p><p id="ce8f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">解决方案二:<br/> </strong>答:在apple-package:s文件夹内，打开<code class="fe kz la lb lc b">package.json</code>。<code class="fe kz la lb lc b">devDependencies</code>或<code class="fe kz la lb lc b">dependencies</code>损坏。</p><p id="e1e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">解决方案三:<br/> </strong>确保package.json文件中的所有“name”属性都有唯一的名称。</p><h2 id="6292" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">使用tsc时，它会产生。我的src文件夹中的js文件</h2><p id="59f6" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated"><code class="fe kz la lb lc b">tsconfig.json</code>中缺少文件部分。见上文。</p><pre class="nw nx ny nz gt oa lc ob oc aw od bi"><span id="0e4d" class="nk lo in lc b gy oe of l og oh">"files": [<br/>    "./src/index.ts"<br/>]</span></pre><h1 id="ba27" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">演示存储库？</h1><p id="4460" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl ne kn ko kp nf kr ks kt ng kv kw kx ig bi translated">是的，有一个。参见<a class="ae jz" href="https://github.com/tomnil/monorepoplate" rel="noopener ugc nofollow" target="_blank">https://github.com/tomnil/monorepoplate</a></p><h1 id="6c86" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">享受:)</h1></div><div class="ab cl oo op hr oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ig ih ii ij ik"><h2 id="5bae" class="nk lo in bd lp nl nm dn lt nn no dp lx kl np nq mb kp nr ns mf kt nt nu mj nv bi translated">进一步阅读</h2><div class="ov ow gp gr ox oy"><a href="https://bit.cloud/blog/painless-monorepo-dependency-management-with-bit-l4f9fzyw" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd io gy z fp pd fr fs pe fu fw im bi translated">使用Bit进行无痛monorepo依赖管理</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">简化monorepo中的依赖关系管理，以避免虚拟依赖关系和版本问题。了解…</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">比特云</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm jt oy"/></div></div></a></div><p id="262b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">plain English . io</em></strong></a><em class="ky">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">免费周报</em> </strong> </a> <em class="ky">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">LinkedIn</em></strong></a><strong class="kc io"><em class="ky"/></strong><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">YouTube</em></strong></a><strong class="kc io"><em class="ky">，以及</em></strong><em class="ky"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">不和</em> </strong> </a>  <em class="ky">对成长黑客感兴趣？检查</em> <a class="ae jz" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">电路</em> </strong> </a> <strong class="kc io"> <em class="ky">。</em> </strong></p></div></div>    
</body>
</html>