<html>
<head>
<title>How To Create Modals in React with React Portal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React门户中创建模型</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-modals-with-react-portal-40829c33a626?source=collection_archive---------1-----------------------#2022-12-04">https://javascript.plainenglish.io/creating-modals-with-react-portal-40829c33a626?source=collection_archive---------1-----------------------#2022-12-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/87b9b08046a3216c7837a04a235e4c43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HNt7s3uG0jRoIn9R.jpg"/></div></div></figure><p id="4bd6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我猜你是一名web开发人员，在意识到使用vanilla JS中的传统方法后，你一直在寻求如何在react应用程序上创建模态，在react中，你只需切换模态的可见性属性以在屏幕上显示和删除它，这不是100%有效的。</p><h2 id="1525" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">为什么？</h2><p id="9993" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">这是因为react默认挂载其<em class="lr">index.html</em>文件的根元素中的每个元素。</p><p id="e2ea" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你一定不可避免地在每个react项目的【index.html】文件中遇到过它，用黄色突出显示，如下所示:</p><figure class="lt lu lv lw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ls"><img src="../Images/9b65e6be4697744994567db2cf7a89d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gvIulIjpKFURx53d7E5TZQ.png"/></div></div></figure><p id="32ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此很难在这个层次之外呈现子元素。</p><h2 id="cbbc" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">解决办法</h2><p id="701a" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">react portal的引入打破了这种层次结构，它允许在不在根元素下的dom节点上呈现组件，从而彻底改变了游戏规则。</p><h2 id="34ee" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">它是如何工作的？</h2><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="e00e" class="mc ku in ly b be md me l mf mg">ReactDOM.createPortal(child, container)<br/></span></pre><p id="93d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">React门户通过函数<em class="lr"> createPortal </em>用ReactDOM创建，该函数有两个参数，其中:</p><ul class=""><li id="3e4a" class="mh mi in jx b jy jz kc kd kg mj kk mk ko ml ks mm mn mo mp bi translated">child表示要生成的元素(在本例中是我们的模态元素)</li><li id="37f6" class="mh mi in jx b jy mq kc mr kg ms kk mt ko mu ks mm mn mo mp bi translated">container表示将在其中生成上述元素的容器</li></ul><p id="9017" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了更好地理解它，让我们构建下面的简单模型:</p><figure class="lt lu lv lw gt jo gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/beb4454b5fc3d2ba777f40ca6a302dc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/1*_AKOGF1Tfx4RQJEHPF-5OQ.gif"/></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">Gif of what we’re going to build</figcaption></figure><h2 id="a9e9" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">应用</h2><h2 id="6b92" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">首先，让我们初始化我们的react应用程序:</h2><p id="c47a" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">要初始化我们的react应用程序，让我们在您的终端上使用以下命令:</p><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="49e6" class="mc ku in ly b be md me l mf mg">npm create vite@latest</span></pre><p id="3ca2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，使用箭头键按照提示进行操作，并选择react:</p><figure class="lt lu lv lw gt jo gh gi paragraph-image"><div class="gh gi na"><img src="../Images/0845ad4eac58f5e46ac94a3656647ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*lJlq4d0XKylS8xw0yaJDRA.png"/></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">Choosing the type of project with vite</figcaption></figure><p id="96a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可能已经注意到了vite的用法，不熟悉也不用担心。它有助于更快地构建react应用程序，但这是另一个故事。</p><h2 id="a5f7" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">2)创建背景和模态组件</h2><p id="ca6b" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">在你的项目的根目录<em class="lr"> src </em>文件夹下，创建一个文件夹并给它命名为<em class="lr"> Components。</em></p><p id="4266" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将继续创建两个文件:</p><ul class=""><li id="c9f7" class="mh mi in jx b jy jz kc kd kg mj kk mk ko ml ks mm mn mo mp bi translated">背景:我们模型后面的黑色透明背景。</li></ul><p id="e077" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">复制并粘贴以下代码:</p><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="09e7" class="mc ku in ly b be md me l mf mg">import React from 'react';<br/>import ReactDOM from "react-dom";<br/>import '../App.css'<br/><br/><br/>export default function Backdrop({children, closeModal}) {<br/>    return ReactDOM.createPortal(<br/>        &lt;div className='backdrop' onClick={closeModal}&gt;<br/>            {children}<br/>        &lt;/div&gt;,<br/>        document.getElementById('portal')<br/>      )<br/>}</span></pre><ul class=""><li id="1e24" class="mh mi in jx b jy jz kc kd kg mj kk mk ko ml ks mm mn mo mp bi translated">模态:模态本身。</li></ul><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="40c6" class="mc ku in ly b be md me l mf mg">import React from 'react'<br/>import Backdrop from './Backdrop'<br/>import '../App.css'<br/><br/>function modal({closeModal}) {<br/>  return (<br/>    &lt;Backdrop closeModal={closeModal}&gt;<br/>        &lt;div className='modal' onClick={(e) =&gt; e.stopPropagation()}&gt;<br/>            &lt;h3&gt;Modal&lt;/h3&gt;<br/>            &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nobis ullam inventore temporibus commodi sapiente, molestiae voluptates facere repellat nisi laudantium dolorum minima! Magnam corrupti soluta totam incidunt nesciunt quisquam libero.&lt;/p&gt;<br/>            &lt;button style={{color: 'white', background: 'black', outline: 'none'}} onClick={closeModal}&gt;Close&lt;/button&gt;<br/>        &lt;/div&gt;<br/>    &lt;/Backdrop&gt;<br/>  )<br/>}<br/><br/>export default modal</span></pre><h2 id="78b6" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">3)创建div，我们的模态将在其中生成</h2><p id="0a58" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">在你的文件夹的根目录下，找到<em class="lr">index.html</em>文件和下面的html标签:</p><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="04cb" class="mc ku in ly b be md me l nb mg">&lt;div id="portal"&gt;&lt;/div&gt;</span></pre><p id="43fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它应该如下所示:</p><figure class="lt lu lv lw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/3d2a4d9371a7917b6fbcf7d5a09e4a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-53V-GrAz6DBpYAvdpiSpQ.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">Adding the div where our portal will spawn</figcaption></figure><h2 id="d249" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">4)把它全部带到together✍️</h2><p id="77fc" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">最后，在我们的<em class="lr"> App.jsx </em>文件中，复制并粘贴以下代码:</p><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="8d66" class="mc ku in ly b be md me l mf mg">import { useState } from 'react'<br/>import Modal from './Components/Modal'<br/>import './App.css'<br/><br/>function App() {<br/>  //State to open and close modal<br/>  const [modalOpen, setModalOpen] = useState(false)<br/><br/>  //Function to toggle state for opening and closing modal<br/>  const handleModal = () =&gt; {<br/>    setModalOpen(!modalOpen)<br/>  }<br/><br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;h1&gt;Modal Tutorial with React Portals 🚀&lt;/h1&gt;<br/>      &lt;button onClick={handleModal} style={{background: '#FF9300', fontWeight: '600', outline: 'none'}}&gt;Open Modal&lt;/button&gt;<br/>      {modalOpen &amp;&amp; &lt;Modal closeModal={() =&gt; setModalOpen(false)}&gt;&lt;/Modal&gt;}<br/>    &lt;/div&gt;<br/>  )<br/>}<br/><br/>export default App</span></pre><p id="c94d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意，样式完全取决于您，但是出于本教程的考虑，我们将使用下面的代码片段。</p><p id="4366" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，将以下代码复制并粘贴到您的App.css文件中，以完成这项工作。</p><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="a595" class="mc ku in ly b be md me l nb mg">.App{<br/>  width: 100vw;<br/>  height: 100vh;<br/>  display: flex;<br/>  flex-direction: column;<br/>  justify-content: center;<br/>  align-items: center;<br/>  background-color: #101315;<br/>}<br/><br/>.backdrop{<br/>  position: absolute;<br/>  top: 0;<br/>  left: 0;<br/>  width: 100%;<br/>  height: 100%;<br/>  background: #000000e1;<br/>  display: flex;<br/>  justify-content: center;<br/>  align-items: center;<br/>}<br/><br/>.modal{<br/>  width: clamp(50%, 700px, 90%);<br/>  height: min(50%, 300px);<br/>  display: flex;<br/>  flex-direction: column;<br/>  align-items: center;<br/>  padding: 0 1.5rem;<br/>  font-size: 1.2rem;<br/>  border-radius: 1rem;<br/>  background-color: #FF9300;<br/>  margin: auto;<br/>}</span></pre></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="2166" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就是这样！我们已经按照承诺使用<strong class="jx io"> react portal </strong>构建了我们的模型。你现在可以在你的网站上添加这个功能，让它们看起来更真实。</p><p id="0fe2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你有任何问题，请随时查看我的推特。我很乐意消除任何疑问。</p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="39e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你玩得开心，别忘了留下掌声并分享这篇文章。；-)</p><figure class="lt lu lv lw gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/2d8c608618a895464b582d5b7bb13e27.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*IJFarRNqR_mRqtPA"/></div></figure><p id="6a27" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr">更多内容请看</em><a class="ae nk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lr">plain English . io</em></strong></a><em class="lr">。报名参加我们的</em> <a class="ae nk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lr">免费周报</em> </strong> </a> <em class="lr">。关注我们关于</em><a class="ae nk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lr">Twitter</em></strong></a><a class="ae nk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lr">LinkedIn</em></strong></a><em class="lr"/><a class="ae nk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lr">YouTube</em></strong></a><em class="lr"/><a class="ae nk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lr">不和</em> </strong> </a> <strong class="jx io"> <em class="lr">。</em>T49】</strong></p><p id="9408" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="lr">对缩放您的软件启动感兴趣</em> </strong> <em class="lr">？检查</em> <a class="ae nk" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lr">电路</em> </strong> </a> <em class="lr">。</em></p></div></div>    
</body>
</html>