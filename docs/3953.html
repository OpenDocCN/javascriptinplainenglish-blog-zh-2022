<html>
<head>
<title>How to Get the Value of a Form Input on Submit in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中获取表单提交时输入的值</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-get-form-input-value-on-submit-28e31411761b?source=collection_archive---------13-----------------------#2022-10-12">https://javascript.plainenglish.io/react-get-form-input-value-on-submit-28e31411761b?source=collection_archive---------13-----------------------#2022-10-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/31cb7b99cf8ca39c3cfff7239f68f210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WUKjcRFCQiXQPCk0FQDxqA.png"/></div></div></figure><p id="af05" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要在提交时获取表单输入的值:</p><ol class=""><li id="5ff2" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">创建一个状态变量来存储输入的值。</li><li id="1384" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">在输入上设置一个<code class="fe lh li lj lk b">onChange</code>事件处理程序，以便在输入值改变时更新状态变量。</li><li id="4e02" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">在<code class="fe lh li lj lk b">form</code>元素上设置一个<code class="fe lh li lj lk b">onSubmit</code>事件处理程序。</li><li id="bdac" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">在<code class="fe lh li lj lk b">onSubmit</code>事件处理程序中访问输入字段的值。</li></ol><p id="9fce" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如:</p><p id="971f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lh li lj lk b">App.js</code></p><pre class="ll lm ln lo gt lp lk lq lr aw ls bi"><span id="6e83" class="lt lu in lk b gy lv lw l lx ly">import { useState } from 'react';</span><span id="970b" class="lt lu in lk b gy lz lw l lx ly">export default function App() {<br/>  const [firstName, setFirstName] = useState('');<br/>  const [lastName, setLastName] = useState('');<br/>  const [message, setMessage] = useState('');</span><span id="2543" class="lt lu in lk b gy lz lw l lx ly">  const handleSubmit = (event) =&gt; {<br/>    event.preventDefault();</span><span id="7522" class="lt lu in lk b gy lz lw l lx ly">    setMessage(`Hello ${firstName} ${lastName}!`);<br/>    setFirstName('');<br/>    setLastName('');<br/>  };</span><span id="1fba" class="lt lu in lk b gy lz lw l lx ly">  return (<br/>    &lt;form onSubmit={handleSubmit}&gt;<br/>      &lt;input<br/>        type="text"<br/>        id="firstName"<br/>        name="firstName"<br/>        value={firstName}<br/>        placeholder="First Name"<br/>        onChange={(event) =&gt;<br/>          setFirstName(event.target.value)<br/>        }<br/>      /&gt;</span><span id="4d0c" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="57bc" class="lt lu in lk b gy lz lw l lx ly">      &lt;input<br/>        type="text"<br/>        id="lastName"<br/>        name="lastName"<br/>        value={lastName}<br/>        placeholder="Last Name"<br/>        onChange={(event) =&gt; {<br/>          setLastName(event.target.value);<br/>        }}<br/>      /&gt;</span><span id="0373" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="5253" class="lt lu in lk b gy lz lw l lx ly">      &lt;button type="submit"&gt;Submit&lt;/button&gt;</span><span id="9478" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="8ce9" class="lt lu in lk b gy lz lw l lx ly">      &lt;h2&gt;{message}&lt;/h2&gt;<br/>    &lt;/form&gt;<br/>  );<br/>}</span></pre><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/77d2bd7a80bbe541fe7d2fe87bc2e1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/0*Dwc0KpdOJy8sn5ji.gif"/></div></figure><p id="a5de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用<code class="fe lh li lj lk b">useState()</code>钩子，我们创建一个状态变量来存储每个输入字段的当前值。我们还创建了另一个状态变量(<code class="fe lh li lj lk b">message</code>)，它将在用户提交表单后用输入字段的值进行更新。</p><p id="17ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在每个输入字段上设置了一个内联的<code class="fe lh li lj lk b">onChange</code>事件处理程序，以便每当输入字段发生变化时调用该处理程序。在每个处理程序中，我们使用处理程序接收的<code class="fe lh li lj lk b">Event</code>对象的<code class="fe lh li lj lk b">target</code>属性来访问<code class="fe lh li lj lk b">input</code>元素对象。该对象的<code class="fe lh li lj lk b">value</code>属性包含输入值，因此我们将其传递给状态更新函数来更新该特定输入的值。</p><p id="0c3b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">表单中的<code class="fe lh li lj lk b">button</code>元素有一个<code class="fe lh li lj lk b">submit</code>的<code class="fe lh li lj lk b">type</code>，所以每次用户点击它，都会触发提交事件。我们在表单上设置了一个<code class="fe lh li lj lk b">onSubmit</code>事件处理程序来监听这个事件。在这个处理程序中，我们在<code class="fe lh li lj lk b">Event</code>对象上调用<code class="fe lh li lj lk b">preventDefault()</code>，以防止表单提交时页面刷新。</p><p id="6ccb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了在表单提交后获取事件处理程序中的输入值，我们只需访问<code class="fe lh li lj lk b">firstName</code>和<code class="fe lh li lj lk b">lastName</code>状态变量。</p><h1 id="8297" class="mb lu in bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">用<code class="fe lh li lj lk b">event.target</code>获取表单提交的输入值</h1><p id="1d6b" class="pw-post-body-paragraph jv jw in jx b jy my ka kb kc mz ke kf kg na ki kj kk nb km kn ko nc kq kr ks ig bi translated">我们还可以在提交时用<code class="fe lh li lj lk b">Event</code>对象的<code class="fe lh li lj lk b">target</code>属性获取表单输入的值。这在我们没有用状态变量跟踪输入值的情况下是有用的，例如，不受控制的输入。</p><p id="e1a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lh li lj lk b">App.js</code></p><pre class="ll lm ln lo gt lp lk lq lr aw ls bi"><span id="5b93" class="lt lu in lk b gy lv lw l lx ly">import { useState } from 'react';</span><span id="d455" class="lt lu in lk b gy lz lw l lx ly">export default function App() {<br/>  const [message, setMessage] = useState('');</span><span id="f0c4" class="lt lu in lk b gy lz lw l lx ly">  const handleSubmit = (event) =&gt; {<br/>    event.preventDefault();</span><span id="81d5" class="lt lu in lk b gy lz lw l lx ly">    const firstName = event.target.firstName.value;<br/>    const lastName = event.target.lastName.value;<br/>    setMessage(`Hello ${firstName} ${lastName}!`);</span><span id="1b77" class="lt lu in lk b gy lz lw l lx ly">    event.target.reset();<br/>  };</span><span id="8f2a" class="lt lu in lk b gy lz lw l lx ly">  return (<br/>    &lt;form onSubmit={handleSubmit}&gt;<br/>      &lt;input<br/>        type="text"<br/>        id="firstName"<br/>        name="firstName"<br/>        placeholder="First Name"<br/>      /&gt;</span><span id="c276" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="0c3f" class="lt lu in lk b gy lz lw l lx ly">      &lt;input<br/>        type="text"<br/>        id="lastName"<br/>        name="lastName"<br/>        placeholder="Last Name"<br/>      /&gt;</span><span id="b2c6" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="271a" class="lt lu in lk b gy lz lw l lx ly">      &lt;button type="submit"&gt;Submit&lt;/button&gt;</span><span id="cd4d" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="6134" class="lt lu in lk b gy lz lw l lx ly">      &lt;h2&gt;{message}&lt;/h2&gt;<br/>    &lt;/form&gt;<br/>  );<br/>}</span></pre><p id="d0cd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe lh li lj lk b">onSubmit</code>事件处理程序中，<code class="fe lh li lj lk b">Event</code>对象的<code class="fe lh li lj lk b">target</code>属性返回表单元素对象(类型为<code class="fe lh li lj lk b">HTMLFormElement</code>)。</p><p id="9248" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为我们在<code class="fe lh li lj lk b">input</code>元素上设置了<code class="fe lh li lj lk b">name</code>属性，所以表单元素对象将包含一个返回<code class="fe lh li lj lk b">input</code>元素对象的同名属性，也就是说，在<code class="fe lh li lj lk b">input</code>元素上将<code class="fe lh li lj lk b">name</code>设置为<code class="fe lh li lj lk b">firstName</code>之后，我们可以通过<code class="fe lh li lj lk b">form</code>元素对象上的<code class="fe lh li lj lk b">firstName</code>属性来访问这个<code class="fe lh li lj lk b">input</code>的元素对象。</p><p id="5790" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在获得每个输入的值并显示消息后，我们调用表单元素对象上的<code class="fe lh li lj lk b">reset()</code>方法来恢复表单输入元素的默认值。在这个例子中，我们就是这样清除输入字段中的文本的，因为它们不受状态变量的控制。</p><h1 id="e642" class="mb lu in bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">通过引用获取表单提交的输入值</h1><p id="8558" class="pw-post-body-paragraph jv jw in jx b jy my ka kb kc mz ke kf kg na ki kj kk nb km kn ko nc kq kr ks ig bi translated">我们还可以使用一个组件ref来获取提交时不受控制的表单输入的值。</p><p id="8f46" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lh li lj lk b">App.js</code></p><pre class="ll lm ln lo gt lp lk lq lr aw ls bi"><span id="eaf1" class="lt lu in lk b gy lv lw l lx ly">import { useState, useRef } from 'react';</span><span id="4499" class="lt lu in lk b gy lz lw l lx ly">export default function App() {<br/>  const [message, setMessage] = useState('');<br/>  const firstNameRef = useRef(undefined);<br/>  const lastNameRef = useRef(undefined);</span><span id="7558" class="lt lu in lk b gy lz lw l lx ly">  const handleSubmit = (event) =&gt; {<br/>    event.preventDefault();</span><span id="80a1" class="lt lu in lk b gy lz lw l lx ly">    const firstName = firstNameRef.current.value;<br/>    const lastName = lastNameRef.current.value;</span><span id="13ba" class="lt lu in lk b gy lz lw l lx ly">    setMessage(`Hello ${firstName} ${lastName}!`);</span><span id="f6eb" class="lt lu in lk b gy lz lw l lx ly">    event.target.reset();<br/>  };</span><span id="806d" class="lt lu in lk b gy lz lw l lx ly">  return (<br/>    &lt;form onSubmit={handleSubmit}&gt;<br/>      &lt;input<br/>        type="text"<br/>        id="firstName"<br/>        name="firstName"<br/>        placeholder="First Name"<br/>        ref={firstNameRef}<br/>      /&gt;</span><span id="13f6" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="afc5" class="lt lu in lk b gy lz lw l lx ly">      &lt;input<br/>        type="text"<br/>        id="lastName"<br/>        name="lastName"<br/>        placeholder="Last Name"<br/>        ref={lastNameRef}<br/>      /&gt;</span><span id="e4d7" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="9f45" class="lt lu in lk b gy lz lw l lx ly">      &lt;button type="submit"&gt;Submit&lt;/button&gt;</span><span id="042f" class="lt lu in lk b gy lz lw l lx ly">      &lt;br /&gt;<br/>      &lt;br /&gt;</span><span id="e96b" class="lt lu in lk b gy lz lw l lx ly">      &lt;h2&gt;{message}&lt;/h2&gt;<br/>    &lt;/form&gt;<br/>  );<br/>}</span></pre><p id="d7de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">受控输入中的数据由React state处理，但是对于非受控输入，它由DOM本身处理。这就是为什么上面这个例子中的<code class="fe lh li lj lk b">input</code>没有设置<code class="fe lh li lj lk b">value</code> prop或<code class="fe lh li lj lk b">onChange</code>事件处理程序。相反，我们使用React ref来访问输入字段的值。当输入中的文本发生变化时，DOM会更新这个值。</p><p id="07ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于每个<code class="fe lh li lj lk b">input</code>，我们用<code class="fe lh li lj lk b">useRef()</code>钩子创建一个ref对象，并将其设置为<code class="fe lh li lj lk b">input</code>的<code class="fe lh li lj lk b">ref</code>道具。这样做将ref对象的<code class="fe lh li lj lk b">current</code>属性设置为表示<code class="fe lh li lj lk b">input</code>元素的DOM对象。</p><p id="4437" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lh li lj lk b">useRef()</code>返回一个可变的引用对象，当一个组件被更新时，它的值不会改变。此外，修改这个对象的<code class="fe lh li lj lk b">current</code>属性的值不会导致重新渲染。这与从<code class="fe lh li lj lk b">useState()</code>返回的<code class="fe lh li lj lk b">setState</code>更新功能相反。</p><p id="54cd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">尽管React文档建议使用受控组件，但非受控组件也有一些优势。如果表单非常简单，不需要即时验证，并且只需要在提交表单时访问值，那么您可能更喜欢使用它们。</p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="f7d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nk">原载于</em><a class="ae nl" href="https://cbdev.link/1d307c" rel="noopener ugc nofollow" target="_blank"><em class="nk">codingbeautydev.com</em></a></p><h1 id="adcf" class="mb lu in bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph jv jw in jx b jy my ka kb kc mz ke kf kg na ki kj kk nb km kn ko nc kq kr ks ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nl" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">报名</strong> </a>立即免费领取一份。</p><p id="eaaa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nk">更多内容看</em> <a class="ae nl" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nk">说白了就是</em> </strong> </a> <em class="nk">。报名参加我们的</em> <a class="ae nl" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nk">免费周报</em> </strong> </a> <em class="nk">。关注我们关于</em> <a class="ae nl" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nk">推特</em> </strong> </a>，<a class="ae nl" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nk">领英</em> </strong> </a> <strong class="jx io"> <em class="nk">，</em></strong><a class="ae nl" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nk">YouTube</em></strong></a><strong class="jx io"><em class="nk">，以及</em></strong><em class="nk"/><a class="ae nl" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nk">不和</em> </strong> </a>  <em class="nk">对成长黑客感兴趣？检查出</em> <a class="ae nl" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nk">电路</em> </strong> </a> <strong class="jx io"> <em class="nk">。</em>T71】</strong></p></div></div>    
</body>
</html>