<html>
<head>
<title>Working With Numbers in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中使用数字</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/working-with-numbers-in-javascript-c8b2960bf8bb?source=collection_archive---------6-----------------------#2022-02-13">https://javascript.plainenglish.io/working-with-numbers-in-javascript-c8b2960bf8bb?source=collection_archive---------6-----------------------#2022-02-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1c99" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript在执行计算时的问题及解决方案。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/f706c8afa969173ae7e8c1f787499363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*689eVg5NP3uKPreg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@antoine1003?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Antoine Dautry</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="31b9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript很容易学习，Node.js是创建后端应用程序的绝佳语言。但是，容易不代表简单。正如我一直向年轻人建议的那样，学习这门语言的基础知识，了解它的优缺点，对于避免应用错误非常重要。今天，我们将看到它的一个“众所周知”的优势(或缺陷)，JavaScript，以及它执行计算的问题。</p><p id="8198" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">假设您有一个处理金额的应用程序(在本例中为€),对于某些操作，您希望将金额改为美分(1€ = 100美分),因此可以想象，您唯一需要做的事情就是“金额* 100 ”,这样就可以很好地工作了。可悲的是，对我们来说，这并不简单。让我们看一个例子:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lp"><img src="../Images/a8053a33e2e535647fbda4763c2d382a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C0PB3lwHOnbIgBuSnhxn7g.png"/></div></div></figure><p id="3675" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们应该期望得到6876，但是，我们得到的结果是6876.00000000001。为什么会出现这种情况？。这是因为众所周知的“浮点数的陷阱”，这里<a class="ae ks" href="https://www.codemag.com/article/1811041/JavaScript-Corner-Math-and-the-Pitfalls-of-Floating-Point-Numbers" rel="noopener ugc nofollow" target="_blank">这里</a>你可以读到解释(你可以在那里搜索并找到其他解释)。</p><p id="b029" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那么，我们能做些什么来避免这个错误呢？</p><p id="0876" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于不同的示例情况，我们将使用数字68.76(代表之前评论的美分示例)和68.768用于其他场景。</p><p id="da54" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你们中的一些人可以用“数学”对象和方法来寻找解决方案，如“<a class="ae ks" href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Math/round" rel="noopener ugc nofollow" target="_blank">圆</a>”、“<a class="ae ks" href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil" rel="noopener ugc nofollow" target="_blank">天花板</a>”、“<a class="ae ks" href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Math/floor" rel="noopener ugc nofollow" target="_blank">地板</a>”或“<a class="ae ks" href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc" rel="noopener ugc nofollow" target="_blank"> trunc </a>”，但这些解决方案对一些情况有效，对另一些情况无效。让我们看几个例子:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lq"><img src="../Images/7bf37d48a94ed91c148f0c3455f227e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqLLOY677Wm4I2scltCGYA.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lr"><img src="../Images/3f11e61d7fde69c095021fa2f19f7155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GGOcxGzxvYCDnKjW8SzGZg.png"/></div></div></figure><p id="ae59" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那么使用“数字”函数呢，让我们看看:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lq"><img src="../Images/c848fd5c11467c2d639455b3d2b0a37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*guSosvccwySyBXKpgsqYrA.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lr"><img src="../Images/d92ef866e0d216abbc79590e82ee753f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r2hGF7IT_ofVfYIMkAqZuA.png"/></div></div></figure><p id="e3a5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通常不建议对基本类型使用包装对象。</p><p id="832f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果我们使用“parseFloat”:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ls"><img src="../Images/2bf76ee6a45d1f294b94d609a713324e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2OfCfhpk6Q7hQ9LGNc1Vg.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lt"><img src="../Images/23eeb01b788872e061af35d5ecce681d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZjWmd_-BPP20xOAsxcW6sw.png"/></div></div></figure><p id="cd58" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的另一个选择是在著名的库"<a class="ae ks" href="https://lodash.com/docs/4.17.15" rel="noopener ugc nofollow" target="_blank"> lodash </a>"中寻找数学实用方法。让我们也来看一些例子:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lu"><img src="../Images/9226fed07dded7fcc4fe54595b3ada76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zrGSKCFq_vdn-OsdPMVaFg.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lv"><img src="../Images/cec4fff481c346d14997324118b2fe48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMVdKGyi0r94_nSaZ4vNfg.png"/></div></div></figure><p id="5e0d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如我们所看到的，这些选项没有一个适合所有情况。幸运的是，我们可以使用几个库，它们将避免为处理这些情况而创建复杂代码的需要。一些很好的例子是<a class="ae ks" href="https://mikemcl.github.io/big.js/" rel="noopener ugc nofollow" target="_blank"> big.js </a>和<a class="ae ks" href="https://github.com/MikeMcl/decimal.js/" rel="noopener ugc nofollow" target="_blank"> decimal.js </a>(这是我的选择)。</p><p id="c3e1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">就我而言，当我需要进行数学运算时，我会选择<a class="ae ks" href="https://github.com/MikeMcl/decimal.js/" rel="noopener ugc nofollow" target="_blank"> decimal.js </a>。正如你在项目的自述文件中看到的，你需要的每个数学运算都有很多不同的方法。它遵循了<a class="ae ks" href="https://en.wikipedia.org/wiki/Fluent_interface" rel="noopener ugc nofollow" target="_blank">流畅的接口</a>，所以你可以用一种实用的方式连接操作。</p><p id="6a78" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们看看前面使用<a class="ae ks" href="https://github.com/MikeMcl/decimal.js/" rel="noopener ugc nofollow" target="_blank"> decimal.js </a>的例子，并检查它们现在都是正确的</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lw"><img src="../Images/288f629422ee90a4703f6d1a144433b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6II8rT1IyUxjUFGG9O6CDg.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lx"><img src="../Images/e28ede926b0318c1c089c61508491fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gT_997O4eVjmD1dNrP40ew.png"/></div></div></figure><p id="047f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想检查这些例子，它们被保存在<a class="ae ks" href="https://replit.com/@amcereijo/JavascriptCalculations#index.js" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="96b3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我强烈建议您深入研究一下这个库，并在每次需要用JavaScript执行计算时使用它。</p><p id="4dfe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">希望这对你有帮助。您是否使用了其他库或技术来避免这一缺陷？请在评论中与我们分享。</p><p id="c9dc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ly">更多内容看</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ly">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ly">免费周报</em> </strong> </a> <em class="ly">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ly">社区不和谐</em> </strong> </a> <em class="ly">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>