<html>
<head>
<title>Patterns of JavaScript: Prototype Pattern (Creational)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript模式:原型模式(创造性)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/patterns-of-javascript-prototype-pattern-creational-6f7ae6c03ce9?source=collection_archive---------11-----------------------#2022-12-08">https://javascript.plainenglish.io/patterns-of-javascript-prototype-pattern-creational-6f7ae6c03ce9?source=collection_archive---------11-----------------------#2022-12-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a05d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">默认解释为基于订阅的savegames</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/87fb0bf759f42c84c0cf7de617908153.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfDeSKUbtm1bqSq33UFEBg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com/" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><p id="bed0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">原型模式</em> </strong>允许您通过<em class="ls">克隆现有对象而不是创建新对象来创建对象。您也可以根据需要定制它们。</em></p><p id="134c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这种模式可以获得以下优势:</p><ul class=""><li id="d31b" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">不需要子类化</li><li id="fd3d" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">隐藏创建对象的复杂性</li><li id="f1de" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">在不知道对象类型的情况下获取新对象</li><li id="cb34" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">运行时删除或添加新对象</li></ul><p id="a883" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，每种模式都属于3类中的一类:创造型、结构型和行为型。这种模式被归类为创造性的。你会明白为什么。</p><blockquote class="mh mi mj"><p id="24ee" class="kw kx ls ky b kz la jr lb lc ld ju le mk lg lh li ml lk ll lm mm lo lp lq lr ij bi translated">本文是系列文章的一部分。你会在最后找到其他模式。</p></blockquote><h1 id="9e79" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">简而言之，原型模式</h1><p id="da11" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated"><em class="ls">原型模式</em>使用<code class="fe nk nl nm nn b">clone()</code>创建新对象。不是返回未初始化的对象，而是返回一个已经初始化的对象。初始化的是基于原型——或示例对象。</p><p id="66f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">经验法则:当创建对象是昂贵的或资源密集型的时，遵循这种模式。</em></p><blockquote class="mh mi mj"><p id="6009" class="kw kx ls ky b kz la jr lb lc ld ju le mk lg lh li ml lk ll lm mm lo lp lq lr ij bi translated">您可能知道这种模式的名称是“属性模式”。</p></blockquote></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="bd80" class="mn mo iq bd mp mq nv ms mt mu nw mw mx jw nx jx mz jz ny ka nb kc nz kd nd ne bi translated">何时&amp;为什么使用原型模式</h1><p id="14c6" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">当用默认值初始化业务对象时，原型模式会很有帮助。克隆它们会接管它们的默认值。</p><p id="3021" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一种原型语言，JavaScript使用原型模式创建新对象，包括它们的原型。</p><div class="oa ob gp gr oc od"><a href="https://medium.com/geekculture/javascripts-prototype-inheritance-explained-for-dummies-32b6c4a8a2ef" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">为傻瓜解释JavaScripts原型继承</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">别傻了，读一读原型，让你的整个职业生涯受益</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or kp od"/></div></div></a></div></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="7f5d" class="mn mo iq bd mp mq nv ms mt mu nw mw mx jw nx jx mz jz ny ka nb kc nz kd nd ne bi translated">模式概述</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/ceec62ddbd5d8d1fd6cea48f87e372af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0C5oVqFTCGCKk68lrSAU1w.png"/></div></div></figure><p id="2fc8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了正确地获得这种模式，您需要以下内容:</p><ul class=""><li id="f7c7" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated"><strong class="ky ir"> <em class="ls">客户端:</em> </strong>通过克隆一个原型制作一个新的对象。<em class="ls">举例:</em> <code class="fe nk nl nm nn b">run()</code> <em class="ls">函数。</em></li><li id="e47c" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><strong class="ky ir"> <em class="ls">原型:</em> </strong>创建接口克隆自身。<em class="ls">例如:</em> <code class="fe nk nl nm nn b">SaveGamePrototype</code>。</li><li id="f1d9" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><strong class="ky ir"> <em class="ls">克隆:</em> </strong>这些是要使用的克隆对象。<em class="ls">例如:</em> <code class="fe nk nl nm nn b">SaveGame</code>。</li></ul></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="5f16" class="mn mo iq bd mp mq nv ms mt mu nw mw mx jw nx jx mz jz ny ka nb kc nz kd nd ne bi translated">示例1:默认的开始保存游戏</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/cb74871f692866014c83d110ba4777d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FNcZUOIX396FFTnEnKI8Uw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com/" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><p id="cbb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个例子将创建一个基础<code class="fe nk nl nm nn b">SaveGame</code>来进一步工作。这个看你的商业逻辑了。现在，我将创建一个有3种货币的<code class="fe nk nl nm nn b">SaveGame</code>:</p><ul class=""><li id="0cf1" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated"><em class="ls">基础货币</em></li><li id="6b56" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls">溢价货币</em></li><li id="5396" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><em class="ls">信誉货币</em></li></ul><p id="cf30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于任何一个<em class="ls">默认用户</em>，我总是想为所有三种货币提供一个<code class="fe nk nl nm nn b">0</code>。</p><h2 id="c484" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">概观</h2><p id="5bbd" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">给定一个<code class="fe nk nl nm nn b">SaveGamePrototype</code>对象，示例代码创建对象的克隆。<code class="fe nk nl nm nn b">SaveGame</code>原型在其构造器中被接受。</p><p id="73dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nk nl nm nn b">clone</code>方法生成新的<code class="fe nk nl nm nn b">SaveGame</code>对象，用原型构造函数初始化它们的属性值。</p><p id="531b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下部分展示了经典的原型模式实现。</p><h2 id="c707" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">拯救游戏(零号病人)</h2><p id="1892" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这个克隆人(零号病人)有你需要的蓝图。</p><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="d458" class="pk mo iq nn b be pl pm l pn po">function SaveGame(base, premium, prestige) {<br/><br/>    this.currency = base;<br/>    this.premiumCurrency = premium;<br/>    this.prestigeCurrency = prestige;<br/><br/>    this.info = function () {<br/>        console.log("Default SaveGame created: Base Currency" + this.currency + ", Premium Currency " + this.premiumCurrency +<br/>            ", Prestige Currency: " + this.prestigeCurrency + ".");<br/>    };<br/>}</span></pre><p id="c7fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它保存所有3种货币的值，并在调用<code class="fe nk nl nm nn b">info()</code>时将它们打印到控制台。</p><p id="9175" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将由下一节中的原型来克隆。</p><h2 id="2756" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">原型</h2><p id="e3c5" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated"><code class="fe nk nl nm nn b">SaveGamePrototype</code>接受一个<code class="fe nk nl nm nn b">proto</code>类型并保存到它的私有字段中，称为<code class="fe nk nl nm nn b">this.proto</code>。</p><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="effb" class="pk mo iq nn b be pl pm l pn po">function SaveGamePrototype(proto) {<br/>    this.proto = proto;<br/><br/>    this.clone = function () {<br/>        const saveGame = new SaveGame();<br/><br/>        saveGame.currency = proto.currency;<br/>        saveGame.premiumCurrency = proto.premiumCurrency;<br/>        saveGame.prestigeCurrency = proto.prestigeCurrency;<br/><br/>        return saveGame;<br/>    };<br/>}</span></pre><p id="8c64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调用<code class="fe nk nl nm nn b">clone()</code>函数时，它将使用保存的所有货币的默认值(<code class="fe nk nl nm nn b">0</code>、<code class="fe nk nl nm nn b">0</code>、<code class="fe nk nl nm nn b">0</code>)创建一个新的<code class="fe nk nl nm nn b">SaveGame</code>。</p><h2 id="adc2" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">客户端(也称为执行代码)</h2><p id="f87c" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">使用<code class="fe nk nl nm nn b">const proto</code>，您可以根据自己的需求创建一个原型。在这种情况下，我想给任何默认用户<code class="fe nk nl nm nn b">0</code>货币。</p><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="7def" class="pk mo iq nn b be pl pm l pn po">function run() {<br/><br/>    const proto = new SaveGame(0, 0, 0);<br/>    const prototype = new SaveGamePrototype(proto);<br/><br/>    const saveGame = prototype.clone();<br/>    saveGame.info();<br/>}</span></pre><p id="00cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nk nl nm nn b">const prototype</code>保存原型对象，您将从其进一步克隆<code class="fe nk nl nm nn b">SaveGames</code>。最后用<code class="fe nk nl nm nn b">clone()</code>创建一个专用的<code class="fe nk nl nm nn b">SaveGame</code>。</p><h2 id="d480" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">整个示例和打印输出</h2><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="7763" class="pk mo iq nn b be pl pm l pn po">function SaveGamePrototype(proto) {<br/>    this.proto = proto;<br/><br/>    this.clone = function () {<br/>        const saveGame = new SaveGame();<br/><br/>        saveGame.currency = proto.currency;<br/>        saveGame.premiumCurrency = proto.premiumCurrency;<br/>        saveGame.prestigeCurrency = proto.prestigeCurrency;<br/><br/>        return saveGame;<br/>    };<br/>}<br/><br/>function SaveGame(base, premium, prestige) {<br/><br/>    this.currency = base;<br/>    this.premiumCurrency = premium;<br/>    this.prestigeCurrency = prestige;<br/><br/>    this.info = function () {<br/>        console.log("Default SaveGame created: Base Currency" + this.currency + ", Premium Currency " + this.premiumCurrency +<br/>            ", Prestige Currency: " + this.prestigeCurrency + ".");<br/>    };<br/>}<br/><br/>function run() {<br/><br/>    const proto = new SaveGame(0, 0, 0);<br/>    const prototype = new SaveGamePrototype(proto);<br/><br/>    const saveGame = prototype.clone();<br/>    saveGame.info();<br/>}<br/><br/>run();</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pp"><img src="../Images/5070c807eb1bf47ac5e590d92de4a6e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Quqqh_09imui6JS8DKw3oA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Console Printout for Example 1</figcaption></figure></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="361c" class="mn mo iq bd mp mq nv ms mt mu nw mw mx jw nx jx mz jz ny ka nb kc nz kd nd ne bi translated">示例2:保存不同订阅的游戏</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/c683112684469b5907d1aa9fb2f248d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AmbjlRGMzqQVTemvxHynRw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com/" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><p id="dfe4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个例子将创建3个base <code class="fe nk nl nm nn b">SaveGame</code>来使用。货币值将取决于所选择的订阅。</p><p id="d507" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将为选择的每个订阅模式创建一个<code class="fe nk nl nm nn b">SaveGame</code>:</p><ul class=""><li id="92a7" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">免费用户:0，0，0</li><li id="dc34" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">高级用户:500，100，0</li><li id="03dd" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">高级用户:1000，500，100</li></ul><h2 id="3b27" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">拯救游戏(零号病人)</h2><p id="3954" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这里不需要改变什么。</p><h2 id="b0cc" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">原型</h2><p id="3098" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这里不需要改变什么。</p><p id="5251" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是您应该添加一些默认函数来生成所有三个基于订阅的保存游戏。为了更好地区分它们，为它们分别创建一个“构建器”</p><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="b7af" class="pk mo iq nn b be pl pm l pn po">function getFreeUserSaveGame() {<br/>    return new SaveGame(0, 0, 0);<br/>}</span></pre><pre class="pr pg nn ph bn pi pj bi"><span id="103e" class="pk mo iq nn b be pl pm l pn po">function getPremiumUserSaveGame() {<br/>    return new SaveGame(500, 100, 0);<br/>}</span></pre><pre class="pr pg nn ph bn pi pj bi"><span id="2332" class="pk mo iq nn b be pl pm l pn po">function getPrestigeUserSaveGame() {<br/>    return new SaveGame(1000, 500, 100);<br/>}</span></pre><p id="040c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将调用放入一个名为<code class="fe nk nl nm nn b">initSubscriptionsDefaults</code>的初始化函数中:</p><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="33f1" class="pk mo iq nn b be pl pm l pn po">function initSubscriptionDefaults() {<br/>    const freeUser = getFreeUserSaveGame();<br/>    const premiumUser = getPremiumUserSaveGame();<br/>    const prestigeUser = getPrestigeUserSaveGame();<br/><br/>    const prototypeFreeUser = new SaveGamePrototype(freeUser);<br/>    const prototypePremiumUser = new SaveGamePrototype(premiumUser);<br/>    const prototypePrestigeUser = new SaveGamePrototype(prestigeUser);<br/><br/>    return [prototypeFreeUser, prototypePremiumUser, prototypePrestigeUser]<br/>}</span></pre><p id="643a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将返回一个包含我的用例提供的所有3种默认原型的数组(记住，三个订阅=三个savegames)。</p><h2 id="cb28" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">客户代码</h2><p id="8b22" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">要将它们打印出来，您将把<code class="fe nk nl nm nn b">run()</code>函数分解成一行:</p><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="52fd" class="pk mo iq nn b be pl pm l pn po">function run() {<br/><br/>    // Your logic to just take one of them (make a wrapper)<br/><br/>    initSubscriptionDefaults().forEach(s =&gt; s.clone().info())<br/>}</span></pre><p id="0049" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它返回所有三个原型，对它们进行迭代(<code class="fe nk nl nm nn b">.forEach()</code>)，并对每个原型调用<code class="fe nk nl nm nn b">info()</code>方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ps"><img src="../Images/fc0b1463eeecc623842a4744b739c999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VhSDEfQI63H99qIp7AkxQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Console Printout for Example 1</figcaption></figure><h2 id="4415" class="ou mo iq bd mp ov ow dn mt ox oy dp mx lf oz pa mz lj pb pc nb ln pd pe nd pf bi translated">你可能的逻辑</h2><p id="9fea" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">想象一下，你必须实现一个服务，花费$0、$5或$10，并为你的游戏授予用户不同的起始货币。你可以很粗略地这样实现<em class="ls"/>:</p><pre class="kg kh ki kj gt pg nn ph bn pi pj bi"><span id="3077" class="pk mo iq nn b be pl pm l pn po">function run() {<br/><br/>    const userPayment = 5 // $0, $5 or $10<br/><br/>    let prototype = null;<br/><br/>    switch (userPayment) {<br/>        case 5:<br/>            prototype = new SaveGamePrototype(getPremiumUserSaveGame());<br/>            break;<br/>        case 10:<br/>            prototype = new SaveGamePrototype(getPrestigeUserSaveGame());<br/>            break;<br/>        default:<br/>            prototype = new SaveGamePrototype(getFreeUserSaveGame());<br/>            break;<br/>    }<br/><br/>    const userSaveGame = prototype.clone()<br/><br/>    userSaveGame.info()<br/>}</span></pre><p id="7701" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这种模式允许您访问始终相似的处理例程。只有原型的创建会根据您的业务逻辑进行区分。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="b8af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://arnoldcodeacademy.ck.page/code-smells-cheat-sheet" rel="noopener ugc nofollow" target="_blank"> <em class="ls">轻松识别代码味道，并用最佳实践模式替换它们。获取"</em> <strong class="ky ir"> <em class="ls">"所有代码闻起来像一行程序</em> </strong> <em class="ls"> "-Cheatsheets。</em>T13】</a></p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="d6d1" class="mn mo iq bd mp mq nv ms mt mu nw mw mx jw nx jx mz jz ny ka nb kc nz kd nd ne bi translated">进一步解释JavaScript模式</h1><ul class=""><li id="b6fc" class="lt lu iq ky b kz nf lc ng lf pt lj pu ln pv lr ly lz ma mb bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/patterns-of-javascript-builder-pattern-fb6cd3aca35b">构建器模式</a></li><li id="6dc9" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/patterns-of-javascript-abstract-factory-pattern-explained-by-tower-defense-46a36776a391">抽象工厂</a></li><li id="f197" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/world-of-javascript-factory-method-explained-by-tower-defense-spawner-402c69426650">工厂方法</a></li></ul><p id="eb56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容请看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">说白了就是</em> </strong> </a> <em class="ls">。</em></p><p id="82c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">免费每周简讯</em> </strong> </a> <em class="ls">。关注我们</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">推特</em> </strong> </a>，<a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">LinkedIn</em></strong></a><em class="ls">，</em><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">YouTube</em></strong></a><em class="ls">，</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">不和</em> </strong> </a> <strong class="ky ir"> <em class="ls">。</em>T71】</strong></p><p id="1452" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">有兴趣规模化你的软件创业</em> </strong> <em class="ls">？检查</em> <a class="ae kv" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">电路</em> </strong> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>