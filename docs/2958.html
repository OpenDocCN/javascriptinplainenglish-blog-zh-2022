<html>
<head>
<title>How To Redirect To Another Webpage Using JavaScript To Change the URL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用JavaScript更改URL重定向到另一个网页</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-redirect-to-another-webpage-using-javascript-to-change-the-url-2b92754845a3?source=collection_archive---------6-----------------------#2022-07-18">https://javascript.plainenglish.io/how-to-redirect-to-another-webpage-using-javascript-to-change-the-url-2b92754845a3?source=collection_archive---------6-----------------------#2022-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b67a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">要使用JavaScript将用户重定向到另一个网页，您需要决定是否希望当前页面保留在浏览器的历史记录中，也就是说后退按钮是否有效。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2299da56830f48402edd660e94a63f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vKICzwL_-HCPT-K4"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@helloimnik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hello I'm Nik</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d343" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种情况经常发生——您正在编写一些JavaScript代码，需要将用户重定向到网站的不同部分，或者完全是另一个网页。</p><p id="67cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于现代浏览器支持的重定向，有两种“香草JS”(香草JavaScript，没有任何npm包依赖)解决方案。</p><p id="439f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一种，<em class="ls">经典，</em>是<a class="ae kv" href="https://www.urbandictionary.com/define.php?term=good%20ol%27" rel="noopener ugc nofollow" target="_blank">好ol '</a><code class="fe lt lu lv lw b">window.location.href</code>——你可以在<code class="fe lt lu lv lw b">window</code>对象中修改当前<code class="fe lt lu lv lw b">location</code>的<code class="fe lt lu lv lw b">href</code>(字面意思是<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_URL" rel="noopener ugc nofollow" target="_blank"> URL </a>)。</p><p id="6dfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你设置一个值给<code class="fe lt lu lv lw b">window.location.href</code>(或者简称为<code class="fe lt lu lv lw b">window.location</code>，那么你将模拟用户点击链接的动作。</p><blockquote class="lx ly lz"><p id="623a" class="kw kx ls ky b kz la jr lb lc ld ju le ma lg lh li mb lk ll lm mc lo lp lq lr ij bi translated">"<code class="fe lt lu lv lw b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Location/href" rel="noopener ugc nofollow" target="_blank">Location.href</a> </code>:string ifier，返回包含整个URL的字符串。如果更改，关联文档将导航到新页面。— <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Location" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></blockquote><p id="af3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(为了完整起见，您还可以使用方法<code class="fe lt lu lv lw b">window.location.assign()</code>并将新的URL作为参数传递给<code class="fe lt lu lv lw b">.assign()</code>函数。)</p><p id="7ea9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就像当有人点击一个链接时，<code class="fe lt lu lv lw b">window.location.href</code>会将当前URL保存在浏览器的会话历史中。</p><p id="90af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">换句话说，使用<code class="fe lt lu lv lw b">window.location.href</code>重定向后，浏览器中的后退按钮将能够返回到当前页面。</p><p id="86bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着<code class="fe lt lu lv lw b">window.location.href</code>在模拟一个链接但需要一些其他标签的情况下最有用，比如<code class="fe lt lu lv lw b">&lt;button&gt;</code>。</p><p id="9bb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(尽管我应该注意到可能会有一些关于可访问性的问题，如果你没有给一个链接加上标签，那么它显然不是一个链接。)</p><p id="e264" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用<code class="fe lt lu lv lw b">window.location.href</code>编写一个“像链接一样的按钮”(尽管有<a class="ae kv" href="https://www.a11yproject.com/" rel="noopener ugc nofollow" target="_blank"> a11y </a>的问题)来重定向，如下面的代码示例所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi md"><img src="../Images/4a7f518d2e15ccf692971c0c12f8b02a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9cRUwQLpRva9Iul68Tmq5Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/DoctorDerek/3ab226a084294de109a8d62ae4b70d5d" rel="noopener ugc nofollow" target="_blank">View raw code</a> as a GitHub Gist</figcaption></figure><p id="138d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，如果您需要在网页加载时重定向到一个URL，那么<code class="fe lt lu lv lw b">window.location.href</code>将不是一个很好的选择。</p><p id="b881" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是因为，如果你试图在页面一加载<code class="fe lt lu lv lw b">window.location.href</code>就改变网站，你会弄坏用户的后退按钮。😥</p><p id="f1d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(如果你曾经在一次重定向后点击后退按钮，结果却立即再次被重定向，这就是我所说的后退按钮损坏的原因。)</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="9ca3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将要讨论的下一个解决方案，<code class="fe lt lu lv lw b">window.location.replace()</code>模拟了一个HTTP <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections" rel="noopener ugc nofollow" target="_blank">重定向</a>，比如一个<a class="ae kv" href="https://http.cat/301" rel="noopener ugc nofollow" target="_blank"> 301 </a> / <a class="ae kv" href="https://http.cat/308" rel="noopener ugc nofollow" target="_blank"> 308 </a>(永久移动)重定向。</p><p id="1d4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与使用<code class="fe lt lu lv lw b">=</code>赋值的<code class="fe lt lu lv lw b">window.location.href</code>不同，您将URL作为参数传递给<code class="fe lt lu lv lw b">window.location.replace()</code>函数。</p><p id="847f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">换句话说，<code class="fe lt lu lv lw b">window.location.replace()</code>不会将当前页面添加到用户的会话历史中，因此您无法通过后退按钮返回到当前页面。</p><blockquote class="lx ly lz"><p id="c624" class="kw kx ls ky b kz la jr lb lc ld ju le ma lg lh li mb lk ll lm mc lo lp lq lr ij bi translated">"<code class="fe lt lu lv lw b"><em class="iq">Location</em></code>接口的<code class="fe lt lu lv lw b"><strong class="ky ir"><em class="iq">replace()</em></strong></code>方法用提供的URL中的资源替换当前资源。"— <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Location/replace" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></blockquote><p id="ba13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您以前使用过只有一个页面的“单页应用程序”(SPA)，您可能对后退按钮的这种行为很熟悉。</p><p id="9f7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(如果你曾经使用过SPA风格的网站，当你在应用程序中改变页面后,“后退”按钮会把你完全带离网站，你就会明白我的意思。)</p><p id="7466" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您可能已经猜到的，如果您打算在页面加载后立即重定向，那么<code class="fe lt lu lv lw b">window.location.replace()</code>将是首选的解决方案。</p><p id="8f4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果您要在页面上创建一个脚本，在页面加载时重定向用户，请使用<code class="fe lt lu lv lw b">.replace()</code>，如以下代码示例所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/4e96510fc29fd0298d05cd6a09128ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MDOW4qw86P9sRTZJhXJ9Nw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/DoctorDerek/eb88f83013693e04d44e55fccb92ac98" rel="noopener ugc nofollow" target="_blank">View raw code</a> as a GitHub Gist</figcaption></figure><p id="0656" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，如果您需要转发URL,<code class="fe lt lu lv lw b">window.location.replace()</code>可能不是一个好的解决方案(例如，使用前面提到的301 HTTP重定向)。</p><p id="711c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然可能有一些证据表明JavaScript重定向对于SEO是有效的，但首选策略是301(或308)服务器响应代码。</p><p id="3105" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不使用某种类型的服务器端代码，你可以直接在你的域名提供商处处理重定向(参见:<a class="ae kv" href="https://kb.porkbun.com/article/39-how-to-set-up-url-forwarding" rel="noopener ugc nofollow" target="_blank"> Porkbun的说明</a>)。</p><p id="7267" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">普通的JavaScript无法处理服务器端重定向，这也是我喜欢Next.js的原因之一，因为它<a class="ae kv" href="https://nextjs.org/docs/api-reference/next.config.js/redirects" rel="noopener ugc nofollow" target="_blank">可以</a>直接处理重定向。</p><p id="406f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">编码快乐！</strong>👨‍💻</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mm"><img src="../Images/632f25c5ece355d2637dd5c790aa715b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hZWeNhKaW-Vii7bN"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@markkoenig?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mark König</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="30d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">德里克·奥斯汀博士是《职业规划:如何在6个月内成为一名成功的6位数程序员》一书的作者，该书现已在亚马逊上出售。</p></div></div>    
</body>
</html>