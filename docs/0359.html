<html>
<head>
<title>Create Your Own RPG with JavaScript and RPGJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript和RPGJS创建你自己的RPG</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-an-rpg-mmorpg-game-in-javascript-in-a-few-minutes-with-rpgjs-8a86a713c2fe?source=collection_archive---------4-----------------------#2022-01-21">https://javascript.plainenglish.io/create-an-rpg-mmorpg-game-in-javascript-in-a-few-minutes-with-rpgjs-8a86a713c2fe?source=collection_archive---------4-----------------------#2022-01-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a63ad343282fac8a1e59540454bb1f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLYG0daVP1kK5aKn8cPURw.png"/></div></div></figure><h1 id="6ad1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h1><p id="4335" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">创作一个游戏并不容易，有很多限制:性能、游戏性、兼容性等等。</p><p id="e44d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">创建一个在线游戏更加困难，因为你必须考虑低延迟、节省带宽、避免服务器过载、安全性等等。</p><p id="17cc" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">问题是，如何在不使你的生活复杂化的情况下创建一个游戏？</p><p id="eb4e" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">JavaScript中有几种创建游戏的框架:PixiJS、Phaser等。但是我将谈论RPGJS，它允许你创建2D角色扮演游戏。为什么要这么做？因为游戏玩法已经设定好了。(地图创建，角色移动，滚动，碰撞，动画等。)</p><h1 id="396a" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">RPGJS是什么？</h1><p id="1445" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我是RPGJS的创造者。这是一个开源项目，没有任何公司支持。只是一种挑战自我创造RPG的激情</p><p id="d751" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><a class="ae lw" href="https://github.com/RSamaium/RPG-JS" rel="noopener ugc nofollow" target="_blank">https://github.com/RSamaium/RPG-JS</a>(800多颗星星！)</p><blockquote class="lx ly lz"><p id="e086" class="kt ku ma kv b kw lr ky kz la ls lc ld mb lt lg lh mc lu lk ll md lv lo lp lq ig bi translated">RPG代表角色扮演游戏。这就像旧游戏如最终幻想，超时空触发器，甚至动作冒险游戏如塞尔达</p></blockquote><p id="c4b5" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">我在2011年开始了第一个版本，但去年我用新的技术栈重新攻击了版本3。客户端渲染用PixiJS，服务器设计用Node.js和TypeScript，GUI(菜单、对话框等)用Vue.js。)</p><p id="e377" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">挑战:创建一个允许用相同的代码制作离线RPG和MMORPG的框架。我建议你在几分钟内创造一个MMORPG！</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi me"><img src="../Images/ccafe53db471f984cae73429a1616144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*yTQRRF4esk_kD_U4JWjMkA.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Demo</figcaption></figure><p id="eeec" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">演示:<a class="ae lw" href="https://demo.rpgjs.dev/" rel="noopener ugc nofollow" target="_blank"> https://demo.rpgjs.dev </a></p><h1 id="3a1e" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">开始</h1><h2 id="a649" class="mn jw in bd jx mo mp dn kb mq mr dp kf le ms mt kj li mu mv kn lm mw mx kr my bi translated">先决条件</h2><p id="698b" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">您必须拥有Node.js 14版本。该框架在版本15+上不工作。</p><h2 id="9fa4" class="mn jw in bd jx mo mp dn kb mq mr dp kf le ms mt kj li mu mv kn lm mw mx kr my bi translated">装置</h2><p id="683a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">打开终端，运行以下命令行:</p><pre class="mf mg mh mi gt mz na nb nc aw nd bi"><span id="fb01" class="mn jw in na b gy ne nf l ng nh">npx degit rpgjs/starter my-rpg-game<br/>cd my-rpg-game<br/>npm install<br/>npm run dev</span></pre><p id="f0b2" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">安装需要一点时间。别担心。然后去<a class="ae lw" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>看第一张渲染图</p><h1 id="08e0" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">修改地图</h1><p id="68e3" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我们将使用平铺地图编辑器来修改地图</p><ol class=""><li id="beb4" class="ni nj in kv b kw lr la ls le nk li nl lm nm lq nn no np nq bi translated">下载并安装软件(<a class="ae lw" href="https://www.mapeditor.org/" rel="noopener ugc nofollow" target="_blank">https://www.mapeditor.org</a>)</li><li id="cee0" class="ni nj in kv b kw nr la ns le nt li nu lm nv lq nn no np nq bi translated">进入<em class="ma">src/modules/main/server/maps/tmx/simple Map . tmx</em>，用平铺地图编辑器打开</li><li id="fe23" class="ni nj in kv b kw nr la ns le nt li nu lm nv lq nn no np nq bi translated">可以添加树木、土地等。</li></ol><h1 id="7c18" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">添加一个字符</h1><ol class=""><li id="0982" class="ni nj in kv b kw kx la lb le nw li nx lm ny lq nn no np nq bi translated">仍然在平铺地图编辑器中，转到对象层</li></ol><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/4e098a4742075f88e27ce8932712b966.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*_XonmFU1dui-4a5A997SKQ.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Object Layer</figcaption></figure><ol class=""><li id="7974" class="ni nj in kv b kw lr la ls le nk li nl lm nm lq nn no np nq bi translated">用<em class="ma">插入点</em>工具在地图上插入一个点</li></ol><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/e06cbc4709f2a05987f41490476b2d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*iH3_QL1i3AB2MsbsSxJhxw.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Insert Point</figcaption></figure><p id="85f2" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">3.在<em class="ma"> name </em>属性中放入事件的名称</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ob"><img src="../Images/916c666ccee283e86d9acc7ce6db4f7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wylEWqKOnjT8ivMQzcbesQ.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Name property</figcaption></figure><p id="50e1" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">4.转到src/modules/main/server/events并创建npc.ts文件。我们把下面的代码:</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="70c5" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">EvenData装饰器允许您给出事件的一般信息:</p><ul class=""><li id="6156" class="ni nj in kv b kw lr la ls le nk li nl lm nm lq oe no np nq bi translated">第4行:上一步的事件名称</li><li id="6579" class="ni nj in kv b kw nr la ns le nt li nu lm nv lq oe no np nq bi translated">第5行:hitbox。在我们的地图中，一个单幅图块是32x32px。我们指出，对于更真实的碰撞，hitbox只有16px高。</li><li id="92f6" class="ni nj in kv b kw nr la ns le nt li nu lm nv lq oe no np nq bi translated">第11行:在地图上创建事件时触发onInit</li><li id="c301" class="ni nj in kv b kw nr la ns le nt li nu lm nv lq oe no np nq bi translated">第12行:我们给事件一个外观。外观在客户端的文件<em class="ma">src/modules/main/client/characters/characters . ts</em>中定义</li></ul><p id="c24b" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">为了更进一步，我们将让角色在玩家与(换句话说，当玩家按下非玩家角色(NPC)上的回车键时)互动时说话</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="oc od l"/></div></figure><ul class=""><li id="db7e" class="ni nj in kv b kw lr la ls le nk li nl lm nm lq oe no np nq bi translated">第14行:当玩家在事件上按Enter键时，触发<em class="ma"> onAction </em>方法</li><li id="c075" class="ni nj in kv b kw nr la ns le nt li nu lm nv lq oe no np nq bi translated">第15行:我们在相关的播放器上显示一个对话框。我增加了选项<em class="ma"> talkWith: this </em>让角色在与玩家对话时转向玩家。还要注意，这是一个异步方法，因为只有当对话框关闭时，指令才会继续。</li></ul><p id="f3e1" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">5.转到地图<em class="ma">src/modules/main/server/maps/sample map . ts</em>。我们将在这张地图上添加我们的活动！</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="53d7" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">第3行和第11行是唯一的变化。我在<em class="ma">事件</em>数组中添加了类！</p><h1 id="b3d4" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="7b0b" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">这是一个简单但强大的方法。您可以在修改后的地图上添加角色。所有连接的人都将看到新活动！</p><p id="c0d6" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">文档:<a class="ae lw" href="https://docs.rpgjs.dev/" rel="noopener ugc nofollow" target="_blank"> https://docs.rpgjs.dev </a></p><p id="0a11" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">帮助:<a class="ae lw" href="https://community.rpgjs.dev/" rel="noopener ugc nofollow" target="_blank">https://community . rpgjs . dev</a></p><p id="49e9" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="ma">更多内容看</em> <a class="ae lw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ma">说白了就是</em> </strong> </a> <em class="ma">。报名参加我们的</em> <a class="ae lw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ma">免费周报</em> </strong> </a> <em class="ma">。在我们的</em> <a class="ae lw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ma">社区不和谐</em> </strong> </a> <em class="ma">获得独家获取写作机会和建议。</em></p></div></div>    
</body>
</html>