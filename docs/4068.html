<html>
<head>
<title>What are NodeLists, and How do They Work?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是节点列表，它们是如何工作的？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-are-nodelists-and-how-do-they-work-7594c33abac5?source=collection_archive---------13-----------------------#2022-10-21">https://javascript.plainenglish.io/what-are-nodelists-and-how-do-they-work-7594c33abac5?source=collection_archive---------13-----------------------#2022-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2790" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">节点列表在JavaScript中是一种奇怪的类型，你可能都不知道。让我们看看它们是如何工作的。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2aa45e96e77ceba32eb080a6f368962d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ve42haiXVjTZHA4QWo0nTA.png"/></div></div></figure><p id="e714" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您知道吗，Javascript不将多个元素的选择归类为数组？相反，它是一种叫做<code class="fe ln lo lp lq b">NodeList</code>的东西。节点列表本质上是一个元素列表。要生成一个<code class="fe ln lo lp lq b">NodeList</code>，我们可以这样做:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="a794" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');</span></pre><p id="8bab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的代码将返回一个页面上所有段落的列表，作为一个<code class="fe ln lo lp lq b">NodeList</code>。</p><p id="7623" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">节点列表很有趣，因为它们不是数组，所以它们不会继承数组的所有不同功能。一个显著的例子是，在一些较老的浏览器中，如Internet Explorer，<code class="fe ln lo lp lq b">NodeList</code>不继承<code class="fe ln lo lp lq b">forEach</code>功能。</p><p id="2248" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，如果您想为每个段落添加一个事件侦听器，下面的代码将在Internet Explorer中引发一个错误:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="84f5" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');</span><span id="fcbb" class="lv lw iq lq b gy mb ly l lz ma">myNodeList.forEach(function(item) {<br/>    item.addEventListener('click', function(e) {<br/>        // Do some click events<br/>    });<br/>    // For each node item..<br/>});</span></pre><p id="5f39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为这在大多数现代浏览器中都可以工作，所以你通常不必担心使用它，但是如果你想支持旧的浏览器并使用<code class="fe ln lo lp lq b">forEach</code>，我们必须将我们的节点列表放入一个数组中，就像这样:</p><p id="8ef2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了将我们的节点列表转换成更易于管理的数组，我们可以使用下面的代码:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="1494" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');<br/>Array.prototype.forEach.call(myNodeList, function(item) {<br/>    item.addEventListener('click', function(e) {<br/>        // Do some click events<br/>    });<br/>    // For each node item..<br/>});</span></pre><p id="cbe5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有点复杂，但现在我们可以确保所有用户都可以访问我们添加到节点列表项中的事件侦听器。</p><h1 id="6db9" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">节点列表支持哪些功能？</h1><p id="43ca" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">由于本文到目前为止关注的是<code class="fe ln lo lp lq b">NodeList</code>在默认情况下并不总是有<code class="fe ln lo lp lq b">forEach</code>，您可能想知道哪些函数可以在节点列表上运行。有4个:</p><ul class=""><li id="afae" class="my mz iq kt b ku kv kx ky la na le nb li nc lm nd ne nf ng bi translated"><code class="fe ln lo lp lq b">NodeList.entries</code> -返回一个迭代器，用于获取id和元素作为id/元素对，即<code class="fe ln lo lp lq b">[ 1, p ]</code>。</li><li id="21f2" class="my mz iq kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated"><code class="fe ln lo lp lq b">NodeList.forEach</code> -用于逐个迭代每个项目。</li><li id="8f2f" class="my mz iq kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated"><code class="fe ln lo lp lq b">NodeList.item</code> -用于通过id获取特定项目，即通过<code class="fe ln lo lp lq b">NodeList.item(0)</code>获取第一段。</li><li id="84dd" class="my mz iq kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated"><code class="fe ln lo lp lq b">NodeList.keys</code> -返回获取密钥的迭代器，即1 2 3 4 5...</li><li id="06c8" class="my mz iq kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated"><code class="fe ln lo lp lq b">NodeList.values</code> -返回获取HTML元素的迭代器，即<code class="fe ln lo lp lq b">p p p p</code>...</li></ul><p id="2b64" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">值得注意的是<code class="fe ln lo lp lq b">NodeList.item</code>是ie浏览器支持的唯一功能。其余的都不是。</p><p id="be9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，下面是我们如何在节点列表上运行这些函数:</p><h1 id="5bab" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">节点列表.条目</h1><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="74d5" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');</span><span id="4fe0" class="lv lw iq lq b gy mb ly l lz ma">// entries<br/>let allEntries = myNodeList.entries();<br/>for(var i of allEntries) {<br/>    // Console logs each paragraph with an id individually, such as [ 0, p ] [ 1, p ] [ 2, p ] ...<br/>    console.log(i);<br/>}</span></pre><h1 id="c1e3" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">NodeList.forEach</h1><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="b3d7" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');</span><span id="b161" class="lv lw iq lq b gy mb ly l lz ma">// forEach - iterate over each item<br/>myNodeList.forEach(function(item) {<br/>    // Console logs each paragraph element individually<br/>    console.log(i);<br/>});</span></pre><h1 id="0957" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">节点列表.项目</h1><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="f046" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');</span><span id="b46d" class="lv lw iq lq b gy mb ly l lz ma">// item - get the first element (0)<br/>let firstElement = myNodeList.item(0);<br/>// Console logs the first element only<br/>console.log(firstElement);</span></pre><h1 id="2934" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">节点列表.密钥</h1><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="9c14" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');</span><span id="8f38" class="lv lw iq lq b gy mb ly l lz ma">let getKeys = myNodeList.keys();<br/>// Console logs the id of each element, i.e. 1 2 3 4 5 ...<br/>for(var i of getKeys) {<br/>    console.log(i);<br/>}</span></pre><h1 id="09dc" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">节点列表.值</h1><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="455a" class="lv lw iq lq b gy lx ly l lz ma">let myNodeList = document.querySelectorAll('p');</span><span id="86a0" class="lv lw iq lq b gy mb ly l lz ma">let getValues = myNodeList.values();<br/>// Console logs each HTML element as an array, i.e. p p p p ...</span><span id="d445" class="lv lw iq lq b gy mb ly l lz ma">for(var i of getValues) {<br/>    console.log(i);<br/>}</span></pre></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="2de0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nt">更多内容请看</em><a class="ae nu" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nt">plain English . io</em></strong></a><em class="nt">。报名参加我们的</em> <a class="ae nu" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nt">免费周报</em> </strong> </a> <em class="nt">。关注我们关于</em><a class="ae nu" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nt">Twitter</em></strong></a><a class="ae nu" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nt">LinkedIn</em></strong></a><em class="nt"/><a class="ae nu" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nt">YouTube</em></strong></a><em class="nt"/><a class="ae nu" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nt">不和</em> </strong> </a> <em class="nt">。对增长黑客感兴趣？检查</em> <a class="ae nu" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nt">电路</em> </strong> </a> <em class="nt">。</em></p></div></div>    
</body>
</html>