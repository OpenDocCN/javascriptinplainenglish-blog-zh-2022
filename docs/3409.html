<html>
<head>
<title>How to Fix “413 Request Entity Too Large” Error in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复Node.js中的“413请求实体太大”错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-fix-413-request-entity-too-large-error-in-node-js-226c0070e4f4?source=collection_archive---------2-----------------------#2022-08-25">https://javascript.plainenglish.io/how-to-fix-413-request-entity-too-large-error-in-node-js-226c0070e4f4?source=collection_archive---------2-----------------------#2022-08-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="92e6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">解决Express中的HTTP“413有效负载过大”错误</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a34676f8d35c20992047b84b9f38fa8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZbFwd-oBFCunu6uu"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@felix_mittermeier?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Felix Mittermeier</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8dd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最近不得不处理“413请求实体太大”的快递错误。经过一些研究，我发现这是一个相当常见的问题，可能有两个原因。在这两种情况下，当客户端发出被认为太大的请求时，服务器都会引发错误。</p><p id="2c90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们来学习关于“413请求实体太大”错误的所有知识，并看看如何在Express中修复它。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="53cc" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">什么是“413请求实体太大”错误？</h1><p id="852e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413" rel="noopener ugc nofollow" target="_blank"> MDN </a>中所解释的，HTTP <code class="fe mw mx my mz b">413 Payload Too Large</code>响应状态码表示客户端执行的请求实体大于服务器定义的限制。因此，服务器可能会关闭连接或返回一个<code class="fe mw mx my mz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After" rel="noopener ugc nofollow" target="_blank">Retry-After</a></code>头字段。</p><p id="cafe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">HTTP <code class="fe mw mx my mz b">413 Payload Too Large</code>以前叫<a class="ae kv" href="https://www.rfc-editor.org/rfc/rfc2616#section-10.4.14" rel="noopener ugc nofollow" target="_blank"/><code class="fe mw mx my mz b"><a class="ae kv" href="https://www.rfc-editor.org/rfc/rfc2616#section-10.4.14" rel="noopener ugc nofollow" target="_blank">413 Request Entity Too Large</a></code>。请注意，大多数系统仍然这样称呼它。因此，如果您遇到“请求实体太大”的错误消息，您可以假设您正在处理一个HTTP <code class="fe mw mx my mz b">413 Payload Too Large</code>错误。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ce36" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">为什么会出现HTTP错误413？</h1><p id="3935" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如前所述，当客户端请求大于服务器愿意或能够处理的请求时，会出现HTTP错误413。具体来说，这可能是因为两个原因。让我们深入研究一下。</p><h2 id="41dd" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">1.Web服务器配置不佳</h2><p id="1b2e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">由于客户端请求超出了web服务器配置中定义的大小限制，您会得到一个HTTP错误413。例如，<a class="ae kv" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size" rel="noopener ugc nofollow" target="_blank">缺省情况下，Nginx强加的客户机请求大小限制被设置为1 MB </a>。因此，如果您没有配置Nginx来显式地期望一个更大的值，那么对于任何大于1MB的请求，您都会得到一个HTTP错误413。</p><h2 id="25f1" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">2.配置不佳的应用服务器</h2><p id="5535" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">您会得到一个HTTP错误413，因为客户机请求超过了应用服务器配置中定义的大小限制。例如，Node.js服务器上的Express应用程序默认将JSON请求体限制为100Kb。因此，如果没有将Express配置为显式地期望一个更大的值，那么对于任何大于100Kb的JSON请求，都会得到HTTP错误413。</p><p id="e4ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，您将了解如何解决由第二个原因导致的HTPP 413错误，即糟糕的应用服务器配置。如果你想深入研究第二个原因，<a class="ae kv" href="https://betterprogramming.pub/how-to-fix-error-413-in-apps-behind-nginx-on-aws-elastic-beanstalk-c68a1ef2c331" rel="noopener ugc nofollow" target="_blank">看看这篇文章</a>。</p><div class="nm nn gp gr no np"><a href="https://betterprogramming.pub/how-to-fix-error-413-in-apps-behind-nginx-on-aws-elastic-beanstalk-c68a1ef2c331" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">如何修复AWS Elastic Beanstalk上Nginx后面的应用程序中的错误413</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">解决了使用Nginx作为反向代理时“413请求实体太大”的错误</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">better编程. pub</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od kp np"/></div></div></a></div></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="e173" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">修复Express中的“413请求实体太大”错误</h1><p id="5dc6" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">要修复Express应用程序中的“413请求实体太大”错误，只需更新服务器初始化文件。这通常称为<code class="fe mw mx my mz b">index.js</code>或<code class="fe mw mx my mz b">server.js</code>，是您初始化Express服务器的地方。确保该文件包含以下行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="afe0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后两行代码将JSON有效负载和URL查询参数的大小扩展到10MB。这应该足以避免您的Express应用程序中的大多数“413请求实体太大”错误。根据您的需要配置这两个极限值，但不要不必要地加大它们的尺寸。</p><p id="5327" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊！您刚刚学习了如何在Node.js Express应用程序上解决“413请求实体太大”错误。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8afd" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="b6d3" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在本文中，您了解了什么是HTTP错误413，它为什么会出现，以及如何解决它。具体来说，您看到了如何在Node.js Express服务器上修复“413请求实体太大”。当客户端请求比服务器预期的要大时，这是一个特别常见的问题。如图所示，只需要几行代码就可以解决这个问题。</p><p id="e045" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！我希望这篇文章对你有所帮助。请随意留下任何问题、评论或建议。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="f66a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="og">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">plain English . io</em></strong></a><em class="og">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="og">免费周报</em> </strong> </a> <em class="og">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">LinkedIn</em></strong></a><em class="og"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">YouTube</em></strong></a><em class="og"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">不和</em> </strong> </a> <em class="og">。</em></p></div></div>    
</body>
</html>