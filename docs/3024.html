<html>
<head>
<title>How Bun Aims to Be King of JavaScript Runtimes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Bun如何成为JavaScript运行时之王</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/node-time-to-die-how-bun-aims-to-be-king-of-javascript-runtimes-b9dad687cab6?source=collection_archive---------4-----------------------#2022-07-23">https://javascript.plainenglish.io/node-time-to-die-how-bun-aims-to-be-king-of-javascript-runtimes-b9dad687cab6?source=collection_archive---------4-----------------------#2022-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="839e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Node.js和Deno让路，有一个新的运行时。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6c8dd964255ffc2496cc332266516375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z1dyzTK7Iii10uygmHNgSA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Bun — the new king?</figcaption></figure><p id="587f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你在过去10年中做过前端开发，那么你很有可能使用过Node js。事实上，很难想象没有npm包和node_modules的现代web开发。</p><p id="5e4d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Node.js是最普及、最受欢迎的JavaScript运行时，但它的头把交椅正受到一个听起来可爱的竞争者的挑战— <strong class="kx ir"> Bun。</strong></p><p id="c340" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是什么是JavaScript运行时呢？为什么面包很重要？让我们把它分解一下，这样你对Bun就有足够的了解，可以说“嘿，我读过一些关于它的东西”并且<em class="lr">让你的同事惊叹</em>建议他们迁移遗留Node.js项目来使用Bun(注意:请不要这样做，除非你想不受欢迎)</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="9a8c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">JS运行时</h1><p id="6a0e" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">在1995年Javascript首次被创建的时候，它运行在Netscape浏览器中。这一切都很好，但如果我们想在更现代的浏览器如Chrome上运行JS呢？嗯，Chrome需要一种自己执行JS代码的方式——这被称为<strong class="kx ir"> JavaScript引擎</strong>。</p><p id="0bfb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">JavaScript引擎对于web浏览器是必不可少的，主要的web浏览器供应商都有自己的引擎。有数百个自制JS引擎，但“三大”是:</p><ul class=""><li id="1dc4" class="mw mx iq kx b ky kz lb lc le my li mz lm na lq nb nc nd ne bi translated">V8——由谷歌为Chrome开发</li><li id="ca7d" class="mw mx iq kx b ky nf lb ng le nh li ni lm nj lq nb nc nd ne bi translated">苹果公司为Safari开发的JavaScriptCore</li><li id="3aea" class="mw mx iq kx b ky nf lb ng le nh li ni lm nj lq nb nc nd ne bi translated"><strong class="kx ir">SpinderMonkey</strong>——由Mozilla为Firefox创建</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/ff80193964cc32b44028eff501fbfec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yIIKSwuyU4Ydkw7A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Googles V8 engine, which is extremely popular.</figcaption></figure><p id="d005" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">好了，现在我们有了一个引擎，可以在各自的浏览器中运行我们的JS。但是如果我们根本不想在浏览器中运行JS呢？<br/>简单地说，JS运行时指的是<strong class="kx ir">我们运行JS代码的地方。</strong></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2bcd" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">两千和Node.js</h1><blockquote class="nl nm nn"><p id="7ef5" class="kv kw lr kx b ky kz jr la lb lc ju ld no lf lg lh np lj lk ll nq ln lo lp lq ij bi translated">“在一开始node_modules就被创建了。这让许多人非常愤怒，并被广泛认为是一个糟糕的举动。”</p></blockquote><p id="79a6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在2009年创建了Node.js运行时环境。这允许开发人员编写JS应用程序，而不需要显式地绑定或运行在web浏览器上。这使你可以在Node.js中编写前端、后端或全栈应用程序，然后可以在任何地方运行，如webserver、app service或edge。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/30183329be2acc8a6a588025c0754b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U-KyI4HLClX9dwFb.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The Node.js logo</figcaption></figure><p id="a109" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">尽管Node.js在js运行时方面是一个彻底的改变，但它仍然与我们熟悉的JS生态系统有着紧密的联系，因为它是使用<em class="lr"> Chrome V8引擎</em>构建的。</p><p id="3f70" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Node.js很快成为前端和后端开发的默认js运行时(在JS中),并且从那以后一直非常受欢迎。<br/>但是流行并不意味着完美，已经有人尝试对Node.js进行改进。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0d8d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">Deno — Node.js 2.0？</h1><p id="c3d2" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">Node.js的创始人Ryan Dahl有遗憾。事实上，他在他的演讲“关于Node.js我后悔的10件事”中列出了10件事。</p><p id="e9ff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您对JS运行时八卦感兴趣，我建议您听听这个演讲，但总体感觉是Node.js可以在以下方面进行改进:</p><ul class=""><li id="6a50" class="mw mx iq kx b ky kz lb lc le my li mz lm na lq nb nc nd ne bi translated">安全性</li><li id="2f7c" class="mw mx iq kx b ky nf lb ng le nh li ni lm nj lq nb nc nd ne bi translated">NPM——开源库的一种极其混乱且有点基于信仰的方法</li><li id="4c53" class="mw mx iq kx b ky nf lb ng le nh li ni lm nj lq nb nc nd ne bi translated">模块编译</li><li id="5076" class="mw mx iq kx b ky nf lb ng le nh li ni lm nj lq nb nc nd ne bi translated">参差不齐的打字稿和JSX支持</li></ul><p id="19a7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Ryan旨在通过发布一个名为<strong class="kx ir"> Deno </strong>的新JS运行时来纠正这些问题，是的，它是Node.js的变位词。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/acb99b972a22852c07262d953f47d645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xIzCjCTt8wXwV-1C"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The (cute) Deno logo</figcaption></figure><p id="8ec4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Deno有很多开发者可能想要的优秀特性，但是正在努力解决最重要的部分——大规模采用。<br/>开发人员通常对核心技术相当固执，Deno似乎没有从Node.js吸引他们。这可能有多种原因，但主要是由于基础设施的规模。</p><blockquote class="nt"><p id="0806" class="nu nv iq bd nw nx ny nz oa ob oc lq dk translated">国家预防机制包:1，300，00以上</p><p id="e0e4" class="nu nv iq bd nw nx ny nz oa ob oc lq dk translated">德诺包装:4929</p></blockquote><p id="4f5d" class="pw-post-body-paragraph kv kw iq kx b ky od jr la lb oe ju ld le of lg lh li og lk ll lm oh lo lp lq ij bi translated">当然，包的数量并不是衡量成功的唯一标准，事实上，大多数人都会同意npm臃肿得令人难以置信，但这是Node.js与Deno争论中的一个重要论点。当这场争论正在酝酿的时候，一个开发人员正忙于创建运行时战争中的最新挑战者。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ef5e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">小圆面包</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/9602840ffb8f139de94b37563ec9e353.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/0*ezZjnIW5s2RCeAJ0"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The (even cuter) Bun JS logo</figcaption></figure><p id="690b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Bun是为现代web开发而构建的JS运行时。Bun和Node.js/Deno的关键区别在于，它是建立在一个JavaScriptCore引擎(T4)上，而不是谷歌的V8。<br/> JSC往往比V8更具性能<a class="ae nr" href="https://twitter.com/jarredsumner/status/1499225725492076544" rel="noopener ugc nofollow" target="_blank"/>，代价是更难共事。谢天谢地，面包的创造者贾勒德·萨姆纳为我们付出了辛勤的劳动，这样我们就可以享受JSC引擎的加速了。Bun是用Zig(一种低级的高性能编程语言，像我一样，你可能从来没有听说过)编写的，这进一步增加了速度上的优势。</p><p id="586d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些因素意味着Bun比Node.js和Deno更快。这是一个很高的荣誉，也是诱使开发人员转换运行时的一种东西。</p><h2 id="8333" class="oj ma iq bd mb ok ol dn mf om on dp mj le oo op ml li oq or mn lm os ot mp ou bi translated">所以很快。但是它有包装吗？</h2><p id="d81b" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">是啊！Bun没有陷入和Deno一样的陷阱，试图维持一个独立于广受欢迎的npm的系统。Bun实现了与Node.js相同的模块解析算法。这是一种奇特的说法，Bun能够使用npm包，同时安装速度提高了20倍。所以你可以使用130万个npm包，也可以使用npm的速度。干得好，小傍。</p><p id="beff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Bun使用节点包管理器的事实有点像一把双刃剑，因为Ryan Dahl非常清楚，npm并不完美。但是，在有一个非常受欢迎的替代品出现之前，Bun一直在尽力应对“糟糕”的情况。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/2ace829d8c22d116710da9e0c6c59540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u84sX6_d09g9mn_H.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">No more fumbling with bundling</figcaption></figure><h2 id="dcc1" class="oj ma iq bd mb ok ol dn mf om on dp mj le oo op ml li oq or mn lm os ot mp ou bi translated">捆绑和传输呢？</h2><p id="8696" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">Bun是一个一体化的运行时。也就是说你不用担心搞乱Webpack/rollup/babel，Bun有原生的bundler。你不必担心使用TypeScript或JSX/TSX，因为Bun有一个本地transpiler。这意味着您可以从一开始就开始以这些文件格式编写，而不是与ts配置和捆绑器斗争。在我看来，这是一个非常酷的特性，因为你关心的任何东西都应该用TypeScript编写。</p><h2 id="84f8" class="oj ma iq bd mb ok ol dn mf om on dp mj le oo op ml li oq or mn lm os ot mp ou bi translated">还有其他酷的地方吗？</h2><p id="1d17" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">Bun能够处理。env文件，不需要安装任何依赖项，不像Node.js必须使用dotenv包。这只是一件小事，但感觉上<strong class="kx ir">能够在运行时本地处理env文件是有意义的。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/2ac47b1d3989bc1858638f2696e8bcbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*cMjs3S0vSeN1sZpt.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Bun makes handling these files easy!</figcaption></figure><p id="b912" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于那些编写测试的人(首先做得很好)，Bun提供了一个类似于Jest的本地测试运行器。毫不奇怪，它的速度快得惊人，能够<a class="ae nr" href="https://twitter.com/jarredsumner/status/1542824445810642946/photo/1" rel="noopener ugc nofollow" target="_blank"> <em class="lr">“运行266次测试，SSR与react-dom的速度比jest打印其版本号的速度快40%”</em>。这是吸引你项目眼球的索赔类型。</a></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="dcdb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论——所有人向新国王致敬？</h1><p id="c17b" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">Bun的目标是成为事实上的JS运行时，他们的策略可以分为三个主要部分；</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/b28f8fd5a18d269e7d696007fcd72306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbIVH-bijeFKRxzvEUrBDQ.png"/></div></div></figure><p id="e48a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Bun有很多优点，但是现在还不是每个人都放弃Node.js的时候。</p><p id="15a8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然Bun很有前途，但它目前的发展动力非常有限(无意冒犯萨姆纳)。这意味着有相当多的bug，这可能是这样一个雄心勃勃的项目在其生命周期早期的预期。<br/> Windows用户目前必须使用WSL(用于Linux的Windows子系统)才能安装和使用Bun，这可能会拒绝一些开发人员，并且通常会让Windows体验感觉有点半生不熟。</p><p id="e822" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，虽然Bun的推出令人难以置信地震撼了JS领域，但它可能需要更多时间才能超越Node.js。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="d830" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你喜欢这篇文章或者觉得它有用，那么欢迎关注。或者，你可以在Medium  <a class="ae nr" href="https://jamesmbrightman.medium.com/membership" rel="noopener"> <em class="lr">这里</em> </a> <em class="lr">支持我或者给我买一杯</em> <a class="ae nr" href="https://ko-fi.com/jamesbrightman" rel="noopener ugc nofollow" target="_blank"> <em class="lr">咖啡</em> </a> <em class="lr">！非常感谢所有的支持。</em></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="2886" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">更多内容请看</em><a class="ae nr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">plain English . io</em></strong></a><em class="lr">。报名参加我们的</em> <a class="ae nr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="lr">免费周报</em> </strong> </a> <em class="lr">。关注我们关于</em><a class="ae nr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">Twitter</em></strong></a><strong class="kx ir"><em class="lr"/></strong><em class="lr">和</em><a class="ae nr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">LinkedIn</em></strong></a><em class="lr">。查看我们的</em> <a class="ae nr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="lr">社区不和谐</em> </strong> </a> <em class="lr">加入我们的</em> <a class="ae nr" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="lr">人才集体</em> </strong> </a> <em class="lr">。</em></p></div></div>    
</body>
</html>