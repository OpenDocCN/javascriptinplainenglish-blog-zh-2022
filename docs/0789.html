<html>
<head>
<title>JavaScript Security — Weak Type Bypass</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript安全性—弱类型旁路</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-security-weak-type-bypass-b3c0895b6e5f?source=collection_archive---------15-----------------------#2022-02-14">https://javascript.plainenglish.io/javascript-security-weak-type-bypass-b3c0895b6e5f?source=collection_archive---------15-----------------------#2022-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bde1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">黑客如何利用弱类型特性绕过JavaScript安全检查。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b270e7e5b580575f03085ed2bd56a3e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f-gN2OZYolvfewOj"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="edfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能知道，JavaScript是一种弱类型语言。黑客可以利用该语言的这些特性绕过Node.js应用程序中的一些检查。那么，弱型是什么意思呢？让我们考虑下面的例子:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="3ba8" class="lx ly iq lt b gy lz ma l mb mc">var a =1;<br/>var b ="1";<br/>var c= a + b;<br/>console.log(c==="11");  //return True</span></pre><p id="dbcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在上面的例子中，如果一个整数被一个字符串添加，而不是抛出一个错误，整数将被转换为字符串并附加在它上面。因此，在JavaScript中，它的数据类型可能会在计算过程中发生变化。这就是我们称JavaScript为弱类型语言的原因。</p><p id="fc82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是黑客如何利用这些特性呢？现在，让我们看看下面这个简单的例子:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="337d" class="lx ly iq lt b gy lz ma l mb mc">let username = "Peter";</span><span id="78ce" class="lx ly iq lt b gy md ma l mb mc">if (username === "admin")<br/>{<br/>    console.log("access denied!");<br/>}<br/>else<br/>{<br/>     console.log("hello "+username);   //output: hello Peter<br/>}</span></pre><p id="9865" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，这个应用程序很简单。应用程序检查用户是否是管理员。如果是，打印“拒绝访问！”。如果没有，打印“你好{用户名}”。那么，有没有什么方法可以绕过这个检查，强制应用程序打印“hello admin”呢？。答案是肯定的！</p><p id="197a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如上所述，===意味着类型和内容必须相同。例如:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="41aa" class="lx ly iq lt b gy lz ma l mb mc">"admin" === "admin" //return True<br/>"admin" === ["admin"] //return False</span></pre><p id="d7ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的情况中，第一行代码返回True，因为类型和内容是相同的。第二行代码返回false，因为它将一个字符串与一个列表进行比较。</p><p id="6381" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">容易吗？我们继续。</p><p id="d1c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们尝试如下所示:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="6f51" class="lx ly iq lt b gy lz ma l mb mc">let greeting1 = "Hi "+"admin";<br/>let greeting2 = "Hi "+["admin"];</span><span id="fb9c" class="lx ly iq lt b gy md ma l mb mc">greeting1===greeting2 //return True</span></pre><p id="fd65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果我们将字符串和列表附加到同一个字符串，并比较它们的输出。你会发现它返回真。这是因为当列表被附加一个字符串时，它也变成了一个字符串。所以，要绕过这个，很简单。只需将用户名设置为["admin"]，如下所示:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="b64b" class="lx ly iq lt b gy lz ma l mb mc">let username = ["admin"];</span><span id="00ce" class="lx ly iq lt b gy md ma l mb mc">if (username === "admin")<br/>{<br/>    console.log("access denied!");<br/>}<br/>else<br/>{<br/>     console.log("hello "+username);   //output: hello admin<br/>}</span></pre><p id="f9b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看到了吗？你可以就这样绕过。</p><h1 id="fde5" class="me ly iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">结论</h1><p id="a3ce" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">这一招是开发者很容易忽略的。因此，如果您正在进行黑盒测试，尝试将您的输入从字符串更改为列表以查看是否可以绕过某种检查总是值得的。在源代码审查中，检查是否有一些代码具有上述行为总是好的，这些行为允许您构造一个有效载荷来绕过一些检查。希望你喜欢这篇文章和快乐的黑客！</p><p id="6b75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">plain English . io</em></strong></a><em class="na">。报名参加我们的</em><strong class="ky ir"><em class="na"/></strong><a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">免费周报</em> </strong> </a> <em class="na">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="na">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="na">。</em></p></div></div>    
</body>
</html>