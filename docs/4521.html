<html>
<head>
<title>Easy State Management in Vue 3 Using Pinia</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Pinia在Vue 3中轻松管理状态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/pinia-state-management-in-vue-3-d093a33d66c?source=collection_archive---------3-----------------------#2022-12-10">https://javascript.plainenglish.io/pinia-state-management-in-vue-3-d093a33d66c?source=collection_archive---------3-----------------------#2022-12-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b2736507e11c575fafcafe85c4818777.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBwDwTsWSl28GU1PtzMA2w.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Image by <a class="ae jz" href="https://pixabay.com/users/pexels-2286921/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1245817" rel="noopener ugc nofollow" target="_blank">Pexels</a> from <a class="ae jz" href="https://pixabay.com//?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1245817" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="e5bb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当使用Vue 3时，有常见的方法将数据从<strong class="kc io">父</strong>组件发送到<strong class="kc io">子</strong>组件，反之亦然。一般来说，<code class="fe ky kz la lb b">props</code>用于将数据从<strong class="kc io">父</strong>发送到<strong class="kc io">子</strong>，事件<code class="fe ky kz la lb b">$emits</code>用于将数据从子发送到父。<code class="fe ky kz la lb b">provide</code>和<code class="fe ky kz la lb b">inject</code>可用于从祖父母向孙子女发送数据。</p><p id="1985" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于路由器和功能都很少的简单app来说，这可能就足够了。然而，对于一个大型复杂的项目，状态管理可能变得至关重要。</p><h1 id="e8c7" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">🍍皮尼亚来救援了。</h1><p id="c005" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated"><strong class="kc io"> Pinia </strong>是一个运行在<a class="ae jz" href="https://vuejs.org/api/composition-api-setup.html" rel="noopener ugc nofollow" target="_blank">组合API </a>上的状态管理库。通过Pinia，变量可以在单个对象中声明，并在所有组件中使用。在Pinia之前，<strong class="kc io"> Vuex </strong>是常用的，可以作为替代。</p><p id="f241" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Pinia的组成如下:</p><ul class=""><li id="2494" class="mf mg in kc b kd ke kh ki kl mh kp mi kt mj kx mk ml mm mn bi translated"><strong class="kc io">状态</strong>:店铺的中心部分</li><li id="3111" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated"><strong class="kc io">动作</strong>:类似于方法，用于为状态定义业务逻辑</li><li id="8391" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated"><strong class="kc io"> Getter </strong>:相当于状态的计算值</li></ul><h1 id="dddd" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">我们来试试吧！</h1><p id="f377" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">让我们通过一个简单的计数器应用程序来尝试使用Pinia。注意每个组件(<strong class="kc io">状态</strong>、<strong class="kc io">动作</strong>、<strong class="kc io">获取</strong>)是如何被使用和调用的。</p><p id="ec59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要使用Pinia，首先使用<code class="fe ky kz la lb b">npm install pinia</code>将其安装到我们的Vue项目中。</p><p id="0e13" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，在main.js文件中，我们导入<code class="fe ky kz la lb b">createPinia</code>方法并使用<code class="fe ky kz la lb b">app.use</code>调用该方法。</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/fac728c492b4319c0b3dfbd48f5a9dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEo-F0Lzsh6ez05LWBSH2w.png"/></div></div></figure><p id="c951" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们在项目中创建一个名为<code class="fe ky kz la lb b">stores</code>的文件夹，文件名为<code class="fe ky kz la lb b">counter.js</code>来存储我们的数据。从文件夹的名称可以看出，我们可能有多个使用Pinia的商店。</p><h2 id="7baa" class="my ld in bd le mz na dn li nb nc dp lm kl nd ne lq kp nf ng lu kt nh ni ly nj bi translated">构成部分1:国家</h2><p id="148a" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">状态包含我们希望在组件之间分发的数据。我们使用Pinia的<code class="fe ky kz la lb b">defineStore</code>方法将状态对象定义到变量<code class="fe ky kz la lb b"><strong class="kc io">useStore</strong></code>中。<code class="fe ky kz la lb b">state()</code>中的对象包含我们可以操作的<code class="fe ky kz la lb b">count</code>数据。</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/f94763ec567216af04ee9b2868cab5d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rIjnhVwBYJsF8x84Qqv9Rg.png"/></div></div></figure><h2 id="db40" class="my ld in bd le mz na dn li nb nc dp lm kl nd ne lq kp nf ng lu kt nh ni ly nj bi translated">构成部分2:行动</h2><p id="769e" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">动作是调用状态对象突变的方法。接下来，我们在<code class="fe ky kz la lb b">actions</code>内部创建一个<code class="fe ky kz la lb b"><em class="nk">addOne()</em></code>方法，当在外部调用时，将一个方法添加到我们的<code class="fe ky kz la lb b">count</code>数据中。</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/8bdf7d698e7549748a3e4b19dd413516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BympRyY61rr8H2ezR0ZmMg.png"/></div></div></figure><h2 id="bcbe" class="my ld in bd le mz na dn li nb nc dp lm kl nd ne lq kp nf ng lu kt nh ni ly nj bi translated">组件3:吸气剂</h2><p id="68ab" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">Getters的作用类似于计算组件，当状态改变时会重新计算。因此，我们使用<code class="fe ky kz la lb b">state</code>作为参数来调用getter。方法<code class="fe ky kz la lb b"><em class="nk">tripleCount(state)</em></code>将返回三倍的电流<code class="fe ky kz la lb b">count</code>。</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/63324bb2aa2c9f1f06d040bdbff98521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJaUZmUXEyfFrFzTMX-abg.png"/></div></div></figure><h2 id="590a" class="my ld in bd le mz na dn li nb nc dp lm kl nd ne lq kp nf ng lu kt nh ni ly nj bi translated">将数据连接到用户界面</h2><p id="3fa1" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">要使用它，我们需要做的就是创建一个Vue文件来读取我们商店中的数据。让我们在<code class="fe ky kz la lb b">App.vue</code>中做这件事。</p><p id="aefb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们称之为使用import直接导入我们的数据。然后，我们在<code class="fe ky kz la lb b">setup()</code>内调用它，利用组合API ( <code class="fe ky kz la lb b">data()</code>也可以)。对于我们的输出，我们分别为<code class="fe ky kz la lb b">count</code> state和<code class="fe ky kz la lb b">tripleCount</code> getter创建一个头。我们有一个按钮，使用<code class="fe ky kz la lb b">addOne()</code>动作将我们的计数增加1。</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/700c1ae010f52c690d28a6b36203e38d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rGksyWHQi1PbzYSfGdrzvg.png"/></div></div></figure><p id="a276" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，我们可以为不同的数据创建更多的存储，并创建更多的组件来读取我们的反应数据。一个额外的好处是Pinia既轻便又能支持Typescript。</p><p id="a5a3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我们的最终输出。</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/a4ee225638c24027d7acee2898742b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2AG8iimobyvb1fCdrVdO2g.png"/></div></div></figure><p id="77e0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">好消息是，我们可以使用Chrome的<a class="ae jz" href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd/related?hl=en" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> Vue开发工具</strong> </a>在Pinia中交互跟踪我们的<code class="fe ky kz la lb b">state</code>和<code class="fe ky kz la lb b">getters</code>。</p></div><div class="ab cl nm nn hr no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ig ih ii ij ik"><h2 id="05eb" class="my ld in bd le mz na dn li nb nc dp lm kl nd ne lq kp nf ng lu kt nh ni ly nj bi translated">就是这样！</h2><p id="0517" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">使用Vue状态管理还有很多方面，还有Pinia的用例。这只是冰山一角。我希望这足够吸引你去订婚。</p><p id="b6fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">点击此处了解更多信息！</p><ul class=""><li id="8d59" class="mf mg in kc b kd ke kh ki kl mh kp mi kt mj kx mk ml mm mn bi translated"><a class="ae jz" href="https://pinia.vuejs.org/" rel="noopener ugc nofollow" target="_blank">https://pinia.vuejs.org/</a></li><li id="a7dc" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated"><a class="ae jz" href="https://vuex.vuejs.org/#what-is-a-state-management-pattern" rel="noopener ugc nofollow" target="_blank">https://vuex.vuejs.org/#what-is-a-state-management-pattern</a></li></ul><p id="2b17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们有了。我希望你已经发现这是有用的。感谢您的阅读！</p><p id="998c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nk">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nk">plain English . io</em></strong></a><em class="nk">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nk">免费周报</em> </strong> </a> <em class="nk">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nk">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nk">LinkedIn</em></strong></a><em class="nk"/><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nk">YouTube</em></strong></a><em class="nk"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nk">不和</em> </strong> </a> <strong class="kc io"> <em class="nk">。</em>T49】</strong></p><p id="cb1b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nk">对缩放您的软件启动感兴趣</em> </strong> <em class="nk">？检查</em> <a class="ae jz" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nk">电路</em> </strong> </a> <em class="nk">。</em></p></div></div>    
</body>
</html>