<html>
<head>
<title>Use performance.now() to Measure Execution Speed</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用performance.now()测量执行速度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/use-performance-now-to-measure-execution-speed-150a3a88547d?source=collection_archive---------16-----------------------#2022-03-03">https://javascript.plainenglish.io/use-performance-now-to-measure-execution-speed-150a3a88547d?source=collection_archive---------16-----------------------#2022-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0878" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">衡量代码性能的更好方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c76d13a14dfec45893b61c93032ed710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xR0c0epYl6WmZUpP"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@abhyudaymajhiphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Abhyuday Majhi</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6a01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript中的<code class="fe ls lt lu lv b">performance.now()</code>方法可以用来测试代码的性能。这个方法可以用来检查代码的执行时间。</p><p id="8807" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它返回时间的毫秒值(double类型)。从执行开始的时间由返回值表示。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h2 id="e4b4" class="md me iq bd mf mg mh dn mi mj mk dp ml lf mm mn mo lj mp mq mr ln ms mt mu mv bi translated">performance.now()之前</h2><p id="21bd" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">检查代码性能的古老方法是在代码执行前后使用<code class="fe ls lt lu lv b">Date()</code>。下面的代码演示了这一点:</p><pre class="kg kh ki kj gt nb lv nc nd aw ne bi"><span id="62d9" class="md me iq lv b gy nf ng l nh ni">const start = new Date();</span><span id="cc3c" class="md me iq lv b gy nj ng l nh ni">for(let i = 0; i &lt; 100000; i++) {<br/>    tasks[i].doSomethingHeavy();<br/>}</span><span id="6ec1" class="md me iq lv b gy nj ng l nh ni">const end = new Date();</span><span id="721d" class="md me iq lv b gy nj ng l nh ni">const time = start.getTime() - end.getTime();<br/>// use time to measure performance</span></pre><blockquote class="nk nl nm"><p id="c11c" class="kw kx nn ky b kz la jr lb lc ld ju le no lg lh li np lk ll lm nq lo lp lq lr ij bi translated">此代码仅用于演示目的。当您尝试执行时，它可能不会执行。</p></blockquote><p id="bf3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以在这里，我们将执行<code class="fe ls lt lu lv b">for</code>循环前的时间保存在<code class="fe ls lt lu lv b">start</code>变量中，并将执行<code class="fe ls lt lu lv b">for</code>循环后的当前时间记录在<code class="fe ls lt lu lv b">end</code>变量中。然后我们简单地得到<code class="fe ls lt lu lv b">start</code>和<code class="fe ls lt lu lv b">end</code>之间的差值，找出我们的<code class="fe ls lt lu lv b">for</code>循环执行了多长时间。</p><h2 id="8bd0" class="md me iq bd mf mg mh dn mi mj mk dp ml lf mm mn mo lj mp mq mr ln ms mt mu mv bi translated">更好的方法:使用性能。现在</h2><p id="4d66" class="pw-post-body-paragraph kw kx iq ky b kz mw jr lb lc mx ju le lf my lh li lj mz ll lm ln na lp lq lr ij bi translated">现在，看看下面的代码片段。</p><pre class="kg kh ki kj gt nb lv nc nd aw ne bi"><span id="fd8f" class="md me iq lv b gy nf ng l nh ni">const start = performance.now();        // UPDATED</span><span id="b457" class="md me iq lv b gy nj ng l nh ni">for(let i = 0; i &lt; 100000; i++) {<br/>    tasks[i].doSomethingHeavy();<br/>}</span><span id="0167" class="md me iq lv b gy nj ng l nh ni">const end = performance.now();           // UPDATED</span><span id="263a" class="md me iq lv b gy nj ng l nh ni">const time = start - end;                // UPDATED<br/>// use time to measure performance</span></pre><p id="80f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">performance.now()</code>提供的时间戳不限于一毫秒的分辨率，不像JavaScript提供的其他计时数据(例如，<code class="fe ls lt lu lv b">Date.now</code>)。相反，它们使用具有微秒精度的浮点值来表示时间。</p><p id="a75c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与<code class="fe ls lt lu lv b">Date.now()</code>相反，<code class="fe ls lt lu lv b">performance.now()</code>提供的值以稳定的速率增加，与系统时钟无关(可以手动调整或通过NTP等软件调整)。否则<code class="fe ls lt lu lv b">performance.timing.navigationStart + performance.now()</code>之和会接近<code class="fe ls lt lu lv b">Date.now ()</code>。</p><p id="4689" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">要了解更多关于</strong> <code class="fe ls lt lu lv b"><strong class="ky ir">performance.now()</strong></code> <strong class="ky ir">，点击</strong> <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">这里</strong> </a> <strong class="ky ir">。</strong></p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="67db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是这篇文章的内容。我希望你今天学到了一些新东西。您可以在<a class="ae kv" href="https://gouravkajal.medium.com/membership" rel="noopener">媒体</a>上<a class="ae kv" href="https://gouravkajal.medium.com/" rel="noopener">关注我</a>或者在<a class="ae kv" href="https://www.linkedin.com/in/gouravkajal/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。想看更多这样的文章，敬请期待！</p><p id="f6a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！</p><p id="3f23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nn">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nn">plain English . io</em></strong></a><em class="nn">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nn">免费周报</em> </strong> </a> <em class="nn">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nn">Twitter</em></strong></a><em class="nn">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nn">LinkedIn</em></strong></a><em class="nn">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nn">社区不和谐</em> </strong> </a> <em class="nn">。</em></p></div></div>    
</body>
</html>