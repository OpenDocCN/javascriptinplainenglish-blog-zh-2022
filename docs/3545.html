<html>
<head>
<title>Vue.js Tips: Optimize Your Vue.js Apps with ‘v-once’ and ‘v-memo’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js提示:用“v-once”和“v-memo”优化你的Vue.js应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-js-tips-optimize-your-vue-js-apps-with-v-once-and-v-memo-be7fb931e746?source=collection_archive---------8-----------------------#2022-09-06">https://javascript.plainenglish.io/vue-js-tips-optimize-your-vue-js-apps-with-v-once-and-v-memo-be7fb931e746?source=collection_archive---------8-----------------------#2022-09-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b514" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">“v-once”和“v-memo”如何提供有用和直观的方法来减少重复渲染和优化代码。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/74ad85a4fd3baf051e7b7be70a27d26a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_vLYkbP4ug4NmOhoU8HaA.png"/></div></div></figure><p id="8fa8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Vue.js就像我们在网络上使用的任何其他工具一样——你的收获将取决于你如何使用它。如果你写的代码优化的很差，你仍然会得到一个很慢的网站，即使Vue.js有很多技巧来尝试提高性能。因此，今天我们将看看如何使用两个鲜为人知的Vue HTML属性<code class="fe ln lo lp lq b">v-once</code>和<code class="fe ln lo lp lq b">v-memo</code>来优化性能。这两者都允许我们优化组件或组件树何时被重新渲染。</p><p id="e1be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这两个属性实际上并不经常使用，但是它们在一系列不同的情况下非常有用。在本指南中，我希望我能够让您了解每种方法的作用，以便您可以在下一个Vue.js项目中使用它们。</p><h1 id="5565" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">v-once in Vue.js</h1><p id="11ce" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">当一个反应元素更新时，Vue.js会相应地更新你的DOM和任何<a class="ae mo" href="https://fjolt.com/article/vue-tips-dynamic-styles" rel="noopener ugc nofollow" target="_blank"> CSS Vue变量</a>。但是，如果您知道某个东西应该只渲染一次，那么您可以直接告诉Vue.js，这样它就永远不会更新DOM树的那个部分。为此，我们使用了神奇的属性<code class="fe ln lo lp lq b">v-once</code>。让我们看一个例子，我在一个<code class="fe ln lo lp lq b">&lt;h1&gt;</code>标签上使用了<code class="fe ln lo lp lq b">v-once</code>:</p><pre class="kg kh ki kj gt mp lq mq mr aw ms bi"><span id="5880" class="mt ls iq lq b gy mu mv l mw mx">&lt;script setup&gt;<br/>import { ref } from 'vue'</span><span id="1019" class="mt ls iq lq b gy my mv l mw mx">let message = ref("Hello World")</span><span id="49dc" class="mt ls iq lq b gy my mv l mw mx">let updateMessage = () =&gt; {<br/>    message.value = 'Goodbye World'<br/>}<br/>&lt;/script&gt;</span><span id="bf90" class="mt ls iq lq b gy my mv l mw mx">&lt;template&gt;<br/>    &lt;h1 v-once&gt;{{message}}&lt;/h1&gt;<br/>    &lt;input :value="message" /&gt;<br/>    &lt;button @click="updateMessage"&gt;<br/>        Update Message<br/>    &lt;/button&gt;<br/>&lt;/template&gt;</span></pre><p id="9d96" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里，我们有一个名为<code class="fe ln lo lp lq b">message</code>的反应变量，设置为<strong class="kt ir"> Hello World </strong>，可以通过点击按钮更新为<strong class="kt ir"> Goodbye World </strong>。我们在我们的<code class="fe ln lo lp lq b">h1</code>头中使用这个<code class="fe ln lo lp lq b">message</code>变量，并将其作为我们的<code class="fe ln lo lp lq b">input</code>的值。</p><p id="8cfb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尽管点击按钮会更新<code class="fe ln lo lp lq b">input</code>的值，但是<code class="fe ln lo lp lq b">h1</code>仍然会有旧的<strong class="kt ir"> Hello World </strong>文本，因为它有属性<code class="fe ln lo lp lq b">v-once</code>。本质上，<code class="fe ln lo lp lq b">h1</code>只渲染一次，不会再更新。这对于在某些地方使用变量并让它们更新非常有用，但在其他地方则不然。这对优化你的代码也很有帮助！这也适用于在<code class="fe ln lo lp lq b">&lt;h1&gt;</code>或其子结构中提到的任何变量——整个结构只呈现一次。</p><p id="ed5d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">v-once</code>几乎可以在任何地方使用——包括在<code class="fe ln lo lp lq b">v-for</code>循环中——这使得它在Vue.js中普遍有用。</p><h1 id="58ba" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">虚拟备忘录</h1><p id="f573" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated"><code class="fe ln lo lp lq b">v-memo</code>有点类似于<code class="fe ln lo lp lq b">v-once</code>，但是它给了我们更多的灵活性。在<code class="fe ln lo lp lq b">v-memo</code>中，我们可以定义一个变量数组，如果它们更新了，我们将重新呈现这个元素和其中的任何标签。这甚至适用于HTML标记中没有提到的变量——所以我们也可以使用这种方法强制重新呈现。</p><p id="9734" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这样做的好处是，如果我们遇到多个变量总是同时更新的情况，我们可以避免多次重新渲染。让我们看看我们用于<code class="fe ln lo lp lq b">v-once</code>的代码的修改版本。在这里，我们现在有两个变量- <code class="fe ln lo lp lq b">message</code>和<code class="fe ln lo lp lq b">question</code>。每次更新都是通过点击不同的按钮实现的——一个是问题按钮，一个是信息按钮。我在<code class="fe ln lo lp lq b">&lt;h1&gt;</code>标签上使用<code class="fe ln lo lp lq b">v-memo</code>只是为了更新它，如果<code class="fe ln lo lp lq b">message</code>更新:</p><pre class="kg kh ki kj gt mp lq mq mr aw ms bi"><span id="267f" class="mt ls iq lq b gy mu mv l mw mx">&lt;script setup&gt;<br/>import { ref } from 'vue'</span><span id="c8e3" class="mt ls iq lq b gy my mv l mw mx">let message = ref("Hello World")<br/>let question = ref("How are you?")</span><span id="4b9e" class="mt ls iq lq b gy my mv l mw mx">let updateMessage = () =&gt; {<br/>  message.value = 'Goodbye World'<br/>}<br/>let updateQuestion = () =&gt; {<br/>  question.value = 'What is your name?'<br/>}<br/>&lt;/script&gt;</span><span id="7e12" class="mt ls iq lq b gy my mv l mw mx">&lt;template&gt;<br/>  &lt;h1 v-memo="[ message ]"&gt;{{message}} - {{question}}&lt;/h1&gt;<br/>  &lt;button @click="updateMessage"&gt;<br/>    Update Message<br/>  &lt;/button&gt;<br/>  &lt;button @click="updateQuestion"&gt;<br/>    Update Question<br/>  &lt;/button&gt;<br/>&lt;/template&gt;</span></pre><p id="bb50" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们点击<strong class="kt ir">更新问题</strong>按钮，用户不会有任何改变，因为<code class="fe ln lo lp lq b">v-memo</code>只关注<code class="fe ln lo lp lq b">message</code>的变化，而不是<code class="fe ln lo lp lq b">question</code>的变化——但是<code class="fe ln lo lp lq b">question</code>变量仍然会在后台更新。<strong class="kt ir">然而</strong>，如果我们点击<strong class="kt ir">更新消息</strong>按钮，那么<code class="fe ln lo lp lq b">&lt;h1&gt;</code>将立即更新，因为我们已经告诉<code class="fe ln lo lp lq b">v-memo</code>仅在变量发生变化时更新。</p><p id="9b8d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个非常巧妙的优化技巧，但它还有其他用途。例如，只有在代码中满足特定条件时，才可以更新元素和其中的所有元素/变量。唯一需要注意的是你不能在<code class="fe ln lo lp lq b">v-for</code>循环中使用<code class="fe ln lo lp lq b">v-memo</code>——所以这是需要注意的。</p><p id="9187" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过将变量添加到<code class="fe ln lo lp lq b">v-memo</code>中的数组对象，可以为<code class="fe ln lo lp lq b">v-memo</code>定义多个变量，如下所示:</p><pre class="kg kh ki kj gt mp lq mq mr aw ms bi"><span id="f515" class="mt ls iq lq b gy mu mv l mw mx">&lt;h1 v-memo="[ message, question ]"&gt;&lt;/h1&gt;</span></pre><p id="79bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有趣的是，传入一个空数组使得<code class="fe ln lo lp lq b">v-memo</code>和<code class="fe ln lo lp lq b">v-once</code>的工作方式相同😄：</p><pre class="kg kh ki kj gt mp lq mq mr aw ms bi"><span id="037f" class="mt ls iq lq b gy mu mv l mw mx">&lt;h1 v-memo="[]"&gt;&lt;/h1&gt;</span></pre><h1 id="0b9a" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">结论</h1><p id="a927" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">我希望你喜欢这个Vue.js技巧，以及<code class="fe ln lo lp lq b">v-once</code>和<code class="fe ln lo lp lq b">v-memo</code>的概述。这两个属性都非常有用，我希望你能在下一个Vue.js项目中找到使用它们的方法。要了解更多Vue.js内容，你可以点击这里查看我在我的博客上写的其他文章:</p><div class="mz na gp gr nb nc"><a href="https://fjolt.com/category/vue" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">Fjolt - Vue</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">Vue的内容和教程</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">fjolt.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq kp nc"/></div></div></a></div></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="10b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ny">更多内容请看</em><a class="ae mo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">plain English . io</em></strong></a><em class="ny">。报名参加我们的</em> <a class="ae mo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ny">免费周报</em> </strong> </a> <em class="ny">。关注我们关于</em><a class="ae mo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">Twitter</em></strong></a><a class="ae mo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">LinkedIn</em></strong></a><em class="ny"/><a class="ae mo" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">YouTube</em></strong></a><em class="ny"/><a class="ae mo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">不和</em> </strong> </a> <em class="ny">。</em></p></div></div>    
</body>
</html>