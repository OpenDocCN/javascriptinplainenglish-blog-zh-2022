<html>
<head>
<title>What is the Nullish Coalescing Operator (??) in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是零化凝聚运算符(？？)在JavaScript中？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-a-nullish-coalescing-operator-in-javascript-8012bf3e7525?source=collection_archive---------5-----------------------#2022-07-02">https://javascript.plainenglish.io/what-is-a-nullish-coalescing-operator-in-javascript-8012bf3e7525?source=collection_archive---------5-----------------------#2022-07-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bda2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">什么零化合并运算符(？？)是以及如何使用。</h2></div><p id="1728" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">nullish合并操作符是一个逻辑操作符，它非常强大，在某些情况下可以让我们的生活变得更加容易。有了这个，我们就能写出最高效的逻辑。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/7603c5de434d84fb6634a85dd7adce9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sN4b5pltxkb0oSPEfWpRRw.jpeg"/></div></div></figure><p id="3085" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ES11引入了由双问号(<code class="fe ln lo lp lq b">??</code>)表示的nullish合并运算符。</p><h2 id="dab9" class="lr ls iq bd lt lu lv dn lw lx ly dp lz ko ma mb mc ks md me mf kw mg mh mi mj bi translated">语法:</h2><p id="9c36" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">运算符写成两个问号<code class="fe ln lo lp lq b">??</code>。</p><p id="f79e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mp">无效合并运算符</em> </strong>的语法是，</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="d0ed" class="lr ls iq lq b gy mu mv l mw mx">leftExpr ?? rightExpr</span></pre><p id="de68" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是如何使用运算符的示例:</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="9be2" class="lr ls iq lq b gy mu mv l mw mx">const baz = 0 ?? 42;</span><span id="15ce" class="lr ls iq lq b gy my mv l mw mx">console.log(baz);<br/>// expected output: 0</span><span id="282c" class="lr ls iq lq b gy my mv l mw mx">null ?? 'test' // returns 'test'<br/>undefined ?? 56 // returns 56<br/>null ?? 0 // returns 0<br/>45 ?? 25 // returns 45</span></pre><h2 id="53ab" class="lr ls iq bd lt lu lv dn lw lx ly dp lz ko ma mb mc ks md me mf kw mg mh mi mj bi translated">它是如何工作的？</h2><p id="3c31" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">考虑下面的运算符示例。nullish合并运算符是一种逻辑运算符，它接受两个值:</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="bbeb" class="lr ls iq lq b gy mu mv l mw mx">const result = value1 ?? value2</span></pre><p id="1019" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果第一个值(<code class="fe ln lo lp lq b">value1</code>)是<code class="fe ln lo lp lq b">null</code>或<code class="fe ln lo lp lq b">undefined</code>，上面的语句<strong class="kh ir"> </strong>将返回第二个值(<code class="fe ln lo lp lq b">value2</code>)。否则，它将返回第一个值(<code class="fe ln lo lp lq b">value1</code>)。</p><p id="5445" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从技术上讲，上述逻辑等同于以下块:</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="c89f" class="lr ls iq lq b gy mu mv l mw mx">const result = value1;</span><span id="96ee" class="lr ls iq lq b gy my mv l mw mx">if(result === null || result === undefined) {<br/>   result = value2;<br/>}</span></pre><p id="e612" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">换句话说，</p><p id="79d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们假设<code class="fe ln lo lp lq b">null</code>和<code class="fe ln lo lp lq b">undefined</code>在这个上下文中是相似的，并假设'<em class="mp">定义的</em>不是<code class="fe ln lo lp lq b">null</code>或<code class="fe ln lo lp lq b">undefined</code></p><p id="7a11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以这样定义我们的例子，</p><p id="a976" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ln lo lp lq b">value1 ?? value2</code>的结果是，</p><ul class=""><li id="c9bf" class="mz na iq kh b ki kj kl km ko nb ks nc kw nd la ne nf ng nh bi translated">如果<code class="fe ln lo lp lq b">value1</code>是<em class="mp">定义的</em>，则返回<code class="fe ln lo lp lq b">value1</code></li><li id="f56f" class="mz na iq kh b ki ni kl nj ko nk ks nl kw nm la ne nf ng nh bi translated">如果<code class="fe ln lo lp lq b">value1</code>不是<em class="mp">定义的</em>，则返回<code class="fe ln lo lp lq b">value2</code></li></ul><p id="b538" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看更多的零化合并运算符的例子。</p><p id="57bf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下面的例子中，第一个值是<code class="fe ln lo lp lq b">null</code>,第二个值是字符串。因为第一个值中有<code class="fe ln lo lp lq b">null</code>，所以返回第二个值(<code class="fe ln lo lp lq b">‘default string’</code>)。</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="cf36" class="lr ls iq lq b gy mu mv l mw mx">const nullValue = null;<br/>const foo = <!-- -->nullValue<!-- --> ?? ‘default string’;</span><span id="1677" class="lr ls iq lq b gy my mv l mw mx">console.log(foo);<br/>// expected output: “default string”</span></pre><p id="19bc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们再看一个返回第一个值的例子。</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="d856" class="lr ls iq lq b gy mu mv l mw mx">const someNumber = 42;</span><span id="1f32" class="lr ls iq lq b gy my mv l mw mx">const valC = someNumber ?? 0;</span><span id="eb78" class="lr ls iq lq b gy my mv l mw mx">console.log(<!-- -->valC<!-- -->);<br/>// expected output: “42”</span></pre><p id="1c1f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们在第一个字符串中有一个数字，所以返回第一个值(<code class="fe ln lo lp lq b">someNumber or 42</code>)。</p><p id="d0e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑下面的例子，注意第一个值需要是<code class="fe ln lo lp lq b">null</code>或<code class="fe ln lo lp lq b">undefined</code>，以便<code class="fe ln lo lp lq b">??</code>操作符返回第二个值。不考虑空字符串或0。</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="c9ee" class="lr ls iq lq b gy mu mv l mw mx">const emptyText = ""; // falsy<br/>const valB = emptyText ?? "default for B";</span><span id="819a" class="lr ls iq lq b gy my mv l mw mx">console.log(valB); // "" (as the empty string is not null or undefined)</span></pre><h2 id="be55" class="lr ls iq bd lt lu lv dn lw lx ly dp lz ko ma mb mc ks md me mf kw mg mh mi mj bi translated">与逻辑OR (||)运算符有何不同？</h2><p id="b6cf" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">OR <code class="fe ln lo lp lq b">||</code>运算符的使用方法与<code class="fe ln lo lp lq b">??</code>相同。对于上面的例子，我们可以得到相同的结果。</p><p id="589a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，</p><p id="b983" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ln lo lp lq b">||</code>和<code class="fe ln lo lp lq b">??</code>有一个区别。</p><ul class=""><li id="bb79" class="mz na iq kh b ki kj kl km ko nb ks nc kw nd la ne nf ng nh bi translated"><code class="fe ln lo lp lq b">||</code>返回第一个<em class="mp">真值</em>值。</li><li id="5412" class="mz na iq kh b ki ni kl nj ko nk ks nl kw nm la ne nf ng nh bi translated"><code class="fe ln lo lp lq b">??</code>返回第一个<em class="mp">定义的</em>值。</li></ul><p id="5503" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">换句话说，<code class="fe ln lo lp lq b">||</code>不区分以下值(falsy)</p><ul class=""><li id="1c2f" class="mz na iq kh b ki kj kl km ko nb ks nc kw nd la ne nf ng nh bi translated"><code class="fe ln lo lp lq b">false</code></li><li id="74fe" class="mz na iq kh b ki ni kl nj ko nk ks nl kw nm la ne nf ng nh bi translated"><code class="fe ln lo lp lq b">0</code></li><li id="ddad" class="mz na iq kh b ki ni kl nj ko nk ks nl kw nm la ne nf ng nh bi translated">一个空字符串(<code class="fe ln lo lp lq b">“”</code>)</li><li id="ecf8" class="mz na iq kh b ki ni kl nj ko nk ks nl kw nm la ne nf ng nh bi translated"><code class="fe ln lo lp lq b">null</code></li><li id="40d2" class="mz na iq kh b ki ni kl nj ko nk ks nl kw nm la ne nf ng nh bi translated"><code class="fe ln lo lp lq b">undefined</code></li></ul><p id="031f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们被称为——<a class="ae nn" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener ugc nofollow" target="_blank"><em class="mp">falsy</em></a>值。如果其中任何一个是<code class="fe ln lo lp lq b">||</code>的第一个参数，那么我们将得到第二个参数作为结果。</p><pre class="lc ld le lf gt mq lq mr ms aw mt bi"><span id="b475" class="lr ls iq lq b gy mu mv l mw mx">0 || 2 // returns 2<br/>0 ?? 2 // returns 0</span></pre><p id="5e6c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，<code class="fe ln lo lp lq b">??</code>只考虑<code class="fe ln lo lp lq b">null</code>和<code class="fe ln lo lp lq b">undefined</code>不同于<code class="fe ln lo lp lq b">||</code></p><h2 id="64ee" class="lr ls iq bd lt lu lv dn lw lx ly dp lz ko ma mb mc ks md me mf kw mg mh mi mj bi translated">结论:</h2><p id="734a" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">这就是<code class="fe ln lo lp lq b">??</code>运算符的工作方式。如果您在代码中使用了该运算符，请在下面添加注释。谢谢你。</p><p id="bf39" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mp">更多内容请看</em><a class="ae nn" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mp">plain English . io</em></strong></a><em class="mp">。报名参加我们的</em> <a class="ae nn" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mp">免费周报</em> </strong> </a> <em class="mp">。关注我们</em><a class="ae nn" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mp">Twitter</em></strong></a><em class="mp">和</em><a class="ae nn" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mp">LinkedIn</em></strong></a><em class="mp">。查看我们的</em> <a class="ae nn" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mp">社区不和谐</em> </strong> </a> <em class="mp">加入我们的</em> <a class="ae nn" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mp">人才集体</em> </strong> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>