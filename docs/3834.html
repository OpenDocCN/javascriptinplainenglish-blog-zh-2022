<html>
<head>
<title>Interviewer: Can (a==1 &amp;&amp; a==2 &amp;&amp; a==3) Ever Evaluate to ‘true’ in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">记者:在JavaScript中,( a==1 &amp;&amp; a==2 &amp;&amp; a==3)能计算为“真”吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/interviewer-can-a-1-a-2-a-3-ever-evaluate-to-true-in-javascript-d2329e693cde?source=collection_archive---------0-----------------------#2022-09-30">https://javascript.plainenglish.io/interviewer-can-a-1-a-2-a-3-ever-evaluate-to-true-in-javascript-d2329e693cde?source=collection_archive---------0-----------------------#2022-09-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0aec" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">是的，这可能是真的，而且有6种方式——太神奇了！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/52fc70fc918567b9908c81aa7f49c2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XjFNrlBmVu9bms9A"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@miklevasilyev?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mikhail Vasilyev</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5226" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近被问到一个很有意思的面试问题:<strong class="ky ir">在JavaScript中(a = = 1&amp;&amp;a = = 2&amp;&amp;a = = 3)是否可以求值为true？。</strong>因为答不上来差点失去工作机会。</p><p id="b0fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那一刻，我被问题惊呆了，以为面试官在开玩笑。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/9f9e22571cc3b6339dbd1662a6d749ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WuLsazVSlBYjiZpR.png"/></div></div></figure><p id="aaf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但当我看到他的“微笑”时，一种<strong class="ky ir">“你一定不知道答案”</strong>的感觉闪过我的脑海。这绝对不是一个容易解决的问题。</p><p id="b0cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文章将给出6个<strong class="ky ir">专业解答</strong>。让我们马上开始。</p><h1 id="4059" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">解决方案1: valueOf &amp;&amp; toString</h1><p id="75b3" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">第一个解决方案非常简单，我相信一旦您阅读了这段代码，您就会有一个想法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/706c5f524adf4589e0587e739ab8a419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vrO3IBcxPb_ti7xvs79q3Q.png"/></div></div></figure><p id="f3e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">太神奇了，这是怎么回事？别担心，我的朋友，我会试着解释原因。</strong></p><h1 id="9630" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">解释部分隐式转换规则</h1><p id="46a6" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当在JavaScript中使用<code class="fe mt mu mv mw b">==</code>比较两个值时，执行以下操作:</p><ol class=""><li id="3910" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">将两个比较值转换为同一类型。</li><li id="53b6" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">转换后(等式的一侧或两侧可能被转换)，比较这些值。</li></ol><p id="aec1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比较规则如下表所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/0c273b44eaa2ba0b7e7e219d8f5ac224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pRLPrWYp2JlIK_TF.png"/></div></div></figure><p id="130c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从表中可以获得一些信息。为了使(<code class="fe mt mu mv mw b">a == 1</code>)，a只能是这几种情况:</p><ol class=""><li id="44fa" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated"><code class="fe mt mu mv mw b">a</code>的类型是字符串，可以转换成数字1 ( <code class="fe mt mu mv mw b">'1' == 1 =&gt; true</code>)。</li><li id="b5ea" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><code class="fe mt mu mv mw b">a</code>的类型为布尔型，可以转换为数字1 ( <code class="fe mt mu mv mw b">true == 1 =&gt; true</code>)。</li><li id="9772" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><code class="fe mt mu mv mw b">a</code>的类型是Object，可以通过“转换机制”转换成数字1。</li></ol><h1 id="22c2" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">对象到原始类型的“转换机制”</h1><p id="1b8b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">规则1和规则2没有什么特别之处。让我们来看看3:</p><p id="4221" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当对象转换为原始类型时，将调用内置的[top primitive]函数。逻辑大致如下:</p><ol class=""><li id="5670" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">如果有<code class="fe mt mu mv mw b">Symbol.toPrimitive</code>方法，先调用它，否则2。</li><li id="e021" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">调用<code class="fe mt mu mv mw b">valueOf</code>，如果可以转换成原来的类型，返回，否则</li><li id="1762" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">调用<code class="fe mt mu mv mw b">toString</code>，如果能转换成原来的类型，返回，否则，4。</li><li id="6529" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">如果没有返回原始类型，将会报告一个错误。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="fb06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的朋友，感谢你非常耐心地阅读了很长时间，我相信你心中已经有了答案。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/342ed3d37a9e605472cf1cdf569b06c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vvNg4snPMrRnkncBY3MUmQ.png"/></div></div></figure><h1 id="09ba" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">解决方案2:数组和连接</h1><p id="b882" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">数组对象的隐式转换也符合规则3，但是“join”方法会在“toString”之前调用。所以你可以从这里开始。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/e536cd214241f9f72cd169c23f2eaf10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-0sMrsXUXl7BJeT2Sxpgg.png"/></div></div></figure><h1 id="58fb" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">解决方案3:使用“with”运算符</h1><p id="7d7f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/with" rel="noopener ugc nofollow" target="_blank"> MDN </a>有一个关于<code class="fe mt mu mv mw b">with</code>使用的警告，仿佛它的存在就是一个错误。我在工作中没有用过，但是可以用来解决这个问题。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/74034b11add9674b7e5afd2f6c241e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PsNAGkBrJRjiKGTG.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="85ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你太聪明了，甚至不需要我解释代码的意思。</p><h1 id="c7b5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">解决方案4: Symbol.toPrimitive</h1><p id="a633" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们可以用隐式转换规则3来完成问题(看完答案你就知道为什么了！).</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h1 id="a146" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">数据劫持也是一种出路</h1><p id="79af" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">通过隐式转换，我们做出了3个使<code class="fe mt mu mv mw b">a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3</code>返回true的答案，你一定想到了另一个答案，<code class="fe mt mu mv mw b">data hijacking</code>，伟大的Vue我们用它赢得了百万开发者的心，我们也试图用它来解决这个面试问题。</p><h1 id="e5b6" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">解决方案5: Object.defineProperty</h1><p id="afb8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">通过劫持“窗口”对象，每次读取“a”属性时，a都会加1。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h1 id="c974" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">解决方案6:代理</h1><p id="a75a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">还有一种劫持数据的方式，Vue3也用<code class="fe mt mu mv mw b">Proxy</code>取代了<code class="fe mt mu mv mw b">Object.defineProperty</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h1 id="3bfe" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">最后</h1><p id="ca8f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated"><strong class="ky ir">感谢阅读。</strong>我期待着<strong class="ky ir"> </strong>您的关注和阅读更多高质量的文章。</p><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/i-lost-a-job-opportunity-just-because-of-promise-all-be396f6efe87"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">“我失去了一个工作机会，只是因为承诺。所有”</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">一次让我好难过的面试经历。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-what-happened-to-npm-run-xxx-cdcb37dbaf44"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">采访者:“npm跑xxx”怎么了？</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">一个大多数人都不知道的秘密。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ob l"><div class="oh l od oe of ob og kp ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-can-x-x-return-true-in-javascript-7e1d1fa7b5cd"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">面试官:可以“x！== x "在JavaScript中返回True？</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">你可能不知道的五个神奇的JavaScript知识点！</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ob l"><div class="oi l od oe of ob og kp ns"/></div></div></a></div><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/its-2022-don-t-abuse-the-arrow-function-anymore-905862a9c668"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">现在是2022年，不要再滥用箭头功能了</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">不应该使用箭头函数的4种情况。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ob l"><div class="oj l od oe of ob og kp ns"/></div></div></a></div></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><p id="7ca6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="or">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="or">plain English . io</em></strong></a><em class="or">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="or">免费周报</em> </strong> </a> <em class="or">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="or">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="or">LinkedIn</em></strong></a><em class="or"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="or">YouTube</em></strong></a><em class="or"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="or">不和</em> </strong> </a> <em class="or">。对增长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="or">电路</em> </strong> </a> <em class="or">。</em></p></div></div>    
</body>
</html>