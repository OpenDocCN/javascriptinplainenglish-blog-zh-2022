<html>
<head>
<title>A Comprehensive Guide to NextJS Routing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NextJS路由综合指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-comprehensive-guide-to-nextjs-routing-72b1abcf7c26?source=collection_archive---------5-----------------------#2022-02-19">https://javascript.plainenglish.io/a-comprehensive-guide-to-nextjs-routing-72b1abcf7c26?source=collection_archive---------5-----------------------#2022-02-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/08bb6d66782e519111c58c864b105203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AXwXgoPnpaQ8g5BI9jathA.png"/></div></div></figure><p id="1e78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">大家好，我的名字是Igor，如果你喜欢我写的东西，你可能也会喜欢我在Twitter上说的话，请过来说‘嗨！👋。</em></p><p id="b3d3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本文是我整理的整个Next.js系列文章的一部分，旨在帮助您成为Next.js专业人员，并开始构建速度极快的React应用程序，可以是静态的、客户端呈现的、服务器呈现的或两者兼而有之(但我们将在后面讨论)。</p><p id="d842" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">💡如果你不想错过任何教程，请点击<a class="ae ku" href="https://www.getrevue.co/profile/igorasilveira" rel="noopener ugc nofollow" target="_blank">此处</a>注册我的时事通讯，或前往<a class="ae ku" href="https://dailydev.io/" rel="noopener ugc nofollow" target="_blank"> DailyDev.io </a>获取更多信息。</p><p id="a909" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个问题上，我们将了解Next.js如何通过使用<em class="kt">预取</em>来确保我们的应用快速安全，从而使我们的应用在页面间导航变得异常简单。</p><h2 id="32f6" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated">💡你可以在这里找到这个项目<a class="ae ku" href="https://github.com/igorasilveira/blog-examples/tree/main/nextjs-basic-routing" rel="noopener ugc nofollow" target="_blank">的源代码。</a></h2><p id="919f" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">所以让我们开始吧！</p><h1 id="52b7" class="lt kw in bd kx lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj bi translated">先决条件</h1><ul class=""><li id="cb40" class="mk ml in jx b jy lo kc lp kg mm kk mn ko mo ks mp mq mr ms bi translated">节点≥ 12</li><li id="759f" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated">反应基础</li></ul><h1 id="a186" class="lt kw in bd kx lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj bi translated">创建Next.js应用程序</h1><p id="c23f" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">为此，我们需要自己全新构建的Next.js，只需在您希望存储所有优秀的Next.js项目的目录中运行该命令，就可以获得它。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="5e02" class="kv kw in nd b gy nh ni l nj nk">npx create-next-app nextjs-basic-routing — use-npm — typescript</span></pre><p id="25bf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">我们刚刚所做工作的明细:</em></p><ul class=""><li id="4103" class="mk ml in jx b jy jz kc kd kg nl kk nm ko nn ks mp mq mr ms bi translated"><code class="fe no np nq nd b">npx</code> -是一个命令行界面工具，可以轻松执行npm软件包，而无需在您自己的计算机上实际安装它们。</li><li id="71ba" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated"><code class="fe no np nq nd b">create-next-app</code> -我们最好的朋友，将为你搭建一个完美平衡的Next.js应用。</li><li id="a0f2" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated"><code class="fe no np nq nd b">nextjs-basic-routing</code>——这是我决定给我的项目取的名字，可以随意混合一下。</li><li id="36b8" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated"><code class="fe no np nq nd b">--use-npm</code> -该标志指定我们希望使用NPM作为我们的依赖管理器。</li><li id="ea10" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated"><code class="fe no np nq nd b">--typescript</code>——这个标志告诉搭建工具我们想要生成一个TypeScript项目，它初始化所有需要的依赖项(这更多的是我的个人偏好——❤️typescript)。</li></ul><h1 id="10f6" class="lt kw in bd kx lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj bi translated">运行我们的应用</h1><p id="1899" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">我们的Next.js项目已经创建，所有依赖项都已自动安装。我们现在可以运行它，并看到我们的应用程序来生活！</p><p id="368e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们用来搭建项目的同一个终端中，我们现在<code class="fe no np nq nd b">cd</code>进入我们的项目文件夹ie。<code class="fe no np nq nd b">cd nextjs-basic-routing</code>我们运行下面的命令，以<strong class="jx io">开发模式</strong>启动我们的项目。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="5041" class="kv kw in nd b gy nh ni l nj nk">npm run dev</span></pre><p id="99b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">几秒钟后，你的Next.js应用服务器启动(希望成功),你现在可以导航到<code class="fe no np nq nd b">http://localhost:3000</code>并显示你的Next.js应用，如下图所示。</p><figure class="my mz na nb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/467fb451b93aaed493a95b5df542f8d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OptUwkEzDO9LM0Ty"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">Next.js Application Homepage</figcaption></figure><p id="84fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们现在开始营业了！🥳</p><h1 id="55b4" class="lt kw in bd kx lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj bi translated">Next.js路由</h1><p id="eb5b" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">现在我们已经启动并运行了我们的应用程序，让我们开始看看Next.js如何漂亮地处理它的页面和路由，从创建我们自己的新页面开始。</p><h1 id="e910" class="lt kw in bd kx lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj bi translated">页</h1><p id="26b0" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">在Next.js中，每个页面都是一个React组件，它是从项目根目录下的<code class="fe no np nq nd b">/pages</code>目录中的一个文件中导出的。文件名决定了它将关联的路径，包括React组件所在的文件夹(如果有)。有一个特殊的文件名与你的应用程序的<strong class="jx io">根</strong>相关联，那就是已经包含在我们初始搭建中的<code class="fe no np nq nd b">index.tsx</code>文件。</p><ul class=""><li id="86ae" class="mk ml in jx b jy jz kc kd kg nl kk nm ko nn ks mp mq mr ms bi translated"><code class="fe no np nq nd b">/pages/index.tsx</code>地图到<code class="fe no np nq nd b">/</code>路线(我们的主页)</li><li id="5359" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated"><code class="fe no np nq nd b">/pages/dogs/a-doggo.tsx</code>映射到<code class="fe no np nq nd b">/dogs/a-doggo.tsx</code>路线。</li></ul><h1 id="4fd7" class="lt kw in bd kx lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj bi translated">创建新页面</h1><p id="96c2" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">因此，如果我们要创建映射到该特定路径的doggo页面，我需要在<code class="fe no np nq nd b">/pages</code>中创建一个新文件夹，在这个新文件夹中，从名为<code class="fe no np nq nd b">a-doggo.tsx</code>的文件中导出一个新的React组件。您的文件树将如下所示:</p><figure class="my mz na nb gt jo gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/ae7cc0b8d4d909ad32966cb47490ba69.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/0*KR8ivuqGsdxXqa_M"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">Next.js File Structure</figcaption></figure><p id="83aa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">(不要介意<code class="fe no np nq nd b">_app.tsx</code>文件，就目前而言，那是一个特殊的文件)</p><p id="f2e4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">新文件的内容可以是您希望的任何内容，只要它导出一个默认的React组件，该组件呈现一些JSX，然后Next.js可以将其呈现为HTML。例如，这是我的React组件的代码。</p><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="ab98" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我想要一个狗狗的随机图像，所以我使用了<a class="ae ku" href="https://loremflickr.com" rel="noopener ugc nofollow" target="_blank">https://loremflickr.com</a>，一个随机生成资产的好工具。为了让它与Next.js一起工作，我们需要将这个域作为图像提供者添加到下面的<code class="fe no np nq nd b">next.config.js</code>文件中。</p><p id="ebb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">(<strong class="jx io">注意:</strong>这是可选的，您可以让React组件显示您想要的任何内容，而不使用这个图像生成器)</p><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9268" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果我们现在运行我们的服务器并导航到<code class="fe no np nq nd b">http://localhost:3000/dogs/a-doggo</code>，将会有一个狗的随机图像供我们思考。🐶</p><figure class="my mz na nb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/3ccfc7e0bbafae3061ecd7f36efd24e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SU-UbzbS0TKWFLvV"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">Next.js Custom Static Doggo Page</figcaption></figure><h1 id="e186" class="lt kw in bd kx lu lv lw la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj bi translated">导航静态路线</h1><p id="2b11" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">我们的应用程序现在有两个页面，为了在它们之间导航，我们一直在地址栏中手动更改我们的URL。让我们改变这一切！</p><p id="68b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通常，我们使用<code class="fe no np nq nd b">&lt;a&gt;</code> HTML标签来链接我们自己或外部网站上的页面。但是Next.js建立在这个基础之上。您可以使用<code class="fe no np nq nd b">Link</code>组件包装<code class="fe no np nq nd b">&lt;a&gt;</code>标签，允许您在应用程序的不同页面进行<strong class="jx io">客户端导航</strong>。</p><p id="7693" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">客户端导航</strong>意味着使用<em class="kt"> JavaScript </em>进行页面转换，这比默认的浏览器导航方式更快。</p><p id="471b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用Next.js <code class="fe no np nq nd b">Link</code>组件的另一个好处是，一旦<code class="fe no np nq nd b">Link</code>在视窗中可见，包含一个或多个<code class="fe no np nq nd b">Link</code>组件的页面就会<strong class="jx io">在后台预取</strong>链接页面的代码。这允许更快的初始页面呈现，因为Next.js将只加载您请求的页面的代码，并且只在<code class="fe no np nq nd b">Link</code>组件可见时加载其他链接的页面，并且它在后台进行，不会影响整体用户体验，并且使客户端应用程序的导航速度极快。</p><p id="07ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是我们如何使用它呢？嗯，这非常简单，就像使用普通的<code class="fe no np nq nd b">&lt;a&gt;</code> HTML标签一样。所以让我们在我们的主页上包含一个<code class="fe no np nq nd b">Link</code>来进入我们的<em class="kt"> doggo </em>页面，另一个用来回家。</p><p id="43d1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用以下代码替换您的<code class="fe no np nq nd b">/pages/index.tsx</code>代码:</p><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="d157" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在您的<code class="fe no np nq nd b">/pages/a-doggo.tsx</code>中，用这段代码替换您的代码，在这段代码中，我们添加了一个链接到我们主页的样式化段落。</p><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="5069" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们可以轻松地浏览我们的应用程序页面😎</p><figure class="my mz na nb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nz"><img src="../Images/459b2fb18635f8e78a86213c2f5cd392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*I8uB2OqrbA1YRvLWIAt6IA.gif"/></div></div></figure><p id="60ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您已经有了一个可用的Next.js应用程序，不要止步于此。作为一个很好的练习，继续为你的应用程序创建更多的页面。关于我们，联系人)和更多doggos。如果你遇到任何麻烦，请随时在Twitter上联系我，我的DMs永远是开放的。</p><p id="7ff8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">下一步:</strong>请关注我接下来的Next.js教程，我们将在其中复习<em class="kt">动态路线</em>和更多内容！如果你不想错过任何教程，点击这里注册我的时事通讯。</p><p id="721d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">更多内容请看</em><a class="ae ku" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">plain English . io</em></strong></a><em class="kt">。报名参加我们的</em> <a class="ae ku" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="kt">免费周报</em> </strong> </a> <em class="kt">。在我们的</em> <a class="ae ku" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="kt">社区</em> </strong> </a> <em class="kt">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>