<html>
<head>
<title>How to Call a String as a Function: Use Case in a Form with Multiple Controlled Inputs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将字符串作为函数调用:具有多个受控输入的表单中的用例</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-call-a-string-as-a-function-use-case-in-a-form-with-multiple-controlled-inputs-c22f86baf57b?source=collection_archive---------6-----------------------#2022-10-28">https://javascript.plainenglish.io/how-to-call-a-string-as-a-function-use-case-in-a-form-with-multiple-controlled-inputs-c22f86baf57b?source=collection_archive---------6-----------------------#2022-10-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="15f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">受控组件是那些<a class="ae ki" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">使用状态</a>来处理数据的组件。它们使程序不仅能在用户输入后验证用户输入，还能从一开始就禁止用户输入无效的输入。</p><h1 id="8c85" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">1.用受控组件设置表单。</h1><p id="40a7" class="pw-post-body-paragraph jk jl in jm b jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd ll kf kg kh ig bi translated">要设置受控组件，您必须首先从React导入<code class="fe lm ln lo lp b">useState</code>。然后，您声明您的变量，并将其设置为等于<code class="fe lm ln lo lp b">useState</code>。<code class="fe lm ln lo lp b">useState</code>接受一种说法:初始状态。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/492be344531cf36630c4638be25026b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*ysy4CZQD4FxlKqGDlzKEgA.png"/></div></figure><p id="7a14" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，您设置您的表单。在每个输入中，将<code class="fe lm ln lo lp b">name</code>属性设置为一个字符串，将<code class="fe lm ln lo lp b">value</code>属性设置为受控变量，将<code class="fe lm ln lo lp b">onChange</code>属性设置为<code class="fe lm ln lo lp b">handleChange</code>，我们将在下面声明。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/5ac25f73d0c756417830ce731cf4cc84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*qUBerUafQt5xJmHKZmWK8w.png"/></div></figure><h1 id="b05a" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">2.设置一个函数来处理onChange事件。</h1><p id="882c" class="pw-post-body-paragraph jk jl in jm b jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd ll kf kg kh ig bi translated">在计算机科学中，DRY代表“不要重复自己。”干燥的一个方面是当我们认识到一种模式时，我们会抽象出一些功能。在本例中，我们有许多不同的表单输入需要更新，我们可以看到setter函数有一个命名模式:<code class="fe lm ln lo lp b">setVariable</code>。与其为每个变量的组件声明不同的<code class="fe lm ln lo lp b">handleChange</code>函数，不如有一个为所有受控组件工作的<code class="fe lm ln lo lp b">handleChange</code>函数。</p><p id="92e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为我们的输入组件同时具有<code class="fe lm ln lo lp b">name</code>和<code class="fe lm ln lo lp b">value</code>属性，这些属性将作为<code class="fe lm ln lo lp b">event</code>对象的一部分传递给<code class="fe lm ln lo lp b">handleChange</code>。我们可以使用<code class="fe lm ln lo lp b">event.target.name</code>和<code class="fe lm ln lo lp b">event.target.value</code>来访问这些属性。</p><p id="85dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们需要创建一个匹配setter函数模式的字符串变量。这里，这是使用字符串插值完成的。<code class="fe lm ln lo lp b">"set"</code>是硬编码的，那么选择<code class="fe lm ln lo lp b">name</code>的第一个字母并大写，然后添加<code class="fe lm ln lo lp b">name</code>的剩余字母，仍然是小写。结果就是<code class="fe lm ln lo lp b">func = "setOwner"</code>。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/15b9a6af717ee85c961458824030d633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*_AYDw5E83A9oo-Olx1MV9w.png"/></div></figure><h1 id="893e" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">3.设置上下文对象。</h1><p id="0276" class="pw-post-body-paragraph jk jl in jm b jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd ll kf kg kh ig bi translated">接下来我们需要一种方法来调用这个字符串变量作为一个函数。为此，我们需要设置一个映射setter函数的<code class="fe lm ln lo lp b">context</code>对象。对于我们希望调用的每个函数，键应该是函数名的字符串版本，值应该是回调函数。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/ffa3e6b991f2250085abae71bce5348d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*vO50RnUfhUX4aHvo_VpjTw.png"/></div></figure><h1 id="d7b7" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">4.声明一个函数来处理函数执行。</h1><p id="923c" class="pw-post-body-paragraph jk jl in jm b jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd ll kf kg kh ig bi translated">接下来，我们需要编写一个接受setter字符串并调用它的函数:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/d4c7bfab168eb8a8122f48739289b02a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*gHetYHnFWdX9DCLXGS1ZSg.png"/></div></figure><p id="6932" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，<code class="fe lm ln lo lp b">executeFunction</code>接受了<code class="fe lm ln lo lp b">functionString</code>和<code class="fe lm ln lo lp b">context</code>对象。它还隐式地接受我们需要访问的其他<code class="fe lm ln lo lp b">arguments</code>。我们通过调用<code class="fe lm ln lo lp b">Array.prototype.slice.call(arguments, 2)</code>来做到这一点。</p><p id="88df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通常我们可以直接在一个数组上调用slice】。<code class="fe lm ln lo lp b">slice</code>方法隐式地假设它应该切片的<code class="fe lm ln lo lp b">this</code>变量是您调用该方法的数组。不过，在这种情况下，我们希望<code class="fe lm ln lo lp b">slice</code>对一个类似于对象<code class="fe lm ln lo lp b">arguments</code>的数组<em class="ly">进行操作。我们通过使用<code class="fe lm ln lo lp b">call</code>并传递类似数组的对象来实现这一点。</em></p><p id="547a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下一步是<code class="fe lm ln lo lp b">context</code>对象的重要性:每个键/值对代表一个字符串/函数对。我们不能直接调用插值函数。相反，我们需要利用<code class="fe lm ln lo lp b">context</code>对象通过字符串键访问回调值。</p><p id="4179" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我们使用<code class="fe lm ln lo lp b">apply</code>来调用回调函数。我们再次传递包含我们的字符串/函数引用的<code class="fe lm ln lo lp b">context</code>变量，并传递提供的任何附加参数。</p><h1 id="cfdb" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">5.调用执行函数。</h1><p id="bfe1" class="pw-post-body-paragraph jk jl in jm b jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd ll kf kg kh ig bi translated">在这种情况下，对executeFunction的调用将如下所示:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/6213f343ffe382efa5da0dd5a9e0c0f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*lXVzY_vmlue2GaohakxLXA.png"/></div></figure><p id="3669" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你有它！现在，您可以使用字符串来调用同名的函数。如果你觉得这很有帮助，请在下面的评论中告诉我！</p></div><div class="ab cl lz ma hr mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ig ih ii ij ik"><pre class="lr ls lt lu gt mg lp mh mi aw mj bi"><span id="fd6e" class="mk kk in lp b gy ml mm l mn mo">import { useState } from 'react'</span><span id="aa05" class="mk kk in lp b gy mp mm l mn mo">const [owner, setOwner] = useState("")</span><span id="62a8" class="mk kk in lp b gy mp mm l mn mo">const context = {<br/>   "setOwner": setOwner<br/>}</span><span id="f5b9" class="mk kk in lp b gy mp mm l mn mo">function executeFunction (functionString, context) {<br/>   const args = Array.prototype.slice.call(arguments, 2)<br/>   return context[functionString].apply(context, args)<br/>}</span><span id="8bb6" class="mk kk in lp b gy mp mm l mn mo">function handleChange (event) {<br/>   const name = event.target.name<br/>   const func = `set${name.charAt(0).toUpperCase() + name.slice(1)}`<br/>   executeFunction(func, context, event.target.value)<br/>}</span><span id="61ad" class="mk kk in lp b gy mp mm l mn mo">return (<br/>   &lt;form&gt;<br/>      &lt;input name="owner"<br/>         type="text"<br/>         value={owner}<br/>         onChange={handleChange} /&gt;<br/>   &lt;/form&gt;<br/>)</span></pre><p id="5f34" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ly">更多内容看</em> <a class="ae ki" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ly">说白了就是</em> </strong> </a> <em class="ly">。</em></p><p id="90f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ly">报名参加我们的</em> <a class="ae ki" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ly">免费周报</em> </strong> </a> <em class="ly">。关注我们上</em> <a class="ae ki" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ly">推特</em> </strong> </a>，<a class="ae ki" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ly">领英</em> </strong> </a> <strong class="jm io"> <em class="ly">，</em></strong><a class="ae ki" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ly">YouTube</em></strong></a><strong class="jm io"><em class="ly">，以及</em></strong><em class="ly"/><a class="ae ki" href="https://discord.com/invite/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ly">不和</em> </strong> </a>T47】</p><p id="5d3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="ly">用</em> </strong> <a class="ae ki" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ly">电路</em> </strong> </a> <em class="ly">为你的科技创业建立认知和采用。</em></p></div></div>    
</body>
</html>