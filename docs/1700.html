<html>
<head>
<title>What’s New in Chrome 100?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Chrome 100有什么新功能？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/whats-new-in-chrome-100-623327e35d26?source=collection_archive---------18-----------------------#2022-04-12">https://javascript.plainenglish.io/whats-new-in-chrome-100-623327e35d26?source=collection_archive---------18-----------------------#2022-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a962" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">100个很酷的网络瞬间</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/d4468dfcfd89bc31dcca1bb9932fca60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_bslQb-JQGaNQkhDzaR3NA.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Photo by <a class="ae kr" href="https://unsplash.com/@rubaitulazad?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Rubaitul Azad</a> on <a class="ae kr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2ae0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Chrome更新到版本100！从1989年万维网诞生到现在，30多年来，Web的发展经历了许多非常重要和激动人心的时刻。Google还发布了<a class="ae kr" href="https://developer.chrome.com/100/" rel="noopener ugc nofollow" target="_blank"> 100CoolWebMoments </a>，里面记录了很多有趣且值得纪念的瞬间，推荐大家去看看！</p><p id="bb97" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">本文将介绍Chrome 100中那些我们需要注意的新特性。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="368a" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">用户代理字符串</h1><p id="8fc6" class="pw-post-body-paragraph ks kt iq ku b kv mn jr kx ky mo ju la lb mp ld le lf mq lh li lj mr ll lm ln ij bi translated">由于用户代理中的Chrome已经升级到版本100，所以如果使用的版本匹配规则不够健壮，就会出现问题，比如下面的代码:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="38f6" class="mx lw iq mt b gy my mz l na nb">const userAgentString =<br/>  'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36';</span><span id="0d82" class="mx lw iq mt b gy nc mz l na nb"><strong class="mt ir">// limited number of matches.</strong><br/>console.log(userAgentString.match(/Chrome\/(\d\d)/).slice(0, 2)); // [ 'Chrome/10', '10' ]</span><span id="486e" class="mx lw iq mt b gy nc mz l na nb"><strong class="mt ir">// unlimited number of matches.</strong><br/>console.log(userAgentString.match(/Chrome\/(\d+)/).slice(0, 2)); // [ 'Chrome/100', '100' ]</span></pre><p id="b734" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">此外，Chrome 100将是默认支持未缩减User-Agent的最后一个版本，之后User-Agent中包含的信息将逐渐缩减。</p><p id="4e9d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">示例:</p><p id="ff2c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">铬101:船舶减少铬未成年人。BUILD.PATCH版本号(“0.0.0”)。</p><p id="5d96" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Chrome 107:开始推出缩减的桌面UA字符串和相关的JS API(<code class="fe nd ne nf mt b">navigator.userAgent</code>、<code class="fe nd ne nf mt b">navigator.appVersion</code>、<code class="fe nd ne nf mt b">navigator.platform</code>)。</p><p id="1e71" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Chrome 110:开始推出精简的Android移动(和平板)UA字符串和相关的JS APIs。</p><p id="2edc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">更多细节和时间，请参考<a class="ae kr" href="https://blog.chromium.org/2021/09/user-agent-reduction-origin-trial-and-dates.html" rel="noopener ugc nofollow" target="_blank"> Chromium博客</a>。</p><h1 id="66df" class="lv lw iq bd lx ly ng ma mb mc nh me mf jw ni jx mh jz nj ka mj kc nk kd ml mm bi translated">多屏幕窗口放置API</h1><p id="5a2c" class="pw-post-body-paragraph ks kt iq ku b kv mn jr kx ky mo ju la lb mp ld le lf mq lh li lj mr ll lm ln ij bi translated">为了改善多屏显示的用户体验，Chrome更新了多屏窗口放置的API，具体如下:</p><p id="fe84" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">特征检测:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="c499" class="mx lw iq mt b gy my mz l na nb">'getScreenDetails' in window;</span></pre><p id="29d8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">获取权限:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="77cb" class="mx lw iq mt b gy my mz l na nb">const { state } = await navigator.permissions.query({ name: 'window-placement' });<br/>state === 'granted';</span></pre><p id="c0f0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">快速检测设备是否连接了多个屏幕:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="ef06" class="mx lw iq mt b gy my mz l na nb">window.screen.isExtended</span></pre><p id="1672" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">获取屏幕详细信息:</p><p id="f533" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这个时候Chrome会善意的要求我们在这个API中授予权限并返回一个承诺。在用户允许的情况下，我们可以获得一些关于显示器的信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/0fea3f22dd95a644709ded14f087f16b.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*qMapR3JoRFiGE_O4RUT8BA.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nm"><img src="../Images/9b3abf1003e1605231b648d789e9936f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4K9lH3p9NbhWS4Ff7jOMmA.png"/></div></div></figure><p id="8145" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><code class="fe nd ne nf mt b">screenschange</code>事件:</p><p id="afe6" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">可以监听诸如插入或移除显示器、分辨率更改等事件。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="6681" class="mx lw iq mt b gy my mz l na nb">const screens = await window.getScreenDetails();<br/>const previousScreensLen = screens.screens.length;</span><span id="f1a9" class="mx lw iq mt b gy nc mz l na nb">screens.addEventListener('screenschange', (event) =&gt; {<br/>  if (screens.screens.length !== previousScreensLen) {<br/>    console.log('Screen count changed');<br/>    previousScreensLen = screens.screens.length;<br/>  }<br/>});</span></pre><p id="9ff4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><code class="fe nd ne nf mt b">currentscreenchange</code>事件:</p><p id="0ff2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">它可以监视当前屏幕的变化。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="4eda" class="mx lw iq mt b gy my mz l na nb">const screenDetails = await window.getScreenDetails();</span><span id="0b6c" class="mx lw iq mt b gy nc mz l na nb">screenDetails.addEventListener('currentscreenchange', (event) =&gt; {<br/>  const details = screenDetails.currentScreen;<br/>  console.log('The current screen has changed.', event, details);<br/>});</span></pre><p id="2af6" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><code class="fe nd ne nf mt b">change</code>事件:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="a1c5" class="mx lw iq mt b gy my mz l na nb">const firstScreen = (await window.getScreenDetails())[0];</span><span id="0f65" class="mx lw iq mt b gy nc mz l na nb">firstScreen.addEventListener('change', (event) =&gt; {<br/>  console.log('The first screen has changed.', event, firstScreen);<br/>});</span></pre><p id="0c34" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">新的全屏选项:</p><p id="9184" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><code class="fe nd ne nf mt b">requestFullscreen</code>添加一个屏幕选项，允许我们在指定屏幕上全屏启动。以下代码将请求在主屏幕上全屏显示:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="3ae6" class="mx lw iq mt b gy my mz l na nb">try {<br/>  const primaryScreen = (await getScreenDetails()).screens.filter(<br/>    (screen) =&gt; screen.isPrimary,<br/>  )[0];</span><span id="4d06" class="mx lw iq mt b gy nc mz l na nb">  await document.body.requestFullscreen({ screen: primaryScreen });<br/>} catch (err) {<br/>  console.error(err.name, err.message);<br/>}</span></pre></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="e8a8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">今天就到这里。我是Zachary，我会继续输出与web开发相关的故事，如果你喜欢这样的故事并想支持我，请考虑成为 <a class="ae kr" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nr">中级会员</em> </a> <em class="nr">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae kr" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nr">我的链接</em> </a> <em class="nr">报名，我会得到一点佣金。</em></p><p id="536d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">你的支持对我来说非常重要——谢谢。</p><p id="0a9f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><em class="nr">更多内容请看</em> <a class="ae kr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="nr">说白了就是</em> </strong> </a> <em class="nr">。报名参加我们的</em> <a class="ae kr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="nr">免费每周简讯</em> </strong> </a> <em class="nr">。关注我们</em> <a class="ae kr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="nr">推特</em> </strong> </a> <em class="nr">和</em><a class="ae kr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="nr">LinkedIn</em></strong></a><em class="nr">。加入我们的</em> <a class="ae kr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="nr">社区不和谐</em> </strong> </a> <em class="nr">。</em></p></div></div>    
</body>
</html>