<html>
<head>
<title>How to Add Hours to a Date in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中给日期添加小时数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-add-hours-to-date-6e3a39bb9345?source=collection_archive---------9-----------------------#2022-06-27">https://javascript.plainenglish.io/javascript-add-hours-to-date-6e3a39bb9345?source=collection_archive---------9-----------------------#2022-06-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c1e4" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解在JavaScript中轻松向日期对象添加小时的多种方法。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/2886b2d169cd2f19d26f8bafa1f086a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2rQYQSL5QjfTOVE-Tk_w9A.png"/></div></div></figure><h1 id="fa11" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">1.Date setTime()和Date getTime()方法</h1><p id="9b33" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">要在JavaScript中给一个<code class="fe mc md me mf b">Date</code>添加小时，</p><ol class=""><li id="3191" class="mg mh in li b lj mi lm mj lp mk lt ml lx mm mb mn mo mp mq bi translated">调用<code class="fe mc md me mf b">Date</code>上的<code class="fe mc md me mf b">getTime()</code>方法来获取自Unix纪元以来的总毫秒数。</li><li id="6499" class="mg mh in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">在<code class="fe mc md me mf b">Date</code>上调用<code class="fe mc md me mf b">setTime()</code>方法，传递<code class="fe mc md me mf b">getTime()</code>的结果和以毫秒为单位相加的小时数。</li></ol><p id="8560" class="pw-post-body-paragraph lg lh in li b lj mi jo ll lm mj jr lo lp mw lr ls lt mx lv lw lx my lz ma mb ig bi translated">一个例子可以说明这一点:</p><pre class="kd ke kf kg gt mz mf na nb aw nc bi"><span id="98f0" class="nd kp in mf b gy ne nf l ng nh">function addHours(date, hours) {<br/>  const hoursToAdd = hours * 60 * 60 * 1000;<br/>  date.setTime(date.getTime() + hoursToAdd);<br/>  return date;<br/>}</span><span id="24e7" class="nd kp in mf b gy ni nf l ng nh">const date = new Date('2022-05-15T12:00:00.000Z');</span><span id="3bfb" class="nd kp in mf b gy ni nf l ng nh">const newDate1 = addHours(date, 2);<br/>console.log(newDate1); // 2022-05-15T14:00:00.000Z</span><span id="70b7" class="nd kp in mf b gy ni nf l ng nh">const newDate2 = addHours(newDate1, 5);<br/>console.log(newDate2); // 2022-05-15T19:00:00.000Z</span></pre><p id="7a88" class="pw-post-body-paragraph lg lh in li b lj mi jo ll lm mj jr lo lp mw lr ls lt mx lv lw lx my lz ma mb ig bi translated"><code class="fe mc md me mf b">Date</code> <code class="fe mc md me mf b">getTime()</code>方法返回Unix纪元和给定日期之间经过的毫秒数。Unix纪元是1970年1月1日00:00:00.000 GMT。</p><pre class="kd ke kf kg gt mz mf na nb aw nc bi"><span id="e361" class="nd kp in mf b gy ne nf l ng nh">const date = new Date('2022-05-15T12:00:00.000Z');<br/></span><span id="9dc9" class="nd kp in mf b gy ni nf l ng nh">// Milliseconds since the Unix epoch<br/>console.log(date.getTime()); // 1652616000000</span></pre><p id="d9f8" class="pw-post-body-paragraph lg lh in li b lj mi jo ll lm mj jr lo lp mw lr ls lt mx lv lw lx my lz ma mb ig bi translated">我们通过乘以<code class="fe mc md me mf b">60 * 60 * 1000</code>(一小时中的毫秒数)将小时转换为毫秒。这样我们就可以将它传递给<code class="fe mc md me mf b">Date</code> <code class="fe mc md me mf b">setTime()</code>方法，该方法接受一个参数，该参数指定了一个特定的时间，该时间由Unix epoch以来的毫秒数表示。</p><pre class="kd ke kf kg gt mz mf na nb aw nc bi"><span id="07f6" class="nd kp in mf b gy ne nf l ng nh">// May 5, 2022 at 12:00 PM<br/>const date = new Date('2022-05-15T12:00:00.000Z');</span><span id="6e77" class="nd kp in mf b gy ni nf l ng nh">const hours = 5;<br/>const hoursToMs = date.getTime() + 5 * 60 * 60 * 1000;<br/>date.setTime(hoursToMs);</span><span id="74b5" class="nd kp in mf b gy ni nf l ng nh">// May 5, 2022 at 5:00 PM<br/>console.log(date);</span></pre><h2 id="e5d5" class="nd kp in bd kq nj nk dn ku nl nm dp ky lp nn no la lt np nq lc lx nr ns le nt bi translated">注意</h2><p id="8a50" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated"><code class="fe mc md me mf b">setTime()</code>方法改变了它所调用的<code class="fe mc md me mf b">Date</code>对象。这给我们的<code class="fe mc md me mf b">addHours()</code>函数带来了副作用。要创建一个纯函数，创建一个<code class="fe mc md me mf b">Date</code>的副本，并在这个副本上调用<code class="fe mc md me mf b">setTime()</code>，而不是这个原始函数。例如:</p><pre class="kd ke kf kg gt mz mf na nb aw nc bi"><span id="dc6c" class="nd kp in mf b gy ne nf l ng nh">function addHours(date, hours) {<br/>  const dateCopy = new Date(date.getTime());<br/>  const hoursToAdd = hours * 60 * 60 * 1000;<br/>  dateCopy.setTime(date.getTime() + hoursToAdd);<br/>  return dateCopy;<br/>}</span><span id="f004" class="nd kp in mf b gy ni nf l ng nh">const date = new Date('2022-05-15T12:00:00.000Z');</span><span id="64bb" class="nd kp in mf b gy ni nf l ng nh">const newDate = addHours(date, 2);<br/>console.log(newDate); // 2022-05-15T14:00:00.000Z</span><span id="ac14" class="nd kp in mf b gy ni nf l ng nh">// Original not modified<br/>console.log(date); // 2022-05-15T12:00:00.000Z</span></pre><h2 id="5eaa" class="nd kp in bd kq nj nk dn ku nl nm dp ky lp nn no la lt np nq lc lx nr ns le nt bi translated">小费</h2><p id="f85f" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">不修改外部状态的函数(即纯函数)更容易预测，也更容易推理。</p><h1 id="e393" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">2.date-fns addHours()方法</h1><p id="18e9" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">或者，您可以使用<code class="fe mc md me mf b">date-fns</code> NPM包中的纯<code class="fe mc md me mf b">addHours()</code>函数来快速将小时添加到<code class="fe mc md me mf b">Date</code>中。</p><pre class="kd ke kf kg gt mz mf na nb aw nc bi"><span id="dfc9" class="nd kp in mf b gy ne nf l ng nh">import { addHours } from 'date-fns';</span><span id="4ac1" class="nd kp in mf b gy ni nf l ng nh">const date = new Date('2022-05-15T12:00:00.000Z');</span><span id="8ed7" class="nd kp in mf b gy ni nf l ng nh">const newDate = addHours(date, 4);<br/>console.log(newDate); // 2022-05-15T16:00:00.000Z</span><span id="f541" class="nd kp in mf b gy ni nf l ng nh">// Original not modified<br/>console.log(date); // 2022-05-15T12:00:00.000Z</span></pre></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><p id="8c86" class="pw-post-body-paragraph lg lh in li b lj mi jo ll lm mj jr lo lp mw lr ls lt mx lv lw lx my lz ma mb ig bi translated"><em class="ob">更新于:</em>【codingbeautydev.com】<em class="ob"/></p><h1 id="225b" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">JavaScript做的每一件疯狂的事情</h1><p id="9a76" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi od"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph lg lh in li b lj mi jo ll lm mj jr lo lp mw lr ls lt mx lv lw lx my lz ma mb ig bi translated"><a class="ae oc" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="li io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>