<html>
<head>
<title>Angular Material Theming System: A Complete Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度材质主题系统:完全指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-material-theming-system-complete-guide-3e52e9b986a6?source=collection_archive---------3-----------------------#2022-01-04">https://javascript.plainenglish.io/angular-material-theming-system-complete-guide-3e52e9b986a6?source=collection_archive---------3-----------------------#2022-01-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0869" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我们将学习自定义主题，修改排版，以及更多使用新的SASS mixins。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dbbd9c16f3f415242c15f68b0e43027f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6_oUPq_q8du6CsRVdAcfsA.jpeg"/></div></div></figure><blockquote class="ku"><p id="3ac7" class="kv kw in bd kx ky kz la lb lc ld kh dk translated">在Angular Material的最新版本中，SASS主题化API已经被重新设计。在这篇文章中，我们将学习使用新的SASS mixins自定义主题、修改排版和更多内容。</p></blockquote><p id="aa8b" class="pw-post-body-paragraph jk jl in jm b jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd li kf kg kh ig bi translated">在这篇文章中，你将学习什么是角度材质主题化，以及为了遵守SASS的新模块系统，最近有什么变化。</p><p id="e488" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我们将建立一个有角材料的项目。然后，我们将添加一个自定义主题，并了解一些重要的混合，<code class="fe lj lk ll lm b">core</code>，<code class="fe lj lk ll lm b">define-palette</code>，<code class="fe lj lk ll lm b">define-light-theme</code>，我们将应用一个自定义主题的角度材料组件。我们还将学习如何使用预先构建的主题。</p><p id="8078" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置好主题后，我们会了解排版，也会对页眉标签(<code class="fe lj lk ll lm b">&lt;h1&gt;</code>、<code class="fe lj lk ll lm b">&lt;h2&gt;</code>等)进行修改。)进行申请。</p><p id="b89c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将使用<code class="fe lj lk ll lm b">define-dark-theme</code>创建一个黑暗主题。我们将为黑暗主题实现延迟加载，这样它只在需要的时候加载。</p><p id="0c4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在添加了对多个主题的支持后，我们将学习如何将Angular Material的主题应用到自定义组件中。我们将以一个<code class="fe lj lk ll lm b">alert</code>组件为例，并对其应用主题。</p><p id="627d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们还将了解如何自定义角形材质组件的样式。我们将以<code class="fe lj lk ll lm b">MatButton</code>为例，为其添加新的变体。</p><p id="cf68" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我们将学习如何将Angular Material版本10的旧代码库更新到最新版本，即13。我们将看到如何解决SASS错误，以及每个版本中的主要变化。</p><h2 id="ff89" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">角度材质用户界面组件</h2><p id="9161" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">Angular团队构建并维护公共UI组件和工具，以帮助我们构建自己的定制组件。<code class="fe lj lk ll lm b">@angular/material</code>是<a class="ae ml" href="https://material.io/" rel="noopener ugc nofollow" target="_blank">材质设计</a>用于角度应用的UI组件。</p><p id="eb71" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Angular Material还提供了一些工具，帮助开发人员用通用的交互模式构建他们自己的定制组件。</p><h2 id="f167" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">角材料的主题系统</h2><p id="bebe" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">在角形材料中，主题是颜色和版式选项的集合。每个主题都包括三个调色板，用于确定组件颜色:原色、强调色和警告色。</p><p id="fbe4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Angular Material的主题系统附带了一套预定义的颜色和排版样式规则。主题系统是基于谷歌的材料设计规范。您还可以为应用程序中的组件自定义颜色和版式样式。</p><h2 id="9e02" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">SASS基础</h2><p id="5696" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">在继续之前，如果您熟悉<a class="ae ml" href="https://sass-lang.com/guide" rel="noopener ugc nofollow" target="_blank"> SASS基础知识</a>，包括<a class="ae ml" href="https://sass-lang.com/documentation/variables" rel="noopener ugc nofollow" target="_blank">变量</a>、<a class="ae ml" href="https://sass-lang.com/documentation/at-rules/function" rel="noopener ugc nofollow" target="_blank">函数</a>、<a class="ae ml" href="https://sass-lang.com/documentation/at-rules/mixin" rel="noopener ugc nofollow" target="_blank">混合</a>，以及<a class="ae ml" href="https://sass-lang.com/documentation/at-rules/use" rel="noopener ugc nofollow" target="_blank">使用</a>，那就太好了。</p><h2 id="0855" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">角材中SASS的新变化</h2><p id="2c04" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">SASS推出了新的模块系统，包括2019年从<code class="fe lj lk ll lm b">@import</code>到<code class="fe lj lk ll lm b">@use</code>的迁移。<a class="ae ml" href="https://sass-lang.com/documentation/at-rules/use" rel="noopener ugc nofollow" target="_blank"> @use </a>规则加载来自其他SASS样式表的混合、函数和变量，并将来自多个样式表的CSS组合在一起。由<code class="fe lj lk ll lm b">@use</code>加载的样式表被称为“模块”。</p><p id="2a3a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过切换到<code class="fe lj lk ll lm b">@use</code>语法，我们可以更容易地确定哪些CSS没有被使用，并减少编译后的CSS输出的大小。无论这些样式被加载多少次，每个模块都只被包含一次。</p><p id="d724" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">角形材料v12包括从<code class="fe lj lk ll lm b">@import</code>用法到<code class="fe lj lk ll lm b">@use</code>用法的迁移，所有导入角形材料SASS样式。他们在版本12中更新了所有风格的代码库。你可以查看那个<a class="ae ml" href="https://github.com/angular/components/releases/tag/12.0.0" rel="noopener ugc nofollow" target="_blank">特殊版本</a>来获得更多信息。</p><p id="80bf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">主题API表面的这种重构更容易理解和阅读，帮助像我们这样的开发人员更好地利用这种新的模块系统。</p><h2 id="289e" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">使用角度材料设置项目</h2><p id="e14a" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated"><em class="mm">注意:在撰写本文时，我使用的是Angular版本13，本文描述的方法应该也适用于版本12。对于老版本，可以跳转到</em> <a class="ae ml" href="#angular-update-guide" rel="noopener ugc nofollow"> <em class="mm">更新指南</em> </a> <em class="mm">。</em></p><p id="31a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本节中，我们将学习如何使用新的混音和功能，如<code class="fe lj lk ll lm b">core-theme</code>、<code class="fe lj lk ll lm b">all-components-theme</code>、<code class="fe lj lk ll lm b">define-palette</code>等。概括而言，以下是我们将要完成的主要任务:</p><ol class=""><li id="6d02" class="mn mo in jm b jn jo jr js jv mp jz mq kd mr kh ms mt mu mv bi translated">创建自定义主题</li><li id="2626" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">使用预先构建的主题</li><li id="ef5c" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">修改版式</li><li id="f562" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">创造一个黑暗的主题</li><li id="257a" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">将角度材质的主题应用于自定义组件</li><li id="0db3" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">自定义角度材质组件样式</li></ol><p id="affd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们首先用SASS创建一个新的Angular项目:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="a6b8" class="ln lo in lm b gy nf ng l nh ni">ng new my-app --style=scss --defaults</span></pre><p id="3b2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过运行以下命令，使用Angular CLI的安装<a class="ae ml" href="https://material.angular.io/guide/schematics" rel="noopener ugc nofollow" target="_blank">示意图</a>来设置您的Angular Material项目:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="614e" class="ln lo in lm b gy nf ng l nh ni">ng add @angular/material</span></pre><p id="12ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lj lk ll lm b">ng add</code>命令将安装角度材料、<a class="ae ml" href="https://material.angular.io/cdk/categories" rel="noopener ugc nofollow" target="_blank">组件开发套件(CDK) </a>、<a class="ae ml" href="https://angular.io/guide/animations" rel="noopener ugc nofollow" target="_blank">角度动画</a>，并询问您以下问题以确定包括哪些功能:</p><ol class=""><li id="0de5" class="mn mo in jm b jn jo jr js jv mp jz mq kd mr kh ms mt mu mv bi translated">选择一个预置的主题名称，或者为自定义主题选择“自定义”:选择<strong class="jm io">自定义</strong></li><li id="e17e" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">设置全局角度材料排版样式？:<strong class="jm io">是</strong></li><li id="2812" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">为有角度的材质设置浏览器动画？:<strong class="jm io">是</strong></li></ol><p id="a9f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你完了！现在，角形材质已配置好，可以在应用程序中使用。</p><h2 id="51b2" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">创建自定义主题</h2><p id="86b6" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">一个<strong class="jm io">主题文件</strong>是一个SASS文件，它使用棱角分明的材质SASS mixins来产生颜色和排版CSS样式。</p><p id="d598" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们跳到<code class="fe lj lk ll lm b">src/styles.scss</code>文件，看看我们的主题:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="7f11" class="ln lo in lm b gy nf ng l nh ni">// src/styles.scss<br/><br/>@use "@angular/material" as mat;<br/><br/>@include mat.core();<br/><br/>$my-app-primary: mat.define-palette(mat.$indigo-palette);<br/>$my-app-accent: mat.define-palette(mat.$pink-palette, A200, A100, A400);<br/>$my-app-warn: mat.define-palette(mat.$red-palette);<br/><br/>$my-app-theme: mat.define-light-theme(<br/>  (<br/>    color: (<br/>      primary: $my-app-primary,<br/>      accent: $my-app-accent,<br/>      warn: $my-app-warn,<br/>    ),<br/>  )<br/>);<br/><br/>@include mat.all-component-themes($my-app-theme);<br/><br/>html,<br/>body {<br/>  height: 100%;<br/>}<br/>body {<br/>  margin: 0;<br/>  font-family: Roboto, "Helvetica Neue", sans-serif;<br/>}</span></pre><p id="de1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们把上面的代码分解成几个部分来了解更多。</p><h2 id="7408" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated"><code class="fe lj lk ll lm b">core</code>米欣</h2><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="ea9f" class="ln lo in lm b gy nf ng l nh ni">@include mat.core();</span></pre><p id="ded5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在主题文件中你首先会注意到的是<code class="fe lj lk ll lm b">core</code> mixin。Angular Material定义了一个名为<code class="fe lj lk ll lm b">core</code>的mixin，其中包括多个组件使用的通用特征的必备样式，例如<a class="ae ml" href="https://github.com/angular/components/blob/0d3a730631fae77ce4af49b4b9853da2a5fe09f9/src/material/core/_core.scss#L13" rel="noopener ugc nofollow" target="_blank">波纹</a>。即使您定义了多个主题，核心mixin也必须为您的应用程序包含一次。</p><h2 id="7450" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">定义主题</h2><p id="7786" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">角度材质将主题表示为包含您的颜色和排版选择的SASS地图。颜色是通过调色板定义的。</p><p id="f1fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">调色板是代表部分颜色空间的颜色集合。这个集合中的每个值称为一个色调。在材料设计中，调色板中的每种色调都有一个标识号。这些标识号包括50，然后每100个值在100和900之间。这些数字将调色板中的色调从最亮到最暗排序。角度材质将调色板表示为SASS贴图。</p><p id="9348" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"/><code class="fe lj lk ll lm b"><strong class="jm io">define-palette</strong></code><strong class="jm io">功能</strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="e482" class="ln lo in lm b gy nf ng l nh ni">$my-app-primary: mat.define-palette(mat.$indigo-palette);<br/>$my-app-accent: mat.define-palette(mat.$pink-palette, A200, A100, A400);<br/>$my-app-warn: mat.define-palette(mat.$red-palette);</span></pre><p id="74cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">构建一个主题需要2个调色板:<code class="fe lj lk ll lm b">primary</code>和<code class="fe lj lk ll lm b">accent</code>，其中<code class="fe lj lk ll lm b">warn</code>调色板是可选的。</p><p id="1e69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lj lk ll lm b">define-palette</code> SASS函数接受一个调色板，以及四个可选的色调数字。这四种色调依次代表:“默认”色调、“较亮”色调、“较暗”色调和“文本”色调。</p><p id="d73d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">组件使用这些色调为自身的不同部分选择最合适的颜色。例如，<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/0d3a730631fae77ce4af49b4b9853da2a5fe09f9/src/material/button/_button-theme.scss#L64" rel="noopener ugc nofollow" target="_blank">MatButton</a></code> <a class="ae ml" href="https://github.com/angular/components/blob/0d3a730631fae77ce4af49b4b9853da2a5fe09f9/src/material/button/_button-theme.scss#L64" rel="noopener ugc nofollow" target="_blank">的主题</a>使用色调生成字体颜色:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="71a3" class="ln lo in lm b gy nf ng l nh ni">// src/material/button/_button-theme.scss<br/>// content reduced for brevity<br/><br/>// Applies a property to an mat-button element for each of the supported palettes.<br/>@mixin _theme-property($theme, $property, $hue) {<br/>  $primary: map.get($theme, primary);<br/>  $accent: map.get($theme, accent);<br/>  $warn: map.get($theme, warn);<br/>  $background: map.get($theme, background);<br/>  $foreground: map.get($theme, foreground);<br/><br/>  &amp;.mat-primary {<br/>    #{$property}: theming.get-color-from-palette($primary, $hue);<br/>  }<br/>  &amp;.mat-accent {<br/>    #{$property}: theming.get-color-from-palette($accent, $hue);<br/>  }<br/>  &amp;.mat-warn {<br/>    #{$property}: theming.get-color-from-palette($warn, $hue);<br/>  }<br/><br/>  &amp;.mat-primary,<br/>  &amp;.mat-accent,<br/>  &amp;.mat-warn,<br/>  &amp;.mat-button-disabled {<br/>    &amp;.mat-button-disabled {<br/>      $palette: if($property == "color", $foreground, $background);<br/>      #{$property}: theming.get-color-from-palette($palette, disabled-button);<br/>    }<br/>  }<br/>}<br/><br/>@mixin color($config-or-theme) {<br/>  $config: theming.get-color-config($config-or-theme);<br/>  $foreground: map.get($config, foreground);<br/><br/>  .mat-button,<br/>  .mat-icon-button,<br/>  .mat-stroked-button {<br/>    @include _theme-property($config, "color", text);<br/>  }<br/>}</span></pre><p id="c5d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们的例子中，我们使用了预定义的调色板，即<code class="fe lj lk ll lm b">$indigo-palette</code>、<code class="fe lj lk ll lm b">$pink-palette</code>和<code class="fe lj lk ll lm b">$red-palette</code>。你可以在Angular Material GitHub <a class="ae ml" href="https://github.com/angular/components/blob/master/src/material/core/theming/_palette.scss" rel="noopener ugc nofollow" target="_blank"> repo的文件中查看其他调色板:</a></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="93c3" class="ln lo in lm b gy nf ng l nh ni">// src/material/core/theming/_palette.scss<br/>// content reduced for brevity<br/><br/>$red-palette: (<br/>  50: #ffebee,<br/>  100: #ffcdd2,<br/>  200: #ef9a9a,<br/>  300: #e57373,<br/>  // ...<br/>  contrast: (<br/>    50: $dark-primary-text,<br/>    100: $dark-primary-text,<br/>    200: $dark-primary-text,<br/>    300: $dark-primary-text,<br/>    // ...<br/>  )<br/>);<br/><br/>$pink-palette: (<br/>  50: #fce4ec,<br/>  100: #f8bbd0,<br/>  200: #f48fb1,<br/>  300: #f06292,<br/>  // ...<br/>  contrast: (<br/>    50: $dark-primary-text,<br/>    100: $dark-primary-text,<br/>    200: $dark-primary-text,<br/>    300: $dark-primary-text,<br/>    // ...<br/>  )<br/>);</span></pre><p id="4008" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">创建自己的调色板</strong></p><p id="5505" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您也可以通过定义如下所示的SASS映射来创建自己的调色板:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="bdc8" class="ln lo in lm b gy nf ng l nh ni">$indigo-palette: (<br/> 50: #e8eaf6,<br/> 100: #c5cae9,<br/> 200: #9fa8da,<br/> 300: #7986cb,<br/> // ... continues to 900<br/> contrast: (<br/>   50: rgba(black, 0.87),<br/>   100: rgba(black, 0.87),<br/>   200: rgba(black, 0.87),<br/>   300: white,<br/>   // ... continues to 900<br/> )<br/>);</span></pre><p id="bac0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"/><code class="fe lj lk ll lm b"><strong class="jm io">define-light-theme</strong></code><strong class="jm io">功能</strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="6abe" class="ln lo in lm b gy nf ng l nh ni">$my-app-theme: mat.define-light-theme(<br/>  (<br/>    color: (<br/>      primary: $my-app-primary,<br/>      accent: $my-app-accent,<br/>      warn: $my-app-warn,<br/>    ),<br/>  )<br/>);</span></pre><p id="31d4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以用来自<code class="fe lj lk ll lm b">define-palette</code>的结果通过调用<code class="fe lj lk ll lm b">define-light-theme</code>或<code class="fe lj lk ll lm b">define-dark-theme</code>来构建一个主题。浅色和深色主题的选择决定了整个组件中使用的背景色和前景色。</p><h2 id="98db" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">将主题应用于组件</h2><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="426d" class="ln lo in lm b gy nf ng l nh ni">@include mat.all-component-themes($my-app-theme);</span></pre><p id="8df3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Angular Material提供了一种“主题”混合，可以为颜色和排版设计风格，这就是<code class="fe lj lk ll lm b">all-component-themes</code>混合。</p><p id="abdd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">可以查看源文件:<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/97ec228ada31e55f76a7e0171c715bb0b8d07e9c/src/material/core/theming/_all-theme.scss#L40" rel="noopener ugc nofollow" target="_blank">src/material/core/theming/_all-theme.scss</a></code>看mixin <code class="fe lj lk ll lm b">all-component-themes</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="cd20" class="ln lo in lm b gy nf ng l nh ni">// src/material/core/theming/_all-theme.scss<br/><br/>@mixin all-component-themes($theme-or-color-config) {<br/>  $dedupe-key: 'angular-material-theme';<br/>  @include theming.private-check-duplicate-theme-styles($theme-or-color-config, $dedupe-key) {<br/>    @include core-theme.theme($theme-or-color-config);<br/>    @include autocomplete-theme.theme($theme-or-color-config);<br/>    @include badge-theme.theme($theme-or-color-config);<br/>    @include bottom-sheet-theme.theme($theme-or-color-config);<br/>    @include button-theme.theme($theme-or-color-config);<br/>    // other material components' themes...<br/>  }<br/>}</span></pre><p id="fc90" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，还有一个“color”mixin，它发出所有组件的颜色样式，还有一个“topology”mixin，它发出所有组件的排版样式。他们是<code class="fe lj lk ll lm b">all-component-colors</code>和<code class="fe lj lk ll lm b">all-component-typographies</code>mixin。</p><p id="3617" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">出现在<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/97ec228ada31e55f76a7e0171c715bb0b8d07e9c/src/material/core/color/_all-color.scss#L5" rel="noopener ugc nofollow" target="_blank">src/material/core/color/_all-color.scss</a></code>的<code class="fe lj lk ll lm b">all-component-colors</code> mixin具有:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="c32c" class="ln lo in lm b gy nf ng l nh ni">// src/material/core/color/_all-color.scss<br/><br/>@mixin all-component-colors($config-or-theme) {<br/>  $config: if(theming.private-is-theme-object($config-or-theme),<br/>      theming.get-color-config($config-or-theme), $config-or-theme);<br/><br/>  @include all-theme.all-component-themes((<br/>    color: $config,<br/>    typography: null,<br/>    density: null,<br/>  ));<br/>}</span></pre><p id="db02" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lj lk ll lm b">all-components-typography</code>米辛出现在<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/97ec228ada31e55f76a7e0171c715bb0b8d07e9c/src/material/core/typography/_all-typography.scss#L42" rel="noopener ugc nofollow" target="_blank">src/material/core/typography/_all-typography.scss</a></code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="c933" class="ln lo in lm b gy nf ng l nh ni">// src/material/core/typography/_all-typography.scss<br/><br/>@mixin all-component-typographies($config-or-theme: null) {<br/>  $config: if(theming.private-is-theme-object($config-or-theme),<br/>      theming.get-typography-config($config-or-theme), $config-or-theme);<br/><br/>  @include badge-theme.typography($config);<br/>  @include typography.typography-hierarchy($config);<br/>  @include autocomplete-theme.typography($config);<br/>  @include bottom-sheet-theme.typography($config);<br/>  @include button-theme.typography($config);<br/>  // other components' typographies<br/>}</span></pre><p id="a147" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些混音为所有35个以上的角形材料组件发射样式。这将产生不必要的CSS，除非您的应用程序正在使用库中的每个组件。让我们看看<code class="fe lj lk ll lm b">build</code>命令后的<code class="fe lj lk ll lm b">styles</code>大小，然后我会告诉你如何减少它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/ddb506f6804f0d95358ff902db81a706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nfErHTPi3imWQ0TX.png"/></div></div></figure><p id="fd9e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">仅包括使用过的组件主题</strong></p><p id="9b93" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就像<code class="fe lj lk ll lm b">all-component-colors</code>、<code class="fe lj lk ll lm b">all-component-typographies</code>和<code class="fe lj lk ll lm b">all-component-themes</code>一样，每一个有角的材质组件都有一个<code class="fe lj lk ll lm b">color</code>、一个<code class="fe lj lk ll lm b">typography</code>和一个<code class="fe lj lk ll lm b">theme</code> mixin。</p><p id="465d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以在<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/master/src/material/button/_button-theme.scss" rel="noopener ugc nofollow" target="_blank">src/material/button/_button-theme.scss</a></code>查看<code class="fe lj lk ll lm b">MatButton</code>的混音:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="4621" class="ln lo in lm b gy nf ng l nh ni">// src/material/button/_button-theme.scss<br/>// content reduced for brevity<br/><br/>@mixin color($config-or-theme) {<br/>  $config: theming.get-color-config($config-or-theme);<br/>  $primary: map.get($config, primary);<br/>  $accent: map.get($config, accent);<br/>  $warn: map.get($config, warn);<br/>  // sets up color for buttons<br/>}<br/><br/>@mixin typography($config-or-theme) {<br/>  $config: typography.private-typography-to-2014-config(<br/>      theming.get-typography-config($config-or-theme));<br/>  .mat-button, .mat-raised-button, .mat-icon-button, .mat-stroked-button,<br/>  .mat-flat-button, .mat-fab, .mat-mini-fab {<br/>    font: {<br/>      family: typography-utils.font-family($config, button);<br/>      size: typography-utils.font-size($config, button);<br/>      weight: typography-utils.font-weight($config, button);<br/>    }<br/>  }<br/>}<br/><br/>@mixin theme($theme-or-color-config) {<br/>  $theme: theming.private-legacy-get-theme($theme-or-color-config);<br/>  @include theming.private-check-duplicate-theme-styles($theme, 'mat-button') {<br/>    $color: theming.get-color-config($theme);<br/>    $typography: theming.get-typography-config($theme);<br/><br/>    @if $color != null {<br/>      @include color($color);<br/>    }<br/>    @if $typography != null {<br/>      @include typography($typography);<br/>    }<br/>  }<br/>}</span></pre><p id="aa11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以为应用程序中使用的每个组件应用样式，包括它们的每个主题SASS混合。</p><p id="a07a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们将从<code class="fe lj lk ll lm b">styles.scss</code>中删除<code class="fe lj lk ll lm b">all-component-themes</code>，并添加<code class="fe lj lk ll lm b">core-theme</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="544c" class="ln lo in lm b gy nf ng l nh ni">// @include mat.all-component-themes($my-app-theme); &lt;-- removed<br/>@include mat.core-theme($my-app-theme);</span></pre><p id="8749" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lj lk ll lm b">core-theme</code>为跨多个组件使用的公共功能发出主题相关的样式，如波纹。</p><p id="a701" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们需要添加组件相关的样式。在本例中，我们将只使用<code class="fe lj lk ll lm b"><a class="ae ml" href="https://material.angular.io/components/button/overview" rel="noopener ugc nofollow" target="_blank">MatButton</a></code>，因此我们将添加<code class="fe lj lk ll lm b">button-theme</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="948b" class="ln lo in lm b gy nf ng l nh ni">@include mat.button-theme($my-app-theme);</span></pre><p id="c397" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以用同样的方法添加其他组件。但是，每个主题只需要一次<code class="fe lj lk ll lm b">core-theme</code>。让我们看看<code class="fe lj lk ll lm b">styles</code>建成后的尺寸。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/f84083b8cb353e9fdfc935ee8690c5ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6hGCIZfctwsAFLYC.png"/></div></div></figure><p id="23db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，只使用所需组件的主题是如何缩小样式大小的。在我们的示例中，之前是72.31 kB，现在减少到23.52 kB，几乎减少了58%。</p><p id="349a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了更好地管理代码，我们将主题相关的代码移到<code class="fe lj lk ll lm b">styles/themes/_light.scss</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="b725" class="ln lo in lm b gy nf ng l nh ni">// src/styles/themes/_light.scss<br/><br/>@use "sass:map";<br/>@use "@angular/material" as mat;<br/><br/>$my-app-light-primary: mat.define-palette(mat.$indigo-palette);<br/>$my-app-light-accent: mat.define-palette(mat.$pink-palette, A200, A100, A400);<br/><br/>$my-app-light-warn: mat.define-palette(mat.$red-palette);<br/><br/>$my-app-light-theme: mat.define-light-theme(<br/>  (<br/>    color: (<br/>      primary: $my-app-light-primary,<br/>      accent: $my-app-light-accent,<br/>      warn: $my-app-light-warn,<br/>    ),<br/>  )<br/>);</span></pre><p id="4b11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">并在<code class="fe lj lk ll lm b">styles.scss</code>中使用相同的:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="9f89" class="ln lo in lm b gy nf ng l nh ni">// styles.scss<br/><br/>@use "@angular/material" as mat;<br/><br/>@use "./styles/themes/light";<br/><br/>@include mat.core();<br/><br/>@include mat.core-theme(light.$my-app-light-theme);<br/>@include mat.button-theme(light.$my-app-light-theme);<br/><br/>html,<br/>body {<br/>  height: 100%;<br/>}<br/>body {<br/>  margin: 0;<br/>  font-family: Roboto, "Helvetica Neue", sans-serif;<br/>}</span></pre><h2 id="22f4" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">创建自定义主题后的输出</h2><p id="6f31" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">让我们在应用程序中添加一个<code class="fe lj lk ll lm b">[mat-raised-button]</code>，看看它是什么样子的:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="244e" class="ln lo in lm b gy nf ng l nh ni">&lt;button mat-raised-button color="primary"&gt;Raised&lt;/button&gt;<br/>&lt;button mat-raised-button color="accent"&gt;Accent&lt;/button&gt;<br/>&lt;button mat-raised-button color="warn"&gt;Warn&lt;/button&gt;</span></pre><p id="8c1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输出应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/dc28fccf7322e6436311d43db77a9206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*IYXAUeT_rVGpUQ7o.gif"/></div></figure><h2 id="6903" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">使用预先构建的主题</h2><p id="2ead" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">当我们安装角材料时，我们在主题选择中选择了“自定义”。如果你想要任何预建的主题，你可以选择任何主题而不是“自定义”。提供了4个预置主题:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="153d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，如果您想使用<code class="fe lj lk ll lm b">indigo-pink.css</code>的主题，您只需要将该文件包含在项目的<code class="fe lj lk ll lm b">angular.json</code>文件的<code class="fe lj lk ll lm b">styles</code>数组中:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="ae86" class="ln lo in lm b gy nf ng l nh ni">"styles": [<br/>    "./node_modules/@angular/material/prebuilt-themes/indigo-pink.css",<br/>    // other styles<br/>],</span></pre><h2 id="5fbc" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">修改版式</h2><p id="8bcb" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated"><em class="mm">排版是一种排列字体的方式，使文字在显示时清晰、易读、有吸引力。Angular Material的主题系统支持为库的组件定制排版设置。此外，Angular Material还提供了将排版样式应用于您自己的应用程序中的元素的API。</em></p><p id="1f76" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们通过schematics安装Angular Material时，它在<code class="fe lj lk ll lm b">index.html</code>中为我们设置了字体资源:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="6ea0" class="ln lo in lm b gy nf ng l nh ni">&lt;link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&amp;display=swap" rel="stylesheet"&gt;</span></pre><p id="ce52" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">并且为了支持<code class="fe lj lk ll lm b">Roboto</code>，它还在<code class="fe lj lk ll lm b">styles.scss</code>中加入了一些全局样式:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="463f" class="ln lo in lm b gy nf ng l nh ni">body {<br/>  font-family: Roboto, "Helvetica Neue", sans-serif;<br/>}</span></pre><h2 id="738d" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">排版水平</h2><p id="26c6" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">在Material主题中，每一组字体都是根据它对应的应用程序结构的哪一部分(比如标题)来分类的。你可以从2014版材料设计规范中的<a class="ae ml" href="https://material.io/archive/guidelines/style/typography.html#typography-styles" rel="noopener ugc nofollow" target="_blank">排版层面了解更多信息。</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="dd26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">定义一个级别</strong></p><p id="bef0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以使用<code class="fe lj lk ll lm b">define-typography-config</code> SASS功能定义排版级别。该函数依次接受<code class="fe lj lk ll lm b">font-size</code>、<code class="fe lj lk ll lm b">line-height</code>、<code class="fe lj lk ll lm b">font-weight</code>、<code class="fe lj lk ll lm b">font-family</code>和<code class="fe lj lk ll lm b">letter-spacing</code>的CSS值。您也可以按名称指定参数，如下例所示。</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="80fc" class="ln lo in lm b gy nf ng l nh ni">@use '@angular/material' as mat;<br/><br/>$my-custom-level: mat.define-typography-level(<br/>  $font-family: Roboto,<br/>  $font-weight: 400,<br/>  $font-size: 1rem,<br/>  $line-height: 1,<br/>  $letter-spacing: normal,<br/>);</span></pre><h2 id="5869" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">排版配置</h2><p id="53ed" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">角度材料使用<strong class="jm io">排版配置</strong>处理所有这些级别。角度材质将此配置表示为SASS贴图。这个地图包含每个级别的样式，以名称为关键字。您可以使用<code class="fe lj lk ll lm b">define-typography-config</code> SASS功能创建排版配置。<code class="fe lj lk ll lm b">define-typography-config</code>的每个参数都是可选的；如果未指定，级别的样式将默认为材质设计的基线。</p><p id="53ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个例子中，我们将改变标题的排版，我们将使用<a class="ae ml" href="https://fonts.google.com/specimen/Work+Sans" rel="noopener ugc nofollow" target="_blank"> Work Sans </a>作为<code class="fe lj lk ll lm b">font-family</code>。让我们看看怎么做。</p><p id="4d9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">包括字体资产</strong></p><p id="da17" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们将在<code class="fe lj lk ll lm b">index.html</code>中的<code class="fe lj lk ll lm b">&lt;head&gt;</code>底部添加字体:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="20a9" class="ln lo in lm b gy nf ng l nh ni">&lt;link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500&amp;display=swap"&gt;</span></pre><p id="b175" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">标题字体系列SASS变量</strong></p><p id="760b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，创建一个文件<code class="fe lj lk ll lm b">styles/typography/_config.scss</code>并在其中创建一个变量:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="5d9b" class="ln lo in lm b gy nf ng l nh ni">// src/styles/typography/_config.scss<br/><br/>$heading-font-family: "'Work Sans', sans-serif";</span></pre><p id="b88c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">创建配置</strong></p><p id="cd0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在是使用<code class="fe lj lk ll lm b">styles/typography/_config.scss</code>中的<code class="fe lj lk ll lm b">define-typography-config</code>创建配置的时候了:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="f805" class="ln lo in lm b gy nf ng l nh ni">$my-app-typography: mat.define-typography-config(<br/>  $display-4: mat.define-typography-level(112px, $font-family: $heading-font-family),<br/>  $display-3: mat.define-typography-level(56px, $font-family: $heading-font-family),<br/>  $display-2: mat.define-typography-level(45px, $font-family: $heading-font-family),<br/>  $display-1: mat.define-typography-level(34px, $font-family: $heading-font-family),<br/>  $headline: mat.define-typography-level(24px, $font-family: $heading-font-family),<br/>  $title: mat.define-typography-level(20px, $font-family: $heading-font-family),<br/>);</span></pre><p id="181f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了定制整个应用程序的组件排版，我们将把定制排版配置传递给<code class="fe lj lk ll lm b">styles.scss</code>中的<code class="fe lj lk ll lm b">core</code> mixin:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="0f56" class="ln lo in lm b gy nf ng l nh ni">// src/styles.scss<br/><br/>@use "@angular/material" as mat;<br/><br/>@use "./styles/themes/light";<br/>@use "./styles/typography/config" as typography;<br/><br/>@include mat.core(typography.$my-app-typography);<br/><br/>// rest remains same</span></pre><p id="644b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将排版配置传递给核心mixin会将指定的值应用到所有角度材料组件。如果没有指定config，<code class="fe lj lk ll lm b">core</code>将发出默认的材料设计排版样式。</p><p id="cb6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">主题特定排版</strong></p><p id="79d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除了<code class="fe lj lk ll lm b">core</code> mixin，我们可以在包含任何<code class="fe lj lk ll lm b">theme</code> mixin时指定您的排版配置，如下所示:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="f518" class="ln lo in lm b gy nf ng l nh ni">$custom-theme: mat.define-light-theme((<br/>   color: (<br/>     primary: $custom-primary,<br/>     accent: $custom-accent,<br/>   ),<br/>   typography: $custom-typography,<br/>  ));</span></pre><p id="44ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为<code class="fe lj lk ll lm b">core</code> mixin总是发出排版样式，指定一个排版配置给<code class="fe lj lk ll lm b">theme</code> mixin会导致重复的排版CSS。如果您需要指定根据应用程序的行为有条件应用的多种版式样式，那么您应该只在应用主题时提供版式配置。</p><p id="5a4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">在应用程序中使用排版样式</strong></p><p id="8efb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有角度的材料的原生元素'如果内容被包裹在内，排版工作'。席子排版<code class="fe lj lk ll lm b">CSS class. If you check the</code>index.html<code class="fe lj lk ll lm b">file,</code>席子排版<code class="fe lj lk ll lm b">class is added to thetag. It was done when we ran</code> ng add @angular/material `。</p><p id="8b56" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您不想将整个应用程序包装在一个<code class="fe lj lk ll lm b">mat-typography</code>类中，您也可以使用在<a class="ae ml" href="#typography-level" rel="noopener ugc nofollow">级别表</a>中列出的单个类。</p><h2 id="3e74" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">修改排版后的输出</h2><p id="9c9a" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">我们暂时修改一下<code class="fe lj lk ll lm b">index.html</code>中<code class="fe lj lk ll lm b">&lt;body&gt;</code>的内容:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="ad0b" class="ln lo in lm b gy nf ng l nh ni">&lt;body&gt;<br/>    &lt;!-- This header will *not* be styled because it is outside `.mat-typography` --&gt;<br/>    &lt;h1&gt;Top header (Material Typography doesn't apply here)&lt;/h1&gt;<br/><br/>    &lt;!-- This paragraph will be styled as `body-1` via the `.mat-body` CSS class applied --&gt;<br/>    &lt;p class="mat-body"&gt;Introductory text&lt;/p&gt;<br/><br/>    &lt;div class="mat-typography"&gt;<br/>      &lt;!-- This header will be styled as `title` because it is inside `.mat-typography` --&gt;<br/>      &lt;h2&gt;Inner header&lt;/h2&gt;<br/><br/>      &lt;!-- This paragraph will be styled as `body-1` because it is inside `.mat-typography` --&gt;<br/>      &lt;p&gt;Some inner text&lt;/p&gt;<br/>      &lt;app-root&gt;&lt;/app-root&gt;<br/>    &lt;/div&gt;<br/>  &lt;/body&gt;</span></pre><p id="00c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你看一下输出，你会知道排版是如何工作的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/28f10c44bfc8715d914f19b882cd5913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sjUqJsmx6ulvtyaA.png"/></div></div></figure><p id="82b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">修改排版后，下面是<code class="fe lj lk ll lm b">src/styles/typography/_config.scss</code>的内容:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="4645" class="ln lo in lm b gy nf ng l nh ni">// src/styles/typography/_config.scss<br/><br/>@use "@angular/material" as mat;<br/><br/>$heading-font-family: "'Work Sans', sans-serif";<br/>$my-app-typography: mat.define-typography-config(<br/>  $display-4:<br/>    mat.define-typography-level(112px, $font-family: $heading-font-family),<br/>  $display-3:<br/>    mat.define-typography-level(56px, $font-family: $heading-font-family),<br/>  $display-2:<br/>    mat.define-typography-level(45px, $font-family: $heading-font-family),<br/>  $display-1:<br/>    mat.define-typography-level(34px, $font-family: $heading-font-family),<br/>  $headline:<br/>    mat.define-typography-level(24px, $font-family: $heading-font-family),<br/>  $title: mat.define-typography-level(20px, $font-family: $heading-font-family),<br/>);</span></pre><p id="7d42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">而下面是<code class="fe lj lk ll lm b">style.scss</code>的内容:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="5381" class="ln lo in lm b gy nf ng l nh ni">// src/styles.scss<br/><br/>@use "@angular/material" as mat;<br/><br/>@use "./styles/themes/light";<br/>@use "./styles/typography/config" as typography;<br/><br/>@include mat.core(typography.$my-app-typography);<br/><br/>@include mat.core-theme(light.$my-app-light-theme);<br/>@include mat.button-theme(light.$my-app-light-theme);<br/><br/>html,<br/>body {<br/>  height: 100%;<br/>}<br/>body {<br/>  margin: 0;<br/>  font-family: Roboto, "Helvetica Neue", sans-serif;<br/>}</span></pre><h2 id="17c7" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">创造一个黑暗的主题</h2><p id="07e4" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">现在我们将在应用程序中添加一个黑色主题。在<code class="fe lj lk ll lm b">styles/themes</code>文件夹中创建一个名为<code class="fe lj lk ll lm b">dark.scss</code>的新文件，内容如下:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="c09a" class="ln lo in lm b gy nf ng l nh ni">// src/styles/themes/dark.scss<br/><br/>@use "sass:map";<br/>@use "@angular/material" as mat;<br/><br/>@use "../typography/config" as typography;<br/>@use "../components";<br/><br/>$my-app-dark-primary: mat.define-palette(mat.$blue-grey-palette);<br/>$my-app-dark-accent: mat.define-palette(mat.$amber-palette, A200, A100, A400);<br/>$my-app-dark-warn: mat.define-palette(mat.$deep-orange-palette);<br/>$my-app-dark-theme: mat.define-dark-theme(<br/>  (<br/>    color: (<br/>      primary: $my-app-dark-primary,<br/>      accent: $my-app-dark-accent,<br/>      warn: $my-app-dark-warn,<br/>    ),<br/>  )<br/>);<br/><br/>.dark-theme {<br/>  @include mat.core-color($my-app-dark-theme);<br/>  @include mat.button-color($my-app-dark-theme);<br/>}</span></pre><p id="837c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意，我们使用了一个类选择器<code class="fe lj lk ll lm b">.dark-theme</code>来渲染一个黑暗的主题。</p><h2 id="d53a" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">避免重复的主题样式</h2><p id="607d" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">在创作<code class="fe lj lk ll lm b">dark-theme</code>的时候，我们用的是<code class="fe lj lk ll lm b">core-color</code>和<code class="fe lj lk ll lm b">button-color</code>，而不是原来主题里用的<code class="fe lj lk ll lm b">core-theme</code>和<code class="fe lj lk ll lm b">button-theme</code>。背后的原因是我们只想改变<code class="fe lj lk ll lm b">dark-theme</code>中的颜色，其他所有样式都应该保持不变。如果我们使用<code class="fe lj lk ll lm b">theme</code> mixins，它将再次生成所有不需要的样式。</p><h2 id="1c04" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">背景和字体颜色的更改</h2><p id="553d" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">为了完成背景和字体颜色的主题设置，我们需要将类<code class="fe lj lk ll lm b">mat-app-background</code>添加到<code class="fe lj lk ll lm b">index.html</code>中的<code class="fe lj lk ll lm b">&lt;body&gt;</code>标签中:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="97f1" class="ln lo in lm b gy nf ng l nh ni">&lt;body class="mat-typography mat-app-background"&gt;<br/>  &lt;app-root&gt;&lt;/app-root&gt;<br/>&lt;/body&gt;</span></pre><h2 id="bdeb" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">懒惰装载黑暗主题</h2><p id="9008" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">对于我们的应用程序，<code class="fe lj lk ll lm b">dark-theme</code>是一个额外的主题，可以根据用户的偏好来加载。因此，我们将延迟加载它，而不是让它成为默认应用程序的一部分。</p><p id="c236" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们在项目的<code class="fe lj lk ll lm b">angular.json</code>中对此进行更改:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="6063" class="ln lo in lm b gy nf ng l nh ni">"styles": [<br/>              "src/styles.scss",<br/>              {<br/>                "input": "src/styles/themes/dark.scss",<br/>                "bundleName": "dark-theme",<br/>                "inject": false<br/>              }<br/>            ],</span></pre><blockquote class="np nq nr"><p id="cea3" class="jk jl mm jm b jn jo jp jq jr js jt ju ns jw jx jy nt ka kb kc nu ke kf kg kh ig bi translated">你可以在:<a class="ae ml" href="https://indepth.dev/tutorials/angular/lazy-load-stylesheets" rel="noopener ugc nofollow" target="_blank">了解更多关于惰性加载样式表的知识，如何在Angular中从bundle中排除样式表并惰性加载？</a></p></blockquote><p id="fbfb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了根据用户的选择加载<code class="fe lj lk ll lm b">dark-theme</code>,我们将简单地实现一个名为<code class="fe lj lk ll lm b">style-manager.service.ts</code>的服务，每当我们想要改变主题时，我们将简单地从这个服务中调用<code class="fe lj lk ll lm b">toggleDarkTheme</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="eaac" class="ln lo in lm b gy nf ng l nh ni">// style-manager.service.ts<br/><br/>import { Injectable } from '@angular/core';<br/><br/>@Injectable({ providedIn: 'root' })<br/>export class StyleManager {<br/>  isDark = false;<br/><br/>  toggleDarkTheme() {<br/>    if (this.isDark) {<br/>      this.removeStyle('dark-theme');<br/>      document.body.classList.remove('dark-theme');<br/>      this.isDark = false;<br/>    } else {<br/>      const href = 'dark-theme.css';<br/>      getLinkElementForKey('dark-theme').setAttribute('href', href);<br/>      document.body.classList.add('dark-theme');<br/>      this.isDark = true;<br/>    }<br/>  }<br/><br/>  removeStyle(key: string) {<br/>    const existingLinkElement = getExistingLinkElementByKey(key);<br/>    if (existingLinkElement) {<br/>      document.head.removeChild(existingLinkElement);<br/>    }<br/>  }<br/>}<br/><br/>function getLinkElementForKey(key: string) {<br/>  return getExistingLinkElementByKey(key) || createLinkElementWithKey(key);<br/>}<br/><br/>function getExistingLinkElementByKey(key: string) {<br/>  return document.head.querySelector(<br/>    `link[rel="stylesheet"].${getClassNameForKey(key)}`<br/>  );<br/>}<br/><br/>function createLinkElementWithKey(key: string) {<br/>  const linkEl = document.createElement('link');<br/>  linkEl.setAttribute('rel', 'stylesheet');<br/>  linkEl.classList.add(getClassNameForKey(key));<br/>  document.head.appendChild(linkEl);<br/>  return linkEl;<br/>}<br/><br/>function getClassNameForKey(key: string) {<br/>  return `style-manager-${key}`;<br/>}</span></pre><p id="ac23" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以上是一个非常固执己见的方法，你可以根据你的需要改变它。</p><h2 id="dbe0" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">创建暗主题后的输出</h2><p id="7b99" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">现在，让我们利用<code class="fe lj lk ll lm b">app.component.ts</code>中的上述服务:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="a128" class="ln lo in lm b gy nf ng l nh ni">// src/app/app.component.ts<br/><br/>import { Component } from '@angular/core';<br/>import { StyleManager } from './shared/services/style-manager.service';<br/><br/>@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.scss'],<br/>})<br/>export class AppComponent {<br/>  title = 'my-app';<br/>  isDark = this.styleManager.isDark;<br/><br/>  constructor(private styleManager: StyleManager) {}<br/><br/>  toggleDarkTheme() {<br/>    this.styleManager.toggleDarkTheme();<br/>    this.isDark = !this.isDark;<br/>  }<br/>}</span></pre><p id="b7d4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将在<code class="fe lj lk ll lm b">app.component.html</code>中添加一个按钮来切换明暗主题:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="50bd" class="ln lo in lm b gy nf ng l nh ni">&lt;!-- src/app/app.component.html --&gt;<br/><br/>&lt;div&gt;<br/>  &lt;h1&gt;Angular Material Theming System: Complete Guide&lt;/h1&gt;<br/>  &lt;button<br/>    mat-icon-button<br/>    (click)="toggleDarkTheme()"<br/>    class="theme-toggle"<br/>    aria-label="Toggle Dark Theme"<br/>  &gt;<br/>    &lt;mat-icon&gt;{{ isDark ? "dark_mode" : "light_mode" }}&lt;/mat-icon&gt;<br/>  &lt;/button&gt;<br/>  &lt;div class="demo-buttons"&gt;<br/>    &lt;button mat-raised-button color="primary"&gt;Raised&lt;/button&gt;<br/>    &lt;button mat-raised-button color="accent"&gt;Accent&lt;/button&gt;<br/>    &lt;button mat-raised-button color="warn"&gt;Warn&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="43f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们看看输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/c7b8787772858cf2558fe5d819f2e340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*M0ExmtJy-Fu0D5Ja.gif"/></div></figure><p id="57f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，当我们更改主题时，它会更改按钮和文本的颜色和背景颜色。还要注意的是<code class="fe lj lk ll lm b">dark-theme.css</code>只在用户切换到黑暗主题时被包含。</p><h2 id="9c6c" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">将角度材质的主题应用于自定义组件</h2><p id="6b99" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">假设下面的模板有一个<code class="fe lj lk ll lm b">alert</code>组件:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="c561" class="ln lo in lm b gy nf ng l nh ni">&lt;div class="alert" role="alert"&gt;<br/>  &lt;h4 class="alert-heading"&gt;&lt;mat-icon&gt;thumb_up&lt;/mat-icon&gt; Well done!&lt;/h4&gt;<br/>  &lt;button mat-icon-button aria-label="Close" class="alert-close"&gt;<br/>    &lt;mat-icon&gt;close&lt;/mat-icon&gt;<br/>  &lt;/button&gt;<br/>  &lt;p class="alert-message"&gt;<br/>    You did a great job! To get your reward,<br/>    &lt;a href="#" class="alert-link"&gt;click here&lt;/a&gt;.<br/>  &lt;/p&gt;<br/>  &lt;hr /&gt;<br/>  &lt;p class="alert-footer"&gt;<br/>    Your reward will be credited to your account within 24 Hour.<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="f569" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它的造型如下:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="2e08" class="ln lo in lm b gy nf ng l nh ni">// alert.scss<br/><br/>.alert {<br/>  position: relative;<br/>  padding: 1rem 1rem;<br/>  margin-bottom: 1rem;<br/>  border: 1px solid transparent;<br/>  border-radius: 0.25rem;<br/><br/>  color: #084298;<br/>  background-color: #cfe2ff;<br/>  border-color: #b6d4fe;<br/><br/>  .alert-link {<br/>    color: #06357a;<br/>  }<br/><br/>  hr {<br/>    margin: 1rem 0;<br/>    color: inherit;<br/>    background-color: currentColor;<br/>    border: 0;<br/>    opacity: 0.25;<br/>    height: 1px;<br/>  }<br/><br/>  .alert-heading {<br/>    color: inherit;<br/>    font-size: calc(1.275rem + 0.3vw);<br/>  }<br/><br/>  .alert-link {<br/>    font-weight: 700;<br/>  }<br/><br/>  mat-icon {<br/>    color: currentColor;<br/>    vertical-align: middle;<br/>    font-size: inherit;<br/>    line-height: inherit;<br/>    height: inherit;<br/>    width: inherit;<br/>  }<br/><br/>  .alert-close {<br/>    position: absolute;<br/>    top: 0;<br/>    right: 0;<br/>    z-index: 2;<br/><br/>    mat-icon {<br/>      color: #000;<br/>      font-size: 24px;<br/>      line-height: 1;<br/>      height: 24px;<br/>      width: 24px;<br/>    }<br/>  }<br/><br/>  .alert-footer {<br/>    font-size: 80%;<br/>    margin-bottom: 0;<br/>  }<br/>}</span></pre><p id="d6e6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用上述样式，它看起来如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/5ef38da44db49c6b2ca468c582dae7a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RO6jFz2QMswOGR3t.png"/></div></div></figure><p id="1102" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们想将角度材质的主题应用到<code class="fe lj lk ll lm b">alert</code>组件中，这样颜色和排版就可以与主题相匹配。</p><h2 id="70a6" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">分离主题样式</h2><p id="0e18" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">每个角度材质组件都有一个SASS文件，该文件定义了定制该组件颜色和字体的混合。例如，<code class="fe lj lk ll lm b">MatButton</code>有<code class="fe lj lk ll lm b">button-color</code>和<code class="fe lj lk ll lm b">button-typography</code>的混合物。每个mixin分别为该组件发出所有颜色和字体样式。</p><p id="247d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将通过定义自己的混合来反映<code class="fe lj lk ll lm b">alert</code>组件中的这种结构。这些混搭应该接受有角度的材质主题，他们可以从中读取颜色和排版值。然后，我们将在您的应用程序中包含这些混合，以及Angular Material自己的混合。</p><p id="8315" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将是一个逐步的过程。</p><p id="68ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第1步:将基于主题的样式提取到单独的文件中</strong></p><p id="5aaf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了改变这个文件，让它参与到Angular Material的主题化系统中，我们将样式分成了两个文件，颜色和排版样式被移到了混搭中。按照惯例，新文件名以<code class="fe lj lk ll lm b">-theme</code>结尾。此外，文件以下划线(<code class="fe lj lk ll lm b">_</code>)开头，表示这是一个SASS部分文件。有关部分文件的更多信息，请参见<a class="ae ml" href="https://sass-lang.com/guide#topic-4" rel="noopener ugc nofollow" target="_blank"> SASS文档</a>。</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="8f8c" class="ln lo in lm b gy nf ng l nh ni">// alert.scss<br/><br/>.alert {<br/>  position: relative;<br/>  padding: 1rem 1rem;<br/>  margin-bottom: 1rem;<br/>  border: 1px solid transparent;<br/>  border-radius: 0.25rem;<br/><br/>  hr {<br/>    margin: 1rem 0;<br/>    color: inherit;<br/>    background-color: currentColor;<br/>    border: 0;<br/>    opacity: 0.25;<br/>    height: 1px;<br/>  }<br/><br/>  .alert-heading {<br/>    color: inherit;<br/>  }<br/><br/>  .alert-link {<br/>    font-weight: 700;<br/>  }<br/><br/>  mat-icon {<br/>    color: currentColor;<br/>    vertical-align: middle;<br/>    font-size: inherit;<br/>    line-height: inherit;<br/>    height: inherit;<br/>    width: inherit;<br/>  }<br/><br/>  .alert-close {<br/>    position: absolute;<br/>    top: 0;<br/>    right: 0;<br/>    z-index: 2;<br/><br/>    mat-icon {<br/>      color: #000;<br/>      font-size: 24px;<br/>      line-height: 1;<br/>      height: 24px;<br/>      width: 24px;<br/>    }<br/>  }<br/><br/>  .alert-footer {<br/>    margin-bottom: 0;<br/>  }<br/>}</span></pre><p id="60bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将主题相关的内容移到<code class="fe lj lk ll lm b">_alert-theme.scss</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="24e3" class="ln lo in lm b gy nf ng l nh ni">// _alert-theme.scss<br/><br/>@mixin color($theme) {<br/>  .alert {<br/>    color: #084298;<br/>    background-color: #cfe2ff;<br/>    border-color: #b6d4fe;<br/><br/>    .alert-link {<br/>      color: #06357a;<br/>    }<br/>  }<br/>}<br/><br/>@mixin typography($theme) {<br/>  .alert {<br/>    .alert-heading {<br/>      font-size: calc(<br/>        1.275rem + 0.3vw<br/>      );<br/>    }<br/>    .alert-footer {<br/>      font-size: 80%;<br/>    }<br/>  }<br/>}</span></pre><p id="7fc3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第2步:使用主题中的值</strong></p><p id="c74b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在基于主题的样式驻留在mixin中，我们可以从传递到mixin的主题中提取我们需要的值。</p><p id="944b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">读取颜色值</strong></p><p id="5584" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要读取主题的颜色值，可以使用<code class="fe lj lk ll lm b">get-color-config</code> SASS功能。该函数返回一个包含主题的主要、强调和警告选项板的SASS图，以及一个指示是否设置了暗模式的标志。以下是一个例子:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="36db" class="ln lo in lm b gy nf ng l nh ni">@use 'SASS:map';<br/>@use '@angular/material' as mat;<br/><br/>$color-config:    mat.get-color-config($theme);<br/>$primary-palette: map.get($color-config, 'primary');<br/>$accent-palette:  map.get($color-config, 'accent');<br/>$warn-palette:    map.get($color-config, 'warn');<br/>$is-dark-theme:   map.get($color-config, 'is-dark');</span></pre><p id="6b05" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">读取排版值</strong></p><p id="1e5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要从主题中读取版式值，您可以使用<code class="fe lj lk ll lm b">get-typography-config</code> SASS函数。例如:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="8952" class="ln lo in lm b gy nf ng l nh ni">@use '@angular/material' as mat;<br/><br/>$typography-config: mat.get-typography-config($theme);<br/>$my-font-family: mat.font-family($typography-config);</span></pre><p id="dc74" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们在<code class="fe lj lk ll lm b">_alert-theme.scss</code>中进行更改:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="a682" class="ln lo in lm b gy nf ng l nh ni">// _alert-theme.scss<br/><br/>@use "sass:map";<br/>@use "@angular/material" as mat;<br/><br/>@mixin color($theme) {<br/>  // Get the color config from the theme.<br/>  $color-config: mat.get-color-config($theme);<br/><br/>  // Get the primary color palette from the color-config.<br/>  $primary-palette: map.get($color-config, "primary");<br/><br/>  .alert {<br/>    color: mat.get-color-from-palette($primary-palette, 700);<br/>    background-color: mat.get-color-from-palette($primary-palette, 100);<br/>    border-color: mat.get-color-from-palette($primary-palette, 300);<br/><br/>    .alert-link {<br/>      color: mat.get-color-from-palette($primary-palette, 900);<br/>    }<br/>  }<br/>}<br/><br/>@mixin typography($typography-config) {<br/>  .alert {<br/>    .alert-heading {<br/>      @include mat.typography-level($typography-config, "title");<br/>    }<br/>    .alert-footer {<br/>      @include mat.typography-level($typography-config, "caption");<br/>    }<br/>  }<br/>}</span></pre><p id="2e51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第三步:添加一个主题混音</strong></p><p id="0277" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了方便起见，我们将添加一个包含颜色和排版的<code class="fe lj lk ll lm b">theme</code> mixin。</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="61dc" class="ln lo in lm b gy nf ng l nh ni">// _alert-theme.scss<br/><br/>// rest remains same<br/><br/>@mixin theme($theme, $typography-config) {<br/>  $color-config: mat.get-color-config($theme);<br/>  @if $color-config != null {<br/>    @include color($theme);<br/>  }<br/><br/>  @if $typography-config != null {<br/>    @include typography($typography-config);<br/>  }<br/>}</span></pre><p id="63a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第四步:在你的应用程序中包含主题mixin</p><p id="a0a9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们将在<code class="fe lj lk ll lm b">src/styles/components</code>文件夹中创建<code class="fe lj lk ll lm b">_index.scss</code>，它将保存我们所有组件的mixins。它会有一个主题混音。</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="ab92" class="ln lo in lm b gy nf ng l nh ni">// src/styles/components/_index.scss<br/><br/>@use "../../app/shared/components/alert/alert-theme" as alert;<br/><br/>@mixin theme($theme, $typography-config) {<br/>  @include alert.theme($theme, $typography-config);<br/>}</span></pre><p id="a279" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将把这个<code class="fe lj lk ll lm b">theme</code> mixin和其他主题mixin一起包含在<code class="fe lj lk ll lm b">styles.scss</code>的应用程序中:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="abc7" class="ln lo in lm b gy nf ng l nh ni">// src/styles.scss<br/><br/>@use "@angular/material" as mat;<br/><br/>@use "./styles/themes/light";<br/>@use "./styles/components";<br/>@use "./styles/typography/config" as typography;<br/><br/>@include mat.core(typography.$my-app-typography);<br/><br/>@include mat.core-theme(light.$my-app-light-theme);<br/>@include mat.button-theme(light.$my-app-light-theme);<br/>@include components.theme(<br/>  light.$my-app-light-theme,<br/>  typography.$my-app-typography<br/>);<br/><br/>html,<br/>body {<br/>  height: 100%;<br/>}<br/>body {<br/>  margin: 0;<br/>  font-family: Roboto, "Helvetica Neue", sans-serif;<br/>}</span></pre><p id="7745" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们也将在<code class="fe lj lk ll lm b">src/styles/theme/dark.scss</code>中包含这个主题:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="e83d" class="ln lo in lm b gy nf ng l nh ni">// src/styles/themes/dark.scss<br/><br/>@use "sass:map";<br/>@use "@angular/material" as mat;<br/><br/>@use "../typography/config" as typography;<br/>@use "../components";<br/><br/>$my-app-dark-primary: mat.define-palette(mat.$blue-grey-palette);<br/>$my-app-dark-accent: mat.define-palette(mat.$amber-palette, A200, A100, A400);<br/>$my-app-dark-warn: mat.define-palette(mat.$deep-orange-palette);<br/>$my-app-dark-theme: mat.define-dark-theme(<br/>  (<br/>    color: (<br/>      primary: $my-app-dark-primary,<br/>      accent: $my-app-dark-accent,<br/>      warn: $my-app-dark-warn,<br/>    ),<br/>  )<br/>);<br/><br/>.dark-theme {<br/>  @include mat.core-color($my-app-dark-theme);<br/>  @include mat.button-color($my-app-dark-theme);<br/>  @include components.theme(<br/>    $my-app-dark-theme,<br/>    typography.$my-app-typography<br/>  );<br/>}</span></pre><p id="4fa2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们来看看警报:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f6ad548f2b9a412fb9eecca9773f23ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*wXRVnyW-06tYB_R-.gif"/></div></figure><p id="984a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它适用于明暗主题。并且“工作Sans”系列的标题字体也应用于警报的标题。</p><h2 id="f9e8" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">自定义角度材质组件样式</h2><p id="2902" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">在最后一节中，我们将学习如何自定义角形材质组件的样式。要定制任何角度材质组件的样式，我们可以简单地创建CSS类并使用它们。对于这个例子，我们将定制<code class="fe lj lk ll lm b"><a class="ae ml" href="https://material.angular.io/components/button/overview" rel="noopener ugc nofollow" target="_blank">MatButton</a></code>的样式。</p><p id="11fc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">角形材料提供3种变型:<code class="fe lj lk ll lm b">primary</code>、<code class="fe lj lk ll lm b">accent</code>和<code class="fe lj lk ll lm b">warn</code>。如果您检查为这些变体生成的HTML代码，例如<code class="fe lj lk ll lm b">&lt;button mat-button color=”primary”&gt;Primary&lt;/button&gt;</code>，您会发现它为按钮添加了类<code class="fe lj lk ll lm b">mat-primary</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/bfba40016f8d97ceddc9bd0ee868175e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kB9BuwbwMH9PrYa0.png"/></div></div></figure><p id="ab38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于这个例子，我们将为<code class="fe lj lk ll lm b">MatButton</code>添加两个变量:<code class="fe lj lk ll lm b">success</code>和<code class="fe lj lk ll lm b">info</code>。因此，基于以上发现，我们将需要添加对<code class="fe lj lk ll lm b">mat-success</code>和<code class="fe lj lk ll lm b">mat-info</code>类的支持。</p><p id="0cde" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们可能首先想到简单地为<code class="fe lj lk ll lm b">mat-success</code>和<code class="fe lj lk ll lm b">mat-info</code>类添加<code class="fe lj lk ll lm b">color</code>和<code class="fe lj lk ll lm b">background-color</code>。但是，如果你检查一下<code class="fe lj lk ll lm b">MatButton</code>的DOM结构，它不仅仅是一个简单的按钮，它包含了多个元素来支持连锁反应:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/13992fbf66cf902878f3b8e563993244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NCVCqcaw8DvvalNs.png"/></div></div></figure><p id="3923" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，要正确设计button的新变体，我们需要遵循一种特定的方法。让我们开始吧。</p><h2 id="9a8d" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">步骤1:创建调色板的变体映射</h2><p id="a28c" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">让我们首先为<code class="fe lj lk ll lm b">light</code>和<code class="fe lj lk ll lm b">dark</code>主题创建<code class="fe lj lk ll lm b">success</code>和<code class="fe lj lk ll lm b">info</code>调色板。而且我们会和<code class="fe lj lk ll lm b">components.theme</code> mixin一起用。</p><p id="3389" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将创建如下图所示的<code class="fe lj lk ll lm b">variant</code> <a class="ae ml" href="https://sass-lang.com/documentation/values/maps" rel="noopener ugc nofollow" target="_blank">映射</a>，然后使用其中的每个调色板来创建按钮的变体:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="0ab4" class="ln lo in lm b gy nf ng l nh ni">$variants: (<br/>    success: $success-palette,<br/>    info: $info-palette<br/>)</span></pre><p id="2924" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们首先在最后的<code class="fe lj lk ll lm b">src/styles/theme/_light.scss</code>中为<code class="fe lj lk ll lm b">light</code>主题创建一个变体地图:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="1532" class="ln lo in lm b gy nf ng l nh ni">// src/styles/themes/_light.scss<br/><br/>// rest remains same<br/><br/>$my-app-light-success: mat.define-palette(mat.$green-palette);<br/>$my-app-light-info: mat.define-palette(mat.$blue-palette);<br/><br/>$my-app-light-variants: (<br/>  success: $my-app-light-success,<br/>  info: $my-app-light-info,<br/>);</span></pre><p id="d44f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于<code class="fe lj lk ll lm b">success</code>，我们使用<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/97ec228ada31e55f76a7e0171c715bb0b8d07e9c/src/material/core/theming/_palette.scss#L337" rel="noopener ugc nofollow" target="_blank">$green-palette</a></code>，对于<code class="fe lj lk ll lm b">info</code>，我们使用<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/97ec228ada31e55f76a7e0171c715bb0b8d07e9c/src/material/core/theming/_palette.scss#L205" rel="noopener ugc nofollow" target="_blank">$blue-palette</a></code>。</p><p id="2b80" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将把<code class="fe lj lk ll lm b">components.theme</code> mixin中的这个变体映射作为第三个参数传递给<code class="fe lj lk ll lm b">src/styles.scss</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="a2ae" class="ln lo in lm b gy nf ng l nh ni">// src/styles.scss<br/><br/>// rest remains same<br/><br/>@include components.theme(<br/>  light.$my-app-light-theme,<br/>  typography.$my-app-typography,<br/>  light.$my-app-light-variants<br/>);<br/><br/>// rest remains same</span></pre><p id="a8bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将在<code class="fe lj lk ll lm b">src/styles/theme/dark.scss</code>中为<code class="fe lj lk ll lm b">dark</code>主题创建相同的变体贴图，并在<code class="fe lj lk ll lm b">components.theme</code> mixin中传递它:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="a8ef" class="ln lo in lm b gy nf ng l nh ni">// src/styles/themes/dark.scss<br/><br/>// rest remains same<br/><br/>$my-app-dark-success: mat.define-palette(mat.$light-green-palette);<br/>$my-app-dark-info: mat.define-palette(mat.$light-blue-palette);<br/><br/>$my-app-dark-variants: (<br/>  success: $my-app-dark-success,<br/>  info: $my-app-dark-info,<br/>);<br/><br/>.dark-theme {<br/>  @include mat.core-color($my-app-dark-theme);<br/>  @include mat.button-color($my-app-dark-theme);<br/>  @include components.theme(<br/>    $my-app-dark-theme,<br/>    typography.$my-app-typography,<br/>    $my-app-dark-variants<br/>  );<br/>}</span></pre><p id="7ae8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于<code class="fe lj lk ll lm b">dark</code>主题，我们使用<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/97ec228ada31e55f76a7e0171c715bb0b8d07e9c/src/material/core/theming/_palette.scss#L370" rel="noopener ugc nofollow" target="_blank">$light-green-palette</a></code>和<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/97ec228ada31e55f76a7e0171c715bb0b8d07e9c/src/material/core/theming/_palette.scss#L238" rel="noopener ugc nofollow" target="_blank">$light-blue-palette</a></code>作为<code class="fe lj lk ll lm b">success</code>和<code class="fe lj lk ll lm b">info</code>的变体。</p><h2 id="45ad" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">步骤2:在组件的主题混合中添加变体映射</h2><p id="dd1f" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated"><code class="fe lj lk ll lm b">components.theme</code> mixin中的<code class="fe lj lk ll lm b">src/styles/components/_index.scss</code>截至目前有两种说法:<code class="fe lj lk ll lm b">$theme</code>和<code class="fe lj lk ll lm b">$typography-config</code>。我们现在将为变体映射添加第三个参数:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="2640" class="ln lo in lm b gy nf ng l nh ni">// src/styles/components/_index.scss<br/><br/>@use "../../app/shared/components/alert/alert-theme" as alert;<br/><br/>@mixin theme($theme, $typography-config, $variants) {<br/>  @include alert.theme($theme, $typography-config);<br/>}</span></pre><p id="eb02" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将在接下来的步骤中看到如何使用<code class="fe lj lk ll lm b">$variants</code>地图。</p><h2 id="ef25" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">步骤3:为按钮创建变体</h2><p id="a0ab" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">为了创建按钮的<code class="fe lj lk ll lm b">success</code>和<code class="fe lj lk ll lm b">info</code>变体，我们将从<code class="fe lj lk ll lm b"><a class="ae ml" href="https://github.com/angular/components/blob/master/src/material/button/_button-theme.scss" rel="noopener ugc nofollow" target="_blank">src/material/button/_button-theme.scss</a></code>开始遵循相同的方法。</p><p id="a75b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你看一下<a class="ae ml" href="https://github.com/angular/components/blob/master/src/material/button/_button-theme.scss" rel="noopener ugc nofollow" target="_blank">按钮主题的源代码</a>，按钮的样式需要5个混音才能正常工作:</p><ol class=""><li id="b6c1" class="mn mo in jm b jn jo jr js jv mp jz mq kd mr kh ms mt mu mv bi translated"><code class="fe lj lk ll lm b">_focus-overlay-color</code> -将焦点样式应用于每个支持的调色板的mat-button元素</li><li id="5817" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><code class="fe lj lk ll lm b">_ripple-background</code> -将背景色应用为波纹。</li><li id="10a4" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><code class="fe lj lk ll lm b">_ripple-color</code> -将包括每个变体的<code class="fe lj lk ll lm b">_ripple-background</code></li><li id="6aa9" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><code class="fe lj lk ll lm b">_theme-property</code> -将属性应用于变体中每个受支持调色板的<code class="fe lj lk ll lm b">mat-button</code>元素</li><li id="8fc2" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><code class="fe lj lk ll lm b">color</code> -将对每种 <code class="fe lj lk ll lm b"><a class="ae ml" href="https://material.angular.io/components/button/overview" rel="noopener ugc nofollow" target="_blank">mat-button</a></code>类型的<a class="ae ml" href="https://material.angular.io/components/button/overview" rel="noopener ugc nofollow" target="_blank">应用上述所有4种混音。它们是基本型、凸起型、描边型、扁平型、图标型和fab型。</a></li></ol><p id="4685" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们在<code class="fe lj lk ll lm b">src/styles/components/button</code>处创建一个文件<code class="fe lj lk ll lm b">_variants.scss</code>，内容如下:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="808b" class="ln lo in lm b gy nf ng l nh ni">// src/styles/components/button/_variants.scss<br/><br/>@use "sass:map";<br/>@use "sass:meta";<br/>@use "@angular/material" as mat;<br/><br/>$_ripple-opacity: 0.1;<br/><br/>// Applies a focus style to an mat-button element for each of the supported palettes.<br/>@mixin _focus-overlay-color($config-or-theme, $variants) {<br/>  $config: mat.get-color-config($config-or-theme);<br/><br/>  @each $variant, $variant-palette in $variants {<br/>    &amp;.mat-#{$variant} .mat-button-focus-overlay {<br/>      background-color: mat.get-color-from-palette($variant-palette);<br/>    }<br/>  }<br/>}<br/><br/>@mixin _ripple-background($palette, $hue, $opacity) {<br/>  $background-color: mat.get-color-from-palette($palette, $hue, $opacity);<br/>  background-color: $background-color;<br/>  @if (meta.type-of($background-color) != color) {<br/>    opacity: $opacity;<br/>  }<br/>}<br/><br/>@mixin _ripple-color($theme, $hue, $opacity, $variants) {<br/>  @each $variant, $variant-palette in $variants {<br/>    &amp;.mat-#{$variant} .mat-ripple-element {<br/>      @include _ripple-background($variant-palette, $hue, $opacity);<br/>    }<br/>  }<br/>}<br/><br/>// Applies a property to an mat-button element for each of the supported palettes.<br/>@mixin _theme-property($theme, $property, $hue, $variants) {<br/>  $background: map.get($theme, background);<br/>  $foreground: map.get($theme, foreground);<br/><br/>  @each $variant, $variant-palette in $variants {<br/>    &amp;.mat-#{$variant} {<br/>      #{$property}: mat.get-color-from-palette($variant-palette, $hue);<br/>    }<br/><br/>    &amp;.mat-#{$variant} {<br/>      &amp;.mat-button-disabled {<br/>        $palette: if($property == "color", $foreground, $background);<br/>        #{$property}: mat.get-color-from-palette($palette, disabled-button);<br/>      }<br/>    }<br/>  }<br/>}<br/><br/>@mixin color($config-or-theme, $variants) {<br/>  $config: mat.get-color-config($config-or-theme);<br/>  $foreground: map.get($config, foreground);<br/>  $background: map.get($config, background);<br/><br/>  .mat-button,<br/>  .mat-icon-button,<br/>  .mat-stroked-button {<br/>    @include _theme-property($config, "color", text, $variants);<br/>    @include _focus-overlay-color($config, $variants);<br/>  }<br/><br/>  .mat-flat-button,<br/>  .mat-raised-button,<br/>  .mat-fab,<br/>  .mat-mini-fab {<br/>    @include _theme-property($config, "color", default-contrast, $variants);<br/>    @include _theme-property($config, "background-color", default, $variants);<br/>    @include _ripple-color(<br/>      $config,<br/>      default-contrast,<br/>      $_ripple-opacity,<br/>      $variants<br/>    );<br/>  }<br/>}</span></pre><h2 id="6652" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">步骤4:在组件主题中包含按钮颜色混合</h2><p id="1959" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">是时候在<code class="fe lj lk ll lm b">src/styles/components/_index.scss</code>将<code class="fe lj lk ll lm b">button.color</code> mixin包含在<code class="fe lj lk ll lm b">components.theme</code>中了:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="fc83" class="ln lo in lm b gy nf ng l nh ni">// src/styles/components/_index.scss<br/><br/>@use "../../app/shared/components/alert/alert-theme" as alert;<br/>@use "./button/variants" as button-variants;<br/><br/>@mixin theme($theme, $typography-config, $variants) {<br/>  @include alert.theme($theme, $typography-config);<br/>  @include button-variants.color($theme, $variants);<br/>}</span></pre><p id="2476" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就是这样！现在可以用<code class="fe lj lk ll lm b">color=”success”</code>和<code class="fe lj lk ll lm b">color=”info”</code>加上<code class="fe lj lk ll lm b">MatButton</code>。让我们将它们添加到最后的<code class="fe lj lk ll lm b">app.component.html</code>中:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="9f5a" class="ln lo in lm b gy nf ng l nh ni">&lt;button mat-button color="success"&gt;Success&lt;/button&gt;<br/>&lt;button mat-stroked-button color="success"&gt;Success Stroked&lt;/button&gt;<br/>&lt;button mat-flat-button color="success"&gt;Success Flat&lt;/button&gt;<br/>&lt;button mat-raised-button color="success"&gt;Success Raised&lt;/button&gt;<br/>&lt;button mat-icon-button color="success"&gt;<br/>  &lt;mat-icon&gt;check_circle&lt;/mat-icon&gt;<br/>&lt;/button&gt;<br/>&lt;button mat-fab color="success"&gt;<br/>  &lt;mat-icon&gt;check_circle&lt;/mat-icon&gt;<br/>&lt;/button&gt;<br/>&lt;button mat-mini-fab color="success"&gt;<br/>  &lt;mat-icon&gt;check_circle&lt;/mat-icon&gt;<br/>&lt;/button&gt;<br/><br/>&lt;button mat-button color="info"&gt;Info&lt;/button&gt;<br/>&lt;button mat-stroked-button color="info"&gt;Info Stroked&lt;/button&gt;<br/>&lt;button mat-flat-button color="info"&gt;Info Flat&lt;/button&gt;<br/>&lt;button mat-raised-button color="info"&gt;Info Raised&lt;/button&gt;<br/>&lt;button mat-icon-button color="info"&gt;<br/>  &lt;mat-icon&gt;info&lt;/mat-icon&gt;<br/>&lt;/button&gt;<br/>&lt;button mat-fab color="info"&gt;<br/>  &lt;mat-icon&gt;info&lt;/mat-icon&gt;<br/>&lt;/button&gt;<br/>&lt;button mat-mini-fab color="info"&gt;<br/>  &lt;mat-icon&gt;info&lt;/mat-icon&gt;<br/>&lt;/button&gt;</span></pre><p id="ea48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们来看看输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f82291a45f3f8af15410ce23de970734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*4rRvy3jgDOttkLEE.gif"/></div></figure><h2 id="dcbe" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">将旧项目更新为Angular Material的最新版本</h2><p id="83f8" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">如果您当前的项目使用比版本12旧的Angular材料，并希望更新到版本13，那么请遵循本节，否则您可以跳转到<a class="ae ml" href="#summary" rel="noopener ugc nofollow">摘要</a>。</p><p id="1731" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于这个例子，我们将从我的“<a class="ae ml" href="https://indepth.dev/posts/1320/custom-theme-for-angular-material-components-series-part-1-create-a-theme" rel="noopener ugc nofollow" target="_blank">角形材料组件定制主题系列</a>”中获取代码。该代码可在<a class="ae ml" href="https://github.com/shhdharmen/indepth-theming-material-components" rel="noopener ugc nofollow" target="_blank">深度主题-材料-组件</a>获得。</p><p id="34f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您在项目的文件夹中运行<code class="fe lj lk ll lm b">ng version</code>,您会注意到使用了版本<code class="fe lj lk ll lm b">10.1</code>。我们想把它升级到版本<code class="fe lj lk ll lm b">13</code>。</p><h2 id="57e9" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">角度更新指南</h2><p id="e917" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">我们将遵循<a class="ae ml" href="https://update.angular.io/" rel="noopener ugc nofollow" target="_blank">角度更新指南</a>的指导方针。Angular CLI不支持一次跨多个主要版本迁移。因此，我们将单独迁移每个主要版本。</p><p id="5e95" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">打开项目文件夹中的终端，运行下面的命令。在每个命令之后，您必须提交您的更改，否则Angular CLI将不允许您继续操作。</p><p id="d65f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在运行以下任何命令时，如果您遇到任何类似<code class="fe lj lk ll lm b">Could not resolve dependency</code>或<code class="fe lj lk ll lm b">Conflicting peer dependency</code>的错误，请执行以下操作:</p><ol class=""><li id="a7fe" class="mn mo in jm b jn jo jr js jv mp jz mq kd mr kh ms mt mu mv bi translated">恢复<code class="fe lj lk ll lm b">package.json</code>的更改</li><li id="bfaa" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">用<code class="fe lj lk ll lm b">npm i</code>再次安装依赖项</li><li id="23ca" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">用<code class="fe lj lk ll lm b">--force</code>运行更新命令</li></ol><h2 id="d09a" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">版本10到11</h2><p id="dfe0" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated"><strong class="jm io">将Angular更新至版本11 </strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="933d" class="ln lo in lm b gy nf ng l nh ni">npx @angular/cli@11 update @angular/core@11 @angular/cli@11</span></pre><p id="061c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">将角度材料更新至版本11 </strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="8a64" class="ln lo in lm b gy nf ng l nh ni">npx @angular/cli@11 update @angular/material@11</span></pre><p id="c874" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这样，我们已经将项目更新到版本11。运行<code class="fe lj lk ll lm b">npm start</code>检查一次。现在，我们将把项目升级到版本12。</p><h2 id="c263" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">版本11到12</h2><p id="a00e" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated"><strong class="jm io">将Angular更新至版本12 </strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="4991" class="ln lo in lm b gy nf ng l nh ni">npx @angular/cli@12 update @angular/core@12 @angular/cli@12</span></pre><p id="1085" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">将角度材料更新至版本12 </strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="7188" class="ln lo in lm b gy nf ng l nh ni">npx @angular/cli@12 update @angular/material@12</span></pre><p id="83f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">版本12的变化</strong></p><p id="0ced" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用上面的命令，您将看到许多变化，让我们了解一下有什么变化。</p><p id="8f3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">从</strong> <code class="fe lj lk ll lm b"><strong class="jm io">@import</strong></code> <strong class="jm io">迁移到</strong> <code class="fe lj lk ll lm b"><strong class="jm io">@use</strong></code></p><p id="c177" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您将注意到的第一个主要变化是从<code class="fe lj lk ll lm b">@import</code>到<code class="fe lj lk ll lm b">@use</code>的迁移。所以在所有的<code class="fe lj lk ll lm b">.scss</code>文件中，下面的<code class="fe lj lk ll lm b">@import</code></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="a31b" class="ln lo in lm b gy nf ng l nh ni">@import "~@angular/material/theming";</span></pre><p id="ca8f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更改为下面的<code class="fe lj lk ll lm b">@use</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="1895" class="ln lo in lm b gy nf ng l nh ni">@use "~@angular/material" as mat;</span></pre><p id="52e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lj lk ll lm b">@use</code>规则加载来自其他SASS样式表的混合、函数和变量，并将来自多个样式表的CSS组合在一起。由<code class="fe lj lk ll lm b">@use</code>加载的样式表被称为“模块”。</p><p id="e8ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">萨斯团队不鼓励继续使用<code class="fe lj lk ll lm b">@import</code>规则。SASS将在接下来的几年里逐渐淘汰它，并最终从语言中完全消失</p><p id="e434" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> API重构</strong></p><p id="0433" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了坚持上述的模块体系，很多API也是返工的。为了更好的开发者体验，它们已经被重构。比如<code class="fe lj lk ll lm b">mat-get-color-config</code>改成<code class="fe lj lk ll lm b">mat.get-color-config</code>。<code class="fe lj lk ll lm b">mat-color</code>改为<code class="fe lj lk ll lm b">mat.get-color-from-palette</code>。</p><p id="6011" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">更新后修复错误</strong></p><p id="7667" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，如果您尝试运行项目，它将抛出错误。让我们逐一解决这些错误。</p><p id="beb3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">值不是有效的CSS值</strong></p><p id="94e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您将看到的第一个错误在<code class="fe lj lk ll lm b">sidenav.component.scss-theme.scss</code>的第7行:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="66ca" class="ln lo in lm b gy nf ng l nh ni">7 │   $config: mat-get-color-config($config-or-theme);<br/>  │                                 ^^^^^^^^^^^^^^^^</span></pre><p id="6a43" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了解决这个问题，我们将把<code class="fe lj lk ll lm b">mat-get-color-config</code>改为<code class="fe lj lk ll lm b">mat.get-color-config</code>。并在<code class="fe lj lk ll lm b">dialog.component.scss-theme.scss</code>中做同样的修改:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="a96f" class="ln lo in lm b gy nf ng l nh ni">$config: mat.get-color-config($config-or-theme);</span></pre><p id="3f2c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">未定义的混音</strong></p><p id="ca34" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您将看到的下一个错误在第28行:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="9e27" class="ln lo in lm b gy nf ng l nh ni">28 │         @include _mat-toolbar-color($val);<br/>   │         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></pre><p id="f44f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以上错误是因为在Angular Material版本12中，组件的颜色混合被重构。我们不能再简单地使用混音了。因此，我们将使用它的SASS代码，而不是使用<code class="fe lj lk ll lm b">MatToolbar</code>的颜色混合。因此，<code class="fe lj lk ll lm b">sidenav.component.scss-theme.scss</code>和<code class="fe lj lk ll lm b">dialog.component.scss-theme.scss</code>文件中的上面一行改为下面两行:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="2713" class="ln lo in lm b gy nf ng l nh ni">background-color: mat.get-color-from-palette($val);<br/>color: mat.get-color-from-palette($val, default-contrast);</span></pre><p id="602c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在您的项目应该运行良好。</p><p id="8df6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">遵守最新的SASS变更</strong></p><p id="e8ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">根据最新的SASS变更，<code class="fe lj lk ll lm b"><a class="ae ml" href="https://sass-lang.com/documentation/modules/map" rel="noopener ugc nofollow" target="_blank">map</a></code>模块功能应在新的模块系统中使用。为此，首先我们将使用<code class="fe lj lk ll lm b">@use</code>规则来使用<code class="fe lj lk ll lm b">SASS:map</code>模块:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="ef67" class="ln lo in lm b gy nf ng l nh ni">@use "sass:map";</span></pre><p id="63bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，只需将<code class="fe lj lk ll lm b">sidenav.component.scss-theme.scss</code>和<code class="fe lj lk ll lm b">dialog.component.scss-theme.scss</code>文件中的所有<code class="fe lj lk ll lm b">map-get</code>更改为<code class="fe lj lk ll lm b">map.get</code>:</p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="bc50" class="ln lo in lm b gy nf ng l nh ni">$primary: map.get($config, primary);<br/>$accent: map.get($config, accent);<br/>$warn: map.get($config, warn);<br/>$foreground: map.get($config, foreground);<br/>$background: map.get($config, background);</span></pre><h2 id="75f2" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">版本12到13</h2><p id="7404" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated"><strong class="jm io">将Angular更新至版本13 </strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="0b40" class="ln lo in lm b gy nf ng l nh ni">npx @angular/cli@13 update @angular/core@13 @angular/cli@13</span></pre><p id="f0e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">将角度材料更新至版本12 </strong></p><pre class="kj kk kl km gt nb lm nc nd aw ne bi"><span id="889a" class="ln lo in lm b gy nf ng l nh ni">npx @angular/cli@13 update @angular/material@13</span></pre><p id="6c61" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">波浪线的移除</strong></p><p id="4d8c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的命令之后，除了依赖项，你会注意到所有<code class="fe lj lk ll lm b">.scss</code>文件中的一个主要变化是从<code class="fe lj lk ll lm b">@use "~@angular/material" as mat;</code>中移除了<code class="fe lj lk ll lm b">~</code>(波浪号)。</p><p id="edb0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">背后的原因是<a class="ae ml" href="https://webpack.js.org/loaders/sass-loader" rel="noopener ugc nofollow" target="_blank"> SASS-loader </a>不赞成使用<code class="fe lj lk ll lm b">~</code>，建议将其从代码中移除。</p><p id="fc53" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">为什么要去掉？</strong></p><p id="7ae6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">加载程序将首先尝试将<code class="fe lj lk ll lm b">@use</code>解析为一个相对路径。如果无法解析，加载程序将尝试解析<code class="fe lj lk ll lm b">node_modules</code>中的<code class="fe lj lk ll lm b">@use</code>。</p><h2 id="173b" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">摘要</h2><p id="2f43" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">在这篇文章中，我们首先了解了什么是有角度的材质主题，它是基于谷歌的材质设计规范。然后我们了解到，在Angular Material版本12中，<code class="fe lj lk ll lm b">@import</code>规则迁移到了<code class="fe lj lk ll lm b">@use</code>，SASS APIs进行了重构，以获得更好的开发人员体验。</p><p id="9253" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们从一个空白项目开始，添加了棱角分明的材料。接下来，我们理解了<code class="fe lj lk ll lm b">core</code> mixin、<code class="fe lj lk ll lm b">define-palette</code>函数、调色板和<code class="fe lj lk ll lm b">define-light-theme</code>函数，我们创建了一个自定义主题。然后我们首先使用<code class="fe lj lk ll lm b">all-components-theme</code>将我们的自定义主题应用到所有组件，最后我们优化它只使用<code class="fe lj lk ll lm b">core-theme</code>和<code class="fe lj lk ll lm b">button-theme</code>并减少最终样式的大小。</p><p id="5934" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们还学习了如何通过在<code class="fe lj lk ll lm b">angular.json</code>的<code class="fe lj lk ll lm b">styles</code>数组中添加主题的样式表路径来使用预构建的主题。例如，我们可以添加<code class="fe lj lk ll lm b">./node_modules/@angular/material/prebuilt-themes/indigo-pink.css</code>来在我们的应用程序中使用<code class="fe lj lk ll lm b">indigo-pink</code>主题。</p><p id="d1b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我们从排版开始。我们首先理解了字体层次以及如何使用<code class="fe lj lk ll lm b">define-typography-level</code>来创建一个。接下来，我们学习了角度材质使用排版配置处理所有这些级别，角度材质将这种配置表示为SASS贴图。我们使用<code class="fe lj lk ll lm b">define-typography-config</code>创建了一个自定义配置，并将其应用于<code class="fe lj lk ll lm b">core</code> mixin，这样自定义排版就可以应用于整个应用程序。</p><p id="2bc0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们在一个单独的文件<code class="fe lj lk ll lm b">themes/dark-theme.scss</code>中创建了一个黑暗主题。然后，我们只使用颜色混合，即<code class="fe lj lk ll lm b">core-color</code>和<code class="fe lj lk ll lm b">button-color</code>，而不是主题混合，以避免重复的风格生成。最后，我们在<code class="fe lj lk ll lm b">angular.json</code>中做了一些改变，黑暗主题只在需要的时候按需加载。</p><p id="38b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我们按照一步一步的过程来添加对自定义组件的Angular Material主题系统的支持。</p><p id="c760" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我们学习了如何定制角状材质的按钮组件，即<code class="fe lj lk ll lm b"><a class="ae ml" href="https://material.angular.io/components/button/overview" rel="noopener ugc nofollow" target="_blank">MatButton</a></code>。在这一点上，我们主要遵循其源代码中的方法，并添加了两个新的变体:<code class="fe lj lk ll lm b">success</code>和<code class="fe lj lk ll lm b">info</code>。</p><p id="b15b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们在本文中创建的项目可以在GitHub repo上的<a class="ae ml" href="https://github.com/shhdharmen/angular-material-theming-system-complete-guide" rel="noopener ugc nofollow" target="_blank">angular-material-theming-system-complete-guide</a>获得。</p><p id="cdff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在新系统中，我们还通过一个旧项目中的例子，了解了如何将旧的角度材质版本更新到最新版本。</p><h2 id="c186" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">信用</h2><p id="4958" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">在写这篇文章时，我参考了<a class="ae ml" href="https://material.angular.io/guides" rel="noopener ugc nofollow" target="_blank">角度材料指南</a>。</p></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><p id="528e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mm">最初发表于</em><a class="ae ml" href="https://indepth.dev/tutorials/angular/angular-material-theming-system-complete-guide" rel="noopener ugc nofollow" target="_blank"><em class="mm">depth . dev</em></a><em class="mm">。</em></p><p id="0c45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mm">更多内容看</em> <a class="ae ml" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mm">说白了。报名参加我们的</em> </a><a class="ae ml" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mm">免费每周简讯</em> </a> <em class="mm">。在我们的</em> <a class="ae ml" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="mm">社区</em> </a> <em class="mm">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>