<html>
<head>
<title>How to Get to the End of a Page with Infinite Scrolling 🖱️</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何到达无限滚动🖱️页面的末尾</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-get-to-the-end-of-a-page-with-infinite-scrolling-%EF%B8%8F-4c10c3ab4b89?source=collection_archive---------11-----------------------#2022-01-25">https://javascript.plainenglish.io/how-to-get-to-the-end-of-a-page-with-infinite-scrolling-%EF%B8%8F-4c10c3ab4b89?source=collection_archive---------11-----------------------#2022-01-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="34e1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">无限滚动到一个网页的末尾是不是时间太长了？你可以用一个小脚本作弊！🤖</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/91eb4e973800e6f22781c5c5f6d98771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JD5TrqceUNfu0kCj.jpg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://www.pexels.com/@vojtech-okenka-127162?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"><strong class="bd kw">Vojtech Okenka</strong></a> from <a class="ae kv" href="https://www.pexels.com/photo/person-holding-apple-magic-mouse-392018/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"><strong class="bd kw">Pexels</strong></a></figcaption></figure><p id="9774" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">你可能已经浏览过一个带有<strong class="kz ir">无限滚动</strong>的网页。但是，你曾经需要<strong class="kz ir">加载所有的结果</strong>吗？🤔</p><p id="bd3c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最近，我不得不使用这个功能来抓取网页的数据，我必须做出选择:要么<strong class="kz ir">向下滚动并等待</strong>新的结果来加载几次<strong class="kz ir"/>，要么我可以通过编程来尝试找到一种方法来做这件事<strong class="kz ir">。</strong></p><p id="e8c4" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我让你猜猜我做了什么选择！😝</p><p id="c7e2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">幸运的是，如果你懂这种语言，去无限滚动页面底部的JavaScript代码非常简单。或者如果你在这篇文章上！😉</p><p id="1883" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">只需打开<em class="lt"> DevTools </em>(带<code class="fe lu lv lw lx b">F12</code>)并将<strong class="kz ir">下面的脚本</strong>粘贴到控制台中。</p><pre class="kg kh ki kj gt ly lx lz ma aw mb bi"><span id="cfe6" class="mc md iq lx b gy me mf l mg mh">// Declare some constants<br/>const MAXIMUM_NUMBER_OF_TRIALS = 5;<br/>const MINIMUM_SLEEPING_TIME_IN_MS = 500;<br/>const MAXIMUM_SLEEPING_TIME_IN_MS = 2000;</span><span id="0fd2" class="mc md iq lx b gy mi mf l mg mh">// Utility functions<br/>const sleep = (time) =&gt; new Promise((resolve) =&gt; setTimeout(resolve, time));<br/>const randomNumber = (minimum, maximum) =&gt; Math.floor(Math.random() * maximum) + minimum;<br/>const randomSleep = () =&gt; sleep(randomNumber(MINIMUM_SLEEPING_TIME_IN_MS, MAXIMUM_SLEEPING_TIME_IN_MS));</span><span id="b035" class="mc md iq lx b gy mi mf l mg mh">// How to get at the bottom of an infinity scroll<br/>let currentScrollHeight = 0;<br/>let manualStop = false;<br/>let numberOfScrolls = 0;<br/>let numberOfTrials = 0;</span><span id="e270" class="mc md iq lx b gy mi mf l mg mh">while (numberOfTrials &lt; MAXIMUM_NUMBER_OF_TRIALS &amp;&amp; !manualStop) {<br/>  // Keep the current scroll height<br/>  currentScrollHeight = document.body.scrollHeight;</span><span id="258b" class="mc md iq lx b gy mi mf l mg mh">  // Scroll at the bottom of the page<br/>  window.scrollTo(0, currentScrollHeight);</span><span id="05fb" class="mc md iq lx b gy mi mf l mg mh">  // Wait some seconds to load more results<br/>  await randomSleep();</span><span id="6e5b" class="mc md iq lx b gy mi mf l mg mh">  // If the height hasn't changed, there may be no more results to load<br/>  if (currentScrollHeight === document.body.scrollHeight) {<br/>    // Try another time<br/>    numberOfTrials++;</span><span id="b691" class="mc md iq lx b gy mi mf l mg mh">    console.log(<br/>      `Is it already the end of the infinite scroll? ${MAXIMUM_NUMBER_OF_TRIALS - numberOfTrials} trials left.`,<br/>    );<br/>  } else {<br/>    // Restart the number of consecutive trials<br/>    numberOfTrials = 0;</span><span id="5471" class="mc md iq lx b gy mi mf l mg mh">    // Increment the number of successful scroll<br/>    numberOfScrolls++;</span><span id="35bf" class="mc md iq lx b gy mi mf l mg mh">    console.log(`The scroll #${numberOfScrolls} was successful!`);<br/>  }<br/>}</span><span id="4afc" class="mc md iq lx b gy mi mf l mg mh">console.log('We should be at the bottom of the infinity scroll! Congratulation!');<br/>console.log(`${numberOfScrolls} scrolls were needed to load all results!`);</span></pre><p id="ac73" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我加了很多评论，你应该很容易搞清楚。如果服务器响应时间过长，您可能需要调整脚本顶部的<strong class="kz ir">常量</strong>。</p><blockquote class="mj mk ml"><p id="d764" class="kx ky lt kz b la lb jr lc ld le ju lf mm lh li lj mn ll lm ln mo lp lq lr ls ij bi translated"><strong class="kz ir"> <em class="iq">提示</em> </strong> <em class="iq">:如果你加载了足够多的结果，你可以通过在控制台中键入</em> <code class="fe lu lv lw lx b"><em class="iq">manualStop = true</em></code>随时 <strong class="kz ir"> <em class="iq">停止脚本</em> </strong> <em class="iq">。</em></p></blockquote><p id="d9ad" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">希望这能帮助你滚动到时间的尽头！😇</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="0b59" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑<a class="ae kv" href="https://benjaminrancourt.medium.com/membership" rel="noopener">报名成为<strong class="kz ir">媒体成员</strong> </a>。每月5美元，你可以无限制地阅读媒体上的故事。如果你用我的链接注册，我会赚一点佣金。</p><div class="mw mx gp gr my mz"><a href="https://benjaminrancourt.medium.com/membership" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">通过我的推荐链接加入Medium-Benjamin Rancourt</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">benjaminrancourt.medium.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn kp mz"/></div></div></a></div></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="9d75" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="lt">原载于2021年12月2日</em><a class="ae kv" href="https://www.benjaminrancourt.ca/how-to-get-to-the-end-of-a-page-with-infinite-scrolling" rel="noopener ugc nofollow" target="_blank"><em class="lt">www . Benjamin rancourt . ca</em></a><em class="lt">。</em></p><p id="9d73" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="lt">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz ir"><em class="lt">plain English . io</em></strong></a><em class="lt">。报名参加我们的</em><strong class="kz ir"><em class="lt"/></strong><a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz ir"><em class="lt">免费周报</em> </strong> </a> <em class="lt">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> <em class="lt">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="lt">。</em></p></div></div>    
</body>
</html>