<html>
<head>
<title>Understand React Virtual DOM as a Beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为初学者理解React虚拟DOM</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understand-react-virtual-dom-as-a-beginner-d90b3935bce2?source=collection_archive---------9-----------------------#2022-05-26">https://javascript.plainenglish.io/understand-react-virtual-dom-as-a-beginner-d90b3935bce2?source=collection_archive---------9-----------------------#2022-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c62c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">大家都在谈论它，你知道它是什么吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3143a878905975ab9fd941457c01720b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSvpX8sA3drgNP3_QgxkNA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by author and <a class="ae kv" href="https://unsplash.com/photos/EWg1-0UjeWY" rel="noopener ugc nofollow" target="_blank">Julien</a> at <a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">unsplash</a></figcaption></figure><p id="bbed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">通过在</strong><a class="ae kv" href="https://twitter.com/antondevv" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">【https://twitter.com/antondevv】</strong></a><strong class="ky ir">的Twitter上关注我，保持反应和打字的前沿。</strong></p><p id="d676" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文旨在教您一些关于DOM的知识，以及React虚拟DOM与它的不同之处，以及它们如何在高层次上进行交互。</p><h2 id="54a2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">首先，我们来澄清一些事情:</strong></h2><p id="b25f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">HTML是网页的标记(类似于结构)，JavaScript用于与网页交互。</p><p id="c197" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">加载网站时,( HTML)文件会加载到浏览器中。JavaScript不能直接理解HTML文档——它读起来像胡言乱语。这就是DOM的用武之地。DOM只是HTML页面以面向对象方式的高级抽象。</p><p id="0272" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么什么是DOM呢？</p><p id="01ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它代表<strong class="ky ir">文档对象模型</strong>，是基于对象和节点的网站表示。基本上，它是一种面向对象的方法来描述网站，JavaScript可以访问和操作那些属性。顺便说一下，如果你是一个前端开发人员，并且想了解一些关于DOM的事情，可以在这里查看我的文章<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/6-killer-facts-you-need-to-know-about-the-dom-as-a-frontend-developer-caf9872e4ae2"><strong class="ky ir"/></a>。</p><p id="4b89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无论如何，DOM是一个web API，它存在于JavaScript运行时中，这就是为什么我们可以访问DOM并与之交互，因为DOM根本不是JavaScript的一部分；它只是一个web API，我们可以在某些JavaScript运行时访问它，这些运行时将DOM作为web API提供。</p><p id="c507" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">HTML的元素<em class="mq"> </em>成为DOM中的<em class="mq">节点</em>。记住，JavaScript不能直接理解HTML，所以它需要以面向对象的方式创建HTML的高级抽象。</p><p id="7a29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以作为web API的DOM允许我们使用JavaScript与之交互。例如，我们可以通过执行以下操作来更改一个<h1>标签:</h1></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="93e4" class="mt lt iq bd lu mu mv mw lx mx my mz ma jw na jx md jz nb ka mg kc nc kd mj nd bi translated">更新DOM时出错</h1><p id="4a3d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">那么为什么更新DOM甚至是一件坏事呢？</p><p id="649f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，这是一个烂摊子，它可以很快变得相当复杂。</p><p id="93ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，这可能是非常低效的。在DOM被绘制到屏幕上之前，浏览器需要包括解析、计算CSS、布局等。所以，假设我们改变了50个DOM节点。浏览器需要为每个节点做所有这些，重新渲染会非常慢。</p><p id="9a4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当状态改变时，浏览器需要找出需要重新呈现的内容。如果整个DOM需要重新渲染，或者只是部分需要重新渲染，等等。</p><p id="61f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个例子是，如果我们每秒渲染一段HTML，带有一个标题和一个每秒增加1的<code class="fe ne nf ng nh b">count</code>,那么每秒，整个DOM将被更新，而不仅仅是计数。但是有了React和虚拟DOM的使用，DOM中唯一会更新的是<code class="fe ne nf ng nh b">count</code>,它将再次被绘制到屏幕上。因此，使用所谓的diffing算法，React使得更新DOM更加有效。</p><h1 id="9a77" class="mt lt iq bd lu mu mv mw lx mx my mz ma jw na jx md jz nb ka mg kc nc kd mj nd bi translated">什么是虚拟DOM？</h1><p id="0930" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是官方<a class="ae kv" href="https://reactjs.org/docs/faq-internals.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> React文档</strong> </a>关于它的说法:</p><blockquote class="ni nj nk"><p id="474d" class="kw kx mq ky b kz la jr lb lc ld ju le nl lg lh li nm lk ll lm nn lo lp lq lr ij bi translated">虚拟DOM (VDOM)是一个编程概念，其中UI的理想或“虚拟”表示保存在内存中，并与“真实”DOM同步</p></blockquote><p id="7faf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React为DOM拥有的每个DOM对象提供一个虚拟DOM对象，它充当真实DOM对象的轻量级副本。这就是虚拟DOM，它只不过是真实DOM的一个轻量级克隆。React在幕后有算法可以在虚拟DOM的帮助下有效地更新真实DOM，反之亦然，但是这是如何以及何时发生的呢？</p><p id="37d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当一个组件的状态改变时，整个虚拟DOM被更新；这看起来很不方便，但并不是因为虚拟DOM非常轻便和快速。这就像仅仅因为屏幕上什么也没画就更新一个对象。然而，当您的应用程序扩展并且您有许多相互依赖的组件时，重新渲染可能难以避免，并且实际上可能会降低性能，尤其是当您有一个组件重新渲染时触发的昂贵操作时。所以请记住:这种状态变化会导致一连串的重新渲染吗？它是好的还是需要一些关注？</p><p id="885d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后将新的虚拟DOM对象与状态更新前的对象进行比较。React然后确定哪些虚拟DOM对象已经被改变(这被称为diffing)，并且一旦它确定了哪些虚拟DOM对象已经被改变，它就仅用那些已经被改变的新对象来更新真实DOM，使用智能和高效的算法来用正确和必要的改变来更新DOM。但是为什么它比你可能听说的要快呢？</p><p id="941e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为当我们的React组件中发生状态变化时，我们的虚拟DOM首先被更新，然后它将它与之前的虚拟DOM进行比较，并且只更新那些需要更新的真实DOM的节点，并且它这样做是高效的。它还批量更改以提高效率。因此，它不会一次更新一个节点，而是将所有更改更新一次。</p><p id="24ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们的web应用程序很大，并且我们使用简单的JavaScript来更新DOM，这可能是一个昂贵的过程，因为DOM将不得不以低效的方式重新呈现，更不用说疯狂的复杂性了。</p><h2 id="6705" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">结论:</h2><p id="a166" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">对于DOM中的每个DOM对象，React都有一个与之对应的“虚拟DOM对象”，就像它的一个轻量级副本。</p><p id="f416" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为DOM操作起来很慢，所以操作虚拟DOM更快，性能更好，而且最值得注意的是:有助于消除DOM的复杂性。</p><h1 id="9aad" class="mt lt iq bd lu mu mv mw lx mx my mz ma jw na jx md jz nb ka mg kc nc kd mj nd bi translated">如果你喜欢这件作品，我希望你也会喜欢:</h1><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/4-killer-ways-to-write-typescript-with-react-6a66b32764f1"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">用React编写打字稿的4种黑仔方法</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">4个黑仔打字稿，带反馈提示+ 1个额外提示</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kp nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/5-typescript-lessons-that-will-pay-off-911d35974c8"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">将会有回报的5堂打字课</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">你知道第五条吗？</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oa l"><div class="og l oc od oe oa of kp nr"/></div></div></a></div><div class="no np gp gr nq nr"><a href="https://betterprogramming.pub/callbacks-vs-promises-vs-async-await-a-step-by-step-guide-f93d13447604" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">回调vs .承诺vs .异步Await:逐步指南</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">引擎盖下也有点。</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">better编程. pub</p></div></div><div class="oa l"><div class="oh l oc od oe oa of kp nr"/></div></div></a></div><p id="39da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mq">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mq">plain English . io</em></strong></a><em class="mq">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mq">免费周报</em> </strong> </a> <em class="mq">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mq">Twitter</em></strong></a><em class="mq">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mq">LinkedIn</em></strong></a><em class="mq">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mq">社区不和谐</em> </strong> </a> <em class="mq">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mq">人才集体</em> </strong> </a> <em class="mq">。</em></p></div></div>    
</body>
</html>