<html>
<head>
<title>My Revisited TypeScript Persistent Layout Pattern for Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js的持久化布局模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/my-revisited-typescript-persistent-layout-pattern-for-next-js-9491bb39b24c?source=collection_archive---------8-----------------------#2022-01-10">https://javascript.plainenglish.io/my-revisited-typescript-persistent-layout-pattern-for-next-js-9491bb39b24c?source=collection_archive---------8-----------------------#2022-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="90c5" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">代码模式</h2><div class=""/><div class=""><h2 id="9cb5" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用Next.js管理布局的一个众所周知且非常高效的模式</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/5227908ddaacc4e24d8314419514447a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c-4RnxT-NkjzEGja"/></div></div></figure><p id="05d7" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当您开发Next.js应用程序时，您可能希望定义不同页面之间的通用布局。</p><p id="5814" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">那么复用的问题就出现了。官方文档为我们提供了一个实用的方法，但是在如何管理它的布局方面却有些欠缺。</p><h1 id="d40b" class="lw lx iq bd ly lz ma mb mc md me mf mg kf mh kg mi ki mj kj mk kl ml km mm mn bi translated">我对Next.js持久化布局的建议</h1><p id="baa5" class="pw-post-body-paragraph la lb iq lc b ld mo ka lf lg mp kd li lj mq ll lm ln mr lp lq lr ms lt lu lv ij bi translated">它由三件事组成:</p><ol class=""><li id="bd58" class="mt mu iq lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">一个允许从属性中动态加载给定布局的组件。</li><li id="7131" class="mt mu iq lc b ld ng lg nh lj ni ln nj lr nk lv my mz na nb bi translated">一个类型文件，允许在我们的页面和布局之间定义一个接口契约。</li><li id="2fdc" class="mt mu iq lc b ld ng lg nh lj ni ln nj lr nk lv my mz na nb bi translated">遵守此接口协定的布局组件。</li><li id="aad8" class="mt mu iq lc b ld ng lg nh lj ni ln nj lr nk lv my mz na nb bi translated">最后，<code class="fe nc nd ne nf b">pages/_app.tsx</code>文件中的更新考虑到了我们的布局。</li></ol><p id="65b7" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">让我们从类型定义文件开始，这里有<code class="fe nc nd ne nf b">CodingSparkAppProps</code>，这是我们将在<code class="fe nc nd ne nf b">pages/_app.tsx</code>中使用的属性，然后我们定义<code class="fe nc nd ne nf b">CodingSparkPageLayoutProps</code>，它用我们应用程序可用的布局覆盖了一个相当通用的类型LayoutArgs。</p><p id="b985" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当然，它扩展了Next.js的默认类型:<code class="fe nc nd ne nf b">NextPage</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="14f4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在下面的文件中，你会注意到默认情况下我们管理一个<code class="fe nc nd ne nf b">none</code>布局，这意味着没有布局。如果您尚未将所有页面迁移到此布局系统，这将非常有用。</p><p id="b317" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在这里，因为我们的布局很少，所以我们从一个<code class="fe nc nd ne nf b">switch/case</code>语句开始，但是我们也可以使用一个对应表，比如一个<code class="fe nc nd ne nf b">Map</code>或者一个对象。如果你开始有许多布局，这是我邀请你做的。</p><p id="2a5d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">请注意，我们仅在使用布局时使用<code class="fe nc nd ne nf b">next/dynamic</code>来加载布局，以便通过分块优化应用程序的第一次加载。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="a066" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">最后，很简单，我们要用上面在接口文件中定义的元数据“标记”我们的页面。</p><p id="0e9e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在这里，没有什么非常复杂的，我们甚至利用了自动完成！</p><pre class="kp kq kr ks gt nn nf no np aw nq bi"><span id="0e46" class="nr lx iq nf b gy ns nt l nu nv"><strong class="nf ja">import</strong> <strong class="nf ja">type</strong> { CodingSparkNextPage } <strong class="nf ja">from</strong> "modules/nextjs";</span><span id="c90b" class="nr lx iq nf b gy nw nt l nu nv"><strong class="nf ja">const</strong> OnboardingPage: CodingSparkNextPage = () =&gt; {   <br/>  <strong class="nf ja">return</strong> &lt;div&gt;Some content&lt;/div&gt;;<br/>};</span><span id="869f" class="nr lx iq nf b gy nw nt l nu nv">OnboardingPage.layout = { <strong class="nf ja">type</strong>: "onboarding" };</span><span id="1e88" class="nr lx iq nf b gy nw nt l nu nv"><strong class="nf ja">export</strong> <strong class="nf ja">default</strong> OnboardingPage;</span></pre><p id="51ed" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们要做的最后一件事是将我们的布局与我们的应用程序连接起来，为此我们在文件<code class="fe nc nd ne nf b">page/_app.tsx</code>中进行如下操作。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="228a" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">剩下的就是品尝成功的甜蜜味道…😌</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="37f2" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><a class="ae oe" href="https://www.codingspark.io" rel="noopener ugc nofollow" target="_blank"> ⚡️和您在法国🇫🇷方向的酒店</a></p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="3767" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="of">更多内容请看</em> <a class="ae oe" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> <em class="of">说白了。</em></strong></a></p><p id="c095" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="of">报名参加我们的</em> <a class="ae oe" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> <em class="of">免费周报</em> </strong> </a> <em class="of">。关注我们关于</em><a class="ae oe" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lc ja"><em class="of">Twitter</em></strong></a>，<a class="ae oe" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lc ja"><em class="of">LinkedIn</em></strong></a><em class="of">，</em><a class="ae oe" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lc ja"><em class="of">YouTube</em></strong></a><em class="of">，以及</em> <a class="ae oe" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> <em class="of">不和</em> </strong> </a> <strong class="lc ja"> <em class="of">。</em>T41】</strong></p><p id="e269" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja"> <em class="of">有兴趣缩放你的软件启动</em> </strong> <em class="of">？检查</em> <a class="ae oe" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> <em class="of">电路</em> </strong> </a> <em class="of">。</em></p><h1 id="9a39" class="lw lx iq bd ly lz ma mb mc md me mf mg kf mh kg mi ki mj kj mk kl ml km mm mn bi translated">进一步阅读</h1><div class="og oh gp gr oi oj"><a rel="noopener  ugc nofollow" target="_blank" href="/typescript-made-easy-a-guide-to-your-first-type-safe-app-with-next-js-wundergraph-and-prisma-e197a59e2b30"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ja gy z fp oo fr fs op fu fw iz bi translated">轻松编写类型脚本:使用Next.js、WunderGraph和Prisma编写第一个类型安全应用程序的指南</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">是时候抛开恐惧，学习TypeScript了。让我们给你第一次“发现！”瞬间通过建立一个完整的…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ky oj"/></div></div></a></div></div></div>    
</body>
</html>