<html>
<head>
<title>Deploy a Node.js API in 10 Minutes or Less</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在10分钟或更短时间内部署Node.js API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deploy-a-node-js-api-in-10-minutes-or-less-33eae4afb46d?source=collection_archive---------7-----------------------#2022-10-25">https://javascript.plainenglish.io/deploy-a-node-js-api-in-10-minutes-or-less-33eae4afb46d?source=collection_archive---------7-----------------------#2022-10-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4b30" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">创建CI/CD管道，该管道将使用DigitalOcean App Platform、Node.js、Express、TypeScript和Docker部署微服务。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/887c2896a12126c57b9baeec5dfac03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2CWGKkEKdax-P-d5lCoHYA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Grab a Cup of Coffee and Set Sail to Better Deployments! 📷: <a class="ae ks" href="https://www.shutterstock.com/image-photo/cup-coffee-sailboat-alarm-clock-morning-1625946913" rel="noopener ugc nofollow" target="_blank">marcoiacobucci</a></figcaption></figure><p id="8180" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">“时间是免费的，但它是无价的。你不能拥有它，但你可以使用它。你不能留着它，但你可以花它。一旦你失去了它，就再也找不回来了。” —哈维·麦凯</p><h1 id="c681" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">准备起航☀️</h1><p id="18a3" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">单独的开发人员和小团队不能花几天时间幻想基础设施的最佳实践和部署管道。毫无结果的<a class="ae ks" href="https://www.merriam-webster.com/dictionary/woolgathering" rel="noopener ugc nofollow" target="_blank">羊毛收集</a>浪费时间，并阻止商业运输有价值的功能和销售软件。除非您的企业拥有足够的资源来雇佣大批开发人员，否则您需要一个平台来快速投入生产并频繁部署更新。</p><p id="5982" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本教程中，我们将创建一个<a class="ae ks" href="https://www.redhat.com/en/topics/devops/what-cicd-pipeline" rel="noopener ugc nofollow" target="_blank"> CI/CD管道</a>，它将使用<a class="ae ks" href="https://www.digitalocean.com/products/app-platform" rel="noopener ugc nofollow" target="_blank"> DigitalOcean App Platform </a>、<a class="ae ks" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>、<a class="ae ks" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express </a>、<a class="ae ks" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>和<a class="ae ks" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>部署一个<a class="ae ks" href="https://en.wikipedia.org/wiki/Microservices" rel="noopener ugc nofollow" target="_blank">微服务</a>。如果您还没有注册DigitalOcean，您可以使用此<a class="ae ks" href="https://m.do.co/c/dc728031e191" rel="noopener ugc nofollow" target="_blank">链接</a>获得一些免费计算。当提示登录或创建帐户时，选择GitHub选项以简化部署。</p><h1 id="f2d9" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">升起桅杆⛵️</h1><p id="36b2" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">要开始本教程，我们需要一个用Node.js和Docker构建的服务，托管在GitHub的repo中。你可以使用自己的服务，或者使用<a class="ae ks" href="https://github.com/bobbyg603/node-typescript-express-docker-starter" rel="noopener ugc nofollow" target="_blank">这里</a>提供的回购模板在你的GitHub账户中创建一个新的回购。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/b92250809f048d5061945f4ea15162d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*XAdbfQgteTWU3etJ_jBtTw.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Create a New Repo from a Template</figcaption></figure><p id="7836" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦在GitHub repo中有了一个工作的Node.js服务，就该配置数字海洋应用平台了！该应用平台“允许开发人员直接向数字海洋服务器发布代码，而无需担心底层基础设施”。</p><p id="3448" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要部署新的应用程序，请登录DigitalOcean，单击仪表板左侧的<strong class="kv io">应用程序</strong>选项卡，然后单击<strong class="kv io">创建应用程序</strong>按钮。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/3dd9522bde96d769329cd9204d1cc87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1r1fLmvCHWEVy2-k6nHXDA.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">DigitalOcean Create App</figcaption></figure><p id="acc2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">假设你已经用你的GitHub账户登录，在<strong class="kv io">服务提供商</strong>部分选择<strong class="kv io"> Github </strong>选项。接下来，在<strong class="kv io">存储库</strong>部分中选择您的repo的名称。如果您的回购未显示在列表中，请单击<strong class="kv io">编辑您的GitHub权限</strong>链接，并授予DigitalOcean访问您的回购的权限。</p><p id="9164" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦您选择了您的回购，请确保选中了<strong class="kv io">自动部署</strong>字段，然后单击<strong class="kv io">下一步</strong>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/83b005dea79d6080033c585d4785d5d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AeftxvK-AsKxa10puEgyCg.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Allow DigitalOcean Permission to your GitHub Repo</figcaption></figure><p id="efb6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您将被要求指定您的API将使用的资源。如果您使用提供的模板repo，请删除DigitalOcean因开发docker文件而建议的额外服务。点击<strong class="kv io">编辑计划</strong>按钮，暂时选择<strong class="kv io">基本</strong>。可以放心点击<strong class="kv io">下一个</strong>直到结束。</p><blockquote class="mo mp mq"><p id="2798" class="kt ku lp kv b kw kx jo ky kz la jr lb mr ld le lf ms lh li lj mt ll lm ln lo ig bi translated"><em class="in"> ⚠️ </em> <strong class="kv io"> <em class="in">如果您没有任何点数，您将为此服务器付费。</em>T25】</strong></p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/ab2ab35ff2736603d45f397f1c841b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*q6IYxka9TZQ9xYxvTQ6vfQ.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Creating Your Resource</figcaption></figure><p id="339e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">几分钟后，您的API将被部署，并可从世界任何地方访问！要验证您的API已启动并正在运行，请单击<strong class="kv io"> Live App </strong>按钮。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/628b5937b328ac0e1464438e461f2423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*LU6bEU4S6h7e0pPwkhbGwQ.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Home Route for the Live App</figcaption></figure><p id="680e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您已经成功地将您的API部署到了云中！当你推送至GitHub repo的<code class="fe mu mv mw mx b">main</code>分支时，DigitalOcean也会自动部署你的应用。</p><h1 id="afe0" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">探索海洋🐳</h1><p id="7cd2" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">让我们使用<a class="ae ks" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>与API进行交互。Postman是一个帮助你原型化API请求的工具。已经为模板回购创建了一个样本集合，可以通过下面的链接转移到您的帐户。</p><div class="my mz gp gr na nb"><a href="https://app.getpostman.com/run-collection/591801-d40f15ef-00ba-46ca-b51a-86b7f5f629c3?action=collection%2Ffork&amp;collection-url=entityId%3D591801-d40f15ef-00ba-46ca-b51a-86b7f5f629c3%26entityType%3Dcollection%26workspaceId%3D5b17848c-5889-43d3-ae5c-0ae918c08357" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd io gy z fp ng fr fs nh fu fw im bi translated">收藏网页视图|邮递员</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">有困难吗？安装最新的桌面应用程序或Chrome扩展。如需帮助，请访问支持中心。</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">app.getpostman.com</p></div></div></div></a></div><p id="4af4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦你分叉了邮差收藏，点击收藏文件夹，选择<strong class="kv io">变量</strong>选项卡，并通过点击<strong class="kv io"> Live App </strong>按钮用你在浏览器中导航到的URL更新<code class="fe mu mv mw mx b">base_url</code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/9ec3813f6b2cfa34c7895a906e7360a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5P_r1zaVmuh7X-3RTv2Ytg.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Updating Postman Base URL</figcaption></figure><p id="63d4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们现在可以上传一个文件到API了！在Postman中，点击<strong class="kv io"> Deploy Node API中的<strong class="kv io"> POST文件</strong>请求，在10分钟内</strong>集合。选择<strong class="kv io">主体</strong>选项卡，并检查<strong class="kv io">表单数据</strong>单选按钮。在<strong class="kv io">键下的</strong>列输入<code class="fe mu mv mw mx b">file</code>并将鼠标悬停在该列的右侧，在下拉菜单中选择<strong class="kv io">文件</strong>。在<strong class="kv io">值</strong>栏下，点击<strong class="kv io">选择文件</strong>按钮，选择系统上小于20 MB的任何文件。最后点击<strong class="kv io">发送</strong>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/e96396cd5a78616077e0f231bc8ce5ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nBajCcz3FwRjOiFE_PhiFg.gif"/></div></div></figure><p id="92d4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果一切正常，您应该能够对<code class="fe mu mv mw mx b">/files</code>端点执行GET请求，并在上传文件列表中看到您的文件。你也可以在DigitalOcean中打开你的应用控制台，它会给你一个外壳，你可以用它来运行各种终端命令，比如<code class="fe mu mv mw mx b"><a class="ae ks" href="https://www.freecodecamp.org/news/the-linux-ls-command-how-to-list-files-in-a-directory-with-options/#the-linux-ls-command" rel="noopener ugc nofollow" target="_blank">ls</a></code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/04ab667cc901ff8c8a8cd4a511289a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vkdIwj_Cdqfpl1kqAUGEvA.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Viewing Uploaded Files in the App Console</figcaption></figure><p id="84b3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">厉害！您已经使用DigitalOcean的应用程序平台正式将微服务部署到了云中。将这个API与一个<a class="ae ks" href="https://docs.digitalocean.com/products/app-platform/how-to/manage-databases/" rel="noopener ugc nofollow" target="_blank">数据库</a>、一个<a class="ae ks" href="https://docs.digitalocean.com/products/app-platform/how-to/manage-workers/" rel="noopener ugc nofollow" target="_blank">工作器</a>和一个<a class="ae ks" href="https://docs.digitalocean.com/products/app-platform/how-to/manage-static-sites/" rel="noopener ugc nofollow" target="_blank">前端</a>结合起来，你就在构建世界下一个<a class="ae ks" href="https://en.wikipedia.org/wiki/Unicorn_(finance)" rel="noopener ugc nofollow" target="_blank">独角兽</a>的路上了！</p><h1 id="23e0" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">附加学习🧑‍🏫</h1><p id="cce4" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">一个健壮的CI/CD管道需要贡献者评审所有提议的代码变更。在GitHub中，这些类型的预合并需求被称为<a class="ae ks" href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/defining-the-mergeability-of-pull-requests/about-protected-branches" rel="noopener ugc nofollow" target="_blank">分支保护规则</a>。</p><p id="8d33" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">查看<a class="ae ks" href="https://betterprogramming.pub/github-status-checks-and-branch-protection-made-easy-b70d6d9ffc76" rel="noopener ugc nofollow" target="_blank"> GitHub状态检查和分支保护变得简单</a>，了解如何将分支保护配置为CI/CD管道的一部分。</p><div class="my mz gp gr na nb"><a href="https://betterprogramming.pub/github-status-checks-and-branch-protection-made-easy-b70d6d9ffc76" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd io gy z fp ng fr fs nh fu fw im bi translated">GitHub状态检查和分支保护变得简单</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">使用分行保护规则，以确保您的回购协议的质量贡献</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">better编程. pub</p></div></div><div class="nk l"><div class="nl l nm nn no nk np km nb"/></div></div></a></div><p id="4a53" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">此外，在合并变更之前，CI/CD管道应该需要运行并通过一些测试。一般来说，包含<a class="ae ks" href="https://en.wikipedia.org/wiki/Unit_testing" rel="noopener ugc nofollow" target="_blank">单元测试</a>的应用程序架构更好，包含的错误更少，并且随着复杂性的增加更容易更改。</p><p id="306c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要了解如何开始编写单元测试，请阅读2022年的<a class="ae ks" href="https://betterprogramming.pub/unit-testing-software-in-2022-b3ac00962c65" rel="noopener ugc nofollow" target="_blank">单元测试软件入门。</a></p><div class="my mz gp gr na nb"><a href="https://betterprogramming.pub/unit-testing-software-in-2022-b3ac00962c65" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd io gy z fp ng fr fs nh fu fw im bi translated">2022年单元测试软件入门</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">以荒唐的速度开发顶级软件</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">better编程. pub</p></div></div><div class="nk l"><div class="nq l nm nn no nk np km nb"/></div></div></a></div><p id="48a1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢阅读！</p><pre class="kd ke kf kg gt nr mx ns nt aw nu bi"><span id="2471" class="nv lr in mx b gy nw nx l ny nz"><strong class="mx io">Want to Connect?</strong></span><span id="6149" class="nv lr in mx b gy oa nx l ny nz">If you found the information in this tutorial useful please subscribe on <a class="ae ks" href="http://bobbyg603.medium.com/" rel="noopener">Medium</a>, follow me on <a class="ae ks" href="https://twitter.com/bobbyg603" rel="noopener ugc nofollow" target="_blank">Twitter</a>, and/or subscribe to my <a class="ae ks" href="https://www.youtube.com/c/bobbyg603" rel="noopener ugc nofollow" target="_blank">YouTube</a> channel.</span></pre></div><div class="ab cl ob oc hr od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ig ih ii ij ik"><p id="aa01" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">说白了就是</em> </strong> </a> <em class="lp">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">免费周报</em> </strong> </a> <em class="lp">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">推特</em> </strong> </a>，<a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">领英</em> </strong> </a> <em class="lp">，</em><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="lp">YouTube</em></strong></a><em class="lp">，以及</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">不和</em> </strong> </a> <em class="lp">。对增长黑客感兴趣？检查</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">电路</em> </strong> </a> <em class="lp">。</em></p></div></div>    
</body>
</html>