<html>
<head>
<title>How to Create an Extensible API Service in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular中创建可扩展的API服务</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-an-extensible-api-service-in-angular-e451073a2f90?source=collection_archive---------5-----------------------#2022-02-25">https://javascript.plainenglish.io/how-to-create-an-extensible-api-service-in-angular-e451073a2f90?source=collection_archive---------5-----------------------#2022-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c346cf26c861e327f650c3324a3d3e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4x9HOUJuf4t5sEqhiVgQeA.png"/></div></div></figure><p id="1522" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你正在创建一个有角度的前端网站，你无疑会利用API。让我们来看看一种简单的方法，可以标准化您的API服务，以及处理它们可能收到的任何响应错误。</p><p id="b53c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的前端站点通常会使用不止一个API。因此，我更喜欢为每个API端点创建一个服务，并在需要的地方注入它们。为了防止重复代码，我总是创建一个基础<code class="fe kw kx ky kz b">api.service.ts</code>,我的其他API服务将扩展这个基础。基类看起来像这样:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="8b32" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本质上，该类包含了可能需要从API请求的每个RESTful操作的方法。对于这个例子，我只展示了GET和POST，但是PUT、DELETE和PATCH也可以按照相同的范例添加。</p><p id="b31a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们当然使用Angular的HttpClient来发送请求。此外，我们正在利用RxJS内置的<code class="fe kw kx ky kz b">pipe()</code>和<code class="fe kw kx ky kz b">tap()</code>函数。通过使用<code class="fe kw kx ky kz b">tap()</code>,我们可以拦截响应并处理任何可能返回的错误，并且仍然将响应发送给最初调用它的服务。通过在父API类中这样做，并让每个子服务调用这些函数，我们确保每个错误都被捕获和处理。然而，还有另一种方法可以达到同样的效果。通过实现Angular的HttpInterceptor类，可以用类似的方式处理传出的请求和响应。我更喜欢可扩展服务方法。</p><p id="384c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们有了基类，我们可以为我们可能需要向其发送请求的每个API创建一个服务类。这里有一个例子:</p><figure class="la lb lc ld gt jr"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="c9a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个基本的示例服务有一个发出GET请求的函数和一个发出POST请求的函数。因为所有的工作都是在父类中完成的，所以这个子服务只需要从父类中调用相应的函数并返回它的承诺。</p><p id="10df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用这种方法，我们创建的任何API服务都可以非常简单和干净地扩展父API并到达一个API，而不用担心每个API的错误捕获。</p></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><p id="2fa2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望这个方法对你有所帮助，并一如既往地感谢你的阅读。</p><p id="7b56" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ln">更多内容请看</em><a class="ae lo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ln">plain English . io</em></strong></a><em class="ln">。报名参加我们的</em> <a class="ae lo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ln">免费周报</em> </strong> </a> <em class="ln">。关注我们关于</em><a class="ae lo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ln">Twitter</em></strong></a><em class="ln">和</em><a class="ae lo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ln">LinkedIn</em></strong></a><em class="ln">。加入我们的</em> <a class="ae lo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ln">社区不和谐</em> </strong> </a> <em class="ln">。</em></p></div></div>    
</body>
</html>