<html>
<head>
<title>How to Display the Loading Screen When Calling Any API in Angular?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular中调用任何API时如何显示加载屏幕？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-display-the-loading-screen-when-calling-any-api-in-angular-2bbb93a599f9?source=collection_archive---------4-----------------------#2022-07-03">https://javascript.plainenglish.io/how-to-display-the-loading-screen-when-calling-any-api-in-angular-2bbb93a599f9?source=collection_archive---------4-----------------------#2022-07-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f19c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本文旨在向您展示当您在整个项目中调用任何API时，如何显示加载指示器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f9ff19bafcc79abb18c355124e154f22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CcqRDw03Ih6y9wOE.jpg"/></div></div></figure><p id="8638" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">开始一个新的角度项目。</p><p id="5739" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将使用HTTP拦截器。</p><p id="de12" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们通过键入以下命令来创建一个新服务:</p><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="0b51" class="kz la in kv b gy lb lc l ld le">ng g service interceptor</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/4a6bd4e38192b69708976612623ad292.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*ZErHCBPZG_1xfk8fb1CFgQ.png"/></div></figure><p id="c941" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将此服务添加到您的模块文件中，即providers array部分中的<strong class="jm io"> app.module.ts </strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lg"><img src="../Images/325d227d0efd0d42ca0706bc3f306da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g09mcmxvcxLkfufbCl4JmQ.png"/></div></div></figure><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="a9e5" class="kz la in kv b gy lb lc l ld le">providers: [{ provide: HTTP_INTERCEPTORS, useClass: InterceptorService, multi: true }],</span></pre><p id="e965" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们处理服务文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lh"><img src="../Images/78e2e48f4fa23565cd58041ee8386af5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGrKKc1OHL1n7vu5QFAVhw.png"/></div></div></figure><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="bfd9" class="kz la in kv b gy lb lc l ld le">import { HttpEvent, HttpHandler, HttpRequest } from ‘@angular/common/http’;</span><span id="9f0c" class="kz la in kv b gy li lc l ld le">import { Injectable } from ‘@angular/core’;</span><span id="6f61" class="kz la in kv b gy li lc l ld le">import { NgxSpinnerService } from ‘ngx-spinner’;</span><span id="e893" class="kz la in kv b gy li lc l ld le">import { finalize, Observable } from ‘rxjs’;</span><span id="aebb" class="kz la in kv b gy li lc l ld le">@Injectable({</span><span id="7ce7" class="kz la in kv b gy li lc l ld le">providedIn: ‘root’</span><span id="0682" class="kz la in kv b gy li lc l ld le">})</span><span id="855e" class="kz la in kv b gy li lc l ld le">export class InterceptorService {</span><span id="c56f" class="kz la in kv b gy li lc l ld le">constructor(private spinner: NgxSpinnerService) { }</span><span id="c64e" class="kz la in kv b gy li lc l ld le">intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {</span><span id="f14c" class="kz la in kv b gy li lc l ld le">this.spinner.show();</span><span id="528d" class="kz la in kv b gy li lc l ld le">return next.handle(req).pipe(</span><span id="aa72" class="kz la in kv b gy li lc l ld le">finalize(() =&gt; this.spinner.hide())</span><span id="a3bb" class="kz la in kv b gy li lc l ld le">);</span><span id="d570" class="kz la in kv b gy li lc l ld le">}}</span></pre><p id="f791" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码中，我为加载器使用了ngxspinnerservice。如果您已经创建了一个spinner服务，您可以使用它。</p></div><div class="ab cl lj lk hr ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ig ih ii ij ik"><p id="f9b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在app.component.html<strong class="jm io">的最后一步</strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/b87254cecfdfcfb5a052b357c596bed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2g7zgaArSQNTbyXGypFYWQ.png"/></div></div></figure><p id="6976" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用ngx-spinner的加载器和内部，使用一些SVG的显示。</p><p id="f4fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">干杯，我们成功集成了HTTP拦截器。</p><p id="0935" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lr">更多内容看</em> <a class="ae ls" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lr">说白了就是</em> </strong> </a> <em class="lr">。报名参加我们的</em> <a class="ae ls" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lr">免费周报</em> </strong> </a> <em class="lr">。关注我们关于</em><a class="ae ls" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lr">Twitter</em></strong></a><em class="lr">和</em><a class="ae ls" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lr">LinkedIn</em></strong></a><em class="lr">。查看我们的</em> <a class="ae ls" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lr">社区不和谐</em> </strong> </a> <em class="lr">加入我们的</em> <a class="ae ls" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lr">人才集体</em> </strong> </a> <em class="lr">。</em></p></div></div>    
</body>
</html>