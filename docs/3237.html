<html>
<head>
<title>Scrape Data From a Website With Pagination Using JavaScript &amp; Playwright</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript和剧作家从带有分页的网站中抓取数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/scrape-data-from-a-website-with-pagination-using-javascript-playwright-14c46d9148dd?source=collection_archive---------5-----------------------#2022-08-11">https://javascript.plainenglish.io/scrape-data-from-a-website-with-pagination-using-javascript-playwright-14c46d9148dd?source=collection_archive---------5-----------------------#2022-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8a94" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用传统分页解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/19096bdddb4217ec5286922c86ba92a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JHfbk0TSIcfo5Ld9"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Photo by <a class="ae kr" href="https://unsplash.com/@greaterbythehour2020?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Amari James</a> on <a class="ae kr" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ec2e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">分页内容无处不在。例如，如果你去一个电子商务网站，不是所有的产品都在同一个页面上，它们很可能分布在几个页面上。</p><p id="9a83" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">分页是web开发中广泛使用的一种技术，它通过固定的空间大小或元素数量来组织内容。这是为了让用户的导航更加人性化。</p><p id="3b03" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">有很多方法可以对网站的内容进行分页，这些方法对用户来说都是完美的。主要的方式有传统的上下一页按钮，无限滚动，和加载更多的按钮。</p><p id="2cda" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">然而，网页抓取在一些网站上比其他网站更困难，这取决于它们的结构。</p><p id="70fe" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">让我们来看一个带有分页的web抓取网站的例子。我们将使用剧作家<a class="ae kr" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir">开发我们的脚本，这是一种测试现代web应用程序的新技术。</strong></a></p><h1 id="ec54" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">传统分页</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/7a27f72a81c9feddd507bc9a2ff737b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gGDUFlgSgor9oh0w.png"/></div></figure><p id="6461" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">传统的分页将内容分成10个、25个、100个或其他任意数量的结果。在清单的最后，它包含了一页一页向前和向后移动的链接。用户既可以使用这些链接，也可以使用web浏览器上的前进和后退按钮。</p><p id="bdaa" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">大多数网站，如报纸、在线商店、搜索引擎和论坛，都使用传统的分页系统。</p><h1 id="d879" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">刮削<a class="ae kr" href="https://www.ytravelblog.com/" rel="noopener ugc nofollow" target="_blank">y行程</a></h1><p id="14e6" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">假设在这个练习中，我们需要检索网站上发布的博客(标题和链接)。因此，我们必须通过分页来获取所有信息。</p><p id="6e2f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们将处理这类帖子<a class="ae kr" href="https://www.ytravelblog.com/category/travel-planning/travel-tips/" rel="noopener ugc nofollow" target="_blank">旅游贴士——y旅游博客</a></p><p id="5242" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们要做的第一步是:</p><p id="ca62" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">1-手动浏览网站，并确定使用了哪种类型的分页，以了解我们将如何进行练习。</p><p id="4a1c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">2-找到分页元素并使用浏览器检查它。为了与分页进行交互，我们需要定位下一个按钮元素和总页数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ml"><img src="../Images/b235eba57e95e2435b571063938e6905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kgz9RRi7kgN2c--xIewwYQ.png"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Step 2</figcaption></figure><p id="0c10" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">3-我们定位想要从每个页面中提取的元素。在这种情况下，我们需要博客标题和链接。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ml"><img src="../Images/6b6438d42ac3eb10150622386f7f55e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*59XYFyg0RXzBRthdfiFthA.png"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Step 3</figcaption></figure><p id="aa70" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">4 —是时候编码了</p><p id="be66" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你仍然对网络抓取或者它是如何工作的有疑问，我推荐你看一看我的文章，在那里我解释了更多。</p><div class="mq mr gp gr ms mt"><a href="https://medium.com/geekculture/what-you-need-to-know-to-develop-your-first-web-scraper-with-javascript-b3296b758258" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">用JavaScript开发第一个Web Scraper需要知道什么</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">网页抓取快速入门指南</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">medium.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh kl mt"/></div></div></a></div><p id="7509" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在下面的脚本中，我们获取在每个页面上找到的每个博客的标题和链接，并将其作为JSON返回。对于分页，我们开发了两种简单的方法来实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="d8cc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">首先，我们需要知道需要点击和浏览的页面总数，或者，如果需要，根据总数只抓取一定数量的页面。</p><p id="ed94" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">下面是练习的代码。我简要地评论了每个代码块的作用。执行代码只需要安装<a class="ae kr" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir">剧作家</strong> </a>和<code class="fe nk nl nm nn b">node fileName.js</code>。</p><p id="af1c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果我们需要的只是抓取我们找到的所有页面，在第二种形式中，我们不需要知道页面的总数，所以我们只循环，直到我们不再找到页面上可见的“Next”按钮元素，这意味着没有更多的页面。</p><h1 id="6761" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">最终输出</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/0b7b979fa311da2344336eae91666cdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NFZRUk_o3vXq_c3j.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Output JSON object</figcaption></figure><h1 id="8bd1" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">结论</h1><p id="ec4a" class="pw-post-body-paragraph ks kt iq ku b kv mg jr kx ky mh ju la lb mi ld le lf mj lh li lj mk ll lm ln ij bi translated">我们已经看到了网站通过分页显示内容的最广为人知的方式。</p><p id="b303" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在这种情况下，在分页中导航并不困难，但是我们可能会遇到其他类型的导航，我们需要做更多的工作来实现它。回顾HTML结构和内容加载是如何工作的是很重要的。</p><p id="19b4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我希望这个练习能帮助你更好地了解如何抓取你的目标网站。</p><p id="ee33" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">刮的开心！</p><p id="85bb" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">阅读更多关于网页抓取的信息:</strong></p><div class="mq mr gp gr ms mt"><a href="https://medium.com/codex/web-scraping-what-is-it-and-what-is-it-used-for-e5c04ac8191" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">网页抓取:它是什么，它是用来做什么的？</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">了解网络搜集如何帮助您完成日常任务</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">medium.com</p></div></div><div class="nc l"><div class="no l ne nf ng nc nh kl mt"/></div></div></a></div></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><p id="7943" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">请记住，在抓取之前，您必须考虑网站的服务条款和隐私政策。所以你要为此负责。</p><p id="c682" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir"> <em class="nw">想联系作者？<br/> </em> </strong> <em class="nw">喜欢在</em> <a class="ae kr" href="https://twitter.com/ljaviertovar" rel="noopener ugc nofollow" target="_blank"> <em class="nw">推特</em> </a> <em class="nw">上与世界各地的朋友联系。</em></p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="f34f" class="nx lp iq bd lq ny nz dn lu oa ob dp ly lb oc od ma lf oe of mc lj og oh me oi bi translated">进一步阅读</h2><div class="mq mr gp gr ms mt"><a rel="noopener  ugc nofollow" target="_blank" href="/overcoming-3-major-web-scraping-challenges-that-developers-face-1e664ffe4783"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">克服开发者面临的3大网络抓取挑战</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">如何克服3个主要的网络抓取限制—动态网站、网站交互和指纹管理…</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nc l"><div class="oj l ne nf ng nc nh kl mt"/></div></div></a></div><div class="mq mr gp gr ms mt"><a rel="noopener  ugc nofollow" target="_blank" href="/automate-web-scraping-with-an-easy-to-use-browser-extension-cb6073f1e61d"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">使用易于使用的浏览器扩展自动抓取网页</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">如何使用Listly，一个初学者友好的无代码工具，轻松实现web抓取过程的自动化。</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nc l"><div class="ok l ne nf ng nc nh kl mt"/></div></div></a></div><p id="e923" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><em class="nw">更多内容请看</em><a class="ae kr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="nw">plain English . io</em></strong></a><em class="nw">。报名参加我们的</em> <a class="ae kr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku ir"> <em class="nw">免费周报</em> </strong> </a> <em class="nw">。关注我们关于</em><a class="ae kr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="nw">Twitter</em></strong></a><a class="ae kr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="nw">LinkedIn</em></strong></a><em class="nw"/><a class="ae kr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="nw">YouTube</em></strong></a><em class="nw"/><a class="ae kr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ku ir"><em class="nw">不和</em> </strong> </a> <em class="nw">。</em></p></div></div>    
</body>
</html>