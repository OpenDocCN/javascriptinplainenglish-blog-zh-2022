<html>
<head>
<title>Multiline Text Truncation With CSS line-clamp</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CSS换行符截断多行文本</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/multiline-text-truncation-with-css-line-clamp-7b0977a730cf?source=collection_archive---------8-----------------------#2022-04-25">https://javascript.plainenglish.io/multiline-text-truncation-with-css-line-clamp-7b0977a730cf?source=collection_archive---------8-----------------------#2022-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="14f2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用CSS换行符实现多行文本截断的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/80047a983b62eb3ab1fb6f5e17e3b3ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P3xPUAFxqJ9w6_3sJE_AYQ.png"/></div></div></figure><p id="8d34" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在前端开发中，包括React在内，通常必须截断呈现给用户的文本。有很多理由这样做。可能是为了节省宝贵的屏幕空间，让UI的不同部分看起来统一，把不太重要的信息放在切换按钮后面，等等。</p><p id="0b23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">大多数前端开发人员都知道如何实现单行文本的文本截断。它需要一个固定的宽度，并混合使用<code class="fe ln lo lp lq b">overflow: hidden</code>、<code class="fe ln lo lp lq b">white-space: nowrap</code>和<code class="fe ln lo lp lq b">text-overflow: ellipsis</code> CSS规则。如果应用了最后一个CSS规则，所有这些将使文本在一行后截断，并在文本末尾添加一个省略号。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lr"><img src="../Images/f3388cb790a9fc91c04b77ff2991e8ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wc93fLV3vJnS-hKzGPSoLQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Common frontend issue: textual content rendered inside some UI component (card). But because their lengths are all different, the UI becomes inconsistent.</figcaption></figure><p id="8728" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但这只适用于单行文本截断。在某些情况下，对UI来说，在多行而不是一行之后截断文本是有益的。与单行文本截断相比，同样的原因也适用，但形式略有不同。但是如何实现这一点呢？</p><h1 id="ce05" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">变通方法</h1><p id="9c27" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">不幸的是，很长一段时间以来，没有简单的方法来实现多行文本截断。所有的解决方案都围绕着计算单词，计算字母，或者把内容放在一个有一定尺寸的盒子里。但是所有这些解决方案都笨重、不灵活，并且存在自身的问题。</p><p id="15b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">计算单词和字母都需要使用JavaScript，与CSS解决方案相比，JavaScript对浏览器的优化程度较低。计算单词非常依赖于语言和单词的长度，这仍然会导致不均匀的截断，而计算字母会导致用户的单词损坏。这两种解决方案都要求内容完全是文本。</p><p id="435e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">相反，将内容放入指定尺寸的盒子中是基于CSS的解决方案。单行截断解决方案的问题是，它要求文本换行在一行之后停止。这个解决方案避免了CSS规则，而是根据文本的间距和行高在内容周围创建一个框。然而，这种解决方案与内容的字体属性紧密相关，因此非常不灵活。</p><h1 id="3692" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">CSS线夹</h1><p id="ba2c" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">为了解决所有这些问题，WebKit中添加了一个CSS规则:<code class="fe ln lo lp lq b">-webkit-line-clamp</code>。它接受一个整数值，并将使用它的元素的内容限制在指定的行数内。使用该行箝位特性的要求是行箝位元素的<code class="fe ln lo lp lq b">display</code>属性应该设置为<code class="fe ln lo lp lq b">-webkit-box</code>或<code class="fe ln lo lp lq b">-webkit-inline-box</code>，并且<code class="fe ln lo lp lq b">-webkit-box-orient</code>属性设置为<code class="fe ln lo lp lq b">vertical</code>值。看起来应该是这样的。</p><pre class="kg kh ki kj gt mt lq mu mv aw mw bi"><span id="d3b4" class="mx lx iq lq b gy my mz l na nb">.content {<br/>  display: -webkit-box;<br/>  -webkit-box-orient: vertical;<br/>  -webkit-line-clamp: 3;<br/>  overflow: hidden;<br/>}</span></pre><p id="7c05" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">发生的情况是，CSS将呈现所有内容，但将其限制在指定的行数(在本例中为3)之后。在那一行的末尾，它将添加省略号来表示行的夹紧。最后，您必须添加<code class="fe ln lo lp lq b">overflow: hidden</code> CSS规则来确保所有其他行都不可见。</p><p id="a248" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就对了，现在你有了统一的元素，它们总是被截断成相同数量的行。所有这些都是通过纯CSS完成的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lr"><img src="../Images/7eaf80559d7915ebdeecf12eb742a369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fiprqdl8SjcBEqGD1v6t_A.png"/></div></div></figure><p id="c47d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae nc" href="https://codesandbox.io/s/lucid-dream-6ylwul?file=/src/App.js" rel="noopener ugc nofollow" target="_blank"> <em class="nd">(在本CodeSandbox中试用)</em> </a></p><p id="1946" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后要提的是浏览器支持。浏览器对这些方便的CSS规则的支持一直是它们最大的缺点之一。虽然有很多简洁而有用的CSS规则，但它们通常局限于某些web浏览器引擎或web浏览器。这使得采用它们变得困难，因为它们只能覆盖部分用户群。</p><p id="6b5d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在换行的例子中，它是一个专门在WebKit中实现的CSS规则。然而，在撰写本文时，对<code class="fe ln lo lp lq b">-webkit-line-clamp</code>的支持已经达到了<a class="ae nc" href="https://caniuse.com/?search=line-clamp" rel="noopener ugc nofollow" target="_blank">几乎所有的主流浏览器</a>。唯一不支持它的浏览器是Internet Explorer，如果它是用户浏览器的重要组成部分，这可能会带来问题。然而，line-clamp是<a class="ae nc" href="https://www.w3.org/TR/css-overflow-3/#propdef--webkit-line-clamp" rel="noopener ugc nofollow" target="_blank"> CSS溢出模块Level 3 </a>的一部分，它可以在将来提供更广泛的支持。</p><h1 id="283b" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">摘要</h1><p id="0678" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">多行文本截断是一个常见的前端问题，通常用于使内容更加统一，节省屏幕空间，或者减少用户在屏幕上看到的不太重要的信息。</p><p id="f2cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然单行等价问题可以通过几行直观的CSS轻松解决，但这并不适用于多行文本截断。相反，前端开发人员不得不求助于计数单词、计数字母或自己定义内容的维度框等方法。最终，所有这些方法都是次优的、不灵活的，并且存在各自的问题。</p><p id="cfe9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是随着WebKit中的行箝位特性的实现，所有与变通办法有关的问题都解决了。它为我们提供了一组简单的CSS规则，可以用来通过纯CSS实现多行文本截断。虽然<code class="fe ln lo lp lq b">-webkit-line-clamp</code>及其同伴还没有得到整个领域的支持，但它已经可以在大多数主流浏览器中使用。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="b27b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你喜欢这篇文章，可以考虑看看<a class="ae nc" href="https://www.getrevue.co/profile/chakshunyu" rel="noopener ugc nofollow" target="_blank">不凡反应</a>时事通讯和我的<a class="ae nc" href="https://twitter.com/keraito" rel="noopener ugc nofollow" target="_blank">推特</a>中的其他条目，以便将来更新。</p><p id="7148" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nd">更多内容看</em> <a class="ae nc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nd">说白了就是io </em> </strong> </a> <em class="nd">。报名参加我们的</em><strong class="kt ir"><em class="nd"/></strong><a class="ae nc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nd">免费周报</em> </strong> </a> <em class="nd">。关注我们关于</em><a class="ae nc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nd">Twitter</em></strong></a><em class="nd">和</em><strong class="kt ir"><em class="nd"/></strong><a class="ae nc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nd">LinkedIn</em></strong></a><em class="nd">。加入我们的</em> <a class="ae nc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nd">社区不和谐</em> </strong> </a> <em class="nd">。</em></p></div></div>    
</body>
</html>