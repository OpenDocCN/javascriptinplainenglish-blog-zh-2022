<html>
<head>
<title>5 Optimization Tips for React You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的React的5个优化技巧</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-optimization-tips-for-react-you-should-know-2f7e316bdd05?source=collection_archive---------0-----------------------#2022-09-01">https://javascript.plainenglish.io/5-optimization-tips-for-react-you-should-know-2f7e316bdd05?source=collection_archive---------0-----------------------#2022-09-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="986b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这些技巧可以帮助您更好地优化React项目。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/47f218e59cab47e442431d93a051db5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LXeozMtvA6bTjdgc"/></div></div></figure><p id="e272" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我工作多年，接手过很多历史项目。大部分项目都可以用“屎山”来形容。如何接手并优化它们？</p><p id="cdd4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我从项目的生命周期来讲。</p><h1 id="ff74" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">1.优化Babel、Webpack配置项目</h1><p id="784c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">首先是编译阶段。当我们使用<code class="fe mk ml mm mn b">create-react-app</code>或者<code class="fe mk ml mm mn b">webpack</code>来构建一个react项目的时候，你有没有想过一个问题，我们的配置是否可以让我们的项目构建更快，规模更小，项目结构更简单清晰</p><p id="9e3b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">随着我们的项目越做越大，项目依赖越来越多，项目结构越来越复杂，项目体量会越来越大，建设时间会越来越长，久而久之就会成为一个大而重的项目，所以我们要学会适当地为项目‘减负’。</p><ul class=""><li id="091f" class="mo mp iq kt b ku kv kx ky la mq le mr li ms lm mt mu mv mw bi translated"><code class="fe mk ml mm mn b">include</code>或<code class="fe mk ml mm mn b">exclude</code>来限制<code class="fe mk ml mm mn b">loader</code>的范围</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><ul class=""><li id="c3ea" class="mo mp iq kt b ku kv kx ky la mq le mr li ms lm mt mu mv mw bi translated"><code class="fe mk ml mm mn b">Happypack</code>多流程编译</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><ul class=""><li id="d2e1" class="mo mp iq kt b ku kv kx ky la mq le mr li ms lm mt mu mv mw bi translated">缓存babel编译的文件</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><ul class=""><li id="2b3a" class="mo mp iq kt b ku kv kx ky la mq le mr li ms lm mt mu mv mw bi translated">按需加载，按需导入</li></ul><p id="0f48" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最佳化的</p><pre class="kg kh ki kj gt mz mn na nb aw nc bi"><span id="55b7" class="nd lo iq mn b gy ne nf l ng nh">Compilation time: 20.4s =&gt; 6.89s<br/>Project volume: 7.3M =&gt; 4.1M</span></pre><h1 id="5de6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">2.路由延迟加载</h1><p id="50b9" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated"><code class="fe mk ml mm mn b">react</code>路由延迟加载基于<code class="fe mk ml mm mn b">import</code>函数路由延迟加载。众所周知，<code class="fe mk ml mm mn b">import</code>执行会返回一个<code class="fe mk ml mm mn b">Promise</code>作为异步加载的手段。我们可以用这个来实现<code class="fe mk ml mm mn b">react</code>异步加载路由。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="2c8f" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">3.独立请求服务提供单元</h1><p id="2b14" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">然后是渲染阶段，建立一个独立的请求渲染单元。直接的理解就是，如果我们把页面分为请求数据显示部分(通过调用后端接口获取数据)，和基础部分(没有请求数据，已经直接写好了OK)，对于一些逻辑交互不是很复杂的数据显示部分，我推荐使用独立组件，独立请求数据，独立控制呈现方式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="7c80" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">4.合理使用状态管理</h1><p id="a275" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">然后是国家管理。国家管理要解决什么问题？状态管理可以解决的问题主要分为两个方面，一是解决跨级组件通信的问题，二是缓存一些全局公共状态。<br/>我们的redux系列状态管理就是一个例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="737c" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">错误的用法</h1><p id="9050" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">这样，页面请求数据，当数据被更新时，这一切都发生在当前组件中。我不推荐这种写作方式。这时候数据经过状态管理，最后回到组件本身，很没味道，起不到作用。就性能优化而言，最好直接在组件内部请求数据。</p><h1 id="3c82" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">5.海量数据优化</h1><p id="aae4" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">然后就是海量数据源，长列表渲染，虚拟列表是解决长列表渲染的最佳方案。<br/>虚拟列表(virtual list)是一种按需显示技术，根据用户的滚动，不必呈现所有的列表项，而只呈现可视区域中的一部分列表元素。正常的虚拟列表分为渲染区、缓冲区和虚拟列表区。<br/>为了防止大量DOM的存在影响性能，我们只渲染渲染区和缓冲区的数据，虚拟列表区没有真正的DOM。缓冲器的作用是防止快速滑动或向上滑动过程中出现空白现象。</p><h1 id="0456" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">微小虚拟列表</h1><p id="dbce" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">是一个相对轻量级的组件，实现了虚拟列表。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="c10a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">最后</h1><p id="fa30" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated"><strong class="kt ir">感谢阅读。</strong>我期待着<strong class="kt ir"> </strong>您的关注和阅读更多高质量的文章。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="d266" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="np">更多内容看</em> <a class="ae nq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="np">说白了。报名参加我们的</em> <a class="ae nq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="np">免费周报</em> </strong> </a> <em class="np">。关注我们关于</em> <a class="ae nq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="np">推特</em> </strong> </a>，<a class="ae nq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="np">LinkedIn</em></strong></a><em class="np">，</em><a class="ae nq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="np">YouTube</em></strong></a><em class="np">，</em> <a class="ae nq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="np">不和</em> </strong> </a> <em class="np">。</em></strong></a></p></div></div>    
</body>
</html>