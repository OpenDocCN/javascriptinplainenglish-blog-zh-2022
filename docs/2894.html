<html>
<head>
<title>How to Set Up Linter &amp; Formatter for Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Node.js设置Linter &amp; Formatter</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-linter-formatter-for-node-js-d6b34c0c8be5?source=collection_archive---------6-----------------------#2022-07-13">https://javascript.plainenglish.io/how-to-set-up-linter-formatter-for-node-js-d6b34c0c8be5?source=collection_archive---------6-----------------------#2022-07-13</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="821e" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">自动化您对ESLint的使用，与Husky一起变得更漂亮</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/f19e3823d8d934d82e0773690e2b7474.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hnc8dqfWohEPLouJPeFKmw.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@markusspiske?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae kw" href="https://unsplash.com/s/photos/green-technology?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4fba" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在Node.js项目中拥有TypeScript是确保类型安全和改善开发人员体验的一个好方法。但是我们可以通过添加Linter和Formatter来更进一步。</p><p id="3fe6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我们将看到如何使用TypeScript向Node.js项目添加一个更细更漂亮的元素。</p><p id="d8a4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们从上一篇文章继续这个项目。知识库可在<a class="ae kw" href="https://github.com/Mohammad-Faisal/nodejs-typescript-skeleton" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="da9c" class="lt lu ir bd lv lw lx dn ly lz ma dp mb lg mc md me lk mf mg mh lo mi mj mk ml bi translated">在我们开始之前…</h2><p id="3c5a" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">我用ExpressJS和Typescript 创建了一个<a class="ae kw" href="https://github.com/Mohammad-Faisal/professional-express-sequelize-docker-boilerplate" rel="noopener ugc nofollow" target="_blank">专业样板。本文是本系列的一部分。你可以找到下面所有的文章。</a></p><pre class="kh ki kj kk gu mr ms mt bn mu mv bi"><span id="7fd0" class="mw lu ir ms b be mx my l mz na"><strong class="ms is">* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/create-an-express-boilerplate-with-typescript-810eb6c29196"><strong class="ms is">Creating a ExpressJS + Typescript Boilerplate</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/how-to-set-up-linter-formatter-for-node-js-d6b34c0c8be5"><strong class="ms is">How to setup Linter and Formatter for NodeJS</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" href="https://blog.devgenius.io/how-to-handle-multiple-environments-in-nodejs-7391d2db2abe" rel="noopener ugc nofollow" target="_blank"><strong class="ms is">How to handle multiple environments in NodeJS</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/error-handling-in-node-js-like-a-pro-ed210baa0600"><strong class="ms is">Error Handling in NodeJS</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" href="https://medium.com/p/c69f2494cf18" rel="noopener"><strong class="ms is">Request validation in NodeJS</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" href="https://levelup.gitconnected.com/use-docker-with-nodejs-projects-like-a-pro-a9e7504e1308" rel="noopener ugc nofollow" target="_blank"><strong class="ms is">Using Docker Professionally with NodeJS</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/node-js-database-with-docker-for-local-development-285212c5162f"><strong class="ms is">Using Docker for Local Development in NodeJS</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/node-js-logging-for-professionals-6be07c003e7f"><strong class="ms is">Logging in NodeJS</strong></a><strong class="ms is"><br/><br/>* </strong><a class="ae kw" href="https://levelup.gitconnected.com/kubernetes-deployment-with-nodejs-made-easy-eaeec32b62e3" rel="noopener ugc nofollow" target="_blank"><strong class="ms is">Kubernetes with NodeJS</strong></a></span></pre><p id="1d9f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们开始吧！</p><h1 id="c813" class="nb lu ir bd lv nc nd ne ly nf ng nh mb jx ni jy me ka nj kb mh kd nk ke mk nl bi translated">第1步:安装所需的依赖项</h1><p id="54cf" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">让我们首先安装所需的依赖项。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="f4c0" class="lt lu ir ms b gz np nq l mz na">yarn add -D eslint \<br/>@typescript-eslint/eslint-plugin \<br/>@typescript-eslint/parser</span></pre><p id="1542" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">默认情况下，ESLint不支持typescript，所以我们添加了另外两个包作为开发人员依赖项。</p><h1 id="c407" class="nb lu ir bd lv nc nd ne ly nf ng nh mb jx ni jy me ka nj kb mh kd nk ke mk nl bi translated">第2步:创建一个配置文件</h1><p id="b689" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">现在创建一个新的ESLint配置文件。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="7a17" class="lt lu ir ms b gz np nq l mz na">touch .eslintrc</span></pre><p id="c7c9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并将下面的代码粘贴到那里。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="59b7" class="lt lu ir ms b gz np nq l mz na">{<br/>  "parser": "@typescript-eslint/parser",<br/>  "parserOptions": { "ecmaVersion": "latest", "sourceType": "module" },<br/>  "extends": ["plugin:@typescript-eslint/recommended"],<br/>  "env": {<br/>    "node": true // Enabling Node.js global variables<br/>  },<br/>  "rules": {}<br/>}</span></pre><p id="4f81" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们将package.json文件中的两个脚本添加到lint中，并轻松格式化。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="d1fb" class="lt lu ir ms b gz np nq l mz na">"scripts": {<br/>    "lint": "eslint src/**/*.ts",<br/>    "format": "eslint src/**/*.ts --fix"<br/>}</span></pre><p id="a0f4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，您可以运行以下命令来清理整个项目。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="c3f8" class="lt lu ir ms b gz np nq l mz na">yarn lint</span></pre><p id="71d4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">此外，不要忘记创建一个<code class="fe nr ns nt ms b">.eslintignore</code>文件，以避免遗漏一些文件夹。因为这可能需要一些时间。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="a756" class="lt lu ir ms b gz np nq l mz na">.eslintignore</span></pre><p id="f31b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">把下面的代码放在那里:</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="5f7f" class="lt lu ir ms b gz np nq l mz na">node_modules<br/>dist</span></pre><h1 id="068c" class="nb lu ir bd lv nc nd ne ly nf ng nh mb jx ni jy me ka nj kb mh kd nk ke mk nl bi translated">第3步:添加更漂亮的</h1><p id="6956" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">现在让我们将<code class="fe nr ns nt ms b">prettier</code>添加到项目中。首先，安装依赖项。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="1930" class="lt lu ir ms b gz np nq l mz na">yarn add -D prettier</span></pre><p id="8d9e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后在根文件夹中创建一个<code class="fe nr ns nt ms b">.prettierrc</code>文件，并在那里添加以下配置</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="60d4" class="lt lu ir ms b gz np nq l mz na">{<br/>  "semi": true,<br/>  "trailingComma": "all",<br/>  "singleQuote": true,<br/>  "printWidth": 120,<br/>  "tabWidth": 2<br/>}</span></pre><p id="5b54" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，这个配置只是我个人的喜好。如果需要，您可以使用您的配置。</p><p id="b13f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">此外，您还可以添加一个新的脚本，以便同时在所有文件上运行。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="72f0" class="lt lu ir ms b gz np nq l mz na">"scripts": {<br/>    "pretty": "prettier --write \"src/**/*.ts\""<br/>}</span></pre><p id="4a8a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对所有文件运行得更漂亮，如下所示:</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="6d88" class="lt lu ir ms b gz np nq l mz na">yarn pretty</span></pre><h1 id="a117" class="nb lu ir bd lv nc nd ne ly nf ng nh mb jx ni jy me ka nj kb mh kd nk ke mk nl bi translated">第四步:添加哈士奇</h1><p id="f2b4" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">所有这些都太棒了。但是我总是忘记运行这些命令。为了确保没有坏代码会被推到源代码中，我们可以使用一个很棒的哈斯基工具。</p><p id="e034" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">它会在您尝试提交之前运行，并且可以运行一些运行状况检查。为了更好地理解，让我们首先安装它。</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="f97f" class="lt lu ir ms b gz np nq l mz na">yarn add -D husky</span></pre><p id="2352" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后在<code class="fe nr ns nt ms b">package.json</code>文件中添加一个新的块:</p><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="b813" class="lt lu ir ms b gz np nq l mz na">"husky": {<br/>    "hooks": {<br/>      "pre-commit": "yarn lint"<br/>    }<br/>}</span></pre><p id="b9f1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因此，每次您尝试提交更改时，这个预提交钩子将运行，您的代码将自动修复。多酷啊！</p><h1 id="97e4" class="nb lu ir bd lv nc nd ne ly nf ng nh mb jx ni jy me ka nj kb mh kd nk ke mk nl bi translated">Github回购:</h1><div class="nu nv gq gs nw nx"><a href="https://github.com/Mohammad-Faisal/nodejs-typescript-skeleton" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fp"><div class="nz ab oa cl cj ob"><h2 class="bd is gz z fq oc fs ft od fv fx iq bi translated">git hub-Mohammad-fais al/nodejs-type script-skyline:这是一个使用nodejs和…</h2><div class="oe l"><h3 class="bd b gz z fq oc fs ft od fv fx dk translated">这是一个使用nodejs和type script-GitHub-Mohammad-fais al/nodejs-type script-skyline的框架项目</h3></div><div class="of l"><p class="bd b dl z fq oc fs ft od fv fx dk translated">github.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol kq nx"/></div></div></a></div><pre class="kh ki kj kk gu mr ms nm nn aw no bi"><span id="e6dc" class="lt lu ir ms b gz np nq l mz na"><strong class="ms is">Want to Connect?</strong></span><span id="78a4" class="lt lu ir ms b gz om nq l mz na">You can reach out to me via <a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="ms is">LinkedIN</strong></a> or my <a class="ae kw" href="https://www.mohammadfaisal.dev/blog" rel="noopener ugc nofollow" target="_blank"><strong class="ms is">Personal Website</strong></a></span></pre><p id="f2c3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="on">更多内容请看</em><a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="on">plain English . io</em></strong></a><em class="on">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="on">免费周报</em> </strong> </a> <em class="on">。关注我们关于</em><a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="on">Twitter</em></strong></a><em class="on">和</em><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="on">LinkedIn</em></strong></a><em class="on">。查看我们的</em> <a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="on">社区不和谐</em> </strong> </a> <em class="on">加入我们的</em> <a class="ae kw" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="on">人才集体</em> </strong> </a> <em class="on">。</em></p></div></div>    
</body>
</html>