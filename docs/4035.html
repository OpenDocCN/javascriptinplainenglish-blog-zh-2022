<html>
<head>
<title>Nest.js — Getting Started</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Nest.js —入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nest-js-getting-started-5ffa116cc7af?source=collection_archive---------9-----------------------#2022-10-19">https://javascript.plainenglish.io/nest-js-getting-started-5ffa116cc7af?source=collection_archive---------9-----------------------#2022-10-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e82e1b9ba4edfca35b4f67bd234a7a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IYpAWfgbkemBFzr6xVkh_A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Nest.js</figcaption></figure><blockquote class="jz ka kb"><p id="fb8c" class="kc kd ke kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">任何傻瓜都能写出计算机能理解的代码。优秀的程序员编写人类能够理解的代码。—马丁·福勒</p></blockquote><h1 id="cdf9" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">介绍</h1><p id="4126" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated">NestJS是一个开源的node.js框架，用于构建高效且可伸缩的服务器端应用程序。</p><p id="2741" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">在底层，NestJS利用express.js来处理http请求，或者可以将其配置为利用fastify.js(一个强大的node.js http服务器)。</p><p id="17b3" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">与express.js或koa.js等其他node.js框架相比，NestJS是一个完整的框架。与其他框架相比，NestJS默认解决了一些需要大量设置和配置的问题:</p><ul class=""><li id="4f4b" class="mh mi in kf b kg kh kk kl mb mj md mk mf ml la mm mn mo mp bi translated">代码组织</li><li id="be7a" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">API路由设置</li><li id="8107" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">设置web套接字。</li><li id="e32b" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">命名规格</li><li id="b750" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">数据库集成</li><li id="e236" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">Typescript设置</li><li id="9377" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">强大的CLI</li></ul><h1 id="469d" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装NestJS</h1><p id="8ceb" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated">运行NestJS应用程序的唯一要求是node.js和npm。以下命令检查node.js和npm是否已安装</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="0f44" class="ne lc in na b gy nf ng l nh ni">node --version<br/>npm --version</span></pre><p id="f87b" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">NestJS可通过以下方法之一搭建:</p><h2 id="043a" class="ne lc in bd ld nj nk dn lh nl nm dp ll mb nn no lp md np nq lt mf nr ns lx nt bi translated">NestJS CLI</h2><p id="522b" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated">以下命令用于全局安装NestJS CLI。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="0e7b" class="ne lc in na b gy nf ng l nh ni">npm i -g @nestjs/cli</span></pre><p id="2b4f" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">您还可以检查NestJS CLI的安装版本。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="b9d6" class="ne lc in na b gy nf ng l nh ni">nest --version</span></pre><p id="a1f1" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">bellow命令用于可视化NestJS CLI可以完成的伟大工作。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="64c1" class="ne lc in na b gy nf ng l nh ni">nest --help</span></pre><h1 id="70cb" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">首次NestJS应用</h1><p id="70a7" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated">通过在终端中执行下面的命令，可以创建一个名为<strong class="kf io">博客</strong>的NestJS应用程序。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="8193" class="ne lc in na b gy nf ng l nh ni">nest new blog</span></pre><p id="5d9c" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">该应用程序可以通过在应用程序的目录中输入下面的命令来运行。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="7220" class="ne lc in na b gy nf ng l nh ni">npm run start</span></pre><p id="1c2f" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">出于生产率和可测试性的原因，如果src文件夹中有变化，NestJS可以通过在终端中输入以下命令来重启应用程序:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="0a13" class="ne lc in na b gy nf ng l nh ni">npm run start:dev</span></pre><h1 id="f3f1" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">应用架构</h1><p id="888d" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated">在NestJS应用程序中，一切都是结构化和有组织的。所有应用程序逻辑都存在于src文件夹中。默认情况下，它包含以下文件:</p><h2 id="a98e" class="ne lc in bd ld nj nk dn lh nl nm dp ll mb nn no lp md np nq lt mf nr ns lx nt bi translated">入口点(main.ts)</h2><p id="edde" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated">这是NestJS应用程序的入口点。它使用<strong class="kf io"> NestFactory.create </strong>并使用<strong class="kf io"> AppModule </strong>来创建应用程序。</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="nu nv l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">main.ts</figcaption></figure><h2 id="694b" class="ne lc in bd ld nj nk dn lh nl nm dp ll mb nn no lp md np nq lt mf nr ns lx nt bi translated">应用程序模块</h2><p id="52fa" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated"><strong class="kf io"> app.module.ts </strong>是应用的根模块。NestJS应用程序应该至少有一个模块。</p><p id="2967" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">模块是用@Module注释的类，它为类提供了更多信息。</p><p id="0724" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">该模块采用具有以下属性的单个对象:</p><ul class=""><li id="e504" class="mh mi in kf b kg kh kk kl mb mj md mk mf ml la mm mn mo mp bi translated">提供者:它是注入这个模块的<strong class="kf io">服务</strong>的列表。</li><li id="07d9" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">控制器:是该模块中定义的<strong class="kf io">控制器</strong>的列表。</li><li id="7e16" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">imports:它是导出提供程序的导入模块的列表。</li><li id="bb37" class="mh mi in kf b kg mq kk mr mb ms md mt mf mu la mm mn mo mp bi translated">exports:它是服务的子列表(在providers中定义),被导出供其他模块使用。</li></ul><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/4150be07c1db1e2c1e540f3bc7a4c100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-7bJVgL4h_tsQrS3RNK2A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">app.module.ts</figcaption></figure><h2 id="2f88" class="ne lc in bd ld nj nk dn lh nl nm dp ll mb nn no lp md np nq lt mf nr ns lx nt bi translated">应用控制器(app.controller.ts)</h2><p id="0e07" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated"><strong class="kf io"> app.controller.ts </strong>是处理对根url /的请求的控制器。<strong class="kf io">控制器使用可注入服务。</strong></p><p id="f30d" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">控制器负责处理<strong class="kf io">请求</strong>并将<strong class="kf io">响应</strong>发送回客户端。</p><p id="9f54" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">控制器还通过向<strong class="kf io">@控制器</strong>装饰器传递一个字符串来定义应用程序的<strong class="kf io">路由</strong>。</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/725e905f30c9419af6453bd3a000cd0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvvwWKU7zhWJq5OE1qZISQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">app.controller.ts</figcaption></figure><p id="1419" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">通过声明另一个函数并用<strong class="kf io"> @Get </strong> decorator进行注释，可以向控制器添加新的路由。下面的控制器有两条路径，默认的/和/greet路径。</p><p id="dd38" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">通过调用这个URL<a class="ae nx" href="http://localhost:3000/greet?name=bewar%20salah" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/greet？name=Bewar%20Salah </a>，它将返回<strong class="kf io"> Hello Bewar Salah </strong></p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/8362fefa2f72830f9e15a1a81d3cc45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NOhAyydI_sja5zgCmIpmqA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">with greet</figcaption></figure><h2 id="e006" class="ne lc in bd ld nj nk dn lh nl nm dp ll mb nn no lp md np nq lt mf nr ns lx nt bi translated">应用服务(app.service.ts)</h2><p id="e0ff" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated"><strong class="kf io"> app.service.ts </strong>是一个由<strong class="kf io"> @Injectable </strong> decorator注释的服务。这个类可以注入任何其他类(控制器或其他服务)。</p><p id="551d" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">服务被提供给一个模块，并且它可以被同一模块中的控制器使用。服务可以由一个模块导出到另一个模块，以便由其他模块的控制器使用。</p><p id="bd00" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">服务对于将逻辑从控制器中分离出来非常重要。控制器仅用于定义路由、请求和响应形状。该服务处理数据库查询和电子邮件发送。</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/8dfae8c1ca2d9d0092f457e457ad4672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lv6s9L5r8ADthUvhaFp56Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">app.service.ts</figcaption></figure><h1 id="e8ba" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">NestJS CLI和命令</h1><ul class=""><li id="3115" class="mh mi in kf b kg lz kk ma mb ny md nz mf oa la mm mn mo mp bi translated">在博客目录中创建新的博客控制器<strong class="kf io">如果目录不存在，也创建目录。</strong></li></ul><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="f9b5" class="ne lc in na b gy nf ng l nh ni">nest g controller blogs</span></pre><ul class=""><li id="f65b" class="mh mi in kf b kg kh kk kl mb mj md mk mf ml la mm mn mo mp bi translated">在博客目录中创建新的博客<strong class="kf io">模块</strong>，如果目录不存在也创建目录。</li></ul><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="d3c5" class="ne lc in na b gy nf ng l nh ni">nest g module blogs</span></pre><ul class=""><li id="2e1e" class="mh mi in kf b kg kh kk kl mb mj md mk mf ml la mm mn mo mp bi translated">在博客目录中创建新的博客服务，如果目录不存在，也创建目录。</li></ul><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="4bc5" class="ne lc in na b gy nf ng l nh ni">nest g service blogs</span></pre><ul class=""><li id="bcf4" class="mh mi in kf b kg kh kk kl mb mj md mk mf ml la mm mn mo mp bi translated">在blogs/dto文件中创建名为<strong class="kf io"> blog.entity.ts </strong>的新<strong class="kf io">类</strong>文件。</li></ul><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="fe85" class="ne lc in na b gy nf ng l nh ni">nest g class blogs/dto/blog.entity</span></pre><ul class=""><li id="ad87" class="mh mi in kf b kg kh kk kl mb mj md mk mf ml la mm mn mo mp bi translated">引导您创建一个名为<strong class="kf io"> blogs </strong>的新目录，其中包含dto、实体、控制器、服务和模块。</li></ul><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="aeb6" class="ne lc in na b gy nf ng l nh ni">nest g resource blogs</span></pre><h1 id="664e" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1b24" class="pw-post-body-paragraph kc kd in kf b kg lz ki kj kk ma km kn mb mc kq kr md me ku kv mf mg ky kz la ig bi translated">还有许多其他的概念，如认证和授权、验证、数据库集成等。每个都需要一篇文章。</p><p id="0b10" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated">NestJS是非常强大和完整的框架。一切都是围绕decorator(typescript强大的特性)构建的，这使得代码可读性更好，测试更容易。</p></div><div class="ab cl ob oc hr od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ig ih ii ij ik"><p id="3545" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn mb kp kq kr md kt ku kv mf kx ky kz la ig bi translated"><em class="ke">更多内容请看</em><a class="ae nx" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="ke">plain English . io</em></strong></a><em class="ke">。报名参加我们的</em> <a class="ae nx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf io"> <em class="ke">免费周报</em> </strong> </a> <em class="ke">。关注我们关于</em><a class="ae nx" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="ke">Twitter</em></strong></a><a class="ae nx" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="ke">LinkedIn</em></strong></a><em class="ke"/><a class="ae nx" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="ke">YouTube</em></strong></a><em class="ke"/><a class="ae nx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="ke">不和</em> </strong> </a> <em class="ke">。对增长黑客感兴趣？检查</em> <a class="ae nx" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf io"> <em class="ke">电路</em> </strong> </a> <em class="ke">。</em></p></div></div>    
</body>
</html>