<html>
<head>
<title>Angular useClass provider: simple explanation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度使用类提供者:简单解释</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-useclass-provider-simple-explanation-8ceab2354b60?source=collection_archive---------7-----------------------#2022-10-22">https://javascript.plainenglish.io/angular-useclass-provider-simple-explanation-8ceab2354b60?source=collection_archive---------7-----------------------#2022-10-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="940a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在Angular中，provider是对<a class="ae kc" href="https://angular.io/guide/dependency-injection" rel="noopener ugc nofollow" target="_blank">依赖注入</a>系统关于如何获得依赖值的指令。</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/86d27380f885d4aaf07b3ab45e6a5bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pOoDM45ShJjPVMSzf5zuhA.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Note: I used the power of Subzero to attract readers.</figcaption></figure><blockquote class="kt ku kv"><p id="3c31" class="kw kx ky kz b la lb jo lc ld le jr lf lg lh li lj lk ll lm ln lo lp lq lr ls ig bi translated"><code class="fe lt lu lv lw b">provide</code>属性持有令牌，该令牌用作定位依赖值和配置注入器的键。第二个属性是一个<strong class="kz io">提供者定义对象</strong>，它告诉注入器如何创建依赖值。</p></blockquote><pre class="ke kf kg kh gt lx lw ly lz aw ma bi"><span id="3824" class="mb mc in lw b gy md me l mf mg">[{ provide: Logger, useClass: Logger }]</span></pre><p id="e0e0" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">这看起来很有趣，但是让我们试着去理解它到底提供了什么配置。让我们假设我们有这个具有<code class="fe lt lu lv lw b">log</code>方法的服务。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="b6a9" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">我们正在组件中导入我们的服务，并调用<code class="fe lt lu lv lw b">log</code>方法</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="7d68" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">输出将是:</p><pre class="ke kf kg kh gt lx lw ly lz aw ma bi"><span id="ff98" class="mb mc in lw b gy md me l mf mg">[Value is]: Hello</span></pre><p id="339c" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">现在让我们假设我们有另一个服务- <code class="fe lt lu lv lw b">ColorLog</code>，它做同样的事情:在控制台中记录消息，但是有额外的颜色和另一个前缀。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="6806" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">现在，如果我们想使用新创建的<strong class="kz io"> ColorLog </strong>服务，我们可以在构造函数中替换服务注入(糟糕的解决方案)。</p><pre class="ke kf kg kh gt lx lw ly lz aw ma bi"><span id="b29e" class="mb mc in lw b gy md me l mf mg">export class HelloComponent implements OnInit {<br/> // change instance here<br/>constructor(private logService: ColorLogService)<br/> {}<br/> .... <br/>}</span></pre><p id="4180" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">但是在组件中改变代码并不是一个好的解决方案，所以这里我们可以使用组件的<strong class="kz io">提供者数组</strong>。使用<code class="fe lt lu lv lw b">useClass</code>的整体思想是告诉组件它应该使用哪个类实例。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="44f3" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">注意语法</p><pre class="ke kf kg kh gt lx lw ly lz aw ma bi"><span id="1625" class="mb mc in lw b gy md me l mf mg">{<br/>  provide: LogService,<br/>  useClass: ColorLogService,<br/>}</span></pre><p id="6ee3" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">这意味着在我们的组件中，<code class="fe lt lu lv lw b">logService</code>应该是<code class="fe lt lu lv lw b">ColorLogService</code>的实例，而不是<code class="fe lt lu lv lw b">LogService</code>。好了😉。</p><p id="62da" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">如果你想只使用服务的一个实例，你可以使用<a class="ae kc" href="https://angular.io/guide/dependency-injection-providers#alias-providers-useexisting" rel="noopener ugc nofollow" target="_blank">使用现有的</a>而不是<code class="fe lt lu lv lw b">useClass</code></p><p id="3415" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated">检查<a class="ae kc" href="https://stackblitz.com/edit/a-angular-useclass?devToolsHeight=33&amp;file=src/app/hello.component.ts" rel="noopener ugc nofollow" target="_blank">堆栈</a>上的代码。</p><p id="c5ec" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mh lh li lj mi ll lm ln mj lp lq lr ls ig bi translated"><em class="ky">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz io"><em class="ky">plain English . io</em></strong></a><em class="ky">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz io"> <em class="ky">免费周报</em> </strong> </a> <em class="ky">。关注我们上</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kz io"><em class="ky">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz io"><em class="ky">LinkedIn</em></strong></a><strong class="kz io"><em class="ky"/></strong><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kz io"><em class="ky">YouTube</em></strong></a><strong class="kz io"><em class="ky"/></strong><em class="ky">和</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz io"> <em class="ky">不和</em> </strong> </a>  <em class="ky">对成长黑客感兴趣？检查</em> <a class="ae kc" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz io"> <em class="ky">电路</em> </strong> </a> <strong class="kz io"> <em class="ky">。</em> </strong></p></div></div>    
</body>
</html>