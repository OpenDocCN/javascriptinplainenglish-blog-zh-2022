<html>
<head>
<title>A look at SwitchMap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">看看SwitchMap</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-look-at-switchmap-99ef0ad26998?source=collection_archive---------8-----------------------#2022-10-03">https://javascript.plainenglish.io/a-look-at-switchmap-99ef0ad26998?source=collection_archive---------8-----------------------#2022-10-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/35699d470c7d83d404e0a9957cda39c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*SIsHONByL3Gip17ee4VKFA.gif"/></div></figure><p id="6190" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">SwitchMap是rxjs的一个操作符，它完成一个可观察对象并切换到一个新的可观察对象。</p><p id="09cd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当订阅可观察对象时不再需要来自先前可观察对象的响应时，主要使用SwitchMap。</p><figure class="kq kr ks kt gt jo gh gi paragraph-image"><div class="gh gi kp"><img src="../Images/f279dbd81abc161f52991fd2431966cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*OdxVJVi45CipFmzbY4C89w.gif"/></div></figure><p id="1339" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当内部可观察对象长期存在以防止内存泄漏时，SwitchMap是一个安全的选择。</p><p id="34fe" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">SwitchMap也非常适合用于只发出一个值的HTTP请求的短期流。</p><p id="76df" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在请求完成需要完成的情况下，例如当您从远程服务器或数据库更新、写入或删除数据时，不应使用SwitchMap。</p><figure class="kq kr ks kt gt jo gh gi paragraph-image"><div class="gh gi kp"><img src="../Images/491ea90fc678c77fc13b9805703d1dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*MKB44tO-EkJqzrrdZ5gieA.gif"/></div></figure><p id="a879" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">SwitchMap一次只有一个活动订阅，从该订阅开始，值被传递给观察者。一旦高阶可观测值发出一个新值，SwitchMap就执行该函数以获得一个新的内部可观测流并切换这些流。</p><p id="b629" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它取消订阅当前流，并订阅新的内部可观察对象。</p><p id="1f41" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">操作员的工作方式如下:</p><ol class=""><li id="528a" class="ku kv in jt b ju jv jy jz kc kw kg kx kk ky ko kz la lb lc bi translated">我们首先订阅第一个可观测值，并将其视为高阶可观测值。</li><li id="a58b" class="ku kv in jt b ju ld jy le kc lf kg lg kk lh ko kz la lb lc bi translated">立即，第一个可观察对象被发出，有一个映射函数被调用到内部可观察对象。</li><li id="b40a" class="ku kv in jt b ju ld jy le kc lf kg lg kk lh ko kz la lb lc bi translated">map函数之后是对内部可观察对象的订阅。</li><li id="4164" class="ku kv in jt b ju ld jy le kc lf kg lg kk lh ko kz la lb lc bi translated">从内部可观察对象订阅的值然后被传递给观察者。</li><li id="c773" class="ku kv in jt b ju ld jy le kc lf kg lg kk lh ko kz la lb lc bi translated">然后，从较高阶的可观测值开始重复该过程</li><li id="220f" class="ku kv in jt b ju ld jy le kc lf kg lg kk lh ko kz la lb lc bi translated">取消订阅当前的内在可观察对象，订阅新的内在可观察对象</li><li id="3453" class="ku kv in jt b ju ld jy le kc lf kg lg kk lh ko kz la lb lc bi translated">只有在所有源观察完成后，才向观察者发送完成通知。</li><li id="8680" class="ku kv in jt b ju ld jy le kc lf kg lg kk lh ko kz la lb lc bi translated">如果任何内部源观察器抛出错误，就向观察器发送错误通知。</li></ol><p id="79ee" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="li">更多内容请看</em><a class="ae lj" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="li">plain English . io</em></strong></a><em class="li">。</em></p><p id="da37" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="li">报名参加我们的</em> <a class="ae lj" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="li">免费周报</em> </strong> </a> <em class="li">。关注我们上</em> <a class="ae lj" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="li">推特</em> </strong> </a>，<a class="ae lj" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="li">领英</em> </strong> </a> <strong class="jt io"> <em class="li">，</em></strong><a class="ae lj" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="li">YouTube</em></strong></a><strong class="jt io"><em class="li">，以及</em></strong><em class="li"/><a class="ae lj" href="https://discord.com/invite/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="li">不和</em> </strong> </a>T47】</p><p id="f601" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="li">用</em> </strong> <a class="ae lj" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="li">电路</em> </strong> </a> <em class="li">为你的科技创业建立认知和采用。</em></p></div></div>    
</body>
</html>