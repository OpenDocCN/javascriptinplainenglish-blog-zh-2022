<html>
<head>
<title>Refactor Switch Statements in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中重构Switch语句</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/switch-statements-in-javascript-how-to-refactor-1a32989f6b56?source=collection_archive---------4-----------------------#2022-01-30">https://javascript.plainenglish.io/switch-statements-in-javascript-how-to-refactor-1a32989f6b56?source=collection_archive---------4-----------------------#2022-01-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d2f5" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何在JavaScript中重构switch语句的指南。</h2></div><p id="452d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Switch语句非常好，主要用于其他传统语言，如C、C++和Java。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/3b64a2dc14db92c7b516e5935473deb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxZps73cdNAFpdUyMIS-DQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Switch Refactoring in JavaScript</figcaption></figure><h1 id="d37b" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">为什么切换语句？</h1><p id="81f1" class="pw-post-body-paragraph kc kd in ke b kf mg jo kh ki mh jr kk kl mi kn ko kp mj kr ks kt mk kv kw kx ig bi translated">switch语句根据不同的条件执行不同的操作。当然，我们可以用if-else阶梯来解决上述问题，但这将使程序过于笨拙。此外，if-else阶梯仅在您最多有3个条件要检查时才是可取的。</p><p id="d3f2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">JavaScript有switch语句，但是如果你对Python感兴趣，那么作为补充信息‘Python没有switch语句，但是它通过字典映射实现了同样的功能’。</p><p id="a4e4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">由于字典映射类似于JavaScript中的对象创建，受Python的启发，我们可以用多个对象替换switch语句，这是个不错的主意。从长远来看，这将保持代码的简单和可维护性。</p><p id="6ca8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看在我们的编码生涯中最常见的例子。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="f217" class="lo lp in bd lq lr ms lt lu lv mt lx ly jt mu ju ma jw mv jx mc jz mw ka me mf bi translated">示例1</h1><p id="1199" class="pw-post-body-paragraph kc kd in ke b kf mg jo kh ki mh jr kk kl mi kn ko kp mj kr ks kt mk kv kw kx ig bi translated">编写一个代码，以字符串形式返回今天的日期，例如星期日。</p><h2 id="062b" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">使用switch语句</h2><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="10d8" class="mx lp in nk b gy no np l nq nr">let day = new Date().getDay(); </span><span id="9984" class="mx lp in nk b gy ns np l nq nr">switch (day) {<br/>  case 0:<br/>    day = "Sunday";<br/>    break;<br/>  case 1:<br/>    day = "Monday";<br/>    break;<br/>  case 2:<br/>     day = "Tuesday";<br/>    break;<br/>  case 3:<br/>    day = "Wednesday";<br/>    break;<br/>  case 4:<br/>    day = "Thursday";<br/>    break;<br/>  case 5:<br/>    day = "Friday";<br/>    break;<br/>  case 6:<br/>    day = "Saturday";<br/>}</span><span id="dcae" class="mx lp in nk b gy ns np l nq nr">console.log(day); // for 30/01/2022 it will return Sunday</span></pre><h2 id="3aa7" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">console.log的输出验证</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nt"><img src="../Images/1db5bf58dfb18d474906c274fa8aa5eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVtnrTE6Og2mqqGH6hyqFA.png"/></div></div></figure><h2 id="9e34" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">不带开关，即重构代码</h2><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="5cb8" class="mx lp in nk b gy no np l nq nr">const day = new Date().getDay();<br/>const dayMapper = {<br/>    0: "Sunday",<br/>    1: "Monday",<br/>    2: "Tuesday",<br/>    3: "Wednesday",<br/>    4: "Thursday",<br/>    5: "Friday",<br/>    6: "Saturday"<br/>};</span><span id="8aaa" class="mx lp in nk b gy ns np l nq nr">if (dayMapper.hasOwnProperty(day)) {<br/>  console.log(dayMapper[day]); // Sunday<br/>} else {<br/>  console.log("Something went wrong");<br/>}</span></pre><h2 id="cf7a" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">console.log的输出验证</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nu"><img src="../Images/4808a709229e2ea061a51f85907ad6c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KAiIt2UqHXlgTzYUKIjlqQ.png"/></div></div></figure><p id="ff32" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是最基本的例子，让我们看一个更常见但复杂的例子。</p><p id="0311" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> <em class="nv">用例:</em> </strong>假设我们必须为一个页面发送一个GA事件，例如对于主页，我们将以页面名称+当前布局名称的形式发送事件标签。</p><p id="dc55" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">问题是页面名称来自DOM中的数据属性。</p><p id="8a4a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我用一个例子进一步解释一下:</p><p id="1e3e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于在数据属性中找到的页面名称，我们需要返回(页面名称_布局名称)如下。</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="fc67" class="mx lp in nk b gy no np l nq nr">homePage -&gt; Home_index<br/>productPage -&gt; Product_pdp<br/>blogPage -&gt; Blog_blog</span></pre></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="fb55" class="lo lp in bd lq lr ms lt lu lv mt lx ly jt mu ju ma jw mv jx mc jz mw ka me mf bi translated">示例2</h1><p id="1247" class="pw-post-body-paragraph kc kd in ke b kf mg jo kh ki mh jr kk kl mi kn ko kp mj kr ks kt mk kv kw kx ig bi translated">假设将页面名称存储在数据属性中的HTML编写为:</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="aa71" class="mx lp in nk b gy no np l nq nr">HTML for homepage:<br/>&lt;div id="my-div" data-page-name="homepage"&gt;&lt;/div&gt;</span></pre><h2 id="b704" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">使用switch语句</h2><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="31ab" class="mx lp in nk b gy no np l nq nr">let pageName = document.querySelector('#my-div').dataset.pageName;<br/>let page;<br/>let layout;<br/>let ans;</span><span id="43bd" class="mx lp in nk b gy ns np l nq nr">switch (pageName) {<br/>  case "homepage":<br/>    page = "Home";<br/>    layout = "index";<br/>    break;<br/>  case "productpage":<br/>    page = "Product";<br/>    layout = "pdp";<br/>    break;<br/>  case "blogpage":<br/>    page = "Blog";<br/>    layout = "blog";<br/>    break;<br/>}</span><span id="27f9" class="mx lp in nk b gy ns np l nq nr">ans = page + '_' + layout;</span><span id="f773" class="mx lp in nk b gy ns np l nq nr">console.log(ans);</span></pre><h2 id="af65" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">console.log的输出验证</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nw"><img src="../Images/26809e9d8d5a4a8a8a711689383b61ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xn5d1PqAeC6stwsAIzbaIw.png"/></div></div></figure><h2 id="66cd" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">不带开关，即重构代码</h2><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="6b2b" class="mx lp in nk b gy no np l nq nr">let pageName = document.querySelector('#my-div').dataset.pageName;</span><span id="5fc1" class="mx lp in nk b gy ns np l nq nr">let dataPageMapper = {<br/>  homepage: 'Home',<br/>  productpage: 'Product',<br/>  blogpage: 'Blog' <br/>};</span><span id="322a" class="mx lp in nk b gy ns np l nq nr">let pageLayoutMapper = {<br/>  home: 'index',<br/>  product: 'pdp',<br/>  blog: 'blog' <br/>};</span><span id="e6f9" class="mx lp in nk b gy ns np l nq nr">let page = dataPageMapper.hasOwnProperty(pageName) &amp;&amp; dataPageMapper[pageName];</span><span id="89dd" class="mx lp in nk b gy ns np l nq nr">let layout = pageLayoutMapper[page.toLowerCase()];</span><span id="8838" class="mx lp in nk b gy ns np l nq nr">let ans = page + '_' + layout;</span><span id="435d" class="mx lp in nk b gy ns np l nq nr">console.log(ans);</span></pre><h2 id="71a2" class="mx lp in bd lq my mz dn lu na nb dp ly kl nc nd ma kp ne nf mc kt ng nh me ni bi translated">console.log的输出验证</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nx"><img src="../Images/06036773e2df29a39c9a502a3360ae65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sDM9_LDF4M_ssWkvc7QriQ.png"/></div></div></figure></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="8842" class="lo lp in bd lq lr ms lt lu lv mt lx ly jt mu ju ma jw mv jx mc jz mw ka me mf bi translated">结论</h1><p id="642f" class="pw-post-body-paragraph kc kd in ke b kf mg jo kh ki mh jr kk kl mi kn ko kp mj kr ks kt mk kv kw kx ig bi translated">上面一个是更干净的方法。如果将来我们有更多的可用页面，我们只需要在mapper对象中创建条目，就可以了。</p><p id="de25" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是对于switch语句，它将是一个很长的语句阶梯，如果您忘记添加break语句，那么您将陷入著名的switch陷阱。</p><p id="6fc1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我知道你的想法，比如你如何在代码中处理开关的事情。</p><p id="5eb4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你喜欢我的文章，你可以<a class="ae ny" href="https://www.buymeacoffee.com/ajayv" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡</a></p><p id="0aef" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">也请查看我在媒体上的其他文章和我自己的网站<a class="ae ny" href="https://weekendtutorial.com" rel="noopener ugc nofollow" target="_blank">https://weekendtutorial.com</a></p><p id="e74c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">编辑</strong></p><p id="2ce5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="ke io">例1 </strong> —由于数组也是一个对象，我们可以用数组替换代码中的对象。</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="0399" class="mx lp in nk b gy no np l nq nr">const dayNum = new Date().getDay();<br/>const days = [<br/>    "Sunday"<br/>    "Monday",<br/>    "Tuesday",<br/>    "Wednesday",<br/>    "Thursday",<br/>    "Friday",<br/>    "Saturday"<br/>];</span><span id="6514" class="mx lp in nk b gy ns np l nq nr">console.log(days[dayNum]); // Sunday</span></pre><p id="fe54" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在你知道了。感谢您的阅读。</p><p id="e995" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nv">更内容于</em> <a class="ae ny" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="nv">浅显易懂的英语中</em> </strong> </a> <em class="nv">。报名参加我们的</em> <a class="ae ny" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="nv">免费周报</em> </strong> </a> <em class="nv">。在我们的</em> <a class="ae ny" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="nv">社群不和</em> </strong> </a> <em class="nv">中获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>