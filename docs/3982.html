<html>
<head>
<title>How to Get Notified When an Element is Added to the Page with JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在用JavaScript将元素添加到页面时得到通知？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-get-notified-when-an-element-is-added-to-the-page-with-javascript-d3b9c40ae51a?source=collection_archive---------2-----------------------#2022-10-15">https://javascript.plainenglish.io/how-to-get-notified-when-an-element-is-added-to-the-page-with-javascript-d3b9c40ae51a?source=collection_archive---------2-----------------------#2022-10-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c387b82ac524ad3b60660d4765dbf836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Yrww1tN2DzrRRJrA"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@onderortel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Önder Örtel</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4b80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们希望在用JavaScript将元素添加到页面时得到通知。</p><p id="eff6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何在用JavaScript将元素添加到页面时得到通知。</p><h1 id="581e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用变异观察器API</h1><p id="1e46" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">观察DOM变化的最简单方法是使用大多数浏览器内置的MutationObserver API。</p><p id="e2c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9efe" class="mn lc iq mj b gy mo mp l mq mr">const observerConfig = {<br/>  attributes: true,<br/>  childList: true,<br/>  characterData: true<br/>};</span><span id="c472" class="mn lc iq mj b gy ms mp l mq mr">const observer = new MutationObserver((mutations) =&gt; {<br/>  mutations.forEach((mutation) =&gt; {<br/>    console.log(mutation.type);<br/>  });<br/>});<br/>observer.observe(document.body, observerConfig);</span><span id="52d1" class="mn lc iq mj b gy ms mp l mq mr">setTimeout(() =&gt; {<br/>  const div = document.createElement('div')<br/>  document.body.appendChild(div)<br/>}, 1500)</span></pre><p id="3783" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<code class="fe mt mu mv mj b">MutationObserver</code>构造函数观察DOM中的变化。</p><p id="4d29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将带有<code class="fe mt mu mv mj b">mutations</code>参数的回调传递给构造函数。</p><p id="edfc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从那里得到应用于DOM的突变。</p><p id="5534" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">mutation.type</code>已经完成了这种类型的变异。</p><p id="d625" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该将<code class="fe mt mu mv mj b">'chilidsList'</code>和<code class="fe mt mu mv mj b">'attributes'</code>视为值。</p><p id="0367" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">'childList‘</code>是子节点的变化。</p><p id="2030" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">'attributes'</code>是属性节点的变化。</p><p id="9e97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用观察者的根元素调用<code class="fe mt mu mv mj b">observer</code>，用<code class="fe mt mu mv mj b">observerConfig</code>配置变异观察者如何观察变化。</p><p id="9b3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">attributes</code>设置为<code class="fe mt mu mv mj b">true</code>意味着我们观察属性节点的变化。</p><p id="683d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">childList</code>设置为<code class="fe mt mu mv mj b">true</code>意味着我们监视子节点的变化。</p><h1 id="f391" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="12f1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用MutationObserver API来观察JavaScript web应用程序中DOM节点的变化。</p><p id="eb9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a><em class="mw">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">免费周报</em> </strong> </a> <em class="mw">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">LinkedIn</em></strong></a><strong class="kf ir"><em class="mw"/></strong><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">YouTube</em></strong></a><strong class="kf ir"><em class="mw">，以及</em></strong><em class="mw"/><a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">不和</em> </strong> </a>  <em class="mw">对成长黑客感兴趣？检查</em> <a class="ae kc" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">电路</em> </strong> </a> <strong class="kf ir"> <em class="mw">。</em> </strong></p></div></div>    
</body>
</html>