<html>
<head>
<title>My Boss: You Know ES6, But Why Don’t You Use It? 😠</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我老板:你知道ES6，为什么不用？😠</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/my-boss-you-know-es6-but-why-dont-you-use-it-5e0316f14c67?source=collection_archive---------0-----------------------#2022-03-17">https://javascript.plainenglish.io/my-boss-you-know-es6-but-why-dont-you-use-it-5e0316f14c67?source=collection_archive---------0-----------------------#2022-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e05c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">老板的10条抱怨让我受益匪浅。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/2e8fb3b4742f1e1da2c9873ef1fa0476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ku83WrbNiaPuO_mc"/></div></div></figure><h1 id="54fa" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">前言</h1><p id="170e" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">这就是我的老板在代码评审会议上对团队成员咆哮的方式。原因是他发现项目的许多部分仍然在使用ES5。不是说ES5不好，会有bug，但是会增加代码量，降低可读性。</p><p id="5f81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">碰巧我的老板有代码整洁的习惯。涉及到3到5年经验的员工，他对这个级别的代码极其不满意，不断抱怨代码。不过我还是觉得从他的抱怨中收获很大，所以决定把老板的抱怨录下来，分享给大家。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="f9c9" class="kx ky iq bd kz la mh lc ld le mi lg lh li mj lk ll lm mk lo lp lq ml ls lt lu bi translated">1.关于提取对象值的投诉</h1><p id="22fb" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">提取属性值在程序中很常见，比如从对象obj中获取值。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="e814" class="mr ky iq mn b gy ms mt l mu mv">const obj = {<br/>  a: 1,<br/>  b: 2,<br/>  c: 3,<br/>  d: 4,<br/>  e: 5,<br/>}</span><span id="9bd0" class="mr ky iq mn b gy mw mt l mu mv">const a = obj.a<br/>const b = obj.b<br/>const c = obj.c<br/>const d = obj.d<br/>const e = obj.e</span><span id="4d21" class="mr ky iq mn b gy mw mt l mu mv"><em class="mx">// or</em><br/>const f = obj.a + obj.d<br/>const g = obj.c + obj.e</span></pre><p id="b7f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板抱怨</strong>:你为什么不用ES6的析构赋值来取值？用1行代码做不是更好吗？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="4a26" class="mr ky iq mn b gy ms mt l mu mv">const { a, b, c, d, e } = obj<br/>const f = a + d<br/>const g = c + e</span></pre><p id="4077" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我反对</strong>:我不用ES6，因为API接口属性名不是我想要的。</p><p id="a88c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板抱怨</strong>:看来你还没有完全掌握ES6的破坏任务。如果要创建的变量名与对象的属性名不一致，可以这样写:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="c5f8" class="mr ky iq mn b gy ms mt l mu mv">const { a: a1 } = obj || {}</span><span id="5bd6" class="mr ky iq mn b gy mw mt l mu mv">console.log(a1)<em class="mx">// 1</em></span></pre><h1 id="7fcc" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">2.关于合并数据的投诉</h1><p id="68e3" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">比如合并两个数组或者合并两个对象。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="109f" class="mr ky iq mn b gy ms mt l mu mv">const a = [ 1, 2, 3 ]<br/>const b = [ 1, 5, 6 ]<br/>const c = a.concat(b) <em class="mx">// [ 1, 2, 3, 1, 5, 6]</em></span><span id="c3d4" class="mr ky iq mn b gy mw mt l mu mv">const obj1 = {<br/>  a:1,<br/>}<br/>const obj2 = {<br/>  b:1,<br/>}<br/>const obj = Object.assign({}, obj1, obj2) <em class="mx">// { a: 1, b: 1}</em></span></pre><p id="ef02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板的抱怨</strong>:你是不是忘了ES6 spread运算符，阵列合并不考虑重复数据删除？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="08f8" class="mr ky iq mn b gy ms mt l mu mv">const a = [ 1, 2, 3 ]<br/>const b = [ 1, 5, 6 ]<br/>const c = [...new Set([...a,...b])] <em class="mx">// [ 1, 2, 3, 5, 6 ]</em></span><span id="d9a5" class="mr ky iq mn b gy mw mt l mu mv">const obj1 = {<br/>  a:1,<br/>}<br/>const obj2 = {<br/>  b:1,<br/>}<br/>const obj = {...obj1,...obj2} <em class="mx">// { a: 1, b: 1 }</em></span></pre><h1 id="7db4" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">3.关于拼接线的投诉。</h1><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="84e6" class="mr ky iq mn b gy ms mt l mu mv">const name = 'fatfish'<br/>const score = 59<br/>let result = ''</span><span id="6ab9" class="mr ky iq mn b gy mw mt l mu mv">if(score &gt; 60){<br/>  result = `${name}passed the exam` <br/>}else{<br/>  result = `${name}failed in the exam` <br/>}</span></pre><p id="af73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板抱怨</strong>:你这样还不如不用ES6字符串模板。你不知道<code class="fe my mz na mn b">${}</code>里可以做操作？我们可以在<code class="fe my mz na mn b">${}</code>中执行任意的JavaScript表达式，执行操作，引用对象属性。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="618b" class="mr ky iq mn b gy ms mt l mu mv">const name = 'fatfish'<br/>const score = 59<br/>const result = `${name}${score &gt; 60 ? 'passed the exam' : 'failed in the exam'}`</span></pre><h1 id="d985" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">4.关于使用if的投诉</h1><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="06cf" class="mr ky iq mn b gy ms mt l mu mv">if(<br/>    type == 1 ||<br/>    type == 2 ||<br/>    type == 3 ||<br/>    type == 4 ||<br/>){<br/>   <em class="mx">//...</em><br/>}</span></pre><p id="ede4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板的抱怨</strong>:我们在ES6中使用数组的includes方法不是更好吗？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="1cd4" class="mr ky iq mn b gy ms mt l mu mv">const condition = [ 1, 2, 3, 4 ]</span><span id="1043" class="mr ky iq mn b gy mw mt l mu mv">if( condition.includes(type) ){<br/>   <em class="mx">//...</em><br/>}</span></pre><h1 id="8710" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">5.关于列表搜索的投诉。</h1><p id="e7ce" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在项目中，有些列表的搜索功能是由前端实现的，搜索一般分为精确和模糊两种。一般我们用过滤的方法来实现。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="1a6c" class="mr ky iq mn b gy ms mt l mu mv">const a = [ 1, 2, 3, 4, 5 ]<br/>const result = a.filter( <br/>  item =&gt; {<br/>    return item === 3<br/>  }<br/>)</span></pre><p id="6949" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">老板的抱怨:你不会使用ES6中的find方法进行精确搜索吗？你懂性能优化吗？如果在find方法中找到符合条件的项，它将不会继续遍历数组。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="87c5" class="mr ky iq mn b gy ms mt l mu mv">const a = [ 1, 2, 3, 4, 5 ]<br/>const result = a.find(item =&gt; item === 3)</span></pre><h1 id="1ab5" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">6.对平面阵列的抱怨。</h1><p id="6991" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在JSON数据中，属性名是部门id，值是部门雇员的id数组。现在我们需要将department的所有成员id提取到一个数组集合中。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="1d91" class="mr ky iq mn b gy ms mt l mu mv">const deps = {<br/>    'department_1':[ 1, 2, 3 ],<br/>    'department_2':[ 5, 8, 12 ],<br/>    'department_3':[ 5, 14, 79 ],<br/>    'department_4':[ 3, 64, 105 ],<br/>}<br/>let member = []</span><span id="f749" class="mr ky iq mn b gy mw mt l mu mv">for (let item in deps){<br/>    const value = deps[item]<br/>    if(Array.isArray(value)){<br/>        member = [...member,...value]<br/>    }<br/>}<br/>member = [...new Set(member)]</span></pre><p id="1c43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> BOSS的抱怨</strong>:我需要遍历获取对象的所有属性值吗？你忘了Object.values？为什么不用ES6提供的扁平化方法？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="78df" class="mr ky iq mn b gy ms mt l mu mv">const deps = {<br/>    'department_1':[ 1, 2, 3 ],<br/>    'department_2':[ 5, 8, 12 ],<br/>    'department_3':[ 5, 14, 79 ],<br/>    'department_4':[ 3, 64, 105 ],<br/>}<br/>let member = Object.values(deps).flat(Infinity)</span></pre><blockquote class="nb nc nd"><p id="1b26" class="jn jo mx jp b jq jr js jt ju jv jw jx ne jz ka kb nf kd ke kf ng kh ki kj kk ij bi translated">备注:使用Infinity作为flat的参数，所以我们不需要知道flattened数组的维数。</p></blockquote><h1 id="86ab" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">7.关于获取对象属性值的抱怨。</h1><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="1663" class="mr ky iq mn b gy ms mt l mu mv">const name = obj &amp;&amp; obj.name</span></pre><p id="9def" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板的抱怨</strong>:你不会在ES6中使用可选的链式操作符吗？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="a00d" class="mr ky iq mn b gy ms mt l mu mv">const name = obj?.name</span></pre><h1 id="0d6f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">8.关于添加对象属性的抱怨。</h1><p id="7f22" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">当我们给一个对象添加属性时，如果属性名动态变化，我们该怎么办？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="2061" class="mr ky iq mn b gy ms mt l mu mv">let obj = {}<br/>let index = 1<br/>let key = `topic${index}`</span><span id="b13f" class="mr ky iq mn b gy mw mt l mu mv">obj[key] = 'content'</span></pre><p id="2298" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板的抱怨</strong>:为什么要创造一个额外的变量。不知道ES6中的对象属性名可以用表达式吗？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="ada1" class="mr ky iq mn b gy ms mt l mu mv">let obj = {}<br/>let index = 1</span><span id="f7d3" class="mr ky iq mn b gy mw mt l mu mv">obj[`topic${index}`] = 'content'</span></pre><h1 id="36f8" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">9.对非空判断的抱怨</h1><p id="789c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在处理用户输入时，经常要判断输入框是否已经输入。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="6715" class="mr ky iq mn b gy ms mt l mu mv">if(value !== null &amp;&amp; value !== undefined &amp;&amp; value !== ''){<br/>    <em class="mx">//...</em><br/>}</span></pre><p id="00a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板的抱怨</strong>:你听说过ES6中新的空值合并运算符吗，要写这么多条件吗？</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="f6e6" class="mr ky iq mn b gy ms mt l mu mv">if((value ?? '') !== ''){<br/>  <em class="mx">//...</em><br/>}</span></pre><h1 id="c25d" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">10.对异步功能的抱怨</h1><p id="9a6f" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">异步函数很常见，并且经常作为承诺来实现。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="91d9" class="mr ky iq mn b gy ms mt l mu mv">const fn1 = () =&gt;{<br/>  return new Promise((resolve, reject) =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve(1)<br/>    }, 300)<br/>  })<br/>}<br/>const fn2 = () =&gt;{<br/>  return new Promise((resolve, reject) =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve(2)<br/>    }, 600)<br/>  })<br/>}<br/>const fn = () =&gt;{<br/>  fn1().then(res1 =&gt;{<br/>    console.log(res1) <em class="mx">// 1</em><br/>    fn2().then(res2 =&gt;{<br/>      console.log(res2)<br/>    })<br/>  })<br/>}</span></pre><p id="e0aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">老板的抱怨</strong>:你这样用异步函数，不怕形成回调地狱！</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="7f5a" class="mr ky iq mn b gy ms mt l mu mv">const fn = async () =&gt;{<br/>  const res1 = await fn1()<br/>  const res2 = await fn2()</span><span id="eab8" class="mr ky iq mn b gy mw mt l mu mv">  console.log(res1) <em class="mx">// 1</em><br/>  console.log(res2) <em class="mx">// 2</em><br/>}</span></pre><h1 id="9390" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">最后</h1><p id="c466" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">欢迎你尝试反驳以上10条老板投诉。如果你的反驳是合理的，我会在下次代码审查会上为你反驳。</p><p id="91fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mx">本文翻译已获原作者(洪陈连新)授权。</em></p><p id="5e87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mx">原地址为</em><a class="ae nh" href="https://juejin.cn/post/7016520448204603423" rel="noopener ugc nofollow" target="_blank"><em class="mx">https://juejin.cn/post/7016520448204603423</em></a></p><p id="1bc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">感谢您的阅读。</strong></p><p id="24dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mx">更多内容请看</em> <a class="ae nh" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mx">说白了就是</em> </strong> </a> <em class="mx">。报名参加我们的</em> <a class="ae nh" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mx">免费每周简讯</em> </strong> </a> <em class="mx">。关注我们</em><a class="ae nh" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mx">Twitter</em></strong></a><em class="mx">和</em><a class="ae nh" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mx">LinkedIn</em></strong></a><em class="mx">。加入我们的</em> <a class="ae nh" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mx">社区不和谐</em> </strong> </a> <em class="mx">。</em></p></div></div>    
</body>
</html>