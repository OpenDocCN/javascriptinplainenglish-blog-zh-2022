<html>
<head>
<title>What is Cross-Site Scripting (XSS) and How Does it Work?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是跨站点脚本(XSS ),它是如何工作的？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-cross-site-scripting-xss-and-how-does-it-work-696077fde647?source=collection_archive---------10-----------------------#2022-03-16">https://javascript.plainenglish.io/what-is-cross-site-scripting-xss-and-how-does-it-work-696077fde647?source=collection_archive---------10-----------------------#2022-03-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e6b416a5ab7d11c7577087444712fd71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tp1LJS4xG3lMCinz"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@nateggrant?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nate Grant</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bbeb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">⚠️:这篇文章纯粹是为了解释的目的——除非你得到批准，否则你不应该试图对网站进行任何类型的安全攻击。</p><h2 id="948d" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">什么是跨站脚本？</h2><p id="1acf" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">跨站脚本是一种在网站上执行的攻击，攻击者可以注入一些恶意代码或脚本，执行这些代码或脚本来修改网站的行为。</p><p id="7693" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这最终是一个<strong class="kc io">安全漏洞</strong>，如果你的网站接受并显示用户输入，但没有得到适当的保护，这将是非常危险的。</p><p id="3851" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">跨站脚本是一种古老的攻击，可以追溯到90年代，所以这个名字有点过时了。自那以后，代码注入的范围扩大了，所以“跨站点”现在已经不那么重要了——你通常可以直接在网站内执行大多数XSS攻击。</p><p id="6e13" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但这并没有降低它在今天的重要性。<a class="ae jz" href="https://owasp.org/" rel="noopener ugc nofollow" target="_blank">开放web应用安全项目(OWASP) </a>策划了一份<a class="ae jz" href="https://owasp.org/Top10/" rel="noopener ugc nofollow" target="_blank">2021年十大Web应用安全风险清单</a>,“注入”(其中包括跨站脚本)发生<em class="lw">27.4万次</em>。🤯</p><h2 id="698a" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">XSS的类型</h2><p id="2ad1" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">跨站点脚本有两种主要类型:</p><ul class=""><li id="de29" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx mc md me mf bi translated"><em class="lw">反射</em>(非持久)XSS，是恶意输入来自当前HTTP请求的地方，例如以<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/API/URL/searchParams#examples" rel="noopener ugc nofollow" target="_blank">查询参数</a>或头的形式。</li><li id="fde2" class="lx ly in kc b kd mg kh mh kl mi kp mj kt mk kx mc md me mf bi translated">恶意请求<em class="lw">反映</em>离开web服务器，而响应将攻击反映回用户的浏览器。仅适用于该请求，或任何提出相同请求的人。</li><li id="3ced" class="lx ly in kc b kd mg kh mh kl mi kp mj kt mk kx mc md me mf bi translated"><em class="lw">存储</em>(持久)XSS，恶意输入在这里得到<strong class="kc io">存储</strong>在一个永久的地方，比如数据库。每当页面被请求时，恶意输入就会从数据库中被请求并包含在响应中，导致它被呈现为原始HTML。</li></ul><h2 id="7f44" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">跨站脚本是如何实现的？</h2><p id="ae5c" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">最终，没有单一的方法来执行XSS攻击，因为每个网站都有许多攻击媒介和考虑因素，可以改变所需的代码。</p><p id="78d7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个常见的例子是这样的:假设有一个网站有一个搜索框，向我显示我的搜索输入:</p><ol class=""><li id="58a4" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx ml md me mf bi translated">我搜索“<strong class="kc io"> nevulo </strong>”，用我的查询向服务器发送请求(<em class="lw">通常是</em>通过查询参数，但是在请求的某个地方)</li><li id="2236" class="lx ly in kc b kd mg kh mh kl mi kp mj kt mk kx ml md me mf bi translated">我转到一个包含我的搜索结果的新网页，包括我使用的搜索词</li></ol><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/d1b28276213492d53549ce56882dc254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ujXBugKFvvZ2PLD9.png"/></div></div></figure><ol class=""><li id="a2d5" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx ml md me mf bi translated">重要的是要理解DOM包含用户输入。</li></ol><p id="0ac9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当你考虑到用户可以在输入中输入<a class="ae jz" href="https://nevulo.xyz/blog/making-your-own-website" rel="noopener ugc nofollow" target="_blank"> HTML </a>代码时，问题就开始出现了，如果返回的内容没有经过<a class="ae jz" href="https://en.wikipedia.org/wiki/HTML_sanitization" rel="noopener ugc nofollow" target="_blank">适当地净化</a>(意味着任何用户输入都被剥离了HTML)，它将不仅仅显示HTML代码，它还会呈现它<em class="lw">字面上的</em>。</p><p id="9552" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">浏览器不知道有什么不同——只要HTML有效，它就会执行它看到的任何HTML。如果我输入:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="f0b1" class="ky kz in ms b gy mw mx l my mz">&lt;div style="background: blue; width: 32px; height: 32px;"&gt;&lt;/div&gt;</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/cf661b27c61928c87db5b56fa0c4ac31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YcC8Fi_T7EXEyX42.png"/></div></div></figure><p id="3d67" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果显示我们搜索了一个蓝色方块。这是<em class="lw">反映XSS </em>的一个例子。</p><p id="c565" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果网站从这些请求参数中获取输入，并按原样返回包含您的输入的新页面，则呈现器不知道真实网站代码和注入代码之间的区别。</p><p id="7372" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，无论您在这个易受攻击的网站的输入框中写什么代码，它都会显示输出，就像页面显示您的额外代码一样。</p><p id="e3c7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，这是危险的⛔️</p><h2 id="0e4a" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">为什么跨站脚本如此危险？</h2><p id="6480" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">假设你刚刚建立了一个新的社交媒体平台，你的平台让用户能够在他们的个人公共墙上发布小块内容。我将解释<em class="lw">你如何</em>在站点中引入这个漏洞，但是现在，只要知道你的站点易受XSS攻击。</p><p id="6af5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我会注册你的社交平台，因为它很棒。现在我已经有了我的帐号，我想把我的第一篇内容贴到我的墙上！但是，我有一个卑鄙的诡计。</p><p id="e7ee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我去输入框张贴到我的墙上时，我要键入以下内容:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="344b" class="ky kz in ms b gy mw mx l my mz">&lt;script&gt;<br/>  alert("JavaScript");<br/>&lt;/script&gt;</span></pre><p id="948b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">还有帖子！任何访问我的个人资料的人都不会在我的墙上看到任何内容，他们只会在浏览器中看到一个警告框，上面写着“JavaScript”。这是<em class="lw">存储XSS </em>的一个例子。</p><p id="d75d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">XSS是一个危险的漏洞，因为如果你可以在网站中注入任何有效的HTML，你就可以注入像T0这样的恶意元素，这样你就可以在窗口环境中执行JavaScript，这就是强大的力量。</p><p id="37ff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以通过访问JavaScript进行的一些恶意操作包括:</p><ul class=""><li id="b38a" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx mc md me mf bi translated">窃取cookies(可能包含会话数据或其他敏感信息)</li><li id="d0b5" class="lx ly in kc b kd mg kh mh kl mi kp mj kt mk kx mc md me mf bi translated">通过修改DOM(文档对象模型)来改变页面的外观</li><li id="f157" class="lx ly in kc b kd mg kh mh kl mi kp mj kt mk kx mc md me mf bi translated">将用户重定向到另一个页面</li></ul><p id="4384" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你的网站易受攻击，所有这些例子以及更多的例子都会对你的用户构成严重威胁。</p><h2 id="7fe9" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">跨站脚本如何成为网站的漏洞？</h2><p id="e295" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">有不同类型的XSS可以用来攻击网站，所以没有一个单一的方式引入漏洞。</p><p id="f459" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">反射XSS是最常见的攻击类型之一，当网站<strong class="kc io">接受用户输入</strong>(通常是查询参数)时，它通常会成为大多数网站的一个漏洞，而用户输入<em class="lw">没有经过适当的清理</em>。然后，<strong class="kc io">用户输入被呈现在响应</strong>中。</p><p id="b583" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">想象一下，如果一个网站有搜索功能，它可能看起来像这样:</p><ol class=""><li id="b4e4" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx ml md me mf bi translated">用户访问恶意创建的包含HTML代码的URL，以在查询参数中执行JavaScript。</li></ol><ul class=""><li id="0935" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx mc md me mf bi translated"><code class="fe nb nc nd ms b">https://example.com/explore?search=&lt;script&gt;alert('JavaScript');&lt;/script&gt;</code></li></ul><p id="f3a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个请求被发送到服务器，服务器将把<code class="fe nb nc nd ms b">search</code>查询参数添加到最终的HTML中，不经过任何处理就返回给用户:</p><ul class=""><li id="121b" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx mc md me mf bi translated"><code class="fe nb nc nd ms b">&lt;html&gt; &lt;body&gt; &lt;p&gt;&lt;?php echo 'You searched for: ' . $_GET["search"]; ?&gt;&lt;/p&gt; &lt;/body&gt; &lt;/html&gt;</code></li></ul><p id="b568" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最终的HTML在浏览器中呈现，并且执行<code class="fe nb nc nd ms b">script</code>标签，向用户显示一个警告。</p><p id="73d4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">存储</strong>另一方面，当一些用户输入(比如博客上的评论)被存储在一个永久的位置(比如数据库)时，就会发生XSS，然后用户的内容被呈现在页面上。</p><p id="2c81" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果输入没有得到适当的净化，并且它包含HTML代码，它将加载用户生成的内容并将内容呈现为HTML。</p><p id="4bb5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">存储的XSS可能看起来像这样:</p><ol class=""><li id="fe7f" class="lx ly in kc b kd ke kh ki kl lz kp ma kt mb kx ml md me mf bi translated">用户向服务器发送请求，以更新/创建将在某个页面上呈现的数据。这包含恶意的HTML输入。</li><li id="0de3" class="lx ly in kc b kd mg kh mh kl mi kp mj kt mk kx ml md me mf bi translated">在某种程度上，用户发出请求，服务器用用户用原始HTML感染的相关数据进行响应，这些数据直接在HTML响应中使用，然后发送回用户。</li><li id="b76b" class="lx ly in kc b kd mg kh mh kl mi kp mj kt mk kx ml md me mf bi translated">包含注入的HTML代码的最终页面呈现在用户的浏览器中，JavaScript代码执行。</li></ol><h2 id="7d68" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">你如何防范XSS病毒？</h2><p id="6cce" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">在大多数网站上，您不希望用户输入原始的HTML代码，并将用户的输入作为要在您的页面上执行的代码返回。</p><p id="01d9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您的网站接受用户输入，并以任何方式(通过输入框、查询参数等)显示给用户，下面是防止您的网站遭受XSS攻击的选项的非详尽列表:</p><h2 id="607b" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">验证用户输入</h2><p id="a443" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">第一道防线可以给<em class="lw">一些</em>保证，用户不会输入你不想要的某些字符，比如HTML中使用的<code class="fe nb nc nd ms b">&lt;</code> <code class="fe nb nc nd ms b">&gt;</code>尖括号。</p><p id="0244" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这显然是不可靠的，有很多方法可以在不严格使用尖括号的情况下输入HTML。</p><p id="8985" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，如果你只是开始存储某人的年龄，然后在他们的个人资料上显示给他们，最好在一开始就停止任何恶意输入，如果<em class="lw">你知道</em>存储的输入永远不需要使用HTML字符。</p><p id="e2c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">验证必须出现在后端</strong>，而不仅仅是前端。用户很容易绕过前端验证，向后端发送虚假/恶意数据。你的后端作为事实的来源，因为用户不能操纵你的后端逻辑。</p><h2 id="25e4" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">在使用用户输入的地方转义输出</h2><p id="259c" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">如果您要向用户返回一个HTML文档，其中的最终结果可以根据输入参数进行修改，那么在返回文档之前，您应该对文档中使用的任何用户输入进行转义。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="25c4" class="ky kz in ms b gy mw mx l my mz">&lt;html&gt;<br/>	&lt;body&gt;<br/>		&lt;h1&gt;Your name is &lt;?php<br/>		$new = htmlspecialchars($userInput, ENT_QUOTES);<br/>		echo $new;<br/>		?&gt;&lt;/h1&gt;<br/>	&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="c8dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果输入是:<code class="fe nb nc nd ms b">&lt;script&gt;alert(1)&lt;/script&gt;</code></p><p id="c3d6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最终的输出看起来会像这样:<code class="fe nb nc nd ms b">Your name is &amp;lt;script&amp;gt;alert(1)&amp;lt;/script&amp;gt;</code></p><p id="38e9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这比在用户浏览器中运行恶意代码要好得多！</p><p id="a423" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通常，当转义内容时，您将通过一个函数传递您想要在页面上显示的用户输入，该函数将返回相同的输入，只是没有HTML中使用的任何特殊字符。</p><p id="ae68" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将根据您使用的模板系统而有所不同(有些是默认自动完成的)。无论你使用什么样的模板系统，一定要查阅最近的一个避免用户输入的教程。</p><h2 id="b2c5" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">实施一项<code class="fe nb nc nd ms b">Content-Security</code>政策</h2><p id="1677" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">内容安全策略允许您指定从哪里加载或执行JavaScript(和其他资源)。</p><p id="5d7f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为XSS攻击依赖于攻击者能够在易受攻击的网站上运行脚本，要么直接在网页中注入脚本，要么让浏览器从不受信任的第三方下载脚本。</p><p id="7e24" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">内容安全策略通过“指令”工作，这些指令允许您创建可信内容来源的允许列表，并指示浏览器仅执行或呈现来自这些来源的资源。</p><p id="631d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过HTTP响应头向您的网站添加一个<code class="fe nb nc nd ms b">Content-Security-Policy</code>,如下所示:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="f1cb" class="ky kz in ms b gy mw mx l my mz">Content-Security-Policy: script-src 'self'</span></pre><p id="ade9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您还可以通过HTML文档中的<code class="fe nb nc nd ms b">meta</code>标签指定<code class="fe nb nc nd ms b">Content-Security-Policy</code>:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="9d63" class="ky kz in ms b gy mw mx l my mz">&lt;meta http-equiv="Content-Security-Policy" content="script-src 'self'" /&gt;</span></pre><p id="332c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的策略中，有一个指令<code class="fe nb nc nd ms b">script-src</code>控制一组与脚本相关的权限，并且<code class="fe nb nc nd ms b">self</code>(当前页面)是唯一有效的源。默认情况下，它还会禁用使用内联脚本的能力，这是使用该策略的最大安全隐患之一。</p><p id="5e63" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这实际上意味着任何试图在您的站点中注入代码的攻击者都不会成功，并且会看到一个错误。</p><p id="15c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lw">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lw">plain English . io</em></strong></a><em class="lw">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lw">免费周报</em> </strong> </a> <em class="lw">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lw">Twitter</em></strong></a><em class="lw">和</em><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lw">LinkedIn</em></strong></a><em class="lw">。加入我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lw">社区不和谐</em> </strong> </a> <em class="lw">。</em></p></div></div>    
</body>
</html>