<html>
<head>
<title>Javascript Bloat is Slowing Down The Internet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript膨胀正在减慢互联网的速度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-the-internet-is-getting-slower-and-what-you-can-do-about-it-3fde0f1f2d47?source=collection_archive---------8-----------------------#2022-10-05">https://javascript.plainenglish.io/why-the-internet-is-getting-slower-and-what-you-can-do-about-it-3fde0f1f2d47?source=collection_archive---------8-----------------------#2022-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><blockquote class="jn jo jp"><p id="d9ba" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">最初发表于<a class="ae kp" href="https://builtin.com/software-engineering-perspectives/fix-javascript-bloat" rel="noopener ugc nofollow" target="_blank">www.builtin.com</a></p></blockquote><p id="58ce" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">互联网上到处都是JavaScript。它几乎涉及到我们在网上所做的每一个方面。当我们使用脸书、YouTube或谷歌时，我们依靠JavaScript代码给我们带来交互的感觉，这正是我们期望从今天的互联网中得到的。Javascript为我们提供了加载微调器、浏览器警告和页面转换等基本功能，更不用说网页游戏、3d渲染和交互式地图等高级功能了。</p><p id="1ad4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">但是，所有这些互动的一个很少被讨论的极具影响力的负面影响威胁着我们的浏览体验和网络本身的未来:</p><blockquote class="jn jo jp"><p id="0f58" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">JavaScript膨胀。</p></blockquote><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi kt"><img src="../Images/e78faf6bb209eaa4dfe23a6228af3780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9-N9nk81wcYsbpdV"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">Photo by <a class="ae kp" href="https://unsplash.com/@nbabrams" rel="noopener ugc nofollow" target="_blank">Nick Abrams</a> on <a class="ae kp" href="https://unsplash.com/@nbabrams" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d566" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">这个术语<em class="js"> Javascript膨胀</em>指的是一个网站过度依赖Javascript以达到最高速度和容量。作为一名专业的web开发人员或互联网企业所有者，保持您的网站以最高容量运行对您的底线至关重要，因此理解和解决Javascript膨胀是极其重要的。</p><h1 id="cf3f" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">这真的是个问题吗？</h1><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi mh"><img src="../Images/0e44bb501d02fbf6ca8bd9e0c7a8b2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mr_vpBVeeiCd0SSN"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">JS Bytes historical data from 2017 — present</figcaption></figure><p id="f8b4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">在过去的10年里，无论从哪方面来看，JavaScript在网站上的使用都在大幅增长。自2017年以来，桌面网站的JavaScript文件大小<a class="ae kp" href="https://httparchive.org/reports/page-weight?lens=wordpress&amp;start=2017_06_15&amp;end=latest&amp;view=list#reqJs" rel="noopener ugc nofollow" target="_blank">增加了78%，而JS请求数量增加了17%。</a>这种增长在一定程度上可以归因于过去五年来普通网站变得越来越复杂。然而，大部分是由于糟糕的实践、不完整的集成或不必要的代码。不管是什么原因，所有的膨胀都使得每个人使用互联网的速度变慢。</p><blockquote class="jn jo jp"><p id="3985" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">如果你不熟悉如何通过你的网络浏览器下载Javascript，我推荐<a class="ae kp" href="https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#Resources" rel="noopener ugc nofollow" target="_blank">这篇介绍性文章</a>来解释基础知识。每次使用你的浏览器(Chrome，Firefox等。)要访问一个网页，你需要下载一些指令，通常是<a class="ae kp" href="https://www.w3.org/TR/2011/WD-html5-20110405/" rel="noopener ugc nofollow" target="_blank"> HTML </a>、<a class="ae kp" href="https://tc39.es/ecma262/" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>和<a class="ae kp" href="https://www.w3.org/Style/CSS/specs.en.html" rel="noopener ugc nofollow" target="_blank"> CSS </a>，这些指令告诉你的浏览器如何组装网站，准备好供你使用。</p></blockquote><h1 id="4c52" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">膨胀是什么样子的？</h1><p id="b9d9" class="pw-post-body-paragraph jq jr iq jt b ju mi jw jx jy mj ka kb kq mk ke kf kr ml ki kj ks mm km kn ko ij bi translated">臃肿的网站是相对于其内容而言有太多JavaScript的网站。例如，一个功能丰富、复杂的网站自然会有更多的JavaScript，这没关系。当一个简单的网站有大量用户必须下载的JavaScript时，问题就出现了。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi mh"><img src="../Images/ad7ffd8bf1e2d52a36cd2aec874c6154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0uP3tYeu9G1PX9de"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">Fig 1. <a class="ae kp" href="https://www.webbloatscore.com/" rel="noopener ugc nofollow" target="_blank">Web bloat score calculator</a>, example data</figcaption></figure><p id="38ea" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated"><a class="ae kp" href="https://www.webbloatscore.com/" rel="noopener ugc nofollow" target="_blank">上面的计算器</a>提供了标准的、广泛使用的算法来确定JavaScript膨胀。使用有问题的网站的截图作为网站整体复杂性的代理，它将该复杂性与下载的JavaScript的大小以及JS请求的数量进行比较。</p><p id="4b2c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">JavaScript膨胀的原因有很多，但网站通常会因为以下四个原因之一而膨胀。</p><h1 id="59ee" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">压缩不良</h1><p id="5c68" class="pw-post-body-paragraph jq jr iq jt b ju mi jw jx jy mj ka kb kq mk ke kf kr ml ki kj ks mm km kn ko ij bi translated">糟糕的压缩是在你的网站上创建JavaScript膨胀的一个简单方法。您可能有一个200KB的脚本，可以缩小到100KB，然后压缩到只有15KB，这意味着最终的脚本大小只有原始脚本大小的7.5%。如果你不配置你的服务器来应用正确的压缩规则到每一个JS和CSS文件，那么你将会失败。</p><p id="8060" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">为了解决这个问题，<strong class="jt ir">使用适当的压缩和缩小。</strong>您应该能够配置您的服务器，对所有传出文件使用您选择的压缩算法，通常是brotli压缩或gzip。Chris Coyier的这篇文章解释了两者之间的区别，并给出了一些方法来确保你正确地应用这两个过程。</p><h1 id="aac6" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">复杂框架代码</h1><p id="b442" class="pw-post-body-paragraph jq jr iq jt b ju mi jw jx jy mj ka kb kq mk ke kf kr ml ki kj ks mm km kn ko ij bi translated">像Angular和React这样的库给今天的公司和开发者带来了巨大的好处。然而，当您选择使用一个框架时，当涉及到将要使用的总JS时，您会接受一些相当大的开销，对于全功能或企业级框架更是如此。如果当你有一个简单的用例时，你选择使用一个复杂的框架，你保证你将运行一个臃肿的站点。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi mn"><img src="../Images/c5e36f1c1d45613ecdf1e0ce80180af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zt_m5QBmDcsCv4KaYxlLxw.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">Photo for <a class="ae kp" href="https://procoders.tech/blog/popular-react-js-websites-examples/" rel="noopener ugc nofollow" target="_blank">Procoders.com</a></figcaption></figure><p id="f8bf" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">补救方法或过程是<strong class="jt ir">仅在必要时使用框架。框架提供了许多优势——你可以用最新的模板、复杂的样式工具和插件网络来编写代码，从而快速获得高级结果。但是你仍然应该为大多数项目编写基本的JavaScript和模板化的HTML，并且只将框架应用于更复杂的页面或应用程序。</strong></p><h1 id="5ddd" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">默认情况下是jQuery</h1><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi mo"><img src="../Images/e231060d6753cb0543305a6dea8ee701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o0BsW7eUKXYWirQb.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">Credit: <a class="ae kp" href="https://www.tutorialrepublic.com/jquery-tutorial/" rel="noopener ugc nofollow" target="_blank">https://www.tutorialrepublic.com/jquery-tutorial/</a></figcaption></figure><p id="72f4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">jQuery是一个DOM操作库，是世界上近90%的网站的依赖。如果你能够摆脱这种依赖，你就能够摆脱<a class="ae kp" href="https://mathiasbynens.be/demo/jquery-size" rel="noopener ugc nofollow" target="_blank"> 80KB的迷你JS </a>。</p><p id="acc1" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">这个问题的解决方案是<strong class="jt ir">戒掉jQuery瘾</strong>。jQuery是一个非常好的、节省时间的便利工具，但是它被过度使用了。对于今天的浏览器来说，使用它来完成简单的任务通常是不必要的，因为这类任务有健壮的本机实现，可以自己执行jQuery风格的功能。因此，再次强调，尽可能坚持使用原生JavaScript。</p><h1 id="6d5a" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">臃肿的第三方脚本。</h1><p id="53a2" class="pw-post-body-paragraph jq jr iq jt b ju mi jw jx jy mj ka kb kq mk ke kf kr ml ki kj ks mm km kn ko ij bi translated">每当你添加一个第三方脚本到你的网站，你有责任跟踪这个脚本的大小，并确保代码尽可能的精简。第三方脚本通常有两种风格:像谷歌分析那样动态加载，或者用你的应用程序代码编译，像<a class="ae kp" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM模块</a>。这两个软件包都会给你的网站增加不必要的负担。动态加载的脚本有额外的危害，有时会通过<a class="ae kp" href="https://gtmetrix.com/eliminate-render-blocking-resources.html#:~:text=Render%2Dblocking%20resources%20are%20scripts,images)%20for%20the%20first%20time." rel="noopener ugc nofollow" target="_blank">渲染阻塞</a>降低你的网站速度，本质上是让你的网站在你自己的网站加载之前等待谷歌服务器的响应。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi mp"><img src="../Images/e36aef77e0347b593b99613edc8c6c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MUTW6G9KeB_wUsfB_dupEg.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">Photo for <a class="ae kp" href="https://devrant.com/rants/1558252/can-someone-explain-the-node-modules-joke-to-me-please-ive-seen-it-quite-a-bit-n" rel="noopener ugc nofollow" target="_blank">DevRant.com</a></figcaption></figure><p id="2efb" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated">为了减少这种膨胀，<strong class="jt ir">限制监视脚本的使用，并密切监视您的NPM包</strong>。第三方跟踪代码是互联网上JS权重增加的主要原因。网络用户仍然经常被网站挟持，这些网站坚持在页面可用之前加载大量跟踪cookie的广告代码。留意那些导致你的网站向广告追踪者发出许多请求的脚本，因为这些脚本可以将你网站的速度交到谷歌手中。当谈到NPM包裹，跟踪你的依赖和他们的重量。在你添加一个新的依赖项到你的应用程序之前，使用一个类似于<a class="ae kp" href="https://cost-of-modules.herokuapp.com/result?p=angular@1.8.2" rel="noopener ugc nofollow" target="_blank">this</a>的站点来测试它的大小。您不需要以这种方式过分地跟踪您的依赖项，但是作为一个经验法则，如果您向您的站点添加了超过100KB的精简JS，那么您应该更深入地了解为什么该脚本需要这么多行。</p><h1 id="5e53" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">结论</h1><p id="47ce" class="pw-post-body-paragraph jq jr iq jt b ju mi jw jx jy mj ka kb kq mk ke kf kr ml ki kj ks mm km kn ko ij bi translated">JavaScript膨胀的问题普遍存在，作为IT专业人员，管理和控制是我们的职责。按照上面的简单步骤，你应该有一个蓝图来正确地选择你的网站所需要的脚本，并且正确地优化那些你选择使用的脚本。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><blockquote class="jn jo jp"><p id="4f76" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">感谢阅读。如果你喜欢我的故事，想支持我，请考虑成为<a class="ae kp" href="https://tinycode.medium.com/membership" rel="noopener">中的成员</a>。每月5美元，你可以无限制地访问媒体内容。如果你通过<a class="ae kp" href="https://tinycode.medium.com/membership" rel="noopener">我的链接</a>注册，我会得到一点佣金。</p><p id="0a25" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">还有，这里还有几个类似的故事，你可能会喜欢！</p></blockquote><div class="mx my gp gr mz na"><a href="https://tinycode.medium.com/you-need-to-relearn-html-43509084e987" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">你需要重新学习HTML</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">最初发布于2022年8月23日。Builtin.com</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">tinycode.medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no ld na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://medium.com/weekly-webtips/how-to-read-the-html-spec-da54ca73513a" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">如何阅读HTML规范</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">网页开发者指南</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="np l nl nm nn nj no ld na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://tinycode.medium.com/the-5-most-important-http-headers-d9e9f94bb1f6" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">5个最重要的HTTP头</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">作为一名web开发人员，您需要认识到这一点，以便与远程API进行流畅的通信。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">tinycode.medium.com</p></div></div><div class="nj l"><div class="nq l nl nm nn nj no ld na"/></div></div></a></div><p id="626a" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb kq kd ke kf kr kh ki kj ks kl km kn ko ij bi translated"><em class="js">更多内容看</em> <a class="ae kp" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir"> <em class="js">说白了就是</em> </strong> </a> <em class="js">。报名参加我们的</em> <a class="ae kp" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir"> <em class="js">免费周报</em> </strong> </a> <em class="js">。关注我们关于</em> <a class="ae kp" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir"> <em class="js">推特</em> </strong> </a>，<a class="ae kp" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir"> <em class="js">领英</em> </strong> </a> <strong class="jt ir"> <em class="js">，</em></strong><a class="ae kp" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jt ir"><em class="js">YouTube</em></strong></a><strong class="jt ir"><em class="js">，以及</em></strong><em class="js"/><a class="ae kp" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jt ir"><em class="js">不和</em> </strong> </a>  <em class="js">对成长黑客感兴趣？检查出</em> <a class="ae kp" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir"> <em class="js">电路</em> </strong> </a> <strong class="jt ir"> <em class="js">。</em>T71】</strong></p></div></div>    
</body>
</html>