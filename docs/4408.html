<html>
<head>
<title>How to Get the Window Width and Height in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中获得窗口的宽度和高度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-get-window-width-height-d47529f56e2c?source=collection_archive---------6-----------------------#2022-11-30">https://javascript.plainenglish.io/react-get-window-width-height-d47529f56e2c?source=collection_archive---------6-----------------------#2022-11-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fd1e3b0ac6cc3d0bae692ca6f0e20c58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lemk-43pQFVJH4D8FlJafQ.png"/></div></div></figure><p id="abca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要在React中获得窗口的宽度和高度，分别访问窗口对象的<code class="fe kt ku kv kw b">innerWidth</code>和<code class="fe kt ku kv kw b">innerHeight</code>属性。</p><p id="39ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">App.js</code></p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="dd31" class="lf lg in kw b be lh li l lj lk">import { useRef } from 'react';<br/><br/>export default function App() {<br/>  const windowSize = useRef([window.innerWidth, window.innerHeight]);<br/><br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h2&gt;Width: {windowSize.current[0]}&lt;/h2&gt;<br/>      &lt;h2&gt;Height: {windowSize.current[1]}&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/d40124412fc921cf332a66c3d9f421dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6r0e-yrdxmG8OkEX.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Displaying the width and height of the window.</figcaption></figure><p id="1643" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">属性以像素为单位返回窗口的内部宽度，包括垂直滚动条的宽度，如果它存在的话。</p><p id="a5d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">同样，<code class="fe kt ku kv kw b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/innerHeight" rel="noopener ugc nofollow" target="_blank">innerHeight</a></code>属性以像素为单位返回窗口的内部高度，包括水平滚动条的高度(如果有)。</p><h1 id="1f42" class="lr lg in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">在React中调整窗口的宽度和高度</h1><p id="fff7" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">在前面的例子中，我们只需要获取一次窗口的宽度和高度，我们使用了一个<a class="ae lq" href="https://reactjs.org/docs/refs-and-the-dom.html" rel="noopener ugc nofollow" target="_blank"> ref </a>来存储它。</p><p id="d6ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">相反，如果您想在调整窗口大小时获取它的宽度和高度，您需要向<code class="fe kt ku kv kw b">window</code>对象添加一个<code class="fe kt ku kv kw b">resize</code>事件监听器，并创建一个状态变量来跟踪宽度和高度的变化。</p><p id="3949" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">App.js</code></p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="e611" class="lf lg in kw b be lh li l lj lk">import { useState, useEffect } from 'react';<br/><br/>export default function App() {<br/>  const [windowSize, setWindowSize] = useState([<br/>    window.innerWidth,<br/>    window.innerHeight,<br/>  ]);<br/><br/>  useEffect(() =&gt; {<br/>    const handleWindowResize = () =&gt; {<br/>      setWindowSize([window.innerWidth, window.innerHeight]);<br/>    };<br/><br/>    window.addEventListener('resize', handleWindowResize);<br/><br/>    return () =&gt; {<br/>      window.removeEventListener('resize', handleWindowResize);<br/>    };<br/>  });<br/><br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h2&gt;Width: {windowSize[0]}&lt;/h2&gt;<br/>      &lt;h2&gt;Height: {windowSize[1]}&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/00e5cc625e79469e053957148f40b63b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yFEdvRaRBQRrzfeEJW-3RQ.gif"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">The window’s width and height are updated when it is resized.</figcaption></figure><p id="45a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们使用<code class="fe kt ku kv kw b"><a class="ae lq" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">useState</a></code> React钩子来创建一个状态变量，每当窗口的高度或宽度改变时，这个变量就会更新。</p><p id="2b19" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">useState</code>钩子返回两个值的数组。第一个是存储状态的变量，第二个是在被调用时更新状态的函数。</p><p id="0f5f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当一个组件第一次呈现时，以及当一个或多个指定的依赖关系改变时，钩子被用来执行一个动作。在我们的例子中，动作是用<code class="fe kt ku kv kw b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener" rel="noopener ugc nofollow" target="_blank">addEventListener()</a></code>方法为<code class="fe kt ku kv kw b">resize</code>钩子添加事件监听器。</p><p id="e4e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将一个空的dependencies数组传递给<code class="fe kt ku kv kw b"><a class="ae lq" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">useEffect</a></code>，这样它在组件的生命周期中只被调用一次，并且resize事件侦听器只被注册一次——当组件第一次呈现时。</p><p id="8b82" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">App.js</code></p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="c9c9" class="lf lg in kw b be lh li l lj lk">  useEffect(() =&gt; {<br/>    const handleWindowResize = () =&gt; {<br/>      setWindowSize([window.innerWidth, window.innerHeight]);<br/>    };<br/><br/>    window.addEventListener('resize', handleWindowResize);<br/><br/>    return () =&gt; {<br/>      window.removeEventListener('resize', handleWindowResize);<br/>    };<br/>  });</span></pre><p id="a79e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe kt ku kv kw b">resize</code>事件监听器中，我们用新的窗口高度和宽度更新状态变量。</p><p id="b48a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在<code class="fe kt ku kv kw b">useEffect</code>中返回的函数是一个在组件中执行清理操作的函数。我们使用<code class="fe kt ku kv kw b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener" rel="noopener ugc nofollow" target="_blank">removeEventListener()</a></code>方法删除这个清理函数中的<code class="fe kt ku kv kw b">resize</code>事件监听器，防止内存泄漏。</p><p id="b3a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong> : <code class="fe kt ku kv kw b">useEffect</code>的清理功能在每次重新渲染 后运行<a class="ae lq" href="https://reactjs.org/docs/hooks-effect.html#explanation-why-effects-run-on-each-update" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">，而不仅仅是在组件卸载时。这可以防止当一个可观察属性改变值而组件中的观察者没有取消订阅之前的可观察值时发生的内存泄漏。</strong></a></p></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><p id="9923" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nb">原载于</em><a class="ae lq" href="https://cbdev.link/ef6f8e" rel="noopener ugc nofollow" target="_blank"><em class="nb">codingbeautydev.com</em></a></p><h1 id="f65a" class="lr lg in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae lq" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">报名</strong> </a>立即免费领取一份。</p><p id="276f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nb">更多内容请看</em><a class="ae lq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">plain English . io</em></strong></a><em class="nb">。报名参加我们的</em> <a class="ae lq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nb">免费周报</em> </strong> </a> <em class="nb">。关注我们关于</em><a class="ae lq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">Twitter</em></strong></a><a class="ae lq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">LinkedIn</em></strong></a><em class="nb"/><a class="ae lq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">YouTube</em></strong></a><em class="nb"/><a class="ae lq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">不和</em> </strong> </a> <em class="nb">。对增长黑客感兴趣？检查</em> <a class="ae lq" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nb">电路</em> </strong> </a> <em class="nb">。</em></p></div></div>    
</body>
</html>