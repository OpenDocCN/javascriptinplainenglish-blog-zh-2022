<html>
<head>
<title>Different Phases of Events in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中事件的不同阶段</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/different-phases-of-events-in-javascript-901ed0b23999?source=collection_archive---------2-----------------------#2022-12-06">https://javascript.plainenglish.io/different-phases-of-events-in-javascript-901ed0b23999?source=collection_archive---------2-----------------------#2022-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2116" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以及他们的一切</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/807850d34c822a005742975c83e9e644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5KPZx6im_i9qgZSD"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@paulapalmieri?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Paula Palmieri</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ee70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们与网站交互时发生的任何动作都是JavaScript事件。这些操作包括按键盘上的一个键、在选择框中选择一个选项、提交表单、移动鼠标光标等等。它们还可以包括单击链接或按钮。在极少数情况下，如在页面加载和卸载事件期间，浏览器可能是启动事件的浏览器。</p><p id="de09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文将介绍JavaScript事件在整个生命周期中的许多阶段。我们将举几个例子，看看它们是如何在网站上使用的，以帮助你理解不同的阶段。</p><h2 id="e001" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">JavaScript事件:概述</h2><p id="5efe" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">事件是在浏览器中发生的事情，要么是因为用户，要么是因为浏览器本身启动了它们。以下是网站上可能发生的一些典型情况:</p><ul class=""><li id="917f" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">当页面完全加载后</li><li id="84d8" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">当用户按下按钮时</li><li id="ceb4" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">用户完成并提交表单</li><li id="65bb" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">用户按下键盘上的一个键</li></ul><h2 id="a939" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">事件处理程序和事件侦听器</h2><p id="0121" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">当用户点击按钮或按键时，一个事件被启动。这些事件分别称为按键事件或点击事件。当事件发生时，一个称为事件处理程序的JavaScript函数被激活。通过向响应接口添加事件侦听器，元素可以等待并“侦听”事件的发生。</p><p id="70d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将事件绑定到元素有三种可能性:</p><ul class=""><li id="daa0" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">内联事件的处理程序</li><li id="8d7e" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">事件处理程序的属性</li><li id="cc79" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">事件监听器</li></ul><p id="62d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看一个简单的例子:单个元素的事件触发由一个事件侦听器处理；这是按钮:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/8f9239074bc6772494b5286746fa200d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/0*6Tthc2lmMimL12ea.jpg"/></div></figure><h2 id="8dc3" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">事件流</h2><p id="a52f" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在上一节中，我们学习了javascript事件的基础知识。现在让我们来看看浏览器处理针对嵌套元素的事件的步骤。事件流是指在网页上接收事件的顺序。</p><p id="dc46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们用一个例子来更好地理解它。考虑单击嵌套其他项目的按钮或div。目标元素必须首先在每个父元素上启动click事件，从顶部的全局窗口对象开始，然后才能单击它。一般来说，每个HTML元素都是window对象的子元素。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="83b8" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">事件流的三个阶段</h2><p id="2151" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">如果我们有许多嵌套的对象处理同一个事件，我们会弄不清哪个事件处理程序会先触发。在这种情况下，了解事件的进展是很有用的。</p><p id="886d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">JavaScript事件的生命周期有三个不同的阶段:</p><ol class=""><li id="ea88" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mw mg mh mi bi translated"><strong class="jp ir">捕获阶段</strong></li><li id="36a6" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mw mg mh mi bi translated"><strong class="jp ir">目标阶段</strong></li><li id="010f" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mw mg mh mi bi translated"><strong class="jp ir">冒泡阶段</strong></li></ol><p id="3da2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过查看下图，您可以更好地理解事件传播生命周期。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/04c2f187bd02af4c9c10bd8c494679b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/0*H060UwzIava5-TgD.jpg"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Source: <a class="ae lb" href="https://blog.bitsrc.io/event-bubbling-and-capturing-in-javascript-6bc908321b22" rel="noopener ugc nofollow" target="_blank">blog.bitsrc.io</a></figcaption></figure><h2 id="62e2" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">捕获阶段</h2><p id="dcd2" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">事件从事件捕获阶段最不具体的元素开始，向下移动到最具体的元素。</p><p id="dc71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在捕获过程中:</p><ul class=""><li id="db09" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">如果元素的最外层祖先<code class="fe my mz na nb b">&lt;html&gt;</code>有一个为捕获阶段注册的click事件处理程序，浏览器将运行。</li><li id="49ed" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">然后对随后的<code class="fe my mz na nb b">&lt;html&gt;</code>元素重复该过程，等等，直到到达实际上是所选元素的直接父元素的元素。</li></ul><pre class="km kn ko kp gt nc nb nd bn ne nf bi"><span id="3548" class="ng ld iq nb b be nh ni l nj nk">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Event Capture Demo&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;h1&gt;Event Capture Demo&lt;/h1&gt;<br/>    &lt;article id="main"&gt;<br/>      &lt;div id="parent" style="border: 2px solid brown; margin: 10px;"&gt;<br/>        &lt;div id="child" style="border: 2px dashed green; margin: 10px;"&gt;<br/>          &lt;p&gt;This is a paragraph.&lt;/p&gt;<br/>        &lt;/div&gt;<br/>    &lt;/article&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;<br/><br/>&lt;!--- event capture ---&gt;<br/>&lt;script type="text/javascript"&gt;<br/>  var ancestor = document.getElementById("main");<br/>  var parent = document.getElementById("parent");<br/>  var child = document.getElementById("child");<br/>  ancestor.addEventListener("click", function(event){<br/>    console.log("main clicked");<br/>  });<br/>  parent.addEventListener("click", function(event){<br/>    console.log("parent clicked");<br/>  });<br/>  child.addEventListener("click", function(event){<br/>    console.log("child clicked");<br/>  });<br/>&lt;/script&gt;</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nl"><img src="../Images/a42ddb279548ff4947a095fa9aea9db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f-arSofxY2-rzNN3YnLyKA.png"/></div></div></figure><p id="8da4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您单击前面示例中的<code class="fe my mz na nb b">&lt;p&gt;</code>元素时，所有父元素的click事件处理程序都被调用，从最外层开始并在目标元素<code class="fe my mz na nb b">&lt;p&gt;</code>:<code class="fe my mz na nb b"><strong class="jp ir">&lt;html&gt;</strong></code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;body&gt;</strong></code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;article&gt;</strong></code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;div&gt;</strong></code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;p&gt;</strong></code><strong class="jp ir">。</strong></p><h2 id="64d9" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">目标阶段</h2><p id="2759" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">生成嵌套最深的事件的元素是目标元素。它的网址是<code class="fe my mz na nb b">event.target</code>。该事件由目标元素或最初引起它的元素接收。</p><p id="26f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目标阶段开始时:</p><ul class=""><li id="f205" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">如果在目标属性上注册了click事件，浏览器将为该事件运行事件处理程序。</li><li id="38d2" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">如果bubbles为真，所选元素的直接父元素首先接收事件，然后是下一个，直到到达<code class="fe my mz na nb b">&lt;html&gt;</code>元素。如果bubbles为false，则目标的任何祖先都不会收到该事件。</li></ul><h2 id="0b41" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">气泡阶段</h2><p id="b2a6" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">捕捉是气泡阶段的反义词。根据事件冒泡模型，事件从最具体的元素开始，然后向上移动到最不具体的元素(文档甚至窗口)。</p><p id="4337" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在冒泡阶段，发生了与捕获阶段完全相反的情况:</p><ul class=""><li id="190f" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">如果元素的直接父级有一个为冒泡阶段注册的click事件处理程序，浏览器将运行</li><li id="c96b" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">该过程随后被重复直到<code class="fe my mz na nb b">&lt;html&gt;</code>元素，然后对于每个随后的直接祖先元素。</li></ul><pre class="km kn ko kp gt nc nb nd bn ne nf bi"><span id="c8d7" class="ng ld iq nb b be nh ni l nj nk">&lt;!--- Event bubbling---&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>&lt;title&gt;Event Bubbling&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body onclick="console.log('The body handler is here!');"&gt;<br/>&lt;h1&gt;Event Bubbling&lt;/h1&gt;<br/>&lt;article style="border: 10px solid red; margin: 10px;" id="ancestor" onclick="console.log('ARTICLE handler'); event.stopPropagation()"&gt;<br/>    This is the article element.<br/>    &lt;div style="border: 10px solid blue; margin: 10px;" id="parent" onclick="console.log('DIV handler')"&gt;<br/>        This is the div element.<br/>        &lt;p style="border: 10px solid green; margin: 10px;" id="child" onclick="console.log('P handler')"&gt;<br/>            This is the paragraph.<br/>        &lt;/p&gt;<br/>    &lt;/div&gt;<br/>&lt;/article&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nm"><img src="../Images/b28b603d0903c077d784df631e969e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjbm-9-cYm-kX-r4VwpZHA.png"/></div></div></figure><p id="2da1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您单击上面示例中的<code class="fe my mz na nb b">&lt;p&gt;</code>元素时，所有父元素的click事件处理程序都被调用，从最外层开始，并向内部传播到目标元素<code class="fe my mz na nb b">&lt;p&gt;</code>。以下是流程:<code class="fe my mz na nb b">&lt;p&gt;</code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;div&gt;</strong></code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;article&gt;</strong></code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;body&gt;</strong></code><strong class="jp ir">-&gt;</strong><code class="fe my mz na nb b"><strong class="jp ir">&lt;html&gt;</strong></code><strong class="jp ir">。</strong></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="9c21" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">结论</h2><p id="3cec" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">本教程告诉我们JavaScript的事件冒泡和捕获如何有效地处理web应用程序中的事件。通过了解事件流以及捕获和冒泡是如何操作的，您可以改进web应用程序中的事件处理。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><pre class="km kn ko kp gt nc nb nd bn ne nf bi"><span id="84cb" class="ng ld iq nb b be nh ni l nn nk">Want to Connect?<br/><br/>Connect with me on <a class="ae lb" href="https://www.linkedin.com/in/gouravkajal/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>.</span></pre><p id="812e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读！</p><p id="7b94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="no">更多内容看</em> <a class="ae lb" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="no">说白了就是</em> </strong> </a> <em class="no">。报名参加我们的</em> <a class="ae lb" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="no">免费每周简讯</em> </strong> </a> <em class="no">。关注我们</em> <a class="ae lb" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="no">推特</em> </strong> </a>，<a class="ae lb" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="no">领英</em> </strong> </a> <em class="no">，</em><a class="ae lb" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="no">YouTube</em></strong></a><em class="no">，</em> <a class="ae lb" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="no">不和</em> </strong> </a> <em class="no">。对增长黑客感兴趣？检查出</em> <a class="ae lb" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="no">电路</em> </strong> </a> <em class="no">。</em></p></div></div>    
</body>
</html>