# React ä¸­çš„â€œè®°å¿†åŒ–â€æ˜¯ä»€ä¹ˆ

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/what-is-memoization-in-react-50c2d6f4f71e?source=collection_archive---------23----------------------->

## ç”¨è¿™ä¸¤ä¸ªæœ‰ç”¨çš„é’©å­ä¼˜åŒ– React ä»£ç ã€‚

å†…å­˜åŒ–æ˜¯ä¸€ç§ç¼“å­˜è®¡ç®—ç»“æœ(æˆ–å‡½æ•°æœ¬èº«)ä»¥ä¼˜åŒ–æ€§èƒ½çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåˆ—è¡¨çš„ç»“æœå·²ç»æ›´æ”¹ï¼Œæ‚¨å¯èƒ½åªæƒ³é‡æ–°å‘ˆç°åˆ—è¡¨å…ƒç´ ï¼Œæˆ–è€…å¦‚æœå¦ä¸€ä¸ªå€¼å·²ç»æ›´æ”¹ï¼Œæ‚¨å¯èƒ½åªæƒ³æ›´æ”¹ä¸€ä¸ªå€¼ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œreact é»˜è®¤æƒ…å†µä¸‹ä¼šå°è¯•è¿™æ ·åšï¼Œè€Œä¸”åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œreact çš„é»˜è®¤å·®å¼‚å°±è¶³å¤Ÿäº†ã€‚è®°å¿†åŒ–å®é™…ä¸Šåº”è¯¥åªåœ¨éœ€è¦æ€§èƒ½æå‡æˆ–è€…æœ‰ç‰¹æ®Šéœ€æ±‚çš„é¡¹ç›®ä¸­ä½¿ç”¨ã€‚

![](img/b58b5880273b4c478540e983a503ef65.png)

## æˆ‘å¦‚ä½•è®°å¿†ï¼Ÿ

åœ¨è®°å¿†ååº”ä¸­æœ‰ä¸¤ä¸ªâ€œé’©å­â€ã€‚ä¸€ä¸ªæ˜¯[ã€ä½¿ç”¨å¤‡å¿˜å½•ã€‘](https://reactjs.org/docs/hooks-reference.html#usememo)ï¼Œå¦ä¸€ä¸ªæ˜¯[ä½¿ç”¨å›è°ƒ](https://reactjs.org/docs/hooks-reference.html#usecallback)ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒä»¬åšåŒæ ·çš„äº‹æƒ…ï¼Œä½†æ˜¯ useMemo ä¿å­˜ä¸€ä¸ªç»“æœ(å­—ç¬¦ä¸²ã€æ•°å­—ã€HTML ),è€Œ useCallback ä¿å­˜ä¸€ä¸ªå‡½æ•°ã€‚æˆ‘ä¸èƒ½è¯´æˆ‘å®Œå…¨ç†è§£ useCallback çš„å‘½åâ€”â€”åœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒåº”è¯¥æ›´æ˜ç¡®ä¸€äº›ï¼Œæ¯”å¦‚â€œuse**Memo**Callbackâ€â€”â€”ä½†æˆ‘ä¸æ˜¯è„¸ä¹¦çš„æ˜æ˜Ÿå¼€å‘äººå‘˜ğŸ˜…ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æƒ³è¦å°†è®¡ç®—ç»“æœä¿å­˜åœ¨æ­£åœ¨æ¸²æŸ“çš„ç»„ä»¶ä¸­ã€‚ä½ å¯ä»¥æ ¹æ® React [æ–‡æ¡£](https://reactjs.org/docs/hooks-reference.html#usememo')ç”¨ useMemo æ¥å®Œæˆ:

```
const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);
```

è¿™ä¸ªé’©å­æœ«å°¾çš„æ•°ç»„æ˜¯ä¾èµ–é¡¹çš„åˆ—è¡¨ã€‚è¿™äº›å€¼å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œå°†å‘Šè¯‰ react ç»„ä»¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—è¯¥å€¼ã€‚å› æ­¤ï¼Œå¦‚æœ a æˆ– b å‘ç”Ÿäº†å˜åŒ–ï¼Œæ˜¾ç„¶éœ€è¦é‡æ–°è®¡ç®—å€¼ï¼Œå¦åˆ™ç”¨æˆ·å°†åœ¨ UI ä¸­çœ‹åˆ°ä¸€ä¸ªè¿‡æ—¶çš„å€¼ã€‚

åœ¨ç»„ä»¶çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹([æŸ¥çœ‹è¿™é‡Œçš„ç¤ºä¾‹ä»£ç ](https://codesandbox.io/s/factorial-with-memoization-65mkk?file=/src/App.js)):

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœæ‚¨è¦åˆ†æ JavaScript ä»£ç æ‰§è¡Œçš„é€Ÿåº¦ï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“å¯èƒ½éœ€è¦å‡ åæ¯«ç§’çš„æ—¶é—´ï¼Œè€Œå•å‡»â€œrerenderâ€æŒ‰é’®åè§¦å‘çš„æ¸²æŸ“å°†æ›´æ¥è¿‘ 1ï¼Œç”šè‡³æ›´å¿«ã€‚è¿™æ˜¯å› ä¸º useMemo é’©å­å°†åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¿å­˜è¯¥å€¼ï¼Œè€Œä¸ä¼šåœ¨ç¬¬äºŒæ¬¡é‡æ–°è¿è¡Œè®¡ç®—ã€‚

`useCallback`ä¸ useRef ç›¸åŒï¼Œä½†å®ƒç¼“å­˜çš„æ˜¯å‡½æ•°è€Œä¸æ˜¯å€¼ã€‚ä½ å¯èƒ½æƒ³ç¡®ä¿ä½ çš„å‡½æ•°ä¸ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¢«ä¸å¿…è¦çš„é‡æ–°åˆ›å»ºã€‚å¦‚æœæ‚¨åœ¨ useCallback è°ƒç”¨ä¸­åŒ…è£…æ‚¨çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒçš„è¡Œä¸ºå°†ä¸ useMemo ç›¸åŒï¼Œè¢«ç¼“å­˜å¹¶ä»…åœ¨ä¾èµ–å…³ç³»æ”¹å˜æ—¶é‡æ–°è®¡ç®—ã€‚

ä¾‹å¦‚:

```
const [counter, setCounter] = useState(0)
let func2 = useCallback(() => { let c = counter; return <p> useCallback function is processing the value <b>{c}</b> in the count variable </p>}, [counter])
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‡½æ•°é—­åŒ…å°†ä¸ºè¾“å…¥â€œcâ€ä¿å­˜ä¸€ä¸ªé™æ€å€¼ï¼Œåªæœ‰å½“è¯¥å€¼æ”¹å˜æ—¶ï¼Œå‡½æ•°æ‰ä¼šè¢«é‡æ–°è®¡ç®—ã€‚å¦‚æœæ‚¨å°†ä¸€ä¸ªç©ºæ•°ç»„ä¼ é€’ç»™ useCallback æ–¹æ³•ï¼Œé‚£ä¹ˆ c çš„å€¼æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œå¹¶ä¸”è¯¥å‡½æ•°åªä¼šå¤„ç†è®¡æ•°å™¨çš„ç¬¬ä¸€ä¸ªå€¼ã€‚

æ„Ÿè°¢é˜…è¯»ï¼Œ

~äºšå†å…‹æ–¯

*æ›´å¤šå†…å®¹è¯·çœ‹*[***plain English . io***](http://plainenglish.io/)*ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„**[***å…è´¹å‘¨æŠ¥***](http://newsletter.plainenglish.io/) *ã€‚åœ¨æˆ‘ä»¬çš„* [***ç¤¾åŒºè·å¾—ç‹¬å®¶è®¿é—®å†™ä½œæœºä¼šå’Œå»ºè®®***](https://discord.gg/GtDtUAvyhW) *ã€‚**