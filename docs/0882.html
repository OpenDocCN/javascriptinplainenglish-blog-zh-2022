<html>
<head>
<title>User ID Tracking with GA-4 on Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GA-4在角度上跟踪用户ID</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/user-id-tracking-with-ga-4-on-angular-b16500833cac?source=collection_archive---------12-----------------------#2022-02-18">https://javascript.plainenglish.io/user-id-tracking-with-ga-4-on-angular-b16500833cac?source=collection_archive---------12-----------------------#2022-02-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fabcfae81717b1d6c6f223ec117e27c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YuI9TnPIRHlZiRxyfk32fQ.gif"/></div></div></figure><p id="1b68" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您试图找出如何区分已登录和未登录的用户。我强烈建议你阅读这篇<a class="ae kt" href="https://www.analyticsmania.com/post/google-analytics-user-id-with-google-tag-manager/" rel="noopener ugc nofollow" target="_blank"> Analytics Mania文章</a>，因为他详细解释了跟踪用户的多种方式。他的一个方法帮助我找到了我的解决方案。我只是在这里回顾一下我是如何自己实现它的。</p><h1 id="fcf7" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第一步:DOM。</h1><p id="66fd" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">因此，通过与开发人员的交谈，我发现用户会话是由本地存储跟踪的。这是跟踪存储数据的标准方法，它让我找到了一个特殊的ID*</p><p id="4291" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本地存储上写入，我能够找到唯一UUID的密钥，我可以将它与我的数据库中具有该UUID的用户进行匹配。现在，您正在搜索UUID，因为您不能向谷歌发送任何可以识别用户身份的具体信息，因为他们不会接受。因此，在我的案例中，需要做的是”</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="7ba2" class="mg kv in mc b gy mh mi l mj mk">localStorage.getItem('xxxx')</span></pre><p id="4773" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">(“xxx”)是带来UUID的键值。</p><h1 id="a46e" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第二步:谷歌自定义变量</h1><p id="13bd" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">你需要在谷歌标签管理器上使用名为“自定义JavaScript”的变量类型创建一个自定义变量。下面是我用来获取并返回UUID的脚本。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="24a6" class="mg kv in mc b gy mh mi l mj mk">function getuserid() {<br/>  var obj = JSON.parse(localStorage.getItem('xxxx'));<br/>  return obj.id;<br/>}</span></pre><h1 id="31e1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第三步:GA-4标签</h1><p id="aad4" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">所以我想跟踪一个登录用户在所有不同页面上的行为，所以我将它设置为一个变量，每次GA-4标签触发时都会运行。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/7de80baaa03c4ec04acd273b08fe8542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xcotrum5hC9GxGabwdnMww.png"/></div></div></figure><h1 id="07f5" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><strong class="ak">第四步:</strong>检查它是否在调试模式下工作。</h1><p id="6e2a" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">这是你知道它是否被跟踪的唯一方法，不管谷歌标签助手会说什么。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/32921bb698647bcf40ada3774a67392a.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*FquGFwnyoe1dQbhfBWqIcQ.png"/></div></figure><h1 id="de10" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论:</h1><p id="259d" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">这可能不是一个简单的解决方案，但这是一个在目前不需要任何开发人员帮助的情况下有效的解决方案。当然，理想情况下，最好的解决方案是让开发人员愿意在特定的web事件之后发送该信息。但是万一你发现自己在周一早上被产品经理问到这个问题，这个解决方案可能适合你。</p><p id="6603" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mn">更多内容请看</em><a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mn">plain English . io</em></strong></a><em class="mn">。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mn">免费周报</em> </strong> </a> <em class="mn">。关注我们关于</em><a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mn">Twitter</em></strong></a><em class="mn">和</em><a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mn">LinkedIn</em></strong></a><em class="mn">。查看我们的</em> <a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mn">社区不和谐</em> </strong> </a> <em class="mn">加入我们的</em> <a class="ae kt" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mn">人才集体</em> </strong> </a> <em class="mn">。</em></p></div></div>    
</body>
</html>