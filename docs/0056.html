<html>
<head>
<title>Make Your Own URL Shortener Using Fetch API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Fetch API制作你自己的网址缩写器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/make-your-own-url-shortener-using-fetch-api-f6f5b4c69c39?source=collection_archive---------13-----------------------#2022-01-04">https://javascript.plainenglish.io/make-your-own-url-shortener-using-fetch-api-f6f5b4c69c39?source=collection_archive---------13-----------------------#2022-01-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="dae6" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何制作自己的网址缩略器？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/9123b76520a77e7849e5239e4c728cfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lnD29-8pcT9elPb3"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@cbpsc1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clint Patterson</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="72a3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这篇文章中，我将向你展示如何制作你自己的网址缩略器。在真正开始做一个网址缩写之前。让我们先了解几个基础知识</p><h1 id="38ad" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">什么是网址缩写？</h1><p id="35d2" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">网址缩写实际上是一种由网站提供的服务。这项服务把你的又长又丑的网址变成又短又好记的网址。你可能遇到过一些网址缩写，像Bitly，Cuttly，和其他一些。他们都有相同的目的，那就是缩短一个网址。</p><h1 id="505d" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">你要做什么？</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/a07b0340fc2b19f1b63761af845df728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P7fGYZr8YC65ADhx.png"/></div></div></figure><p id="d513" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是我们正在制作的，样式并不出众，我知道。我更关注功能和基础，这样你就会理解制作一个网址缩短器的真正概念。于是，你看到它正在把我原来的链接:<a class="ae ks" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">【https://www.youtube.com/watch?v=dQw4w9WgXcQ】</strong></a>转换成一个短链接:<a class="ae ks" href="https://shrtco.de/uRfG3I" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mn">【https://shrtco.de/uRfG3I】</em></strong></a><strong class="kv io"><em class="mn">)</em></strong>。</p><h1 id="5343" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">制作我们的网址缩写的步骤</h1><p id="b266" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我们必须遵循这些步骤来缩短我们的网址</p><ul class=""><li id="69d3" class="mo mp in kv b kw kx kz la lc mq lg mr lk ms lo mt mu mv mw bi translated">HTML —用于标记</li><li id="c5c0" class="mo mp in kv b kw mx kz my lc mz lg na lk nb lo mt mu mv mw bi translated">CSS —用于样式</li><li id="a1f7" class="mo mp in kv b kw mx kz my lc mz lg na lk nb lo mt mu mv mw bi translated">JavaScript——通过调用API和监听事件使我们的URL shortener发挥作用</li></ul><h1 id="c58a" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">第一步:HTML</h1><p id="a7bc" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">现在让我们开始添加HTML。现在，我要一个简单的页面，有一个按钮和一个输入字段的形式，用户可以粘贴原始的网址。这就是我们所需要的，然后我将把表单放在一个父div中，只是为了添加一个背景，并使表单在中心完全对齐。</p><h2 id="23f0" class="nc lq in bd lr nd ne dn lv nf ng dp lz lc nh ni mb lg nj nk md lk nl nm mf nn bi translated"><strong class="ak">index.html</strong></h2><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="0154" class="nc lq in np b gy nt nu l nv nw">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="UTF-8"&gt;<br/>  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>  &lt;title&gt;URL Shortener&lt;/title&gt;<br/>  &lt;link rel="stylesheet" href="style.css"&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;div class="wrapper"&gt;<br/>    &lt;h1&gt;URL Shortener&lt;/h1&gt;<br/>      &lt;form id="form"&gt;<br/>          &lt;input id="link" type="text" placeholder="Enter your link"&gt;<br/>        &lt;input type="submit" value="shorten it!"&gt;<br/>      &lt;/form&gt;<br/>    &lt;ul id="parent" class="shortLinks"&gt;<br/>    &lt;/ul&gt;<br/>  &lt;/div&gt;<br/>  &lt;script src="script.js"&gt;&lt;/script&gt;<br/>  <br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="1ae5" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">第二步:CSS</h1><p id="8ebb" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">既然我们已经写了HTML，现在我们必须添加一个CSS文件到HTML文件中。您可以通过在HTML的head标记中使用link标记来实现这一点，如下面的代码片段所述。</p><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="e1a8" class="nc lq in np b gy nt nu l nv nw">&lt;head&gt;<br/> &lt;link rel=”stylesheet” href=”style.css”&gt;<br/>&lt;/head&gt;</span></pre><p id="9306" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，让我们开始写CSS。我在CSS文件中做的第一件事是移除所有元素的边距和填充。我使用<strong class="kv io"><em class="mn">“*”</em></strong>来表示HTML中的所有元素，并将边距和填充设置为零。</p><h2 id="0c2d" class="nc lq in bd lr nd ne dn lv nf ng dp lz lc nh ni mb lg nj nk md lk nl nm mf nn bi translated">style.css</h2><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="27ac" class="nc lq in np b gy nt nu l nv nw"><a class="ae ks" href="http://twitter.com/import" rel="noopener ugc nofollow" target="_blank">@import</a> url('<a class="ae ks" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@900&amp;display=swap'" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@900&amp;display=swap'</a>);<br/>*{margin:0;<br/>  padding:0;<br/>  box-sizing:border-box;<br/>}</span></pre><p id="3e8f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我将通过给它宽度和高度以及显示flex来设置父对象的样式。我正在设置display flex，这样我就可以通过将justify-content设置为center来将表单居中对齐。</p><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="3179" class="nc lq in np b gy nt nu l nv nw">.wrapper{width:100%;<br/>    min-height:100vh;<br/>    display:flex;<br/>    align-items:center;<br/>    flex-direction:column;<br/>    background-image:linear-gradient(135deg, rgb(30, 110, 162), salmon);<br/>    padding:50px 0;<br/>  }</span></pre><p id="742a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我决定添加一个渐变，因为这样看起来更酷。</p><p id="e894" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，让我们来设计其他元素的样式，我已经为其编写了代码，如下所示:</p><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="c7d9" class="nc lq in np b gy nt nu l nv nw">ul {list-style-type:none;<br/>    <br/>  }<br/>  li{margin:30px 0;<br/>    font-size:2em;<br/>    font-family: 'Source Sans Pro', sans-serif;<br/>    color:lightblue;<br/>  }<br/>  a {color:inherit;}<br/>  form{margin:50px 0;<br/>    width:100%;<br/>    max-width:500px;<br/>  }<br/>  input{<br/>      margin:0 15px;<br/>    font-size:20px;<br/>    padding:10px;<br/>    border:5px solid lightgrey;<br/>    outline:none;<br/>  }<br/>  <br/>  input[type=submit]{padding-left:30px;<br/>    padding-right:30px;<br/>  }<br/>  input:focus{outline:none;}<br/>  <br/>  h1{font-size:50px;<br/>    font-family: 'Source Sans Pro', sans-serif;<br/>    color:white;<br/>    font-weight:900;<br/>    font-size:5em;<br/>    text-transform:uppercase;<br/>    <br/>  }</span></pre><h1 id="b626" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">第三步:JavaScript</h1><p id="d712" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">好了，现在我们已经添加了HTML和CSS来使它看起来更好。现在，我们还必须添加JavaScript来使其发挥作用。在JavaScript的帮助下，我们将能够获得用户输入并处理它。我们将使用fetch向API服务发送get请求。我正在使用的API服务是“<em class="mn">短代码</em>”。首先，让我们从表单中获取用户输入。我们还必须选择要输出短链接的容器。</p><h2 id="8ebe" class="nc lq in bd lr nd ne dn lv nf ng dp lz lc nh ni mb lg nj nk md lk nl nm mf nn bi translated">script.js</h2><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="b76d" class="nc lq in np b gy nt nu l nv nw">const form = document.getElementById("form");<br/>const linkInput = document.getElementById("link");<br/>const parent = document.getElementById("parent");</span></pre><p id="aa76" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们必须在表单上添加一个事件监听器。</p><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="2fa1" class="nc lq in np b gy nt nu l nv nw">form.addEventListener("submit", async (e) =&gt; {<br/>    e.preventDefault();<br/>    const originalLink = linkInput.value;<br/>    const apiUrl = `https://api.shrtco.de/v2/shorten?url=${originalLink}`;<br/>  <br/>    try{<br/>      const response = await fetch(apiUrl);<br/>      const data = await response.json();<br/>      console.log(data);<br/>      let link = document.createElement("li");<br/>      link.className = "output"<br/>      link.innerHTML = `&lt;a href="${data.result.full_short_link}" target="_blank"&gt;${data.result.full_short_link} &lt;/a&gt;`;<br/>      parent.prepend (link);<br/>  <br/>    }catch(e){<br/>      <br/>      console.error(e);<br/>    }<br/>  <br/>  });</span></pre><p id="9da9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这段代码中发生了很多事情。让我给你解释一下这是什么。首先，我们使用。然后我们将响应从JSON转换成JavaScript对象。我们这样做是因为最初我们的响应是JSON格式的，我们必须将它转换成JavaScript对象才能使用它。所以我们用这个方法。这是我们的对象从JSON转换后的样子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/f4bd0d20bca2d9dd56268d18d5e366b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/0*nbZFoBeXv57cdxNO.png"/></div></figure><p id="15fc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您也可以在您的控制台中使用<strong class="kv io"> <em class="mn"> console.log() </em> </strong>来检查。</p><p id="6c5e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，为了更好地显示这个短链接，我们正在使用<strong class="kv io"><em class="mn">document . create()</em></strong>创建另一个元素。这将在用户请求一个短链接时动态地创建一个元素，然后我们将使用<strong class="kv io"><em class="mn">(link . class name = " output ")给它一个类；</em> </strong>)之后，我们必须添加文本，我们可以通过使用<strong class="kv io"><em class="mn">link . innerhtml</em></strong>方法来完成，并将其设置为来自对象的短链接。</p><p id="17f4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，我们将把它放在父容器的前面，这样新的短链接会使用<strong class="kv io"> <em class="mn">首先出现。</em>前置(链接)</strong>。除了使用prepend，你还可以使用<strong class="kv io"> <em class="mn">。appendChild(链接)；</em> </strong>一种会在末尾添加新元素的方法。</p><h1 id="a9ff" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">制作免费网址缩略器的资源</h1><p id="a460" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">现在，如果你遵循了我提到的所有步骤，你的最终结果将是这样的。我已经用<a class="ae ks" href="https://codepen.io/tamur20" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mn">CodePen</em></strong></a>分享了我的结果，这样你就可以看到我做的所有事情。如果你错过了什么，你可以检查我的代码并修复问题。</p><p id="33e3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">字体:</strong>T34】https://fonts.google.com/specimen/Source+Sans+Pro?query=Source+Sans+Pro </p><p id="42d6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请随意使用代码并做一些实验。或者你可以通过改变布局或设计，或者添加更多的功能，来制作你自己版本的免费网址缩短器。</p><p id="73f4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你有兴趣托管你的免费网址缩写，那么你可以阅读这篇文章，这篇文章将向你展示如何使用三个不同的平台免费托管你的网站。</p></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><p id="d1bb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mn">原载于2022年1月4日</em><a class="ae ks" href="https://uprightcodes.com/make-free-url-shortener/" rel="noopener ugc nofollow" target="_blank"><em class="mn"/></a><em class="mn">。</em></p><p id="2bae" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mn">更多内容看</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mn">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mn">免费周报</em> </strong> </a> <em class="mn">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mn">社区不和谐</em> </strong> </a> <em class="mn">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>