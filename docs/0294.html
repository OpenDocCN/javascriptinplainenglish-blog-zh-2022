<html>
<head>
<title>How to Create Your Own React Component Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建自己的React组件库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-your-own-react-component-library-e305a1a53b49?source=collection_archive---------1-----------------------#2022-01-18">https://javascript.plainenglish.io/how-to-create-your-own-react-component-library-e305a1a53b49?source=collection_archive---------1-----------------------#2022-01-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ce1dd5c59e4cb14c1b50df421eaf8c7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bxX9N1pVSx43Rvz25O3T-w.png"/></div></div></figure><p id="2d7a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以我们已经为这个系列中的<a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/create-and-publish-your-own-npm-module-216bffe82dc5"> Node.js </a>和<a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/create-your-own-angular-component-library-e5f062b902a8"> Angular </a>创建并发布了包。现在是时候做出反应了。在Angular的例子中，我们可以选择本地创建一个“<strong class="jx io">库</strong>项目，然后在一个“<strong class="jx io">应用</strong>项目中测试它。我们能够对库进行更改，并在应用程序中看到这些更改，就像典型的单页面web应用程序一样。在React的例子中，为了测试我们的组件，我们必须使用第三方库。我们将要使用的图书馆叫做故事书。</p><blockquote class="ku"><p id="acf5" class="kv kw in bd kx ky kz la lb lc ld ks dk translated">YouTube上也有这个的视频版本。</p></blockquote><h2 id="36b5" class="le lf in bd lg lh li dn lj lk ll dp lm kg ln lo lp kk lq lr ls ko lt lu lv lw bi translated">为什么是故事书</h2><p id="3cb7" class="pw-post-body-paragraph jv jw in jx b jy lx ka kb kc ly ke kf kg lz ki kj kk ma km kn ko mb kq kr ks ig bi translated">Storybook为您提供了一个环境，在这个环境中，您可以独立地创建您的组件，并进行更改检测，就像您在典型的单页应用程序中所做的那样。它还提供了一个简洁的用户界面，允许您查看正在创建的组件的不同变体。</p><h2 id="e0bb" class="le lf in bd lg lh mc dn lj lk md dp lm kg me lo lp kk mf lr ls ko mg lu lv lw bi translated">项目设置</h2><p id="6bab" class="pw-post-body-paragraph jv jw in jx b jy lx ka kb kc ly ke kf kg lz ki kj kk ma km kn ko mb kq kr ks ig bi translated">因此，让我们快速设置我们的项目。因为我们将创建一个React组件库，而不是React应用程序，所以我们不会使用<strong class="jx io"> create-react-app </strong>。我们将从零开始建造骨架。因此，在VSCode中打开一个空文件夹，键入<code class="fe mh mi mj mk b">npm init -y</code>来初始化一个新的包。您将在文件夹中找到一个package.json文件。现在您需要安装以下依赖项列表。</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5cbd" class="le lf in mk b gy mt mu l mv mw">npm install --save-dev react react-dom typescript @types/react</span></pre><p id="5a55" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要安装<strong class="jx io"> react </strong>和<strong class="jx io"> react-dom </strong>来创建组件的UI并与dom交互。我还为React添加了<strong class="jx io">类型脚本</strong>和<strong class="jx io">类型声明</strong>，以使用静态类型检查。如果您愿意，可以跳过typescript。</p><p id="0791" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为我们正在构建react组件，所以我们还需要在package.json文件中添加React和react-DOM作为<strong class="jx io">对等依赖</strong>。这将基本上确保这个包的消费者将是一个React应用程序。因此，在package.json文件中，添加一个对等依赖对象。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/2b532efc1a57d2f198d73d4e9b5da119.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*fFEExF0dTxYBvSvmF9urAg.png"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk">Peer dependencies inside package.json</figcaption></figure><p id="2e85" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦完成，我们将通过键入<code class="fe mh mi mj mk b">npx tsc --init</code>来初始化typescript</p><p id="2d97" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这应该会在您的项目中创建一个带有一些默认选项的tsconfig.json文件。您可以用以下选项替换这些选项</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0cea" class="le lf in mk b gy mt mu l mv mw">{<br/>   "compilerOptions": {<br/>      "jsx": "react",<br/>      "target": "es2016",<br/>      "outDir": "dist",<br/>      "allowJs": true,<br/>      "skipLibCheck": true,<br/>      "strict": true,<br/>      "forceConsistentCasingInFileNames": true,<br/>      "module": "ES2020",<br/>      "allowSyntheticDefaultImports": true,<br/>      "moduleResolution": "Node",<br/>      "declaration": true,<br/>      "declarationDir": "dist"<br/>   },<br/>   "include": [<br/>      "stories"<br/>   ]<br/>}</span></pre><ol class=""><li id="9374" class="nc nd in jx b jy jz kc kd kg ne kk nf ko ng ks nh ni nj nk bi translated">jsx: 在React组件中与jsx一起工作</li><li id="f930" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">目标</strong>:改变哪些JS特性降级，哪些保持不变。例如，如果<code class="fe mh mi mj mk b">target</code>是ES5或更低，箭头函数<code class="fe mh mi mj mk b">() =&gt; this</code>将变成等价的<code class="fe mh mi mj mk b">function</code>表达式。</li><li id="ff6e" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io"> outDir </strong>:文件编译后会被放到这个目录下。</li><li id="3771" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io"> allowJs </strong>:允许Js文件导入到我们的项目中。</li><li id="f7e7" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io"> skipLibCheck </strong>:跳过声明文件的类型检查。</li><li id="7685" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">严格的</strong>:更加健壮的类型检查，这导致了更好的整体正确性。</li><li id="ef40" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">forceconsistencasingfilenames:</strong>如果基于文件系统的大小写命名不一致，将抛出错误</li><li id="21da" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">模块</strong>:设置模块的类型(es6、es2020、commonjs、umd)</li><li id="c117" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">allowSyntheticDefaultImports</strong>:这基本上让你以一种更方便的方式导入你的模块，比如你可以通过设置这个选项为真来使用<code class="fe mh mi mj mk b">import React from 'react'</code>而不是<code class="fe mh mi mj mk b">import * as React from 'react';</code>。</li><li id="0c68" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io"> moduleResolution </strong>:您可以使用它来设置模块解析策略，在我们的例子中，它将是Node。</li><li id="9988" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">声明</strong>:为项目内部的每个TypeScript或JavaScript文件生成<code class="fe mh mi mj mk b">.d.ts</code>文件。</li><li id="9479" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io"> declarationDir </strong>:存放声明文件的目录</li><li id="e15d" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">包含</strong>:编译时要包含的文件</li></ol><p id="b53a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您还可以添加一个<strong class="jx io"> exclude </strong>选项，如果您希望它们不包含在编译过程中，该选项会接收一系列文件/文件夹。</p><p id="707a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们可以通过键入<code class="fe mh mi mj mk b">npx sb init</code>来初始化Storybook。</p><p id="33ef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此命令在空项目中不起作用。它查看我们的项目依赖项，并对我们的项目类型进行计算猜测(在本例中，是React)。</p><p id="6f2d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，在package.json文件中，您会发现一些额外的依赖项，以及一些运行/构建Storybook的新脚本。您的项目中将有两个新文件夹。<strong class="jx io">。storybook </strong>文件夹将会有你默认的storybook配置，而<strong class="jx io"> stories </strong>文件夹将会有一些你可以测试的虚拟故事。</p><p id="05c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在在你的终端里，输入<code class="fe mh mi mj mk b">npm run storybook</code>。(该脚本是在初始化Storybook时添加的)。Storybook的交互式UI将在您的浏览器中打开，并显示所有虚拟组件。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/8855e052162e0e4bb4ba037bee26dc47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JtjZxuqsWYSmfhJ3RZByLA.png"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk">Storybook playground</figcaption></figure><p id="d9c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我们只关心按钮组件，所以您可以继续删除stories文件夹中的其他内容。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/2b35791bcc8adcf95ce6c78b2a60b686.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*4F7ua8rdZBcGrYHaXxNvMw.png"/></div><figcaption class="my mz gj gh gi na nb bd b be z dk">Keep only button component files.</figcaption></figure><p id="98b0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">故事是React组件的渲染状态。因此，对于每个React组件，每当您运行Storybook时，我们都会有一个相应的故事呈现在浏览器上。你可以对这些故事作出反应性的修改，并摆弄它们的控件，看看你的按钮在应用程序中会是什么样子。一旦您完全测试了您的组件，您就可以将该组件推送到npm。这些故事文件不会包含在产品构建中，所以您不必担心包的大小。</p><p id="6e9e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以我们有了我们的<strong class="jx io"> Button.tsx </strong>文件，这是一个React组件。</p><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="3b10" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个react组件是一个带有一组道具的典型按钮。这个按钮有一个对应的故事文件叫做<strong class="jx io"> Button.stories.tsx </strong>。</p><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="4a7b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个故事中，首先导入按钮react组件。之后，您为您的按钮创建一个默认的带有一些配置(标题，组件)的导出。<strong class="jx io">参数</strong>或<strong class="jx io">参数</strong>选项通过为我们的道具提供一组缺省值来定义组件应该如何呈现。</p><p id="eccc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个默认导出下面，我们有一系列命名导出，它们只是这个默认按钮的不同变体(你将需要这些来在Storybook上呈现你的按钮)。</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9d2b" class="le lf in mk b gy mt mu l mv mw">const Template: ComponentStory&lt;typeof Button&gt; = (args) =&gt; &lt;Button {…args} /&gt;;</span></pre><p id="b280" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">只是创建模板的一种奇特方式，可以用于我们的每个变体。因此，您在这些变量中提供的任何参数都将覆盖默认参数。</p><p id="4b58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果你回到浏览器上的故事书游戏区，你会看到按钮被渲染，并且在底部有一个控件部分。该控件部分允许您通过调整属性值来自定义组件。</p><p id="eec2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以看到使用Storybook孤立地测试组件变得多么容易。既然我们已经创建并测试了React组件，那么是时候发布它了。</p><h2 id="d79e" class="le lf in bd lg lh mc dn lj lk md dp lm kg me lo lp kk mf lr ls ko mg lu lv lw bi translated">捆绑您的组件</h2><p id="5fd3" class="pw-post-body-paragraph jv jw in jx b jy lx ka kb kc ly ke kf kg lz ki kj kk ma km kn ko mb kq kr ks ig bi translated">有几个工具可以用来编译和捆绑他们的项目。Webpack是粉丝们的最爱，但它最常用于应用程序，而不是组件库。另一方面，Rollup非常适合我们的用例，所以我们将使用Rollup。安装这些库和插件。</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4e4c" class="le lf in mk b gy mt mu l mv mw">npm i --save-dev <strong class="mk io">rollup</strong> <strong class="mk io">@rollup/plugin-node-resolve</strong> <strong class="mk io">@rollup/plugin-babel</strong> <strong class="mk io">rollup-plugin-uglify</strong> <strong class="mk io">rollup-plugin-postcss</strong> <strong class="mk io">rollup-plugin-typescript2</strong> <strong class="mk io">rollup-plugin-peer-deps-external</strong></span></pre><p id="4a6b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/rollup" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">汇总</strong> </a> <strong class="jx io"> </strong> —主模块捆绑器库。</p><p id="72aa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/@rollup/plugin-node-resolve" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">@ roll up/plugin-node-resolve</strong></a>—用于定位我们项目内部使用的第三方模块(目前我们的应用中没有任何第三方模块，但这可能会在未来发生变化)。</p><p id="09ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/@rollup/plugin-babel" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">@ roll up/plugin-babel</strong></a>——与babel整合。</p><p id="bb86" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/rollup-plugin-uglify" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">roll up-plugin-uglify</strong></a>——缩小你的最终捆绑包。</p><p id="fb61" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/rollup-plugin-postcss" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">【roll up-plugin-postcss</strong></a>——包括我们在包中作为单独文件创建的css。它通过从*中生成缩小的CSS来实现这一点。css文件，并通过在组件中使用的<code class="fe mh mi mj mk b">&lt;head&gt;</code>标签包含它们。</p><p id="f322" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/rollup-plugin-typescript2" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">roll up-plugin-TypeScript 2</strong></a>—这个插件为我们的最终包将类型脚本代码编译成JavaScript，并为<code class="fe mh mi mj mk b">package.json</code>中的<code class="fe mh mi mj mk b">types</code>键生成类型声明。</p><p id="c10d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/rollup-plugin-peer-deps-external" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">roll up-plugin-peer-deps-external</strong></a><strong class="jx io"/>—这个插件将在最终的包中具体化我们的<code class="fe mh mi mj mk b">peerDependencies</code>(在我们的例子中是react和react-dom)，因为这些将由消费者应用程序提供。</p><p id="2a46" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是rollup的伟大之处。你有许多插件，你可以把它们添加到你的项目中去完成特定的任务，而不需要你自己去做。你可以在他们的GitHub repo上查看所有可用的插件<a class="ae kt" href="https://github.com/rollup/awesome" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="d45f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装后，在根目录下创建一个名为rollup.config.js的配置文件，并复制以下代码。</p><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="79cc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们简单地导出一个具有一组属性的对象。会有一个<strong class="jx io">输入</strong>和<strong class="jx io">输出</strong>选项。输入选项是应用程序的入口点。所以在我们的根目录中，您需要创建这个入口点文件(index.js ),它将从我们的组件库中导出所有的组件。</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="15df" class="le lf in mk b gy mt mu l mv mw">import { Button } from './stories/Button'</span><span id="9c97" class="le lf in mk b gy nu mu l mv mw">export { Button }</span></pre><p id="5f6d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">汇总配置文件中的输出键将是编译后生成的产品包。所以当你构建你的组件时，完成后你会发现一个dist文件夹，里面有一个index.js，它本质上是我们的组件库。</p><p id="9842" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们传递插件数组中安装的所有插件。</p><p id="df2c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，您需要转到package.json文件。在scripts对象中，添加以下脚本<code class="fe mh mi mj mk b">buildLib: "rollup -c”</code>。该命令将在项目中查找配置文件，并根据文件中提供的选项运行编译和绑定过程。您还需要将package.json文件中的主键更改为“dist/index.js ”,如果您还没有这样做的话。</p><p id="3b53" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在在您的终端内部，运行<strong class="jx io"> buildLib </strong>命令<code class="fe mh mi mj mk b">npm run buildLib</code>。完成后，您的项目中就会有一个dist文件夹，其中会有一个index.js文件。在下一个也是最后一个步骤中，您将把该文件发布到npm存储。</p><h2 id="88c3" class="le lf in bd lg lh mc dn lj lk md dp lm kg me lo lp kk mf lr ls ko mg lu lv lw bi translated">将组件发布到npm</h2><p id="9279" class="pw-post-body-paragraph jv jw in jx b jy lx ka kb kc ly ke kf kg lz ki kj kk ma km kn ko mb kq kr ks ig bi translated">在将组件发布到商店之前，您需要遵循几个步骤。所有这些步骤都已经在之前的博客文章中有所涉及，你可以在这里找到<a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/create-and-publish-your-own-npm-module-216bffe82dc5"/>或者在这里找到<a class="ae kt" href="https://www.youtube.com/watch?v=f0h-0d6Y_94&amp;ab_channel=AkileshRao" rel="noopener ugc nofollow" target="_blank">视频</a>。</p><ol class=""><li id="4d8c" class="nc nd in jx b jy jz kc kd kg ne kk nf ko ng ks nh ni nj nk bi translated"><strong class="jx io">创建并登录您的npm帐户。</strong> <br/> <a class="ae kt" href="https://www.npmjs.com/signup" rel="noopener ugc nofollow" target="_blank">您需要先创建一个npm帐户</a>。注册后，您需要在VSCode中登录您的npm帐户。因此，在您的终端中，键入“<strong class="jx io"> npm登录</strong>”。它会要求您提供注册帐户时填写的同一组凭据。一旦完成，你就可以进入下一步了。</li><li id="1ac5" class="nc nd in jx b jy nl kc nm kg nn kk no ko np ks nh ni nj nk bi translated"><strong class="jx io">向包中添加范围。<br/> </strong> NPM不允许两个包有相同甚至相似的名字。所以您需要在您的包中添加一个作用域，这将使您的包名唯一。在这种情况下，范围将是您的用户名。所以在package.json文件内部，name键目前设置为<strong class="jx io"> react-component-library。</strong>改成@“你-用户名”/ <strong class="jx io">反应-组件-库</strong>。所以由于我的npm用户名是“akileshro 19”，所以我的包名将是@ akileshro 19/react-component-library。同样，这样做背后的原因在<a class="ae kt" href="https://www.youtube.com/watch?v=f0h-0d6Y_94&amp;ab_channel=AkileshRao" rel="noopener ugc nofollow" target="_blank">之前的博文</a>中有详细解释。</li></ol><p id="ed21" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦你完成了这些步骤，你就可以把它发布到商店<code class="fe mh mi mj mk b">npm publish --access=public</code></p><p id="51c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">默认情况下，名称中带有范围的包是私有的，要发布私有包，您需要按月付费订阅。因此，我们将通过添加“<strong class="jx io"> access=public </strong>”标志来公开发布它。</p><p id="1883" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你跟随并正确地做了每一件事，你会得到一个成功的回应，可能看起来像这样</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="98d3" class="le lf in mk b gy mt mu l mv mw">+@YOUR-USERNAME/react-component-library@1.0.0</span></pre><p id="fed2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以去npm的网站登录。在您的packages部分，您会发现您新创建的React组件。您可以通过将该组件导入React应用程序来测试它，就像您通常在第三方包中所做的那样。</p><h2 id="49a4" class="le lf in bd lg lh mc dn lj lk md dp lm kg me lo lp kk mf lr ls ko mg lu lv lw bi translated">结论</h2><p id="14f7" class="pw-post-body-paragraph jv jw in jx b jy lx ka kb kc ly ke kf kg lz ki kj kk ma km kn ko mb kq kr ks ig bi translated">至此，您已经成功地创建、测试并向npm商店发布了我们的React组件。您可以从Github repo中访问该项目的代码库。</p><p id="4096" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://youtu.be/d8oztfRBGrI" rel="noopener ugc nofollow" target="_blank">本教程的视频版本也可以在Youtube上找到。</a></p><p id="7423" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您还可以访问以下链接，了解如何将节点包或角度组件发布到npm存储。</p><p id="2792" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/create-your-own-angular-component-library-e5f062b902a8">创建你的角度组件库(博文)</a> <br/> <a class="ae kt" href="https://youtu.be/Xs-L_QpG8OU" rel="noopener ugc nofollow" target="_blank">创建你的角度组件库(视频)</a></p><p id="3eb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/create-and-publish-your-own-npm-module-216bffe82dc5">创建你的NPM模块(博文)</a> <br/> <a class="ae kt" href="https://youtu.be/f0h-0d6Y_94" rel="noopener ugc nofollow" target="_blank">创建你的NPM模块(视频)</a></p><p id="0e86" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你有任何疑问或建议，你可以在评论中提出，或者通过下面提到的任何一个社交网站与我联系。干杯！</p><p id="42f1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.youtube.com/channel/UCaktnqx_IENyT5T2lJ3F09w" rel="noopener ugc nofollow" target="_blank">YouTube</a><br/><a class="ae kt" href="https://www.linkedin.com/in/akilesh-rao-610357137/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a><br/><a class="ae kt" href="https://twitter.com/themangalorian" rel="noopener ugc nofollow" target="_blank">Twitter</a><br/><a class="ae kt" href="https://github.com/AkileshRao" rel="noopener ugc nofollow" target="_blank">GitHub</a></p></div><div class="ab cl nv nw hr nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ig ih ii ij ik"><h2 id="047b" class="le lf in bd lg lh mc dn lj lk md dp lm kg me lo lp kk mf lr ls ko mg lu lv lw bi translated">进一步阅读</h2><div class="oc od gp gr oe of"><a href="https://bit.cloud/blog/building-a-composable-ui-component-library--l33jy1vs" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd io gy z fp ok fr fs ol fu fw im bi translated">构建可组合的UI组件库</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">如何构建组件库？React组件库，包含可组合的组件。</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">比特云</p></div></div><div class="oo l"><div class="op l oq or os oo ot jt of"/></div></div></a></div><p id="7f37" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ou">更多内容请看</em><a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ou">plain English . io</em></strong></a><em class="ou">。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ou">免费周报</em> </strong> </a> <em class="ou">。关注我们关于</em><a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ou">Twitter</em></strong></a><a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ou">LinkedIn</em></strong></a><strong class="jx io"><em class="ou"/></strong><a class="ae kt" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ou">YouTube</em></strong></a><strong class="jx io"><em class="ou">，以及</em></strong><em class="ou"/><a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ou">不和</em> </strong> </a>  <em class="ou">对成长黑客感兴趣？检查</em> <a class="ae kt" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ou">电路</em> </strong> </a> <strong class="jx io"> <em class="ou">。</em> </strong></p></div></div>    
</body>
</html>