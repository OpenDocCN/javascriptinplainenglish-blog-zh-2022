<html>
<head>
<title>Zip a Folder with Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js压缩文件夹</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/zip-a-folder-with-node-js-5cd940c5c4fe?source=collection_archive---------2-----------------------#2022-09-07">https://javascript.plainenglish.io/zip-a-folder-with-node-js-5cd940c5c4fe?source=collection_archive---------2-----------------------#2022-09-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c96b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何用Node.js将文件夹和文件压缩成ZIP</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/baee60a17fee3b4d571a1a79e1dc9153.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bcP3_Z0CvEljl_hg3QaRaQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Liliana Drew: <a class="ae kv" href="https://www.pexels.com/photo/man-wearing-windbreaker-jacket-8497715/" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/man-wearing-windbreaker-jacket-8497715/</a></figcaption></figure><p id="1f4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我之前写了一篇关于用Node.js 解压zip文件的文章，看起来很多人喜欢它！是时候解释怎么反其道而行之了！</p><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/unzip-a-file-with-nodejs-5f94b360f7df"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如何用Node.js解压文件</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">在FS能够实现的所有特性中，解压缩不是其中之一。让我们看看如何使用Node.js来实现这一点</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="d05e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Node.js(尤其是FS)<strong class="ky ir">没有提供压缩/解压缩文件的特性</strong>。</p><p id="8d97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着我们必须使用图书馆。网上有很多这样的例子，但是有一个特别引起了我的注意，因为它非常容易使用:JSZip</p><div class="ls lt gp gr lu lv"><a href="https://www.npmjs.com/package/jszip" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">jszip</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">创建、读取和编辑。http://stuartk.com/jszip.最新版本:3.10.1，最新发布时间:a…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">www.npmjs.com</p></div></div><div class="me l"><div class="mr l mg mh mi me mj kp lv"/></div></div></a></div></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="e26a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JSZip 与一个由<strong class="ky ir">实例</strong>组成的系统一起工作。通过实例化一个新对象，就好像创建了一个新的<strong class="ky ir"> ZIP文件</strong>。所以我们从这个开始:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/a3c634696412f1f5f50595ae9252d03c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2lGuRhEcLwRCkL5M-NxcVQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Instantiating the JSZip object</figcaption></figure><p id="4bb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，一旦完成，我们将开始<strong class="ky ir">添加内容</strong>到我们的Zip文件。</p><p id="d819" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JSZip将一个<strong class="ky ir">字符串作为输入</strong>，这使得处理起来更加容易。然后，您可以使用<strong class="ky ir"> FS解析一个文件，并将其内容放入ZIP文件</strong>。</p><p id="fcbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们将调用带两个参数的方法<code class="fe mt mu mv mw b">instance.file</code>:</p><ul class=""><li id="ebfc" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated"><strong class="ky ir">文件名</strong> ( <strong class="ky ir">强制</strong>)</li><li id="ce73" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir">内容</strong> ( <strong class="ky ir">可选</strong>，如果不指定，就只创建一个<strong class="ky ir">空文件</strong>)</li></ul><p id="fa98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nl">你可以多次调用</em> <code class="fe mt mu mv mw b"><em class="nl">instance.file</em></code> <em class="nl">，</em> <strong class="ky ir"> <em class="nl">每次调用都会将已有的内容擦除到目标文件</em> </strong> <em class="nl">。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/5c0fb7c8bfaae47fba191515afd557cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6L6t5Lim_uMDHI6nw8Du2w.png"/></div></div></figure><p id="11ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在最后一步是<strong class="ky ir">生成我们的zip文件并保存它</strong>。</p><p id="f3de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JSZip 有一个叫做<code class="fe mt mu mv mw b">instance.generateAsync</code>的方法，它需要一个参数，那就是你想要使用的<strong class="ky ir">类型的编码</strong>。</p><p id="bd2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管它可以采用许多不同的编码。我们将特别讨论两个:</p><ul class=""><li id="e059" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated"><strong class="ky ir"> blob </strong>:如果你在用浏览器工作的话，它是完美的。Blob将允许你<strong class="ky ir">轻松地将你的zip文件上传到服务器</strong>或者<strong class="ky ir">下载到本地</strong>。</li><li id="8e0a" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir"> uint8array </strong>:当<strong class="ky ir">与Node.js </strong>一起工作时更合适。我们使用uint8array创建一个被fs 接受的<strong class="ky ir">格式，如果你想在你的文件系统中写你的zip文件。</strong></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/0ff466e41a3b4d2257666c75d1ef07ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iYlPG4x76mxbIi1hqK5V2A.png"/></div></div></figure><p id="dbb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">开始了。如果您使用您最喜欢的解压缩工具(或者上面链接的我的另一篇文章中描述的那段代码！)您将能够解压缩您新创建的zip文件，并找到一个内容为<code class="fe mt mu mv mw b">Hello world!</code>的<code class="fe mt mu mv mw b">myfile.txt</code>文件</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h2 id="d188" class="nn no iq bd np nq nr dn ns nt nu dp nv lf nw nx ny lj nz oa ob ln oc od oe of bi translated">创建文件夹</h2><p id="3207" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">创建文件夹有两种方式<strong class="ky ir"/>。</p><p id="0fa6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个基本上是调用<code class="fe mt mu mv mw b">instance.folder("foldername")</code>，它将<strong class="ky ir">在你的zip中创建一个新文件夹</strong>。</p><p id="a2c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二种方法是在创建文件时添加路径:<code class="fe mt mu mv mw b">instance.file("folder/file.txt", "content")</code></p><p id="266c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文件夹将被自动创建<strong class="ky ir"/>如果它不存在，没什么好担心的！</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h2 id="9b13" class="nn no iq bd np nq nr dn ns nt nu dp nv lf nw nx ny lj nz oa ob ln oc od oe of bi translated">删除文件和文件夹</h2><p id="fc3d" class="pw-post-body-paragraph kw kx iq ky b kz og jr lb lc oh ju le lf oi lh li lj oj ll lm ln ok lp lq lr ij bi translated">为了结束这篇文章，让我们快速讨论一下<strong class="ky ir">删除文件或文件夹</strong>。</p><p id="233b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要做到这一点，有一个常见的方法就是<code class="fe mt mu mv mw b">instance.remove("myfileorfolder")</code></p><p id="4b54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与创建文件夹的方式相同，您可以使用<strong class="ky ir">完整路径删除文件</strong>。您也可以删除非空文件夹，而不必先清空它。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="97ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！您现在确切地知道了如何用Node创建ZIP文件。JS！</p><p id="1acb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你有用！如果是的话，不要犹豫鼓掌或跟随！:)</p><div class="ls lt gp gr lu lv"><a href="https://blog.bitsrc.io/open-a-file-or-folder-in-vscode-from-your-terminal-f159c4563e17" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如何从终端打开VSCode中的文件或文件夹</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">适用于Windows和Mac的解决方案</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">blog.bitsrc.io</p></div></div><div class="me l"><div class="ol l mg mh mi me mj kp lv"/></div></div></a></div><div class="ls lt gp gr lu lv"><a href="https://remy-villulles.medium.com/4-macos-apps-to-increase-your-productivity-90d8adfa454a" rel="noopener follow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">4款macOS应用可提高您的工作效率</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">我离不开这些应用程序，它们节省了我很多时间，让我的生活变得更加轻松！</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">remy-villulles.medium.com</p></div></div><div class="me l"><div class="om l mg mh mi me mj kp lv"/></div></div></a></div><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/if-you-like-spring-boot-then-youll-love-this-nodejs-framework-4e5c81a034f3"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如果你喜欢Spring Boot，你会喜欢这个Node.js框架</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">结合Node.js和TypeScript的优点来创建一个强大的框架。</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="on l mg mh mi me mj kp lv"/></div></div></a></div></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="db0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nl">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nl">plain English . io</em></strong></a><em class="nl">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nl">免费周报</em> </strong> </a> <em class="nl">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nl">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nl">LinkedIn</em></strong></a><em class="nl"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nl">YouTube</em></strong></a><em class="nl"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nl">不和</em> </strong> </a> <em class="nl">。</em></p></div></div>    
</body>
</html>