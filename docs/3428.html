<html>
<head>
<title>4 Ways to Fix the “Cannot Read Property ‘push’ of Undefined” Error in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复JavaScript中“无法读取未定义的属性‘push’”错误的4种方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-cannot-read-property-push-of-undefined-54f11b080272?source=collection_archive---------7-----------------------#2022-08-26">https://javascript.plainenglish.io/javascript-cannot-read-property-push-of-undefined-54f11b080272?source=collection_archive---------7-----------------------#2022-08-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="75f8" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何轻松修复JavaScript中的“无法读取未定义的属性‘push’”错误。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/85998d44f79ae6c13208d6531a49803c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4khBg0qf1cZD0_lUopi-zQ.png"/></div></div></figure><p id="75b8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当您试图对一个旨在包含数组但实际上包含值<code class="fe lk ll lm ln b">undefined</code>的变量调用<code class="fe lk ll lm ln b">push()</code>方法时，会出现JavaScript中的“无法读取未定义的属性‘push’”错误。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/04b65914bbaec446efbcf92294307189.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/0*tauuCkxgmGb2Abld.png"/></div></figure><p id="af3b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这可能是由多种原因造成的:</p><ol class=""><li id="357f" class="lp lq in kq b kr ks ku kv kx lr lb ls lf lt lj lu lv lw lx bi translated">在变量上调用<code class="fe lk ll lm ln b">push()</code>方法，而不是先用数组初始化它。</li><li id="0e42" class="lp lq in kq b kr ly ku lz kx ma lb mb lf mc lj lu lv lw lx bi translated">对数组元素而不是数组本身调用<code class="fe lk ll lm ln b">push()</code>方法。</li><li id="fc2f" class="lp lq in kq b kr ly ku lz kx ma lb mb lf mc lj lu lv lw lx bi translated">对先前设置为<code class="fe lk ll lm ln b">undefined</code>的变量调用<code class="fe lk ll lm ln b">push()</code>方法。</li><li id="4447" class="lp lq in kq b kr ly ku lz kx ma lb mb lf mc lj lu lv lw lx bi translated">对不存在或值为<code class="fe lk ll lm ln b">undefined</code>的对象属性调用<code class="fe lk ll lm ln b">push()</code>方法。</li></ol><p id="ec42" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我们将探索所有这些可能原因的实际解决方案。</p><h1 id="b244" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">1.对变量调用push()方法，而不先用数组初始化它</h1><p id="48f0" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">要修复“无法读取undefined的属性‘push’”错误，请确保在对变量调用<code class="fe lk ll lm ln b">push()</code>方法之前，变量已经用数组初始化。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="c42d" class="ne me in ln b gy nf ng l nh ni">let doubles;</span><span id="6a4c" class="ne me in ln b gy nj ng l nh ni">let nums = [1, 2, 3, 4, 5];</span><span id="d707" class="ne me in ln b gy nj ng l nh ni">for (const num of nums) {<br/>  let double = num * 2;</span><span id="3a7d" class="ne me in ln b gy nj ng l nh ni">  // ❌ TypeError: cannot read properties of undefined (reading 'push')<br/>  doubles.push(double);<br/>}</span><span id="dda5" class="ne me in ln b gy nj ng l nh ni">console.log(doubles);</span></pre><p id="0d96" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在上面的例子中，我们在没有初始化变量<code class="fe lk ll lm ln b">doubles</code>的情况下调用了<code class="fe lk ll lm ln b">push()</code>方法。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="782e" class="ne me in ln b gy nf ng l nh ni">let doubles;</span><span id="37c6" class="ne me in ln b gy nj ng l nh ni">console.log(doubles); // undefined</span></pre><p id="efd7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因为在JavaScript中未初始化的变量有一个默认值<code class="fe lk ll lm ln b">undefined</code>，调用<code class="fe lk ll lm ln b">push()</code>会导致抛出一个错误。</p><p id="713f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要修复这个错误，我们所要做的就是将<code class="fe lk ll lm ln b">doubles</code>变量分配给一个数组(在我们的用例中为空):</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="a461" class="ne me in ln b gy nf ng l nh ni">// ✅ "doubles" initialized before use<br/>let doubles = [];</span><span id="1c53" class="ne me in ln b gy nj ng l nh ni">let nums = [1, 2, 3, 4, 5];</span><span id="83f6" class="ne me in ln b gy nj ng l nh ni">for (const num of nums) {<br/>  let double = num * 2;</span><span id="2dcb" class="ne me in ln b gy nj ng l nh ni">  // ✅ push() called - no error thrown<br/>  doubles.push(double);<br/>}</span><span id="c1c6" class="ne me in ln b gy nj ng l nh ni">console.log(doubles); // [ 2, 4, 6, 8, 10 ]</span></pre><h1 id="24ee" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">2.对数组元素而不是数组本身调用push()方法</h1><p id="cb6a" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">要修复“无法读取undefined的属性‘push’”错误，请确保在调用<code class="fe lk ll lm ln b">push()</code>之前没有从数组变量访问元素，而是在实际数组变量上调用了<code class="fe lk ll lm ln b">push()</code>。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="7a75" class="ne me in ln b gy nf ng l nh ni">const array = [];</span><span id="4970" class="ne me in ln b gy nj ng l nh ni">// ❌ TypeError: Cannot read properties of undefined (reading 'push')<br/>array[0].push('html');<br/>array[0].push('css');<br/>array[0].push('javascript');</span><span id="5cdb" class="ne me in ln b gy nj ng l nh ni">console.log(array);</span></pre><p id="a7be" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">用括号索引访问属性<code class="fe lk ll lm ln b">0</code>会给我们数组中索引<code class="fe lk ll lm ln b">0</code>处的元素。该数组没有元素，所以<code class="fe lk ll lm ln b">arr[0]</code>计算为<code class="fe lk ll lm ln b">undefined</code>，对其调用<code class="fe lk ll lm ln b">push()</code>会导致错误。</p><p id="3cd8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了解决这个问题，我们需要在<code class="fe lk ll lm ln b">array</code>变量上调用push，而不是它的一个元素。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="6713" class="ne me in ln b gy nf ng l nh ni">const array = [];</span><span id="dc68" class="ne me in ln b gy nj ng l nh ni">// ✅ Call push() on "array" variable, not "array[0]"<br/>array.push('html');<br/>array.push('css');<br/>array.push('javascript');</span><span id="c79d" class="ne me in ln b gy nj ng l nh ni">console.log(array); // [ 'html', 'css', 'javascript' ]</span></pre><h1 id="c023" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">3.对先前设置为未定义的变量调用push()方法</h1><p id="4cba" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">要修复“无法读取未定义的属性‘push’”错误，请确保最后分配给变量的值不是<code class="fe lk ll lm ln b">undefined</code>。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="e92b" class="ne me in ln b gy nf ng l nh ni">let arr = ['orange'];</span><span id="3019" class="ne me in ln b gy nj ng l nh ni">arr.push('watermelon');</span><span id="b6d6" class="ne me in ln b gy nj ng l nh ni">arr = undefined;</span><span id="73c4" class="ne me in ln b gy nj ng l nh ni">// hundreds of lines of code...</span><span id="4d59" class="ne me in ln b gy nj ng l nh ni">// ❌ TypeError: Cannot read properties of undefined (reading 'push')<br/>arr.push('apple');</span><span id="a23a" class="ne me in ln b gy nj ng l nh ni">console.log(arr);</span></pre><p id="445a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里的问题是，我们曾经明确地将变量设置为<code class="fe lk ll lm ln b">undefined</code>,但是后来我们对变量调用了<code class="fe lk ll lm ln b">push()</code>。此will变量的修复将根据您的场景而有所不同。</p><p id="82d1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">也许您忘记了在再次使用之前将变量设置为一个定义的值:</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="08f3" class="ne me in ln b gy nf ng l nh ni">let arr = ['orange'];</span><span id="ff4b" class="ne me in ln b gy nj ng l nh ni">arr.push('watermelon');</span><span id="0a09" class="ne me in ln b gy nj ng l nh ni">// ✅ Fixed: variable re-assigned<br/>arr = ['banana'];</span><span id="c5c6" class="ne me in ln b gy nj ng l nh ni">// hundreds of lines of code...</span><span id="d616" class="ne me in ln b gy nj ng l nh ni">arr.push('apple');</span><span id="8eee" class="ne me in ln b gy nj ng l nh ni">console.log(arr); // [ 'banana', 'apple' ]</span></pre><p id="d2fa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">或者可能你犯了一个错误，根本没打算把变量赋给<code class="fe lk ll lm ln b">undefined</code>:</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="a195" class="ne me in ln b gy nf ng l nh ni">let arr = ['orange'];</span><span id="ca12" class="ne me in ln b gy nj ng l nh ni">arr.push('watermelon');</span><span id="cbce" class="ne me in ln b gy nj ng l nh ni">// arr = undefined; ✅ Fixed: line removed</span><span id="3c59" class="ne me in ln b gy nj ng l nh ni">arr.push('apple');</span><span id="ea6c" class="ne me in ln b gy nj ng l nh ni">console.log(arr); // [ 'orange', 'watermelon', 'apple' ]</span></pre><h1 id="d849" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">4.对不存在或值未定义的对象属性调用push()方法</h1><p id="88ce" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">要修复JavaScript中的“无法读取未定义的属性‘push’”错误，请确保正在调用<code class="fe lk ll lm ln b">push()</code>方法的对象属性存在，并且不是<code class="fe lk ll lm ln b">undefined</code>。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="184f" class="ne me in ln b gy nf ng l nh ni">const students = [<br/>  { name: 'Mac', scores: [80, 85] },<br/>  { name: 'Robert' },<br/>  { name: 'Michael', scores: [90, 70] },<br/>];</span><span id="2734" class="ne me in ln b gy nj ng l nh ni">// ❌ TypeError: Cannot read properties of undefined (reading 'push')<br/>students[1].scores.push(50);</span></pre><p id="11ba" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这种情况下，出现错误是因为索引<code class="fe lk ll lm ln b">1</code>处的对象元素没有<code class="fe lk ll lm ln b">scores</code>属性。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="5600" class="ne me in ln b gy nf ng l nh ni">const obj = {};</span><span id="aba8" class="ne me in ln b gy nj ng l nh ni">console.log(obj.prop); // undefined</span></pre><p id="b95c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从一个对象访问一个不存在的属性不会在JavaScript中抛出错误，而是给出一个值<code class="fe lk ll lm ln b">undefined</code>。如果你试图在那个不存在的属性上调用一个类似于<code class="fe lk ll lm ln b">push()</code>的方法，你将会遇到一个错误。</p><p id="54f2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这种情况下，我们可以通过将第二个数组元素的<code class="fe lk ll lm ln b">score</code>属性设置为一个定义的值来修复错误。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="d637" class="ne me in ln b gy nf ng l nh ni">const students = [<br/>  { name: 'Mac', scores: [80, 85] },<br/>  // ✅ Fixed: "scores" set to a defined value<br/>  { name: 'Robert', scores: [] },<br/>  { name: 'Michael', scores: [90, 70] },<br/>];</span><span id="75fc" class="ne me in ln b gy nj ng l nh ni">// ✅ "scores" property exists, "push()" works - no error thrown<br/>students[1].scores.push(50);</span></pre></div><div class="ab cl nk nl hr nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ig ih ii ij ik"><p id="f874" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nr">更新于</em><a class="ae ns" href="https://cbdev.link/85f162" rel="noopener ugc nofollow" target="_blank"><em class="nr">codingbeautydev.com</em></a></p><h1 id="52eb" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae ns" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank">报名</a>立即免费领取一份。</p></div></div>    
</body>
</html>