<html>
<head>
<title>How to Create Dynamic Routes in Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Next.js中创建动态路由</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-dynamic-routes-in-next-js-26b498275453?source=collection_archive---------6-----------------------#2022-04-18">https://javascript.plainenglish.io/how-to-create-dynamic-routes-in-next-js-26b498275453?source=collection_archive---------6-----------------------#2022-04-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="71f0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于在Next.js中创建动态路径的指南</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/5b7f174531eaf3076b5a83cb11a3fede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qS3WMXb_H35PC-ZK"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@florianolv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Florian Olivo</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/5c6d90c324bcef1af148c67f1d7e670c.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*WK_loOFw5v0ghd1sX-TcKQ.png"/></div></figure><p id="6b13" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">动态路由基于一组公共信息(如数据库表)来抽象路由的命名。这使得RESTful路径更好，代码更简洁，因为可以创建一个组件布局，用所需的数据填充页面。React通常以制作单页应用程序而闻名，像React Router这样的包需要用来制作自定义URL。输入Next.js，它能够创建现成的动态路由。</p><p id="3240" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">Next.js中的路由使用页面格式。<code class="fe lq lr ls lt b">pages</code>目录中的组件将根据文件名生成一个静态路由。例如，<code class="fe lq lr ls lt b">pages/about.js</code>将有一条对应于<code class="fe lq lr ls lt b">/about</code>的路线，而<code class="fe lq lr ls lt b">pages/welcome.js</code>将是<code class="fe lq lr ls lt b">/welcome</code>。</p><p id="5da1" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">名为<code class="fe lq lr ls lt b">index.js</code>的文件将自动传送到<code class="fe lq lr ls lt b">/</code>。嵌套路由就像在<code class="fe lq lr ls lt b">pages</code>中创建一个目录一样简单。如果一个名为<code class="fe lq lr ls lt b">musicians</code>的新目录被放置在<code class="fe lq lr ls lt b">pages</code>中，<code class="fe lq lr ls lt b">musicians</code>中的文件将被嵌套。示例:<code class="fe lq lr ls lt b">pages/musicians/info.js</code>将路由到<code class="fe lq lr ls lt b">/musicians/info</code>。</p><p id="5dee" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这些只是静态路由。如果有一个音乐家的数据库，根据他们的名字有一个动态的路线就好了。如果弗兰克·扎帕的页面被路由到<code class="fe lq lr ls lt b">/musicians/frank-zappa</code>，那就太好了。为了在Next.js中进行设置，我们将在<code class="fe lq lr ls lt b">musicians</code>中创建一个文件名为<code class="fe lq lr ls lt b">[name].js</code>的组件。方括号表示页面将使用动态路由。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/921b52836dfab35097ebdd210b590967.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*9kvKrBi899ahnzCcxlXfLw.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The file must have square brackets around the name.</figcaption></figure><p id="bbef" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在<code class="fe lq lr ls lt b">[name].js</code>内部为音乐家页面制作组件，将他们的数据作为道具。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="ec73" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这里的目的是让路线成为音乐家名字的一部分。为了实现这一点，Next.js需要使用两个函数:<code class="fe lq lr ls lt b">getStaticPaths()</code>和<code class="fe lq lr ls lt b">getStaticProps()</code>。</p><h2 id="094c" class="lx ly in bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">getStaticPaths()</h2><p id="fc5c" class="pw-post-body-paragraph ku kv in kw b kx mq jo kz la mr jr lc ld ms lf lg lh mt lj lk ll mu ln lo lp ig bi translated">这个函数被设计成接受一个带有所需参数的对象数组并生成路径。在这个例子中，我们将使用一个名为<code class="fe lq lr ls lt b">fetchMusicians()</code>的函数从数据库中获取所有的音乐家，并创建一个对象数组，每个音乐家的名字作为一个slug。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="1fe9" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">让我们解开这段代码。从数据库中获取音乐家对象的数组。然后将名为slugged的params对象数组赋给<code class="fe lq lr ls lt b">paths</code>并返回。</p><p id="2f30" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io">重要:</strong>这里返回的对象数组<em class="mv">必须</em>有<code class="fe lq lr ls lt b">params</code>作为一个有自己键的对象的键。在这种情况下，它是<code class="fe lq lr ls lt b">params.name</code>,其值是被签名的音乐家的名字。这将生成所有可能的路线。<code class="fe lq lr ls lt b">fallback: false</code>的目的是，如果所访问的路线与该函数生成的路径列表中的任何一条都不匹配，则显示404错误。</p><h2 id="fef5" class="lx ly in bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">getStaticProps()</h2><p id="6669" class="pw-post-body-paragraph ku kv in kw b kx mq jo kz la mr jr lc ld ms lf lg lh mt lj lk ll mu ln lo lp ig bi translated">该函数用于抓取页面所需的必要数据。在这里的例子中，我们想要获取路线的名称，它是用<code class="fe lq lr ls lt b">getStaticPaths()</code>生成的，并使用它来查询数据库并呈现正确的音乐家信息。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="af20" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">想象一下参观<code class="fe lq lr ls lt b">/musicians/frank-zappa</code>。路线在<code class="fe lq lr ls lt b">params</code>内被识别，因此作为参数被输入<code class="fe lq lr ls lt b">getStaticProps()</code>。必须将<code class="fe lq lr ls lt b">params.name</code>的值frank-zappa转换回音乐家名字的原始形式，以便它可以用于查询数据库和检索弗兰克·扎帕的信息。然后检索数据，并使用这些数据完全呈现页面。</p><p id="4f8b" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">完成动态路由都需要两个函数<code class="fe lq lr ls lt b">getStaticPaths()</code>和<code class="fe lq lr ls lt b">getStaticProps()</code>。记住，<code class="fe lq lr ls lt b">getStaticPaths()</code>基于某个属性创建一个路线列表。在这个例子中，我们使用了一个人名的缩写，但是也可以使用数据库id。只需将<code class="fe lq lr ls lt b">[name].js</code>更改为<code class="fe lq lr ls lt b">[id].js</code>，并在params对象中创建一个<code class="fe lq lr ls lt b">id</code>键，而不是使用适当的id作为值的<code class="fe lq lr ls lt b">name</code>。</p><p id="3f33" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">将所有这些与<code class="fe lq lr ls lt b">[name].js</code>文件放在一起应该是这样的:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="5382" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">确保<code class="fe lq lr ls lt b">export</code>和<code class="fe lq lr ls lt b">async</code>在<code class="fe lq lr ls lt b">getStaticPaths()</code>和<code class="fe lq lr ls lt b">getStaticProps()</code>之前，否则它们将无法正常工作。现在，访问一个音乐家的页面会根据他们的名字以动态路线呈现他们的信息。</p><p id="1629" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">Next.js简化了动态呈现和路由页面的过程。它让开发人员可以自由地创建现成的可定制的RESTful路线。这很容易做到，保持代码干净简洁，并提供更好的用户体验。</p><p id="fca9" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><em class="mv">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mv">plain English . io</em></strong></a><em class="mv">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mv">免费周报</em> </strong> </a> <em class="mv">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mv">Twitter</em></strong></a><em class="mv">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mv">LinkedIn</em></strong></a><em class="mv">。加入我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mv">社区不和谐</em> </strong> </a> <em class="mv">。</em></p></div></div>    
</body>
</html>