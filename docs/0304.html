<html>
<head>
<title>Inertia.js — Build a Single Page Application without API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Inertia.js —构建一个没有API的单页应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/inertiajs-build-single-page-application-without-api-8152c962c251?source=collection_archive---------11-----------------------#2022-01-18">https://javascript.plainenglish.io/inertiajs-build-single-page-application-without-api-8152c962c251?source=collection_archive---------11-----------------------#2022-01-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0cf1db35b1f0b8a454873de3488bd9f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jd8fdA_NUdfRdpw-N9X_pg.png"/></div></div></figure><h2 id="dd49" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">什么是Inertia.js？</strong></h2><p id="2f3e" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">基本上，Inertia.js是用javascript编写的路由库，它允许您在不强制加载整个页面的情况下进行页面访问。Inertia.js是前端和后端之间的粘合剂，它不是一个框架，但有助于连接前端和后端框架，它是在适配器的帮助下完成的。官方支持的，前端适配器是React，Vue，和Svelte，后端适配器是Laravel和Rails。有许多社区支持的适配器支持大多数现代语言和框架。</p><h2 id="1295" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">它是如何工作的？</strong></h2><p id="d8a2" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">js通过提供一个包装在普通HTML链接周围的链接组件来完成智能工作。当点击发生时，它发出AJAX请求来获取页面内容，而不是进行页面加载。当Inertia发出请求时，它会被后端识别，而不是发送一个HTML响应，而是发送回一个带有页面组件名称和数据的JSON对象，该对象会用新的页面组件替换旧的页面组件，并且页面的历史会得到更新。最后，用户可以获得零页面刷新和即时组件加载的丰富体验。</p><h2 id="4e74" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">安装带惯性的Laravel . js</strong></h2><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="2482" class="jv jw in lr b gy lv lw l lx ly"><em class="lz"># setup laravel project inside folder laravel-inertia-example<br/> composer create-project laravel/laravel laravel-inertia-example</em></span><span id="31e4" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">cd laravel-inertia-example</em></span><span id="bc98" class="jv jw in lr b gy ma lw l lx ly">composer require inertiajs/inertia-laravel</span><span id="10f5" class="jv jw in lr b gy ma lw l lx ly"><em class="lz"># Install laravel breeze package in composer,<br/> # It provides a starting point for fresh applications.<br/> # Breeze generates views for login, registration and forget password<br/> </em><br/> composer require laravel/breeze — dev<br/> <br/> <em class="lz"># Install breeze with react, you can use vue if you want</em><br/> <br/> php artisan breeze:install react<br/> <br/> npm install &amp;&amp; npm run dev<br/> <br/> <em class="lz"># Setup database configuration in .env file and then run</em><br/> <br/> php artisan migrate<br/> <br/> <em class="lz"># You can run project using</em><br/> <br/> php artisan serve</span></pre><h2 id="8a16" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">代码结构</strong></h2><p id="3dfc" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">在resources/js下，您会找到所有相关的React组件。该结构将如下所示:</p><figure class="lm ln lo lp gt jo gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/8489b22fde54cd837800fcf2f91ee8d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*Y-DhgD0ugPOjFLNGqnC7ug.png"/></div></figure><p id="7b74" class="pw-post-body-paragraph kr ks in kt b ku mc kw kx ky md la lb ke me ld le ki mf lg lh km mg lj lk ll ig bi translated">所有React组件都将位于Pages文件夹中</p><h2 id="b2a7" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> Intertia.js路由到组件</strong></h2><p id="6463" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">视图将使用Inertia.js附带的链接组件，而不是使用HTML锚标记，如下所示:</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="4bb9" class="jv jw in lr b gy lv lw l lx ly"><em class="lz">import { Link } from ‘@inertiajs/inertia-react’;</em></span><span id="d5e5" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">&lt;Link href={route(‘login’)}&gt;</em></span><span id="89e0" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">Log in</em></span><span id="5647" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">&lt;/Link&gt;</em></span></pre><p id="095d" class="pw-post-body-paragraph kr ks in kt b ku mc kw kx ky md la lb ke me ld le ki mf lg lh km mg lj lk ll ig bi translated">由于惯性将所有链接转换为基于XHR的请求，所有对Laravel routes的请求都用JSON对象响应。</p><figure class="lm ln lo lp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/47803dd037d024308fbe423e0455530e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7dgx6Wd4w_92nj32qmYxWw.png"/></div></div></figure><p id="5063" class="pw-post-body-paragraph kr ks in kt b ku mc kw kx ky md la lb ke me ld le ki mf lg lh km mg lj lk ll ig bi translated">这个响应再次生成Laravel代码。</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="d8e8" class="jv jw in lr b gy lv lw l lx ly"><em class="lz">return Inertia::render(‘Auth/Login’, [</em></span><span id="124a" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">‘canResetPassword’ =&gt; Route::has(‘password.request’),</em></span><span id="7edd" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">‘status’ =&gt; session(‘status’),</em></span><span id="3737" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">]);</em></span></pre><h2 id="1728" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">Laravel inertia . js中的路线</strong></h2><p id="583a" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">若要在Inertia.js中使用Laravel路线，breeze会预先安装套件strincco/ziggy。要为注册的路由创建链接，可以使用以下代码</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="969f" class="jv jw in lr b gy lv lw l lx ly"><em class="lz">&lt;Link href={route(‘register’)} &gt;</em></span><span id="03c6" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">Register</em></span><span id="0f16" class="jv jw in lr b gy ma lw l lx ly"><em class="lz">&lt;/Link&gt;</em></span></pre><h2 id="cf89" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">与LiveWire的比较</strong></h2><p id="ec06" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">Inertia.js严重依赖JavaScript，开发者停止编写刀片组件，所有代码都迁移到JavaScript。<a class="ae mh" href="https://docs.google.com/document/d/1G1s1AUQ2uYhsL2zunNeNsFTRpjScK-oN5TZDUuYn6wc/edit" rel="noopener ugc nofollow" target="_blank"> Livewire </a>让你不用写任何javascript代码就能写组件。在使用LiveWire时，开发人员处理PHP代码和刀片语法，而Inertia.js为您提供了使用Vue或React作为前端框架的选项。</p><p id="df68" class="pw-post-body-paragraph kr ks in kt b ku mc kw kx ky md la lb ke me ld le ki mf lg lh km mg lj lk ll ig bi translated">从性能的角度来看，LiveWire在服务器上渲染一切，这缩短了第一个内容的绘制时间，也是SEO的一个巨大优势。Inertia.js使用javascript加载内容，但是它的性能比其他SPA框架好得多，因为数据已经嵌入到响应中。Inertia.js还支持服务器端呈现，这允许为站点做SEO。</p><p id="0a5a" class="pw-post-body-paragraph kr ks in kt b ku mc kw kx ky md la lb ke me ld le ki mf lg lh km mg lj lk ll ig bi translated">Inertia.js的一个额外好处是它包含了预定义的组件(对话框和确认模式),并且它有自己的验证包，可以通过NPM安装。</p><h2 id="8873" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">结论</strong></h2><p id="bd7f" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">Inertia.js为构建单页面应用程序提供了一个很好的起点，无需编写单独的API，无需调用API的Axios库，没有获取响应和解析响应的麻烦。对于开发人员来说，继续开发应用程序并对应用程序进行最小的更改是非常自然的。如果你想改变你现有的应用程序，使其看起来更现代，而不需要重写整个代码，那么Inertia.js是你最合适的工具。</p><p id="9654" class="pw-post-body-paragraph kr ks in kt b ku mc kw kx ky md la lb ke me ld le ki mf lg lh km mg lj lk ll ig bi translated"><em class="lz">更多内容看</em> <a class="ae mh" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io"> <em class="lz">说白了。报名参加我们的</em> <a class="ae mh" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io"> <em class="lz">免费周报</em> </strong> </a> <em class="lz">。在我们的</em> <a class="ae mh" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io"> <em class="lz">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="lz">。</em></strong></a></p></div></div>    
</body>
</html>