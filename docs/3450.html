<html>
<head>
<title>How to Subtract Hours From a Date in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中从日期中减去小时</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-date-subtract-hours-4a361ca78543?source=collection_archive---------7-----------------------#2022-08-29">https://javascript.plainenglish.io/javascript-date-subtract-hours-4a361ca78543?source=collection_archive---------7-----------------------#2022-08-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3a7d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解在JavaScript中从日期对象中轻松减去任意小时数的多种方法</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/071fec1b0a25e98b2149579e0360dab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6atPjxVwNB4Iv_dN6rY-dA.png"/></div></div></figure><p id="6e3b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们看看在JavaScript中从<code class="fe lk ll lm ln b">Date</code>对象中减去任意小时数的方法。</p><h1 id="08b9" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">1.日期设置小时()和获取小时()方法</h1><p id="9c80" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">从<code class="fe lk ll lm ln b">Date</code>中减去小时:</p><ol class=""><li id="c12e" class="ml mm in kq b kr ks ku kv kx mn lb mo lf mp lj mq mr ms mt bi translated">调用<code class="fe lk ll lm ln b">Date</code>上的<code class="fe lk ll lm ln b">getHours()</code>方法获取小时数。</li><li id="3707" class="ml mm in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated">减去小时数。</li><li id="a4a0" class="ml mm in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated">将减法的结果传给<code class="fe lk ll lm ln b">setHours()</code>法。</li></ol><pre class="kd ke kf kg gt mz ln na nb aw nc bi"><span id="cf65" class="nd lp in ln b gy ne nf l ng nh">function subtractHours(date, hours) {<br/>  date.setHours(date.getHours() - hours);</span><span id="5937" class="nd lp in ln b gy ni nf l ng nh">  return date;<br/>}</span><span id="a4dd" class="nd lp in ln b gy ni nf l ng nh">// 8 AM on June 20, 2022<br/>const date = new Date('2022-06-20T08:00:00.000Z');</span><span id="8d8b" class="nd lp in ln b gy ni nf l ng nh">const newDate = subtractHours(date, 2);</span><span id="9ae6" class="nd lp in ln b gy ni nf l ng nh">// 6 AM on June 20, 2022<br/>console.log(date); // 2022-06-20T06:00:00.000Z</span></pre><p id="d82e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们的<code class="fe lk ll lm ln b">subtractHours()</code>函数以<code class="fe lk ll lm ln b">Date</code>对象和要减去的小时数作为参数。它返回相同的<code class="fe lk ll lm ln b">Date</code>对象，并减去小时。</p><p id="f757" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">日期<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getHours" rel="noopener ugc nofollow" target="_blank"> getHours() </a>方法返回一个介于<code class="fe lk ll lm ln b">0</code>和<code class="fe lk ll lm ln b">23</code>之间的数字，代表特定日期的小时数。</p><p id="9502" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">日期<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setHours" rel="noopener ugc nofollow" target="_blank">设置小时()</a>方法将<code class="fe lk ll lm ln b">Date</code>的小时设置为指定的数字。</p><p id="8021" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果我们减去的小时会减少<code class="fe lk ll lm ln b">Date</code>的日、月或年，<code class="fe lk ll lm ln b">setHours()</code>会自动更新<code class="fe lk ll lm ln b">Date</code>信息以反映这一点。</p><pre class="kd ke kf kg gt mz ln na nb aw nc bi"><span id="8bf8" class="nd lp in ln b gy ne nf l ng nh">// 12 AM on June 20, 2022<br/>const date = new Date('2022-06-20T00:00:00.000Z');</span><span id="68b8" class="nd lp in ln b gy ni nf l ng nh">date.setHours(date.getHours() - 3);</span><span id="4462" class="nd lp in ln b gy ni nf l ng nh">// 9 PM on June 19, 2022 (previous day)<br/>console.log(date); // 2022-06-19T21:00:00.000Z</span></pre><p id="6e26" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本例中，将<code class="fe lk ll lm ln b">Date</code>的小时数减少<code class="fe lk ll lm ln b">3</code>会将一天的小时数减少1，并将小时数设置为<code class="fe lk ll lm ln b">21</code>。</p><h2 id="55c5" class="nd lp in bd lq nk nl dn lu nm nn dp ly kx no np ma lb nq nr mc lf ns nt me nu bi translated">避免副作用</h2><p id="c164" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated"><code class="fe lk ll lm ln b">setHours()</code>方法对它所调用的<code class="fe lk ll lm ln b">Date</code>对象进行变异。这会给我们的<code class="fe lk ll lm ln b">subtractHours()</code>功能带来副作用。为了避免修改经过的日期并创建一个纯函数，制作一个日期的副本并在该副本上调用<code class="fe lk ll lm ln b">setHours()</code>，而不是原始日期:</p><pre class="kd ke kf kg gt mz ln na nb aw nc bi"><span id="1bb4" class="nd lp in ln b gy ne nf l ng nh">function subtractHours(date, hours) {<br/>  const dateCopy = new Date(date);</span><span id="464f" class="nd lp in ln b gy ni nf l ng nh">  dateCopy.setHours(dateCopy.getHours() - hours);</span><span id="4a2f" class="nd lp in ln b gy ni nf l ng nh">  return date;<br/>}</span><span id="30dd" class="nd lp in ln b gy ni nf l ng nh">// 8 AM on June 20, 2022<br/>const date = new Date('2022-06-20T08:00:00.000Z');</span><span id="4df3" class="nd lp in ln b gy ni nf l ng nh">const newDate = subtractHours(date, 2);</span><span id="5424" class="nd lp in ln b gy ni nf l ng nh">// 6 AM on June 20, 2022<br/>console.log(date); // 2022-06-20T06:00:00.000Z</span><span id="62c9" class="nd lp in ln b gy ni nf l ng nh">// Original not modified<br/>console.log(newDate); // 2022-06-20T08:00:00.000Z</span></pre><p id="0feb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">提示:</strong>不改变外部状态的函数(即纯函数)更容易预测和推理。这使得限制代码中副作用的数量成为一种良好的做法。</p><h1 id="da4c" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">2.日期-fns子小时()函数</h1><p id="25d0" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">或者，我们可以使用<a class="ae nj" href="https://www.npmjs.com/package/date-fns" rel="noopener ugc nofollow" target="_blank"> date-fns </a> NPM包中的<code class="fe lk ll lm ln b">subHours()</code>函数，从<code class="fe lk ll lm ln b">Date</code>中快速减去小时。它的工作原理类似于我们的纯<code class="fe lk ll lm ln b">subtractHours()</code>函数。</p><pre class="kd ke kf kg gt mz ln na nb aw nc bi"><span id="2dff" class="nd lp in ln b gy ne nf l ng nh">import { subHours } from 'date-fns';</span><span id="4053" class="nd lp in ln b gy ni nf l ng nh">// 8 AM on June 20, 2022<br/>const date = new Date('2022-06-20T08:00:00.000Z');</span><span id="c565" class="nd lp in ln b gy ni nf l ng nh">const newDate = subHours(date, 2);</span><span id="fe16" class="nd lp in ln b gy ni nf l ng nh">// 6 AM on June 20, 2022<br/>console.log(date); // 2022-06-20T06:00:00.000Z</span><span id="85a7" class="nd lp in ln b gy ni nf l ng nh">// Original not modified<br/>console.log(newDate); // 2022-06-20T08:00:00.000Z</span></pre></div><div class="ab cl nv nw hr nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ig ih ii ij ik"><p id="b41c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="oc">原载于</em><a class="ae nj" href="https://cbdev.link/c3cb44" rel="noopener ugc nofollow" target="_blank"><em class="oc"/></a></p><h1 id="15f3" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">ES13中11个惊人的新JavaScript特性</h1><p id="bfde" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">本指南将带您了解ECMAScript 13中添加的所有最新功能。这些强大的新特性将会用更短、更富于表现力的代码来更新您的JavaScript。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi od"><img src="../Images/75a56482761ab63cfc081ad691d70d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*WqVjQY7sKZh3wld5WzkfTw.png"/></div></figure><p id="b288" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nj" href="https://cbdev.link/900477" rel="noopener ugc nofollow" target="_blank">报名</a>立即免费领取一份。</p></div></div>    
</body>
</html>