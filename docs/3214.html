<html>
<head>
<title>How to Remove an Item From a State Array in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中从状态数组中移除项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-remove-item-from-state-array-4e966bbeef4e?source=collection_archive---------8-----------------------#2022-08-09">https://javascript.plainenglish.io/react-remove-item-from-state-array-4e966bbeef4e?source=collection_archive---------8-----------------------#2022-08-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3590" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何在React中轻松地从状态数组中移除项目。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d1fc7c12c9cdad5cda98eb61e5bf2ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mLdbYP5Y4vk8dS2jbQKy3g.png"/></div></div></figure><p id="1dc8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我们将学习如何在React中轻松地从状态数组中移除一个项目。</p><h1 id="f32c" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">数组filter()方法</h1><p id="eea4" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">要从React中的状态数组中删除一个项目，请在数组上调用<a class="ae mh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener ugc nofollow" target="_blank"> filter() </a>方法，指定一个测试，数组中除了要删除的项目之外的每个项目都将通过该测试，然后用<code class="fe mi mj mk ml b">setState</code>用<code class="fe mi mj mk ml b">filter()</code>的结果更新状态。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="ce5d" class="mq ll in ml b gy mr ms l mt mu">import { useState } from 'react';</span><span id="caa6" class="mq ll in ml b gy mv ms l mt mu">export default function App() {<br/>  const initialState = [<br/>    { id: 1, name: 'Banana', amount: 5 },<br/>    { id: 2, name: 'Apple', amount: 6 },<br/>  ];</span><span id="8397" class="mq ll in ml b gy mv ms l mt mu">  const removeSecond = () =&gt; {<br/>    setFruits((current) =&gt;<br/>      current.filter((fruit) =&gt; fruit.id !== 2)<br/>    );<br/>  };</span><span id="9bb9" class="mq ll in ml b gy mv ms l mt mu">  const [fruits, setFruits] = useState(initialState);</span><span id="75ea" class="mq ll in ml b gy mv ms l mt mu">  return (<br/>    &lt;div style={{ margin: '16px' }}&gt;<br/>      &lt;button onClick={removeSecond}&gt;Remove second&lt;/button&gt;<br/>      {fruits.map((fruit) =&gt; (<br/>        &lt;div key={fruit.id}&gt;<br/>          &lt;h2&gt;Name: {fruit.name}&lt;/h2&gt;<br/>          &lt;h2&gt;Amount: {fruit.amount}&lt;/h2&gt;<br/>          &lt;hr /&gt;<br/>        &lt;/div&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/71956d47b3b9ce0f486873bec429be33.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/0*iwKYNBjer_GVVxuy.gif"/></div></figure><p id="a6a0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们通过从<code class="fe mi mj mk ml b">filter()</code>回调中返回一个条件来移除带有<code class="fe mi mj mk ml b">id</code>T3的水果对象，该条件仅针对数组中不具有2的<code class="fe mi mj mk ml b">id</code>的项目。这样做将从<code class="fe mi mj mk ml b">filter()</code>返回的数组中排除目标项。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="5898" class="mq ll in ml b gy mr ms l mt mu">const initialState = [<br/>  { id: 1, name: 'Banana', amount: 5 },<br/>  { id: 2, name: 'Apple', amount: 6 },<br/>];</span><span id="f27f" class="mq ll in ml b gy mv ms l mt mu">const secondRemoved = initialState.filter((fruit) =&gt; fruit.id !== 2);</span><span id="862d" class="mq ll in ml b gy mv ms l mt mu">// [ { id: 1, name: 'Banana', amount: 5 } ]<br/>console.log(secondRemoved);</span></pre><p id="5ca8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">由于这里的<code class="fe mi mj mk ml b">App</code>是一个功能组件，我们使用<code class="fe mi mj mk ml b">useState()</code> React钩子来创建初始状态数组。第一个值<code class="fe mi mj mk ml b">useState()</code>返回让我们访问状态数据。第二个值是用于更新状态的函数(统称为<code class="fe mi mj mk ml b">setState</code>)。我们将一个函数传递给<code class="fe mi mj mk ml b">setState</code>(这里命名为<code class="fe mi mj mk ml b">setFruits</code>)以确保我们获得当前/最新的状态。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="c59e" class="mq ll in ml b gy mr ms l mt mu">const removeSecond = () =&gt; {<br/>  // "current" contains the latest state array<br/>  setFruits((current) =&gt;<br/>    current.filter((fruit) =&gt; fruit.id !== 2)<br/>  );<br/>};</span></pre><p id="1631" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">提示</strong>:当从当前状态数据计算出新状态时，总是传递一个函数给<code class="fe mi mj mk ml b">setState</code>。</p><h1 id="255b" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">不要在React中直接修改状态</h1><p id="5658" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">请注意，试图通过使用类似<code class="fe mi mj mk ml b">splice()</code>的函数直接修改来从数组中删除项目是行不通的:</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="dfcf" class="mq ll in ml b gy mr ms l mt mu">const removeSecond = () =&gt; {<br/>  // Find the index of the object to be removed<br/>  const secondIndex = fruits.findIndex((fruit) =&gt; fruit.id === 2);</span><span id="2174" class="mq ll in ml b gy mv ms l mt mu">  // Mutating the array like this will not update the view<br/>  fruits.splice(secondIndex, 1);<br/>};</span></pre><p id="5d35" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">状态在React中是不可变的，所以我们不能通过改变它来更新数组。必须用从<code class="fe mi mj mk ml b">filter()</code>返回的新数组替换它，以便视图更新。</p><h1 id="83c0" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">基于多个条件从状态数组中移除项目</h1><p id="eca8" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">如果需要根据多个条件从状态数组中删除一个项目，可以使用<a class="ae mh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND" rel="noopener ugc nofollow" target="_blank">逻辑AND ( &amp; &amp; ) </a>或<a class="ae mh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">逻辑OR ( &amp; &amp; ) </a>运算符。</p><h2 id="074b" class="mq ll in bd lm mx my dn lq mz na dp lu kx nb nc lw lb nd ne ly lf nf ng ma nh bi translated">使用逻辑OR (||)运算符</h2><p id="6c53" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">下面是一个使用逻辑OR ( <code class="fe mi mj mk ml b">||</code>)操作符从状态数组中删除一个项目的例子。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="ace9" class="mq ll in ml b gy mr ms l mt mu">const initialState = [<br/>  { id: 1, name: 'Banana', amount: 5 },<br/>  { id: 2, name: 'Apple', amount: 6 },<br/>  { id: 3, name: 'Orange', amount: 10 },<br/>  { id: 4, name: 'Watermelon', amount: 1 },<br/>];</span><span id="81e0" class="mq ll in ml b gy mv ms l mt mu">const [fruits, setFruits] = useState(initialState);</span><span id="676c" class="mq ll in ml b gy mv ms l mt mu">const remove = () =&gt; {<br/>  setFruits((current) =&gt;<br/>    current.filter(<br/>      (fruit) =&gt;<br/>        fruit.name === 'Orange' || fruit.name === 'Apple'<br/>    )<br/>  );<br/>};</span></pre><p id="ff0b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果操作数中至少有一个的计算结果为<code class="fe mi mj mk ml b">true</code>，那么将一组操作数与<code class="fe mi mj mk ml b">||</code>运算符组合将产生<code class="fe mi mj mk ml b">true</code> <strong class="kq io">。通过将该操作符与<code class="fe mi mj mk ml b">filter()</code>方法一起使用，我们返回一个新数组，该数组只包含<code class="fe mi mj mk ml b">name</code>等于<code class="fe mi mj mk ml b">'Orange'</code>或<code class="fe mi mj mk ml b">'Apple'</code>的水果对象。</strong></p><h2 id="4cc7" class="mq ll in bd lm mx my dn lq mz na dp lu kx nb nc lw lb nd ne ly lf nf ng ma nh bi translated">使用逻辑AND (&amp;&amp;)运算符</h2><p id="2c9c" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">下面是一个使用逻辑AND ( <code class="fe mi mj mk ml b">&amp;&amp;</code>)运算符从状态数组中删除项目的示例:</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="8611" class="mq ll in ml b gy mr ms l mt mu">const initialState = [<br/>  { id: 1, name: 'Banana', amount: 5 },<br/>  { id: 2, name: 'Apple', amount: 6 },<br/>  { id: 3, name: 'Orange', amount: 10 },<br/>  { id: 4, name: 'Watermelon', amount: 1 },<br/>];</span><span id="59e9" class="mq ll in ml b gy mv ms l mt mu">const [fruits, setFruits] = useState(initialState);</span><span id="679d" class="mq ll in ml b gy mv ms l mt mu">const remove = () =&gt; {<br/>  setFruits((current) =&gt;<br/>    current.filter(<br/>      (fruit) =&gt; fruit.id !== 2 &amp;&amp; fruit.id !== 4<br/>    )<br/>  );<br/>};</span></pre><p id="842d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">只有当所有的操作数都是<code class="fe mi mj mk ml b">true</code>时，用<code class="fe mi mj mk ml b">&amp;&amp;</code>运算符组合操作数才会产生<code class="fe mi mj mk ml b">true</code> <strong class="kq io">。</strong></p><p id="5f16" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">通过将<code class="fe mi mj mk ml b">filter()</code>方法与<code class="fe mi mj mk ml b">&amp;&amp;</code>操作符相结合，我们能够指定一个复合布尔表达式来删除带有<code class="fe mi mj mk ml b">2</code>和<code class="fe mi mj mk ml b">4</code>的<code class="fe mi mj mk ml b">id</code>的水果对象。</p><h2 id="ce14" class="mq ll in bd lm mx my dn lq mz na dp lu kx nb nc lw lb nd ne ly lf nf ng ma nh bi translated">用德摩根定律简化复合布尔表达式</h2><p id="5396" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">我们可以使用<a class="ae mh" href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws" rel="noopener ugc nofollow" target="_blank">德摩根定律</a>之一将前面例子中的AND条件转换为OR条件，并减少求反的次数。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="5e3d" class="mq ll in ml b gy mr ms l mt mu">const remove = () =&gt; {<br/>  setFruits((current) =&gt;<br/>    current.filter(<br/>      (fruit) =&gt; !(fruit.id === 2 || fruit.id === 4)<br/>    )<br/>  );<br/>};</span></pre><p id="faf0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这种转换可以使表达式更容易阅读和理解。</p></div><div class="ab cl ni nj hr nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ig ih ii ij ik"><p id="3d72" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="np">最初发表于:</em><a class="ae mh" href="https://cbdev.link/5455d1" rel="noopener ugc nofollow" target="_blank"><em class="np">codingbeautydev.com</em></a></p><h1 id="e325" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">JavaScript做的每一件疯狂的事情</h1><p id="9a76" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae mh" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>