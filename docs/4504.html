<html>
<head>
<title>How to Serve a React App with NGINX in a non-root Docker container</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在非根Docker容器中使用NGINX为React应用提供服务</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-serve-a-react-app-with-nginx-in-a-non-root-docker-container-cbc4c6acc177?source=collection_archive---------3-----------------------#2022-12-09">https://javascript.plainenglish.io/how-to-serve-a-react-app-with-nginx-in-a-non-root-docker-container-cbc4c6acc177?source=collection_archive---------3-----------------------#2022-12-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4b3aa8e47ef4aec4e3b84e68202b6b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3nk8uqPrz8HbCnmVtj_vAg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/fr/@sortino?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Joshua Sortino</a> on <a class="ae jz" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d310" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">喔，这个标题有点拗口。但是我想就此写一篇短文，因为这是我最近遇到的一个问题。这比我想象的要复杂得多！</p><p id="a1a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在网上找到了不少文章，但仍有不少问题需要解决。</p><p id="a912" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，这是我的docker文件看起来像这样:</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="ff34" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这使用一个多阶段构建来首先捆绑react应用程序的生产构建。一旦完成，在构建的第二阶段，nginx配置文件——<code class="fe le lf lg lh b">nginx.conf</code>——将与应用程序的产品捆绑包一起复制到容器中。</p><p id="5c90" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，需要做一些事情来授予NGINX以非root用户身份运行的权限:</p><ol class=""><li id="44ef" class="li lj in kc b kd ke kh ki kl lk kp ll kt lm kx ln lo lp lq bi translated">它需要一个新的进程id文件</li><li id="4770" class="li lj in kc b kd lr kh ls kl lt kp lu kt lv kx ln lo lp lq bi translated">我们将用来运行应用程序的用户需要对该文件和其他必要文件(缓存、日志、我们的react应用程序)的权限。</li></ol><p id="2d04" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，您可以更改运行Docker容器的用户，这样就非常容易了！</p><p id="4797" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当然，你还需要一个NGINX配置文件…下面是React应用程序的基本配置文件:</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="f330" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">完成这些后，您可以使用以下命令运行您的应用程序:</p><p id="d41f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe le lf lg lh b">docker build -t react-app .</code></p><p id="a701" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe le lf lg lh b">docker run -d -p 8080:8080 react-app</code></p><p id="1569" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，导航到<a class="ae jz" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>查看！</p><p id="dfbf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lw">更多内容看</em> <a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lw">说白了就是io </em> </strong> </a> <em class="lw">。</em></p><p id="dcf7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lw">报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lw">免费每周简讯</em> </strong> </a> <em class="lw">。关注我们关于</em> <a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lw">推特</em> </strong> </a>，<a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lw">LinkedIn</em></strong></a><em class="lw">，</em><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lw">YouTube</em></strong></a><em class="lw">，</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lw">不和</em> </strong> </a> <strong class="kc io"> <em class="lw">。</em>T56】</strong></p><p id="df8b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="lw">有兴趣规模化你的软件创业</em> </strong> <em class="lw">？检查</em> <a class="ae jz" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lw">电路</em> </strong> </a> <em class="lw">。</em></p></div></div>    
</body>
</html>