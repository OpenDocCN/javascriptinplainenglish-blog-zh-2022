<html>
<head>
<title>Singleton pattern in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的单例模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/singleton-pattern-in-javascript-df47826ea4fc?source=collection_archive---------5-----------------------#2022-12-17">https://javascript.plainenglish.io/singleton-pattern-in-javascript-df47826ea4fc?source=collection_archive---------5-----------------------#2022-12-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0d72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated"><span class="l km kv bm di kw"> <img alt="T" class="kx ky kz la lb lc fc n ie dh bf" src="../Images/97e826c971e9cf5664ff0bfa07877590.png" width="61" height="79" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fit:122/1*azj21xtGu5mYYcwndMfUWg.png"/> <span class="l km kn ko bm kp kq kr ks kt di ku"> T </span> </span>何singleton模式可能是软件工程中最著名的模式之一。但你知道这到底是怎么回事吗？在这篇文章中，我将用简单易懂的语言向你解释什么是单例模式，它的优点和缺点，以及单例模式的常见用例。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/1bdda87b4cf61bd98ce4930e107e11f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ILrigmZGRdLny1-HJgyp4w.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Photo by Waldemar Brandt on Unsplash</figcaption></figure><p id="a236" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Singleton模式是一种设计模式，它确保只创建一个对象的实例，提供对该对象的全局访问点。在只有一个对象实例很重要的情况下，例如管理数据库连接或处理用户身份验证时，这很有用。</p><p id="df80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要在JavaScript中实现Singleton模式，通常需要创建一个类来表示要创建单个实例的对象。这个类将有一个私有构造函数，它防止其他代码直接创建该类的新实例。该类还会有一个静态方法，返回对象的单个实例。这个方法将首先检查对象的实例是否已经存在，如果不存在，它将创建一个新的实例并返回它。对该方法的后续调用将始终返回该对象的同一个实例，从而确保只创建一个实例。</p><p id="bcc0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一个如何在JavaScript中实现单例模式的例子:</p><pre class="le lf lg lh gt ls lt lu bn lv lw bi"><span id="328a" class="lx ly iq lt b be lz ma l mb mc">class DatabaseConnection {<br/>  // Private constructor<br/>  constructor() {<br/>    // Code to create a database connection<br/>  }<br/><br/>  // Static method to get the single instance of the object<br/>  static getInstance() {<br/>    // Check if an instance already exists<br/>    if (!DatabaseConnection.instance) {<br/>      // If not, create a new instance<br/>      DatabaseConnection.instance = new DatabaseConnection();<br/>    }<br/>    // Return the instance<br/>    return DatabaseConnection.instance;<br/>  }<br/>}<br/><br/></span></pre><p id="c973" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要使用该类，其他代码将调用getInstance()方法来获取DatabaseConnection对象的单个实例。然后，可以使用该实例对数据库执行操作，例如执行查询或关闭连接。</p><p id="c72b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在JavaScript中使用单例模式的优点包括:</p><ul class=""><li id="19fe" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mi mj mk ml bi translated">它确保只创建一个对象实例，这在只有一个对象实例很重要的情况下很有用，例如管理数据库连接或处理用户身份验证。</li><li id="d182" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">它提供了对对象的单个实例的全局访问点，允许其他代码轻松访问和使用该对象。</li><li id="aa64" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">通过允许代码的不同部分共享和重用对象的单个实例，它可以帮助提高应用程序的性能。</li><li id="7333" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">通过集中管理对象的单个实例，它有助于降低应用程序的复杂性。</li></ul><p id="15a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，单例模式也被认为是一种反模式，也就是说，如果有其他选择，就不应该实现它。以下是一些缺点:</p><ul class=""><li id="d8e3" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mi mj mk ml bi translated">它会使应用程序更难测试，因为对对象的单个实例的全局访问使得用mock或stub替换对象以进行测试变得困难。</li><li id="0120" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">这会使应用程序更难维护，因为对对象的单个实例的全局访问意味着对对象的更改可能会影响代码的其他部分。</li><li id="763b" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">这会降低应用程序的灵活性，因为对象的单个实例是在应用程序初始化时创建的，在运行时不容易更改或替换。</li><li id="074c" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">这会降低应用程序的模块化程度，因为对象的单个实例与代码的其余部分紧密耦合，不能在其他应用程序中轻松重用。</li></ul><p id="cc95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，JavaScript中有几个单一模式的常见用例，包括:</p><ul class=""><li id="f126" class="md me iq jp b jq jr ju jv jy mf kc mg kg mh kk mi mj mk ml bi translated">管理数据库连接:Singleton模式可用于确保只创建数据库连接的一个实例，提供对该连接的全局访问点。这对于避免创建到同一个数据库的多个连接的开销，以及使代码的不同部分容易访问数据库是很有用的。</li><li id="e657" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">处理用户身份验证:Singleton模式可用于确保只创建一个用户身份验证管理器的实例，提供对该管理器的全局访问点。这有助于避免创建多个身份验证管理器的开销，并使代码的不同部分易于对用户进行身份验证。</li><li id="29c8" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">缓存数据:Singleton模式可用于确保只创建一个数据缓存实例，提供对该缓存的全局访问点。这有助于避免创建多个数据缓存的开销，并使代码的不同部分易于访问缓存的数据。</li><li id="5a69" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">管理应用程序设置:Singleton模式可用于确保只创建应用程序设置管理器的一个实例，提供对该管理器的全局访问点。这有助于避免创建多个设置管理器的开销，并使代码的不同部分易于访问和更新应用程序设置。</li><li id="9df3" class="md me iq jp b jq mm ju mn jy mo kc mp kg mq kk mi mj mk ml bi translated">实现记录器:Singleton模式可用于确保只创建一个记录器实例，提供对该记录器的全局访问点。这有助于避免创建多个记录器的开销，并使代码的不同部分易于记录消息和事件。</li></ul><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/5c7fdb823e2c7f4190f716ff6bed224c.png" data-original-src="https://miro.medium.com/v2/resize:fit:304/format:webp/1*M96Lw3t2ZV4F3S-tD-N27Q.png"/></div></figure><p id="fd55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请继续关注我，因为我将在接下来的文章中发布更多关于JavaScript设计模式的内容。这里是我将要介绍的JavaScript 中所有<a class="ae ms" href="https://pandaquests.medium.com/overview-of-design-patterns-in-javascript-27d14530397a" rel="noopener">设计模式的概述。</a></p><p id="c350" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你有什么问题吗？你以前用过单例模式吗？用例是什么，为什么你选择了单例模式而不是另一个解决方案？让我知道并在下面评论。</p><p id="f5ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mt">更多内容请看</em><a class="ae ms" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mt">plain English . io</em></strong></a><em class="mt">。报名参加我们的</em> <a class="ae ms" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mt">免费周报</em> </strong> </a> <em class="mt">。关注我们关于</em><a class="ae ms" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mt">Twitter</em></strong></a><a class="ae ms" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mt">LinkedIn</em></strong></a><em class="mt"/><a class="ae ms" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mt">YouTube</em></strong></a><em class="mt"/><a class="ae ms" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mt">不和</em> </strong> </a> <strong class="jp ir"> <em class="mt">。</em>T49】</strong></p><p id="81d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mt">对缩放您的软件启动感兴趣</em> </strong> <em class="mt">？检查</em> <a class="ae ms" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mt">电路</em> </strong> </a> <em class="mt">。</em></p></div></div>    
</body>
</html>