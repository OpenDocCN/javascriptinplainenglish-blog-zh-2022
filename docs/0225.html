<html>
<head>
<title>Add a Map To Your React App — For Free</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">免费向React应用程序添加地图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-a-map-to-your-react-app-for-free-eaa1599f492?source=collection_archive---------9-----------------------#2022-01-13">https://javascript.plainenglish.io/adding-a-map-to-your-react-app-for-free-eaa1599f492?source=collection_archive---------9-----------------------#2022-01-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c7ce" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用开源React和OpenLayers制图组件工具包ol-kit免费向React应用程序添加地图。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/151bc5eda44750a9ac3cfac5ddb62668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IpDpGwFqjX3Bju1G.png"/></div></div></figure><p id="b99a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lk" href="https://ol-kit.com/" rel="noopener ugc nofollow" target="_blank"> ol-kit </a>是一个复杂度最低的开源<a class="ae lk" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>和<a class="ae lk" href="https://openlayers.org/" rel="noopener ugc nofollow" target="_blank"> OpenLayers </a>映射组件工具包。它达到了组件库的完美三结合——简单、好、便宜。大多数只能达到这三种品质中的两种，但ol-kit通过以下方式实现这一点:</p><ol class=""><li id="8e5f" class="ll lm in kq b kr ks ku kv kx ln lb lo lf lp lj lq lr ls lt bi translated">将OpenLayers抽象成熟悉的React组件和实用函数(简单)</li><li id="5e0e" class="ll lm in kq b kr lu ku lv kx lw lb lx lf ly lj lq lr ls lt bi translated">提供通用、灵活且经过测试的包装(良好)，以及</li><li id="c34b" class="ll lm in kq b kr lu ku lv kx lw lb lx lf ly lj lq lr ls lt bi translated">开源(免费=越便宜越好)。</li></ol><h1 id="0655" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">添加到现有应用</h1><p id="8345" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">将<code class="fe mw mx my mz b">@bayer/ol-kit</code>及其对等依赖项添加到您的应用程序中。</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="0adc" class="ne ma in mz b gy nf ng l nh ni">npm i @bayer/ol-kit ol react react-dom styled-components @material-ui/core @material-ui/icons @material-ui/styles --save</span></pre><p id="7618" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后使用<code class="fe mw mx my mz b">Map</code>组件呈现一个简单的地图。</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="ff19" class="ne ma in mz b gy nf ng l nh ni">import React from 'react'<br/>import { Map } from '@bayer/ol-kit'<br/><br/>const myComponent = () =&gt; &lt;Map /&gt;<br/>export default myComponent</span></pre><p id="dada" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">就这么简单！</p><h1 id="0d43" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">引导新应用</h1><p id="f13c" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">基于<a class="ae lk" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank">create-react-app</a>bootstrapper，ol-kit提供了一行bootstrap命令(运行需要一两分钟)。</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="a848" class="ne ma in mz b gy nf ng l nh ni">npx @bayer/ol-kit create-map</span></pre><p id="c115" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你需要在你的机器上安装<a class="ae lk" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>来让它工作。</p><h1 id="59ff" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">加载地图数据</h1><p id="107e" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">如果地图上没有数据，看地图就没什么用了。ol-kit附带一个数据加载器，可以处理大多数不同类型的数据:GeoJSON、KML、shapefiles、矢量切片等。</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="462e" class="ne ma in mz b gy nf ng l nh ni">import React from 'react'<br/>import { Map, loadDataLayer } from '@bayer/ol-kit'<br/><br/>const App = () =&gt; {<br/>  const onMapInit = async map =&gt; {<br/>    // nice to have map set on the window while debugging<br/>    window.map = map<br/>    // find a geojson or kml dataset (url or file) to load on the map<br/>    const data = {<br/>      url: 'https://data.nasa.gov/api/geospatial/7zbq-j77a?method=export&amp;format=KML',<br/>      id: 'world_country_boundaries',<br/>      name: 'World Country Boundaries'<br/>    }<br/>    const dataLayer = await loadDataLayer(map, data.url)<br/>    <br/>    // set the title and id on the layer to show in LayerPanel<br/>    dataLayer.set('title', data.name)<br/>    dataLayer.set('id', data.name)<br/>  }<br/><br/>  return &lt;Map onMapInit={this.onMapInit} fullScreen /&gt;<br/>}<br/>export default App</span></pre><p id="7226" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">注意<code class="fe mw mx my mz b">onMapInit</code>的回调。这是一个异步回调，将阻止地图(和其他子地图)渲染，直到承诺得到解决，以帮助防止其他可能依赖于该数据的组件使应用程序崩溃。</p><p id="6e82" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你想在地图上显示一些独特的数据，查看这些<a class="ae lk" href="https://github.com/geocatz/open-geodata" rel="noopener ugc nofollow" target="_blank">免费维护的数据源</a>。</p><h1 id="85ac" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">添加地图控件</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/64b807d0bf70631ce53e4ca8419e6c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*0kjOAOM-Vj077U7csBNZMQ.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">Default basemap controls</figcaption></figure><p id="c4fd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有几个UI组件可以为您的地图添加工具，其中最基本的是地图控件。通过在<code class="fe mw mx my mz b">Map</code>中添加<code class="fe mw mx my mz b">&lt;Controls /&gt;</code>组件将它们包含在您的地图中。实际的OpenLayers map实例通过上下文传递给<code class="fe mw mx my mz b">Map</code>的所有子节点，因此不需要手动传递。</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="9130" class="ne ma in mz b gy nf ng l nh ni">import React from 'react'<br/>import { Map, Controls } from '@bayer/ol-kit'</span><span id="1f8d" class="ne ma in mz b gy no ng l nh ni">const App = () =&gt; {<br/>  return (<br/>    &lt;Map&gt;<br/>      &lt;Controls /&gt;<br/>    &lt;/Map&gt;<br/>  )<br/>}<br/>export default App</span></pre><p id="2b78" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">默认的OpenLayers缩放控件要难看得多，用处也小得多。</p><h1 id="63f5" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">更改底图</h1><p id="d89d" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">为此，您有两个选择:1 .预构建的底图切换器，或2。效用函数。首先，组件选项:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi np"><img src="../Images/dacc4a577c98a55f62e6d250a255f99d.png" data-original-src="https://miro.medium.com/v2/resize:fit:220/format:webp/1*-tFmQ52Opdn2OItrZoss9g.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">Basemap options included in the BasemapContainer</figcaption></figure><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="9f74" class="ne ma in mz b gy nf ng l nh ni">import React from 'react'<br/>import { Map, BasemapContainer } from '@bayer/ol-kit'</span><span id="713a" class="ne ma in mz b gy no ng l nh ni">const App = () =&gt; {<br/>  return (<br/>    &lt;Map&gt;<br/>      &lt;BasemapContainer /&gt;<br/>    &lt;/Map&gt;<br/>  )<br/>}<br/>export default App</span></pre><p id="ce3d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">或者，使用该实用程序:</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="49d4" class="ne ma in mz b gy nf ng l nh ni">import React from 'react'<br/>import { Map, <!-- -->loadBasemapLayer <!-- -->} from '@bayer/ol-kit'<br/><br/>const App = () =&gt; {<br/>  const onMapInit = async map =&gt; {<br/>    <!-- -->loadBasemapLayer(map, stamenTonerLite')<br/>  }<br/>  return &lt;Map onMapInit={this.onMapInit} fullScreen /&gt;<br/>}<br/>export default App</span></pre><h1 id="e14d" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">启用弹出窗口</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/3ccad48f2f1bb0047c3cca68a8fe2d20.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*NQSooKAaZmNGCrEUhYN1rg.png"/></div></figure><p id="00b6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">弹出窗口是一种简单的方法，可以根据每个功能提供上下文信息。ol-kit允许您使用默认的<code class="fe mw mx my mz b">Popup</code>(如上所示)显示特性的所有信息，以及可定制的操作，或者您可以使用<code class="fe mw mx my mz b">PopupBase</code>构建自己的完全定制的弹出窗口。</p><p id="5e23" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">以下是在地图上包含弹出窗口的方法:</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="fe65" class="ne ma in mz b gy nf ng l nh ni">import React from 'react'<br/>import { Map, Popup } from '@bayer/ol-kit'<br/><br/>const App = () =&gt; {<br/>  return (<br/>    &lt;Map&gt;<br/>      &lt;Popup /&gt;<br/>    &lt;/Map&gt;<br/>  )<br/>}<br/>export default App</span></pre><h1 id="6442" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">外卖食品</h1><p id="0b02" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">ol-kit提供了许多可定制的组件和工具，同时保持了即插即用的易用性。这简要地涉及了它们的一些即插即用组件；请随时订阅以了解更复杂实现的最新信息。</p><p id="961c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是演示应用程序的代码，包括<code class="fe mw mx my mz b">Map</code>、<code class="fe mw mx my mz b">Popup</code>、<code class="fe mw mx my mz b">BasemapContainer</code>、<code class="fe mw mx my mz b">Controls</code>和一些更酷的东西。</p><pre class="kd ke kf kg gt na mz nb nc aw nd bi"><span id="5e44" class="ne ma in mz b gy nf ng l nh ni">import React from 'react'<br/>import {<br/>  Map,<br/>  BasemapContainer,<br/>  ContextMenu,<br/>  Controls,<br/>  LayerPanel,<br/>  Popup,<br/>  loadDataLayer<br/>} from '@bayer/ol-kit'<br/><br/>const App = () =&gt; {<br/>  const onMapInit = async map =&gt; {<br/>    console.log('we got a map!', map)<br/>    // nice to have map set on the window while debugging<br/>    window.map = map<br/><br/>    // find a geojson or kml dataset (url or file) to load on the map<br/>    const data = 'https://data.nasa.gov/api/geospatial/7zbq-j77a?method=export&amp;format=KML'<br/>    const dataLayer = await loadDataLayer(map, data)<br/>    // set the title on the layer to show in LayerPanel<br/>    dataLayer.set('title', 'NASA Data')<br/>  }<br/><br/>  return (<br/>    &lt;Map onMapInit={this.onMapInit} fullScreen&gt;<br/>      &lt;BasemapContainer /&gt;<br/>      &lt;ContextMenu /&gt;<br/>      &lt;Controls /&gt;<br/>      &lt;LayerPanel /&gt;<br/>      &lt;Popup /&gt;<br/>    &lt;/Map&gt;<br/>  )<br/>}<br/><br/>export default App</span></pre><p id="3a29" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">同样，查看<a class="ae lk" href="https://ol-kit.com/docs.html" rel="noopener ugc nofollow" target="_blank"> ol-kit文档</a>了解更多信息——如有任何问题，请随时联系我们。</p><p id="459a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢您的阅读。</p><p id="d0d0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nr">更多内容看</em> <a class="ae lk" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">说白了。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">免费周报</em> </strong> </a> <em class="nr">。在我们的</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nr">社区不和谐</em> </strong> </a> <em class="nr">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>