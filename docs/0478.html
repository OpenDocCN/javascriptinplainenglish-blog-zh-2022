<html>
<head>
<title>Create GraphQL Mutations in React App and Use Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React App中创建GraphQL突变并使用它们</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-graphql-mutations-in-react-app-and-use-them-1eeb89545033?source=collection_archive---------12-----------------------#2022-01-27">https://javascript.plainenglish.io/create-graphql-mutations-in-react-app-and-use-them-1eeb89545033?source=collection_archive---------12-----------------------#2022-01-27</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="5233" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">在我们的React应用程序中使用GraphQL将数据保存到数据库！</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/dc12e20217f11df1a14da56e30ed06a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xmlYdtuwlDXyjlb4"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@nci?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">National Cancer Institute</a> on <a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6ec9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">GraphQL用于设计和使用API。它还通过最大限度地减少必须通过网络传输的数据来提高应用程序在恶劣条件下的性能。在服务器端，有关于要发送给客户机的数据(模式、变异、查询)的信息。必要的添加、删除和更新操作通过变异结构和解析函数来执行。</p><p id="4e3c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">GraphQL服务器主要处理发送到服务器的GraphQL查询。请求与查询参数一起发送到服务器。</p><p id="76d9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在本文中，我将使用常用的Apollo客户机结构。</p></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><p id="d51e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在以简单的方式展示了查询和变异的用法之后，让我们继续我们的主题。</p><p id="8324" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">用于查询:</strong></p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="5339" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">突变:</strong></p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="ef11" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们需要在模式中定义查询和变化:</p><pre class="kh ki kj kk gu mc md me mf aw mg bi"><span id="3898" class="mh mi ir md b gz mj mk l ml mm">module.exports = new GraphQLSchema({</span><span id="6028" class="mh mi ir md b gz mn mk l ml mm">   query: QueryType,</span><span id="b633" class="mh mi ir md b gz mn mk l ml mm">   mutation: mutations</span><span id="21d9" class="mh mi ir md b gz mn mk l ml mm">});</span></pre></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><h2 id="934c" class="mh mi ir bd mo mp mq dn mr ms mt dp mu lg mv mw mx lk my mz na lo nb nc nd ne bi translated">在React中使用GraphQL突变</h2><p id="a9ba" class="pw-post-body-paragraph kx ky ir kz b la nf js lc ld ng jv lf lg nh li lj lk ni lm ln lo nj lq lr ls ik bi translated">首先，从进口说起。</p><pre class="kh ki kj kk gu mc md me mf aw mg bi"><span id="ced6" class="mh mi ir md b gz mj mk l ml mm">import React, { Component } from 'react';</span><span id="0273" class="mh mi ir md b gz mn mk l ml mm">import gql from 'graphql-tag';</span><span id="2039" class="mh mi ir md b gz mn mk l ml mm">import { graphql } from 'react-apollo';</span></pre><p id="d043" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe nk nl nm md b">graphql-tag</code>:将GraphQL查询字符串解析成标准GraphQL的JavaScript模板文字标签。这是将查询传递给<a class="ae kw" href="https://github.com/apollographql/apollo-client" rel="noopener ugc nofollow" target="_blank"> Apollo客户端</a>的推荐方法。</p><p id="d23d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><a class="ae kw" href="https://www.npmjs.com/package/graphql-tag" rel="noopener ugc nofollow" target="_blank">欲了解更多信息，请点击此处。</a></p><p id="51cb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe nk nl nm md b">react-apollo</code>:这是一个库，它有许多用于集成GraphQL和react的助手。React Apollo允许您从GraphQL服务器获取数据，并使用React框架将数据用于构建复杂的反应式ui</p><p id="19bc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><a class="ae kw" href="https://www.npmjs.com/package/react-apollo" rel="noopener ugc nofollow" target="_blank">欲了解更多信息，请点击此处。</a></p><p id="dcee" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我将使用基于类的组件，因为我将使类具有我将使用的多个函数。</p><p id="f5d1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">首先创建一个构造函数:</p><pre class="kh ki kj kk gu mc md me mf aw mg bi"><span id="fe27" class="mh mi ir md b gz mj mk l ml mm">constructor(props) {</span><span id="1bec" class="mh mi ir md b gz mn mk l ml mm">   super(props);</span><span id="d1ff" class="mh mi ir md b gz mn mk l ml mm">   this.state = { name: '' }</span><span id="d512" class="mh mi ir md b gz mn mk l ml mm">}</span></pre><p id="e3cb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">定义外部来源的突变。</p><pre class="kh ki kj kk gu mc md me mf aw mg bi"><span id="ad34" class="mh mi ir md b gz mj mk l ml mm">const mutation = gql`</span><span id="74b1" class="mh mi ir md b gz mn mk l ml mm">   mutation AddPerson($name: String){</span><span id="f71c" class="mh mi ir md b gz mn mk l ml mm">      addPerson(name: $name) {</span><span id="17e1" class="mh mi ir md b gz mn mk l ml mm">         name</span><span id="0013" class="mh mi ir md b gz mn mk l ml mm">   }<br/>}`;</span></pre><p id="344f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们将无法使用props传输数据，因为我们已经在外部定义了突变。这就是为什么我们要使用查询参数。将GraphQL用于查询参数:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj nn"><img src="../Images/b197b197535be35bfdb945256aea4162.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*KfdVN1MeCZi-4o_JOuuEhg.png"/></div></figure><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ma mb l"/></div></figure><p id="e22f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果你尝试<code class="fe nk nl nm md b">console.log(this.props); </code>，你会看到变异。</p><p id="a1a9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果您用<code class="fe nk nl nm md b">onSubmit()</code>从<code class="fe nk nl nm md b">mutate</code>发送姓名状态，您可以看到您添加到数据库中的一个人。</p><p id="2ad6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">谢谢你。</p></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><div class="kh ki kj kk gu no"><a href="https://bestte.medium.com/membership" rel="noopener follow" target="_blank"><div class="np ab fp"><div class="nq ab nr cl cj ns"><h2 class="bd is gz z fq nt fs ft nu fv fx iq bi translated">通过我的推荐链接加入Medium—Beste</h2><div class="nv l"><h3 class="bd b gz z fq nt fs ft nu fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nw l"><p class="bd b dl z fq nt fs ft nu fv fx dk translated">bestte.medium.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc kq no"/></div></div></a></div><div class="od oe gq gs of no"><a rel="noopener  ugc nofollow" target="_blank" href="/5-top-rated-q-a-for-angular-on-stack-overflow-bed610bf1c50"><div class="np ab fp"><div class="nq ab nr cl cj ns"><h2 class="bd is gz z fq nt fs ft nu fv fx iq bi translated">5堆栈上角溢出的顶级问答</h2><div class="nv l"><h3 class="bd b gz z fq nt fs ft nu fv fx dk translated">“这个项目从堆栈溢出开始”是开发人员如何开始她的故事。</h3></div><div class="nw l"><p class="bd b dl z fq nt fs ft nu fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="og l nz oa ob nx oc kq no"/></div></div></a></div><div class="od oe gq gs of no"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-work-with-the-angular-nebular-ui-library-and-use-a-simple-splash-screen-3dd0d1790478"><div class="np ab fp"><div class="nq ab nr cl cj ns"><h2 class="bd is gz z fq nt fs ft nu fv fx iq bi translated">如何使用Angular Nebular UI库并使用简单的闪屏</h2><div class="nv l"><h3 class="bd b gz z fq nt fs ft nu fv fx dk translated">闪屏在某些情况下是必要的，所以我想用一种非常简单的方式来展示它，我将谈谈…</h3></div><div class="nw l"><p class="bd b dl z fq nt fs ft nu fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="oh l nz oa ob nx oc kq no"/></div></div></a></div><div class="od oe gq gs of no"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-sass-and-enjoy-css-with-dynamic-structure-900ea2adddf7"><div class="np ab fp"><div class="nq ab nr cl cj ns"><h2 class="bd is gz z fq nt fs ft nu fv fx iq bi translated">如何使用Sass，享受动态结构的CSS</h2><div class="nv l"><h3 class="bd b gz z fq nt fs ft nu fv fx dk translated">由于CSS是一个静态结构，我们必须不断重复代码。我们给CSS代码带来了动态结构…</h3></div><div class="nw l"><p class="bd b dl z fq nt fs ft nu fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="oi l nz oa ob nx oc kq no"/></div></div></a></div><div class="od oe gq gs of no"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-the-composition-api-to-get-data-from-service-with-vue-js-4da1eca19ad6"><div class="np ab fp"><div class="nq ab nr cl cj ns"><h2 class="bd is gz z fq nt fs ft nu fv fx iq bi translated">如何使用组合API通过Vue.js从服务中获取数据</h2><div class="nv l"><h3 class="bd b gz z fq nt fs ft nu fv fx dk translated">通过使用组合API而不是选项API，可以使服务结构更加可用。</h3></div><div class="nw l"><p class="bd b dl z fq nt fs ft nu fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="oj l nz oa ob nx oc kq no"/></div></div></a></div><p id="74aa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="ok">更多内容请看</em><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="ok">plain English . io</em></strong></a><em class="ok">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="ok">免费周报</em> </strong> </a> <em class="ok">。在我们的</em> <a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="ok">社区</em> </strong> </a> <em class="ok">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>