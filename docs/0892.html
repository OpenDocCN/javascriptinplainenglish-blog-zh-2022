<html>
<head>
<title>6 Scenarios Where “this” Has Different Values in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中“this”有不同值的6种情况</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6%EF%B8%8F%E2%83%A3-scenarios-where-this-can-have-different-values-in-javascript-d9e15ef2a498?source=collection_archive---------4-----------------------#2022-02-19">https://javascript.plainenglish.io/6%EF%B8%8F%E2%83%A3-scenarios-where-this-can-have-different-values-in-javascript-d9e15ef2a498?source=collection_archive---------4-----------------------#2022-02-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8c2b4a0b5aabe8feba8b672593d7a16f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l2P8BY_Glf0B_YcmvACEYw.jpeg"/></div></div></figure></div><div class="ab cl jv jw hr jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="ig ih ii ij ik"><p id="beb4" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><code class="fe la lb lc ld b">this</code>是JavaScript中的一个关键字，它指向一个对象，其值取决于在哪里以及如何使用它。我们将讨论六种场景，其中<code class="fe la lb lc ld b">this</code>可以有不同的值。</p><h2 id="3f1b" class="le lf in bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">1.隐式结合</h2><p id="7a8f" class="pw-post-body-paragraph kc kd in ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ig bi translated">当一个方法(包含在一个对象中的函数)在一个对象上被调用时，该对象被隐式地用作<code class="fe la lb lc ld b">this</code>的值，考虑下面的例子:</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="34d3" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">在第8行，我们正在调用对象obj上的<em class="mi"> foo()，该对象在函数内部被用作</em> <code class="fe la lb lc ld b"><em class="mi">this</em></code> <em class="mi">。</em></p><h2 id="2800" class="le lf in bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">2.显式绑定:call()，apply()，bind()</h2><p id="41c6" class="pw-post-body-paragraph kc kd in ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ig bi translated">在前一种情况下，调用函数的对象被隐式地用作<code class="fe la lb lc ld b">this</code>绑定，但是如果我们想要使用其他对象，这可以通过使用JavaScript中可用的两种方法<code class="fe la lb lc ld b"><em class="mi">call()</em></code>和<code class="fe la lb lc ld b"><em class="mi">apply()</em></code> <em class="mi">显式地声明哪个对象应该用于<code class="fe la lb lc ld b">this</code>绑定来实现。</em></p><p id="4c08" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">两种方法都将用于“this”的对象作为第一个参数，考虑下面的例子</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="f1e9" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><code class="fe la lb lc ld b"><em class="mi">obj</em></code>作为参数传递给<code class="fe la lb lc ld b"><em class="mi">call</em></code>和<code class="fe la lb lc ld b"><em class="mi">apply</em></code>方法，用作<code class="fe la lb lc ld b">this</code>的值。</p><p id="58d7" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><code class="fe la lb lc ld b"><em class="mi">call</em></code>和<code class="fe la lb lc ld b"><em class="mi">apply</em></code>的唯一区别是参数传递给函数的方式。</p><p id="77a1" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><strong class="ke io">硬装订</strong></p><p id="7b01" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">显式绑定的另一种变体称为<strong class="ke io">硬绑定</strong>，其中使用了另一种JavaScript <strong class="ke io"> </strong>方法<code class="fe la lb lc ld b"><em class="mi">bind()</em></code> <em class="mi">。与</em> <code class="fe la lb lc ld b"><em class="mi">call()</em></code> <em class="mi">和</em><code class="fe la lb lc ld b"><em class="mi">apply()</em></code><em class="mi"/><code class="fe la lb lc ld b"><em class="mi">bind()</em></code><em class="mi">不同的是，</em><em class="mi">并不立即调用函数，而是返回原函数的副本，该副本已经将</em> <code class="fe la lb lc ld b"><em class="mi">this</em></code> <em class="mi">绑定到传递的对象上。</em></p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="c2cd" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">当调用<code class="fe la lb lc ld b">foo.bind(obj)</code>时，它返回一个函数，该函数已经将<code class="fe la lb lc ld b">this</code>绑定到传递给bind()方法的对象。</p><h2 id="5487" class="le lf in bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">3.默认/全局绑定</h2><p id="96ef" class="pw-post-body-paragraph kc kd in ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ig bi translated">在上面的两个例子中，我们或者调用了一个对象上的方法，或者使用了一些其他的JavaScript方法，但是如果我们想简单地调用一个独立的函数，在这种情况下，全局对象被用作<code class="fe la lb lc ld b">this</code>绑定，如下面的代码所示</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="be92" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">同样，如果你在全局范围内使用<code class="fe la lb lc ld b">this</code>，它将指向全局对象，在浏览器的情况下是<code class="fe la lb lc ld b">window</code>。</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="7b61" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">在您的浏览器控制台中尝试上面显示的代码。</p><p id="80a6" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">但是，当与JavaScript '严格模式'一起使用时，函数内部的<code class="fe la lb lc ld b">this</code>将是<code class="fe la lb lc ld b">undefined</code>，它将不会指向全局对象。</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="94ae" class="le lf in bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">4.“新”绑定</h2><p id="7f51" class="pw-post-body-paragraph kc kd in ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ig bi translated">当用<code class="fe la lb lc ld b">new</code>关键字调用一个函数时，它被称为构造函数调用。在构造函数调用的情况下，会自动创建一个新对象并从构造函数返回，该对象用作该函数调用的<code class="fe la lb lc ld b">this</code>绑定，有点类似于下面的示例:</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="306a" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">用<code class="fe la lb lc ld b">new</code>关键字调用<code class="fe la lb lc ld b">foo()</code>时创建一个新对象，作为<code class="fe la lb lc ld b"><em class="mi">foo</em></code> <em class="mi">、</em>中<code class="fe la lb lc ld b">this</code>的值，从函数返回后赋给<em class="mi">栏</em>变量。</p><h2 id="d516" class="le lf in bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">5.(词法绑定)=&gt; { Arrow函数}</h2><p id="f800" class="pw-post-body-paragraph kc kd in ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ig bi translated">与普通函数不同，箭头函数不定义自己的<code class="fe la lb lc ld b">this</code>，封闭(词法或父)作用域的<code class="fe la lb lc ld b">this</code>的值被用作箭头函数内部的<code class="fe la lb lc ld b">this</code>绑定，即无论什么值用于封闭作用域的<code class="fe la lb lc ld b">this</code>绑定，都将被赋给箭头函数中的<code class="fe la lb lc ld b">this</code>。</p><p id="b746" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">例如，如果arrow函数是在全局作用域中定义的，那么全局作用域就是封闭作用域，因此<code class="fe la lb lc ld b">this</code>的值将是全局对象。</p><p id="e5ed" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">同样，如果arrow函数是在普通函数中定义的，那么普通函数的作用域就是封闭作用域。</p><p id="b09f" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">考虑下面的例子:</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="dac7" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><code class="fe la lb lc ld b"><em class="mi">b()</em></code> <em class="mi"> </em>的<code class="fe la lb lc ld b">this</code>值是全局对象，但是<code class="fe la lb lc ld b"><em class="mi">c()</em></code> <em class="mi"> </em>的<code class="fe la lb lc ld b">this</code>值是<em class="mi"> obj </em>因为隐式绑定。</p><h2 id="97d1" class="le lf in bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">6.HTML事件绑定</h2><p id="180c" class="pw-post-body-paragraph kc kd in ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ig bi translated">当一个函数被用作一个HTML元素的事件处理程序时，那么这个HTML元素被用作<code class="fe la lb lc ld b">this</code>的值，考虑下面的例子:</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="d8fb" class="le lf in bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">结论</h2><p id="e7c2" class="pw-post-body-paragraph kc kd in ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ig bi translated">我们做到了！在JavaScript中，<code class="fe la lb lc ld b">this</code>关键字可以指代不同事物的六个例子。我希望你已经发现这是有用的。如果有，一定要在评论里让我知道你的想法。</p><p id="d2da" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><em class="mi">更多内容尽在</em> <a class="ae mj" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mi">说白了. io </em> </strong> </a> <em class="mi">。报名参加我们的</em> <a class="ae mj" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mi">免费周报</em> </strong> </a> <em class="mi">。在我们的</em> <a class="ae mj" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mi">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="mi">。</em></p></div></div>    
</body>
</html>