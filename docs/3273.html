<html>
<head>
<title>How Redis Can Make Authentication 10x Easier For Your Users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rediså¦‚ä½•è®©ç”¨æˆ·çš„èº«ä»½éªŒè¯å˜å¾—ç®€å•10å€</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/how-redis-can-make-authentication-10x-easoer-for-your-users-cd8c0601d38?source=collection_archive---------1-----------------------#2022-08-15">https://javascript.plainenglish.io/how-redis-can-make-authentication-10x-easoer-for-your-users-cd8c0601d38?source=collection_archive---------1-----------------------#2022-08-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7f64c1651cf0fad0be1c6f3b684e6f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AFfYvLcvoft-HNdQYXliBg.jpeg"/></div></div></figure><p id="170f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‚¨æ˜¯ä¸€åå¼€å‘äººå‘˜ï¼Œå¯èƒ½å·²ç»ä¸ºä¸€äº›ç”¨æˆ·æ„å»ºäº†ä¸€äº›åº”ç”¨ç¨‹åºã€‚æ‚¨çš„ç”¨æˆ·éœ€è¦æ³¨å†Œæ‰èƒ½è®¿é—®æ‚¨çš„åº”ç”¨ç¨‹åºä¸Šçš„ä¸€äº›èµ„æºã€‚è¦å®Œæˆæ³¨å†Œï¼Œä»–ä»¬è¿˜å¿…é¡»éªŒè¯ä»–ä»¬çš„ç”µå­é‚®ä»¶ã€‚è™½ç„¶æœ‰äº›ç”¨æˆ·å®Œå…¨å¯ä»¥æ¥å—è¿™ä¸€é¢å¤–çš„æ­¥éª¤ï¼Œä½†å¤§å¤šæ•°äººå¹¶ä¸è§‰å¾—æ„‰å¿«ï¼Œå³ä½¿ä»–ä»¬çŸ¥é“ä»–ä»¬ä¸å¾—ä¸è¿™æ ·åšã€‚ä¸ºä»€ä¹ˆï¼Ÿå¤ªæ‰‹åŠ¨äº†ã€‚</p><p id="bc10" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ¥éªŒè¯ç”¨æˆ·çš„ç”µå­é‚®ä»¶ï¼Œè€Œä¸ä½¿å…¶è¿‡äºéœ²éª¨ï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿé‚£ä¹ˆï¼Œè®©æˆ‘å‘æ‚¨ä»‹ç»ä¸€ä¸‹Magic Linkè®¤è¯æ¨¡å‹ã€‚ä½ å¯èƒ½å·²ç»å¬è¯´è¿‡å®ƒï¼Œç”šè‡³ä»¥å‰åœ¨ä»€ä¹ˆåœ°æ–¹ç”¨è¿‡å®ƒã€‚æ³¨å†Œæ—¶ï¼Œä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹æ˜¯è¿™æ ·çš„:</p><ul class=""><li id="41d9" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">ä»–ä»¬è¾“å…¥è‡ªå·±çš„ç”µå­é‚®ä»¶åœ°å€</li><li id="ee63" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä¸€ä¸ªé“¾æ¥è¢«å‘é€åˆ°è¯¥ç”µå­é‚®ä»¶åœ°å€</li><li id="c7a5" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä»–ä»¬è¿›å…¥æ”¶ä»¶ç®±å¹¶æ‰“å¼€é“¾æ¥(è¿™æ˜¯éªŒè¯è¢«å·§å¦™åº”ç”¨çš„åœ°æ–¹)</li><li id="2327" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä»–ä»¬å°†è¢«é‡å®šå‘åˆ°ä¸€ä¸ªæ³¨å†Œé¡µé¢ï¼Œåœ¨è¿™é‡Œä»–ä»¬å°†è¾“å…¥è‡ªå·±çš„å…¶ä»–è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚å§“åã€å¯†ç ã€ç”µè¯ç­‰ã€‚</li><li id="5398" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä»–ä»¬æ³¨å†Œå¹¶ç«‹å³è¢«ç™»å½•</li></ul><p id="816e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¾ˆç®€å•ï¼æ²¡æœ‰äººéœ€è¦çŸ¥é“ä»–ä»¬å¿…é¡»éªŒè¯ä»–ä»¬çš„ç”µå­é‚®ä»¶â€”â€”ä»–ä»¬åªæ˜¯åœ¨æ²¡æœ‰æ³¨æ„åˆ°çš„æƒ…å†µä¸‹è¿™ä¹ˆåšäº†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé­”é“¾æ¨¡å‹åœ¨ç°ä»£è®¤è¯ç³»ç»Ÿä¸­è¢«ç›´è§‚åœ°æ¥å—çš„åŸå› ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¹•åå‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ã€‚è¿™å°±æ˜¯æœ¬æ•™ç¨‹çš„é‡ç‚¹ã€‚</p><p id="9dfc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥åœ¨åç«¯å®ç°è¿™ä¸ªæ¦‚å¿µï¼Œé€‰æ‹©æƒåœ¨ä½ ã€‚ä½†æ˜¯ä¸ä¸€å®šè¦é€‰æ‹©æ•ˆç‡è¾ƒä½çš„ã€‚æƒ³æƒ³å§ã€‚å¦‚æœä½ æƒ³ç”¨Expresså®ç°è¿™ä¸ªï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿä¹Ÿè®¸æ‚¨ä¼šåˆ›å»ºä¸€ä¸ªç«¯ç‚¹(ç«¯ç‚¹1 ),å®ç°ä»¥ä¸‹ç®—æ³•:</p><ol class=""><li id="7c71" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks lh kz la lb bi translated">ä»è¯·æ±‚ä¸»ä½“æ”¶é›†ç”µå­é‚®ä»¶</li><li id="3a1e" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">ä½¿ç”¨Node.jså†…ç½®åŠ å¯†åŒ…ç”Ÿæˆä»¤ç‰Œ</li><li id="dfc4" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">å°†ç”µå­é‚®ä»¶å’Œä»¤ç‰Œä»¥åŠè¿‡æœŸæ—¶é—´å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ä¸€ä¸ªå•ç‹¬çš„(æ¥è‡ªæ‚¨çš„ç”¨æˆ·)è¡¨ä¸­</li><li id="c182" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">å°†ä»¤ç‰Œæ³¨å…¥ä¸€ä¸ªURL(åŒ¹é…å‰ç«¯çš„ä¸€ä¸ªé¡µé¢),å¹¶å°†å…¶å‘é€åˆ°ç»™å®šçš„ç”µå­é‚®ä»¶åœ°å€</li></ol><p id="9c48" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åï¼Œå¦ä¸€ä¸ªç«¯ç‚¹(ç«¯ç‚¹2ï¼Œé€šå¸¸æ˜¯æ³¨å†Œè·¯ç”±)æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><ol class=""><li id="5614" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks lh kz la lb bi translated">æ£€æŸ¥è¯·æ±‚å¯¹è±¡ä¸­æ˜¯å¦æä¾›äº†ä»¤ç‰Œ</li><li id="4ad1" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">æ”¶é›†ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ç”µå­é‚®ä»¶åœ°å€</li><li id="f3a8" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">å°è¯•ä»æ•°æ®åº“çš„â€œç‰¹æ®Šâ€è¡¨ä¸­æå–å¸¦æœ‰ç»™å®šæ ‡è®°çš„è®°å½•</li><li id="9228" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">å¦‚æœè®°å½•ä¸å­˜åœ¨ï¼Œè¿”å›ä¸€ä¸ªç¦æ­¢çš„é”™è¯¯</li><li id="ec61" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">å¦‚æœè®°å½•å­˜åœ¨ï¼Œä½†è¿‡æœŸæ—¶é—´å·²åˆ°ï¼Œåˆ™è¿”å›ä¸€ä¸ªé”™è¯¯è¯·æ±‚é”™è¯¯</li><li id="2a15" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks lh kz la lb bi translated">å¦‚æœè®°å½•å­˜åœ¨å¹¶ä¸”åˆ°æœŸæ—¶é—´ä»ç„¶æœ‰æ•ˆï¼Œåˆ™ä½¿ç”¨ç»™å®šçš„è¯¦ç»†ä¿¡æ¯åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·</li></ol><p id="00ea" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹è¿™ç§æ–¹æ³•ã€‚ä½ è§‰å¾—æœ‰æ•ˆå—ï¼Ÿå—¯ï¼Œé™¤äº†ç«¯ç‚¹1çš„ç¬¬3æ­¥ï¼Œä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆç†æƒ³ã€‚æˆ‘è¿™ä¹ˆæƒ³çš„åŸå› å¦‚ä¸‹:</p><ul class=""><li id="0bce" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">å°†ä»¤ç‰Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå®ƒåªæ˜¯åˆæ­¥æ•°æ®ï¼Œä»¥åå°†å˜å¾—æ— ç”¨ã€‚</li><li id="e07f" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä½ çš„æ•°æ®åº“ä¼šè¢«ç˜¾å›å­çš„æ•°æ®å¡æ»¡ã€‚æ‚¨å¯èƒ½ä¼šäº‰è¾©è¯´ï¼Œæ‚¨å¯ä»¥åº”ç”¨endpoint 2ä¸­çš„ç¬¬7æ­¥æ¥åˆ é™¤è®°å½•ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œä½¿ç”¨æ•°æ®åº“æ¥åˆ é™¤è®°å½•æ•ˆç‡è¾ƒä½ï¼Œè€Œä¸”å¯¹ç”Ÿäº§æ¥è¯´ä¹Ÿä¸ç†æƒ³ã€‚æˆ‘ç›¸ä¿¡ä½ èƒ½æƒ³åˆ°è¿™ç§æ–¹æ³•çš„å…¶ä»–ç¼ºç‚¹ã€‚</li></ul><p id="d31e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨JWTã€‚ä½¿ç”¨JWTå°†å¤„ç†ç«¯ç‚¹1çš„æ­¥éª¤2å’Œ3ã€‚ç„¶åï¼Œç«¯ç‚¹2çš„æ­¥éª¤3å°†é€‚åˆäºç”¨JWTè€Œä¸æ˜¯æ•°æ®åº“æ¥éªŒè¯ä»¤ç‰Œã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™å¹¶ä¸æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚åŸå› æ˜¯ï¼Œå¯¹äºè¿™ä¸ªç®€å•çš„é—®é¢˜ï¼Œä½¿ç”¨JWTæ˜¯å¤šä½™çš„ã€‚</p><p id="f377" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨RedisJSONã€‚</p><p id="a12a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">RedisJSONæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„NoSQLæ–‡æ¡£å­˜å‚¨åº“ï¼Œå®ƒæä¾›æœ¬æœºAPIæ¥æ¥æ”¶ã€ç´¢å¼•ã€æŸ¥è¯¢å’Œè¿è¡ŒJSONæ–‡æ¡£çš„å…¨æ–‡æœç´¢ï¼Œæ—¢å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸ºäº‘ä¸­çš„æ‰˜ç®¡æœåŠ¡ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨RedisJSONå†…å­˜[é”®-å€¼]æ•°æ®ç»“æ„å­˜å‚¨ä½œä¸ºæ•°æ®åº“å’Œç¼“å­˜ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œäº†è§£æ›´å¤šä¿¡æ¯ã€‚è®©æˆ‘å‘æ‚¨å±•ç¤º<a class="ae li" href="https://www.linkedin.com/company/redisinc/" rel="noopener ugc nofollow" target="_blank"> Redis </a>å¦‚ä½•æ ¹é™¤ç«¯ç‚¹1çš„æ­¥éª¤3çš„ä½æ•ˆã€‚</p><h1 id="c1e7" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">è¯¥é¡¹ç›®</h1><p id="8efa" class="pw-post-body-paragraph jv jw in jx b jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">å¯¹äºæœ¬æ•™ç¨‹ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ•´ä¸ªã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„Expressåº”ç”¨ç¨‹åºï¼Œå®ƒå…¬å¼€äº†ä¸‰ä¸ªRESTful APIç«¯ç‚¹â€” /usersã€/users/magic_linkå’Œ/users/signupã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œå…‹éš†æˆ–ä¸‹è½½æºä»£ç <a class="ae li" href="https://github.com/Glitzyken/magic-link-redis" rel="noopener ugc nofollow" target="_blank"/>ã€‚è¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£åŒ–çš„åº”ç”¨ç¨‹åºã€‚</p><h1 id="2994" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">å…ˆå†³æ¡ä»¶</h1><ul class=""><li id="0fce" class="kt ku in jx b jy mh kc mi kg mm kk mn ko mo ks ky kz la lb bi translated">æˆ‘å‡è®¾æ‚¨å·²ç»äº†è§£äº†å®¹å™¨çš„åŸºæœ¬çŸ¥è¯†ï¼Œå¹¶ä¸”åœ¨æ‚¨çš„æœºå™¨ä¸Šå®‰è£…äº†dockerã€‚å¦‚æœæ‚¨æ²¡æœ‰å®‰è£…å®ƒï¼Œè¯·éµå¾ªæœ¬æŒ‡å—å¹¶ä»æ”¯æŒçš„å¹³å°ä¸­é€‰æ‹©ä¸€ä¸ªã€‚ä½ æ ¹æœ¬ä¸çŸ¥é“å®¹å™¨çš„æ¦‚å¿µï¼Ÿæ²¡é—®é¢˜ã€‚åªè¦æŒ‰ç…§æ•™ç¨‹ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå¹¶ç¡®ä¿å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–å…³ç³»ã€‚</li><li id="92b1" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">åœ¨è¿™é‡Œå®‰è£…docker-compose<a class="ae li" href="https://docs.docker.com/compose/install/" rel="noopener ugc nofollow" target="_blank"/>ã€‚ä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤åœ¨Linuxä¸Šå®‰è£…è¦å®¹æ˜“å¾—å¤š:</li></ul><p id="f943" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">1.</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="98ca" class="my lk in mu b gy mz na l nb nc">sudo curl -L â€œhttps://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m)â€ -o /usr/local/bin/docker-compose</span></pre><p id="ecbf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">2.</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="97c4" class="my lk in mu b gy mz na l nb nc">sudo chmod +x /usr/local/bin/docker-compose</span></pre><ul class=""><li id="e904" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">å½“ç„¶ï¼Œè¿˜è¦ç¡®ä¿å®‰è£…äº†Node.jså’ŒNPMã€‚</li></ul><h1 id="0734" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">é¡¹ç›®ä¹‹æ—…</h1><p id="0ba5" class="pw-post-body-paragraph jv jw in jx b jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">è®©æˆ‘ç»™ä½ ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚åœ¨æ‚¨å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨ä¸­æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ã€‚è¯·æ³¨æ„ï¼Œé¡¹ç›®æ–‡ä»¶å¤¹åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å¤¹â€” starterå’Œfinalã€‚starteræ–‡ä»¶å¤¹åŒ…å«æˆ‘ä»¬éœ€è¦å¼€å§‹çš„ä¸å®Œæ•´çš„ä»£ç å’Œæ–‡ä»¶ã€‚æœ€åä¸€ä¸ªæ–‡ä»¶å¤¹åŒ…å«å®Œæ•´çš„æºä»£ç ã€‚</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/975aaacc47c79fe90b9ae53127aec58f.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*FDsHNI_WnMrDwz2y5fYcJw.jpeg"/></div></figure><p id="81be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæ‚¨å¸Œæœ›å¿«é€Ÿæµè§ˆä¸€ä¸‹æˆ‘ä»¬å°†è¦æ„å»ºçš„å†…å®¹ï¼Œé¦–å…ˆç¡®ä¿dockerå·²ç»å¯åŠ¨å¹¶æ­£åœ¨è¿è¡Œï¼Œç„¶åæ‰“å¼€æ‚¨çš„ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="9dca" class="my lk in mu b gy mz na l nb nc">â¯ cd final</span><span id="d951" class="my lk in mu b gy ne na l nb nc">final â¯ docker-compose up -d --build</span></pre><p id="7f73" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Docker-composeå°†æ‰§è¡Œdocker-compose.ymlæ–‡ä»¶ä¸­çš„æ‰€æœ‰æŒ‡ä»¤ã€‚å¦‚æœä½ å¯¹docker-composeä¸€æ— æ‰€çŸ¥ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒã€‚æ¯•ç«Ÿè¿™ä¸æ˜¯dockeræ•™ç¨‹ğŸ˜Šã€‚</p><p id="fe0e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¹‹åï¼Œä½ åº”è¯¥è®¿é—®<a class="ae li" href="http://localhost:4000/users" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/users</a>ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸è¿è¡Œï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹æˆåŠŸå“åº”:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/edaeea31efae9357be507baa174516fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*EpCHlmOC-IM-JDLdh9GnBA.jpeg"/></div></figure><p id="5e87" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¦åœæ­¢æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œè¯·æ‰§è¡Œ:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="486e" class="my lk in mu b gy mz na l nb nc">final â¯ docker-compose down</span></pre><h1 id="c0e7" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼</h1><p id="47fe" class="pw-post-body-paragraph jv jw in jx b jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">å°†ç›®å½•æ”¹å›èµ·å§‹æ–‡ä»¶å¤¹ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°åŒ…å«ä¸¤ä¸ªenvæ–‡ä»¶çš„envæ–‡ä»¶å¤¹â€”ä¸€ä¸ªç”¨äºMongoDBï¼Œå¦ä¸€ä¸ªç”¨äºappã€‚starteræ–‡ä»¶å¤¹ä¸­çš„å¦ä¸€ä¸ªæ–‡ä»¶å¤¹æ˜¯utilsæ–‡ä»¶å¤¹ï¼Œç›®å‰åªåŒ…å«é‚®ä»¶ç¨‹åºæ¨¡å—ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªæ¨¡å—å‘é€ç”µå­é‚®ä»¶ã€‚</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/89002fdcbd1544569862af89e46c422f.png" data-original-src="https://miro.medium.com/v2/resize:fit:346/format:webp/1*ZURIUjkCGaW9PkjCMwc4Mg.jpeg"/></div></figure><p id="98f9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å…¶ä½™çš„æ˜¯:</p><ul class=""><li id="724d" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">ã€‚dockerignoreæ–‡ä»¶</li><li id="5009" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">åŒ…å«ä¸€ç»„å¯æ‰§è¡ŒæŒ‡ä»¤çš„docker-compose.ymlæ–‡ä»¶ï¼Œä½¿ç”¨å®ƒä»¬å„è‡ªçš„å®¹å™¨åæ¥å¯åŠ¨mongodbã€rediså’Œæˆ‘ä»¬çš„magiclinkredisåº”ç”¨ç¨‹åºæ˜ åƒ</li><li id="cb5c" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä¸€ä¸ªdockeræ–‡ä»¶ï¼Œå…·æœ‰dockerè¯†åˆ«çš„è¯­æ³•ï¼Œç”¨äºåˆ›å»ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ˜ åƒ</li><li id="7893" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä¸€ä¸ªç©ºçš„index.mjsæ–‡ä»¶ï¼Œå®ƒå°†å¾ˆå¿«åŒ…å«æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé€»è¾‘</li><li id="9ba2" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">ä»¥åŠæè¿°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¾èµ–å…³ç³»çš„package.jsonæ–‡ä»¶</li></ul><p id="c498" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å¯åŠ¨æ‰€æœ‰çš„å®¹å™¨ã€‚è¿è¡Œ:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="9524" class="my lk in mu b gy mz na l nb nc">starter â¯ docker-compose up -d --build</span></pre><p id="f8c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™å°†æŸ¥çœ‹docker-composeæ–‡ä»¶ï¼Œå¹¶æŒ‰ç…§æ–‡ä»¶ä¸­çš„æè¿°é€è¡Œæ‰§è¡ŒæŒ‡ä»¤ã€‚å®ƒå°†å°è¯•æå–ä¸ºæ¯ä¸ªæœåŠ¡è§„å®šçš„å›¾åƒï¼Œå¹¶æ—‹è½¬å®ƒä»¬å„è‡ªçš„å®¹å™¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹RedisæœåŠ¡:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/623292650e9f31cbd9f54574bf4ef000.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*zmrFpkXHeyPWusLFYtgngw.jpeg"/></div></figure><p id="0300" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬å°†ä»docker hubä¸­è°ƒå‡ºæ ‡ç­¾ä¸º7.0.2-alpineçš„å®˜æ–¹Redis dockerå›¾ç‰‡ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¸ºç”¨è¿™ä¸ªæ˜ åƒåˆ›å»ºçš„å®¹å™¨æä¾›åç§°â€œredisâ€ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘ç”Ÿæ„å¤–æ—¶â€œé‡å¯â€å®¹å™¨ã€‚æœ€åï¼Œæˆ‘ä»¬æ‰§è¡Œå‘½ä»¤æ¥å¯åŠ¨RedisæœåŠ¡å™¨ã€‚ä½ å¯ä»¥åœ¨<a class="ae li" href="https://hub.docker.com/_/redis" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹Redis docker hubé¡µé¢</a>ä¸Šæ‰¾åˆ°è¿™ä¸ªé…ç½®å’Œæ›´å¤šä¿¡æ¯ã€‚</p><p id="8528" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å› ä¸ºæˆ‘ä»¬åº”ç”¨äº†ä¸€ä¸ª<a class="ae li" href="https://docs.docker.com/storage/bind-mounts/" rel="noopener ugc nofollow" target="_blank">ç»‘å®šæŒ‚è½½</a>ï¼Œæ¯å½“æˆ‘ä»¬åœ¨index.mjsæ–‡ä»¶ä¸­åšäº†æ›´æ”¹ï¼ŒæœåŠ¡å™¨å°±ä¼šé‡æ–°åŠ è½½ï¼Œè¿™äº›æ›´æ”¹ä¼šç«‹å³åæ˜ å‡ºæ¥ï¼Œè¿™åœ¨å¼€å‘ä¸­éå¸¸æœ‰ç”¨ã€‚</p><p id="81c8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥è·Ÿè¸ªåº”ç”¨ç¨‹åºçš„æ—¥å¿—:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="c348" class="my lk in mu b gy mz na l nb nc">starter â¯ docker logs magic-link-redis -f</span></pre><p id="d361" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨index.mjsæ–‡ä»¶ä¸­ï¼Œè®©æˆ‘ä»¬å¯¼å…¥expressã€mongooseã€morganå’Œdotenvæ¨¡å—ã€‚ç„¶ååˆå§‹åŒ–æˆ‘ä»¬çš„expressæœåŠ¡å™¨ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°MongoDBæ•°æ®åº“:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="4c89" class="my lk in mu b gy mz na l nb nc"> import express from "express"</span><span id="8111" class="my lk in mu b gy ne na l nb nc"> import mongoose from "mongoose";</span><span id="19da" class="my lk in mu b gy ne na l nb nc"> import morgan from "morgan";</span><span id="ddb8" class="my lk in mu b gy ne na l nb nc"> import { config } from "dotenv";</span><span id="0868" class="my lk in mu b gy ne na l nb nc"> <br/> config({ path: "./env/.env" });</span><span id="6b51" class="my lk in mu b gy ne na l nb nc"> const app = express();</span><span id="b74c" class="my lk in mu b gy ne na l nb nc"> app.use(morgan("combined"));</span><span id="af21" class="my lk in mu b gy ne na l nb nc"> app.use(express.json());</span><span id="5eec" class="my lk in mu b gy ne na l nb nc"> app.use((req, res, next) =&gt; {</span><span id="d6e0" class="my lk in mu b gy ne na l nb nc">  res.setHeader("Access-Control-Allow-Origin", "*");</span><span id="ff00" class="my lk in mu b gy ne na l nb nc">  res.setHeader("Access-Control-Allow-Methods", "GET, POST, DELETE,  OPTIONS");</span><span id="f677" class="my lk in mu b gy ne na l nb nc">  res.setHeader("Access-Control-Allow-Headers", "Content-Type");</span><span id="5902" class="my lk in mu b gy ne na l nb nc">  next();</span><span id="cc6a" class="my lk in mu b gy ne na l nb nc"> });</span><span id="27c2" class="my lk in mu b gy ne na l nb nc"> mongoose.connect(</span><span id="864a" class="my lk in mu b gy ne na l nb nc"> `mongodb://${process.env.MONGODB_USERNAME}:${process.env.MONGODB_PASSWORD}@mongodb:27017/migic-link-redis?authSource=admin`,</span><span id="d74d" class="my lk in mu b gy ne na l nb nc">  {</span><span id="bebb" class="my lk in mu b gy ne na l nb nc">    useNewUrlParser: true,</span><span id="311f" class="my lk in mu b gy ne na l nb nc">    useUnifiedTopology: true,</span><span id="babc" class="my lk in mu b gy ne na l nb nc">  },</span><span id="33c9" class="my lk in mu b gy ne na l nb nc">  (err) =&gt; {</span><span id="f553" class="my lk in mu b gy ne na l nb nc">    if (err) {</span><span id="449b" class="my lk in mu b gy ne na l nb nc">      console.error("FAILED TO CONNECT TO MONGODB");</span><span id="c97e" class="my lk in mu b gy ne na l nb nc">      console.error(err);</span><span id="952b" class="my lk in mu b gy ne na l nb nc">    } else {</span><span id="bfda" class="my lk in mu b gy ne na l nb nc">      console.log("CONNECTED TO MONGODB!!");</span><span id="28ed" class="my lk in mu b gy ne na l nb nc">      app.listen(4000, () =&gt;</span><span id="5bd1" class="my lk in mu b gy ne na l nb nc">        console.log(</span><span id="358b" class="my lk in mu b gy ne na l nb nc">          `App listening on port 4000 in ${process.env.NODE_ENV} mode.`</span><span id="df23" class="my lk in mu b gy ne na l nb nc">        )</span><span id="03ea" class="my lk in mu b gy ne na l nb nc">      );</span><span id="8375" class="my lk in mu b gy ne na l nb nc">    }</span><span id="3515" class="my lk in mu b gy ne na l nb nc">  }</span><span id="9d01" class="my lk in mu b gy ne na l nb nc">);<br/>;</span></pre><p id="dd47" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‚¨åº”è¯¥ä¼šåœ¨æ—¥å¿—ä¸­çœ‹åˆ°è¿™æ ·çš„æ¶ˆæ¯:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/b144aae2094c225bad455ac022ce2b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*5ifLJpWFQZ2UV8wN9_lQCg.jpeg"/></div></figure><p id="185a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™æ˜¯ä¸€ä¸ªå¥½è¿¹è±¡ğŸ˜‰ã€‚æ·±å‘¼å¸â€¦ä½ åšå¾—å¾ˆå¥½ã€‚</p><p id="bf14" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è®©æˆ‘ä»¬åˆ›å»ºç”¨æˆ·æ¨¡å¼ã€‚ä»ç›¸å¯¹äºâ€œstarterâ€æ–‡ä»¶å¤¹çš„æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œå¹¶å°†å…¶å‘½åä¸ºâ€œmodelsâ€ã€‚åœ¨è¿™ä¸ªæ–°æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªâ€œuser.mjsâ€æ–‡ä»¶ã€‚</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/447ea55e01a655c052bb40ecddc253eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:334/format:webp/1*Ckaj3TtXu-fRXx6oCc2QvQ.jpeg"/></div></figure><p id="e358" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å°†ä»¥ä¸‹ä»£ç æ”¾å…¥user.mjsæ–‡ä»¶ä¸­:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="1c1a" class="my lk in mu b gy mz na l nb nc">import mongoose from "mongoose";</span><span id="6be8" class="my lk in mu b gy ne na l nb nc"> import bcrypt from "bcryptjs";</span><span id="cbe3" class="my lk in mu b gy ne na l nb nc"> import validator from "validator";<br/> </span><span id="0fb5" class="my lk in mu b gy ne na l nb nc"> const Schema = mongoose.Schema;<br/> </span><span id="aab1" class="my lk in mu b gy ne na l nb nc"> const userSchema = new Schema(</span><span id="c18c" class="my lk in mu b gy ne na l nb nc">  {</span><span id="2ddc" class="my lk in mu b gy ne na l nb nc">    name: {</span><span id="f1db" class="my lk in mu b gy ne na l nb nc">      type: String,</span><span id="f8da" class="my lk in mu b gy ne na l nb nc">      trim: true,</span><span id="9151" class="my lk in mu b gy ne na l nb nc">    },</span><span id="e8c8" class="my lk in mu b gy ne na l nb nc">    email: {</span><span id="6a2e" class="my lk in mu b gy ne na l nb nc">      type: String,</span><span id="598e" class="my lk in mu b gy ne na l nb nc">      required: true,</span><span id="4160" class="my lk in mu b gy ne na l nb nc">      unique: true,</span><span id="3b85" class="my lk in mu b gy ne na l nb nc">      lowercase: true,</span><span id="24b4" class="my lk in mu b gy ne na l nb nc">      validate: [validator.isEmail, "Email is invalid."],</span><span id="427f" class="my lk in mu b gy ne na l nb nc">    },</span><span id="6a17" class="my lk in mu b gy ne na l nb nc">    password: {</span><span id="7afc" class="my lk in mu b gy ne na l nb nc">      type: String,</span><span id="4fb3" class="my lk in mu b gy ne na l nb nc">      required: true,</span><span id="cedc" class="my lk in mu b gy ne na l nb nc">      select: false,</span><span id="b9da" class="my lk in mu b gy ne na l nb nc">    },</span><span id="278b" class="my lk in mu b gy ne na l nb nc">  },</span><span id="6210" class="my lk in mu b gy ne na l nb nc">  {<br/>    timestamps: true,<br/>  }</span><span id="764c" class="my lk in mu b gy ne na l nb nc"> );<br/> <br/> userSchema.pre("save", async function (next) {</span><span id="9bc0" class="my lk in mu b gy ne na l nb nc">  if (!this.isModified("password")) return next();</span><span id="39dc" class="my lk in mu b gy ne na l nb nc">  // Hash password with a cost of 12</span><span id="1c2d" class="my lk in mu b gy ne na l nb nc">  this.password = await bcrypt.hash(this.password, 12);</span><span id="d73d" class="my lk in mu b gy ne na l nb nc">  next();</span><span id="26a4" class="my lk in mu b gy ne na l nb nc"> });</span><span id="1ded" class="my lk in mu b gy ne na l nb nc"> const UserModel = mongoose.model("User", userSchema);</span><span id="8ebc" class="my lk in mu b gy ne na l nb nc"> export default UserModel;</span></pre><p id="23eb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å°†ç”¨æˆ·æ¨¡å¼æ¨¡å—å¯¼å…¥index.mjsæ–‡ä»¶:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="78c2" class="my lk in mu b gy mz na l nb nc">import User from "./models/user.mjs";</span></pre><p id="01b6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªGET /usersç«¯ç‚¹æ¥è·å–æ‰€æœ‰ç”¨æˆ·æ–‡æ¡£ã€‚</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="4d67" class="my lk in mu b gy mz na l nb nc">app.get("/users", async (req, res) =&gt; {</span><span id="bd0f" class="my lk in mu b gy ne na l nb nc">  try {</span><span id="655c" class="my lk in mu b gy ne na l nb nc">    const users = await User.find();</span><span id="592f" class="my lk in mu b gy ne na l nb nc">    res.status(200).json({</span><span id="44b3" class="my lk in mu b gy ne na l nb nc">      status: "SUCCESS",</span><span id="261e" class="my lk in mu b gy ne na l nb nc">      users,</span><span id="9920" class="my lk in mu b gy ne na l nb nc">    });</span><span id="b6ef" class="my lk in mu b gy ne na l nb nc">  } catch (err) {</span><span id="2f8a" class="my lk in mu b gy ne na l nb nc">    console.error(err.message);</span><span id="5f2b" class="my lk in mu b gy ne na l nb nc">    res.status(500).json({ status: "FAIL", message: "Failed to fetch  users." });</span><span id="dcb4" class="my lk in mu b gy ne na l nb nc">  }</span><span id="31e2" class="my lk in mu b gy ne na l nb nc"> });</span></pre><p id="f1ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‰“å¼€æ‚¨çš„Postman(å¯èƒ½)å¹¶å°è¯•åœ¨GET<a class="ae li" href="http://localhost:4000/users" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/users</a>å¤„è°ƒç”¨ç«¯ç‚¹ã€‚æ‚¨åº”è¯¥å¾—åˆ°ä»¥ä¸‹å“åº”(å¦åˆ™ï¼Œè¯·è·Ÿæˆ‘å”±äºŒé‡å”±ğŸ˜œ):</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/edaeea31efae9357be507baa174516fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*EpCHlmOC-IM-JDLdh9GnBA.jpeg"/></div></figure><h1 id="e39c" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">å¼€å§‹æœ‰è¶£çš„éƒ¨åˆ†</h1><p id="bad6" class="pw-post-body-paragraph jv jw in jx b jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">è¿™æ˜¯æ›´æœ‰è¶£çš„åœ°æ–¹ã€‚æˆ‘ä»¬å°†åˆ›å»ºå¦ä¸€ä¸ªç«¯ç‚¹æ¥å¤„ç†ç¥å¥‡é“¾æ¥é€»è¾‘ã€‚è¿™ä¸ªç«¯ç‚¹å°†æ‰§è¡Œå¼€å¤´æåˆ°çš„â€œç«¯ç‚¹1â€çš„é€»è¾‘ã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨RedisJSONçš„ç‰¹æ€§ã€‚</p><p id="6b93" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨åˆ›å»ºæ­¤ç«¯ç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆåˆ›å»ºä¸¤ä¸ªæ¨¡å—:tokenGenerator.mjså’ŒcacheHandler.mjsã€‚å› æ­¤ï¼Œåœ¨utilsæ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸Šè¿°æ–‡ä»¶å¹¶å°†ä»¥ä¸‹ä»£ç æ”¾å…¥tokenGenerator.mjsæ–‡ä»¶ä¸­:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="01a0" class="my lk in mu b gy mz na l nb nc">import crypto from "crypto";</span><span id="39ab" class="my lk in mu b gy ne na l nb nc">export default () =&gt; crypto.randomBytes(32).toString("hex");</span></pre><p id="b002" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™ä¸ªæ¨¡å—å°†ç”¨äºç”Ÿæˆä¸€ä¸ªéšæœºå“ˆå¸Œå€¼ï¼Œè¯¥å€¼è¢«è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ç”¨äºæ³¨å†Œä»¤ç‰Œã€‚</p><p id="2542" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œç¼“å­˜å¤„ç†ç¨‹åºã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯æˆ‘ä»¬å®ç°å’Œè¿æ¥Redisåˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„åœ°æ–¹ã€‚å®ƒå¤„ç†ä¸‰ä¸ªå‡½æ•°:getCacheç”¨äºæŸ¥è¯¢RedisJSON APIä»¥é€šè¿‡ç»™å®šçš„é”®è·å–æ•°æ®ï¼ŒsetCacheç”¨äºå­˜å‚¨å…·æœ‰ç»™å®šçš„é”®ã€æ•°æ®å’Œè¿‡æœŸæ—¶é—´(ä»¥ç§’ä¸ºå•ä½)çš„æ–°ç¼“å­˜ï¼ŒdeleteCacheç”¨äºä»å†…å­˜ä¸­åˆ é™¤ç¼“å­˜ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºè¿™ä¸ªæ¦‚å¿µçš„å†…å®¹ï¼Œè¯·çœ‹æˆ‘ä¹‹å‰å…³äºå¦‚ä½•ä½¿ç”¨Redis <a class="ae li" rel="noopener ugc nofollow" target="_blank" href="/how-to-implement-daily-active-users-metric-using-redis-4a7d7c4aca8f">åˆ›å»ºæ´»è·ƒç”¨æˆ·æŒ‡æ ‡çš„æ–‡ç« ã€‚</a></p><p id="1e9c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¯¥æ¨¡å—çš„ä»£ç å¦‚ä¸‹:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="2e7a" class="my lk in mu b gy mz na l nb nc">import { createClient } from "redis";</span><span id="4fda" class="my lk in mu b gy ne na l nb nc"> let client;</span><span id="7444" class="my lk in mu b gy ne na l nb nc"> if (process.env.NODE_ENV === "production") {</span><span id="70f5" class="my lk in mu b gy ne na l nb nc">  client = createClient({</span><span id="7294" class="my lk in mu b gy ne na l nb nc">    url: `redis://${process.env.REDIS_USER}:${process.env.REDIS_PASSWORD}@${process.env.REDIS_HOSTNAME}:${process.env.REDIS_PORT}`,</span><span id="5917" class="my lk in mu b gy ne na l nb nc">  });</span><span id="2cda" class="my lk in mu b gy ne na l nb nc"> } else {</span><span id="059a" class="my lk in mu b gy ne na l nb nc">  client = createClient({</span><span id="8a76" class="my lk in mu b gy ne na l nb nc">    url: "redis://redis:6379",</span><span id="3fd0" class="my lk in mu b gy ne na l nb nc">  });</span><span id="5a50" class="my lk in mu b gy ne na l nb nc"> }</span><span id="1189" class="my lk in mu b gy ne na l nb nc">  client.on("error", (err) =&gt; console.log("Redis Client Error", err));</span><span id="e4f4" class="my lk in mu b gy ne na l nb nc">  async function connectRedis() {</span><span id="bab2" class="my lk in mu b gy ne na l nb nc">  await client.connect();</span><span id="b707" class="my lk in mu b gy ne na l nb nc"> }</span><span id="01e3" class="my lk in mu b gy ne na l nb nc">  connectRedis();</span><span id="83af" class="my lk in mu b gy ne na l nb nc">  const defaultExpirationTime = 60 * 10; // 60 seconds times 10 -&gt; 10 minutes</span><span id="7859" class="my lk in mu b gy ne na l nb nc">  const handleCache = (cb) =&gt; cb();</span><span id="8fe1" class="my lk in mu b gy ne na l nb nc">  export const getCache = (key) =&gt;</span><span id="267c" class="my lk in mu b gy ne na l nb nc">   new Promise((resolve, reject) =&gt; {</span><span id="fac2" class="my lk in mu b gy ne na l nb nc">    try {</span><span id="4203" class="my lk in mu b gy ne na l nb nc">      handleCache(async () =&gt; {</span><span id="dcb1" class="my lk in mu b gy ne na l nb nc">        const data = await client.get(key);</span><span id="4e87" class="my lk in mu b gy ne na l nb nc">        if (data) {</span><span id="5ee3" class="my lk in mu b gy ne na l nb nc">          console.log("DATA FOUND! ğŸ¥³");</span><span id="1795" class="my lk in mu b gy ne na l nb nc">        }</span><span id="efe1" class="my lk in mu b gy ne na l nb nc">        resolve(JSON.parse(data));</span><span id="4ce2" class="my lk in mu b gy ne na l nb nc">      });</span><span id="56ef" class="my lk in mu b gy ne na l nb nc">    } catch (error) {</span><span id="8e15" class="my lk in mu b gy ne na l nb nc">      reject(error);</span><span id="e953" class="my lk in mu b gy ne na l nb nc">    }</span><span id="2ae1" class="my lk in mu b gy ne na l nb nc">  });</span><span id="b681" class="my lk in mu b gy ne na l nb nc">  export const setCache = (key, data, expTime) =&gt; {</span><span id="f455" class="my lk in mu b gy ne na l nb nc">  if (typeof expTime === "undefined") {</span><span id="9a95" class="my lk in mu b gy ne na l nb nc">    expTime = defaultExpirationTime;</span><span id="ebeb" class="my lk in mu b gy ne na l nb nc">  }</span><span id="61a3" class="my lk in mu b gy ne na l nb nc">  return new Promise((resolve, reject) =&gt; {</span><span id="092d" class="my lk in mu b gy ne na l nb nc">    try {</span><span id="fa2b" class="my lk in mu b gy ne na l nb nc">      handleCache(async () =&gt; {</span><span id="e211" class="my lk in mu b gy ne na l nb nc">        const isOk = await client.set(key, JSON.stringify(data), {</span><span id="039e" class="my lk in mu b gy ne na l nb nc">          EX: expTime,</span><span id="0dd8" class="my lk in mu b gy ne na l nb nc">        });</span><span id="22df" class="my lk in mu b gy ne na l nb nc">        if (isOk) {<br/>          console.log("CACHED! âœ…");<br/>        }</span><span id="642a" class="my lk in mu b gy ne na l nb nc">        resolve();</span><span id="a6e3" class="my lk in mu b gy ne na l nb nc">      });</span><span id="5142" class="my lk in mu b gy ne na l nb nc">    } catch (error) {</span><span id="321e" class="my lk in mu b gy ne na l nb nc">      reject(error);</span><span id="6188" class="my lk in mu b gy ne na l nb nc">    }</span><span id="9f6c" class="my lk in mu b gy ne na l nb nc">  });</span><span id="18e8" class="my lk in mu b gy ne na l nb nc"> };</span><span id="a618" class="my lk in mu b gy ne na l nb nc"> export const deleteCache = (key) =&gt;</span><span id="cb49" class="my lk in mu b gy ne na l nb nc">  new Promise((resolve, reject) =&gt; {</span><span id="8f52" class="my lk in mu b gy ne na l nb nc">    try {</span><span id="ae8b" class="my lk in mu b gy ne na l nb nc">      handleCache(async () =&gt; {</span><span id="fea0" class="my lk in mu b gy ne na l nb nc">        const response = await client.del(key);</span><span id="05be" class="my lk in mu b gy ne na l nb nc">        if (response === 1) {</span><span id="8d66" class="my lk in mu b gy ne na l nb nc">          console.log("CACHE DELETED!");</span><span id="6877" class="my lk in mu b gy ne na l nb nc">        }</span><span id="0a19" class="my lk in mu b gy ne na l nb nc">        resolve(JSON.parse(response));</span><span id="e84c" class="my lk in mu b gy ne na l nb nc">      });</span><span id="2660" class="my lk in mu b gy ne na l nb nc">    } catch (error) {</span><span id="dd52" class="my lk in mu b gy ne na l nb nc">      reject(error);</span><span id="ba46" class="my lk in mu b gy ne na l nb nc">    }</span><span id="d429" class="my lk in mu b gy ne na l nb nc">  });</span></pre><p id="5209" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ³¨æ„ï¼Œåˆå§‹åŒ–Rediså®¢æˆ·æœºçš„å®ç°å—åˆ°ä¸¤ä¸ªæ¡ä»¶çš„é™åˆ¶:å¦‚æœåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å¼€å‘ç¯å¢ƒä¸Šï¼Œåˆ™è¿æ¥åˆ°æœ¬åœ°RedisæœåŠ¡(è¿è¡Œåœ¨dockerå®¹å™¨çš„6379ç«¯å£ä¸Š)ã€‚å¦åˆ™ï¼Œä½¿ç”¨â€œæ‚¨çš„â€å‡­è¯è¿æ¥åˆ°redisäº‘æœåŠ¡ã€‚è¿™ä¸€ç‚¹è‡³å…³é‡è¦ï¼Œå› ä¸ºæ‚¨åº”è¯¥åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨äº‘æœåŠ¡ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºRedis Cloudçš„ä¿¡æ¯ï¼Œè¯·è®¿é—®<a class="ae li" href="https://redis.com/try-free/?utm_campaign=write_for_redis" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹é¡µé¢</a>ã€‚æœ€æ£’çš„æ˜¯ä½ å¯ä»¥ä»å…è´¹è®¡åˆ’å¼€å§‹ã€‚</p><p id="8124" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¥½å§ï¼ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°†æ¨¡å—å¯¼å…¥index.mjsæ–‡ä»¶:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="af09" class="my lk in mu b gy mz na l nb nc">import tokenGenerator from "./utils/tokenGenerator.mjs";</span><span id="187b" class="my lk in mu b gy ne na l nb nc"> import { setCache, getCache, deleteCache } from  "./utils/cacheHandler.mjs";</span><span id="ea05" class="my lk in mu b gy ne na l nb nc"> import { sendMagicLink } from "./utils/mailer.mjs";</span></pre><p id="21f7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜å¯¼å…¥äº†é‚®ä»¶æ¨¡å—ã€‚</p><p id="05cd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å› æ­¤ï¼Œè®©æˆ‘ä»¬åˆ›å»ºç¥å¥‡é“¾æ¥ç«¯ç‚¹(ç«¯ç‚¹1):</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="468b" class="my lk in mu b gy mz na l nb nc">app.post("/users/magic_link", async (req, res) =&gt; {</span><span id="227f" class="my lk in mu b gy ne na l nb nc">  const { email } = req.body;</span><span id="ec30" class="my lk in mu b gy ne na l nb nc">  if (!email)</span><span id="36ab" class="my lk in mu b gy ne na l nb nc">    return res.status(400).json({ status: "FAIL", message: "Email required." });</span><span id="aab9" class="my lk in mu b gy ne na l nb nc">  try {</span><span id="4450" class="my lk in mu b gy ne na l nb nc">    // 1) check if user exists already</span><span id="3c92" class="my lk in mu b gy ne na l nb nc">    const userExists = await User.findOne({ email });</span><span id="63f4" class="my lk in mu b gy ne na l nb nc">    if (userExists)</span><span id="57bb" class="my lk in mu b gy ne na l nb nc">      return res</span><span id="3820" class="my lk in mu b gy ne na l nb nc">        .status(400)</span><span id="1d93" class="my lk in mu b gy ne na l nb nc">        .json({ status: "FAIL", message: "Email already in use." });</span><span id="fbe9" class="my lk in mu b gy ne na l nb nc">    // 2) generate token</span><span id="5360" class="my lk in mu b gy ne na l nb nc">    const token = tokenGenerator();</span><span id="98c6" class="my lk in mu b gy ne na l nb nc">    // 3) store email and token in redisJSON for 24 hours</span><span id="c753" class="my lk in mu b gy ne na l nb nc">    const hours24 = 60 * 60 * 24;</span><span id="302c" class="my lk in mu b gy ne na l nb nc">    await setCache(token, { email, token }, hours24);</span><span id="dd2f" class="my lk in mu b gy ne na l nb nc">    // 4) send token to user's email address</span><span id="0fa4" class="my lk in mu b gy ne na l nb nc">    sendMagicLink(email, token);</span><span id="22c0" class="my lk in mu b gy ne na l nb nc">    res.status(200).json({</span><span id="7887" class="my lk in mu b gy ne na l nb nc">      status: "SUCCESS",</span><span id="1953" class="my lk in mu b gy ne na l nb nc">      message: "Link sent to your email!",</span><span id="fb91" class="my lk in mu b gy ne na l nb nc">    });</span><span id="ec4f" class="my lk in mu b gy ne na l nb nc">  } catch (err) {</span><span id="bf7b" class="my lk in mu b gy ne na l nb nc">    console.error(err.message);</span><span id="5845" class="my lk in mu b gy ne na l nb nc">    res</span><span id="33d9" class="my lk in mu b gy ne na l nb nc">      .status(500)</span><span id="d306" class="my lk in mu b gy ne na l nb nc">      .json({ status: "FAIL", message: "Something went terribly wrong."       });</span><span id="7e4a" class="my lk in mu b gy ne na l nb nc">  }</span><span id="f571" class="my lk in mu b gy ne na l nb nc"> });</span></pre><p id="24c7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨ç«¯ç‚¹1ä¸­å®ç°äº†å¼€å§‹æ—¶æåˆ°çš„é€»è¾‘ï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªé¢å¤–çš„éªŒè¯æ­¥éª¤ï¼Œæ£€æŸ¥ç»™å®šç”µå­é‚®ä»¶åœ°å€çš„å¸æˆ·æ˜¯å¦å·²ç»å­˜åœ¨ã€‚ç„¶åï¼Œæˆ‘ä»¬ç”¨RedisJSONç¼“å­˜æ—¶æ€æ–‡æ¡£ï¼Œå¹¶å°†åˆ°æœŸæ—¶é—´è®¾ç½®ä¸º24å°æ—¶ï¼Œè€Œä¸æ˜¯å°†å®ƒå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ç®€å•çš„ğŸ‘ŒğŸ¾ã€‚</p><p id="2901" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘èƒ½æ„Ÿè§‰åˆ°ä½ æƒ³æµ‹è¯•è¿™ä¸ªç»ˆç‚¹çš„å†²åŠ¨ï¼Œä½†æ˜¯ä¸è¦è¿™ä¹ˆå¿«ğŸ˜œã€‚æ³¨æ„ï¼Œé‚®ä»¶æ¨¡å—å®ç°äº†nodemailer transporterï¼Œå®ƒéœ€è¦ä¸€äº›Zohoé‚®ä»¶å‡­è¯ã€‚è¿™æ„å‘³ç€ä½ åº”è¯¥åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªZohoè´¦æˆ·<a class="ae li" href="https://www.zoho.com/signup.html" rel="noopener ugc nofollow" target="_blank">ã€‚ç„¶åï¼Œæ›¿æ¢ã€‚envæ–‡ä»¶åˆ†åˆ«ä¸æ‚¨çš„Zohoç”µå­é‚®ä»¶å’Œå¯†ç ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥èµ°äº†ã€‚</a></p><p id="eff4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½¿ç”¨ä»¥ä¸‹æœ‰æ•ˆè´Ÿè½½å‘<a class="ae li" href="http://localhost:4000/users/magic_link" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/users/magic _ link</a>å‘å‡ºPOSTè¯·æ±‚:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/4032030a71900242ed1c8cd8b786844f.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*krp0oK4wRDe1rE-GPOxdNQ.jpeg"/></div></figure><p id="8da6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¸Šé¢çš„é‚®ä»¶åº”è¯¥æ˜¯ä½ çš„é‚®ä»¶ï¼Œå¦åˆ™æˆ‘ä¼šåƒæ‰ä½ çš„é‚®ä»¶ğŸ˜ã€‚</p><p id="08ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨æ‚¨çš„åº”ç”¨ç¨‹åºæ—¥å¿—ä¸­çœ‹åˆ°å¦‚ä¸‹æ¶ˆæ¯:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/4ae0fe88be804623fedfca5acffb2b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*8S4deDGM3W9YMf5yKPlRcA.jpeg"/></div></figure><p id="c2d6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™æ„å‘³ç€ç”µå­é‚®ä»¶å·²ç»å‘é€åˆ°æ‚¨çš„ç”µå­é‚®ä»¶åœ°å€ã€‚</p><p id="2146" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æœ€åï¼Œè®©æˆ‘ä»¬åˆ›å»ºæ³¨å†Œç«¯ç‚¹(ç«¯ç‚¹2):</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="101b" class="my lk in mu b gy mz na l nb nc">app.post("/users/signup", async (req, res) =&gt; {</span><span id="254d" class="my lk in mu b gy ne na l nb nc">  const { email, name, password } = req.body;</span><span id="f3cc" class="my lk in mu b gy ne na l nb nc">  const { token } = req.query;</span><span id="4c40" class="my lk in mu b gy ne na l nb nc">  // 1) check if user exists already</span><span id="4efe" class="my lk in mu b gy ne na l nb nc">  const userExists = await User.findOne({ email });</span><span id="7621" class="my lk in mu b gy ne na l nb nc">  if (userExists)</span><span id="4b03" class="my lk in mu b gy ne na l nb nc">    return res</span><span id="c7e2" class="my lk in mu b gy ne na l nb nc">      .status(400)</span><span id="5b18" class="my lk in mu b gy ne na l nb nc">      .json({ status: "FAIL", message: "Email already in use." });</span><span id="793e" class="my lk in mu b gy ne na l nb nc">  // 2) require token</span><span id="38a4" class="my lk in mu b gy ne na l nb nc">  if (!token)</span><span id="6a34" class="my lk in mu b gy ne na l nb nc">    return res.status(400).json({ status: "FAIL", message: "Token required." });</span><span id="b6fa" class="my lk in mu b gy ne na l nb nc">  // 3) validate body</span><span id="e811" class="my lk in mu b gy ne na l nb nc">  if (!email || !name || !password)</span><span id="96ef" class="my lk in mu b gy ne na l nb nc">    return res</span><span id="fad2" class="my lk in mu b gy ne na l nb nc">      .status(400)</span><span id="1bd8" class="my lk in mu b gy ne na l nb nc">      .json({ status: "FAIL", message: "Invalid request." });</span><span id="7297" class="my lk in mu b gy ne na l nb nc">  // 4) check if data exists on redisJSON and client email matches data email. if  NOT, return "Access denied"</span><span id="1f66" class="my lk in mu b gy ne na l nb nc">  const data = await getCache(token);</span><span id="d5c5" class="my lk in mu b gy ne na l nb nc">  if (!data || data.email !== email)</span><span id="0e31" class="my lk in mu b gy ne na l nb nc">    return res.status(403).json({ status: "FAIL", message: "Access denied." });</span><span id="a4d3" class="my lk in mu b gy ne na l nb nc">  // 5) if exists, create new user account</span><span id="7081" class="my lk in mu b gy ne na l nb nc">  let user;</span><span id="3a2e" class="my lk in mu b gy ne na l nb nc">  try {</span><span id="5743" class="my lk in mu b gy ne na l nb nc">    user = await User.create({ name, email, password });</span><span id="a8b8" class="my lk in mu b gy ne na l nb nc">    await deleteCache(email);</span><span id="744a" class="my lk in mu b gy ne na l nb nc">    res.status(201).json({</span><span id="cad0" class="my lk in mu b gy ne na l nb nc">      status: "SUCCESS",</span><span id="acf9" class="my lk in mu b gy ne na l nb nc">      message: "User saved!",</span><span id="0f17" class="my lk in mu b gy ne na l nb nc">      user,</span><span id="cf8a" class="my lk in mu b gy ne na l nb nc">    });</span><span id="b75f" class="my lk in mu b gy ne na l nb nc">  } catch (err) {</span><span id="a5c7" class="my lk in mu b gy ne na l nb nc">    console.error(err.message);</span><span id="4030" class="my lk in mu b gy ne na l nb nc">    res.status(500).json({ status: "FAIL", message: "Failed to save user." });</span><span id="aa2f" class="my lk in mu b gy ne na l nb nc">  }</span><span id="b837" class="my lk in mu b gy ne na l nb nc">});</span></pre><p id="7b7e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜è¦ç¡®ä¿ä¸è¦ç”¨å·²ç»å­˜åœ¨çš„ç”µå­é‚®ä»¶åœ°å€åˆ›å»ºå¸æˆ·ã€‚æˆ‘ä»¬ç¡®ä¿å°†ä»¤ç‰Œå’Œæ‰€éœ€çš„ä¸»ä½“ç»†èŠ‚ä¼ é€’ç»™è¯·æ±‚å¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ä»¬æ£€æŸ¥Redisä¸Šçš„ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä»¤ç‰Œå­˜åœ¨ï¼Œå¹¶ä¸”æä¾›çš„ç”µå­é‚®ä»¶ä¸Redisä¸Šå­˜å‚¨çš„æ•°æ®ç”µå­é‚®ä»¶ç›¸åŒ¹é…ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­åˆ›å»ºç”¨æˆ·æ–‡æ¡£ã€‚æ­¤åï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæˆ‘ä»¬ä¼šåˆ é™¤ç¼“å­˜ï¼Œå³ä½¿å®ƒæ— è®ºå¦‚ä½•éƒ½ä¼šè¿‡æœŸã€‚</p><p id="8c42" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¤šé…·å•Šã€‚ä½¿ç”¨Redisç®€å•è€Œæœ‰æ•ˆåœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æµ‹è¯•è¿™ä¸ªç«¯ç‚¹ã€‚è½¬åˆ°æ‚¨çš„æ”¶ä»¶ç®±ï¼Œå¤åˆ¶URLå­—ç¬¦ä¸²ä¸­çš„ä»¤ç‰Œã€‚å°†ä»¤ç‰Œé™„åŠ åˆ°è¯·æ±‚æŸ¥è¯¢å¯¹è±¡ï¼Œå¹¶å°†è¯·æ±‚å‘é€åˆ°<a class="ae li" href="http://localhost:4000/users/signup?token=YOUR_TOKEN" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/users/sign upï¼Ÿtoken=YOUR_TOKEN </a>å…·æœ‰ä»¥ä¸‹æœ‰æ•ˆè½½è·:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f437879cc9f5724b13eebb71cee16757.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*xJVCjFmZR5SGnRU3yzP4NQ.jpeg"/></div></figure><p id="fc1e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥ä¼šå¾—åˆ°ä¸€ä¸ªæˆåŠŸçš„201å“åº”ğŸ‘ğŸ¾ã€‚</p><h1 id="2a2e" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">ç»“è®º</h1><p id="d20f" class="pw-post-body-paragraph jv jw in jx b jy mh ka kb kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">æ¯ä¸ªç”¨æˆ·éƒ½æƒ³è¦è½»æ¾çš„ç”Ÿæ´»ã€‚å¦‚æœä½ æƒ³è®©ä½ çš„åº”ç”¨ç¨‹åºçš„è®¤è¯å¯¹ä½ çš„ç”¨æˆ·æ¥è¯´ç®€å•10å€ï¼Œåˆ©ç”¨RedisJSONã€‚æˆ‘å¸Œæœ›è¿™ç¯‡æ•™ç¨‹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><p id="17e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™ç¯‡æ–‡ç« æ˜¯ä¸Redisåˆä½œçš„ã€‚</p><p id="be8e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">äº†è§£æ›´å¤šä¿¡æ¯:</p><ul class=""><li id="b730" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated"><a class="ae li" href="https://redis.info/3NBGJRT" rel="noopener ugc nofollow" target="_blank">å…è´¹è¯•ç”¨Redis Cloudã€‘</a></li><li id="e16b" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><a class="ae li" href="https://redis.info/3Ga9YII" rel="noopener ugc nofollow" target="_blank">è§‚çœ‹æ­¤è§†é¢‘ï¼Œäº†è§£Redisäº‘ç›¸å¯¹äºå…¶ä»–Redisæä¾›å•†çš„ä¼˜åŠ¿</a></li><li id="71b3" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><a class="ae li" href="https://redis.info/3LC4GqB" rel="noopener ugc nofollow" target="_blank"> Rediså¼€å‘è€…ä¸­å¿ƒâ€”â€”å…³äºRedisçš„å·¥å…·ã€æŒ‡å—å’Œæ•™ç¨‹</a></li><li id="c27a" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><a class="ae li" href="https://redis.info/3wMR7PR" rel="noopener ugc nofollow" target="_blank"> RedisInsightæ¡Œé¢å›¾å½¢ç”¨æˆ·ç•Œé¢</a></li></ul><p id="39fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nm">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae li" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nm">plain English . io</em></strong></a><em class="nm">ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae li" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nm">å…è´¹å‘¨æŠ¥</em> </strong> </a> <em class="nm">ã€‚å…³æ³¨æˆ‘ä»¬å…³äº</em> <a class="ae li" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nm">æ¨ç‰¹</em></strong></a><a class="ae li" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nm">é¢†è‹±</em></strong></a><strong class="jx io"><em class="nm"/></strong><em class="nm">å’Œ</em> <a class="ae li" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nm">ä¸å’Œ</em> </strong> </a> <strong class="jx io"> <em class="nm">ã€‚</em>T45ã€‘</strong></p></div></div>    
</body>
</html>