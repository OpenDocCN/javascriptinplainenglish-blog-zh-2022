<html>
<head>
<title>How to Test React Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•æµ‹è¯•Reactç»„ä»¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/how-to-test-react-components-2eff11d8cd75?source=collection_archive---------3-----------------------#2022-01-31">https://javascript.plainenglish.io/how-to-test-react-components-2eff11d8cd75?source=collection_archive---------3-----------------------#2022-01-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1213a040c95fcec5b2260cdd6ae5cf94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IQR5SrYGgSmg_e2j.png"/></div></div></figure><p id="870c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç¼–å†™æµ‹è¯•Reactç»„ä»¶çš„æµ‹è¯•å¯èƒ½å¾ˆæ£˜æ‰‹ã€‚æˆ‘èŠ±æ—¶é—´å¯»æ‰¾åšè¿™ä»¶äº‹çš„æ­£ç¡®æ–¹æ³•ï¼Œä½†æˆ‘å‡ ä¹æ‰¾ä¸åˆ°è§£å†³é—®é¢˜æ‰€éœ€çš„ä¾‹å­ã€‚è¿™è®©æˆ‘æƒ³å†™è¿™ç¯‡æ–‡ç« æ¥åˆ†äº«æˆ‘çš„ç»éªŒå’Œè§è§£ã€‚</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="86ef" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">è®¾ç½®ç¯å¢ƒ</h1><p id="2a62" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">å¦‚æœä½ æƒ³çŸ¥é“å¦‚ä½•è®¾ç½®Jestå’ŒReactæµ‹è¯•åº“ç¯å¢ƒï¼Œä½ ä¹Ÿå¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚</p><h1 id="5888" class="la lb in bd lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx bi translated">æ¼”ç¤ºå­˜å‚¨åº“</h1><p id="180d" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">å¦‚æœä½ æƒ³çœ‹ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ ·æ¿ç”¨äºæ¼”ç¤º:ã€https://github.com/tabsteveyang/react-jest-rtl-boilerplate<a class="ae md" href="https://github.com/tabsteveyang/react-jest-rtl-boilerplate" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="0414" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">å˜²å¼„çš„</h1><p id="6b2d" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">åœ¨è®¾ç½®äº†è¿è¡ŒJestå’ŒReactæµ‹è¯•åº“çš„ç¯å¢ƒä¹‹åï¼Œæ‚¨å¯èƒ½å¾ˆå¿«å°±ä¼šå‘ç°ï¼Œå½“æ‚¨åœ¨æµ‹è¯•ä¸­æ¸²æŸ“å®ƒæ—¶ï¼Œæ‚¨çš„ä¸€äº›ç»„ä»¶ä¼šå´©æºƒã€‚</p><p id="e644" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™æ˜¯å› ä¸ºæµ‹è¯•ä¸­å‘ˆç°çš„ç»„ä»¶åªèƒ½åœ¨ç‰¹å®šçš„ç¯å¢ƒä¸‹è¿è¡Œã€‚å®ƒé€šå¸¸å·²ç»åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®å¥½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»åœ¨è¿è¡Œæµ‹è¯•æ—¶æ¨¡æ‹Ÿä¸€ä¸ªå‡çš„ã€‚</p><p id="57b2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘å°†æŠŠæœ¬èŠ‚ä¸­åˆ›å»ºçš„æ–‡ä»¶æ”¾åœ¨jest/mock/ç›®å½•ä¸‹ï¼Œå¹¶åœ¨webpack.config.jsæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª@jeståˆ«åã€‚</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="7aae" class="ms lb in mo b gy mt mu l mv mw">alias: {<br/>  '@js': path.resolve(__dirname, 'src/js/'),<br/>  '@scss': path.resolve(__dirname, 'src/scss/'),<br/>  '@img': path.resolve(__dirname, 'img/'),<br/>  '@jest': path.resolve(__dirname, 'jest/')<br/>}</span></pre><p id="ddb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¹¶å°†å®ƒæ·»åŠ åˆ°jest.config.jsä¸­</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="2371" class="ms lb in mo b gy mt mu l mv mw">moduleNameMapper: {<br/>  '^@js(.*)$': '&lt;rootDir&gt;/src/js$1',<br/>  '^@scss(.*)$': '&lt;rootDir&gt;/src/scss$1',<br/>  '^@img(.*)$': '&lt;rootDir&gt;/img$1',<br/>  '^@jest(.*)$': '&lt;rootDir&gt;/jest$1'<br/>},</span></pre><h2 id="e42c" class="ms lb in bd lc mx my dn lg mz na dp lk kg nb nc lo kk nd ne ls ko nf ng lw nh bi translated">å˜²è®½Redux</h2><p id="d2f1" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">1.åˆ›å»ºå®é™…å•†åº—çš„å‰¯æœ¬</p><p id="f6b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå¯ä»¥ç”¨é»˜è®¤çŠ¶æ€å‘ˆç°ç»„ä»¶çš„ç¯å¢ƒã€‚æ‚¨å¯ä»¥é€šè¿‡å¤åˆ¶å®é™…çš„æ•…äº‹æ–‡ä»¶å¹¶åˆ é™¤ä¸å¿…è¦çš„é…ç½®(æ¯”å¦‚Redux DevToolsçš„é…ç½®)æ¥å®ç°è¿™ä¸€ç‚¹</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="1c58" class="ms lb in mo b gy mt mu l mv mw">// jest/mock/store/index.js</span><span id="1f5b" class="ms lb in mo b gy ni mu l mv mw">import { createStore, applyMiddleware, compose } from 'redux'<br/>import thunk from 'redux-thunk'<br/>import reducer from '@js/reducers'</span><span id="9784" class="ms lb in mo b gy ni mu l mv mw">const composeEnhancers = compose</span><span id="490b" class="ms lb in mo b gy ni mu l mv mw">const middleware = [thunk]<br/>export default createStore(<br/>  reducer,<br/>  composeEnhancers(applyMiddleware(...middleware))<br/>)</span></pre><p id="253c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.æ¨¡ä»¿æä¾›è€…</p><p id="bfa9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæˆ‘ä»¬ä½¿ç”¨React with Reduxï¼Œæˆ‘ä»¬éœ€è¦å°†ç»„ä»¶åŒ…è£…åˆ°react-reduxåº“ä¸­çš„æä¾›è€…ç»„ä»¶ä¸­ã€‚æˆ‘ä»¬éœ€è¦åœ¨æµ‹è¯•ä¸­æ¸²æŸ“ç»„ä»¶æ—¶åšåŒæ ·çš„äº‹æƒ…ã€‚ä¸ºäº†é¿å…é‡å¤ç¼–å†™ç›¸åŒçš„é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç»„ä»¶æ¥å¤„ç†å®ƒã€‚</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="1169" class="ms lb in mo b gy mt mu l mv mw">// jest/mock/MockProvider.jsx</span><span id="02bb" class="ms lb in mo b gy ni mu l mv mw">import { Provider } from 'react-redux'<br/>// use the replica one as the default store<br/>import store from './store'</span><span id="116f" class="ms lb in mo b gy ni mu l mv mw">const MockProvider = ({ children = null, mockStore = null }) =&gt; {<br/>  return (<br/>    &lt;Provider store={mockStore || store}&gt;<br/>      { children }<br/>    &lt;/Provider&gt;<br/>  )<br/>}</span><span id="f8b9" class="ms lb in mo b gy ni mu l mv mw">MockProvider.propTypes = {<br/>  mockStore: PropTypes.object,  // this prop allows us to set the store to specific state<br/>  children: PropTypes.node<br/>}</span><span id="8250" class="ms lb in mo b gy ni mu l mv mw">export default MockProvider</span></pre><p id="bed0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬è¿˜å¿…é¡»åˆ›å»ºä¸€ä¸ªæ¨¡å—æ¥åˆ›å»ºå•†åº—çš„ä¸åŒçŠ¶æ€ã€‚è¯¥æ¨¡å—ä½¿ç”¨redux-mock-storeåº“åˆ›å»ºæ¨¡æ‹Ÿå­˜å‚¨ï¼Œå¹¶ç”¨Jestæ¨¡æ‹Ÿå‡½æ•°æ›¿æ¢æ¨¡æ‹Ÿå­˜å‚¨çš„dispatchå±æ€§ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦æ—¶è·Ÿè¸ªçŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå‚æ•°æ¥è®¾ç½®å­˜å‚¨çš„åˆå§‹çŠ¶æ€ã€‚</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="bfa3" class="ms lb in mo b gy mt mu l mv mw">// jest/mock/store/createMockStore.js</span><span id="085b" class="ms lb in mo b gy ni mu l mv mw">import configureMockStore from 'redux-mock-store'<br/>import thunk from 'redux-thunk'<br/>const middleware = [thunk]<br/>export default (initialState) =&gt; {<br/>  const mockStore = configureMockStore(middleware)(initialState)<br/>  // eslint-disable-next-line no-undef<br/>  // replace the dispatch method with a spy and keep the funtionality<br/>  mockStore.dispatch = jest.fn(mockStore.dispatch)<br/>  return mockStore<br/>}</span></pre><h2 id="3e4e" class="ms lb in bd lc mx my dn lg mz na dp lk kg nb nc lo kk nd ne ls ko nf ng lw nh bi translated">å˜²è®½è·¯çº¿å’Œå†å²</h2><p id="4f05" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç±»ä¼¼çš„æ¡ˆä¾‹ã€‚ä¸ºäº†ä½¿ä½¿ç”¨react-router-domåº“çš„ç»„ä»¶å·¥ä½œï¼Œæˆ‘ä»¬å¿…é¡»å°†å®ƒä»¬åŒ…è£…åœ¨è·¯ç”±å™¨ç»„ä»¶ä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºæ­¤åˆ›å»ºä¸€ä¸ªæ¨¡å—ã€‚</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="04e3" class="ms lb in mo b gy mt mu l mv mw">// jest/mock/mockRouter.jsx</span><span id="4113" class="ms lb in mo b gy ni mu l mv mw">import { Router } from 'react-router-dom'<br/>import { createBrowserHistory } from 'history'</span><span id="a27a" class="ms lb in mo b gy ni mu l mv mw">const MockRouter = ({ children }) =&gt; {<br/>  return (<br/>    &lt;Router history={createBrowserHistory()}&gt;<br/>      { children }<br/>    &lt;/Router&gt;<br/>  )<br/>}</span><span id="3a08" class="ms lb in mo b gy ni mu l mv mw">MockRouter.propTypes = {<br/>  children: PropTypes.node  // prop for sending in the components that you want to render<br/>}</span><span id="5a44" class="ms lb in mo b gy ni mu l mv mw">export default MockRouter</span></pre><h2 id="7f27" class="ms lb in bd lc mx my dn lg mz na dp lk kg nb nc lo kk nd ne ls ko nf ng lw nh bi translated">æ¨¡æ‹Ÿå¯¼å…¥æ¨¡å—</h2><p id="3b9a" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæœ‰å¿…è¦åœ¨æµ‹è¯•ä¸­æ¨¡æ‹Ÿæ¨¡å—(åŒ…æ‹¬æ¥è‡ªnpmçš„åŒ…),ä¸‹é¢æ˜¯è¿™æ ·åšçš„ä¸€ä¸ªä¾‹å­:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="7978" class="ms lb in mo b gy mt mu l mv mw">import { render, cleanup } from '@testing-library/react'<br/>import MainPage from '../MainPage'</span><span id="06a8" class="ms lb in mo b gy ni mu l mv mw">// *** must write it in the global scope ***<br/>// mock the react-router-dom library<br/>// and replace the useHistory attribute of the module<br/>jest.mock('react-router-dom', () =&gt; ({<br/>  useHistory: () =&gt; ({<br/>    push: jest.fn()<br/>  })<br/>}))</span><span id="4f43" class="ms lb in mo b gy ni mu l mv mw">afterEach(cleanup)<br/>beforeEach(() =&gt; {<br/>  // ...<br/>})</span><span id="6c0d" class="ms lb in mo b gy ni mu l mv mw">describe('MainPage.jsx', () =&gt; {<br/>  // ...<br/>}</span></pre><p id="b0ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½ å¯ä»¥åœ¨<a class="ae md" href="https://jestjs.io/docs/mock-functions" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹æ–‡æ¡£</a>ä¸­é˜…è¯»æ›´å¤šå…³äºæ¨¡æ‹Ÿå‡½æ•°çš„å†…å®¹ï¼Œç¨åä½ ä¼šçœ‹åˆ°æ›´å¤šçš„ä¾‹å­ã€‚</p><h1 id="f919" class="la lb in bd lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx bi translated">è€ƒä»€ä¹ˆï¼Ÿ</h1><p id="7102" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">react-testing-libraryçš„åˆ›å»ºè€…(Kent C. Dodds)åˆ›å»ºäº†ä¸€ä¸ªå·¥å…·æ¥å¸®åŠ©å¼€å‘äººå‘˜é¿å…æµ‹è¯•<a class="ae md" href="https://kentcdodds.com/blog/testing-implementation-details" rel="noopener ugc nofollow" target="_blank">å®ç°ç»†èŠ‚</a>ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šåœ¨è¯•å›¾é‡æ„ç»„ä»¶æ—¶å¿™äºä¿®å¤æµ‹è¯•ç”¨ä¾‹ã€‚</p><p id="f2dc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™æ„å‘³ç€æ‚¨åº”è¯¥ä¸“æ³¨äºæµ‹è¯•ç»„ä»¶å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’ã€‚ç¼–å†™æµ‹è¯•æ—¶ï¼Œå‡è®¾ç”¨æˆ·æ­£åœ¨ä½¿ç”¨ç»„ä»¶ï¼Œå¹¶æµ‹è¯•ç»„ä»¶æ˜¯å¦ååº”æ­£å¸¸ã€‚å› æ­¤ï¼Œäº†è§£å¦‚ä½•åšåˆ°ä»¥ä¸‹å‡ ç‚¹è‡³å…³é‡è¦:</p><p id="0b59" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 1ã€‚æ¨¡ä»¿ç”¨æˆ·</strong></p><p id="dba3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a class="ae md" href="https://testing-library.com/docs/ecosystem-user-event/" rel="noopener ugc nofollow" target="_blank">@ testing-library/user-event</a>åº“æ¥æ¨¡æ‹Ÿä¸€ä¸ªç”¨æˆ·ã€‚å¯¹äºç”¨æˆ·äº‹ä»¶ä¸èƒ½å®ç°çš„äº‹ä»¶ï¼Œä½¿ç”¨@testing-library/reactåº“ä¸­çš„fireEventã€‚</p><p id="21fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 2ã€‚æŸ¥è¯¢DOM </strong></p><ul class=""><li id="e3b8" class="nj nk in jx b jy jz kc kd kg nl kk nm ko nn ks no np nq nr bi translated">æ¥è‡ªå±å¹•å¯¹è±¡çš„æŸ¥è¯¢</li></ul><p id="4e56" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½¿ç”¨renderæ–¹æ³•å‘ˆç°ç»„ä»¶åï¼Œå¯ä»¥ä½¿ç”¨screenå¯¹è±¡è®¿é—®ç»“æœï¼Œå¹¶ä½¿ç”¨å®ƒè¿›è¡ŒæŸ¥è¯¢ã€‚ä½ å¯ä»¥åœ¨å®˜æ–¹çš„<a class="ae md" href="https://testing-library.com/docs/react-testing-library/cheatsheet/" rel="noopener ugc nofollow" target="_blank">å¤‡å¿˜å•</a>ä¸­è¯»åˆ°æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚(æœ‰ä¸€å¼ é¡ºæ‰‹çš„æ¡Œå­ï¼)</p><ul class=""><li id="a098" class="nj nk in jx b jy jz kc kd kg nl kk nm ko nn ks no np nq nr bi translated">æŒ‰ç±»åæŸ¥è¯¢</li></ul><p id="a0ee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">screenå¯¹è±¡æ²¡æœ‰æä¾›æŒ‰ç±»åæŸ¥è¯¢çš„æ–¹æ³•ï¼Œä½†è¿˜æ˜¯æœ‰åŠæ³•åšåˆ°çš„ï¼›æ‚¨å¯ä»¥ä½¿ç”¨å®¹å™¨å±æ€§è·å–æ ¹DOMï¼Œç„¶åè°ƒç”¨getElementsByClassNameæ–¹æ³•:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="5eee" class="ms lb in mo b gy mt mu l mv mw">import { render } from '@testing-library/react'</span><span id="2ce8" class="ms lb in mo b gy ni mu l mv mw">it('some description', () =&gt; {<br/>  const screen = render(&lt;Component /&gt;)<br/>  screen.container.getElementsByClassName('&lt;the_target_class_name&gt;')<br/>}</span></pre><h1 id="e408" class="la lb in bd lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx bi translated">æƒ…èŠ‚</h1><p id="9872" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated"><strong class="jx io"> 1ã€‚ä¸€ä¸ªç®€å•çš„ç»„ä»¶</strong></p><ul class=""><li id="2ad2" class="nj nk in jx b jy jz kc kd kg nl kk nm ko nn ks no np nq nr bi translated">æ ¹æ®é“å…·æ¸²æŸ“</li></ul><p id="4049" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœä½ è¦æµ‹è¯•çš„ç»„ä»¶ä»…ä»…å› ä¸ºå®ƒä»¬çš„å±æ€§ä¸åŒè€Œä¸åŒï¼Œä½ è¦åšçš„å°±æ˜¯ç¼–å†™å‘ç»„ä»¶å‘é€ä¸åŒå±æ€§çš„æµ‹è¯•å¹¶æ£€æŸ¥ã€‚</p><p id="b4bb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¸ºäº†ä½¿å®ƒæ›´ç®€å•ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘å°†åªç¼–å†™æµ‹è¯•ç”¨ä¾‹:</p><p id="ed1c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">a.æ‰€æœ‰å…·æœ‰çœŸå®ä»·å€¼çš„é“å…·</p><p id="6f7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">b.æ‰€æœ‰æœ‰è™šå‡ä»·å€¼çš„é“å…·</p><p id="0a10" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¹¶ä½¿ç”¨react-test-rendereråº“å¯¹è¿™äº›åœºæ™¯è¿›è¡Œå¿«ç…§æµ‹è¯•ï¼Œä»¥èŠ‚çœæµ‹è¯•è¿™äº›ç»†èŠ‚çš„æŸ¥è¯¢æ—¶é—´ã€‚</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="b785" class="ms lb in mo b gy mt mu l mv mw">import { cleanup } from '@testing-library/react'<br/>import renderer from 'react-test-renderer'  // renderer for snapshot test<br/>import UserInfo from '../UserInfo'</span><span id="1100" class="ms lb in mo b gy ni mu l mv mw">afterEach(cleanup)</span><span id="2894" class="ms lb in mo b gy ni mu l mv mw">describe('UserInfo.jsx', () =&gt; {<br/>  it('snapshot renders correctly, truthy values', () =&gt; {<br/>    const tree = renderer<br/>      .create(&lt;UserInfo<br/>          userId="202200001"<br/>          userName="Test User"<br/>          userImg="./test_user.img"<br/>        /&gt;)<br/>      .toJSON()<br/>    expect(tree).toMatchSnapshot()<br/>  })<br/>  it('snapshot renders correctly, falsy values', () =&gt; {<br/>    const tree = renderer<br/>      .create(&lt;UserInfo/&gt;)<br/>      .toJSON()<br/>    expect(tree).toMatchSnapshot()<br/>  })<br/>})</span></pre><ul class=""><li id="4238" class="nj nk in jx b jy jz kc kd kg nl kk nm ko nn ks no np nq nr bi translated">æ ¹æ®ç¼©å‡å™¨æ¸²æŸ“</li></ul><p id="ff45" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æµ‹è¯•å› å‡é€Ÿå™¨çŠ¶æ€è€Œå¼‚çš„ç»„ä»¶ä¸æœ€åä¸€ç§æƒ…å†µéå¸¸ç›¸ä¼¼ã€‚æ‚¨å¯ä»¥å°†reducersçš„çŠ¶æ€æ¨¡æ‹Ÿæˆç‰¹å®šçš„å€¼ï¼Œå¹¶å‘ˆç°ç»„ä»¶ã€‚ç„¶åï¼ŒåŒæ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä¸€äº›æŸ¥è¯¢æˆ–å¿«ç…§æµ‹è¯•æ¥æ£€æŸ¥ç»“æœã€‚</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="1186" class="ms lb in mo b gy mt mu l mv mw">import { cleanup } from '@testing-library/react'<br/>import renderer from 'react-test-renderer'<br/>import MockProvider from '@jest/mock/MockProvider'<br/>import createMockStore from '@jest/mock/store/createMockStore'<br/>import UserInfoV2 from '../UserInfoV2'</span><span id="0774" class="ms lb in mo b gy ni mu l mv mw">afterEach(cleanup)</span><span id="14d1" class="ms lb in mo b gy ni mu l mv mw">describe('UserInfoV2.jsx', () =&gt; {<br/>  it('snapshot renders correctly, truthy values', () =&gt; {<br/>    const store = createMockStore({<br/>      userInfo: {<br/>        userId: '202200001',<br/>        userName: 'Test User',<br/>        userImg: './test_user.img'<br/>      }<br/>    })<br/>    const tree = renderer<br/>      .create(&lt;MockProvider mockStore={store}&gt;<br/>        &lt;UserInfoV2 /&gt;<br/>      &lt;/MockProvider&gt;)<br/>      .toJSON()<br/>    expect(tree).toMatchSnapshot()<br/>  })<br/>  it('snapshot renders correctly, falsy values', () =&gt; {<br/>    const store = createMockStore({<br/>      userInfo: {<br/>        userId: '',<br/>        userName: '',<br/>        userImg: ''<br/>      }<br/>    })<br/>    const tree = renderer<br/>      .create(&lt;MockProvider mockStore={store}&gt;<br/>        &lt;UserInfoV2 /&gt;<br/>      &lt;/MockProvider&gt;)<br/>      .toJSON()<br/>    expect(tree).toMatchSnapshot()<br/>  })<br/>})</span></pre><p id="ac6f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 2ã€‚å…·æœ‰é—´éš”å’Œæ‰¿è¯ºçš„ç»„ä»¶</strong></p><p id="0daf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæœ‰ä»€ä¹ˆäº‹æƒ…éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆï¼Œæ‚¨åº”è¯¥å°è¯•waitForå’ŒfindByæŸ¥è¯¢ã€‚ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¾‹å­ï¼Œæ‰€ä»¥æˆ‘å°†è·³è¿‡ç»†èŠ‚ã€‚</p><p id="a50c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 3ã€‚å¸¦æŒ‚é’©çš„ç»„ä»¶</strong></p><p id="940c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ­£å¦‚åœ¨æ¨¡ä»¿éƒ¨åˆ†æåˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jestæ¥æ¨¡ä»¿æ‰€æœ‰å¯¼å…¥çš„æ¨¡å—ã€‚é’©å­ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼</p><ul class=""><li id="b721" class="nj nk in jx b jy jz kc kd kg nl kk nm ko nn ks no np nq nr bi translated">SPAè·¯ç”±å‚æ•°</li></ul><p id="998c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªä½¿ç”¨react-router-domåº“ä¸­çš„useParamsé’©å­çš„æ•°æ®é¡µé¢ç»„ä»¶:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="63be" class="ms lb in mo b gy mt mu l mv mw">import { useParams } from 'react-router-dom'</span><span id="3065" class="ms lb in mo b gy ni mu l mv mw">const DataPage = (props) =&gt; {<br/>  const { dataId = '' } = useParams()<br/>  const data = {<br/>    data1: 'this is the content form data 1',<br/>    data2: 'this is the content form data 2',<br/>  }<br/>  return (<br/>    &lt;div className="data-page"&gt;<br/>      { <br/>        data[dataId]<br/>          ? &lt;div className="data-page__content"&gt;{data[dataId]}&lt;/div&gt;<br/>          : &lt;div className="data-page__not-found"&gt;content not found&lt;/div&gt;<br/>      }<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="15f4" class="ms lb in mo b gy ni mu l mv mw">export default DataPage</span></pre><p id="87d5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™é‡Œæœ‰ä¸€ç§æ¨¡æ‹ŸuseParamså°†è¿”å›çš„å€¼çš„æ–¹æ³•:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="8c9d" class="ms lb in mo b gy mt mu l mv mw">import { screen, render, cleanup } from '@testing-library/react'<br/>import DataPage from '../DataPage'</span><span id="c145" class="ms lb in mo b gy ni mu l mv mw">afterEach(cleanup)</span><span id="1666" class="ms lb in mo b gy ni mu l mv mw">jest.mock('react-router-dom', () =&gt; ({<br/>  ...jest.requireActual('react-router-dom'),<br/>  useParams: () =&gt; ({<br/>    dataId: 'data1'<br/>  })<br/>}))</span><span id="7bb0" class="ms lb in mo b gy ni mu l mv mw">describe('DataPage.jsx', () =&gt; {<br/>  it('render the content if data exist', () =&gt; {<br/>    render(&lt;DataPage /&gt;)<br/>    screen.getByText('this is the content form data 1')<br/>  })<br/>})</span></pre><ul class=""><li id="626d" class="nj nk in jx b jy jz kc kd kg nl kk nm ko nn ks no np nq nr bi translated">è‡ªå®šä¹‰æŒ‚é’©è¿”å›æ•°ç»„ä¸­çš„å‡½æ•°</li></ul><p id="3cba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªç»„ä»¶:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="a115" class="ms lb in mo b gy mt mu l mv mw">import { useSearchData } from '@js/hooks/searchData'</span><span id="6391" class="ms lb in mo b gy ni mu l mv mw">const SearchPage = (props) =&gt; {<br/>  const [search] = useSearchData() // the custom hook<br/>  const onSearchButtonClick = () =&gt; {<br/>    search()<br/>  }</span><span id="6981" class="ms lb in mo b gy ni mu l mv mw">return (<br/>    &lt;div className="search-page"&gt;<br/>      &lt;button onClick={onSearchButtonClick}&gt;search&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="4b01" class="ms lb in mo b gy ni mu l mv mw">export default SearchPage</span></pre><p id="0e82" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‚¨å¯ä»¥ç”¨è¿™ç§æ–¹å¼æ¨¡ä»¿è‡ªå®šä¹‰æŒ‚é’©:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="67ae" class="ms lb in mo b gy mt mu l mv mw">import { screen, render, cleanup } from '@testing-library/react'<br/>import userEvent from '@testing-library/user-event'<br/>import SearchPage from '../SearchPage'<br/>import { useSearchData } from '@js/hooks/searchData'</span><span id="686a" class="ms lb in mo b gy ni mu l mv mw">afterEach(cleanup)</span><span id="7904" class="ms lb in mo b gy ni mu l mv mw">jest.mock('@js/hooks/searchData', () =&gt; {<br/>  const spy = jest.fn()<br/>  return {<br/>    useSearchData: () =&gt; {<br/>      return [spy]<br/>    }<br/>  }<br/>})</span><span id="32c2" class="ms lb in mo b gy ni mu l mv mw">describe('SearchPage.jsx', () =&gt; {<br/>  it('render the content if data exist', () =&gt; {<br/>    render(&lt;SearchPage /&gt;)<br/>    // initialize the imported function,<br/>    // and get the reference of the spy<br/>    const [search] = useSearchData()<br/>    userEvent.click(screen.getByText('search'))<br/>    expect(search).toHaveBeenCalled()<br/>  })<br/>})</span></pre><p id="e0d1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 4ã€‚å¸¦æœ‰å¯¼å…¥æ¨¡å—çš„ç»„ä»¶</strong></p><p id="0d4e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°ç ”ç©¶æµ‹è¯•æ•°æ®é¡µé¢ç»„ä»¶çš„æƒ…å†µã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªèƒ½æ¨¡æ‹Ÿä¸€æ¬¡useParamsçš„å®ç°ã€‚</p><p id="d0cc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœå¸Œæœ›ä¿æŒå¯æ“ä½œæ€§ï¼Œå¯ä»¥å…ˆæ¨¡æ‹Ÿæ•´ä¸ªæ¨¡å—ï¼Œåœ¨å‘ˆç°ç»„ä»¶ä¹‹å‰ä½¿ç”¨mockImplementationOnceæˆ–mockReturnValueOnceæ–¹æ³•ã€‚é€šè¿‡è¿™æ ·åšï¼Œæ‚¨å¯ä»¥ä¸ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ¨¡æ‹Ÿå‡½æ•°çš„å®ç°æˆ–è¿”å›å€¼ã€‚</p><p id="5a86" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ­¤å¤–ï¼Œå¦‚æœç»„ä»¶ä¸­çš„ä»£ç ä¾èµ–äºå‡½æ•°çš„ç»“æœï¼Œæ¨¡ä»¿å‡½æ•°çš„å®ç°å¯ä»¥è®©æˆ‘ä»¬é¿å…é”™è¯¯ã€‚</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="5830" class="ms lb in mo b gy mt mu l mv mw">import { screen, render, cleanup } from '<a class="ae md" href="http://twitter.com/testing" rel="noopener ugc nofollow" target="_blank">@testing</a>-library/react'<br/>import { useParams } from 'react-router-dom'<br/>import DataPage from '../DataPage'</span><span id="d68b" class="ms lb in mo b gy ni mu l mv mw">afterEach(cleanup)</span><span id="93fb" class="ms lb in mo b gy ni mu l mv mw">jest.mock('react-router-dom', () =&gt; {<br/>  const spy = jest.fn()<br/>  return {<br/>    ...jest.requireActual('react-router-dom'),<br/>    useParams: spy<br/>  }<br/>})</span><span id="97ae" class="ms lb in mo b gy ni mu l mv mw">describe('DataPage.jsx', () =&gt; {<br/>  it('render the content if data exist', () =&gt; {<br/>    useParams.mockImplementationOnce(() =&gt; ({<br/>      dataId: 'data1'<br/>    }))<br/>    render(&lt;DataPage /&gt;)<br/>    screen.getByText('this is the content form data 1')<br/>  })<br/>  it('render the hint if data does not exist', () =&gt; {<br/>    useParams.mockReturnValueOnce({<br/>      dataId: ''<br/>    })<br/>    render(&lt;DataPage /&gt;)<br/>    screen.getByText('content not found')<br/>  })<br/>})</span></pre><p id="a559" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">é€šå¸¸ï¼Œæ‚¨å¯ä»¥æ¨¡ä»¿æ•´ä¸ªåº“å¹¶ç»§ç»­:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="9e12" class="ms lb in mo b gy mt mu l mv mw">jest.mock('react-router-dom')</span></pre><p id="f02d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ¨¡ä»¿æ•´ä¸ªreact-router-domåº“ï¼Œç”±äºæŸç§åŸå› ï¼ŒuseParamså±æ€§å°†å˜å¾—æœªå®šä¹‰ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­çš„æ–¹æ³•ã€‚</p><p id="6fe0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 5ã€‚åˆ†æ´¾åŠ¨ä½œçš„ç»„ä»¶</strong></p><p id="656b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å°½ç®¡æŒ‡å—å‘Šè¯‰æˆ‘ä»¬è¦é¿å…æµ‹è¯•å®ç°ç»†èŠ‚ï¼Œä½†æˆ‘ä»ç„¶è®¤ä¸ºæµ‹è¯•ç»„ä»¶åˆ†æ´¾çš„åŠ¨ä½œæ˜¯å¿…è¦çš„ã€‚æˆ‘å…³å¿ƒçš„äº‹æƒ…æ˜¯:</p><ul class=""><li id="a190" class="nj nk in jx b jy jz kc kd kg nl kk nm ko nn ks no np nq nr bi translated"><strong class="jx io">æ—¶æœº:</strong>æ˜¯å¦åœ¨æ­£ç¡®çš„æ—¶é—´ä»¥æ­£ç¡®çš„è¡ŒåŠ¨è°ƒåº¦ç«ç¾ï¼Ÿ</li><li id="5575" class="nj nk in jx b jy ns kc nt kg nu kk nv ko nw ks no np nq nr bi translated"><strong class="jx io">å‚æ•°:</strong>å‘é€ç»™åŠ¨ä½œçš„å‚æ•°æ˜¯å¦æ­£ç¡®ï¼Ÿ</li></ul><p id="0ae9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å®é™…ä¸Šï¼Œæ‚¨è¿˜å¯ä»¥æµ‹è¯•é‚£äº›å¯¼å…¥çš„å‡½æ•°(åŒ…æ‹¬å¯¼å…¥çš„æ¨¡å—ã€åŠ¨ä½œå’Œåº“)çš„è®¡æ—¶å’Œå‚æ•°</p><p id="bfd2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¥‡æ€ªçš„ä¾‹å­ï¼Œä½†æˆ‘è¯•å›¾åœ¨ä¸€ä¸ªç»„ä»¶ä¸­æ¶µç›–æ›´å¹¿æ³›çš„åœºæ™¯:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="3bdc" class="ms lb in mo b gy mt mu l mv mw">import { useEffect } from 'react'<br/>import { useDispatch, useSelector } from 'react-redux'<br/>import {<br/>  setSettings,  // a plain object action<br/>  startGetSettings  // a redux-thunk action<br/>} from '@js/actions'</span><span id="f894" class="ms lb in mo b gy ni mu l mv mw">const DemoPage = (props) =&gt; {<br/>  const dispatch = useDispatch()<br/>  const { title = '' } = useSelector(state =&gt; state.settings)</span><span id="4a07" class="ms lb in mo b gy ni mu l mv mw">  useEffect(() =&gt; {<br/>    dispatch(setSettings({<br/>      title: 'Title set when the component mount.'<br/>    }))<br/>  }, [])</span><span id="36b8" class="ms lb in mo b gy ni mu l mv mw">  const onFetchClick = () =&gt; {<br/>    dispatch(startGetSettings({ foo: 'bar' }))<br/>  }</span><span id="e9e0" class="ms lb in mo b gy ni mu l mv mw">  return (<br/>    &lt;div className="demo-page"&gt;<br/>      &lt;h1&gt;{title}&lt;/h1&gt;<br/>      &lt;button onClick={onFetchClick}&gt;fetch settings&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="b3bb" class="ms lb in mo b gy ni mu l mv mw">export default DemoPage</span></pre><p id="877a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæˆ‘ä»¬æµ‹è¯•ä¸€ä¸ªè¿”å›æ™®é€šå¯¹è±¡çš„åŠ¨ä½œï¼Œè¿™æ˜¯éå¸¸ç®€å•çš„:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="1126" class="ms lb in mo b gy mt mu l mv mw">it('should dispatch setSettings action when the component mount', () =&gt; {<br/>  const mockStore = createMockStore({<br/>    settings: {}<br/>  })<br/>  render(&lt;MockProvider mockStore={mockStore}&gt;<br/>    &lt;DemoPage /&gt;<br/>  &lt;/MockProvider&gt;)<br/>  // the Nth element from the result of the getActions method<br/>  // will be the object sent by Nth dispatch.<br/>  expect(mockStore.getActions()[0].type).toBe(actions.SET_SETTINGS)<br/>  expect(mockStore.getActions()[0].data.title).toBe('Title set when the component mount.')<br/>  expect(mockStore.dispatch).toHaveBeenCalledTimes(1)<br/>})</span></pre><p id="e8df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æ­£åœ¨æµ‹è¯•ä¸€ä¸ªredux-thunkåŠ¨ä½œï¼Œè¿™å°†æ˜¯éå¸¸éš¾ä»¥ç®¡ç†çš„ã€‚å› ä¸ºåŠ¨ä½œåº”è¯¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœä½ æŠŠè¿”å›å€¼å½“ä½œä¸€ä¸ªæ‰¿è¯ºï¼Œå°±ä¼šå¯¼è‡´ä¸€ä¸ªé”™è¯¯ã€‚</p><p id="cbed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å› æ­¤ï¼Œæˆ‘å†³å®šæŠŠè¿™äº›åŠ¨ä½œæ¨¡ä»¿æˆä¸€èˆ¬çš„åŠ¨ä½œ:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="b618" class="ms lb in mo b gy mt mu l mv mw">jest.mock('@js/actions', () =&gt; ({<br/>  // keep the functionality of the action module<br/>  ...jest.requireActual('@js/actions'),<br/>  // replace the thunk-action into a plain object action,<br/>  // to test the received parameters.<br/>  startGetSettings: parameters =&gt; ({ type: 'MOCK', parameters })<br/>}))</span></pre><p id="3988" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¹¶ç”¨getActionsæ–¹æ³•çš„ç»“æœéªŒè¯æ—¶é—´å’Œå‚æ•°:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="b0a8" class="ms lb in mo b gy mt mu l mv mw">it('should dispatch startGetSettings action when user click the button', async () =&gt; {<br/>  const mockStore = createMockStore({<br/>    settings: {}<br/>  })<br/>  render(&lt;MockProvider mockStore={mockStore}&gt;<br/>    &lt;DemoPage /&gt;<br/>  &lt;/MockProvider&gt;)<br/>  userEvent.click(screen.getByText('fetch settings'))<br/>  await waitFor(() =&gt; {<br/>    expect(mockStore.getActions()[1].parameters)<br/>      .toEqual({ foo: 'bar' })<br/>    expect(mockStore.dispatch).toHaveBeenCalledTimes(2)<br/>  })<br/>})</span></pre><p id="c360" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™é‡Œçš„å…³é”®ç‚¹æ˜¯å®šä¹‰è¾¹ç•Œã€‚å¦‚æœæ‚¨æ­£åœ¨ä¸ºä¸€ä¸ªç»„ä»¶ç¼–å†™æµ‹è¯•ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥å…³æ³¨è¯¥ç»„ä»¶ä¸­çš„é€»è¾‘ã€‚æµ‹è¯•é‚£äº›å¯¼å…¥å‡½æ•°çš„æ—¶é—´å’Œå‚æ•°å°±è¶³å¤Ÿäº†ã€‚æœ€å¥½åˆ›å»ºç›¸å…³çš„æµ‹è¯•æ–‡ä»¶æ¥æµ‹è¯•è¿™äº›éƒ¨åˆ†çš„ç»†èŠ‚ã€‚</p><h1 id="759f" class="la lb in bd lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx bi translated">ç»“å±€</h1><p id="df62" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">æˆ‘æƒ³æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±ç¼–å†™æµ‹è¯•çš„æ–¹å¼ï¼Œè¿™å°±æ˜¯æˆ‘å®ç°è‡ªå·±çš„æ–¹å¼ã€‚æ¬¢è¿åœ¨è¯„è®ºä¸­ç•™ä¸‹ä½ çš„æƒ³æ³•ï¼Œè¿™æ ·æˆ‘ä»¬éƒ½èƒ½æˆä¸ºæ›´å¥½çš„å¼€å‘è€…ğŸ¤“</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="aab7" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">é˜…è¯»æ›´å¤šå…³äºå•å…ƒæµ‹è¯•çš„å†…å®¹</h1><ul class=""><li id="87ce" class="nj nk in jx b jy ly kc lz kg nx kk ny ko nz ks no np nq nr bi translated"><a class="ae md" href="https://medium.com/@tabsteveyang/setup-jest-and-react-testing-library-for-unit-testing-9be43df32fd5" rel="noopener">ä¸ºå•å…ƒæµ‹è¯•å»ºç«‹Jestå’ŒReactæµ‹è¯•åº“</a></li></ul><h1 id="d6b2" class="la lb in bd lc ld me lf lg lh mf lj lk ll mg ln lo lp mh lr ls lt mi lv lw lx bi translated">å‚è€ƒ</h1><ol class=""><li id="06c0" class="nj nk in jx b jy ly kc lz kg nx kk ny ko nz ks oa np nq nr bi translated"><a class="ae md" href="https://jestjs.io/docs/mock-functions" rel="noopener ugc nofollow" target="_blank">https://jestjs.io/docs/mock-functions</a></li><li id="adbc" class="nj nk in jx b jy ns kc nt kg nu kk nv ko nw ks oa np nq nr bi translated"><a class="ae md" href="https://kentcdodds.com/blog/testing-implementation-details" rel="noopener ugc nofollow" target="_blank">https://kentcdodds.com/blog/testing-implementation-details</a></li><li id="36f0" class="nj nk in jx b jy ns kc nt kg nu kk nv ko nw ks oa np nq nr bi translated">https://testing-library.com/docs/ecosystem-user-event/<a class="ae md" href="https://testing-library.com/docs/ecosystem-user-event/" rel="noopener ugc nofollow" target="_blank"/></li><li id="587d" class="nj nk in jx b jy ns kc nt kg nu kk nv ko nw ks oa np nq nr bi translated"><a class="ae md" href="https://testing-library.com/docs/react-testing-library/cheatsheet/" rel="noopener ugc nofollow" target="_blank">https://testing-library . com/docs/react-testing-library/cheat sheet/</a></li><li id="4a74" class="nj nk in jx b jy ns kc nt kg nu kk nv ko nw ks oa np nq nr bi translated"><a class="ae md" href="https://www.codecademy.com/learn/learn-react-testing/modules/react-testing-library/cheatsheet" rel="noopener ugc nofollow" target="_blank">https://www . codecademy . com/learn/learn-react-testing/modules/react-testing-library/cheat sheet</a></li></ol><p id="7f21" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ob">æ›´å¤šå†…å®¹çœ‹</em> <a class="ae md" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ob">è¯´ç™½äº†ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae md" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ob">å…è´¹å‘¨æŠ¥</em> </strong> </a> <em class="ob">ã€‚åœ¨æˆ‘ä»¬çš„</em> <a class="ae md" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ob">ç¤¾åŒºä¸å’Œè°</em> </strong> </a> <em class="ob">è·å¾—ç‹¬å®¶è·å–å†™ä½œæœºä¼šå’Œå»ºè®®ã€‚</em></strong></a></p></div></div>    
</body>
</html>