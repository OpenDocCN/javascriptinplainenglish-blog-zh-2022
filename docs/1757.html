<html>
<head>
<title>Add Firebase Analytics to React Application — The Simple Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">添加Firebase分析来应对应用程序—简单的方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-firebase-analytics-to-react-application-the-simple-way-fdfa6767bd24?source=collection_archive---------2-----------------------#2022-04-17">https://javascript.plainenglish.io/adding-firebase-analytics-to-react-application-the-simple-way-fdfa6767bd24?source=collection_archive---------2-----------------------#2022-04-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="abeb" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用Firebase Analytics测量React应用程序的性能等等。</h2></div><p id="9aa9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">数据无处不在。能够实时看到你的网站或应用程序的运行情况是一件幸事。否则，人们如何知道改进、添加或删除什么，以使他们的产品和服务更好？</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/e24ddb24c756df17d4f8012af403b3b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9b-wQ5lh9kREUjsGkiH2xA.png"/></div></div></figure><p id="f80a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我一直想在我的几个项目中加入(Firebase)谷歌分析，看看哪些可行，哪些不可行。但这是一个令人沮丧的过程，直到现在。这是真的；当你在大量令人难以置信的研究、尝试和错误之后，自己想出一些东西时，那感觉真的很棒！</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="a11e" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">入门指南🏃‍♂️</h1><p id="70df" class="pw-post-body-paragraph kc kd in ke b kf mj jo kh ki mk jr kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">为了将Firebase Analytics添加到React应用程序中，我们将使用<code class="fe mo mp mq mr b">ga-4-react</code>包。该软件包可用于将Google Analytics跟踪代码包含在使用React作为其前端代码库的网站或应用程序中。</p><h2 id="ad5d" class="ms ls in bd lt mt mu dn lx mv mw dp mb kl mx my md kp mz na mf kt nb nc mh nd bi translated">先决条件✏️</h2><ol class=""><li id="4f0f" class="ne nf in ke b kf mj ki mk kl ng kp nh kt ni kx nj nk nl nm bi translated">这是不言而喻的，但是当然，我们需要一个react应用程序来开始。如果你已经有了自己的项目，你可以使用它，或者简单地用<code class="fe mo mp mq mr b">npx create-react-app &lt;app-name&gt;</code>引导一个新的react应用。</li><li id="c2fc" class="ne nf in ke b kf nn ki no kl np kp nq kt nr kx nj nk nl nm bi translated">一个Firebase帐户和一个添加react应用程序的应用程序。你可以在这里开始使用Firebase<a class="ae ns" href="https://firebase.google.com" rel="noopener ugc nofollow" target="_blank"/>。如果你不知道如何创建一个新的Firebase应用程序，你可以参考这里的<a class="ae ns" href="https://firebase.google.com/docs/guides" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</li></ol><h1 id="5a3b" class="lr ls in bd lt lu nt lw lx ly nu ma mb jt nv ju md jw nw jx mf jz nx ka mh mi bi translated">安装依赖项💻</h1><ol class=""><li id="de79" class="ne nf in ke b kf mj ki mk kl ng kp nh kt ni kx nj nk nl nm bi translated">我们需要的唯一依赖项是<code class="fe mo mp mq mr b">ga-4-react</code>模块。运行<code class="fe mo mp mq mr b">npm i — save ga-4-react</code>将其安装到您的项目中。</li><li id="7f7f" class="ne nf in ke b kf nn ki no kl np kp nq kt nr kx nj nk nl nm bi translated">如果你打算使用Firebase提供的其他服务，你应该使用<code class="fe mo mp mq mr b">npm I --save firebase</code>为JS安装Firebase。当您创建web应用程序并将其添加到Firebase app时，系统会提示您添加此项。</li></ol><h1 id="9d58" class="lr ls in bd lt lu nt lw lx ly nu ma mb jt nv ju md jw nw jx mf jz nx ka mh mi bi translated">使用GA4React模块🚀</h1><ul class=""><li id="aebf" class="ne nf in ke b kf mj ki mk kl ng kp nh kt ni kx ny nk nl nm bi translated">将分析添加到Firebase应用程序后，您需要将React应用程序连接到Firebase的只是<strong class="ke io">测量ID </strong>。您将在Firebase网站上看到这一内容——轻松找到您的测量ID。</li></ul><blockquote class="nz"><p id="8d3c" class="oa ob in bd oc od oe of og oh oi kx dk translated">要开始收集数据，请确保您的网站使用<strong class="ak">测量ID: G-0SPQ2Z9EE2 </strong>进行标记</p></blockquote><ul class=""><li id="ed01" class="ne nf in ke b kf oj ki ok kl ol kp om kt on kx ny nk nl nm bi translated">一旦你有了这些，我们需要做的就是，每当用户访问某个页面时，如何触发分析向Firebase发送数据。为此，可以在<code class="fe mo mp mq mr b">&lt;App&gt;</code>组件中添加一个函数，该函数将在应用程序的每个渲染上运行。</li><li id="b0b7" class="ne nf in ke b kf nn ki no kl np kp nq kt nr kx ny nk nl nm bi translated">跟踪的最基本的东西是用户访问的页面。让我们开始吧！</li></ul><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="oo op l"/></div><figcaption class="oq or gj gh gi os ot bd b be z dk">Snippet for the <strong class="ak">trackPageForAnalytics</strong> function and <strong class="ak">&lt;App&gt;</strong> component</figcaption></figure><ul class=""><li id="7902" class="ne nf in ke b kf kg ki kj kl ou kp ov kt ow kx ny nk nl nm bi translated">在上面的要点中，<code class="fe mo mp mq mr b">App</code>组件调用并使用一个名为<code class="fe mo mp mq mr b">trackPageForAnalytics()</code>的函数。这个函数的唯一目的是跟踪路径并将其发送到Firebase。</li><li id="8874" class="ne nf in ke b kf nn ki no kl np kp nq kt nr kx ny nk nl nm bi translated">为了跟踪用户的位置，利用<code class="fe mo mp mq mr b">useLocation()</code>钩子将是一个好主意。这就是我们所做的！</li><li id="3cdf" class="ne nf in ke b kf nn ki no kl np kp nq kt nr kx ny nk nl nm bi translated">一旦我们导入了<code class="fe mo mp mq mr b">GA4React</code>，用我们的Firebase app measurement ID初始化了一个新的实例，我们就可以调用它的<code class="fe mo mp mq mr b">initialise()</code>方法，返回一个承诺；于是有了<code class="fe mo mp mq mr b">.then()</code>。</li><li id="6b6b" class="ne nf in ke b kf nn ki no kl np kp nq kt nr kx ny nk nl nm bi translated">在获取响应对象时，我们调用它的<code class="fe mo mp mq mr b">pageview()</code>方法，并为页面传递三个参数——<code class="fe mo mp mq mr b">path</code>、<code class="fe mo mp mq mr b">location</code>和<code class="fe mo mp mq mr b">title</code>。标题将是您稍后在分析仪表板上看到的内容。</li></ul><h1 id="48c6" class="lr ls in bd lt lu nt lw lx ly nu ma mb jt nv ju md jw nw jx mf jz nx ka mh mi bi translated">斗牛中的最后一剑🤞</h1><p id="813c" class="pw-post-body-paragraph kc kd in ke b kf mj jo kh ki mk jr kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">希望我们所做的一切都是正确的，刷新几次React应用程序并重新加载Firebase Analytics仪表板。仪表板上的数据更新可能需要一些时间，但您会在那里看到应用程序的页面访问数据。您也可以点击<strong class="ke io">查看实时数据</strong>来查看实时数据。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ox"><img src="../Images/b30240c9d196aaa4618483630378a212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vQ2LqFNr3gS5hBWU8CiTvQ.png"/></div></div><figcaption class="oq or gj gh gi os ot bd b be z dk">Firebase Analytics dashboard view</figcaption></figure><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi oy"><img src="../Images/087a050a4ec96ddad92e48fdabd8b439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zrTb7o5bJ8j551LjkFQDaQ.png"/></div></div><figcaption class="oq or gj gh gi os ot bd b be z dk">Firebase Analytics Realtime Data View</figcaption></figure><h1 id="15c7" class="lr ls in bd lt lu nt lw lx ly nu ma mb jt nv ju md jw nw jx mf jz nx ka mh mi bi translated">结论</h1><p id="75af" class="pw-post-body-paragraph kc kd in ke b kf mj jo kh ki mk jr kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">在React应用上追踪用户的移动可能是理解用户行为的良好开端。当然，使用Firebase Analytics可以实现更多功能，比如人口统计、事件等等。官方文件总是一个很好的开始和理解它如何工作的地方。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><p id="adce" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢您花时间阅读这篇文章。我希望你觉得有趣和有帮助。请务必查看我的其他文章，其中我谈到了React、Node.js以及相关的内容。</p><p id="e99e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结束！</p><p id="44a0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="oz">更多内容看</em> <a class="ae ns" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="oz">说白了。报名参加我们的</em> <a class="ae ns" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="oz">免费周报</em> </strong> </a> <em class="oz">。关注我们</em><a class="ae ns" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="oz">Twitter</em></strong></a><em class="oz">和</em><a class="ae ns" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="oz">LinkedIn</em></strong></a><em class="oz">。加入我们的</em> <a class="ae ns" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="oz">社区</em> </strong> </a> <em class="oz">。</em></strong></a></p></div></div>    
</body>
</html>