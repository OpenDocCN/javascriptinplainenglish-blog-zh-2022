<html>
<head>
<title>How to Remove an Element OnClick in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中移除元素OnClick</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-remove-element-onclick-4714b294824a?source=collection_archive---------3-----------------------#2022-09-08">https://javascript.plainenglish.io/react-remove-element-onclick-4714b294824a?source=collection_archive---------3-----------------------#2022-09-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a12c7c8f341975cd861a65d1a57ba0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-ynwvHTKgpklaBP3B6Iww.png"/></div></div></figure><p id="31a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将学习如何在React中轻松地从DOM onclick中移除元素，无论它是在列表中还是独立的元素。</p><h1 id="5660" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">在React中移除独立元素onclick</h1><p id="e6b3" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">要删除独立元素onclick:</p><ol class=""><li id="5b92" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated">将可见性状态作为一个<code class="fe mf mg mh mi b">Boolean</code>值存储在状态变量中，并使用它的值有条件地呈现元素。</li><li id="40ac" class="lw lx in jx b jy mj kc mk kg ml kk mm ko mn ks mb mc md me bi translated">将事件处理程序附加到元素的<code class="fe mf mg mh mi b">onClick</code>事件。</li><li id="d768" class="lw lx in jx b jy mj kc mk kg ml kk mm ko mn ks mb mc md me bi translated">在事件处理程序中，对可见性状态的值求反，以从DOM中移除元素。</li></ol><p id="d56d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有一个例子可以说明这一点:</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="de7b" class="mw ku in mi b gy mx my l mz na">import { useState } from 'react';</span><span id="9b07" class="mw ku in mi b gy nb my l mz na">export default function App() {<br/>  const [visible, setVisible] = useState(true);</span><span id="6944" class="mw ku in mi b gy nb my l mz na">  const removeElement = () =&gt; {<br/>    setVisible((prev) =&gt; !prev);<br/>  };</span><span id="7008" class="mw ku in mi b gy nb my l mz na">  return (<br/>    &lt;div&gt;<br/>      Click to remove element<br/>      &lt;br /&gt;<br/>      {visible &amp;&amp; (<br/>        &lt;button onClick={removeElement}&gt;Remove&lt;/button&gt;<br/>      )}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/1901bdb0c4dc4b450e0c4840a32917ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/0*SGD7wnRFWdDGevuG.gif"/></div></figure><p id="426f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们使用<code class="fe mf mg mh mi b">useState()</code>在组件中创建一个状态变量。这个钩子返回一个包含两个变量的数组，通常称为<code class="fe mf mg mh mi b">state</code>和<code class="fe mf mg mh mi b">setState</code>。<code class="fe mf mg mh mi b">state</code>变量(<code class="fe mf mg mh mi b">visible</code>)保存当前的可见性状态，<code class="fe mf mg mh mi b">setState</code>函数(<code class="fe mf mg mh mi b">setVisible</code>)更新它。</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="c98f" class="mw ku in mi b gy mx my l mz na">const [visible, setVisible] = useState(true);</span></pre><p id="f73a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们为按钮的<code class="fe mf mg mh mi b">onClick</code>事件设置了一个事件处理程序，这样当按钮被点击时，处理程序函数就会被调用。</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="9afc" class="mw ku in mi b gy mx my l mz na">&lt;button onClick={removeElement}&gt;Remove&lt;/button&gt;</span></pre><p id="d22f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在处理函数中，我们使用可见性状态的<code class="fe mf mg mh mi b">setState</code>函数来更新状态。</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="74af" class="mw ku in mi b gy mx my l mz na">const removeElement = () =&gt; {<br/>  setVisible((prev) =&gt; !prev);<br/>};</span></pre><p id="b91c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们没有直接传递取反后的值，而是传递一个回调函数给返回取反后的值的<code class="fe mf mg mh mi b">setState</code>。这确保了我们总是获得最新的状态值。</p><h2 id="e74d" class="mw ku in bd kv nd ne dn kz nf ng dp ld kg nh ni lh kk nj nk ll ko nl nm lp nn bi translated">小费</h2><p id="8307" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">出于性能原因，React批处理状态更改，因此在调用<code class="fe mf mg mh mi b">setState</code>后，状态可能不会按照我们预期的顺序立即更新。这就是为什么当从先前状态的数据计算新状态时，我们总是将函数传递给<code class="fe mf mg mh mi b">setState</code>。</p><h1 id="a358" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">从列表中移除元素onclick</h1><p id="1c1e" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">要从列表onclick中删除元素:</p><ol class=""><li id="574f" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated">将事件处理程序附加到表示列表的数组中每个元素的<code class="fe mf mg mh mi b">onClick</code>事件。</li><li id="6fda" class="lw lx in jx b jy mj kc mk kg ml kk mm ko mn ks mb mc md me bi translated">在特定元素的事件处理程序中，调用数组上的<code class="fe mf mg mh mi b">filter()</code>方法，为数组中除了要移除的元素之外的每个元素指定一个条件<code class="fe mf mg mh mi b">true</code>。</li><li id="18b6" class="lw lx in jx b jy mj kc mk kg ml kk mm ko mn ks mb mc md me bi translated">使用<code class="fe mf mg mh mi b">setState</code>用<code class="fe mf mg mh mi b">filter()</code>返回的结果更新状态数组。</li></ol><p id="5217" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如:</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="896f" class="mw ku in mi b gy mx my l mz na">import { useState } from 'react';</span><span id="cd2d" class="mw ku in mi b gy nb my l mz na">export default function App() {<br/>  const [fruits, setFruits] = useState([<br/>    'Orange',<br/>    'Banana',<br/>    'Apple',<br/>  ]);</span><span id="fe18" class="mw ku in mi b gy nb my l mz na">  const removeElement = (index) =&gt; {<br/>    const newFruits = fruits.filter((_, i) =&gt; i !== index);<br/>    setFruits(newFruits);<br/>  };</span><span id="d877" class="mw ku in mi b gy nb my l mz na">  return (<br/>    &lt;div&gt;<br/>      {fruits.map((fruit, index) =&gt; (<br/>        &lt;div key={index}&gt;<br/>          &lt;button<br/>            onClick={() =&gt; removeElement(index)}<br/>          &gt;<br/>            {fruit}<br/>          &lt;/button&gt;<br/>          &lt;br /&gt;<br/>          &lt;br /&gt;<br/>        &lt;/div&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/356f537fa60deb89ff157822d0756472.png" data-original-src="https://miro.medium.com/v2/resize:fit:388/0*n7mxkP8-qMy1P36c.gif"/></div></figure><p id="56b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用<code class="fe mf mg mh mi b">map()</code>方法，我们为数组中的每个元素呈现一个按钮。对于每个按钮，我们都附加了一个事件处理程序，它将调用<code class="fe mf mg mh mi b">removeElement()</code>方法，将按钮所代表的元素的索引作为参数传递。</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="a354" class="mw ku in mi b gy mx my l mz na">{fruits.map((fruit, index) =&gt; (<br/>  &lt;div key={index}&gt;<br/>    &lt;button<br/>      onClick={() =&gt; removeElement(index)}<br/>    &gt;<br/>      {fruit}<br/>    &lt;/button&gt;<br/>    &lt;br /&gt;<br/>    &lt;br /&gt;<br/>  &lt;/div&gt;<br/>))}</span></pre><p id="aafa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mf mg mh mi b">removeElement()</code>通过从<a class="ae np" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener ugc nofollow" target="_blank"> filter() </a>回调中返回一个条件来删除一个元素，该条件仅适用于数组中没有将<code class="fe mf mg mh mi b">index</code>传递给<code class="fe mf mg mh mi b">removeIndex()</code>的元素。这样做会将带有那个<code class="fe mf mg mh mi b">index</code>的元素从数组中排除，所以当数组状态被更新时，代表该元素的按钮不再被呈现。</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="1e82" class="mw ku in mi b gy mx my l mz na">const fruits = ['Orange', 'Banana', 'Apple'];</span><span id="2d92" class="mw ku in mi b gy nb my l mz na">const newFruits = fruits.filter((_, index) =&gt; index !== 1);</span><span id="5c05" class="mw ku in mi b gy nb my l mz na">console.log(newFruits); // [ 'Orange', 'Apple' ]</span></pre><h2 id="ea31" class="mw ku in bd kv nd ne dn kz nf ng dp ld kg nh ni lh kk nj nk ll ko nl nm lp nn bi translated">注意:不要在React中直接修改状态</h2><p id="e42e" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">试图通过使用像<code class="fe mf mg mh mi b">splice()</code>这样的函数修改元素来从数组中删除它是行不通的:</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="dc44" class="mw ku in mi b gy mx my l mz na">const removeElement = (index) =&gt; {<br/>  // ⚠️ Mutating the array like this will not update the view<br/>  fruits.splice(index, 1);<br/>};</span></pre><p id="4e05" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">状态在React中是不可变的，所以我们不能通过改变它来更新数组。必须用从<code class="fe mf mg mh mi b">filter()</code>返回的新数组替换它，以便视图更新。</p><h1 id="bc9d" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">单击从列表中删除对象元素</h1><p id="d0c6" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我们也可以使用这种方法从list onclick中删除由对象表示的元素。</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="62c5" class="mw ku in mi b gy mx my l mz na">import { useState } from 'react';</span><span id="917c" class="mw ku in mi b gy nb my l mz na">export default function App() {<br/>  const [fruits, setFruits] = useState([<br/>    { id: 1, name: 'Orange' },<br/>    { id: 2, name: 'Banana' },<br/>    { id: 3, name: 'Apple' },<br/>  ]);</span><span id="8533" class="mw ku in mi b gy nb my l mz na">  const removeElement = (id) =&gt; {<br/>    const newFruits = fruits.filter(<br/>      (fruit) =&gt; fruit.id !== id<br/>    );<br/>    setFruits(newFruits);<br/>  };</span><span id="88ed" class="mw ku in mi b gy nb my l mz na">  return (<br/>    &lt;div&gt;<br/>      {fruits.map((fruit) =&gt; (<br/>        &lt;div key={fruit.id}&gt;<br/>          &lt;button onClick={() =&gt; removeElement(fruit.id)}&gt;<br/>            {fruit.name}<br/>          &lt;/button&gt;<br/>          &lt;br /&gt;<br/>          &lt;br /&gt;<br/>        &lt;/div&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="bc2a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这次我们不是按索引过滤，而是按<code class="fe mf mg mh mi b">id</code>属性过滤，从数组中删除一个项目，并从DOM的列表中删除元素。</p><pre class="mo mp mq mr gt ms mi mt mu aw mv bi"><span id="4060" class="mw ku in mi b gy mx my l mz na">const fruits = [<br/>  { id: 1, name: 'Orange' },<br/>  { id: 2, name: 'Banana' },<br/>  { id: 3, name: 'Apple' },<br/>];</span><span id="ca8f" class="mw ku in mi b gy nb my l mz na">const newFruits = fruits.filter((fruit) =&gt; fruit.id !== 2);</span><span id="924b" class="mw ku in mi b gy nb my l mz na">console.log(newFruits);<br/>// [ { id: 1, name: 'Orange' }, { id: 3, name: 'Apple' } ]</span></pre></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><p id="86a2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nx">最初发表于</em><a class="ae np" href="https://cbdev.link/922aee" rel="noopener ugc nofollow" target="_blank"><em class="nx">codingbeautydev.com</em></a></p><h1 id="a294" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae np" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank">报名</a>立即免费领取一份。</p></div></div>    
</body>
</html>