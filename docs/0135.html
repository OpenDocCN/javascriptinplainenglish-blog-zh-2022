<html>
<head>
<title>State of the Web: Deno</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络现状:Deno</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/state-of-the-web-deno-e9de001ce3c7?source=collection_archive---------7-----------------------#2022-01-09">https://javascript.plainenglish.io/state-of-the-web-deno-e9de001ce3c7?source=collection_archive---------7-----------------------#2022-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/4b385e745fbc53103e482bb845d755ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KJ2TEkY6NaZSIvY38kPvLg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Deno logo</figcaption></figure><div class=""/><p id="6da9" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae la" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank"> Deno </a>是一个现代的JavaScript运行时，与Node.js竞争，承诺安全I/O和内置类型脚本支持等特性。Node.js的创始人Ryan Dahl在Rust中创建了Deno。</p><h1 id="8ed4" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Deno的背景</h1><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lz"><img src="../Images/eea61fbfd29a1f082652336b9aacbb28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NwD8xux8ptx2ZDGt"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Deno Dino in a raining city (by Dimitrij Agal)</figcaption></figure><p id="2ddb" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在Ryan Dahl的talk <a class="ae la" href="https://www.youtube.com/watch?v=M3BM9TB-8yA" rel="noopener ugc nofollow" target="_blank">关于Node </a>我后悔的十件事里，他谈到了Node的很多问题。这包括Node未能接受web标准、安全性、Node编译本机模块的方式(GYP)和NPM等问题。然后，他透露了德诺。Deno是一个新项目，它修复了Ryan Dahl之前提到的许多问题，以及一些额外的优势，如内置的类型脚本支持。Ryan Dahl最初在Go中构建了Deno，但后来改用Rust。</p><p id="6aec" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">自从Deno首次公布以来，它已经取得了重大进展。2020年8月发布了1.0，Slack这样的公司已经采用了Deno。此外，Deno还发布了自己的edge serverless功能平台，<a class="ae la" href="https://deno.com/deploy" rel="noopener ugc nofollow" target="_blank"> Deno Deploy </a>。</p><h1 id="102b" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为什么Deno如此重要</h1><h1 id="cad3" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安全性</h1><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi me"><img src="../Images/ff0a81d3e8d2df9a4bd262ddefe21a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fSbhFG_Uc4VyftBU"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Phone with lock (by <a class="ae la" href="https://unsplash.com/@franckinjapan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Franck</a> on <a class="ae la" href="https://unsplash.com/s/photos/security?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a>)</figcaption></figure><p id="0b0a" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">V8是一种沙盒语言，使得代码不可能做超出其边界的事情。然而，Node.js允许访问网络和沙箱内的文件系统，这就消除了V8的安全优势。即使对于可信的程序来说，这也是有害的，因为不安全的代码或恶意的依赖可能会造成严重的损害并窃取信息。</p><p id="c7f0" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Deno用一个<a class="ae la" href="https://deno.land/manual@v1.17.1/getting_started/permissions" rel="noopener ugc nofollow" target="_blank">权限</a>的系统来解决。这些权限使您可以精确地定义程序在沙箱之外可以做什么，比如文件系统访问和环境变量。例如，如果您希望允许读取本地<code class="fe mf mg mh mi b">assets</code>目录中的文件，您可以使用如下命令运行Deno:</p><pre class="ma mb mc md gt mj mi mk ml aw mm bi"><span id="05e8" class="mn lc jf mi b gy mo mp l mq mr">deno run --allow-read=./assets</span></pre><p id="4c04" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">由于这些功能，您可以确保代码不会超出其边界，从而提高安全性。</p><h1 id="ac01" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">标准化API</h1><p id="8e9e" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">因为Node.js和web平台是并行发展的，所以它们有很多不同之处。有很多这样的例子，比如模块系统和HTTP请求。</p><h2 id="795e" class="mn lc jf bd ld mx my dn lh mz na dp ll kn nb nc lp kr nd ne lt kv nf ng lx nh bi translated">ECMAScript模块和CommonJS</h2><p id="6f5f" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">当Node.js刚创建的时候，JavaScript不能使用其他模块，只能将它们嵌入到<code class="fe mf mg mh mi b">&lt;script&gt;</code>标签中，并在全局窗口范围内使用它们。由于HTML和窗口在服务器上不可用，Node.js需要一种模块格式。Nodejs决定采用一种CommonJS形式，这是一种流行、简单、同步的模块格式。然而，CommonJS并不是浏览器自带的(你必须使用像<a class="ae la" href="https://browserify.org/" rel="noopener ugc nofollow" target="_blank"> Browserify </a>这样的库)，并且CommonJS的实现之间存在差异。</p><p id="93d1" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">多年后的2016年，一个名为ECMAScript Modules (ESM)的新模块规范在ES6中定稿。这个模块规范可以在浏览器中没有任何库的情况下工作。此外，它还可以解决CommonJS的许多问题，比如异步模块加载和树抖动。然而，Node.js花了一段时间来添加ESM支持，即使在那之后，Node.js中的ESM采用率也不是很高，大多数NPM软件包仍然只包含CommonJS版本。此外，Node.js没有完全符合标准的ESM实现，并且在包括<code class="fe mf mg mh mi b">.js</code>文件扩展名等方面有所不同。</p><p id="5f6e" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">相比之下，Deno仅适用于完全符合标准的ESM。对于用户和库作者来说，这使得使用Deno变得简单多了。根据经验，使用一种模块格式比同时包含ESM和CommonJS要简单得多。Deno也更简单，因为它遵循标准，所以您知道您的模块代码在浏览器中可以正常工作。</p><h2 id="45b9" class="mn lc jf bd ld mx my dn lh mz na dp ll kn nb nc lp kr nd ne lt kv nf ng lx nh bi translated">HTTP抓取</h2><p id="09a8" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">发送HTTP请求是Deno解决的另一个不兼容领域。Node.js允许通过<code class="fe mf mg mh mi b">http</code>和<code class="fe mf mg mh mi b">https</code>标准库函数进行HTTP请求。然而，在web上运行HTTP请求的现代方式是通过<code class="fe mf mg mh mi b">fetch()</code> API，它是标准化的，比<code class="fe mf mg mh mi b">http</code>更简单。Node.js不支持<code class="fe mf mg mh mi b">fetch()</code>，因此人们不得不转向使用像<a class="ae la" href="https://www.npmjs.com/package/node-fetch" rel="noopener ugc nofollow" target="_blank"> node-fetch </a>这样的包来简化<code class="fe mf mg mh mi b">fetch()</code>或<a class="ae la" href="https://www.npmjs.com/package/cross-fetch" rel="noopener ugc nofollow" target="_blank"> cross-fetch </a>以实现完全的跨平台兼容性。这是有问题的，因为这是另一个需要的依赖项，如果不导入，它就不会立即可用。不过Deno默认支持<code class="fe mf mg mh mi b">fetch()</code> API，解决了这些问题。</p><h1 id="95cb" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">分散式模块托管</h1><p id="8e1e" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">不，仅仅因为它是分散的并不意味着它使用区块链😉(<a class="ae la" href="https://nest.land/" rel="noopener ugc nofollow" target="_blank">虽然有区块链</a>支持的Deno包托管服务)。相反，Deno的分散式模块托管允许您通过URL请求模块，而不是像NPM那样从集中的软件包数据库中请求。这样做可以让模块托管更加自由。Deno确实在deno.land/x<a class="ae la" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank">的</a>提供了一个模块托管服务，但是你可以使用许多其他的服务，你甚至可以链接到任何ESM CDN或者其他提供JavaScript文件的服务。许多人担心远程代码会改变，因为它不一定是受控的，但大多数Deno模块托管服务都是不可变的，Deno缓存远程文件，因此只有当您显式重新加载缓存时，它才会改变。</p><h1 id="988a" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">内置的类型脚本支持</h1><p id="941b" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">Deno允许你像JavaScript一样直接运行一个类型脚本文件，而不需要通过编译器。如果不需要类型检查，Deno甚至通过缓存产生的JavaScript和使用<a class="ae la" href="https://swc.rs/" rel="noopener ugc nofollow" target="_blank"> SWC </a>，一个快速的基于Rust的编译器来优化这个过程。内置的TypeScript支持提高了效率，因为如果您正在使用TypeScript构建应用程序，则不需要设置构建步骤。在Node.js中有一些方法可以进行自动的类型脚本编译，比如通过<a class="ae la" href="https://www.npmjs.com/package/ts-node" rel="noopener ugc nofollow" target="_blank"> ts-node </a>，但是它们的功能并不丰富，默认情况下不会安装。</p><h1 id="be35" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">德诺州</h1><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lz"><img src="../Images/85144b7c021dcd4c646386f1cca7a076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RJeB1A7SHGteDVZn"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Planet with the Deno dinosaur (By Hashrock)</figcaption></figure><h1 id="ab24" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">生态系统</h1><p id="9295" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">目前，这是Deno的最大问题，也是大多数Node.js开发人员不迁移到Deno的一个重要原因(这是一个令人讨厌的问题，因为如果Node.js开发人员不迁移，生态系统会增长得更慢)。deno.land/x号上有3501个模块，而NPM号上有130万个。然而，许多人使用其他包托管服务(见上面的“分散模块托管”)，大多数现代web包应该在Deno上工作。节点兼容性的最大障碍是CommonJS和节点API。Deno提供了一个<a class="ae la" href="https://deno.land/manual@v1.17.2/npm_nodejs/compatibility_mode" rel="noopener ugc nofollow" target="_blank"> Node.js兼容模式</a>，不过是实验性的。</p><h1 id="897f" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">发展</h1><p id="d470" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">Deno的开发非常活跃，每月都有发布，每个版本都有新的特性。Deno甚至得到了一家官方公司的支持，这可能是好的也可能是坏的，取决于你如何看待它。Deno有600多名贡献者，这个数字还在增长。基本上，Deno是一个非常活跃的维护项目</p><h1 id="3d03" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">部署</h1><p id="cfa3" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">Deno可以被广泛部署，尽管没有Node.js那么广泛。</p><h2 id="4b5f" class="mn lc jf bd ld mx my dn lh mz na dp ll kn nb nc lp kr nd ne lt kv nf ng lx nh bi translated">容器和托管虚拟机</h2><p id="70a0" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">Deno对各种容器服务都有ok支持。Deno.land为支持Docker的服务提供了一个<a class="ae la" href="https://hub.docker.com/r/denoland/deno" rel="noopener ugc nofollow" target="_blank">官方Docker镜像</a>。然而，尽管大多数流行的容器服务都支持Deno，但这种支持通常是非正式的，而且并不总是得到维护。以下是在容器服务上运行Deno的工具和资源列表:</p><h2 id="000c" class="mn lc jf bd ld mx my dn lh mz na dp ll kn nb nc lp kr nd ne lt kv nf ng lx nh bi translated">无服务器功能</h2><p id="e830" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">无服务器是Deno公司的切入点。他们的主要商业产品是<a class="ae la" href="https://deno.com/deploy" rel="noopener ugc nofollow" target="_blank"> Deno Deploy </a>，一个用于Deno脚本的无服务器edge函数运行程序。它在概念上类似于Cloudflare Workers，因为它使用V8隔离来实现超快的启动时间。Deno Deploy的优势在于它包括Deno API和所有其他使Deno如此有用的特性。然而，Deno Deploy仍处于测试阶段，所以您现在可能想看看其他地方。以下是在各种无服务器函数提供程序上运行Deno的工具和资源列表:</p><h1 id="9c62" class="lb lc jf bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="780a" class="pw-post-body-paragraph kc kd jf ke b kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz ij bi translated">Deno是一项新兴技术，有朝一日可能会取代Node成为运行JavaScript的主要方式。如果您想在《web开发周刊》上了解更多关于新兴技术的信息，请加入下面的邮件列表。希望你从中有所收获，感谢你的阅读。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="2ab6" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="np">原载于2022年1月9日https://byteofdev.com</em><em class="np"/><a class="ae la" href="https://byteofdev.com/posts/deno/" rel="noopener ugc nofollow" target="_blank"><em class="np">。</em></a></p><p id="14fb" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="np">更多内容看</em> <a class="ae la" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke jg"> <em class="np">说白了就是</em> </strong> </a> <em class="np">。报名参加我们的</em> <a class="ae la" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke jg"> <em class="np">免费周报</em> </strong> </a> <em class="np">。在我们的</em> <a class="ae la" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke jg"> <em class="np">社区不和谐</em> </strong> </a> <em class="np">获得独家获取写作机会和建议。</em></p></div></div>    
</body>
</html>