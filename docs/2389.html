<html>
<head>
<title>Add Events to Any Class in Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用普通的JavaScript向任何类添加事件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-events-to-any-class-in-vanilla-javascript-1b3805e5740b?source=collection_archive---------2-----------------------#2022-06-03">https://javascript.plainenglish.io/add-events-to-any-class-in-vanilla-javascript-1b3805e5740b?source=collection_archive---------2-----------------------#2022-06-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d0f6" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">当编写更大的应用程序时，让组件交互的最好方法之一是以一种松散耦合的方式分派和使用事件。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d96aa806d36ddc18ca1f73942b679e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgGJZy5E9X6SUXNsMCraag.png"/></div></div></figure><p id="c800" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这在web组件中非常适用，因为它们基于DOM元素，并且内置了事件。</p><p id="1231" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然而，在常规的<strong class="kq io"> ECMAScript </strong>类中，您将不得不回归到开发您自己的发布/订阅系统。不是火箭科学，但仍然有点管道工程…</p><p id="7eb8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是有一个更简单的解决方案。通过使用<code class="fe lk ll lm ln b">createDocumentFragment()</code>，让DOM为您处理它。</p><p id="305a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这个小小的<strong class="kq io"> Events </strong>类使得任何类都成为事件生成类:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="7b2e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这种方法的唯一缺点是监听器不能直接使用<code class="fe lk ll lm ln b">event.target</code>，因为它指向文档片段。</p><p id="7cae" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我使用的解决方法是在片段上设置一个<strong class="kq io">主机</strong>属性，这样您就可以使用<code class="fe lk ll lm ln b">event.target.host</code>。</p><p id="94bc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用Events类很简单:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="6517" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">简而言之，<strong class="kq io"> Events </strong>类将片段的事件方法委托给host类。</p><p id="8501" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">emit()</code>和<code class="fe lk ll lm ln b">on()</code>方法只是方便的快捷方式，而<code class="fe lk ll lm ln b">on()</code>的额外好处是它是可链接的:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="8309" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">慢慢来。</p><p id="d066" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我在任何地方都用这个。</p><p id="e7d1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="lq">更多内容看</em> <a class="ae lr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lq">说白了就是</em> </strong> </a> <em class="lq">。报名参加我们的</em> <a class="ae lr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lq">免费周报</em> </strong> </a> <em class="lq">。关注我们</em> <a class="ae lr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lq">推特</em> </strong> </a> <em class="lq">和</em><a class="ae lr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lq">LinkedIn</em></strong></a><em class="lq">。查看我们的</em> <a class="ae lr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lq">社区不和谐</em> </strong> </a> <em class="lq">加入我们的</em> <a class="ae lr" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lq">人才集体</em> </strong> </a> <em class="lq">。</em></p></div></div>    
</body>
</html>