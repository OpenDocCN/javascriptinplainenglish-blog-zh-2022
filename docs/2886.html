<html>
<head>
<title>Type Casting in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">打字稿中的类型转换</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/type-casting-in-typescript-c2d95bb96582?source=collection_archive---------11-----------------------#2022-07-12">https://javascript.plainenglish.io/type-casting-in-typescript-c2d95bb96582?source=collection_archive---------11-----------------------#2022-07-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="106e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">当类型未知时，强制转换用于分配类型。让我们看看它是如何工作的。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/2567c1e1a8481f1c866e08ae35ab8100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dd0anaLRzfyTCZ1v4PHzBg.png"/></div></div></figure><p id="af1f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有时，在TypeScript中，某些东西会有一个<code class="fe lk ll lm ln b">unknown</code>类型，而TypeScript不能辨别某些东西应该是什么类型。在最基本的情况下，当一个变量被简单地赋予类型<code class="fe lk ll lm ln b">unknown</code>时，就会发生这种情况。例如:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="0888" class="ls lt in ln b gy lu lv l lw lx">let text:unknown = "String Goes Here";</span></pre><p id="5a72" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">虽然我们可以看到上面内容的类型是一个<code class="fe lk ll lm ln b">string</code>，但是它已经被赋予了类型<code class="fe lk ll lm ln b">unknown</code>，所以TypeScript不知道它是什么类型。因此，当我们试图运行特定于字符串的方法时，它们将不起作用。假设我们想得到这个字符串的长度，例如:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="b525" class="ls lt in ln b gy lu lv l lw lx">let text:unknown = "string";<br/>let value = text.length;</span></pre><h1 id="8fb4" class="ly lt in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">类型转换在TypeScript中如何工作</h1><p id="f99e" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">上面的代码实际上会抛出一个错误，这个错误就是<code class="fe lk ll lm ln b">Object is of type 'unknown'.</code>。为了解决这个问题，我们需要使用TypeScript强制转换。为了在TypeScript中进行转换，我们使用了<code class="fe lk ll lm ln b">as</code>关键字。对于这个例子，我们需要将<code class="fe lk ll lm ln b">text</code>变量转换成一个字符串，因此TypeScript将允许我们使用<code class="fe lk ll lm ln b">length</code>:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="8bf9" class="ls lt in ln b gy lu lv l lw lx">let text:unknown = "string";<br/>let value = (text as string).length;</span></pre><p id="2f50" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在TypeScript会将类型大小写为<code class="fe lk ll lm ln b">string</code>，我们可以使用<code class="fe lk ll lm ln b">length</code>。这种编写代码的方式不太可能在现实世界中发生，但是如果您接收到未知类型的API响应，并且必须使其符合某个类型，则可能会发生这种情况。</p><p id="47c3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">另一个经常发生这种情况的地方是使用<strong class="kq io">选择器</strong>。例如，选择一个输入并期望能够通过<code class="fe lk ll lm ln b">value</code>属性找到值是很常见的:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="6f2c" class="ls lt in ln b gy lu lv l lw lx">let input = document.querySelector('input');<br/>let inputValue = input.value;</span></pre><p id="d4d9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在TypeScript中，这将抛出一个错误，因为<code class="fe lk ll lm ln b">Object is possibly 'null'.</code>。TypeScript为查询选择器输出提供了许多预定义的类型，但是我们也不能编写<code class="fe lk ll lm ln b">let input:HTMLInputElement = ...</code>，因为输入可能是<code class="fe lk ll lm ln b">null</code>。因此，我们必须将输入转换为<code class="fe lk ll lm ln b">HTMLInputElement</code>以获得值:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="2074" class="ls lt in ln b gy lu lv l lw lx">let input = document.querySelector('input') as HTMLInputElement;<br/>let inputValue = input.value;</span></pre><h1 id="acec" class="ly lt in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">结论</h1><p id="338d" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">我希望你喜欢这个教程。在某些情况下，尤其是使用<code class="fe lk ll lm ln b">querySelector</code>时，需要进行类型转换。这是一种对来自API的输出或具有<code class="fe lk ll lm ln b">unknown</code>类型的变量实施特定类型限制的有用方法。</p><p id="9c58" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="mu">更多内容请看</em><a class="ae mv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mu">plain English . io</em></strong></a><em class="mu">。报名参加我们的</em> <a class="ae mv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mu">免费周报</em> </strong> </a> <em class="mu">。关注我们关于</em><a class="ae mv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mu">Twitter</em></strong></a><strong class="kq io"><em class="mu"/></strong><em class="mu">和</em><a class="ae mv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mu">LinkedIn</em></strong></a><em class="mu">。查看我们的</em> <a class="ae mv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mu">社区不和谐</em> </strong> </a> <em class="mu">加入我们的</em> <a class="ae mv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mu">人才集体</em> </strong> </a> <em class="mu">。</em></p></div></div>    
</body>
</html>