<html>
<head>
<title>Create Sparkline Charts with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript创建迷你图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-sparkline-charts-with-javascript-ecb183e43b58?source=collection_archive---------16-----------------------#2022-01-13">https://javascript.plainenglish.io/create-sparkline-charts-with-javascript-ecb183e43b58?source=collection_archive---------16-----------------------#2022-01-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d97a836eb9047c763ab63b283ac8f562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*poCH1xp7edku0K4w3mDX8A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Creating JS sparklines to visualize Money Heist’s ratings on IMDb.</figcaption></figure><p id="52af" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">迷你图是由著名统计学家和数据可视化先驱</strong> <a class="ae kx" href="https://en.wikipedia.org/wiki/Edward_Tufte" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io">【爱德华·塔夫特】</strong> </a> <strong class="kb io">推出的优雅微型图表。这些微小的图表没有任何轴，占用最小的空间，旨在代表大图，显示与文本和表格单元格一致的趋势。</strong></p><blockquote class="ky"><p id="1752" class="kz la in bd lb lc ld le lf lg lh kw dk translated">如果您想了解构建迷你图的简单方法，这是正确的地方！</p></blockquote><p id="f150" class="pw-post-body-paragraph jz ka in kb b kc li ke kf kg lj ki kj kk lk km kn ko ll kq kr ks lm ku kv kw ig bi translated">在本文中，我将向您展示如何使用JavaScript快速创建很酷的迷你图。随着OTT内容统治娱乐世界的这些日子，让我们愉快地学习并看看当今最受欢迎的节目之一的IMDb收视率— <a class="ae kx" href="https://www.imdb.com/title/tt6468322/" rel="noopener ugc nofollow" target="_blank"> <em class="ln">【金钱大劫案】</em> </a>(西班牙原文为<em class="ln"/>)。</p><p id="1151" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">事不宜迟，一起来踏上这场知识盗窃之旅吧！</p><h1 id="72f3" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">要构建的JS迷你图</h1><p id="54a2" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">在本教程中，我们将创建两个不同系列的基于JavaScript的迷你图。</p><p id="c12d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">迷你图将显示《金钱大劫案》五季中每一季的IMDb收视率如何变化。</p><p id="4541" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">柱形迷你图将显示每集的收视率与该季的平均收视率相比如何，以百分比表示:如果前者等于后者，则前者的值为100%，如果大于或小于平均值，则分别为更大或更小的值。</p><p id="faf8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">查看我们的JS迷你图的外观，并继续阅读，一步一步地深入这个数据可视化开发过程！</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/631147c093826fc520bafad9b049a6e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*pTwWSYMFvVa3JfOj.png"/></div></div></figure><p id="051d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有人可能会认为这里有窍门，你需要知道很多关于编码的知识，但这实际上相对容易，最终的JavaScript代码将是精简的40多行普通JS。</p><h1 id="4ca8" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">创建JavaScript迷你图</h1><p id="dce6" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">一个可爱的JS迷你图只需要简单的四个步骤就可以创建出来。那不是很完美吗？</p><ol class=""><li id="f78c" class="mw mx in kb b kc kd kg kh kk my ko mz ks na kw nb nc nd ne bi translated">制作一个HTML页面。</li><li id="2307" class="mw mx in kb b kc nf kg ng kk nh ko ni ks nj kw nb nc nd ne bi translated">添加要使用的脚本文件。</li><li id="54dd" class="mw mx in kb b kc nf kg ng kk nh ko ni ks nj kw nb nc nd ne bi translated">连接数据。</li><li id="0bf6" class="mw mx in kb b kc nf kg ng kk nh ko ni ks nj kw nb nc nd ne bi translated">编写JavaScript图表代码。</li></ol><h1 id="34c6" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">1.制作一个HTML页面</h1><p id="574a" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">首先，我们需要一个带有<code class="fe nk nl nm nn b">&lt;table&gt;</code>元素的基本HTML页面，它将保存所有数据值和迷你图。为了在后面的代码中引用该表，我们将为它提供一个ID参数。例如，“TB-季节”</p><p id="8a21" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，让我们添加表格标题，以显示整个表格的标题和每列的标题。长文本将被分成两行，这样整个基于迷你图的数据可视化项目看起来更整洁。</p><p id="3f43" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，当然，我们还需要定义表体。这是我们的数据值和迷你图本身将呈现的地方。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="3dd2" class="ns lp in nn b gy nt nu l nv nw">&lt;html&gt;</span><span id="c22a" class="ns lp in nn b gy nx nu l nv nw">&lt;head&gt;<br/>  &lt;title&gt;JavaScript Sparkline Chart&lt;/title&gt;<br/>  &lt;style type="text/css"&gt;      <br/>    html,<br/>    body {<br/>      width: 100%;<br/>      margin:0;<br/>      padding: 0;<br/>    }<br/>    tr { <br/>      overflow: hidden;<br/>      height: 14px;<br/>      white-space: nowrap;<br/>    }<br/>    td {<br/>      text-align: center; <br/>      vertical-align: middle;<br/>    }<br/>    .chart {<br/>      height: 20px;<br/>      width: 80px;<br/>    }<br/>  &lt;/style&gt;<br/>&lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;table id="tb-seasons"&gt;<br/>      &lt;thead&gt;<br/>        &lt;tr&gt;<br/>          &lt;th id="tg-head" colspan="4"&gt;Money Heist IMDb Ratings&lt;/th&gt;<br/>        &lt;/tr&gt;  <br/>        &lt;tr&gt;<br/>          &lt;th id="tg-head"&gt;Season&lt;/th&gt;<br/>          &lt;th id="tg-head"&gt;Average rating&lt;/th&gt;<br/>          &lt;th id="tg-head"&gt;Rating&lt;br&gt;by episode&lt;/th&gt;<br/>          &lt;th id="tg-head"&gt;% of average&lt;br&gt;by episode&lt;/th&gt;<br/>        &lt;/tr&gt;    <br/>      &lt;/thead&gt;<br/>      &lt;tbody&gt;<br/>      &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="b10c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如您所见，在第一步中，我们还指定了表体、每行和每个单元格的样式。在本例中，图表的高度只有20个像素，宽度只有80个像素。这样做是为了展示迷你图不占用太多空间就能工作，并充分说明它们是作为表格中的缩微图而设计的。</p><h1 id="037e" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">2.添加要使用的脚本文件</h1><p id="c408" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">接下来，我们需要引用创建迷你图可视化所需的所有脚本。</p><p id="bcd1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有许多JavaScript图表库。然而，并不是所有的都支持迷你图。在这里，我们将使用一个做，<a class="ae kx" href="https://www.anychart.com" rel="noopener ugc nofollow" target="_blank"> AnyChart。</a>它是轻量级的，灵活的，对初学者来说是个不错的选择，因为有很多<a class="ae kx" href="https://www.anychart.com/products/anychart/gallery/" rel="noopener ugc nofollow" target="_blank">例子</a>和详细的<a class="ae kx" href="https://docs.anychart.com" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="979f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们从<a class="ae kx" href="https://cdn.anychart.com" rel="noopener ugc nofollow" target="_blank"> AnyChart CDN </a>添加必要的脚本文件。为了使用这个JS库构建迷你图以实现数据可视化，我们需要三个特定的脚本:核心模块<a class="ae kx" href="https://docs.anychart.com/Quick_Start/Modules#core" rel="noopener ugc nofollow" target="_blank">、</a><a class="ae kx" href="https://docs.anychart.com/Quick_Start/Modules#sparkline" rel="noopener ugc nofollow" target="_blank">迷你图模块</a>和<a class="ae kx" href="https://docs.anychart.com/Working_with_Data/Data_Adapter/Overview#modules" rel="noopener ugc nofollow" target="_blank">数据适配器</a>模块。因此，我们将把它们都包含在第一步中创建的HTML页面的<code class="fe nk nl nm nn b">&lt;head&gt;</code>部分中。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="9603" class="ns lp in nn b gy nt nu l nv nw">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;JavaScript Sparkline Chart&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-sparkline.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-data-adapter.min.js"&gt;&lt;/script&gt;<br/>    &lt;style type="text/css"&gt;<br/>      // The HTML body and table styles.<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;  <br/><strong class="nn io"><em class="ln">    // The table to hold the data values and the charts.</em></strong><em class="ln"><br/></em>    &lt;script&gt;<br/><strong class="nn io"><em class="ln">      // All the code for the JS sparkline chart will come here.<br/></em></strong>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="4037" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">3.连接数据</h1><p id="4422" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">我已经从<a class="ae kx" href="https://www.imdb.com/title/tt6468322/episodes/?ref_=tt_ov_epl" rel="noopener ugc nofollow" target="_blank"> IMDb网站</a>获取了<em class="ln">金钱抢劫</em>的评分数据，并按照我们迷你图要求的格式创建了<a class="ae kx" href="https://gist.githubusercontent.com/shacheeswadia/21ddfa122938e676bf9e7911e1417d9a/raw/d28d7a22b968bb39d755285d28ce949b31276628/sparklineChartData.json" rel="noopener ugc nofollow" target="_blank"> JSON文件</a>。然后，我们将使用<code class="fe nk nl nm nn b">data.loadJsonFile</code>函数连接该数据集。</p><p id="70b5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在一切都准备好了，让我们通过编写一点JavaScript图表代码来立即制作预想的交互式迷你图！</p><h1 id="118e" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">4.编写JavaScript图表代码</h1><p id="6a23" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">迷你图在表中呈现。因此，创建包含迷你图的表格需要为表格的每一行添加数据。这可能不像制作一个单独的<a class="ae kx" href="https://www.anychart.com/blog/2017/10/25/javascript-bar-chart-tutorial/" rel="noopener ugc nofollow" target="_blank">条形图</a>或<a class="ae kx" href="https://www.anychart.com/blog/2021/07/28/line-chart-js/" rel="noopener ugc nofollow" target="_blank">线图</a>那么简单。但是我们会检查每一行代码，所以不要担心，因为你会看到创建一个交互式JS迷你图真的离火箭科学很远。</p><p id="9957" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们从添加一个封装代码的函数开始，以确保在执行任何代码之前页面是完全加载的。然后我们将添加数据文件。</p><p id="1966" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">添加数据后要做的第一件事是创建一个函数来迭代数据，并调用另一个函数为每个季节创建一行。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="45b8" class="ns lp in nn b gy nt nu l nv nw">function (data) {<br/><strong class="nn io"><em class="ln">  // go through the data<br/>  // and add each season's info and charts to the table<br/></em></strong>  Object.entries(data).forEach(([key, value]) =&gt; createSeason(key, data)); <br/>}</span></pre><p id="1fd0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，让我们定义刚才调用的新函数。</p><p id="05dc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，让我们获得一个表体的链接，我们希望使用第一步中分配的ID在其中添加行。接下来，我们将添加一个新行，并将其高度设置为30px。在这一行中，我们将插入单元格来保存季度编号、该季度的平均评分和迷你图。后者将使用另一个函数并基于迷你图类型、折线图或柱形图来生成。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="4b78" class="ns lp in nn b gy nt nu l nv nw">function createSeason(season, data){</span><span id="795a" class="ns lp in nn b gy nx nu l nv nw"><strong class="nn io"><em class="ln">  // get a table link<br/></em></strong>  var tbodyRef = document.getElementById('tb-seasons').getElementsByTagName('tbody')[0];<br/>  <br/><strong class="nn io"><em class="ln">  // insert a row at the end of the table<br/></em></strong>  var newRow = tbodyRef.insertRow();<br/>  newRow.setAttribute('height', '30px');<br/>  <br/><strong class="nn io"><em class="ln">  // append a season name text node to a cell<br/></em></strong>  newRow.insertCell().appendChild(document.createTextNode(season));<br/>  <br/><strong class="nn io"><em class="ln">  // append a season rating cell<br/>  </em></strong>newRow.insertCell().appendChild(<br/>    document.createTextNode(data[season].avg)<br/>  );<br/>  <br/><strong class="nn io"><em class="ln">  // create a line sparkline chart showing ratings<br/></em></strong>  var lineDiv = createSparkline(data[season], 'episodeRatings', 'line');<br/>  <br/><strong class="nn io"><em class="ln">  // append it<br/></em></strong>  newRow.insertCell().appendChild(lineDiv); <br/>  <br/><strong class="nn io"><em class="ln">  // create a column sparkline chart showing percentages<br/></em></strong>  var columnDiv = createSparkline(data[season], 'percentOfAvg', 'column');<br/>  <br/><strong class="nn io"><em class="ln">  // append it<br/></em></strong>  newRow.insertCell().appendChild(columnDiv);</span><span id="5d64" class="ns lp in nn b gy nx nu l nv nw">}</span></pre><p id="5e1a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后要做的是定义函数，该函数将使用所需的系列类型构建迷你图。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="2eea" class="ns lp in nn b gy nt nu l nv nw"><strong class="nn io"><em class="ln">// create sparkline of a given type, color, and from a given field<br/></em></strong>function createSparkline(data, field, type){</span><span id="c019" class="ns lp in nn b gy nx nu l nv nw">  var sparkline = anychart.sparkline(data[field]);<br/>  sparkline.seriesType(type);<br/>  <br/><strong class="nn io">  // create a div for the sparklines and assign a css class name<br/></strong>  var chartDiv = document.createElement('div');<br/>  chartDiv.setAttribute('class', 'chart');  <br/>  <br/>  sparkline.container(chartDiv);<br/>  sparkline.draw();<br/>  <br/>  return chartDiv;</span><span id="dfd4" class="ns lp in nn b gy nx nu l nv nw">}</span></pre><p id="24fb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Tada —漂亮且实用的交互式JS迷你图制作完成了！难道不是比预期的更容易吗？</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/0d885bfeeb512c40d2be843e3308b774.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*5BoCoe6xqWKdxRDA.png"/></div></div></figure><p id="95d0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以立即注意到《T4金钱大劫案》每一季收视率不断上升的趋势，而且最后一集总是收视率最高。这是迷你图的最大优势之一。</p><p id="a92c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这种基于JavaScript迷你图的数据可视化的交互式版本及其完整代码可以在<a class="ae kx" href="https://playground.anychart.com/H7MFdFPA/" rel="noopener ugc nofollow" target="_blank"> AnyChart Playground </a>上找到。接下来，我们将定制图形，使它们看起来更好。</p><h1 id="b624" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">自定义迷你图</h1><p id="bca1" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">与AnyChart JS库一样，使用带有现成可用的迷你图类型数据可视化的JavaScript图表库的一个巨大优势是，可以轻松地创建一个基本版本以及大量定制图表的选项。我们将立即改进迷你图的外观。</p><h1 id="afd9" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">修改调色板</h1><p id="390b" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">提升图表的一个非常简单有效的方法是使用与我们所表示的数据相匹配的颜色。由于我们的数据是关于电视连续剧<em class="ln">金钱大劫案</em>，我们可以简单地使用任何<em class="ln">金钱大劫案</em>海报中常见的红色和黑色。</p><p id="b902" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们用黑色来描绘折线图，用红色来描绘柱形图。可以通过为前者设置笔触颜色，为后者设置填充颜色来实现。</p><p id="1f73" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将简单地向两个迷你图构建函数添加颜色参数，并在调用它们时传递颜色值。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="c2e8" class="ns lp in nn b gy nt nu l nv nw"><strong class="nn io"><em class="ln">// create a line sparkline chart showing ratings<br/></em></strong>var lineDiv = createSparkline(data[season], 'episodeRatings', 'line', '#040102');</span><span id="c7c5" class="ns lp in nn b gy nx nu l nv nw"><strong class="nn io"><em class="ln">// create a column sparkline chart showing percentages<br/></em></strong>var columnDiv = createSparkline(data[season], 'percentOfAvg', 'column', '#cf0011');</span><span id="3b1c" class="ns lp in nn b gy nx nu l nv nw">…</span><span id="4140" class="ns lp in nn b gy nx nu l nv nw">sparkline.fill(color).stroke(color);</span></pre><h1 id="acdd" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">改进标题</h1><p id="07b1" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">为了使我们的视觉更有吸引力，我们可以推动一些风格的变化。先说题目。我们将为第一行提供一个类，并为该类配置样式设置。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="8874" class="ns lp in nn b gy nt nu l nv nw">&lt;tr class="main-heading"&gt;<br/>  &lt;th id="tg-head" colspan="4"&gt;Money Heist IMDb Ratings&lt;/th&gt;<br/>&lt;/tr&gt;</span><span id="f79b" class="ns lp in nn b gy nx nu l nv nw">…</span><span id="94ea" class="ns lp in nn b gy nx nu l nv nw">.main-heading {<br/>  font-family: sans-serif;<br/>  font-size: 14px;<br/>}</span></pre><p id="0f83" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">同样，让我们为列标题添加一些定制样式。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="6ad5" class="ns lp in nn b gy nt nu l nv nw">&lt;tr class="col-headings"&gt;<br/>  &lt;th id="tg-head"&gt;Season&lt;/th&gt;<br/>  &lt;th id="tg-head"&gt;Average rating&lt;/th&gt;<br/>  &lt;th id="tg-head"&gt;Rating&lt;br&gt;by episode&lt;/th&gt;<br/>  &lt;th id="tg-head"&gt;% of average&lt;br&gt;by episode&lt;/th&gt;<br/>&lt;/tr&gt;</span><span id="3e8c" class="ns lp in nn b gy nx nu l nv nw">…</span><span id="e2a4" class="ns lp in nn b gy nx nu l nv nw">.col-headings {<br/>  font-family: sans-serif;<br/>  font-size: 13px;<br/>  color: #7c868e;<br/>  font-weight: 300;<br/>  text-align: left;<br/>}</span></pre><p id="1f33" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面先睹为快，看看这些简单的修改让迷你图看起来有多惊艳。你可以在这里看一下代码为<a class="ae kx" href="https://playground.anychart.com/NPEIKjaL/" rel="noopener ugc nofollow" target="_blank">的交互版。</a></p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/73b83b1e3624a6f051fcda0a837382af.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*uEqw_35PMjeKobYh.png"/></div></div></figure><h1 id="00f3" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">更改工具提示</h1><p id="2922" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">工具提示应该总是增加一些价值，在需要的时候帮助显示更多的信息。在我们的迷你图中，默认的工具提示显示X和Y值，这不是很有见地。让我们显示剧集编号和每个数据点的值——在线闪烁图中显示剧集评级，在柱形图中显示百分比。</p><p id="7c04" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">就像我们对颜色所做的一样，我们将工具提示参数添加到函数中，并根据迷你图系列的类型传递自定义工具提示文本。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="94e2" class="ns lp in nn b gy nt nu l nv nw">sparkline.tooltip().format(function() {<br/>  var x = (this.x) + 1;<br/>  return "E" + x + "-" + this.value + tooltipPostfix;<br/>});</span></pre><p id="c643" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">就是这样！视觉上吸引人且信息丰富的迷你图已经准备好了！</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/ea8ddf6b14ef11ff17d0b0cd1f13891b.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*3i8d5m6KMDXNmJMY.png"/></div></div></figure><p id="d5f7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在<a class="ae kx" href="https://playground.anychart.com/zRncTQkj/" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>查看最终的交互式JS迷你图，在那里你还可以继续改进它，添加一些其他数据，等等。为了以防万一，下面还有完整的代码。</p><pre class="ms mt mu mv gt no nn np nq aw nr bi"><span id="e6ac" class="ns lp in nn b gy nt nu l nv nw">&lt;html&gt;</span><span id="4f39" class="ns lp in nn b gy nx nu l nv nw">&lt;head&gt;<br/>  &lt;title&gt;JavaScript Sparkline Chart&lt;/title&gt;<br/>  &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>  &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-sparkline.min.js"&gt;&lt;/script&gt;<br/>  &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-data-adapter.min.js"&gt;&lt;/script&gt;</span><span id="1ba9" class="ns lp in nn b gy nx nu l nv nw">  &lt;table id="tb-seasons"&gt;<br/>    &lt;thead&gt;<br/>      &lt;tr class="main-heading"&gt;<br/>        &lt;th id="tg-head" colspan="4"&gt;Money Heist IMDb Ratings&lt;/th&gt;<br/>      &lt;/tr&gt;<br/>      &lt;tr class="col-headings"&gt;<br/>        &lt;th id="tg-head"&gt;Season&lt;/th&gt;<br/>        &lt;th id="tg-head"&gt;Average rating&lt;/th&gt;<br/>        &lt;th id="tg-head"&gt;Rating&lt;br&gt;by episode&lt;/th&gt;<br/>        &lt;th id="tg-head"&gt;% of average&lt;br&gt;by episode&lt;/th&gt;<br/>      &lt;/tr&gt;<br/>    &lt;/thead&gt;<br/>    &lt;tbody&gt;<br/>    &lt;/tbody&gt;<br/>  &lt;/table&gt;</span><span id="ef0b" class="ns lp in nn b gy nx nu l nv nw">  &lt;style type="text/css"&gt;<br/>    html,<br/>    body {<br/>      width: 100%;<br/>      margin: 0;<br/>      padding: 0;<br/>    }</span><span id="f8e0" class="ns lp in nn b gy nx nu l nv nw">    tr {<br/>      overflow: hidden;<br/>      height: 14px;<br/>      white-space: nowrap;<br/>    }</span><span id="aba5" class="ns lp in nn b gy nx nu l nv nw">    td {<br/>      text-align: center;<br/>      vertical-align: middle;<br/>    }</span><span id="5a13" class="ns lp in nn b gy nx nu l nv nw">    .chart {<br/>      height: 20px;<br/>      width: 80px;<br/>    }</span><span id="edd9" class="ns lp in nn b gy nx nu l nv nw">    .main-heading {<br/>      font-family: sans-serif;<br/>      font-size: 14px;<br/>    }</span><span id="28cf" class="ns lp in nn b gy nx nu l nv nw">    .col-headings {<br/>      font-family: sans-serif;<br/>      font-size: 13px;<br/>      color: #7c868e;<br/>      font-weight: 300;<br/>      text-align: left;<br/>    }<br/>  &lt;/style&gt;<br/>&lt;/head&gt;</span><span id="b3ed" class="ns lp in nn b gy nx nu l nv nw">&lt;body&gt;</span><span id="5147" class="ns lp in nn b gy nx nu l nv nw">  &lt;div id="container"&gt;&lt;/div&gt;</span><span id="a03e" class="ns lp in nn b gy nx nu l nv nw">  &lt;script&gt;<br/>    anychart.onDocumentReady(function () {      anychart.data.loadJsonFile('https://gist.githubusercontent.com/shacheeswadia/21ddfa122938e676bf9e7911e1417d9a/raw/d28d7a22b968bb39d755285d28ce949b31276628/sparklineChartData.json',<br/>        function (data) {<br/>        <strong class="nn io"><em class="ln">// go through the data<br/>        // and add each season's info and charts to the table</em></strong><em class="ln"><br/></em>        Object.entries(data).forEach(([key, value]) =&gt; createSeason(key, data));<br/>        }<br/>      );<br/>    });</span><span id="dc67" class="ns lp in nn b gy nx nu l nv nw">    function createSeason(season, data) {<br/><strong class="nn io"><em class="ln">      // get a table link<br/></em></strong>      var tbodyRef = document.getElementById('tb-seasons').getElementsByTagName('tbody')[0];<br/><strong class="nn io"><em class="ln">      // insert a row at the end of the table<br/></em></strong>      var newRow = tbodyRef.insertRow();<br/>      newRow.setAttribute('height', '30px');<br/><strong class="nn io"><em class="ln">      // append a season name text node to a cell<br/></em></strong>      newRow.insertCell().appendChild(document.createTextNode<br/>(season));<br/><strong class="nn io"><em class="ln">      // append a season rating cell<br/></em></strong>      newRow.insertCell().appendChild(document.createTextNode<br/>(data[season].avg));<br/><strong class="nn io"><em class="ln">      // create a line sparkline chart showing ratings<br/></em></strong>      var lineDiv = createSparkline(data[season], 'episodeRatings', 'line', '#040102', 'Rating', '');<br/><strong class="nn io"><em class="ln">      // append it<br/></em></strong>      newRow.insertCell().appendChild(lineDiv);<br/><strong class="nn io"><em class="ln">      // create a column sparkline chart showing percentages<br/></em></strong>      var columnDiv = createSparkline(data[season], 'percentOfAvg', 'column', '#cf0011', 'Percent of average', '%');<br/><strong class="nn io"><em class="ln">      // append it<br/></em></strong>      newRow.insertCell().appendChild(columnDiv);<br/>    }</span><span id="0d33" class="ns lp in nn b gy nx nu l nv nw"><strong class="nn io"><em class="ln">    // create sparkline of a given type, color,<br/>    // and from a given field<br/></em></strong>    function createSparkline(data, field, type, color, tooltipText, tooltipPostfix) {<br/>      var sparkline = anychart.sparkline(data[field]);<br/>      sparkline.seriesType(type);<br/>      sparkline.fill(color).stroke(color);<br/>      sparkline.tooltip().format(function () {<br/>        var x = (this.x) + 1;<br/>        return "E" + x + "-" + this.value + tooltipPostfix;<br/>      });<br/><strong class="nn io"><em class="ln">      // create a div for the sparklines and assign a css class name<br/></em></strong>      var chartDiv = document.createElement('div');<br/>      chartDiv.setAttribute('class', 'chart');<br/>      sparkline.container(chartDiv);<br/>      sparkline.draw();<br/>      return chartDiv;<br/>    }<br/>  &lt;/script&gt;</span><span id="884c" class="ns lp in nn b gy nx nu l nv nw">&lt;/body&gt;</span><span id="8431" class="ns lp in nn b gy nx nu l nv nw">&lt;/html&gt;</span></pre><h1 id="a18c" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">结论</h1><p id="5e66" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">你会发现用JavaScript构建优雅的迷你图非常有趣和简单。要了解其他可能性，请不要犹豫，看看AnyChart图库中的<a class="ae kx" href="https://docs.anychart.com/Basic_Charts/Sparkline_Chart" rel="noopener ugc nofollow" target="_blank">迷你图表文档</a>和<a class="ae kx" href="https://www.anychart.com/products/anychart/gallery/Sparkline_Charts/" rel="noopener ugc nofollow" target="_blank">示例</a>。</p><p id="7db7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">那么，让我们都动动脑筋，不要去策划银行抢劫，而是去创造一些可爱的视觉图表，这种图表和许多其他类型的图表！</p></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><p id="8686" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="ln">我们要感谢自由数据可视化专家Shachee Swadia作为客座博文创建了这个令人惊叹的JavaScript迷你图教程。</em>T13】</strong></p><p id="be98" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="ln">要了解有关迷你图的更多信息，请访问</em> </strong> <a class="ae kx" href="https://www.anychart.com/chartopedia/chart-type/sparkline-chart" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ln">图表目录</em> </strong> </a> <strong class="kb io"> <em class="ln">。</em> </strong></p><p id="8239" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="ln">我们还有很多其他的</em> </strong> <a class="ae kx" href="https://www.anychart.com/blog/category/javascript-chart-tutorials/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ln"> JS图表教程</em> </strong> </a> <strong class="kb io"> <em class="ln">以防你有兴趣。</em>T13】</strong></p><p id="0beb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="ln">想出了一个同样牛逼的客座博文？我们渴望</em> </strong> <a class="ae kx" href="https://www.anychart.com/support/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ln">收到您的</em> </strong> </a> <strong class="kb io"> <em class="ln">！</em> </strong></p></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><p id="cb33" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="ln">原载于2022年1月13日https://www.anychart.com</em><em class="ln"/><a class="ae kx" href="https://www.anychart.com/blog/2022/01/13/sparklines-javascript/" rel="noopener ugc nofollow" target="_blank"><em class="ln">。</em></a></p><p id="8149" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="ln">更多内容请看</em><a class="ae kx" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="ln">plain English . io</em></strong></a><em class="ln">。报名参加我们的</em> <a class="ae kx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ln">免费周报</em> </strong> </a> <em class="ln">。在我们的</em> <a class="ae kx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ln">社区获得独家写作机会和建议</em> </strong> </a> <em class="ln">。</em></p></div></div>    
</body>
</html>