<html>
<head>
<title>React 18’s useTransition() Hook: Master in 2 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 18的useTransition()钩子:2分钟内掌握</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-v18-0-usetransition-master-in-2-minutes-3493281690ab?source=collection_archive---------4-----------------------#2022-05-27">https://javascript.plainenglish.io/react-v18-0-usetransition-master-in-2-minutes-3493281690ab?source=collection_archive---------4-----------------------#2022-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9ce4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们快速了解一下，React 18的useTransition()钩子是什么，以及它将如何在React应用程序中发挥作用。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b221c72d7efafe0455957705acb1d76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kE1PTbdt-p6H8WaK7NOXsA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Created by Author on <a class="ae kv" href="https://pixlr.com/x/#editor" rel="noopener ugc nofollow" target="_blank">Pixlr</a></figcaption></figure><h1 id="d104" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">React v18.0</h1><p id="38e9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">React v18是React的新发布版本，它引入了许多新功能，如自动批处理，新的API如<code class="fe mk ml mm mn b">useTransition()</code>，以及新的流媒体服务器渲染器。现在，我们想成为<code class="fe mk ml mm mn b">useTransition()</code>的主人，这是React增加的一个重要特性。</p><h2 id="7dcf" class="mo kx iq bd ky mp mq dn lc mr ms dp lg lx mt mu li mb mv mw lk mf mx my lm mz bi translated">为什么需要useTransition()。</h2><p id="d484" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">为了回答这个问题，让我在这里创建一个假想的场景。考虑一个例子，有一个应用程序显示来自API的用户数据。我们有一个名为“Next”的按钮来加载API中下一个用户的数据。用户数据很大，完全加载需要时间。</p><p id="1e9c" class="pw-post-body-paragraph lo lp iq lq b lr na jr lt lu nb ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">现在，当我们按下“下一步”按钮时，当前页面数据将消失，我们会看到显示的加载信息。这对于应用程序用户来说是一种不愉快的体验。如果我们等到数据加载后再转换到新屏幕，那就太好了。</p><p id="9463" class="pw-post-body-paragraph lo lp iq lq b lr na jr lt lu nb ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">因此，React在React版本18中引入了这个新的<code class="fe mk ml mm mn b">useTransition()</code>钩子。此挂钩的导入语句和声明:</p><pre class="kg kh ki kj gt nf mn ng nh aw ni bi"><span id="40dd" class="mo kx iq mn b gy nj nk l nl nm">import { useTransition} from "react"; // Import Statement<br/>const [isPending, startTransition] = useTransition(); //Declaration</span></pre><ul class=""><li id="f792" class="nn no iq lq b lr na lu nb lx np mb nq mf nr mj ns nt nu nv bi translated"><strong class="lq ir"> isPending: </strong>是一个布尔值。它的值告诉我们此时转换是否正在发生。对于正在进行的转换为真，否则为假。</li><li id="796f" class="nn no iq lq b lr nw lu nx lx ny mb nz mf oa mj ns nt nu nv bi translated"><strong class="lq ir"> startTransition: </strong>是一个函数，用于通知React我们想要延迟哪个状态更新。</li></ul><h2 id="4e51" class="mo kx iq bd ky mp mq dn lc mr ms dp lg lx mt mu li mb mv mw lk mf mx my lm mz bi translated">例子</h2><p id="8927" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们用一个简单的例子来理解一下<code class="fe mk ml mm mn b">useTransition()</code>的清晰概念。这里，我们有一个从大型免费API打印图像的应用程序。当我们最初启动应用程序时，显示会很清晰。</p><p id="b679" class="pw-post-body-paragraph lo lp iq lq b lr na jr lt lu nb ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">我们有一个名为'<strong class="lq ir"> <em class="ob">'的按钮，它调用一个名为<code class="fe mk ml mm mn b">loadData()</code>的函数，它被包装在<code class="fe mk ml mm mn b">startTransition</code>函数中。这是我们告诉React我们不介意等待该函数完成加载数据的方式。一旦完成加载数据，它会将'<strong class="lq ir"> <em class="ob"> isPending </em> </strong>'的值设置为False。</em></strong></p><p id="2365" class="pw-post-body-paragraph lo lp iq lq b lr na jr lt lu nb ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">loadData函数从API获取图像数据，并将其设置为名为'<strong class="lq ir"> <em class="ob"> images </em> </strong>'的状态变量。然后，我们将<em class="ob">图片</em>作为道具传递给另一个名为“<strong class="lq ir"><em class="ob">display images</em></strong>”的组件，它将在那里显示图片。</p><p id="4730" class="pw-post-body-paragraph lo lp iq lq b lr na jr lt lu nb ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">为了生成整个效果，我将<em class="ob"> DisplayImages </em>组件包装在一个div中，并将不透明度设置为0.5，直到<em class="ob"> isPending </em>变为False。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Example: useTransition() Hook</figcaption></figure><p id="4068" class="pw-post-body-paragraph lo lp iq lq b lr na jr lt lu nb ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">在这里，我已经添加了沙盒链接，如果你想玩代码，并了解它是如何工作的。只需点击它，并在沙盒上测试应用程序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe od l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Code in Sandbox Link</figcaption></figure><h1 id="77a7" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="4109" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">本文的目的是理解React版本18的<code class="fe mk ml mm mn b">useTransition()</code>钩子，以及如何在React应用程序中使用它。我已经尽力用一种简单可行的方式向你解释清楚了。如果你有任何问题，请写在评论区，我会尽一切可能帮助你。如果你喜欢我的文章，请关注我并保持更新。</p><div class="of og gp gr oh oi"><a href="https://medium.com/@kardaniyagnik/membership" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">通过我的推荐链接加入Medium-Yagnik Kardani</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow kp oi"/></div></div></a></div><div class="of og gp gr oh oi"><a href="https://www.buymeacoffee.com/kardaniyagnik" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">Yagnik Kardani正在创建帮助他人成长的技术学习材料。</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">你好👋，我是一名媒体方面的技术作家。我喜欢学习并帮助他人在软件开发和云计算方面成长…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="or l"><div class="ox l ot ou ov or ow kp oi"/></div></div></a></div><p id="f0a2" class="pw-post-body-paragraph lo lp iq lq b lr na jr lt lu nb ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated"><em class="ob">更多内容尽在</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="ob">说白了. io </em> </strong> </a> <em class="ob">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="ob">免费周报</em> </strong> </a> <em class="ob">。关注我们关于</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="ob">推特</em> </strong> </a> <em class="ob">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="ob">LinkedIn</em></strong></a><em class="ob">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="ob">社区不和谐</em> </strong> </a> <em class="ob">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="ob">人才集体</em> </strong> </a> <em class="ob">。</em></p></div></div>    
</body>
</html>