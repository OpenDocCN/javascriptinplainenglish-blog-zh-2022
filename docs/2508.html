<html>
<head>
<title>Fix: Cannot Read Property ‘replace’ of Undefined Error in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复:无法读取JavaScript中未定义错误的属性“replace”</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/fix-cannot-read-property-replace-of-undefined-error-in-javascript-a8ebd23de9a3?source=collection_archive---------4-----------------------#2022-06-12">https://javascript.plainenglish.io/fix-cannot-read-property-replace-of-undefined-error-in-javascript-a8ebd23de9a3?source=collection_archive---------4-----------------------#2022-06-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/25760e3c14f87027d2889e6056d3519b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*diEtateS4zEYmnY89TKGOw.png"/></div></div></figure><p id="8fb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你在JavaScript中遇到过“无法读取undefined的‘replace’属性”错误吗？当您试图对值为<code class="fe kt ku kv kw b">undefined</code>的变量调用<code class="fe kt ku kv kw b">replace()</code>方法时，会出现此错误。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="f076" class="lf lg in kw b gy lh li l lj lk">const str = undefined;</span><span id="3864" class="lf lg in kw b gy ll li l lj lk">// TypeError: Cannot read properties of undefined (reading 'replace')<br/>const newStr = str.replace('old', 'new');</span><span id="c009" class="lf lg in kw b gy ll li l lj lk">console.log(newStr);</span></pre><p id="a344" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要修复“无法读取undefined的属性‘replace’”错误，请在对变量调用<code class="fe kt ku kv kw b">replace()</code>方法之前对变量执行<code class="fe kt ku kv kw b">undefined</code>检查。有各种方法可以做到这一点。</p><h1 id="68c2" class="lm lg in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">检查变量是否为真</h1><p id="2b01" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">我们可以使用一个<code class="fe kt ku kv kw b">if</code>语句来检查变量是否为真:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="be9c" class="lf lg in kw b gy lh li l lj lk">const str = undefined;</span><span id="1f91" class="lf lg in kw b gy ll li l lj lk">let result1 = undefined;<br/>// Check if truthy<br/>if (str) {<br/>  result1 = str.replace('old', 'new');<br/>}<br/>console.log(result1); // undefined</span></pre><h1 id="ba83" class="lm lg in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">使用可选链接</h1><p id="c43c" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">如果变量为nullish ( <code class="fe kt ku kv kw b">null</code>或<code class="fe kt ku kv kw b">undefined</code>)，我们可以使用可选的链接操作符(<code class="fe kt ku kv kw b">?.</code>)返回<code class="fe kt ku kv kw b">undefined</code>并阻止属性访问:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="7ad3" class="lf lg in kw b gy lh li l lj lk">// Optional chaining<br/>const result2 = str?.replace('old', 'new');<br/>console.log(result2); // undefined</span></pre><h1 id="8250" class="lm lg in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">使用后备字符串进行替换</h1><p id="b7cd" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">我们可以使用nullish合并操作符(<code class="fe kt ku kv kw b">??</code>)来提供一个可替换的字符串来执行搜索和替换。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="8ea9" class="lf lg in kw b gy lh li l lj lk">const result3 = (str ?? 'old str').replace('old', 'new');<br/>console.log(result3); // 'new str'</span></pre><p id="ac1d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">零合并运算符(<code class="fe kt ku kv kw b">??</code>)是一个逻辑运算符，当其左侧操作数为<code class="fe kt ku kv kw b">null</code>或<code class="fe kt ku kv kw b">undefined</code>时，返回其右侧操作数。</p><h1 id="2e87" class="lm lg in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">使用回退字符串代替替换</h1><p id="45e2" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">我们可以将可选的链接操作符和nullish合并操作符结合起来，提供一个默认的字符串作为结果，而不是执行替换。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="237d" class="lf lg in kw b gy lh li l lj lk">const result4 = str?.replace('old', 'new') ?? 'no matches';<br/>console.log(result4); // 'no matches'</span></pre><h2 id="a5f9" class="lf lg in bd ln mo mp dn lr mq mr dp lv kg ms mt lz kk mu mv md ko mw mx mh my bi translated">注意</h2><p id="03be" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">如果变量不是nullish，但是没有<code class="fe kt ku kv kw b">replace()</code>方法，您将得到一种不同的错误:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="f22a" class="lf lg in kw b gy lh li l lj lk">const obj = {};</span><span id="c339" class="lf lg in kw b gy ll li l lj lk">// TypeError: obj.replace is not a function<br/>const result = obj.replace('old', 'new');</span><span id="9e9c" class="lf lg in kw b gy ll li l lj lk">console.log(result);</span></pre></div><div class="ab cl mz na hr nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ig ih ii ij ik"><p id="852c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ng">更新于:</em><a class="ae nh" href="https://codingbeautydev.com/blog/javascript-cannot-read-property-replace-of-undefined?utm_source=medium&amp;utm_medium=social&amp;utm_campaign=blog-promo" rel="noopener ugc nofollow" target="_blank"><em class="ng">codingbeautydev.com</em></a></p><p id="6788" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所有疯狂的事情</p><p id="ea19" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c540b3073d35ba821d506504618c25a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*7xo67KTthQrCPU_TOVqbZA.png"/></div></figure><p id="5f36" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击 免费获得<a class="ae nh" href="https://codingbeautydev.com/crazy-js-book/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">。</strong></a></p></div></div>    
</body>
</html>