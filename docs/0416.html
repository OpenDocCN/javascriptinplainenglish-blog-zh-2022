<html>
<head>
<title>Build Privex: A Cross-Platform React Native Chat App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建Privex:一个跨平台的React原生聊天应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-privex-a-cross-platform-reactnative-chat-app-9d28df0c54ea?source=collection_archive---------17-----------------------#2022-01-24">https://javascript.plainenglish.io/build-privex-a-cross-platform-reactnative-chat-app-9d28df0c54ea?source=collection_archive---------17-----------------------#2022-01-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9296989f3c9e9a2c761bc4f0d864098d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0_U6veo-qVEJno6GklvkJA.png"/></div></div></figure><p id="b0e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你将要建造的东西。看现场<a class="ae kt" href="https://privex-d1c15.web.app/" rel="noopener ugc nofollow" target="_blank">演示</a>和Git回购<a class="ae kt" href="https://github.com/Daltonic/privex" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ca"><img src="../Images/706dbfd800d949dc91c105a1c916ebab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cDmAXZ3d96FuSYPU.gif"/></div></div></figure><h1 id="b4bb" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h1><p id="0c6e" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">让我们现实一点，如果你还没有建立一个聊天应用程序，你仍然有点落后于软件开发的前沿。你需要把你的应用程序开发提升到一个新的水平。幸运的是，像<a class="ae kt" href="https://reactnative.dev/" rel="noopener ugc nofollow" target="_blank"> React Native </a>这样的跨平台框架可以让你立刻构建一个现代聊天应用，就像上面看到的那样。</p><p id="b718" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，您将学习如何使用；ReactNative、<a class="ae kt" href="http://" rel="noopener ugc nofollow" target="_blank"> CometChat </a>和Firebase来构建一个拥有惊艳UI的<strong class="jx io">一对一</strong>聊天app。</p><p id="4ccc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.youtube.com/channel/UCQteXYZ5mC-cuTxplzM4Hlw?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">现在就去我的Youtube频道查看免费的web3教程</a>。</p><p id="da80" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你准备好了，让我们开始吧…</p><h1 id="8ac0" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">先决条件</h1><p id="168a" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">要理解本教程，您应该已经熟悉了ReactNative其余的堆栈很容易掌握。下面列出了用于创建此应用程序的包。</p><ul class=""><li id="922b" class="mb mc in jx b jy jz kc kd kg md kk me ko mf ks mg mh mi mj bi translated"><a class="ae kt" href="https://reactnative.dev/" rel="noopener ugc nofollow" target="_blank">反应原生</a></li><li id="114d" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated"><a class="ae kt" href="http://" rel="noopener ugc nofollow" target="_blank">燃烧基地</a></li><li id="41a7" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated"><a class="ae kt" href="https://app.cometchat.com/" rel="noopener ugc nofollow" target="_blank"> CometChat </a></li><li id="e920" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated"><a class="ae kt" href="http://" rel="noopener ugc nofollow" target="_blank">世博会</a></li><li id="a866" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated"><a class="ae kt" href="http://" rel="noopener ugc nofollow" target="_blank"> Node.js </a></li></ul><h1 id="f797" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">安装项目依赖项</h1><p id="50de" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">首先，在你的机器上下载并安装<strong class="jx io"> Node.js </strong>。然后，如果你还没有，去他们的<a class="ae kt" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank">网站</a>完成安装。然后必须使用下面的命令将Expo-CLI安装到您的计算机上。您可以通过点击此<a class="ae kt" href="http://" rel="noopener ugc nofollow" target="_blank">链接</a>进入他们的文档页面。</p><p id="57a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mp mq mr ms b"># Install Expo-CLI</code></p><p id="2398" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mp mq mr ms b">npm install --global expo-cli</code></p><p id="a134" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">之后，打开终端并创建一个名为<strong class="jx io"> privex </strong>的新expo项目，在提示时选择空白模板。用下面的例子来说明这一点。</p><pre class="ku kv kw kx gt mt ms mu mv aw mw bi"><span id="d8a5" class="mx kz in ms b gy my mz l na nb">#Create a new expo project and navigate to the directory</span><span id="d0f3" class="mx kz in ms b gy nc mz l na nb">expo init <strong class="ms io">privex</strong></span><span id="e2ee" class="mx kz in ms b gy nc mz l na nb">cd <strong class="ms io">privex</strong></span><span id="c65c" class="mx kz in ms b gy nc mz l na nb">#Start the newly created expo project</span><span id="fd7a" class="mx kz in ms b gy nc mz l na nb">expo start</span></pre><p id="13e7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在终端上运行上述命令将创建一个新的react-native项目，并在浏览器上启动它。现在，您可以选择启动IOS、Android或Web界面，只需选择您想要的界面。要在<a class="ae kt" href="https://docs.expo.dev/workflow/ios-simulator/" rel="noopener ugc nofollow" target="_blank"> IOS </a>或<a class="ae kt" href="https://docs.expo.dev/workflow/android-studio-emulator/" rel="noopener ugc nofollow" target="_blank"> Android </a>上启动开发服务器，你需要一个模拟器，使用这里的说明来使用IOS或Android模拟器，否则，使用web界面并遵循教程。</p><p id="a059" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">很好，现在按照下面的说明为我们的项目安装这些关键的依赖项。<strong class="jx io">纱</strong>是博览会的默认包经理；请参见下面的代码。</p><pre class="ku kv kw kx gt mt ms mu mv aw mw bi"><span id="bbb4" class="mx kz in ms b gy my mz l na nb"># Install the native react navigation libraries</span><span id="3f8c" class="mx kz in ms b gy nc mz l na nb">yarn add @react-navigation/native</span><span id="53fe" class="mx kz in ms b gy nc mz l na nb">yarn add @react-navigation/native-stack</span><span id="ea45" class="mx kz in ms b gy nc mz l na nb">#Installing dependencies into an Expo managed project</span><span id="9247" class="mx kz in ms b gy nc mz l na nb">expo install react-native-screens react-native-safe-area-context react-native-gesture-handler</span><span id="afa2" class="mx kz in ms b gy nc mz l na nb"># Install an Icon pack and a state manager</span><span id="8b78" class="mx kz in ms b gy nc mz l na nb">yarn add react-native-vector-icons react-hooks-global-state</span></pre><p id="b17b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">很好，现在让我们为这个项目设置<a class="ae kt" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase </a>。</p><h1 id="2bc0" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">设置Firebase</h1><p id="c65f" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">运行以下命令，在项目中正确安装firebase。</p><p id="05f9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用以下命令安装Firebase:</p><pre class="ku kv kw kx gt mt ms mu mv aw mw bi"><span id="8b8f" class="mx kz in ms b gy my mz l na nb">expo install firebase</span></pre><p id="3787" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们从为这个项目配置Firebase控制台开始，包括我们将使用的服务。</p><p id="ee3b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您还没有Firebase帐户，请为自己创建一个。之后，转到Firebase，创建一个名为<strong class="jx io"> privex </strong>的新项目，然后激活Google认证服务，详细如下。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/c1103ff0d9673cf0022752b51834b275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kNsx_hM1vNjk5WKO.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/8b1f7a96d7c3d39b06c4ec323e60c10d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1zywuINlt8pcSnGx.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/1242508277ae8cdbbc52b21be898f54f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aYV6Br8JiJnqfRKy.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/b40f35306df362a382a3ddf30904ee60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WNrjzqz10pVSX8wD.png"/></div></div></figure><p id="5cdd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Firebase支持通过各种提供者进行身份验证。例如，社会认证、电话号码以及传统的电子邮件和密码方法。因为我们将在本教程中使用Google认证，所以我们需要为我们在Firebase中创建的项目启用它，因为它在默认情况下是禁用的。单击项目的authentication选项卡下的登录方法，您应该会看到Firebase当前支持的提供者列表。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/fd217959679a65fcb5751b46a1cc6f14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iipTR7D8Lsvvj-h6.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/3778e921e86241903258a7b0a2c3e8fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i42o5egpFZGfk4AI.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/1eebc855369212bec530e1de3e98ca16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BV4Lc99Jrqj7nEnZ.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/40be27fd5f148fc600001feb3eceb5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vcAnkYS9fpZCIS03.png"/></div></div></figure><p id="5d5e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太好了，这就是firebase身份验证的全部内容，让我们生成Firebase SDK配置密钥。</p><p id="3ae9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您需要在Firebase项目下注册您的应用程序。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/0318bedc06e87d092b2699182ec4cc84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ONjQzpajRydhdbXo.png"/></div></div></figure><p id="905f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在项目的概述页面上，选择添加应用选项，并选择<strong class="jx io"> web </strong>作为平台。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/42754fee97349fe566433484b64740e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c1xfigfIvKno4dZ3.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/3c6b656c0da0d0026ef1e272ccf8d60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HI12Y-IN4mfSpGmi.png"/></div></div></figure><p id="395a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成SDK配置注册后，返回到项目概述页面，如下图所示。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/9460dfcb4c5c116da9696e045cf650a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UP59nmVPHfV17nv7.png"/></div></div></figure><p id="ef63" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您可以单击项目设置来复制您的SDK配置设置。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/3c47f97ce317a47e47036b4e2aa0315b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oQbMW4XtJ3HfROXS.png"/></div></div></figure><p id="d81d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上图中显示的配置密钥必须复制到一个单独的文件中，该文件将在本项目稍后使用。</p><p id="37ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个项目的根目录下创建一个名为<strong class="jx io"> firebase.js </strong>的文件，在保存之前将下面的代码粘贴到其中。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="39b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你正确地遵循每件事，你是令人敬畏的。接下来我们将为<strong class="jx io"> CometChat </strong>做一些类似的事情。</p><h1 id="abea" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">设置CometChat</h1><p id="3234" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">如果您没有他们的帐户，请访问<a class="ae kt" href="https://app.cometchat.com/app/" rel="noopener ugc nofollow" target="_blank">come chat</a>并注册。接下来，登录，您将看到下面的屏幕。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/d089e69b57f6e76d4e4ffc195a521b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hAgG4WEmwk11x2g8.png"/></div></div></figure><p id="a1c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要创建新的应用程序，点击<strong class="jx io">添加新应用程序按钮</strong>。您将看到一个模式，您可以在其中输入应用程序的详细信息。下图显示了一个示例。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/3182fd112e8d9db08e426402ee20a222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iBEaNUYamwyhxcGx.png"/></div></div></figure><p id="3803" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建应用程序后，您将被定向到您的仪表板，看起来应该像这样。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/9ee6cc739cc50c6d4e8bfa98f12b30ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vmNdrkP0tBx38Xtn.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/f447bc29cab809c2e65fc6f7806cbbf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8ZcJH3JzftIvQ8VH.png"/></div></div></figure><p id="ad06" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您还必须按照下述方式将这些密钥复制到一个单独的文件中。只需在项目的根目录下创建一个名为<strong class="jx io"> CONSTANTS.js </strong>的文件，并将下面的代码粘贴到其中。现在将这个文件包含在<strong class="jx io">中。gitIgnore </strong>文件，也位于这个项目的根目录下；这将确保它不会在网上发布。</p><pre class="ku kv kw kx gt mt ms mu mv aw mw bi"><span id="1cbd" class="mx kz in ms b gy my mz l na nb"><em class="nn">export</em> const CONSTANTS = {</span><span id="6ab5" class="mx kz in ms b gy nc mz l na nb">APP_ID: 'xxx-xxx-xxx',</span><span id="86b0" class="mx kz in ms b gy nc mz l na nb">REGION: 'us',</span><span id="dd75" class="mx kz in ms b gy nc mz l na nb">Auth_Key: 'xxx-xxx-xxx-xxx-xxx-xxx-xxx-xxx',</span><span id="a55c" class="mx kz in ms b gy nc mz l na nb">}</span></pre><p id="1642" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，删除预加载的用户和组，如下图所示。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/efe066d95943e130440ca9358e0c87a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n3eKoR9jPyu7Uo5p.png"/></div></div></figure><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/5a0db4ecfb3964a985fcf08acbba1caa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qr6drDCjcgDxvX6O.png"/></div></div></figure><p id="53a8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太棒了，这对于设置来说已经足够了，让我们开始将它们集成到我们的应用程序中，我们将从组件开始。</p><h1 id="c69b" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">组件目录</h1><p id="0b2e" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">该项目包含几个目录；让我们从组件文件夹开始。在这个项目的根目录下，创建一个名为<strong class="jx io"> components </strong>的文件夹。让我们从<strong class="jx io">标题</strong>组件开始。</p><p id="a60e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">表头组件</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/534dcbad70342a0f94457c37f690eb05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BoLY3SbvrVS3kGh9.png"/></div></div></figure><p id="6b74" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一个支持我们的应用程序的美丽风格的组件。其中有一个头像元素，显示当前用户的个人资料图片。同样，使用这个头像，您可以从应用程序中注销。通过进入组件目录并创建一个名为<strong class="jx io"> HomeHeader.js </strong>的文件来创建这个文件，然后将下面的代码粘贴到其中。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="a095" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">聊天容器组件</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/47bc8991dff65131e74353a2a633a567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Dd0AcS786hhbWyZG.png"/></div></div></figure><p id="0d36" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该组件负责展示用户最近的对话。它不仅如此，它还可以显示用户的故事和一个浮动按钮，用于显示所有在我们的应用程序中注册的用户。我们将分别研究它们，下面显示的是它们的代码。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="cdbe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">浮动按钮组件</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/726aec427dd56ec71b76aaa4d1cddf76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nIjuvk7fVWWOkDdt.png"/></div></div></figure><p id="9ecd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该组件负责启动<strong class="jx io">用户列表</strong>模式，该模式允许我们与平台上的新用户聊天。下面是它的代码片段。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="b4fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">用户列表组件</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/85a2f08d940bd77f574dc29edbc48cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fvr3YRnpClofWpQf.png"/></div></div></figure><p id="d57f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该组件由<strong class="jx io">浮动按钮</strong>启动。它显示了我们平台上的所有用户，使您能够与他们进行首次对话。之后，他们会出现在你的对话列表中。下面是负责其实现的代码。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="5ceb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太棒了，我们刚刚完成了专用组件的构建，现在让我们开始制作屏幕。</p><h1 id="f58b" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">屏幕目录</h1><p id="4cf9" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">屏幕类似于网站页面；每个屏幕代表一个页面，您可以使用<strong class="jx io"> React Native </strong> navigator包从一个页面导航到下一个页面。让我们继续进入<strong class="jx io">登录屏幕</strong>。</p><p id="5f38" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">登录屏幕</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/1965f2d9fb32b57c7e70f8b1eba8fba0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5RTQlyKIgyxJDKVi.png"/></div></div></figure><p id="2f50" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个精心制作的屏幕在幕后做了很多事情。它使用Firebase Google身份验证让您登录系统。一旦您登录，Firebase <strong class="jx io"> authStateChange </strong>函数会将您记为登录用户。这在<strong class="jx io"> AuthNavigation </strong>文件中执行。但是在你被允许进入系统之前，你的认证信息将会被检索并发送到CometChat进行注册或登录。一旦<strong class="jx io"> CometChat </strong>完成，你就可以进入系统了。完整的分解见下面的代码。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="ebc1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">主屏幕</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/f36f12ebb0a43dfad8517eb4801e311e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Tt80dXR_ChtJilQq.png"/></div></div></figure><p id="56fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个精心制作的屏幕将组件目录中的所有专用组件集中到一个空间中。每个组件都知道如何履行其职责。这里没有太多的话，让下面的代码做所有的解释。</p><pre class="ku kv kw kx gt mt ms mu mv aw mw bi"><span id="c3cf" class="mx kz in ms b gy my mz l na nb"><em class="nn">import</em> { SafeAreaView, StyleSheet } <em class="nn">from</em> 'react-native'</span><span id="f0b0" class="mx kz in ms b gy nc mz l na nb"><em class="nn">import</em> ChatContainer <em class="nn">from</em> '../components/ChatContainer'</span><span id="a414" class="mx kz in ms b gy nc mz l na nb"><em class="nn">import</em> FloatingButton <em class="nn">from</em> '../components/FloatingButton'</span><span id="9e49" class="mx kz in ms b gy nc mz l na nb"><em class="nn">import</em> HomeHeader <em class="nn">from</em> '../components/HomeHeader'</span><span id="11e0" class="mx kz in ms b gy nc mz l na nb"><em class="nn">import</em> UserList <em class="nn">from</em> '../components/UserList'</span><span id="e2d8" class="mx kz in ms b gy nc mz l na nb">const HomeScreen = ({ navigation }) =&gt; {</span><span id="f746" class="mx kz in ms b gy nc mz l na nb"><em class="nn">return</em> (</span><span id="f1ba" class="mx kz in ms b gy nc mz l na nb">&lt;SafeAreaView <em class="nn">style</em>={styles.container}&gt;</span><span id="9b20" class="mx kz in ms b gy nc mz l na nb">&lt;HomeHeader /&gt;</span><span id="e413" class="mx kz in ms b gy nc mz l na nb">&lt;ChatContainer <em class="nn">navigation</em>={navigation} /&gt;</span><span id="88f8" class="mx kz in ms b gy nc mz l na nb">&lt;FloatingButton /&gt;</span><span id="b0c5" class="mx kz in ms b gy nc mz l na nb">&lt;UserList <em class="nn">navigation</em>={navigation} /&gt;</span><span id="1ab9" class="mx kz in ms b gy nc mz l na nb">&lt;/SafeAreaView&gt;</span><span id="3f89" class="mx kz in ms b gy nc mz l na nb">)</span><span id="55a0" class="mx kz in ms b gy nc mz l na nb">}</span><span id="09f7" class="mx kz in ms b gy nc mz l na nb"><em class="nn">export</em> <em class="nn">default</em> HomeScreen</span><span id="261c" class="mx kz in ms b gy nc mz l na nb">const styles = StyleSheet.create({</span><span id="cfde" class="mx kz in ms b gy nc mz l na nb">container: {</span><span id="3cad" class="mx kz in ms b gy nc mz l na nb">flex: 1,</span><span id="89d0" class="mx kz in ms b gy nc mz l na nb">backgroundColor: '#122643',</span><span id="4090" class="mx kz in ms b gy nc mz l na nb">},</span><span id="3fb2" class="mx kz in ms b gy nc mz l na nb">})</span></pre><p id="a6eb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">聊天屏幕</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/e487b03fb6734974333d7d5f102c60a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qpgOI0kazsP7ToCm.png"/></div></div></figure><p id="4839" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后是屏幕，我们有聊天屏幕，让我们与另一个用户进行一对一的对话。它大量使用<strong class="jx io"> CometChat SDK </strong>进行操作，让我们来看看代码的功能。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="7212" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有三个功能你应该注意，它们是这个屏幕的核心。<strong class="jx io">获取消息</strong>、<strong class="jx io">发送消息</strong>和<strong class="jx io">监听消息</strong>功能。他们利用<strong class="jx io"> CometChat SDK </strong>并且每个人根据他们的名字执行他们的操作。</p><p id="6b35" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是应用程序的最后一个屏幕，让我们用应用程序组件和路由器设置来密封它…</p><h1 id="1f68" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">设置路由器</h1><p id="b061" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">现在我们已经完成了项目的编码，让我们设置导航路由器和守卫。为此，请按照下面的说明创建并粘贴以下代码。</p><p id="d40e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">导航文件</strong></p><p id="d3be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将屏幕分为两组:需要认证的屏幕和不需要认证的屏幕。</p><p id="cfb9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在项目的根目录下创建一个名为<strong class="jx io"> "navigation.js" </strong>的新文件，并将下面的代码粘贴到其中。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="a8a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">授权导航文件</strong></p><p id="20b7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该文件根据firebase身份验证服务的<strong class="jx io">身份验证状态</strong>逻辑地向您显示屏幕。它还负责根据用户是注册还是登录到系统，将用户注册到<strong class="jx io"> CometChat </strong>。要继续，在项目的根目录下创建一个名为<strong class="jx io"> AuthNavigation.js </strong>的新文件，并将下面的代码粘贴到其中。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="11ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，应用程序组件…</p><p id="eef1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">App组件</strong></p><p id="4417" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个组件将这个项目的每个部分组合在一起。请用下面的代码替换该文件的内容。</p><pre class="ku kv kw kx gt mt ms mu mv aw mw bi"><span id="e6fd" class="mx kz in ms b gy my mz l na nb"><em class="nn">import</em> { CometChat } <em class="nn">from</em> '@cometchat-pro/react-native-chat'</span><span id="6613" class="mx kz in ms b gy nc mz l na nb"><em class="nn">import</em> { useEffect } <em class="nn">from</em> 'react'</span><span id="db31" class="mx kz in ms b gy nc mz l na nb"><em class="nn">import</em> AuthNavigation <em class="nn">from</em> './AuthNavigation'</span><span id="71af" class="mx kz in ms b gy nc mz l na nb"><em class="nn">import</em> { CONSTANTS } <em class="nn">from</em> './CONSTANTS'</span><span id="65e5" class="mx kz in ms b gy nc mz l na nb"><em class="nn">export</em> <em class="nn">default</em> function App() {</span><span id="5ee6" class="mx kz in ms b gy nc mz l na nb">const initCometChat = () =&gt; {</span><span id="0d39" class="mx kz in ms b gy nc mz l na nb">let appID = CONSTANTS.APP_ID</span><span id="0e8e" class="mx kz in ms b gy nc mz l na nb">let region = CONSTANTS.REGION</span><span id="fcd3" class="mx kz in ms b gy nc mz l na nb">let appSetting = new CometChat.AppSettingsBuilder()</span><span id="e4dd" class="mx kz in ms b gy nc mz l na nb">.subscribePresenceForAllUsers()</span><span id="2a62" class="mx kz in ms b gy nc mz l na nb">.setRegion(region)</span><span id="0b74" class="mx kz in ms b gy nc mz l na nb">.build()</span><span id="0f15" class="mx kz in ms b gy nc mz l na nb">CometChat.init(appID, appSetting)</span><span id="00da" class="mx kz in ms b gy nc mz l na nb">.then(() =&gt; console.log('Initialization completed successfully'))</span><span id="bfd7" class="mx kz in ms b gy nc mz l na nb">.catch((error) =&gt; console.log('Initialization failed with error:', error))</span><span id="507d" class="mx kz in ms b gy nc mz l na nb">}</span><span id="d8d0" class="mx kz in ms b gy nc mz l na nb">useEffect(() =&gt; initCometChat(), [])</span><span id="89f9" class="mx kz in ms b gy nc mz l na nb"><em class="nn">return</em> &lt;AuthNavigation /&gt;</span><span id="df1c" class="mx kz in ms b gy nc mz l na nb">}</span></pre><p id="591e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">干杯，你刚刚粉碎了这个应用程序，现在是时候用你学到的这个新技巧做更多的事情了。</p><p id="1f30" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您还没有这样做，您可以在您的终端上使用下面的代码启动您的服务器。</p><p id="549f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">#在web视图上启动React本地服务器</p><pre class="ku kv kw kx gt mt ms mu mv aw mw bi"><span id="c395" class="mx kz in ms b gy my mz l na nb">yarn web</span></pre><p id="9e9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该应用程序应该像下图中的功能。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/36965178f8b71f012c7d591cfaa5fcaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/0*_rdfqIxGPr4V_i2Q.gif"/></div></figure><p id="4e41" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.youtube.com/channel/UCQteXYZ5mC-cuTxplzM4Hlw?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">立即在Youtube上观看我的免费web3教程</a>。</p><h1 id="5295" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="7236" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">我们已经到了本教程的结尾；希望你学到了新的东西。成为现代的开发人员可能很困难，但也不是不可能；你能完成的比你想象的更多；你需要的只是一点指导。现在你知道如何使用React Native、Firebase和<a class="ae kt" href="https://app.cometchat.com/" rel="noopener ugc nofollow" target="_blank"> CometChat </a>来创建一个界面漂亮的聊天应用程序。我有更多这样的教程，将告诉你如何进行私人或公共的群聊。我很高兴看到你的伟大作品。</p><p id="5732" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">万事如意！</p><h1 id="eab9" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">关于作者</h1><p id="9c7c" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">福音书达林顿在2016年开始了他的软件工程师之旅。多年来，他在React、React Native、Vue.js等JavaScript堆栈方面的技能日臻成熟。</p><p id="4e91" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">他目前是自由职业者，为客户开发应用程序，编写技术教程，教别人如何做他做的事情。</p><p id="45d5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">福音达林顿是开放的，可以听到你的声音。你可以通过<a class="ae kt" href="https://www.linkedin.com/in/darlington-gospel-aa626b125/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae kt" href="https://www.facebook.com/darlington.gospel01" rel="noopener ugc nofollow" target="_blank">脸书</a>、<a class="ae kt" href="https://github.com/Daltonic" rel="noopener ugc nofollow" target="_blank"> Github </a>或者他的<a class="ae kt" href="https://daltonic.github.io/" rel="noopener ugc nofollow" target="_blank">网站</a>联系到他。</p><p id="9d62" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nn">更多内容看</em> <a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nn">说白了。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nn">免费周报</em> </strong> </a> <em class="nn">。在我们的</em> <a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nn">社区不和谐</em> </strong> </a> <em class="nn">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>