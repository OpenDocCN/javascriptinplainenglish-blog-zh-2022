<html>
<head>
<title>How to open a Record Page from Salesforce Flow using LWC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用LWC从Salesforce Flow打开记录页面</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-open-a-record-page-from-salesforce-flow-using-lwc-a8a94bc0c9ba?source=collection_archive---------2-----------------------#2022-12-20">https://javascript.plainenglish.io/how-to-open-a-record-page-from-salesforce-flow-using-lwc-a8a94bc0c9ba?source=collection_archive---------2-----------------------#2022-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b845" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Lightning Web组件构建简单、通用的流转发操作</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9562c67e334d8ce1daa44a3a7b7447a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVkWkzZ-sqD6zXKFOJD3Aw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@maksym_tymchyk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Maksym Tymchyk 🇺🇦</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d6e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设您面临着将您的用户从一个流中转发到一个记录页面的需求，例如，在创建一个记录之后将用户重定向到相应的记录页面。</p><p id="1370" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">直到最近，解决这个问题的方法通常是建立一个相应的光环流动作。不过既然Lightning Web Components是Salesforce的新标准UI框架，那么在我看来应该尽量用它来代替Aura。因此，在这篇文章中，我们将看看如何用一个简单的LWC来解决整个问题。</p><h1 id="1fdb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">构建打开记录页面流操作</h1><p id="dfcd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了通过我们的LWC实现转发，我们利用了Web API标准，在这种情况下，<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Window" rel="noopener ugc nofollow" target="_blank">窗口</a>和<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Location" rel="noopener ugc nofollow" target="_blank">位置</a>接口的功能:</p><ul class=""><li id="97e3" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">我们将使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Location/origin" rel="noopener ugc nofollow" target="_blank"> location.origin </a>来获取所表示的URL的来源</li><li id="56a2" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">我们将使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open" rel="noopener ugc nofollow" target="_blank"> Window.open( </a>)来加载特定的目标URL</li></ul><p id="bee7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的LWC中，我们组装这些函数如下，并用目标页面的记录id来丰富URL:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="67ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，与Aura组件不同，由于我们此时不能使用LWC作为流程中的无头动作，因此屏幕仍然是必要的，我们在组件的模板中添加了一个微调器作为加载指示器，以便为用户实现视觉上吸引人的显示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h1 id="ea0f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使流操作LWC可配置</h1><p id="418f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果您构建定制组件，您应该确保它们尽可能地可重用和通用。我们还希望通过我们的LWC来实现这一点，因此将其配置为在流中普遍可用。在该流中，可以传递目标页面的记录id，并且可以决定该页面是在相同还是不同的浏览器选项卡中打开。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h1 id="84fc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">打开记录页面流动作的示例性使用</h1><p id="85a0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了通过一个示例演示前面构建的组件的用法，我们将构建一个简单的屏幕流，将用户从Opportunity重定向到关联的Account record页面。</p><p id="ade5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该流程稍后会通过Opportunity record页面中的快速操作来触发，由以下三个简单的流程元素组成:</p><ol class=""><li id="fdc8" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr nf mv mw mx bi translated"><strong class="ky ir">获取记录操作:</strong>获取重定向所需的帐户Id</li><li id="6bf6" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nf mv mw mx bi translated"><strong class="ky ir">账户转发说明屏幕:</strong>可选屏幕，带有关于重定向的简短说明</li><li id="f833" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr nf mv mw mx bi translated"><strong class="ky ir">转发动作画面:</strong>由我行LWC转发至相关账户</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/56cb321572955828fe9c1bc9cf536f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKvlIOJZkaIGMoRmXECNyw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Simple Flow to forward Users from Opportunity to related Account</figcaption></figure><p id="225d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了通过我们的LWC成功重定向，只需将其添加到适当的流动屏幕。我们将Account Id作为记录Id，将“self_”作为目标来打开当前选项卡中的页面。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/6c6566708be05c2752419eaf869050ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_81wobI6sCcfdKET_SKmgw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Add Open Record Page Flow Action LWC to Flow Screen</figcaption></figure><p id="59e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面您可以看到使用我们的组件进行的重定向:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/090c1405ab42be87fb0f293e1066054f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*czl_S5w0tx1Gn1449XMFkg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Use Open Record Page Flow Action LWC to forward the User from Opportunity to related Account</figcaption></figure><h1 id="799b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="8b28" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们已经看到了如何用几行代码构建一个简单通用的LWC，将用户重定向到任何记录页面。也许将来会有一个相应的标准心流动作，或者有可能使用LWC作为没有屏幕的心流动作，但在此之前，本文中显示的变体是避免使用光环的一种替代方法。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="9086" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">GitHub上提供了完整的源代码，包括JEST单元测试和JSDoc注释:</p><div class="nq nr gp gr ns nt"><a href="https://github.com/svierk/awesome-lwc-collection/tree/main/force-app/main/default/lwc/openRecordPageFlowAction" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">awesome-LWC-collection/force-app/main/default/LWC/openRecordPageFlowAction at main…</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kp nt"/></div></div></a></div><p id="69e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oi">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oi">plain English . io</em></strong></a><em class="oi">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="oi">免费周报</em> </strong> </a> <em class="oi">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oi">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oi">LinkedIn</em></strong></a><em class="oi"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oi">YouTube</em></strong></a><em class="oi"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oi">不和</em> </strong> </a> <strong class="ky ir"> <em class="oi">。</em>T49】</strong></p><p id="c962" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="oi">对缩放您的软件启动感兴趣</em> </strong> <em class="oi">？检查</em> <a class="ae kv" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="oi">电路</em> </strong> </a> <em class="oi">。</em></p></div></div>    
</body>
</html>