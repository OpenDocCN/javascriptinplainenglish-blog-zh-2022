<html>
<head>
<title>React Portals: A Way to Separate a Child from its Parent on a React DOM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Portals:一种在React DOM上将子对象与其父对象分开的方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-portals-a-way-to-separate-a-child-from-its-parent-on-a-react-dom-cc893ec83264?source=collection_archive---------8-----------------------#2022-07-07">https://javascript.plainenglish.io/react-portals-a-way-to-separate-a-child-from-its-parent-on-a-react-dom-cc893ec83264?source=collection_archive---------8-----------------------#2022-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3050" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解什么是React门户，何时需要它们，以及如何使用它们。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/976635e484e64f533349ca2ffcca22e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fodnMCB9Ue-cQvkTu8k7Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image created by the author on Canva</figcaption></figure><h1 id="17ac" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">什么是React门户？我们什么时候需要它们？</h1><p id="3d6e" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">React Portal是一种将子组件呈现为DOM节点的方法，该节点位于实际父组件的层次结构之外。简单来说，它是React DOM中另一个地方的入口。</p><p id="86c4" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">当我们在React中创建一个组件时，它遵循已经声明的DOM层次结构。例如，我们创建一个名为<strong class="lp ir"> <em class="mo">的子组件</em> </strong>，其父组件为<strong class="lp ir"> <em class="mo">父组件</em> </strong>。在React DOM中，<em class="mo">父组件</em>将是父组件，而<em class="mo">子组件</em>将嵌套在<em class="mo">父组件中。</em>查看下面的示例代码，理解DOM上父子组件的嵌套。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="e0e7" class="mu kw iq mq b gy mv mw l mx my"><strong class="mq ir"><em class="mo">// Child component<br/></em></strong>function Child() {<br/>    return (<br/>        &lt;h2&gt; This is a child component. &lt;/h2&gt;<br/>    )<br/>}</span><span id="3fe0" class="mu kw iq mq b gy mz mw l mx my"><strong class="mq ir"><em class="mo">// Parent component<br/></em></strong>function Parent() {<br/>    return (<br/>        &lt;div className="container"&gt;<br/>            &lt;Child/&gt;<br/>        &lt;/div&gt;<br/>    )<br/>}</span><span id="2a54" class="mu kw iq mq b gy mz mw l mx my"><strong class="mq ir"><em class="mo">// How they will be nested onto the DOM.<br/></em></strong>&lt;div class="container"&gt;<br/>    &lt;h2&gt; This is a child component. &lt;/h2&gt;<br/>&lt;/div&gt;</span></pre><p id="0e8a" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在这种情况下，DOM考虑在父组件中声明子组件。现在，如果我们想在另一个DOM节点下呈现子组件，该怎么办呢？当我们需要使用React Portals为我们的子组件创建到另一个节点的入口时，就是这种情况。</p><p id="a322" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在这里，你可能会想，为什么我要在别处呈现我的组件呢？据说将React门户与<strong class="lp ir"> <em class="mo">模态、工具提示和对话框</em> </strong>一起使用是一个很好的实践。这是因为我们希望它们与声明它们的组件分开，这样父类的样式就不会影响它们。假设<em class="mo">父</em>组件有一个<strong class="lp ir"> <em class="mo">溢出</em> </strong>样式的<strong class="lp ir"> <em class="mo">隐藏</em> </strong>，那么<em class="mo">子</em>组件也将被隐藏。为了使我们的子组件不被隐藏，我们需要它独立存在，通过为子组件使用一个门户，这变得可能。</p><p id="6b20" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">使用React Portal的另一个好例子是使用模态。考虑一个z索引作为样式给出的父组件。不能为模态子组件分配更高的z索引，因为它遵循父组件的样式。</p><h1 id="ae55" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">如何实现React门户？</h1><p id="667b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">看下面React Portal的语法。第一个参数是我们希望在DOM上从其父组件中分离出来的任何子组件，比如元素、字符串或片段。第二个参数将是任何目标节点或DOM中我们想要添加子节点的元素。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5ded" class="mu kw iq mq b gy mv mw l mx my">ReactDOM.createPortal(child, targetNode)</span></pre><p id="64a7" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这里，我们将使用<strong class="lp ir"><em class="mo">document . body</em></strong>作为目标节点。但是，您可以使用任何DOM节点或元素的class或id属性。请看下面React门户实现的例子。我已经重构了上面使用的子组件和父组件，以便清楚地理解它们的区别。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7428" class="mu kw iq mq b gy mv mw l mx my">import ReactDOM from 'react-dom'</span><span id="cfa2" class="mu kw iq mq b gy mz mw l mx my"><strong class="mq ir"><em class="mo">// Child component<br/></em></strong>function Child() {<br/>    return ReactDOM.createPortal(<br/>        &lt;h2&gt; This is a child component &lt;/h2&gt;,<br/>        document.body    <br/>    )<br/>}</span><span id="5c67" class="mu kw iq mq b gy mz mw l mx my"><strong class="mq ir"><em class="mo">// Parent component<br/></em></strong>function Parent() {<br/>    return (<br/>        &lt;div className="container"&gt;<br/>            &lt;Child/&gt;<br/>        &lt;/div&gt;<br/>    )<br/>}</span><span id="efb1" class="mu kw iq mq b gy mz mw l mx my"><strong class="mq ir"><em class="mo">// How they will be nested onto the DOM.<br/></em></strong>&lt;div class="container"&gt;&lt;/div&gt;<br/>&lt;body&gt;<br/>    &lt;h2&gt; This is a child component &lt;/h2&gt;<br/>&lt;/body&gt;</span></pre><p id="a380" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在子组件中实现React门户后，可以在DOM树中清楚地看到差异。父组件的<div>元素现在变成了空的，子组件的<h2>元素被直接包装到了标签中。</h2></div></p><p id="1de8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">通过这样做，我们应用于<em class="mo">容器</em>类的任何样式都不会应用于子元素，子元素现在可以单独使用它们自己的样式。</p><h1 id="eade" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">关于React门户的重要经验</h1><p id="a5fa" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在使用React Portal时，有必要了解它只修改浏览器中的DOM树，而不会改变React树。换句话说，对于React，子元素<h2>仍然是父组件的子元素。</h2></p><p id="80e8" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">尽管这个子节点可以在DOM树中的任何位置，但它的行为就像React树的普通React子节点一样，与在DOM树中的位置无关。在子元素中触发的事件仍然会传播到包含React树中的祖先，即使这些元素不是DOM树中的祖先。这个概念被称为<strong class="lp ir"> <em class="mo">通过门户冒泡的事件。</em> </strong>同样，React仍然拥有对节点和元素生命周期的控制权。</p><h1 id="4081" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">结论</h1><p id="36cb" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">本文的目的是理解React门户及其用例。我已经给出了一个例子来创建一个我们需要使用React门户的场景。我希望这篇文章能帮助您理解React门户。请跟随我阅读更多类似这样有趣的文章。</p><div class="na nb gp gr nc nd"><a href="https://medium.com/@kardaniyagnik/membership" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">通过我的推荐链接加入Medium-Yagnik Kardani</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">阅读雅格尼克·卡尔达尼(以及媒体上成千上万的其他作家)的每一个故事。如果你喜欢我的文章，请用我的…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">medium.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr kp nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a href="https://www.buymeacoffee.com/kardaniyagnik" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">Yagnik Kardani正在创建帮助他人成长的技术学习材料。</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">你好👋，我是一名媒体方面的技术作家。我喜欢学习并帮助他人在软件开发和云计算方面成长…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="nm l"><div class="ns l no np nq nm nr kp nd"/></div></div></a></div><p id="51fc" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated"><em class="mo">更多内容请看</em><a class="ae nt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lp ir"><em class="mo">plain English . io</em></strong></a><em class="mo">。报名参加我们的</em> <a class="ae nt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。关注我们关于</em><a class="ae nt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lp ir"><em class="mo">Twitter</em></strong></a><em class="mo">和</em><a class="ae nt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lp ir"><em class="mo">LinkedIn</em></strong></a><em class="mo">。查看我们的</em> <a class="ae nt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mo">社区不和谐</em> </strong> </a> <em class="mo">加入我们的</em> <a class="ae nt" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mo">人才集体</em> </strong> </a> <em class="mo">。</em></p></div></div>    
</body>
</html>