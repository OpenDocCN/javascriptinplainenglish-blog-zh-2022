<html>
<head>
<title>How to Implement Speech-to-Text Quickly and Easily (in JavaScript)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何快速简单地实现语音转文本(用JavaScript)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-implement-speech-to-text-quickly-and-easily-in-javascript-d9804ddd2a49?source=collection_archive---------1-----------------------#2022-04-20">https://javascript.plainenglish.io/how-to-implement-speech-to-text-quickly-and-easily-in-javascript-d9804ddd2a49?source=collection_archive---------1-----------------------#2022-04-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4d1e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">让我们用大约12行代码完成它？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3b664713f25505c6cf914e2a0cfa6b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-WRa0zmHFTG-WI0l"/></div></div></figure><p id="98e6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">嘿朋友们，</p><p id="0872" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">今天我们有一个快速而有趣的任务。使用语音识别Web API，我们希望捕获用户的声音，将他们的语音转换成文本，并将文本显示到控制台。</p><p id="e73f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我们开始之前，我还有一篇关于如何轻松实现文本到语音转换的文章。请检查一下。这很简单。</p><p id="5249" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们可以开始了。</p><h1 id="19d1" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">将语音识别功能引入我们的项目</h1><p id="7019" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">开始时，我们不需要安装任何时髦或复杂的东西。我们只需要在我们的项目中引入语音识别。我们使用下面的代码片段来实现这一点:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="fc8f" class="mn lm in mj b gy mo mp l mq mr">const GetSpeech = () =&gt; {<br/>        const SpeechRecognition =  window.SpeechRecognition || window.webkitSpeechRecognition;<br/>       <br/>        let recognition = new SpeechRecognition();</span><span id="ecca" class="mn lm in mj b gy ms mp l mq mr">}</span></pre><p id="138a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们一行一行地分析。</p><p id="94bb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，我们将所有的语音识别功能封装在一个名为<code class="fe mt mu mv mj b">GetSpeech()</code>的函数中。我只想在调用这个函数时捕获语音。如果您没有将语音识别封装在函数中，当您打开网页时，语音将被捕获。这不是我们想要的。</p><p id="fb20" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来，我们创建一个名为<code class="fe mt mu mv mj b">SpeechRecognition</code>的常量变量。这将保持<a class="ae lk" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition" rel="noopener ugc nofollow" target="_blank">语音识别接口</a>。这是一个界面，它将提供我们捕捉语音所需的工具。所以基本上就是说，根据你使用的浏览器(比如Safari或者Google Chrome)，获得合适的界面。</p><p id="c3d8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在最后一行中，我们基本上是在实例化一个SpeechRecgonition对象。我们需要这样做，以便我们可以访问语音识别接口的方法/功能。您将在下一个代码片段中看到这些方法。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="47fc" class="mn lm in mj b gy mo mp l mq mr">recognition.onstart = () =&gt; {<br/>         console.log("starting listening, speak in microphone");<br/>}     </span></pre><p id="42a9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe mt mu mv mj b">onStart</code>是SpeechRecognition接口的一种方法。使用这种方法，当开始捕获语音时，您可以提供您希望程序做什么的指令。在上面的例子中，我想将我的网站正在监听语音输入的信息打印到控制台上。</p><p id="e66d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我的聊天应用程序中，用户必须点击麦克风来触发语音识别。默认情况下，麦克风是黑色的。所以在这个<code class="fe mt mu mv mj b">onStart</code>函数中，我将麦克风的颜色改为红色，表示麦克风当前正在使用中。</p><p id="0798" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有许多理由说明<code class="fe mt mu mv mj b">onStart</code>方法是有用的。做任何对你的应用有意义的事情。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="6656" class="mn lm in mj b gy mo mp l mq mr">recognition.onspeechend = () =&gt; {<br/>                console.log("stopped listening");<br/>                recognition.stop();<br/>            }</span></pre><p id="c177" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来，我们有语音识别界面的<code class="fe mt mu mv mj b">onspeechend</code>方法。当界面识别出用户不再说话时，将自动调用此方法。在上面的例子中，我们做了两件事:[1]打印到控制台麦克风不再监听和[2]关闭识别。所以别听了。</p><p id="3eb6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">同样，在我的聊天应用程序中，这是将我的红色麦克风的颜色改为黑色的时候。这是为了向用户指示麦克风不再是活动的。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="5e29" class="mn lm in mj b gy mo mp l mq mr">recognition.onresult = (result) =&gt; {<br/>        let vocalInput = result.results[0][0].transcript;<br/>         console.log(vocalInput);<br/>}</span></pre><p id="1830" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来，我们有了<code class="fe mt mu mv mj b">onresult</code>方法，注意它有一个名为<code class="fe mt mu mv mj b">result</code>的参数。<code class="fe mt mu mv mj b">result </code>为我们提供了关于声音输入的信息。使用上面代码片段中的第二行代码，您可以访问声音输入的完整文本。</p><p id="4b91" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如您所见，我们刚刚将它打印到控制台上。</p><p id="5019" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在建立了所有这些函数之后，我们完成了以下工作:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="c276" class="mn lm in mj b gy mo mp l mq mr">recogniiton.start()</span></pre><p id="7989" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这一行告诉浏览器开始监听并激活语音识别。请注意，这不同于<code class="fe mt mu mv mj b">onstart</code>方法。<code class="fe mt mu mv mj b">onstart</code>方法定义了激活语音识别时应该发生什么的指令。它实际上并不激活语音识别本身。</p><h1 id="29cc" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">最终代码</h1><p id="7ed7" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">总之，这就是你的函数应该看起来的样子。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="fd52" class="mn lm in mj b gy mo mp l mq mr">const GetSpeech = () =&gt; {<br/>        console.log("clicked microphone");<br/>        const SpeechRecognition =  window.SpeechRecognition || window.webkitSpeechRecognition;<br/>       <br/>        let recognition = new SpeechRecognition();</span><span id="21f7" class="mn lm in mj b gy ms mp l mq mr">recognition.onstart = () =&gt; {<br/>                console.log("starting listening, speak in microphone");<br/>            }<br/>            recognition.onspeechend = () =&gt; {<br/>                console.log("stopped listening");<br/>                recognition.stop();<br/>            }<br/>            recognition.onresult = (result) =&gt; {<br/>                console.log(result.results[0][0].transcript);<br/>             }<br/>         <br/>             recognition.start();<br/>    }</span></pre><p id="405c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你正在寻找一个麦克风图标，看看<a class="ae lk" href="https://fontawesome.com/icons/microphone?s=solid" rel="noopener ugc nofollow" target="_blank"> Font Awesome的麦克风图标</a>。</p><p id="12e6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">查看运行中的代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mw mx l"/></div></figure></div><div class="ab cl my mz hr na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ig ih ii ij ik"><p id="94cd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢阅读！不要忘记看看<a class="ae lk" rel="noopener ugc nofollow" target="_blank" href="/how-to-easily-implement-text-to-speech-functionality-in-your-next-javascript-project-16f0d14432f0">如何在下一个JavaScript项目</a>中轻松实现文本到语音转换。</p><p id="e06f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在不久的将来，我将谈论更多的本地Web APIs，比如地理定位API，所以请不要离开。</p><p id="b588" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">祝你有美好的一天和快乐的编码！</p><p id="fbd6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nf">更多内容请看</em><a class="ae lk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nf">plain English . io</em></strong></a><em class="nf">。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nf">免费周报</em> </strong> </a> <em class="nf">。关注我们关于</em><a class="ae lk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nf">Twitter</em></strong></a><em class="nf">和</em><a class="ae lk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nf">LinkedIn</em></strong></a><em class="nf">。加入我们的</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nf">社区不和谐</em> </strong> </a> <em class="nf">。</em></p></div></div>    
</body>
</html>