<html>
<head>
<title>Passing Arguments to Event Listeners in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中将参数传递给事件侦听器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/passing-arguments-to-event-listeners-in-javascript-1a81bc397ecb?source=collection_archive---------0-----------------------#2022-09-25">https://javascript.plainenglish.io/passing-arguments-to-event-listeners-in-javascript-1a81bc397ecb?source=collection_archive---------0-----------------------#2022-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ad9c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你可能不知道的JavaScript要点</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/df660f95d22fc22c7bfa910946c7a561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x42HZxFrmCJA-0CQvgZplg.jpeg"/></div></div></figure><p id="2b84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">事件是JavaScript和DOM交互的基本组成部分。很多时候我们只需要访问事件处理程序中的事件对象。因为默认情况下事件对象被传递给事件处理程序，所以我们不需要担心向函数传递任何东西。然而，在某些情况下，我们确实需要向函数传递参数。做这件事有不同的方法。这是我觉得最直观的方法。</p><p id="8776" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当事件处理程序在不同的事件中重复使用时，向事件处理程序传递参数特别有用。例如，我们希望根据单击的按钮传递不同的内容，但函数的逻辑是相同的。在这种情况下，我们应该重用该函数，可以只传入不同的内容。</p><h2 id="05c3" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">例子</h2><p id="61f8" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我们从下面的代码开始。</p><pre class="kg kh ki kj gt ml mm mn bn mo mp bi"><span id="5895" class="mq lo iq mm b be mr ms l mt mu">// we want to pass this to the event handler<br/>let newContent = "Lorem ipsum";<br/><br/>// something like this but with an argument <br/>btn.addEventListener("click", changeContent);<br/><br/>function changeContent(content) { <br/>    targetNode.innerText = content;<br/>}</span></pre><p id="62bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们假设<code class="fe mv mw mx mm b">targetNode</code>和<code class="fe mv mw mx mm b">btn</code>都是引用DOM中元素的变量。<code class="fe mv mw mx mm b">targetNode</code>是我们想要替换内容的地方，而<code class="fe mv mw mx mm b">btn</code>是应该触发这个的按钮。我们需要给<code class="fe mv mw mx mm b">btn</code>添加一个事件监听器，我们还想将新内容传递给事件处理程序。</p><p id="8daf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如何将<code class="fe mv mw mx mm b">newContent</code>作为参数传递给事件处理程序？</p><p id="7ea1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从不可能的开始。不可能将参数直接传递给函数，因为这与调用函数是一样的。</p><pre class="kg kh ki kj gt ml mm mn bn mo mp bi"><span id="90d3" class="mq lo iq mm b be mr ms l mt mu">btn.addEventListener("click", changeContent(newContent)); // WRONG!</span></pre><p id="8b9f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">效果将与以下内容相同:</p><pre class="kg kh ki kj gt ml mm mn bn mo mp bi"><span id="d7a8" class="mq lo iq mm b be mr ms l mt mu">changeContent(newContent);</span></pre><p id="625c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该函数将在该行被解析后立即执行。我们当然不希望在事件没有被触发的情况下执行事件处理程序。此外，当事件触发时，事件处理程序将不会执行。</p><p id="d8fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有效的方法是使用匿名函数。</p><pre class="kg kh ki kj gt ml mm mn bn mo mp bi"><span id="63b9" class="mq lo iq mm b be mr ms l mt mu">btn.addEventListener("click", () =&gt; { changeContent(newContent) });</span></pre><p id="9514" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是可行的，因为我们没有像上面那样直接调用函数。我们正在传递一个函数定义，它将被用作回调函数，在传递参数的同时调用我们的实际函数。由于外部(匿名)函数调用另一个完成实际工作的函数，我称之为匿名函数/委托方法。</p><p id="4dac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我们不必使用箭头函数，我们也可以只传递一个普通的匿名函数。</p><pre class="kg kh ki kj gt ml mm mn bn mo mp bi"><span id="c907" class="mq lo iq mm b be mr ms l mt mu">btn.addEventListener("click", function(){<br/>    changeContent(newContent) <br/>});</span></pre><p id="7cd6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据你的选择，<code class="fe mv mw mx mm b">this</code>关键字有所不同，但那是另一篇文章的主题。</p><p id="6f35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们也可以访问事件对象，但是我们需要将它传递给函数，并调整函数定义。</p><pre class="kg kh ki kj gt ml mm mn bn mo mp bi"><span id="703c" class="mq lo iq mm b be mr ms l mt mu">btn.addEventListener("click", (event) =&gt; { <br/>    changeContent(event, newContent) <br/>}); <br/><br/>function changeContent(event, content) { <br/>    targetNode.innerText = content; <br/>}</span></pre><h2 id="b484" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">旁注</h2><p id="ee04" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">由于事件处理程序只不过是一个回调函数，所以您可以使用相同的方法将参数传递给任何其他回调函数。</p><pre class="kg kh ki kj gt ml mm mn bn mo mp bi"><span id="1795" class="mq lo iq mm b be mr ms l mt mu">setTimeout(function(){ sayHi("@kathimalati") }, 1000);<br/>function sayHi(name) {<br/>    alert(`Hi ${name}`);<br/>}</span></pre><h1 id="aabd" class="my lo iq bd lp mz na nb ls nc nd ne lv jw nf jx ly jz ng ka mb kc nh kd me ni bi translated">其他方法</h1><p id="4497" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">一如既往，有不同的方法来实现我们想要的。还有一个选项是使用<code class="fe mv mw mx mm b">bind</code>向函数传递值。这样你就不会把它作为一个参数传入，而是通过关键字<code class="fe mv mw mx mm b">this</code>让它可用。你可以在这里阅读更多关于T2的信息。我选择了匿名函数/委托方法，因为我发现这是最直观的。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><p id="4025" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读！我希望你喜欢这篇文章。关注我以获得更多关于web开发的见解。</p><h2 id="ebde" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">更多参考</h2><div class="nr ns gp gr nt nu"><a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener?retiredLocale=de#the_event_listener_callback" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">event target . addevent listener()-Web API | MDN</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">EventTarget接口的addEventListener()方法设置了一个函数，每当…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">developer.mozilla.org</p></div></div><div class="od l"><div class="oe l of og oh od oi kp nu"/></div></div></a></div><p id="8777" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="oj">更多内容看</em> <a class="ae nj" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="oj">说白了就是</em> </strong> </a> <em class="oj">。报名参加我们的</em> <a class="ae nj" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="oj">免费周报</em> </strong> </a> <em class="oj">。关注我们关于</em> <a class="ae nj" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="oj">推特</em> </strong> </a>，<a class="ae nj" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="oj">领英</em> </strong> </a> <strong class="kt ir"> <em class="oj">，</em></strong><a class="ae nj" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="oj">YouTube</em></strong></a><strong class="kt ir"><em class="oj">，以及</em></strong><em class="oj"/><a class="ae nj" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="oj">不和</em> </strong> </a>T59】</p></div></div>    
</body>
</html>