<html>
<head>
<title>Behind the Scenes of OAuth 2.1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OAuth 2.1的幕后</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/behind-the-scenes-of-oauth-2-1-6ecf669965e6?source=collection_archive---------8-----------------------#2022-09-22">https://javascript.plainenglish.io/behind-the-scenes-of-oauth-2-1-6ecf669965e6?source=collection_archive---------8-----------------------#2022-09-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f10a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">每个web开发人员都应该知道OAuth 2.0 PKCE流程。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3db0fa90b03fb868676fbbba3c862af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SvY5Xkik3tUxI3gf7apMaA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@vantaymedia?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Van Tay Media</a> on <a class="ae ks" href="https://unsplash.com/@prasad_jayakumar/likes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a190" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每个web开发人员都应该知道OAuth 2.0 PKCE流程。概括地说，该流程包括以下内容:</p><ol class=""><li id="9fb4" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">注册客户端应用程序</li><li id="cd86" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">创建一个用户并将该用户与客户端应用程序相关联</li><li id="6c70" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">创建一个密码验证器和密码挑战[PKCE]</li><li id="6951" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">构建授权URL并将用户重定向到授权服务器。</li><li id="00fc" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">成功登录后，用户被重定向回客户端。验证状态。</li><li id="c528" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">用授权码和代码验证符交换访问令牌</li></ol><p id="74ea" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用以下游乐场获得第一手经验。</p><div class="md me gp gr mf mg"><a href="https://www.oauth.com/playground/authorization-code-with-pkce.html" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd io gy z fp ml fr fs mm fu fw im bi translated">OAuth 2.0 PKCE流量</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">在开始这个流程之前，您需要注册一个客户端并创建一个用户。注册会给你一个客户…</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">www.oauth.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu km mg"/></div></div></a></div><p id="5158" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">OAuth 2.0和OpenID Connect帮助Web应用程序:</p><ul class=""><li id="f916" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">通过ID令牌识别用户</li><li id="35c8" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">通过访问令牌访问API</li></ul><p id="b569" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">幕后是关于如何制作这些代币？</p><ul class=""><li id="6737" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">对称和非对称加密</li><li id="f645" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">加密哈希函数</li><li id="2e86" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">JSON Web令牌(JWT，发音为jot)</li><li id="184a" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">JWT签名验证</li><li id="3fb8" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">JSON Web密钥集</li><li id="d56f" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">PKCE</li></ul><p id="eb20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这种理解将有助于开发人员获得知识，并欣赏增强流程的工作。</p></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="5057" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">对称加密</strong></p><ul class=""><li id="bef9" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">对称加密使用秘密密钥(密码)来加密内容。</li><li id="b5e5" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">要解密对称加密的数据，您需要相同的密钥。</li><li id="6e00" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">常用的实现是高级加密标准(AES)。</li><li id="26b2" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">AES密钥的大小可以是128、192或256位。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="847e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">加密文本在每次运行时都会有所不同——这要归功于初始化向量。</p></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="c4e1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">非对称加密:公钥加密</strong></p><ul class=""><li id="feb8" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">公钥加密涉及一对密钥，称为<strong class="kv io">公钥</strong>和<strong class="kv io">私钥</strong></li><li id="b6cd" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">私钥是一个秘密。可以发布相应的公钥。</li><li id="09f0" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">常用的实现是Rivest-Shamir-Adelman (RSA)算法。</li><li id="b462" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">如今RSA公钥对的大小是2048位(256字节)。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="5fc7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">默认情况下，RSA加密文本在每次运行时都会有所不同。</p></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="3c2d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">对称加密和非对称加密</strong></p><ul class=""><li id="c39b" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">对称加密比非对称加密相对更快。</li><li id="1997" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">但是，“共享秘密”是对称方法的一个固有问题。如果你必须和一个人分享钥匙，你可以打电话，发短信，或者通过一些方式交流。如果你必须与成千上万的人分享，这是不切实际的。此外，与不止一个人分享秘密不再是秘密。</li><li id="cdfd" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">非对称方法解决了共享秘密的问题。</li></ul><p id="a64b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">检查SSL/TLS握手过程以了解其动态。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nf"><img src="../Images/4e14d8632c1a46af733dbcd119b614a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b-cMg4SdFRQpBZ1Qk0vwbg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Source: <a class="ae ks" href="https://www.ssl.com/article/ssl-tls-handshake-overview/" rel="noopener ugc nofollow" target="_blank">https://www.ssl.com/article/ssl-tls-handshake-overview/</a></figcaption></figure></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="7132" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">校验和</strong></p><ul class=""><li id="ad8b" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">校验和散列函数生成散列码，使得检查给定数据的完整性成为可能。</li><li id="1ff4" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">我们希望检查完整性的每个字节都应该用于计算校验和。</li><li id="f088" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">哈希函数必须是确定性的，这意味着相同的消息总是产生相同的哈希。</li><li id="c64d" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">解码生成的哈希代码以获得原始内容是不可能的。意图只是为了证明其真实性。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="3c78" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">加密哈希函数</strong></p><blockquote class="ng nh ni"><p id="c425" class="kt ku nj kv b kw kx jo ky kz la jr lb nk ld le lf nl lh li lj nm ll lm ln lo ig bi translated">“MD5校验和可以由能够访问文件的任何人生成。闯入站点或执行中间人攻击的攻击者可以很容易地更改MD5校验和，使其与受损文件相匹配。”— <a class="ae ks" href="https://stackoverflow.com/questions/15194779/md5-vs-gpg-signature#:~:text=MD5%20is%20just%20a%20fingerprint,access%20to%20that%20public%20key." rel="noopener ugc nofollow" target="_blank">堆栈溢出</a></p></blockquote><p id="fe10" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">数字签名克服了上述缺点。</p><p id="686b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">签约</strong></p><ol class=""><li id="2f43" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">创建内容的哈希代码，以确保数据完整性。</li><li id="8732" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">使用私钥加密哈希代码(非对称加密)。加密的散列码被称为数字签名。</li></ol><p id="6a41" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">验证</strong></p><ol class=""><li id="cb43" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">使用公钥(非对称加密)解密数字签名。输出将是散列码。</li><li id="302e" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">验证哈希代码以确保数据完整性。</li></ol><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="2256" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> JSON Web令牌</strong></p><p id="16ff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JSON Web Token (JWT)是一个开放标准(<a class="ae ks" href="https://www.rfc-editor.org/rfc/rfc7519" rel="noopener ugc nofollow" target="_blank"> RFC 7519 </a>)，它定义了一种紧凑且独立的方式，以JSON对象的形式在各方之间安全地传输信息。该信息可以被验证和信任，因为它是<strong class="kv io">数字签名的</strong>。</p><p id="c41c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> RS256 </strong>是流行的算法之一。</p><ul class=""><li id="d81c" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">签名算法是RSASSA-PKCS1-v1_5 ( <strong class="kv io"> RS </strong>)。</li><li id="e93d" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">哈希算法是SHA256 ( <strong class="kv io"> 256 </strong>)。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/7d3af187ace942cb16c252bbf8f12539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fA6xCoGIj57Jy2w_Xl22DQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image Source: <a class="ae ks" href="https://community.auth0.com/t/rs256-vs-hs256-jwt-signing-algorithms/58609" rel="noopener ugc nofollow" target="_blank">https://community.auth0.com/t/rs256-vs-hs256-jwt-signing-algorithms/58609</a></figcaption></figure><p id="0271" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用JWT游乐场了解JWT有效载荷，签名，及其验证过程。</p><div class="md me gp gr mf mg"><a href="https://jwt.io/" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd io gy z fp ml fr fs mm fu fw im bi translated">JWT。超正析象管(Image Orthicon)</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">JSON Web Token (JWT)是一种简洁的、URL安全的方式，用于表示要在双方之间传输的声明。的…</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">jwt.io</p></div></div><div class="mp l"><div class="no l mr ms mt mp mu km mg"/></div></div></a></div></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="820f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你已经到了这个阶段，拍拍自己的背。要进一步探索，请在Okta中创建一个开发者帐户(免费帐户)。</p><div class="md me gp gr mf mg"><a href="https://developer.okta.com/signup/" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd io gy z fp ml fr fs mm fu fw im bi translated">Okta开发人员</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">Okta的开发者版为您的公司提供了评估和探索Okta所需的一切。高达100 MAU，配有…</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">developer.okta.com</p></div></div></div></a></div><p id="928b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Okta默认创建一个授权服务器。导航路径是安全&gt;&gt; API &gt; &gt;授权服务器&gt; &gt;默认。</p><p id="af61" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">按照OAuth 2标准，每个授权服务器都应该发布元数据URI。</p><p id="783f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JWKS是我们的下一个话题。</p><pre class="kd ke kf kg gt np nq nr ns aw nt bi"><span id="d397" class="nu nv in nq b gy nw nx l ny nz"><a class="ae ks" href="https://dev-68546164.okta.com/oauth2/default/.well-known/oauth-authorization-server" rel="noopener ugc nofollow" target="_blank">https://dev-xxxxxxx-okta.com/oauth2/default/.well-known/oauth-authorization-server</a></span><span id="75fa" class="nu nv in nq b gy oa nx l ny nz">"issuer": "https://dev-xxxxxxxx.okta.com/oauth2/default",</span><span id="194a" class="nu nv in nq b gy oa nx l ny nz">"authorization_endpoint": "https://dev-xxxxxxxx.okta.com/oauth2/default/v1/authorize",</span><span id="b7d7" class="nu nv in nq b gy oa nx l ny nz">"token_endpoint": "https://dev-xxxxxxxx.okta.com/oauth2/default/v1/token",</span><span id="4ed1" class="nu nv in nq b gy oa nx l ny nz">"registration_endpoint": "https://dev-xxxxxxxx.okta.com/oauth2/v1/clients",</span><span id="fe26" class="nu nv in nq b gy oa nx l ny nz"><strong class="nq io">"jwks_uri": "https://dev-xxxxxxxx.okta.com/oauth2/default/v1/keys"</strong>,</span></pre></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="af2f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> JSON Web密钥集</strong></p><p id="8535" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JWT的签名验证需要公钥。根据所选算法，还需要其他值。为了使这一信息的共享标准化，引入了JSON Web Key(<a class="ae ks" href="https://www.rfc-editor.org/rfc/rfc7517" rel="noopener ugc nofollow" target="_blank">RFC 7517</a>)。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/834d426f2fa9989823f1b3bed50197b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzc0iz0NjOcpvCrJPzcF-w.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Sample JWKS</figcaption></figure></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="ab3e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们把所有的点连接起来:</p><ul class=""><li id="e5ac" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">ID令牌和访问令牌是一个JWT。</li><li id="3283" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">只有当签名可以被验证时，JWT才是可信的。JWKS通过提供与您的JWT相关的公钥扮演了一个重要的角色。</li><li id="bc39" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">此外，JWT的说法也应该得到核实。在接受有效负载之前，应该遵守到期时间。</li></ul></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="1653" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，让我们用Okta思考一下PKCE(可选部分，随意跳过)。</p><blockquote class="ng nh ni"><p id="8739" class="kt ku nj kv b kw kx jo ky kz la jr lb nk ld le lf nl lh li lj nm ll lm ln lo ig bi translated">利用授权码授权的OAuth 2.0公共客户端<br/>容易受到授权码拦截攻击。这个<br/>规范描述了攻击以及通过使用代码交换的证明密钥<br/> (PKCE，发音为“pixy”)——<a class="ae ks" href="https://www.rfc-editor.org/rfc/rfc7636" rel="noopener ugc nofollow" target="_blank">RFC 7636</a>来缓解<br/>威胁的技术</p></blockquote><p id="ce58" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请阅读博客了解更多关于“OAuth 2.0授权码与PKCE流”的细节。相反，我将分享关于如何生成PKCE以及如何在我们的本地设置中测试运行Auth流的细节。</p><div class="md me gp gr mf mg"><a href="https://developer.okta.com/blog/2019/08/22/okta-authjs-pkce" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd io gy z fp ml fr fs mm fu fw im bi translated">用PKCE流程实现OAuth 2.0授权代码</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">想象两个反向连接的杠杆。也就是说，一个上升，另一个下降。一个杠杆是用户…</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">developer.okta.com</p></div></div><div class="mp l"><div class="oc l mr ms mt mp mu km mg"/></div></div></a></div><p id="4e1c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Okta开发人员帐户中创建以下内容:</p><ol class=""><li id="0ebf" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">创建客户端应用程序。</li><li id="debf" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">在Okta通用目录中创建人员/组。</li><li id="47ef" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">将人员与客户端应用程序相关联。</li></ol><div class="md me gp gr mf mg"><a href="https://developer.okta.com/docs/guides/sign-into-spa-redirect/react/main/#create-an-okta-integration-for-your-app" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab fo"><div class="mi ab mj cl cj mk"><h2 class="bd io gy z fp ml fr fs mm fu fw im bi translated">使用重定向模型让用户登录您的SPA</h2><div class="mn l"><h3 class="bd b gy z fp ml fr fs mm fu fw dk translated">使用Okta的重定向模型(打开一个新窗口)将身份验证添加到您的单页应用程序中。这个例子使用Okta作为…</h3></div><div class="mo l"><p class="bd b dl z fp ml fr fs mm fu fw dk translated">developer.okta.com</p></div></div></div></a></div></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="7998" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将访问令牌复制并粘贴到<a class="ae ks" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank">https://jwt.io/</a>中。</p><p id="6198" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，每个方面都很清楚了:</p><ul class=""><li id="b6d2" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo mv lv lw lx bi translated">签名已验证。</li><li id="2509" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo mv lv lw lx bi translated">jwt.io是怎么知道公钥的？检查网络选项卡。将有两个网络请求——一个针对元数据URI，另一个针对JWKS。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/3de6677fb95c20beb84a3c3637db8956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uSCbciqw7fh5pJHaO63KNw.png"/></div></div></figure></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="f4f6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nj">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">plain English . io</em></strong></a><em class="nj">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nj">免费周报</em> </strong> </a> <em class="nj">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">Twitter</em></strong></a><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">LinkedIn</em></strong></a><em class="nj"/><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">YouTube</em></strong></a><em class="nj"/><a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">不和</em> </strong> </a> <em class="nj">。对增长黑客感兴趣？检查</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nj">电路</em> </strong> </a> <em class="nj">。</em></p></div></div>    
</body>
</html>