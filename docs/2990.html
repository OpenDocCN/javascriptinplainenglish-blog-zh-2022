<html>
<head>
<title>React: Search Component Design</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React:搜索组件设计</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-search-component-design-6b0e618dbf5f?source=collection_archive---------7-----------------------#2022-07-20">https://javascript.plainenglish.io/react-search-component-design-6b0e618dbf5f?source=collection_archive---------7-----------------------#2022-07-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6447" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何设计一个允许用户搜索内容的React组件(在我们的例子中:meme)。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/0bc27695e8fd608339d3fd0757cb769a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wH93zl0ddOaKgC3Ndxq4BA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">fig(1) search design</figcaption></figure><h2 id="111b" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">介绍</h2><p id="8731" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">在这篇博客中，我们将重点设计一个React组件，它将允许用户搜索迷因。这包括从一个API获取数据，在一个砖石布局中呈现给用户，然后根据用户搜索过滤获取的数据。稍后，我们可以添加逻辑来与其他人共享搜索结果。</p><p id="a5f2" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">该方法分为UI设计、组件图、代码细节和功能增强。</p><p id="dcb3" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">注意:为了保持我们对核心业务逻辑的关注，我没有包括道具设计、js doc、国际化、可访问性等。</p><h1 id="1168" class="mn kt in bd ku mo mp mq kx mr ms mt la jt mu ju le jw mv jx li jz mw ka lm mx bi translated">功能要求</h1><ul class=""><li id="0b3c" class="my mz in lq b lr ls lu lv lb na lf nb lj nc mg nd ne nf ng bi translated">用户应该能够看到所有可用的迷因。</li><li id="fc77" class="my mz in lq b lr nh lu ni lb nj lf nk lj nl mg nd ne nf ng bi translated">用户应该能够通过标题搜索迷因。</li><li id="2dc5" class="my mz in lq b lr nh lu ni lb nj lf nk lj nl mg nd ne nf ng bi translated">用户应该能够搜索包含感兴趣的文本的模因。</li><li id="0dee" class="my mz in lq b lr nh lu ni lb nj lf nk lj nl mg nd ne nf ng bi translated">用户应该能够在更新/编辑搜索文本时看到搜索结果的变化。</li><li id="46e0" class="my mz in lq b lr nh lu ni lb nj lf nk lj nl mg nd ne nf ng bi translated">(额外)用户应该能够在搜索时锁定/解除锁定感兴趣的迷因。</li></ul><h1 id="bd51" class="mn kt in bd ku mo mp mq kx mr ms mt la jt mu ju le jw mv jx li jz mw ka lm mx bi translated">构件图</h1><p id="91d2" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">在这一节中，我们将着重于构建组件的层次结构，以理解任务委托和它们之间的数据通信。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nm"><img src="../Images/144de37ee99ee2cad16d2b0bb29c25c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0ZrFQl8MwCD-biC4GIjOw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">fig(2) component diagram</figcaption></figure><h1 id="4a63" class="mn kt in bd ku mo mp mq kx mr ms mt la jt mu ju le jw mv jx li jz mw ka lm mx bi translated">代码设计</h1><h2 id="a5e1" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">搜索组件:</h2><p id="64af" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">我们将构建一个搜索组件，为我们完成大部分繁重的工作。因此迷因可以通过外部API获得，一旦DOM被挂载，我们将利用<em class="mm"> useEffect </em>钩子进行异步API调用。</p><blockquote class="nn no np"><p id="496d" class="lo lp mm lq b lr mh jo lt lu mi jr lw nq mj ly lz nr mk mb mc ns ml me mf mg ig bi translated">学习要点💡:对外部API调用使用useEffect，应用数组过滤方法。</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/aca325eb36c04d18ef891a698b31c6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ozuhL1rRpjB-LCYsV7ngwA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">fig(3) search component workflow</figcaption></figure><p id="2e96" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">我们将从用户搜索的文本/字符串中过滤提取的数据，然后更新呈现函数，而不是直接从状态更新呈现函数。当用户从搜索的文本/字符串中删除/移除字符或子字符串时，这允许我们保留<em class="mm">的原始状态</em>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nu nv l"/></div></figure><h2 id="0dca" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">搜索项目组件:</h2><p id="e85b" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">SearchItem组件的重点是渲染一个迷因。对过滤后的数据调用SearchItem仍然是搜索组件的职责。通过这样做，获取的数据经过状态更新、过滤逻辑，然后到视觉变化(即，搜索项目)。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="1064" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">很好，我们的搜索示例很好，除了我们不能与搜索查询共享URL。如果没有这个功能，用户将不得不重新输入搜索文本来查找结果。</p><h2 id="7741" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">改进的搜索组件:</h2><p id="f139" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">在本节中，我们将增强搜索组件以利用useSearchParams钩子，但是首先，我们需要用BrowserRouter包装我们的主要组件(即SearchExample)并定义一些路由。关于使用react-router-dom的更多细节，请参考react-router <a class="ae nw" href="https://reactrouter.com/docs/en/v6/hooks/use-search-params" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><blockquote class="nn no np"><p id="55a8" class="lo lp mm lq b lr mh jo lt lu mi jr lw nq mj ly lz nr mk mb mc ns ml me mf mg ig bi translated">学习要点💡:利用react-router-dom，使用SearchParam钩子用查询字符串更新浏览器URL。</p></blockquote><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="7f4e" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">我们开始定义一个路由(搜索组件将在根目录加载)，然后我们将useSearchParams挂钩添加到我们的搜索组件，以便我们用用户键入的搜索文本/字符串更新URL。</p><blockquote class="nn no np"><p id="3889" class="lo lp mm lq b lr mh jo lt lu mi jr lw nq mj ly lz nr mk mb mc ns ml me mf mg ig bi translated">请查看<a class="ae nw" href="https://codesandbox.io/s/search-example-mh426q" rel="noopener ugc nofollow" target="_blank"> codesandbox </a>获取完整代码</p></blockquote><h2 id="8054" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">搜索演示:</h2><div class="nx ny gp gr nz oa"><a href="https://mh426q.csb.app/" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd io gy z fp of fr fs og fu fw im bi translated">React应用</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">搜索使用功能组件、挂钩和反应路由器构建的示例应用程序</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">mh426q.csb.app</p></div></div></div></a></div><blockquote class="nn no np"><p id="153a" class="lo lp mm lq b lr mh jo lt lu mi jr lw nq mj ly lz nr mk mb mc ns ml me mf mg ig bi translated"><strong class="lq io">奖励</strong>:增加了允许用户在搜索时锁定/选择感兴趣的项目/迷因的功能。即，单击将固定项目，双击将取消固定选定的项目/meme。</p></blockquote><h2 id="4afd" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">具有更多改进的搜索组件:</h2><p id="c826" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">在本节的这一部分，我们将增强我们的代码，以便用户能够在搜索时通过单击和双击项目来锁定/取消锁定。这使得用户在搜索时不会丢失他们感兴趣的项目。大部分逻辑驻留在搜索组件中，在搜索项组件和CSS中有少量更新。</p><blockquote class="nn no np"><p id="aed6" class="lo lp mm lq b lr mh jo lt lu mi jr lw nq mj ly lz nr mk mb mc ns ml me mf mg ig bi translated">💡:利用点击事件，合并两个数组，传递回调函数</p></blockquote><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="2e1b" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">和searchItem组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nu nv l"/></div></figure><blockquote class="nn no np"><p id="b3c2" class="lo lp mm lq b lr mh jo lt lu mi jr lw nq mj ly lz nr mk mb mc ns ml me mf mg ig bi translated">请查看<a class="ae nw" href="https://codesandbox.io/s/search-example-with-item-select-vif9hh" rel="noopener ugc nofollow" target="_blank"> codesandbox </a>获取完整代码</p></blockquote><h2 id="34b4" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">高级搜索演示:</h2><div class="nx ny gp gr nz oa"><a href="https://vif9hh.csb.app/" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd io gy z fp of fr fs og fu fw im bi translated">搜索示例应用程序</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">改进的搜索示例，具有允许用户在搜索时锁定/取消锁定项目的功能</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">vif9hh.csb.app</p></div></div></div></a></div><p id="f264" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">现在，我们的应用程序已经完成了我们在设计阶段开始时决定的大部分功能，但我们可以继续添加新的增强功能，如无限滚动、加载占位符等。但我会让你自己去发挥。</p><h2 id="d99f" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">我之前的三篇博客:</h2><p id="d5ea" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">1.<a class="ae nw" href="https://citta-lab.medium.com/react-node-why-should-we-care-about-dependencies-a8d3e904689b" rel="noopener"> React | Node:为什么要关心依赖关系？</a></p><p id="8a14" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">2.<a class="ae nw" href="https://medium.com/@mahesh2684/diy-how-to-fix-your-hvac-zone-damper-4a7a5b21d3be" rel="noopener"> DIY:如何修理你的HVAC区域风门</a></p><p id="085a" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">3.<a class="ae nw" href="https://medium.com/javascript-in-plain-english/internationalization-in-react-apps-using-react-intl-1d72a6f14053" rel="noopener">React应用中使用react-intl的国际化</a></p></div><div class="ab cl ok ol hr om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ig ih ii ij ik"><p id="c8e0" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated"><em class="mm">更多内容请看</em><a class="ae nw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="mm">plain English . io</em></strong></a><em class="mm">。报名参加我们的</em> <a class="ae nw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="mm">免费周报</em> </strong> </a> <em class="mm">。关注我们关于</em><a class="ae nw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="mm">Twitter</em></strong></a><em class="mm">和</em><a class="ae nw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="mm">LinkedIn</em></strong></a><em class="mm">。查看我们的</em> <a class="ae nw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="mm">社区不和谐</em> </strong> </a> <em class="mm">加入我们的</em> <a class="ae nw" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="mm">人才集体</em> </strong> </a> <em class="mm">。</em></p></div></div>    
</body>
</html>