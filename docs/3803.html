<html>
<head>
<title>Building a beautiful Kanban board with Node.js, React, and Websockets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js、React和Websockets构建漂亮的看板</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-beautiful-kanban-board-with-node-js-react-and-websockets-d6114e187e10?source=collection_archive---------1-----------------------#2022-09-28">https://javascript.plainenglish.io/building-a-beautiful-kanban-board-with-node-js-react-and-websockets-d6114e187e10?source=collection_archive---------1-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/81345526b6771dd599ccbe022d572b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v8-j_kWAya3cejUiK6tP3w.jpeg"/></div></div></figure><h1 id="e174" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">这篇文章是关于什么的？</h1><p id="5caf" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这篇文章中，你将学习如何建立一个看板板，就像你在JIRA，星期一和特雷罗一样。我们将使用React、Socket.io和React beautiful DND，通过一个漂亮的拖放功能来实现它。用户将能够登录，创建和更新各种任务，并添加评论。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/ea266c5858a426e05815c8dac0fb337b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*vNg51gVP5NTNvBz9.gif"/></div></figure><h1 id="6b9c" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">novu——第一个开源通知基础设施</h1><p id="69c5" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">简单介绍一下我们的背景。Novu是第一个开源的<a class="ae lz" href="https://novu.co/" rel="noopener ugc nofollow" target="_blank">通知基础设施</a>。我们基本上帮助管理所有的产品通知。可以是<strong class="ky ir">应用内</strong>(开发者社区里的铃铛图标— <strong class="ky ir"> Websockets </strong>)、电子邮件、短信等等。</p><p id="0293" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如果你能给我们一颗星星，我会非常高兴！这将帮助我每周写更多的文章🚀<br/><a class="ae lz" href="https://github.com/novuhq/novu" rel="noopener ugc nofollow" target="_blank">https://github.com/novuhq/novu</a></p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/319c13343d3353b4b0ddda0f8d56e246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6UrC8p1XpXpZRVnx.gif"/></div></div></figure><p id="8463" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">我们还将在Hacktoberfest期间送出一些精美礼品😇</p><h1 id="ad72" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Socket.io是什么？</h1><p id="7c4c" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><a class="ae lz" href="https://socket.io/" rel="noopener ugc nofollow" target="_blank"> Socket.io </a>是一个流行的JavaScript库，它允许我们在web浏览器和Node.js服务器之间创建实时的双向通信。这是一个高性能和可靠的库，优化处理大量的数据，最小的延迟。它遵循WebSocket协议，并提供更好的功能，例如回退到HTTP长轮询或自动重新连接，这使我们能够构建高效的实时应用程序。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/92c98acbadd660ffbfcd58918d3fda67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*DTQACebe5rg57hGo.gif"/></div></div></figure><h1 id="31fc" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">如何用Socket.io &amp; React.js创建实时连接</h1><p id="c522" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这里，我们将为项目设置项目环境。您还将学习如何将Socket.io添加到React和Node.js应用程序中，并通过Socket.io连接两个开发服务器进行实时通信。</p><p id="fd86" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">创建包含两个子文件夹client和server的项目文件夹。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="3355" class="ml jz iq mh b gy mm mn l mo mp">mkdir todo-list<br/>cd todo-list<br/>mkdir client server</span></pre><p id="9a59" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">通过终端导航到客户端文件夹，创建一个新的React.js项目。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="f654" class="ml jz iq mh b gy mm mn l mo mp">cd client<br/>npx create-react-app ./</span></pre><p id="460d" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">安装Socket.io客户端API和React路由器。<a class="ae lz" href="https://reactrouter.com/docs/en/v6" rel="noopener ugc nofollow" target="_blank"> React Router </a>是一个JavaScript库，使我们能够在React应用程序的页面之间导航。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="26bf" class="ml jz iq mh b gy mm mn l mo mp">npm install socket.io-client react-router-dom</span></pre><p id="81ad" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">从React app中删除logo、测试文件等冗余文件，更新<code class="fe mq mr ms mh b">App.js</code>文件显示Hello World如下图。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="2e15" class="ml jz iq mh b gy mm mn l mo mp">function App() {<br/>    return (<br/>        &lt;div&gt;<br/>            &lt;p&gt;Hello World!&lt;/p&gt;<br/>        &lt;/div&gt;<br/>    );<br/>}<br/>export default App;</span></pre><p id="108f" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">导航到服务器文件夹并创建一个<code class="fe mq mr ms mh b">package.json</code>文件。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="5aec" class="ml jz iq mh b gy mm mn l mo mp">cd server &amp; npm init -y</span></pre><p id="8d1d" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">安装Express.js、CORS、Nodemon和Socket.io服务器API。</p><p id="74f4" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae lz" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express.js </a>是一个快速、极简的框架，为在Node.js中构建web应用程序提供了几个特性。<a class="ae lz" href="https://www.npmjs.com/package/cors" rel="noopener ugc nofollow" target="_blank"> CORS </a>是一个Node.js包，允许不同域之间的通信。</p><p id="80b6" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae lz" href="https://www.npmjs.com/package/nodemon" rel="noopener ugc nofollow" target="_blank"> Nodemon </a>是一个Node.js工具，在检测到文件变化后自动重启服务器，而<a class="ae lz" href="https://socket.io/docs/v4/server-api/" rel="noopener ugc nofollow" target="_blank"> Socket.io </a>允许我们在服务器上配置一个实时连接。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="0b4b" class="ml jz iq mh b gy mm mn l mo mp">npm install express cors nodemon socket.io</span></pre><p id="4d32" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">创建一个<code class="fe mq mr ms mh b">index.js</code>文件web服务器的入口点。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="6c60" class="ml jz iq mh b gy mm mn l mo mp">touch index.js</span></pre><p id="4df4" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">使用Express.js设置一个简单的Node.js服务器。当您在浏览器中访问<code class="fe mq mr ms mh b">http://localhost:4000/api</code>时，下面的代码片段会返回一个JSON对象。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="b798" class="ml jz iq mh b gy mm mn l mo mp">//👇🏻index.js<br/>const express = require("express");<br/>const app = express();<br/>const PORT = 4000;</span><span id="4ac4" class="ml jz iq mh b gy mt mn l mo mp">app.use(express.urlencoded({ extended: true }));<br/>app.use(express.json());</span><span id="bc87" class="ml jz iq mh b gy mt mn l mo mp">app.get("/api", (req, res) =&gt; {<br/>    res.json({<br/>        message: "Hello world",<br/>    });<br/>});</span><span id="934c" class="ml jz iq mh b gy mt mn l mo mp">app.listen(PORT, () =&gt; {<br/>    console.log(`Server listening on ${PORT}`);<br/>});</span></pre><p id="44c6" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">导入HTTP和CORS库，以允许客户端和服务器域之间的数据传输。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="7aba" class="ml jz iq mh b gy mm mn l mo mp">const express = require("express");<br/>const app = express();<br/>const PORT = 4000;</span><span id="c4fd" class="ml jz iq mh b gy mt mn l mo mp">app.use(express.urlencoded({ extended: true }));<br/>app.use(express.json());</span><span id="6476" class="ml jz iq mh b gy mt mn l mo mp">//New imports<br/>const http = require("http").Server(app);<br/>const cors = require("cors");</span><span id="a51b" class="ml jz iq mh b gy mt mn l mo mp">app.use(cors());</span><span id="a1f4" class="ml jz iq mh b gy mt mn l mo mp">app.get("/api", (req, res) =&gt; {<br/>    res.json({<br/>        message: "Hello world",<br/>    });<br/>});</span><span id="b103" class="ml jz iq mh b gy mt mn l mo mp">http.listen(PORT, () =&gt; {<br/>    console.log(`Server listening on ${PORT}`);<br/>});</span></pre><p id="a92e" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">接下来，将Socket.io添加到项目中，以创建实时连接。在<code class="fe mq mr ms mh b">app.get()</code>块之前，复制下面的代码。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="3b3d" class="ml jz iq mh b gy mm mn l mo mp">//New imports<br/>.....<br/>const socketIO = require('socket.io')(http, {<br/>    cors: {<br/>        origin: "http://localhost:3000"<br/>    }<br/>});</span><span id="0dd0" class="ml jz iq mh b gy mt mn l mo mp">//Add this before the app.get() block<br/>socketIO.on('connection', (socket) =&gt; {<br/>    console.log(`⚡: ${socket.id} user just connected!`);<br/>    socket.on('disconnect', () =&gt; {<br/>            socket.disconnect()<br/>      console.log('🔥: A user disconnected');<br/>    });<br/>});</span></pre><p id="7f9a" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">从上面的代码片段来看，<code class="fe mq mr ms mh b">socket.io("connection")</code>函数与React应用程序建立连接，然后为每个套接字创建一个唯一的ID，并在用户访问网页时将该ID记录到控制台。</p><p id="ac21" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">当您刷新或关闭网页时，套接字触发disconnect事件，表明用户已从套接字断开连接。</p><p id="50e2" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">通过在<code class="fe mq mr ms mh b">package.json</code>文件的脚本列表中添加start命令来配置Nodemon。下面的代码片段使用Nodemon启动服务器。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="cd9c" class="ml jz iq mh b gy mm mn l mo mp">//In server/package.json</span><span id="4e15" class="ml jz iq mh b gy mt mn l mo mp">"scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",<br/>    "start": "nodemon index.js"<br/>  },</span></pre><p id="0213" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">现在，您可以使用下面的命令运行带有Nodemon的服务器。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="f779" class="ml jz iq mh b gy mm mn l mo mp">npm start</span></pre><h1 id="716d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">构建用户界面</h1><p id="6936" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这里，我们将为应用程序创建用户界面。它分为三个页面:登录页面、任务页面(应用程序的中心部分)和评论页面(用户可以在这里对每个任务进行评论)。</p><p id="ad10" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">导航到<code class="fe mq mr ms mh b">client/src</code>并创建一个包含<code class="fe mq mr ms mh b">Login.js</code>、<code class="fe mq mr ms mh b">Task.js</code>和<code class="fe mq mr ms mh b">Comments.js</code>文件的组件文件夹。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="baea" class="ml jz iq mh b gy mm mn l mo mp">cd client/src<br/>mkdir components<br/>cd components<br/>touch Login.js Task.js Comments.js</span></pre><p id="0022" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">更新<code class="fe mq mr ms mh b">App.js</code>文件，通过React Router在不同的路径上渲染新创建的组件。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="e358" class="ml jz iq mh b gy mm mn l mo mp">import { BrowserRouter, Route, Routes } from "react-router-dom";<br/>import Comments from "./components/Comments";<br/>import Task from "./components/Task";<br/>import Login from "./components/Login";</span><span id="d2ac" class="ml jz iq mh b gy mt mn l mo mp">function App() {<br/>    return (<br/>        &lt;BrowserRouter&gt;<br/>            &lt;Routes&gt;<br/>                &lt;Route path='/' element={&lt;Login /&gt;} /&gt;<br/>                &lt;Route path='/task' element={&lt;Task /&gt;} /&gt;<br/>                &lt;Route path='/comments/:category/:id' element={&lt;Comments /&gt;} /&gt;<br/>            &lt;/Routes&gt;<br/>        &lt;/BrowserRouter&gt;<br/>    );<br/>}</span><span id="0a9f" class="ml jz iq mh b gy mt mn l mo mp">export default App;</span></pre><p id="d22c" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">导航到<code class="fe mq mr ms mh b">src/index.css</code>文件并复制下面的代码。它包含了设计这个项目所需的所有CSS。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="ad2d" class="ml jz iq mh b gy mm mn l mo mp">@import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap");<br/>* {<br/>    font-family: "Space Grotesk", sans-serif;<br/>    box-sizing: border-box;<br/>}<br/>a {<br/>    text-decoration: none;<br/>}<br/>body {<br/>    margin: 0;<br/>    padding: 0;<br/>}<br/>.navbar {<br/>    width: 100%;<br/>    background-color: #f1f7ee;<br/>    height: 10vh;<br/>    border-bottom: 1px solid #ddd;<br/>    display: flex;<br/>    align-items: center;<br/>    justify-content: space-between;<br/>    padding: 20px;<br/>}<br/>.form__input {<br/>    min-height: 20vh;<br/>    display: flex;<br/>    align-items: center;<br/>    justify-content: center;<br/>}<br/>.input {<br/>    margin: 0 5px;<br/>    width: 50%;<br/>    padding: 10px 15px;<br/>}<br/>.addTodoBtn {<br/>    width: 150px;<br/>    padding: 10px;<br/>    cursor: pointer;<br/>    background-color: #367e18;<br/>    color: #fff;<br/>    border: none;<br/>    outline: none;<br/>    height: 43px;<br/>}<br/>.container {<br/>    width: 100%;<br/>    min-height: 100%;<br/>    display: flex;<br/>    align-items: center;<br/>    justify-content: space-between;<br/>    padding: 10px;<br/>}</span><span id="93ff" class="ml jz iq mh b gy mt mn l mo mp">.completed__wrapper,<br/>.ongoing__wrapper,<br/>.pending__wrapper {<br/>    width: 32%;<br/>    min-height: 60vh;<br/>    display: flex;<br/>    flex-direction: column;<br/>    padding: 5px;<br/>}<br/>.ongoing__wrapper &gt; h3,<br/>.pending__wrapper &gt; h3,<br/>.completed__wrapper &gt; h3 {<br/>    text-align: center;<br/>    text-transform: capitalize;<br/>}<br/>.pending__items {<br/>    background-color: #eee3cb;<br/>}<br/>.ongoing__items {<br/>    background-color: #d2daff;<br/>}<br/>.completed__items {<br/>    background-color: #7fb77e;<br/>}<br/>.pending__container,<br/>.ongoing__container,<br/>.completed__container {<br/>    width: 100%;<br/>    min-height: 55vh;<br/>    display: flex;<br/>    flex-direction: column;<br/>    padding: 5px;<br/>    border: 1px solid #ddd;<br/>    border-radius: 5px;<br/>}<br/>.pending__items,<br/>.ongoing__items,<br/>.completed__items {<br/>    width: 100%;<br/>    border-radius: 5px;<br/>    margin-bottom: 10px;<br/>    padding: 15px;<br/>}<br/>.comment {<br/>    text-align: right;<br/>    font-size: 14px;<br/>    cursor: pointer;<br/>    color: rgb(85, 85, 199);<br/>}<br/>.comment:hover {<br/>    text-decoration: underline;<br/>}<br/>.comments__container {<br/>    padding: 20px;<br/>}<br/>.comment__form {<br/>    width: 100%;<br/>    display: flex;<br/>    align-items: center;<br/>    justify-content: center;<br/>    flex-direction: column;<br/>    margin-bottom: 30px;<br/>}<br/>.comment__form &gt; label {<br/>    margin-bottom: 15px;<br/>}<br/>.comment__form textarea {<br/>    width: 80%;<br/>    padding: 15px;<br/>    margin-bottom: 15px;<br/>}<br/>.commentBtn {<br/>    padding: 10px;<br/>    width: 200px;<br/>    background-color: #367e18;<br/>    outline: none;<br/>    border: none;<br/>    color: #fff;<br/>    height: 45px;<br/>    cursor: pointer;<br/>}<br/>.comments__section {<br/>    width: 100%;<br/>    display: flex;<br/>    align-items: center;<br/>    justify-content: center;<br/>    flex-direction: column;<br/>}</span><span id="d235" class="ml jz iq mh b gy mt mn l mo mp">.login__form {<br/>    width: 100%;<br/>    height: 100vh;<br/>    display: flex;<br/>    flex-direction: column;<br/>    align-items: center;<br/>    justify-content: center;<br/>}<br/>.login__form &gt; label {<br/>    margin-bottom: 15px;<br/>}<br/>.login__form &gt; input {<br/>    width: 70%;<br/>    padding: 10px 15px;<br/>    margin-bottom: 15px;<br/>}<br/>.login__form &gt; button {<br/>    background-color: #367e18;<br/>    color: #fff;<br/>    padding: 15px;<br/>    cursor: pointer;<br/>    border: none;<br/>    font-size: 16px;<br/>    outline: none;<br/>    width: 200px;<br/>}</span></pre><h1 id="454a" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">登录页面</h1><p id="9898" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这里，应用程序接受用户名并将其保存在本地存储中以供识别。</p><p id="c9f1" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如下更新<code class="fe mq mr ms mh b">Login.js</code>文件:</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="9d25" class="ml jz iq mh b gy mm mn l mo mp">import React, { useState } from "react";<br/>import { useNavigate } from "react-router-dom";</span><span id="0539" class="ml jz iq mh b gy mt mn l mo mp">const Login = () =&gt; {<br/>    const [username, setUsername] = useState("");<br/>    const navigate = useNavigate();</span><span id="1086" class="ml jz iq mh b gy mt mn l mo mp">    const handleLogin = (e) =&gt; {<br/>        e.preventDefault();<br/>        //👇🏻 saves the username to localstorage<br/>        localStorage.setItem("userId", username);<br/>        setUsername("");<br/>        //👇🏻 redirects to the Tasks page.<br/>        navigate("/tasks");<br/>    };<br/>    return (<br/>        &lt;div className='login__container'&gt;<br/>            &lt;form className='login__form' onSubmit={handleLogin}&gt;<br/>                &lt;label htmlFor='username'&gt;Provide a username&lt;/label&gt;<br/>                &lt;input<br/>                    type='text'<br/>                    name='username'<br/>                    id='username'<br/>                    required<br/>                    onChange={(e) =&gt; setUsername(e.target.value)}<br/>                    value={username}<br/>                /&gt;<br/>                &lt;button&gt;SIGN IN&lt;/button&gt;<br/>            &lt;/form&gt;<br/>        &lt;/div&gt;<br/>    );<br/>};</span><span id="1fde" class="ml jz iq mh b gy mt mn l mo mp">export default Login;</span></pre><h1 id="5eea" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">任务页面</h1><p id="7984" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这里，我将指导您创建Tasks页面的web布局。下图显示了页面的布局。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/ddd127b8259a5405b42394b7b99ee319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*keakeNE0dcrR0qdP.png"/></div></div></figure><p id="6524" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">将布局分为三个部分，即:<code class="fe mq mr ms mh b">Nav.js</code>、<code class="fe mq mr ms mh b">AddTask.js</code> -表单输入部分，和<code class="fe mq mr ms mh b">TasksContainer.js</code> -包含任务。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="05cb" class="ml jz iq mh b gy mm mn l mo mp">cd src/components<br/>touch Nav.js AddTask.js TasksContainer.js</span></pre><p id="639c" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">渲染<code class="fe mq mr ms mh b">Task.js</code>文件中的组件。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="4bac" class="ml jz iq mh b gy mm mn l mo mp">import React from "react";<br/>import AddTask from "./AddTask";<br/>import TasksContainer from "./TasksContainer";<br/>import Nav from "./Nav";<br/>import socketIO from "socket.io-client";</span><span id="ea28" class="ml jz iq mh b gy mt mn l mo mp">/*<br/>👇🏻  Pass Socket.io into the required components<br/>    where communications are made with the server<br/>*/<br/>const socket = socketIO.connect("http://localhost:4000");</span><span id="fb5a" class="ml jz iq mh b gy mt mn l mo mp">const Task = () =&gt; {<br/>    return (<br/>        &lt;div&gt;<br/>            &lt;Nav /&gt;<br/>            &lt;AddTask socket={socket} /&gt;<br/>            &lt;TasksContainer socket={socket} /&gt;<br/>        &lt;/div&gt;<br/>    );<br/>};</span><span id="a208" class="ml jz iq mh b gy mt mn l mo mp">export default Task;</span></pre><p id="29e3" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">将下面的代码复制到<code class="fe mq mr ms mh b">Nav.js</code>文件中。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="5a3a" class="ml jz iq mh b gy mm mn l mo mp">import React from "react";</span><span id="9169" class="ml jz iq mh b gy mt mn l mo mp">const Nav = () =&gt; {<br/>    return (<br/>        &lt;nav className='navbar'&gt;<br/>            &lt;h3&gt;Team's todo list&lt;/h3&gt;<br/>        &lt;/nav&gt;<br/>    );<br/>};<br/>export default Nav;</span></pre><p id="bea7" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如下更新<code class="fe mq mr ms mh b">AddTask.js</code>文件:</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="99a3" class="ml jz iq mh b gy mm mn l mo mp">import React, { useState } from "react";</span><span id="6daa" class="ml jz iq mh b gy mt mn l mo mp">const AddTask = ({ socket }) =&gt; {<br/>    const [task, setTask] = useState("");</span><span id="857a" class="ml jz iq mh b gy mt mn l mo mp">    const handleAddTodo = (e) =&gt; {<br/>        e.preventDefault();<br/>        //👇🏻 Logs the task to the console<br/>        console.log({ task });<br/>        setTask("");<br/>    };<br/>    return (<br/>        &lt;form className='form__input' onSubmit={handleAddTodo}&gt;<br/>            &lt;label htmlFor='task'&gt;Add Todo&lt;/label&gt;<br/>            &lt;input<br/>                type='text'<br/>                name='task'<br/>                id='task'<br/>                value={task}<br/>                className='input'<br/>                required<br/>                onChange={(e) =&gt; setTask(e.target.value)}<br/>            /&gt;<br/>            &lt;button className='addTodoBtn'&gt;ADD TODO&lt;/button&gt;<br/>        &lt;/form&gt;<br/>    );<br/>};</span><span id="86d0" class="ml jz iq mh b gy mt mn l mo mp">export default AddTask;</span></pre><p id="e627" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">将下面的代码复制到<code class="fe mq mr ms mh b">TasksContainer.js</code>文件中。它为挂起、正在进行和已完成的任务呈现三个父元素。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="ebd2" class="ml jz iq mh b gy mm mn l mo mp">import React from "react";<br/>import { Link } from "react-router-dom";</span><span id="4beb" class="ml jz iq mh b gy mt mn l mo mp">const TasksContainer = ({ socket }) =&gt; {<br/>    return (<br/>        &lt;div className='container'&gt;<br/>            &lt;div className='pending__wrapper'&gt;<br/>                &lt;h3&gt;Pending Tasks&lt;/h3&gt;<br/>                &lt;div className='pending__container'&gt;<br/>                    &lt;div className='pending__items'&gt;<br/>                        &lt;p&gt;Debug the Notification center&lt;/p&gt;<br/>                        &lt;p className='comment'&gt;<br/>                            &lt;Link to='/comments'&gt;2 Comments&lt;/Link&gt;<br/>                        &lt;/p&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;</span><span id="106a" class="ml jz iq mh b gy mt mn l mo mp">            &lt;div className='ongoing__wrapper'&gt;<br/>                &lt;h3&gt;Ongoing Tasks&lt;/h3&gt;<br/>                &lt;div className='ongoing__container'&gt;<br/>                    &lt;div className='ongoing__items'&gt;<br/>                        &lt;p&gt;Create designs for Novu&lt;/p&gt;<br/>                        &lt;p className='comment'&gt;<br/>                            &lt;Link to='/comments'&gt;Add Comment&lt;/Link&gt;<br/>                        &lt;/p&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;</span><span id="370c" class="ml jz iq mh b gy mt mn l mo mp">            &lt;div className='completed__wrapper'&gt;<br/>                &lt;h3&gt;Completed Tasks&lt;/h3&gt;<br/>                &lt;div className='completed__container'&gt;<br/>                    &lt;div className='completed__items'&gt;<br/>                        &lt;p&gt;Debug the Notification center&lt;/p&gt;<br/>                        &lt;p className='comment'&gt;<br/>                            &lt;Link to='/comments'&gt;2 Comments&lt;/Link&gt;<br/>                        &lt;/p&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    );<br/>};</span><span id="29ff" class="ml jz iq mh b gy mt mn l mo mp">export default TasksContainer;</span></pre><p id="36b4" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">恭喜你！💃🏻布局现在设置好了。因此，让我们为评论页面创建一个简单的模板。</p><h1 id="4007" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">评论页面</h1><p id="e659" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">将下面的代码复制到<code class="fe mq mr ms mh b">Comments.js</code>文件中。它将注释和用户名记录到控制台。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="e076" class="ml jz iq mh b gy mm mn l mo mp">import React, { useEffect, useState } from "react";<br/>import socketIO from "socket.io-client";<br/>import { useParams } from "react-router-dom";</span><span id="da95" class="ml jz iq mh b gy mt mn l mo mp">const socket = socketIO.connect("http://localhost:4000");</span><span id="83a5" class="ml jz iq mh b gy mt mn l mo mp">const Comments = () =&gt; {<br/>    const [comment, setComment] = useState("");</span><span id="7ee9" class="ml jz iq mh b gy mt mn l mo mp">    const addComment = (e) =&gt; {<br/>        e.preventDefault();<br/>        console.log({<br/>            comment,<br/>            userId: localStorage.getItem("userId"),<br/>        });<br/>        setComment("");<br/>    };</span><span id="1c28" class="ml jz iq mh b gy mt mn l mo mp">    return (<br/>        &lt;div className='comments__container'&gt;<br/>            &lt;form className='comment__form' onSubmit={addComment}&gt;<br/>                &lt;label htmlFor='comment'&gt;Add a comment&lt;/label&gt;<br/>                &lt;textarea<br/>                    placeholder='Type your comment...'<br/>                    value={comment}<br/>                    onChange={(e) =&gt; setComment(e.target.value)}<br/>                    rows={5}<br/>                    id='comment'<br/>                    name='comment'<br/>                    required<br/>                &gt;&lt;/textarea&gt;<br/>                &lt;button className='commentBtn'&gt;ADD COMMENT&lt;/button&gt;<br/>            &lt;/form&gt;</span><span id="82dd" class="ml jz iq mh b gy mt mn l mo mp">            &lt;div className='comments__section'&gt;<br/>                &lt;h2&gt;Existing Comments&lt;/h2&gt;<br/>                &lt;div&gt;&lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    );<br/>};</span><span id="774c" class="ml jz iq mh b gy mt mn l mo mp">export default Comments;</span></pre><p id="b93d" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">用户界面现在已经完成。接下来，让我们将React Beautiful DND添加到应用程序中，以启用拖放功能。</p><h1 id="d360" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">如何使用React Beautiful DND添加拖放功能</h1><p id="f276" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这里，您将了解如何使用React Beautiful DND添加拖放功能，以及React应用程序和Socket.io Node.js服务器之间的通信。</p><h1 id="57fd" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">React Beautiful DND是如何工作的？</h1><p id="0fc8" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><a class="ae lz" href="https://github.com/atlassian/react-beautiful-dnd" rel="noopener ugc nofollow" target="_blank"> React Beautiful DND </a>是一个高性能的库，允许我们选择一个项目并将其从当前位置拖动到页面上的另一个位置。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/ee9e161c2a2228aeb4f0ca728c1efaf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*3Uo51aD7CtUMgDYy.gif"/></div></figure><p id="632b" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">上图解释了如何设置React Beautiful DND。您必须将所有可拖动和可放下的物品包装在<code class="fe mq mr ms mh b">&lt;DragDropContext/&gt;</code>内。<code class="fe mq mr ms mh b">&lt;Droppable/&gt;</code>组件保存放置在<code class="fe mq mr ms mh b">&lt;Draggable/&gt;</code>组件中的可拖动项目。</p><h1 id="f5ce" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">用React Beautiful DND使任务可拖可放</h1><p id="d5d5" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这里，您将了解如何将React Beautiful DND添加到React应用程序中，并使任务可以从一个类别移动到另一个类别(待定、正在进行和已完成)。</p><p id="8d6b" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">安装React Beautiful DND并确保您没有在严格模式下使用React。(检查<code class="fe mq mr ms mh b">src/index.js</code>)。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="91b7" class="ml jz iq mh b gy mm mn l mo mp">npm install react-beautiful-dnd</span></pre><p id="e408" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">打开<code class="fe mq mr ms mh b">server/index.js</code>文件，创建一个包含每个任务类别的所有虚拟数据的对象。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="dc5f" class="ml jz iq mh b gy mm mn l mo mp">//👇🏻 server/index.js</span><span id="18a3" class="ml jz iq mh b gy mt mn l mo mp">//👇🏻 Generates a random string<br/>const fetchID = () =&gt; Math.random().toString(36).substring(2, 10);</span><span id="1bf2" class="ml jz iq mh b gy mt mn l mo mp">//👇🏻 Nested object<br/>let tasks = {<br/>    pending: {<br/>        title: "pending",<br/>        items: [<br/>            {<br/>                id: fetchID(),<br/>                title: "Send the Figma file to Dima",<br/>                comments: [],<br/>            },<br/>        ],<br/>    },<br/>    ongoing: {<br/>        title: "ongoing",<br/>        items: [<br/>            {<br/>                id: fetchID(),<br/>                title: "Review GitHub issues",<br/>                comments: [<br/>                    {<br/>                        name: "David",<br/>                        text: "Ensure you review before merging",<br/>                        id: fetchID(),<br/>                    },<br/>                ],<br/>            },<br/>        ],<br/>    },<br/>    completed: {<br/>        title: "completed",<br/>        items: [<br/>            {<br/>                id: fetchID(),<br/>                title: "Create technical contents",<br/>                comments: [<br/>                    {<br/>                        name: "Dima",<br/>                        text: "Make sure you check the requirements",<br/>                        id: fetchID(),<br/>                    },<br/>                ],<br/>            },<br/>        ],<br/>    },<br/>};</span><span id="72e6" class="ml jz iq mh b gy mt mn l mo mp">//👇🏻 host the tasks object via the /api route<br/>app.get("/api", (req, res) =&gt; {<br/>    res.json(tasks);<br/>});</span></pre><p id="210f" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">接下来，获取<code class="fe mq mr ms mh b">TasksContainer.js</code>文件中的任务。下面的代码片段在呈现组件之前将tasks对象转换为数组。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="29db" class="ml jz iq mh b gy mm mn l mo mp">import React, { useState, useEffect } from "react";<br/>import { Link } from "react-router-dom";</span><span id="39bf" class="ml jz iq mh b gy mt mn l mo mp">const TasksContainer = () =&gt; {<br/>    const [tasks, setTasks] = useState({});</span><span id="ff09" class="ml jz iq mh b gy mt mn l mo mp">    useEffect(() =&gt; {<br/>        function fetchTasks() {<br/>            fetch("http://localhost:4000/api")<br/>                .then((res) =&gt; res.json())<br/>                .then((data) =&gt; {<br/>                    console.log(data);<br/>                    setTasks(data);<br/>                });<br/>        }<br/>        fetchTasks();<br/>    }, []);</span><span id="5c2e" class="ml jz iq mh b gy mt mn l mo mp">    return (<br/>        &lt;div className='container'&gt;<br/>            {/* <br/>            👇🏻 Returns an array of each tasks (Uncomment to view the data structure)</span><span id="a86d" class="ml jz iq mh b gy mt mn l mo mp">             {Object.entries(tasks).map((task) =&gt; console.log(task))} */}</span><span id="d7db" class="ml jz iq mh b gy mt mn l mo mp">            {Object.entries(tasks).map((task) =&gt; (<br/>                &lt;div<br/>                    className={`${task[1].title.toLowerCase()}__wrapper`}<br/>                    key={task[1].title}<br/>                &gt;<br/>                    &lt;h3&gt;{task[1].title} Tasks&lt;/h3&gt;<br/>                    &lt;div className={`${task[1].title.toLowerCase()}__container`}&gt;<br/>                        {task[1].items.map((item, index) =&gt; (<br/>                            &lt;div<br/>                                className={`${task[1].title.toLowerCase()}__items`}<br/>                                key={item.id}<br/>                            &gt;<br/>                                &lt;p&gt;{item.title}&lt;/p&gt;<br/>                                &lt;p className='comment'&gt;<br/>                                    &lt;Link to='/comments'&gt;<br/>                                        {item.comments.length &gt; 0 ? `View Comments` : "Add Comment"}<br/>                                    &lt;/Link&gt;<br/>                                &lt;/p&gt;<br/>                            &lt;/div&gt;<br/>                        ))}<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            ))}<br/>        &lt;/div&gt;<br/>    );<br/>};</span><span id="7d1c" class="ml jz iq mh b gy mt mn l mo mp">export default TasksContainer;</span></pre><p id="7398" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">将“react-beautiful-dnd”中所需的组件导入到<code class="fe mq mr ms mh b">TasksContainer.js</code>文件中。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="236f" class="ml jz iq mh b gy mm mn l mo mp">//👇🏻 At the top of the TasksContainer.js file<br/>import { DragDropContext, Droppable, Draggable } from "react-beautiful-dnd";</span></pre><p id="10c9" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如下更新<code class="fe mq mr ms mh b">TaskContainer.js</code>文件:</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="2e90" class="ml jz iq mh b gy mm mn l mo mp">return (<br/>    &lt;div className='container'&gt;<br/>        {/** --- 👇🏻 DragDropContext  ---- */}<br/>        &lt;DragDropContext onDragEnd={handleDragEnd}&gt;<br/>            {Object.entries(tasks).map((task) =&gt; (<br/>                &lt;div<br/>                    className={`${task[1].title.toLowerCase()}__wrapper`}<br/>                    key={task[1].title}<br/>                &gt;<br/>                    &lt;h3&gt;{task[1].title} Tasks&lt;/h3&gt;<br/>                    &lt;div className={`${task[1].title.toLowerCase()}__container`}&gt;<br/>                        {/** --- 👇🏻 Droppable --- */}<br/>                        &lt;Droppable droppableId={task[1].title}&gt;<br/>                            {(provided) =&gt; (<br/>                                &lt;div ref={provided.innerRef} {...provided.droppableProps}&gt;<br/>                                    {task[1].items.map((item, index) =&gt; (<br/>                                            {/** --- 👇🏻 Draggable --- */}<br/>                                        &lt;Draggable<br/>                                            key={item.id}<br/>                                            draggableId={item.id}<br/>                                            index={index}<br/>                                        &gt;<br/>                                            {(provided) =&gt; (<br/>                                                &lt;div<br/>                                                    ref={provided.innerRef}<br/>                                                    {...provided.draggableProps}<br/>                                                    {...provided.dragHandleProps}<br/>                                                    className={`${task[1].title.toLowerCase()}__items`}<br/>                                                &gt;<br/>                                                    &lt;p&gt;{item.title}&lt;/p&gt;<br/>                                                    &lt;p className='comment'&gt;<br/>                                                        &lt;Link to={`/comments/${task[1].title}/${item.id}`}&gt;<br/>                                                            {item.comments.length &gt; 0<br/>                                                                ? `View Comments`<br/>                                                                : "Add Comment"}<br/>                                                        &lt;/Link&gt;<br/>                                                    &lt;/p&gt;<br/>                                                &lt;/div&gt;<br/>                                            )}<br/>                                        &lt;/Draggable&gt;<br/>                                    ))}<br/>                                    {provided.placeholder}<br/>                                &lt;/div&gt;<br/>                            )}<br/>                        &lt;/Droppable&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            ))}<br/>        &lt;/DragDropContext&gt;<br/>    &lt;/div&gt;<br/>);</span></pre><ul class=""><li id="99c9" class="mv mw iq ky b kz ma ld mb lh mx ll my lp mz lt na nb nc nd bi translated">从上面的代码片段中:</li><li id="5003" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt na nb nc nd bi translated"><code class="fe mq mr ms mh b">DragDropContext</code>包装了整个拖放容器，<a class="ae lz" href="https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/api/droppable.md" rel="noopener ugc nofollow" target="_blank">drop able</a>代表了<a class="ae lz" href="https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/api/draggable.md" rel="noopener ugc nofollow" target="_blank"> draggable elements </a>的父元素。</li><li id="496a" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt na nb nc nd bi translated">可拖动和可删除组件接受一个可拖动和可删除的ID。它们还接受一个子元素，<code class="fe mq mr ms mh b">provided</code>——允许我们将每个元素作为可拖动和可放下的项目来引用和呈现。</li><li id="27e3" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt na nb nc nd bi translated">请随意将代码分成不同的组件，并单击<a class="ae lz" href="https://github.com/atlassian/react-beautiful-dnd" rel="noopener ugc nofollow" target="_blank">此处</a>了解更多关于React Beautiful DND的信息。</li></ul><p id="6b5d" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><code class="fe mq mr ms mh b">DragDropContext</code>接受一个道具<code class="fe mq mr ms mh b">onDragEnd</code>，它在拖动一个元素后立即触发。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="f7da" class="ml jz iq mh b gy mm mn l mo mp">//👇🏻 This function is the value of the onDragEnd prop<br/>const handleDragEnd = ({ destination, source }) =&gt; {<br/>    if (!destination) return;<br/>    if (<br/>        destination.index === source.index &amp;&amp;<br/>        destination.droppableId === source.droppableId<br/>    )<br/>        return;</span><span id="cdb2" class="ml jz iq mh b gy mt mn l mo mp">    socket.emit("taskDragged", {<br/>        source,<br/>        destination,<br/>    });<br/>};</span></pre><p id="92da" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">上面的代码片段接受被拖动项的目的地和源，在通过Socket.io向Node.js服务器发送消息之前，检查它是否被拖动到可拖放的目的地，以及源和目的地是否不同。</p><p id="5729" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在后端创建一个<code class="fe mq mr ms mh b">taskDragged</code>事件的监听器。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="24f5" class="ml jz iq mh b gy mm mn l mo mp">socketIO.on("connection", (socket) =&gt; {<br/>    console.log(`⚡: ${socket.id} user just connected!`);</span><span id="f60e" class="ml jz iq mh b gy mt mn l mo mp">    socket.on("taskDragged", (data) =&gt; {<br/>        console.log(data);<br/>    });</span><span id="631b" class="ml jz iq mh b gy mt mn l mo mp">    socket.on("disconnect", () =&gt; {<br/>        socket.disconnect();<br/>        console.log("🔥: A user disconnected");<br/>    });<br/>});</span></pre><p id="6447" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">让我们简单检查一下拖动项目后返回的数据:</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/50c33f2e8d787a25a40bfddc24db2b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*JRlyS2OpotiKMT6x.gif"/></div></figure><p id="f9f7" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">下面的代码片段显示了这个项目从Pending类别移动到了proceeding类别。指数也从0变成了1。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="5f24" class="ml jz iq mh b gy mm mn l mo mp">{<br/>  source: { index: 0, droppableId: 'pending' },<br/>  destination: { droppableId: 'ongoing', index: 1 }<br/>}</span></pre><p id="f322" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">接下来，让拖动的项目保持在它的目的地。按如下方式更新<code class="fe mq mr ms mh b">taskDragged</code>监听器:</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="8ef5" class="ml jz iq mh b gy mm mn l mo mp">socket.on("taskDragged", (data) =&gt; {<br/>    const { source, destination } = data;</span><span id="9cce" class="ml jz iq mh b gy mt mn l mo mp">    //👇🏻 Gets the item that was dragged<br/>    const itemMoved = {<br/>        ...tasks[source.droppableId].items[source.index],<br/>    };<br/>    console.log("DraggedItem&gt;&gt;&gt; ", itemMoved);</span><span id="8a09" class="ml jz iq mh b gy mt mn l mo mp">    //👇🏻 Removes the item from the its source<br/>    tasks[source.droppableId].items.splice(source.index, 1);</span><span id="555d" class="ml jz iq mh b gy mt mn l mo mp">    //👇🏻 Add the item to its destination using its destination index<br/>    tasks[destination.droppableId].items.splice(destination.index, 0, itemMoved);</span><span id="2132" class="ml jz iq mh b gy mt mn l mo mp">    //👇🏻 Sends the updated tasks object to the React app<br/>    socket.emit("tasks", tasks);</span><span id="eb01" class="ml jz iq mh b gy mt mn l mo mp">    /* 👇🏻 Print the items at the Source and Destination<br/>        console.log("Source &gt;&gt;&gt;", tasks[source.droppableId].items);<br/>        console.log("Destination &gt;&gt;&gt;", tasks[destination.droppableId].items);<br/>        */<br/>});</span></pre><p id="5dbe" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在<code class="fe mq mr ms mh b">TasksContainer</code>组件中为<code class="fe mq mr ms mh b">tasks</code>事件创建一个监听器。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="cff5" class="ml jz iq mh b gy mm mn l mo mp">useEffect(() =&gt; {<br/>    socket.on("tasks", (data) =&gt; setTasks(data));<br/>}, [socket]);</span></pre><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/c8ebed6abd002560078b3da7fb735b87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*Q0-phTFTH7_bEhaE.gif"/></div></figure><p id="09e4" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">恭喜你！🎉现在，您可以将项目从一个类别拖放到另一个类别。</p><h1 id="2336" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">如何创建新任务</h1><p id="9e91" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在本节中，我将指导您从React应用程序创建新任务。</p><p id="f938" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">更新<code class="fe mq mr ms mh b">AddTask.js</code>文件，将新任务发送到后端服务器。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="a235" class="ml jz iq mh b gy mm mn l mo mp">import React, { useState } from "react";</span><span id="a9da" class="ml jz iq mh b gy mt mn l mo mp">const AddTask = ({ socket }) =&gt; {<br/>    const [task, setTask] = useState("");</span><span id="0756" class="ml jz iq mh b gy mt mn l mo mp">    const handleAddTodo = (e) =&gt; {<br/>        e.preventDefault();<br/>        //👇🏻 sends the task to the Socket.io server<br/>        socket.emit("createTask", { task });<br/>        setTask("");<br/>    };<br/>    return (<br/>        &lt;form className='form__input' onSubmit={handleAddTodo}&gt;<br/>            &lt;label htmlFor='task'&gt;Add Todo&lt;/label&gt;<br/>            &lt;input<br/>                type='text'<br/>                name='task'<br/>                id='task'<br/>                value={task}<br/>                className='input'<br/>                required<br/>                onChange={(e) =&gt; setTask(e.target.value)}<br/>            /&gt;<br/>            &lt;button className='addTodoBtn'&gt;ADD TODO&lt;/button&gt;<br/>        &lt;/form&gt;<br/>    );<br/>};</span><span id="06aa" class="ml jz iq mh b gy mt mn l mo mp">export default AddTask;</span></pre><p id="247d" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在后端服务器上为<code class="fe mq mr ms mh b">createTask</code>事件创建一个监听器，并将该项添加到<code class="fe mq mr ms mh b">tasks</code>对象中。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="8688" class="ml jz iq mh b gy mm mn l mo mp">socketIO.on("connection", (socket) =&gt; {<br/>    console.log(`⚡: ${socket.id} user just connected!`);</span><span id="df30" class="ml jz iq mh b gy mt mn l mo mp">    socket.on("createTask", (data) =&gt; {<br/>        // 👇🏻 Constructs an object according to the data structure<br/>        const newTask = { id: fetchID(), title: data.task, comments: [] };<br/>        // 👇🏻 Adds the task to the pending category<br/>        tasks["pending"].items.push(newTask);<br/>        /* <br/>        👇🏻 Fires the tasks event for update<br/>         */<br/>        socket.emit("tasks", tasks);<br/>    });<br/>    //...other listeners<br/>});</span></pre><h1 id="ffa9" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">完成评论页面</h1><p id="6e73" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在本节中，您将学习如何添加和检索每个任务的注释。</p><p id="7bf3" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">如下更新<code class="fe mq mr ms mh b">Comments.js</code>文件:</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="b50b" class="ml jz iq mh b gy mm mn l mo mp">import React, { useEffect, useState } from "react";<br/>import socketIO from "socket.io-client";<br/>import { useParams } from "react-router-dom";</span><span id="01e5" class="ml jz iq mh b gy mt mn l mo mp">const socket = socketIO.connect("http://localhost:4000");</span><span id="4878" class="ml jz iq mh b gy mt mn l mo mp">const Comments = () =&gt; {<br/>    const { category, id } = useParams();<br/>    const [comment, setComment] = useState("");</span><span id="951e" class="ml jz iq mh b gy mt mn l mo mp">    const addComment = (e) =&gt; {<br/>        e.preventDefault();<br/>        /*<br/>        👇🏻 sends the comment, the task category, item's id and the userID.<br/>         */<br/>        socket.emit("addComment", {<br/>            comment,<br/>            category,<br/>            id,<br/>            userId: localStorage.getItem("userId"),<br/>        });<br/>        setComment("");<br/>    };</span><span id="bb0b" class="ml jz iq mh b gy mt mn l mo mp">    return (<br/>        &lt;div className='comments__container'&gt;<br/>            &lt;form className='comment__form' onSubmit={addComment}&gt;<br/>                &lt;label htmlFor='comment'&gt;Add a comment&lt;/label&gt;<br/>                &lt;textarea<br/>                    placeholder='Type your comment...'<br/>                    value={comment}<br/>                    onChange={(e) =&gt; setComment(e.target.value)}<br/>                    rows={5}<br/>                    id='comment'<br/>                    name='comment'<br/>                    required<br/>                &gt;&lt;/textarea&gt;<br/>                &lt;button className='commentBtn'&gt;ADD COMMENT&lt;/button&gt;<br/>            &lt;/form&gt;<br/>            &lt;div className='comments__section'&gt;<br/>                &lt;h2&gt;Existing Comments&lt;/h2&gt;<br/>                &lt;div&gt;&lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    );<br/>};</span><span id="1a25" class="ml jz iq mh b gy mt mn l mo mp">export default Comments;</span></pre><p id="a24a" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">回想一下，评论页面的路径是<code class="fe mq mr ms mh b">/comments/:category/:id</code>；上面的代码片段从页面的URL中检索项目的类别及其ID，然后将项目的类别、ID、用户ID和注释发送到Node.js服务器。</p><p id="17cc" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">接下来，在Node.js服务器上创建一个事件监听器，它通过ID向特定任务添加注释。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="36c3" class="ml jz iq mh b gy mm mn l mo mp">socket.on("addComment", (data) =&gt; {<br/>    const { category, userId, comment, id } = data;<br/>    //👇🏻 Gets the items in the task's category<br/>    const taskItems = tasks[category].items;<br/>    //👇🏻 Loops through the list of items to find a matching ID<br/>    for (let i = 0; i &lt; taskItems.length; i++) {<br/>        if (taskItems[i].id === id) {<br/>    //👇🏻 Then adds the comment to the list of comments under the item (task)<br/>            taskItems[i].comments.push({<br/>                name: userId,<br/>                text: comment,<br/>                id: fetchID(),<br/>            });<br/>            //👇🏻 sends a new event to the React app<br/>            socket.emit("comments", taskItems[i].comments);<br/>        }<br/>    }<br/>});</span></pre><p id="19b1" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">通过Socket.io获取注释。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="fd7f" class="ml jz iq mh b gy mm mn l mo mp">const Comments = () =&gt; {<br/>    const { category, id } = useParams();<br/>    const [comment, setComment] = useState("");<br/>    const [commentList, setCommentList] = useState([]);</span><span id="579a" class="ml jz iq mh b gy mt mn l mo mp">    //👇🏻 Listens to the comments event<br/>    useEffect(() =&gt; {<br/>        socket.on("comments", (data) =&gt; setCommentList(data));<br/>    }, []);</span><span id="0448" class="ml jz iq mh b gy mt mn l mo mp">    //...other listeners<br/>    return (<br/>        &lt;div className='comments__container'&gt;<br/>            &lt;form className='comment__form' onSubmit={addComment}&gt;<br/>                ...<br/>            &lt;/form&gt;</span><span id="ac50" class="ml jz iq mh b gy mt mn l mo mp">            {/** 👇🏻 Displays all the available comments*/}<br/>            &lt;div className='comments__section'&gt;<br/>                &lt;h2&gt;Existing Comments&lt;/h2&gt;<br/>                {commentList.map((comment) =&gt; (<br/>                    &lt;div key={comment.id}&gt;<br/>                        &lt;p&gt;<br/>                            &lt;span style={{ fontWeight: "bold" }}&gt;{comment.text} &lt;/span&gt;by{" "}<br/>                            {comment.name}<br/>                        &lt;/p&gt;<br/>                    &lt;/div&gt;<br/>                ))}<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    );<br/>};</span><span id="eb55" class="ml jz iq mh b gy mt mn l mo mp">export default Comments;</span></pre><p id="b27e" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">最后，当页面加载到浏览器时，添加这个<code class="fe mq mr ms mh b">useEffect</code>钩子来获取评论。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="304e" class="ml jz iq mh b gy mm mn l mo mp">useEffect(() =&gt; {<br/>    socket.emit("fetchComments", { category, id });<br/>}, [category, id]);</span></pre><p id="51d4" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在后端监听事件，并触发comments事件以返回与项目ID和类别相匹配的评论列表。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="e585" class="ml jz iq mh b gy mm mn l mo mp">socket.on("fetchComments", (data) =&gt; {<br/>    const { category, id } = data;<br/>    const taskItems = tasks[category].items;<br/>    for (let i = 0; i &lt; taskItems.length; i++) {<br/>        if (taskItems[i].id === id) {<br/>            socket.emit("comments", taskItems[i].comments);<br/>        }<br/>    }<br/>});</span></pre><p id="dafe" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">恭喜你！💃🏻我们已经完成了这个项目。</p><h1 id="b10b" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">额外:用Novu发送通知</h1><p id="bcbc" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果您想在用户添加评论或新任务时向应用程序添加通知，您可以在<code class="fe mq mr ms mh b">Nav.js</code>组件中使用Novu轻松实现。</p><p id="3485" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">Novu允许您添加各种通知类型，如电子邮件、短信和应用程序内通知。</p><h1 id="4c0d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">如何向React和Node.js应用程序添加Novu</h1><p id="9df2" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">要添加应用内通知，请在服务器上安装Novu Node.js SDK，并在React应用中安装通知中心。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="6fea" class="ml jz iq mh b gy mm mn l mo mp">👇🏻 Install on the client<br/>npm install @novu/notification-center</span><span id="88c5" class="ml jz iq mh b gy mt mn l mo mp">👇🏻 Install on the server<br/>npm install @novu/node</span></pre><p id="824c" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">通过运行下面的代码创建一个Novu项目。您可以使用个性化的仪表板。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="b4e1" class="ml jz iq mh b gy mm mn l mo mp">👇🏻 Install on the client<br/>npx novu init</span></pre><p id="7893" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">在创建Novu项目之前，您需要登录Github。下面的代码片段包含了运行<code class="fe mq mr ms mh b">npx novu init</code>后应该遵循的步骤</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="5977" class="ml jz iq mh b gy mm mn l mo mp">Now let's setup your account and send your first notification<br/>❓ What is your application name? Devto Clone<br/>❓ Now lets setup your environment. How would you like to proceed?<br/>   &gt; Create a free cloud account (Recommended)<br/>❓ Create your account with:<br/>   &gt; Sign-in with GitHub<br/>❓ I accept the Terms and Condidtions (https://novu.co/terms) and have read the Privacy Policy (https://novu.co/privacy)<br/>    &gt; Yes<br/>✔️ Create your account successfully.</span><span id="2541" class="ml jz iq mh b gy mt mn l mo mp">We've created a demo web page for you to see novu notifications in action.<br/>Visit: http://localhost:57807/demo to continue</span></pre><p id="da78" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">访问演示网页<code class="fe mq mr ms mh b">http://localhost:57807/demo</code>，从该页面复制您的订户ID，并点击跳过教程按钮。我们将在本教程的后面使用它。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/a08cc2de799fa22b4aefe54bc9ab4738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TQ4DGF6IokmLmDp4.png"/></div></div></figure><p id="96b5" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">从<a class="ae lz" href="https://docs.novu.co/notification-center/react-components" rel="noopener ugc nofollow" target="_blank">文档</a>中更新<code class="fe mq mr ms mh b">components/Nav.js</code>文件，以包含Novu及其应用内通知所需的元素。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="e880" class="ml jz iq mh b gy mm mn l mo mp">import React from "react";<br/>import {<br/>    NovuProvider,<br/>    PopoverNotificationCenter,<br/>    NotificationBell,<br/>} from "@novu/notification-center";<br/>import { useNavigate } from "react-router-dom";</span><span id="4093" class="ml jz iq mh b gy mt mn l mo mp">const Nav = () =&gt; {<br/>    const navigate = useNavigate();</span><span id="affe" class="ml jz iq mh b gy mt mn l mo mp">    const onNotificationClick = (notification) =&gt;<br/>        navigate(notification.cta.data.url);<br/>    return (<br/>        &lt;nav className='navbar'&gt;<br/>            &lt;h3&gt;Team's todo list&lt;/h3&gt;<br/>            &lt;div&gt;<br/>                &lt;NovuProvider<br/>                    subscriberId='&lt;SUBSCRIBER_ID&gt;'<br/>                    applicationIdentifier='&lt;APP_ID&gt;'<br/>                &gt;<br/>                    &lt;PopoverNotificationCenter<br/>                        onNotificationClick={onNotificationClick}<br/>                        colorScheme='light'<br/>                    &gt;<br/>                        {({ unseenCount }) =&gt; (<br/>                            &lt;NotificationBell unseenCount={unseenCount} /&gt;<br/>                        )}<br/>                    &lt;/PopoverNotificationCenter&gt;<br/>                &lt;/NovuProvider&gt;<br/>            &lt;/div&gt;<br/>        &lt;/nav&gt;<br/>    );<br/>};</span><span id="8eb7" class="ml jz iq mh b gy mt mn l mo mp">export default Nav;</span></pre><p id="1a77" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">上面的代码片段将Novu通知铃图标添加到Nav组件中，使我们能够查看应用程序中的所有通知。</p><p id="504a" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">💡<code class="fe mq mr ms mh b">NovuProvider</code>组件需要您之前从<code class="fe mq mr ms mh b">http://localhost:57807/demo</code>复制的用户ID，以及您在<a class="ae lz" href="https://web.novu.co/settings" rel="noopener ugc nofollow" target="_blank"> Novu管理平台</a>上API密钥下的设置部分中可用的应用ID。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/10608d4905eba579745878c0b61cd416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VBKYrMlxvuEV6uwu.jpeg"/></div></div></figure><p id="f6c7" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">接下来，让我们为应用程序创建工作流，它描述了您想要添加到应用程序中的特性。</p><p id="03a5" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">从发展侧栏中选择通知，并创建通知模板。选择新创建的模板，单击工作流编辑器，并确保工作流如下所示:</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/4aa223400c40826758f70316da40fb3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UkKNB73gpvyzS_6Z.png"/></div></div></figure><p id="4371" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">从上图来看，Novu在发送应用内通知之前触发了摘要引擎。</p><p id="2e32" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><a class="ae lz" href="https://docs.novu.co/platform/digest" rel="noopener ugc nofollow" target="_blank"> Novu Digest </a>允许我们控制在应用程序中发送通知的方式。它收集多个触发事件，并将它们作为单个消息发送。上图是每2分钟发送一次通知，在你用户多，更新频繁的情况下可以有效。</p><p id="e532" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">点击<code class="fe mq mr ms mh b">In-App</code>步骤，编辑通知模板以包含以下内容。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="34a1" class="ml jz iq mh b gy mm mn l mo mp">{{userId}} added a new task.</span></pre><p id="8b36" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">💡Novu允许你使用<a class="ae lz" href="https://docs.novu.co/platform/templates#messages" rel="noopener ugc nofollow" target="_blank">手柄模板引擎</a>向模板添加动态内容或数据。用户名变量的数据将作为请求的有效负载插入到模板中。</p><p id="a0ee" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">点击<code class="fe mq mr ms mh b">Update</code>按钮保存模板并返回代码编辑器。</p><h1 id="d6ad" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">向应用程序添加Novu</h1><p id="d583" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">从包中导入Novu，并在服务器上使用API键创建一个实例。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="86ae" class="ml jz iq mh b gy mm mn l mo mp">//server/index.js</span><span id="05ee" class="ml jz iq mh b gy mt mn l mo mp">const { Novu } = require("@novu/node");<br/>const novu = new Novu("&lt;YOUR_API_KEY&gt;");</span></pre><p id="1e8a" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">创建一个通过Novu向React应用程序发送通知的函数。</p><pre class="lv lw lx ly gt mg mh mi mj aw mk bi"><span id="d887" class="ml jz iq mh b gy mm mn l mo mp">const sendNotification = async (user) =&gt; {<br/>    try {<br/>        const result = await novu.trigger(&lt;TEMPLATE_ID&gt;, {<br/>            to: {<br/>                subscriberId: &lt;SUBSCRIBER_ID&gt;,<br/>            },<br/>            payload: {<br/>                userId: user,<br/>            },<br/>        });<br/>        console.log(result);<br/>    } catch (err) {<br/>        console.error("Error &gt;&gt;&gt;&gt;", { err });<br/>    }<br/>};</span><span id="32d6" class="ml jz iq mh b gy mt mn l mo mp">//👇🏻 The function is called after a new task is created<br/>socket.on("createTask", (data) =&gt; {<br/>        const newTask = { id: fetchID(), title: data.task, comments: [] };<br/>        tasks["pending"].items.push(newTask);<br/>        socket.emit("tasks", tasks);<br/>//👇🏻 Triggers the notification via Novu<br/>        sendNotification(data.userId);<br/>    });</span></pre><p id="2b94" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">上面的代码片段在应用程序中添加新任务时向所有用户发送通知。</p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/afe267e8a50bff3dca76ee4828c83d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_n1zo6H5np-d8g1-.png"/></div></div></figure><h1 id="d461" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="1c33" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">到目前为止，您已经学习了如何在React和Node.js应用程序中设置Socket.io，如何通过Socket.io在服务器和客户端之间进行通信，以及如何使用React Beautiful DND拖放项目。</p><p id="f0c5" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">这是一个使用Socket.io和React Beautiful DND可以构建什么的演示。您可以通过添加身份验证、向特定用户分配任务的能力以及在用户删除评论时添加通知来随意改进应用程序。</p><p id="0d6d" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">本教程的源代码可以在这里找到:<a class="ae lz" href="https://github.com/novuhq/blog/tree/main/react-beautiful-dnd-todo-list" rel="noopener ugc nofollow" target="_blank">https://github . com/novuhq/blog/tree/main/react-beautiful-dnd-todo-list</a></p><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/3d3a60897b2d22950dd024157ccbbdde.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/0*wx61ou3uEIgimmGs.jpeg"/></div></figure><p id="52b9" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">感谢您的阅读！</p><p id="9622" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated">Novu将在Hacktoberfest上送出超酷的礼物！如果你能给我们一颗星星来支持我们，我会很高兴！⭐️</p><div class="nk nl gp gr nm nn"><a href="https://github.com/novuhq/novu" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">GitHub - novuhq/novu:🚀开源通知基础设施。功能齐全的…</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">🚀开源通知基础设施。功能齐全的微服务，可发送短信、电子邮件、Slack和Push…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob jw nn"/></div></div></a></div><p id="b500" class="pw-post-body-paragraph kw kx iq ky b kz ma lb lc ld mb lf lg lh mc lj lk ll md ln lo lp me lr ls lt ij bi translated"><em class="oc">更多内容请看</em><a class="ae lz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oc">plain English . io</em></strong></a><em class="oc">。报名参加我们的</em> <a class="ae lz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="oc">免费周报</em> </strong> </a> <em class="oc">。关注我们关于</em><a class="ae lz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oc">Twitter</em></strong></a><a class="ae lz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oc">LinkedIn</em></strong></a><strong class="ky ir"><em class="oc"/></strong><a class="ae lz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oc">YouTube</em></strong></a><strong class="ky ir"><em class="oc">，以及</em></strong><em class="oc"/><a class="ae lz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oc">不和</em> </strong> </a>T55】</p></div></div>    
</body>
</html>