<html>
<head>
<title>Using .env Variables and Autocomplete with Node.js and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用。env变量和用Node.js和TypeScript自动完成</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-env-variables-and-autocomplete-with-node-js-and-typescript-46b5b4a769d8?source=collection_archive---------0-----------------------#2022-01-09">https://javascript.plainenglish.io/using-env-variables-and-autocomplete-with-node-js-and-typescript-46b5b4a769d8?source=collection_archive---------0-----------------------#2022-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6da5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用构建一个功能应用程序。带有类型脚本的env包。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/413bc752d9da76a02b055a0f87fbd72f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5tHnwFfn96kFg-Pth1qFg.jpeg"/></div></div></figure><p id="2745" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我们将使用带有TypeScript的dotenv包构建一个功能应用程序。<br/>你将学到什么:</p><ul class=""><li id="74f8" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">创建带有节点的typescript应用程序</li><li id="ee12" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">将dotenv包与node和typescript一起使用</li><li id="4bce" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">使用typescript全局键入dotenv文件类型</li></ul></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="4129" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们开始创建一个名为<strong class="kt ir"> <em class="mi"> dotenv的新文件夹——例如</em> </strong></p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="a2f3" class="mo mp iq mk b gy mq mr l ms mt">mkdir dotenv-example</span></pre><p id="4a7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来导航到该文件夹，并使用默认配置(<em class="mi"> -y </em>标志)初始化一个新的节点项目:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="a888" class="mo mp iq mk b gy mq mr l ms mt">cd dotenv-example</span><span id="9262" class="mo mp iq mk b gy mu mr l ms mt">npm init -y</span></pre><p id="5051" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这个项目，让我们创建一个简单的<strong class="kt ir"> <em class="mi"> index.ts </em> </strong>文件，我们的代码将属于这个文件。</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="50b1" class="mo mp iq mk b gy mq mr l ms mt">touch index.ts</span></pre><p id="0ac2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们需要为我们的项目安装typescript依赖项。</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="87f2" class="mo mp iq mk b gy mq mr l ms mt">npm install -D typescript<br/>npm install -D tslint</span></pre><p id="5325" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于基本用法，我们可以使用以下命令创建一个tsconfig.json文件:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="f578" class="mo mp iq mk b gy mq mr l ms mt">tsc --init</span></pre><p id="3d68" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们还将安装<em class="mi"> nodemon </em>来加速开发过程:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="4217" class="mo mp iq mk b gy mq mr l ms mt">npm i nodemon</span></pre><p id="d822" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了使用我们的索引文件和nodemon，我们需要对我们的<strong class="kt ir"> <em class="mi"> package.json </em> </strong>文件做一些小的修改。首先，我们将改变主<em class="mi">来适应我们的类型脚本文件。</em></p><p id="69cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用开发脚本和类型脚本更新package.json文件。</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="000d" class="mo mp iq mk b gy mq mr l ms mt">{<br/>  "main": "index.ts",<br/>}</span></pre><p id="900c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们将添加一个开发脚本，以开发模式运行带有nodemon的应用程序:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="5d34" class="mo mp iq mk b gy mq mr l ms mt">{<br/>  "scripts": {<br/>    "dev": "nodemon index.ts",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>}</span></pre><p id="fc53" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您的package.json现在应该看起来像这样:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="3814" class="mo mp iq mk b gy mq mr l ms mt">{<br/>  "name": "dotenv-example",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.ts",<br/>  "scripts": {<br/>    "dev": "nodemon index.ts",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC",<br/>  "devDependencies": {<br/>    "tslint": "^6.1.3",<br/>    "typescript": "^4.5.4"<br/>  },<br/>  "dependencies": {<br/>    "nodemon": "^2.0.15"<br/>  }<br/>}</span></pre><p id="dde8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们可以使用以下命令运行该应用程序:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="5ce6" class="mo mp iq mk b gy mq mr l ms mt">npm run dev</span></pre><p id="dde4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果出现以下错误提示，您需要全局安装<strong class="kt ir"> ts-node </strong>软件包。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/5cf30077ceb86211fd0f5fc3fa343739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qTeUw1cqMPs4txQtUFqapA.png"/></div></div></figure><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="c8cb" class="mo mp iq mk b gy mq mr l ms mt">npm i -g ts-node</span></pre><p id="c2b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">哇！您的应用程序现在正在运行！<br/>现在我们可以安装实际的<strong class="kt ir"> <em class="mi"> dotenv </em> </strong>包作为开发依赖项:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="84b7" class="mo mp iq mk b gy mq mr l ms mt">npm i -D dotenv</span></pre><p id="9e6e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来我们简单地创建一个<strong class="kt ir"> <em class="mi">。env </em>项目的根文件</strong>:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="83fc" class="mo mp iq mk b gy mq mr l ms mt">touch .env</span></pre><p id="d6e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您的项目现在应该具有以下结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/2daa726720278c7638687787826ca398.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*TMhYwQL8E14PEt6n71zmMw.png"/></div></figure><p id="65c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的内心。env文件，我们现在可以创建我们的变量:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="a8e4" class="mo mp iq mk b gy mq mr l ms mt">SECRET=SOME_SECRET</span></pre><p id="bd44" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个秘密可以从我们的index.ts文件中获得，如下所示:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="762d" class="mo mp iq mk b gy mq mr l ms mt">require("dotenv").config();<br/>console.log(process.env.SECRET);</span></pre><p id="2a16" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您查看一下控制台，应该会看到以下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/d74fe4a678e717436d9a32ea45308383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eXLBvRxSppcOPZfeMo995g.png"/></div></div></figure><p id="9575" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">恭喜你。您已经成功地在项目中使用了您的秘密变量！<br/>但是您可能已经注意到，您现在已经在键入process.env. <br/>之后自动完成了，出于这个特定的原因，我们将创建一个名为<strong class="kt ir"><em class="mi">environment . d . ts</em></strong>的新文件来键入我们的。env变量，从而为我们的process.env启用自动完成功能。</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="cc4d" class="mo mp iq mk b gy mq mr l ms mt">npm i @types/node</span></pre><p id="4935" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们简单地在项目的根目录下创建我们的环境文件，我们将在那里输入。全局环境变量:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="015d" class="mo mp iq mk b gy mq mr l ms mt">touch environment.d.ts</span></pre><p id="e8ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个新文件中，我们可以输入。包络以下内容:</p><pre class="kg kh ki kj gt mj mk ml mm aw mn bi"><span id="c144" class="mo mp iq mk b gy mq mr l ms mt">declare global {<br/>  namespace NodeJS {<br/>    interface ProcessEnv {<br/>      SECRET: string;<br/>    }<br/>  }<br/>}</span><span id="2344" class="mo mp iq mk b gy mu mr l ms mt">export {};</span></pre><p id="d8a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">完成前面的步骤后，您现在有了一个功能齐全的。带有自动完成功能的env实现:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/634620072e25b2f7aadc08d1dd98c981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qg8UyXbFyHhWFeaiIlIQQA.png"/></div></div></figure><p id="3d74" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在你已经能够正确地使用typescript的<strong class="kt ir"> <em class="mi"> dotenv </em> </strong>包了。非常感谢您阅读这篇文章，并确保检查我的其他文章。</p><p id="891a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mi">更多内容看</em> <a class="ae mz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mi">说白了就是</em> </strong> </a> <em class="mi">。报名参加我们的</em> <a class="ae mz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mi">免费周报</em> </strong> </a> <em class="mi">。在我们的</em> <a class="ae mz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mi">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="mi">。</em></p></div></div>    
</body>
</html>