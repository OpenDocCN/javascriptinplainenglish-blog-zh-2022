<html>
<head>
<title>19 Practical ES6 Snippets to Solve Common JavaScript Problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解决常见JavaScript问题的19个实用ES6片段</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/19-practical-es6-snippets-to-solve-common-javascript-problems-3ffc4afa9255?source=collection_archive---------0-----------------------#2022-09-16">https://javascript.plainenglish.io/19-practical-es6-snippets-to-solve-common-javascript-problems-3ffc4afa9255?source=collection_archive---------0-----------------------#2022-09-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b815" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在处理URL、DOM、事件、日期、用户偏好等时，有用的代码片段可能会对您有所帮助。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/845f7406fe76b15e38852952d61268b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yUm0kEtJJ74CrfEe.jpg"/></div></div></figure><p id="6e3f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的开发人员工作流程中，我们经常会遇到可能只需要几行代码就能解决的挑战性问题。在本文中，我试图编译一些有用的代码片段，在处理URL、DOM、事件、日期、用户偏好等时可能会有所帮助。</p><p id="fcdc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有的片段都是从<a class="ae ln" href="https://www.30secondsofcode.org/js/p/1" rel="noopener ugc nofollow" target="_blank"> 30秒的代码</a>中精选出来的。这是一个很棒的资源，我强烈推荐去看看更多的东西。</p><p id="69c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">管理这些的主要标准是实用性。希望你能找到一些有价值的东西，可以应用到你未来的代码库中。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h2 id="dadf" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">1.如何获取基础网址？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="b174" class="lv lw iq mp b gy mt mu l mv mw">const getBaseURL = url =&gt; url.replace(/[?#].*$/, '');<br/><br/>getBaseURL('http://url.com/page?name=Adam&amp;surname=Smith');<br/>// 'http://url.com/page'</span></pre><h2 id="c71e" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">2.如何检查网址是否绝对？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="1824" class="lv lw iq mp b gy mt mu l mv mw">const isAbsoluteURL = str =&gt; /^[a-z][a-z0-9+.-]*:/.test(str);<br/><br/>isAbsoluteURL('https://google.com'); // true<br/>isAbsoluteURL('ftp://www.myserver.net'); // true<br/>isAbsoluteURL('/foo/bar'); // false</span></pre><h2 id="9652" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">3.如何获取URL参数作为对象？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="533f" class="lv lw iq mp b gy mt mu l mv mw">const getURLParameters = url =&gt;<br/>  (url.match(/([^?=&amp;]+)(=([^&amp;]*))/g) || []).reduce(<br/>    (a, v) =&gt; (<br/>      (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a<br/>    ),<br/>    {}<br/>  );<br/><br/>getURLParameters('google.com'); // {}<br/>getURLParameters('http://url.com/page?name=Adam&amp;surname=Smith');<br/>// {name: 'Adam', surname: 'Smith'}</span></pre><h2 id="4813" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">4.如何检查一个元素是否包含另一个元素？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="cba6" class="lv lw iq mp b gy mt mu l mv mw">const elementContains = (parent, child) =&gt;<br/>  parent !== child &amp;&amp; parent.contains(child);<br/><br/>elementContains(<br/>  document.querySelector('head'),<br/>  document.querySelector('title')<br/>);<br/>// true<br/>elementContains(document.querySelector('body'), document.querySelector('body'));<br/>// false</span></pre><h2 id="d4ff" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">5.如何获取元素的所有祖先？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="3d0c" class="lv lw iq mp b gy mt mu l mv mw">const getAncestors = el =&gt; {<br/>  let ancestors = [];<br/>  while (el) {<br/>    ancestors.unshift(el);<br/>    el = el.parentNode;<br/>  }<br/>  return ancestors;<br/>};<br/><br/>getAncestors(document.querySelector('nav'));<br/>// [document, html, body, header, nav]</span></pre><h2 id="051b" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">6.如何平滑滚动元素进入视图？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="aa03" class="lv lw iq mp b gy mt mu l mv mw">const smoothScroll = element =&gt;<br/>  document.querySelector(element).scrollIntoView({<br/>    behavior: 'smooth'<br/>  });<br/><br/>smoothScroll('#fooBar'); // scrolls smoothly to the element with the id fooBar<br/>smoothScroll('.fooBar');<br/>// scrolls smoothly to the first element with a class of fooBar</span></pre><h2 id="b485" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">7.如何处理元素外的点击？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="434a" class="lv lw iq mp b gy mt mu l mv mw">const onClickOutside = (element, callback) =&gt; {<br/>  document.addEventListener('click', e =&gt; {<br/>    if (!element.contains(e.target)) callback();<br/>  });<br/>};<br/><br/>onClickOutside('#my-element', () =&gt; console.log('Hello'));<br/>// Will log 'Hello' whenever the user clicks outside of #my-element</span></pre><h2 id="57ff" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">8.如何生成UUID？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="2f8f" class="lv lw iq mp b gy mt mu l mv mw">const UUIDGeneratorBrowser = () =&gt;<br/>  ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =&gt;<br/>    (<br/>      c ^<br/>      (crypto.getRandomValues(new Uint8Array(1))[0] &amp; (15 &gt;&gt; (c / 4)))<br/>    ).toString(16)<br/>  );<br/><br/>UUIDGeneratorBrowser(); // '7982fcfe-5721-4632-bede-6000885be57d'</span></pre><h2 id="fc1a" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">9.如何获取选中的文本？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4c24" class="lv lw iq mp b gy mt mu l mv mw">const getSelectedText = () =&gt; window.getSelection().toString();<br/><br/>getSelectedText(); // 'Lorem ipsum'</span></pre><h2 id="7ef0" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">10.如何将文本复制到剪贴板？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="cec1" class="lv lw iq mp b gy mt mu l mv mw">const copyToClipboard = str =&gt; {<br/>  if (navigator &amp;&amp; navigator.clipboard &amp;&amp; navigator.clipboard.writeText)<br/>    return navigator.clipboard.writeText(str);<br/>  return Promise.reject('The Clipboard API is not available.');<br/>};</span></pre><h2 id="2374" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">11.如何给HTML元素添加样式？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="d76e" class="lv lw iq mp b gy mt mu l mv mw">const addStyles = (el, styles) =&gt; Object.assign(el.style, styles);<br/><br/>addStyles(document.getElementById('my-element'), {<br/>  background: 'red',<br/>  color: '#ffff00',<br/>  fontSize: '3rem'<br/>});</span></pre><h2 id="9649" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">12.如何切换全屏模式？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="874a" class="lv lw iq mp b gy mt mu l mv mw">const fullscreen = (mode = true, el = 'body') =&gt;<br/>  mode<br/>    ? document.querySelector(el).requestFullscreen()<br/>    : document.exitFullscreen();<br/><br/>fullscreen(); // Opens `body` in fullscreen mode<br/>fullscreen(false); // Exits fullscreen mode</span></pre><h2 id="6f9b" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">13.如何检测Caps Lock是否打开？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="5c51" class="lv lw iq mp b gy mt mu l mv mw">&lt;form&gt;<br/>  &lt;label for="username"&gt;Username:&lt;/label&gt;<br/>  &lt;input id="username" name="username"&gt;<br/><br/>  &lt;label for="password"&gt;Password:&lt;/label&gt;<br/>  &lt;input id="password" name="password" type="password"&gt;<br/>  &lt;span id="password-message" style="display: none"&gt;Caps Lock is on&lt;/span&gt;<br/>&lt;/form&gt;</span><span id="276d" class="lv lw iq mp b gy mx mu l mv mw">const el = document.getElementById('password');<br/>const msg = document.getElementById('password-message');<br/><br/>el.addEventListener('keyup', e =&gt; {<br/>  msg.style = e.getModifierState('CapsLock')<br/>    ? 'display: block'<br/>    : 'display: none';<br/>});</span></pre><h2 id="8555" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">14.如何检查日期是否有效？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="3290" class="lv lw iq mp b gy mt mu l mv mw">const isDateValid = (...val) =&gt; !Number.isNaN(new Date(...val).valueOf());<br/><br/>isDateValid('December 17, 1995 03:24:00'); // true<br/>isDateValid('1995-12-17T03:24:00'); // true<br/>isDateValid('1995-12-17 T03:24:00'); // false<br/>isDateValid('Duck'); // false<br/>isDateValid(1995, 11, 17); // true<br/>isDateValid(1995, 11, 17, 'Duck'); // false<br/>isDateValid({}); // false</span></pre><h2 id="f389" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">15.如何从日期获取冒号时间？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="59ad" class="lv lw iq mp b gy mt mu l mv mw">const getColonTimeFromDate = date =&gt; date.toTimeString().slice(0, 8);<br/><br/>getColonTimeFromDate(new Date()); // '08:38:00'</span></pre><h2 id="8232" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">16.如何从Date生成UNIX时间戳？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="5e83" class="lv lw iq mp b gy mt mu l mv mw">const getTimestamp = (date = new Date()) =&gt; Math.floor(date.getTime() / 1000);<br/><br/>getTimestamp(); // 1602162242</span></pre><h2 id="5b7d" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">17.如何查看当前用户的首选语言？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="369e" class="lv lw iq mp b gy mt mu l mv mw">const detectLanguage = (defaultLang = 'en-US') =&gt;<br/>  navigator.language ||<br/>  (Array.isArray(navigator.languages) &amp;&amp; navigator.languages[0]) ||<br/>  defaultLang;<br/><br/>detectLanguage(); // 'nl-NL'</span></pre><h2 id="26e3" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">18.如何查看用户喜欢的配色方案？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="54f3" class="lv lw iq mp b gy mt mu l mv mw">const prefersDarkColorScheme = () =&gt;<br/>  window &amp;&amp;<br/>  window.matchMedia &amp;&amp;<br/>  window.matchMedia('(prefers-color-scheme: dark)').matches;<br/><br/>prefersDarkColorScheme(); // true</span></pre><h2 id="8f76" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">19.如何检查设备是否支持触摸事件？</h2><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="eb32" class="lv lw iq mp b gy mt mu l mv mw">const supportsTouchEvents = () =&gt;<br/>  window &amp;&amp; 'ontouchstart' in window;<br/><br/>supportsTouchEvents(); // true</span></pre></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="f7b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">写作一直是我的激情所在，帮助和激励他人给我带来了快乐。如果您有任何问题，请随时联系我们！</p><p id="2f5f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<a class="ae ln" href="https://twitter.com/madzadev" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae ln" href="https://www.linkedin.com/in/madzadev/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae ln" href="https://github.com/madzadev" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上给我接通！</p><p id="655f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">访问我的<a class="ae ln" href="https://madza.dev/blog" rel="noopener ugc nofollow" target="_blank">博客</a>获取更多类似的文章。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="b56e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="my">更多内容请看</em><a class="ae ln" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">plain English . io</em></strong></a><em class="my">。报名参加我们的</em> <a class="ae ln" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">免费周报</em> </strong> </a> <em class="my">。关注我们关于</em><a class="ae ln" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">Twitter</em></strong></a><a class="ae ln" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">LinkedIn</em></strong></a><em class="my"/><a class="ae ln" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">YouTube</em></strong></a><em class="my"/><a class="ae ln" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">不和</em> </strong> </a> <em class="my">。对增长黑客感兴趣？检查</em> <a class="ae ln" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">电路</em> </strong> </a> <em class="my">。</em></p></div></div>    
</body>
</html>