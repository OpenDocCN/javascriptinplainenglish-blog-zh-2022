<html>
<head>
<title>State of the Web: WebAssembly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络现状:网络大会</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/state-of-the-web-webassembly-f13863a22862?source=collection_archive---------3-----------------------#2022-01-01">https://javascript.plainenglish.io/state-of-the-web-webassembly-f13863a22862?source=collection_archive---------3-----------------------#2022-01-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/0012db075408bba38796270c903f41a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IDg2Qzs2P1nvXAjjwbnJpA.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">WebAssembly Logo</figcaption></figure><div class=""/><div class=""><h2 id="4618" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">什么是WebAssembly，为什么它很重要，它目前在web上是如何使用的？</h2></div><p id="1f4c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">WebAssembly  (WASM)是网络上一种新的类似汇编的语言，旨在允许开发者用他们选择的语言编写快速、可移植的代码。它目前可用于<a class="ae lq" href="https://caniuse.com/wasm" rel="noopener ugc nofollow" target="_blank">所有现代浏览器</a>和Node.js，以及一些WebAssembly专用运行时。</p><h1 id="c154" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">WebAssembly背景</h1><p id="568d" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">一个浏览器联盟在2015年创建了WebAssembly，作为asm.js和谷歌原生客户端的继任者。后来在2017年在所有现代浏览器上发布，2018年发布了正式的spec。WebAssembly是一种二进制格式，允许在不使用JavaScript的情况下跨平台执行沙盒代码。它还被设计得很紧凑，解析和执行起来比JavaScript快得多。它可以在web和服务器上使用，以允许安全和可移植的沙盒代码执行。</p><h1 id="13e3" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">为什么WebAssembly如此重要</h1><h2 id="765d" class="mo ls jf bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated">安全性</h2><figure class="nb nc nd ne gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/8ba8d57c5b0456ead13e78a949c77583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NkA9kX5CWLOV1POK"/></div></div></figure><p id="745d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">WebAssembly是一种沙盒语言，正因为如此，它是安全的。像<a class="ae lq" href="https://wasmer.io" rel="noopener ugc nofollow" target="_blank"> Wasmer </a>这样的工具允许用有限的系统调用和计量CPU周期在web之外运行WASM。</p><p id="b64d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">WebAssembly的安全性使得类似<a class="ae lq" href="https://workers.cloudflare.com" rel="noopener ugc nofollow" target="_blank"> Cloudflare Workers </a>、<a class="ae lq" href="https://www.fastly.com/products/edge-compute/serverless" rel="noopener ugc nofollow" target="_blank">Fastly【email protected】</a>、<a class="ae lq" href="https://wasmedge.org/" rel="noopener ugc nofollow" target="_blank"> WasmEdge </a>等轻量级无服务器功能环境越来越多地采用WebAssembly。由于编译器的简单性，WebAssembly甚至可以比web上的JavaScript更安全。</p><p id="7307" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">不像JavaScript，它有一个复杂的三层JIT编译器/运行时，<a class="ae lq" href="https://microsoftedge.github.io/edgevr/posts/Super-Duper-Secure-Mode/" rel="noopener ugc nofollow" target="_blank">可能非常容易出错</a>。相比之下，因为WebAssembly是强类型的，并且更接近于机器码，所以WebAssembly的编译器更简单，因此也更安全。由于其沙箱功能，Firefox甚至使用WebAssembly进行字体整形。</p><h2 id="2540" class="mo ls jf bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated">速度</h2><figure class="nb nc nd ne gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/a15b2a8222af296510688d75fb1a0d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HYFpjOGSc4vS9gnT"/></div></div></figure><p id="e7f2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">WebAssembly的解析和执行速度都非常快。尽管它对web世界来说相对较新，但它仍然比JavaScript快得多。</p><p id="83ed" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">就解析速度而言，WebAssembly已经比JavaScript快得多。Firefox的WebAsssembly VM运行WebAssembly的速度比从网络接收的速度更快。这消除了JavaScript的一个显著的速度问题。</p><p id="9612" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">使用WebAssembly，<a class="ae lq" href="https://medium.com/figma-design/webassembly-cut-figmas-load-time-by-3x-76f3f2395164" rel="noopener"> Figma将他们的加载时间减少了3倍</a>。至于执行速度，WebAssembly在发挥其全部潜力之前仍有工作要做，但早期结果是有希望的。目前，WebAssembly有时比JavaScript做得更好，但有时做得更差。</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/cb0782af9ddf910ded22e0ebee7d5205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*swgD1ESKkTiLBW_y"/></div></figure><p id="fc4f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">WebAssembly的另一个性能问题是从WebAssembly调用web APIs的高开销。<a class="ae lq" href="https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-%f0%9f%8e%89/" rel="noopener ugc nofollow" target="_blank"> Mozilla已经优化了这个</a>，但是Chrome和Node.js还是有这个问题。然而，WebAssembly的性能正在提高，最终，甚至有可能获得WebAssembly的本机性能。</p><h2 id="7e8d" class="mo ls jf bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated">灵活性</h2><p id="e224" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">WebAssembly专为多语言支持而设计。它有一个文本格式(WAT)，但是很难使用。</p><p id="b44c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">目前，您可以将许多语言编译为WebAssembly，如TypeScript的一种形式<a class="ae lq" href="https://www.assemblyscript.org/" rel="noopener ugc nofollow" target="_blank">，Go，Rust和c。这使得您不再局限于JavaScript，而是可以出于生态系统、语法或平台间代码共享等原因使用另一种语言。</a></p><h1 id="28a8" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">WebAssembly的当前状态</h1><p id="fb1b" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">广泛采用WebAssembly仍然很遥远，但它正在取得进展。现在我们将看看WebAssembly在web浏览器、服务器上的状态，以及最好使用的语言。</p><h2 id="3b54" class="mo ls jf bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated">网络支持</h2><p id="c813" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">web上的WebAssembly还处于早期阶段，尽管你已经可以不用接触JavaScript就能构建完整的网站。浏览器对WebAssembly的支持相当不错，所有现代浏览器都支持它。</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/9c286aba0e3566bca7e9dfd3555cea79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KvYxdENtk33LOBZ_"/></div></div></figure><p id="ea01" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">如果你试图使用WebAssembly创建一个完整的web应用程序，目前最简单的方法是使用Rust和一个框架，比如带有主干的框架。然而，由于生态系统较小，WebAssembly目前最适合应用程序中注重性能的小部分，而不是整个应用程序。</p><h2 id="2649" class="mo ls jf bd lt mp mq dn lx mr ms dp mb ld mt mu md lh mv mw mf ll mx my mh mz bi translated">服务器支持</h2><p id="e371" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">服务器上的WebAssembly正在快速增长。WebAssembly提供了超轻隔离，这使得它非常适合无服务器功能，因为无服务器功能需要快速启动并且占用空间小。为了举例说明这是如何工作的，让我们看看最流行的无服务器功能服务之一<a class="ae lq" href="https://workers.cloudflare.com/" rel="noopener ugc nofollow" target="_blank"> Cloudflare Workers </a>是如何工作的。</p><p id="7276" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">Cloudflare Workers在单独的进程中使用V8隔离而不是容器来执行无服务器功能。V8隔离是轻量级V8执行环境，启动速度比传统沙盒环境快得多。</p><figure class="nb nc nd ne gt is gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/60b1b247d1e87bd69ce4c69826b2ca48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/0*WI-sw3WlCDCepBuD"/></div></figure><p id="9f2f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">但是，因为隔离只针对V8引擎，所以只支持JavaScript和WebAssembly。因为不是每个人都想使用JavaScript，所以WebAssembly是Cloudflare工作人员的热门选择。事实上，Cloudflare Workers非常支持将Rust与WebAssembly一起使用，并有官方维护的Rust API。</p><p id="60d3" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">如您所见，WebAssembly是服务器的绝佳选择，因为它可以在轻量级、安全的环境中执行。如果你想看看包括Cloudflare Workers在内的基准测试来展示隔离的速度提升，<a class="ae lq" href="https://blog.cloudflare.com/serverless-performance-comparison-workers-lambda/" rel="noopener ugc nofollow" target="_blank">这里</a>是一些。</p><h1 id="1a7e" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">语言支持</h1><p id="c421" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">目前，如果你想使用WebAssembly，最好的语言是<a class="ae lq" href="https://www.rust-lang.org/" rel="noopener ugc nofollow" target="_blank"> Rust </a>或<a class="ae lq" href="https://www.assemblyscript.org/" rel="noopener ugc nofollow" target="_blank"> AssemblyScript </a>。Rust拥有最广泛的WebAssembly生态系统，有用于绑定到JavaScript的<a class="ae lq" href="https://rustwasm.github.io/docs/wasm-bindgen/" rel="noopener ugc nofollow" target="_blank"> WASM-Bindgen </a>、用于生成WASM包的<a class="ae lq" href="https://github.com/rustwasm/wasm-pack" rel="noopener ugc nofollow" target="_blank"> WASM-Pack </a>等工具。</p><p id="a1e8" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">然而，即使AssemblyScript的生态系统小得多，它也是小型WebAssembly模块的一个好选择。AssemblyScript是具有更高级类型的TypeScript，因此如果您以前有JavaScript经验，很容易学习。</p><p id="8b21" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">此外，AssemblyScript通常几乎与Rust或C WebAssembly一样快，而交付的二进制文件要小得多。</p><h1 id="f315" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">结论</h1><p id="63b4" class="pw-post-body-paragraph ku kv jf kw b kx mj kg kz la mk kj lc ld ml lf lg lh mm lj lk ll mn ln lo lp ij bi translated">WebAssembly对于web世界来说仍然是一个新事物。然而，它已经在轻量级无服务器功能执行中找到了一席之地。我希望你能从中学到一些东西,《网络现状》的第一篇文章到此结束。感谢阅读！</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="b20b" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><em class="np">最初发表于2022年1月1日</em><a class="ae lq" href="https://byteofdev.com/posts/webassembly/" rel="noopener ugc nofollow" target="_blank"><em class="np">【https://byteofdev.com】</em></a><em class="np">。</em></p><p id="25dd" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><em class="np">更多内容看</em> <a class="ae lq" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw jg"> <em class="np">说白了。报名参加我们的</em> <a class="ae lq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw jg"> <em class="np">免费周报</em> </strong> </a> <em class="np">。在我们的</em> <a class="ae lq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kw jg"> <em class="np">社区不和谐</em> </strong> </a> <em class="np">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>