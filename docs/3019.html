<html>
<head>
<title>How to implement Caching efficiently in NestJS using Redis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Redis在NestJS中高效实现缓存</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/caching-efficiently-in-nestjs-using-redis-b3fa0c70384a?source=collection_archive---------4-----------------------#2022-07-22">https://javascript.plainenglish.io/caching-efficiently-in-nestjs-using-redis-b3fa0c70384a?source=collection_archive---------4-----------------------#2022-07-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b76d4c6ae134edf43d55a21aeadac4f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mNvSpFWlU-7gJ9FUf8BQsA.jpeg"/></div></div></figure><p id="4abf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">特别是，缓存有助于提高应用程序的性能，极大地增强其有效性。</p><p id="c5ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将看看如何使用Redis为NestJS项目提供缓存功能。我们将讨论Redis，什么是缓存，以及实现过程。</p><h1 id="b833" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">什么是缓存？</h1><p id="1297" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">缓存是计算中重复数据的临时、经常被访问的存储库。为了减少延迟，数据存储在一个容易找到的地方。</p><h1 id="948c" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">和Redis…</h1><p id="0e0c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">作为一个数据库缓存，Redis是一个开源的内存数据结构存储。它支持各种数据结构，包括列表、集合、带有范围查询的排序集合、散列等等。</p><p id="9702" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过降低生成内容所需的工作量，缓存可以显著提高应用程序的速度和可伸缩性。在运行我们的服务器应用程序的不同服务器之间分发Redis缓存很简单。</p><p id="344a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">介绍到此结束…让我们深入研究使用Redis的NestJS缓存吧！:)</p></div><div class="ab cl lw lx hr ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ig ih ii ij ik"><h2 id="df41" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">设置NestJS应用程序</h2><p id="06a7" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">让我们创建一个简单的NestJs应用程序。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="0a53" class="md ku in mu b gy my mz l na nb">$ npm i -g @nestjs/cli<br/>$ nest new nest-cache</span></pre><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/935d7d9e5fd07df30ebf761d9ba7dc86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AkjgWGc8w43RJnM4Tg0Dww.png"/></div></div></figure><p id="5bb9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们的应用程序已经创建好了，让我们添加一个Todo模块！</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="f44c" class="md ku in mu b gy my mz l na nb">$ nest g resource todo</span></pre><p id="8f20" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此时，将添加一个todo控制器、服务、dto和实体。但是谁在乎呢？那不是本文的重点！😊</p><h2 id="bd62" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">这就是你一直在等待的，缓存！</h2><p id="6b73" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在本文中，我们将使用缓存管理器。向bryandonovan喊出这个令人敬畏的包！</p><blockquote class="nd ne nf"><p id="b86a" class="jv jw ng jx b jy jz ka kb kc kd ke kf nh kh ki kj ni kl km kn nj kp kq kr ks ig bi translated"><em class="in"> Cache-Manager是nodejs的一个缓存模块，允许在缓存、分层缓存和一致的接口中轻松包装功能。— Bryandonovan </em></p></blockquote><p id="1af4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要安装缓存管理器，请运行:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="88bc" class="md ku in mu b gy my mz l na nb">$ npm install cache-manager cache-manager-redis-store</span></pre><p id="dbe5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为奖励，我们将添加ConfigModule来从文件中提取<code class="fe nk nl nm mu b">.env</code>常量。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="fbc2" class="md ku in mu b gy my mz l na nb">$ npm install @nestjs/config</span></pre><p id="b69f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将添加一个新模块<code class="fe nk nl nm mu b">redis-cache</code>，它将处理所有redis-abstracted操作(这不是强制性的，只是偏好)。</p><p id="4757" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用<code class="fe nk nl nm mu b">redis-cache.service.ts</code>和<code class="fe nk nl nm mu b">redis-cache.module.ts</code>在源文件夹中新建一个文件夹<code class="fe nk nl nm mu b">redis-cache</code>。</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3bab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此时，您应该有一个类似如下的文件结构:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/600576f3acc80958b42f3e4a02f142d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tmHToxZoRg-rRfKOxBoQ4Q.png"/></div></div></figure><p id="75ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将下面这段代码添加到您的<code class="fe nk nl nm mu b">todo.module.ts</code>中，并将<code class="fe nk nl nm mu b">Redis-cache</code>模块注入<code class="fe nk nl nm mu b">todo.service.ts</code></p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl lw lx hr ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ig ih ii ij ik"><p id="0345" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">差不多就是这样，是的，你做到了，我们最喜欢的缓存大师:)！</p><p id="2223" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">启动应用程序。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="872f" class="md ku in mu b gy my mz l na nb">$ npm start</span></pre><p id="e1ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完整的源代码可在<a class="ae nq" href="https://github.com/airscholar/nest-cache" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="6c0f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读🙏🏻。</p><p id="ff31" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想了解NestJS、DynamoDB和Serverless，<a class="ae nq" href="https://medium.com/@airscholar/nestjs-application-with-dynamodb-and-serverless-framework-on-aws-a-step-by-step-guide-c4a3413f731d" rel="noopener">查看这篇文章</a>。</p><p id="bd01" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ng">更多内容请看</em><a class="ae nq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ng">plain English . io</em></strong></a><em class="ng">。</em></p><p id="8303" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ng">报名参加我们的</em> <a class="ae nq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ng">免费每周简讯</em> </strong> </a> <em class="ng">。关注我们关于</em> <a class="ae nq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ng">推特</em></strong></a><a class="ae nq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ng">LinkedIn</em></strong></a><em class="ng"/><a class="ae nq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ng">YouTube</em></strong></a><em class="ng"/><a class="ae nq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ng">不和</em> </strong> </a> <strong class="jx io"> <em class="ng">。</em>T51】</strong></p><p id="b56b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="ng">对缩放您的软件启动感兴趣</em> </strong> <em class="ng">？检查</em> <a class="ae nq" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ng">电路</em> </strong> </a> <em class="ng">。</em></p></div></div>    
</body>
</html>