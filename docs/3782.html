<html>
<head>
<title>Design Patterns: Abstract Factory Pattern in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设计模式:TypeScript中的抽象工厂模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/design-patterns-abstract-factory-pattern-in-typescript-84cd7b002964?source=collection_archive---------4-----------------------#2022-09-26">https://javascript.plainenglish.io/design-patterns-abstract-factory-pattern-in-typescript-84cd7b002964?source=collection_archive---------4-----------------------#2022-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="918b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">掌握抽象工厂模式，轻松处理对象的创建。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e6eadd5553f8bcdfd59b71f91970ea10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ATCH4DDuYFrigH2v"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@hero92?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">amin khorsand</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ff0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">欢迎来到TypeScript 系列的<strong class="ky ir">设计模式，该系列介绍了一些使用TypeScript进行web开发时有用的设计模式。</strong></p><p id="be89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以前的文章如下:</p><ul class=""><li id="dccc" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-strategy-pattern-in-typescript-54eda9b40f09">打字稿中的策略模式</a></li><li id="e4a5" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-chain-of-responsibility-pattern-in-typescript-dba6bdffe456">打字稿中的责任链模式</a></li><li id="2644" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-observer-pattern-in-typescript-f6589f1ce4fc">打字稿中的观察者模式</a></li><li id="a1b2" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-template-method-pattern-in-typescript-ce0c8b158985">TypeScript中的模板方法模式</a></li><li id="654d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-adapter-pattern-in-typescript-4b7ad3c1c234">类型脚本中的适配器模式</a></li><li id="da68" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-factory-method-pattern-in-typescript-c4c3047a6289">TypeScript中的工厂方法模式</a></li><li id="1fc3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-abstract-factory-pattern-in-typescript-84cd7b002964">在TypeScript中抽象工厂模式</a></li></ul><p id="2041" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">设计模式对于web开发人员来说非常重要，通过掌握它们我们可以写出更好的代码。在本文中，我将使用<strong class="ky ir">类型脚本</strong>来介绍<strong class="ky ir">抽象工厂模式。</strong></p><p id="f3d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">抽象工厂模式提供了一个接口，用于创建一系列相关或相互依赖的对象，而无需指定它们的具体类。</p><p id="043e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-factory-method-pattern-in-typescript-c4c3047a6289"> <strong class="ky ir">工厂方法模式</strong> </a>中，特定的工厂负责生产特定的产品，每个特定的工厂对应一个特定的产品，工厂方法也是唯一的。一般来说，一个特定的工厂只有一个工厂方法或者一组重载的工厂方法。但有时我们需要一个能供应多种产品的工厂，而不是单一产品。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/6ba7139da1490d5297f34edd3439b595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ENrOIQkyKLLZ1JsqWJ63iQ.png"/></div></div></figure><p id="3d2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上图中，我模拟了用户的购车流程。Bytefer向SuperX工厂订购了SuperX01，工厂按照SuperX01对应的型号进行生产，生产完成后交付给bytefer。Chris1993向同一个SuperX工厂订购SuperX02，工厂按照SuperX02对应的型号生产，生产完成后交付chris1993。</p><p id="3624" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何使用<strong class="ky ir">抽象工厂</strong>来描述车辆工厂生产给定型号汽车的过程。</p><p id="d6d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了更好地理解下面的代码，我们先来看看相应的UML图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mh"><img src="../Images/44a3bc24edad743eb321d29e70edb90a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*28OvOWvtzCWVYNuF9qsBkg.png"/></div></div></figure><p id="81b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">抽象工厂模式包括以下角色:</p><ul class=""><li id="332c" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">产品(车辆)</strong>:抽象产品</li><li id="153c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">混凝土产品(SuperX01) </strong>:混凝土产品</li><li id="eff6" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">工厂(SuperXFactory) </strong>:抽象工厂</li><li id="800e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">混凝土工厂(ConcreteSuperXFactory): </strong>混凝土工厂</li></ul><p id="a5eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们定义一个抽象类<code class="fe mi mj mk ml b">Vehicle</code>及其两个子类<code class="fe mi mj mk ml b">SuperX01</code>和<code class="fe mi mj mk ml b">SuperX02</code>来表示不同类型的车辆。</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="d0c9" class="mq mr iq ml b gy ms mt l mu mv">abstract class Vehicle {<br/>  abstract run(): void;<br/>}</span><span id="afb9" class="mq mr iq ml b gy mw mt l mu mv">class SuperX01 extends Vehicle {<br/>  run(): void {<br/>    console.log("SuperX01 start");<br/>  }<br/>}</span><span id="dc3a" class="mq mr iq ml b gy mw mt l mu mv">class SuperX02 extends Vehicle {<br/>  run(): void {<br/>    console.log("SuperX02 start");<br/>  }<br/>}</span></pre><p id="7126" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们定义<code class="fe mi mj mk ml b">SuperXFactory</code>类来表示车辆工厂。这个抽象工厂包含用于生产SuperX01和SuperX02模型车辆的抽象方法。</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="90be" class="mq mr iq ml b gy ms mt l mu mv">abstract class SuperXFactory {<br/>  abstract produceSuperX01(): SuperX01;<br/>  abstract produceSuperX02(): SuperX02;<br/>}</span></pre><p id="a466" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基于<code class="fe mi mj mk ml b">SuperXFactory</code>抽象类，我们定义<code class="fe mi mj mk ml b">ConcreteSuperXFactory</code>工厂类用于生产<strong class="ky ir"> SuperX01 </strong>和<strong class="ky ir"> SuperX02 </strong>车型:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="7076" class="mq mr iq ml b gy ms mt l mu mv">class ConcreteSuperXFactory extends SuperXFactory {<br/>  produceSuperX01(): SuperX01 {<br/>    return new SuperX01();<br/>  }</span><span id="d6d6" class="mq mr iq ml b gy mw mt l mu mv">  produceSuperX02(): SuperX02 {<br/>    return new SuperX02();<br/>  }<br/>}</span></pre><p id="6b6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建<code class="fe mi mj mk ml b">ConcreteSuperXFactory</code>工厂类别后，我们可以开始生产车辆:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="cb89" class="mq mr iq ml b gy ms mt l mu mv">const superXFactory = new ConcreteSuperXFactory();</span><span id="c195" class="mq mr iq ml b gy mw mt l mu mv">const superX01 = superXFactory.produceSuperX01();<br/>const superX02 = superXFactory.produceSuperX02();</span><span id="582b" class="mq mr iq ml b gy mw mt l mu mv">superX01.run();<br/>superX02.run();</span></pre><p id="e9f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您成功运行上述代码时，终端将输出以下结果:</p><pre class="kg kh ki kj gt mm ml mn mo aw mp bi"><span id="ae51" class="mq mr iq ml b gy ms mt l mu mv">SuperX01 start<br/>SuperX02 start</span></pre><p id="28aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们在上一篇文章中已经介绍了<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-factory-method-pattern-in-typescript-c4c3047a6289"> <strong class="ky ir">工厂方法模式</strong> </a>，那么它和抽象工厂模式有什么区别呢？</p><p id="c9f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">抽象工厂模式与<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/design-patterns-factory-method-pattern-in-typescript-c4c3047a6289"> <strong class="ky ir">工厂方法模式</strong> </a> <strong class="ky ir"> </strong>最大的区别在于<strong class="ky ir">工厂方法模式针对的是一个产品层次结构，而抽象工厂模式需要面对多个产品层次结构，一个工厂层次结构可以负责多个不同的产品层次结构。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/8a262899ef56a19a4438bed82dcef160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mlgW5X8WiLoiBN08X_-bhQ.png"/></div></div></figure><p id="a457" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">产品对象的创建。当工厂层次结构可以创建属于不同产品层次结构的产品系列中的所有对象时，抽象工厂模式比工厂方法模式更简单、更有效。</p><p id="208a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有任何问题，请随时给我留言。稍后我会继续介绍其他模式，如果你有兴趣，可以在<a class="ae kv" href="https://medium.com/@bytefer" rel="noopener"> Medium </a>或者<a class="ae kv" href="https://twitter.com/Tbytefer" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="bbec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想学习打字，那么不要错过<strong class="ky ir">掌握打字</strong>系列。</p><ul class=""><li id="1df0" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="https://medium.com/frontend-canteen/what-are-k-t-and-v-in-typescript-generics-9fabe1d0f0f3" rel="noopener"><strong class="ky ir">TypeScript泛型中的K、T、V是什么？</strong>T9】</a></li><li id="257c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/using-typescript-mapped-types-like-a-pro-be10aef5511a"> <strong class="ky ir">使用TypeScript像Pro一样映射类型</strong> </a></li><li id="3b5a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/use-typescript-conditional-types-like-a-pro-7baea0ad05c5"> <strong class="ky ir">使用TypeScript条件类型像亲</strong> </a></li><li id="5fd2" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/using-typescript-intersection-types-like-a-pro-a55da6a6a5f7"> <strong class="ky ir">使用TypeScript交集类型像亲</strong> </a></li><li id="5d29" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://levelup.gitconnected.com/using-typescript-infer-like-a-pro-f30ab8ab41c7" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">使用打字稿推断像亲</strong> </a></li><li id="d056" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-use-typescript-template-literal-types-like-a-pro-2e02a7db0bac" rel="noopener"> <strong class="ky ir">使用TypeScript模板字面类型像亲</strong> </a></li><li id="f23a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/15-utility-types-that-every-typescript-developer-should-know-6cf121d4047c"> <strong class="ky ir">可视化打字稿:15种最常用的实用类型</strong> </a></li><li id="847f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://levelup.gitconnected.com/10-things-you-need-to-know-about-typescript-classes-f58c57869266" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">关于类型脚本类你需要知道的10件事</strong> </a></li><li id="54ed" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/purpose-of-declare-keyword-in-typescript-8431d9db2b10"><strong class="ky ir"/></a>中‘declare’关键字的用途</li><li id="d2cc" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/no-more-confusion-about-typescripts-any-and-unknown-98c4b53f8924"> <strong class="ky ir">不再混淆打字稿的‘任何’和‘未知’</strong></a></li></ul><div class="nf ng gp gr nh"><div role="button" tabindex="0" class="ab bv gv cb fp ni nj bn nk kp ex"><div class="nl l"><div class="ab q"><div class="l di"><img alt="Bytefer" class="l de bw nm nn fe" src="../Images/238cf2afd3c689b50719951ba2fd880d.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*krjVh9VFhDEcMUif4Ewt-A.png"/><div class="fb bw l nm nn fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://medium.com/@bytefer?source=post_page-----84cd7b002964--------------------------------" rel="noopener follow" target="_top"> Bytefer </a></p></div></div><div class="nq nr gw l"><h2 class="bd ir tg ls fp th fr fs ti fu fw ip bi translated">掌握打字稿系列</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi tj au tk tl tm pl tn an eh ei to tp tq el em eo de bk ep" href="https://medium.com/@bytefer/list/mastering-typescript-series-688ee7c12807?source=post_page-----84cd7b002964--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="tr l fo"><span class="bd b dl z dk">47 stories</span></div></div></div><div class="od dh oe fp ab of fo di"><div class="di nv bv nw nx"><div class="dh l"><img alt="" class="dh" src="../Images/8fba4cad7ae795f6abed5234e33e0356.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*l87u8lL_MzD5n4z_"/></div></div><div class="di nv bv ny nz oa"><div class="dh l"><img alt="" class="dh" src="../Images/373c978fed504a3c38f0fdb5b617fedb.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*94uN4q2Of_fg3WaQ"/></div></div><div class="di bv ob oc oa"><div class="dh l"><img alt="" class="dh" src="../Images/a8ea3e3ecad1c2d2697107f3ce466e42.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*tGza_iE2o--HjQwD"/></div></div></div></div></div></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="5a83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oj">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">plain English . io</em></strong></a><em class="oj">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="oj">免费周报</em> </strong> </a> <em class="oj">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">LinkedIn</em></strong></a><em class="oj"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">YouTube</em></strong></a><em class="oj"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">不和</em> </strong> </a> <em class="oj">。对增长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="oj">电路</em> </strong> </a> <em class="oj">。</em></p></div></div>    
</body>
</html>