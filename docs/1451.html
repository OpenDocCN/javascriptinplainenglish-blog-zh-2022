<html>
<head>
<title>How to Create an Image Picker in React Native Using Expo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Expo在React Native中创建图像拾取器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-an-image-picker-in-react-native-using-expo-4dd403e706bd?source=collection_archive---------2-----------------------#2022-03-25">https://javascript.plainenglish.io/how-to-create-an-image-picker-in-react-native-using-expo-4dd403e706bd?source=collection_archive---------2-----------------------#2022-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="2161" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://bookeraziz.medium.com/list/react-native-3e476cc05fe3" rel="noopener">反应原生</a></h2><div class=""/><div class=""><h2 id="be18" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated"><em class="ko">上传图片&amp;React Native中的视频变得简单</em></h2></div><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/cc0984aba360b4559c22e7710a7ff99d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o8rmWvas94dMN1WR"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@thombradley?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thom Bradley</a> on <a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1180" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">我们将在react native中创建一个图像拾取器，它在任何应用程序开发人员的产品组合中都很棒。我们将使用世博包<code class="fe mc md me mf b"><a class="ae lf" href="https://www.npmjs.com/package/expo-image-picker" rel="noopener ugc nofollow" target="_blank">expo-image-picker</a></code>来实现这一目标。让我们直接进入编码。</p><p id="7017" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">如果你在任何时候迷路了，完整的代码在这篇文章的结尾。</p><h1 id="6639" class="mg mh iq bd mi mj mk ml mm mn mo mp mq kf mr kg ms ki mt kj mu kl mv km mw mx bi translated">项目设置</h1><h2 id="0eec" class="my mh iq bd mi mz na dn mm nb nc dp mq lp nd ne ms lt nf ng mu lx nh ni mw iw bi translated">导入包</h2><p id="30e8" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">我们将使用<code class="fe mc md me mf b"><a class="ae lf" href="https://www.npmjs.com/package/expo-image-picker" rel="noopener ugc nofollow" target="_blank">expo-image-picker</a> </code>包来创建我们的图像拾取器。在控制台中运行以下命令:</p><p id="b436" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><code class="fe mc md me mf b">npm i expo-image-picker</code></p><h2 id="fde0" class="my mh iq bd mi mz na dn mm nb nc dp mq lp nd ne ms lt nf ng mu lx nh ni mw iw bi translated">应用样板</h2><p id="d6b6" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">接下来，我们将添加一些样板代码，这样我们就可以开始制作我们的图像拾取器。将以下代码添加到App.js文件中:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="no np l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">App Boilerplate Code</figcaption></figure><p id="5243" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">您应该会看到以下屏幕:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/5852afc4ca5f7727e596672c78096ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*yFzyQkYWoEnWin_NKrPe3Q.jpeg"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">What you should see on your screen</figcaption></figure><h1 id="85ce" class="mg mh iq bd mi mj mk ml mm mn mo mp mq kf mr kg ms ki mt kj mu kl mv km mw mx bi translated">创建我们的图像拾取器</h1><h2 id="46b4" class="my mh iq bd mi mz na dn mm nb nc dp mq lp nd ne ms lt nf ng mu lx nh ni mw iw bi translated">存储对图像的引用</h2><p id="aae7" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">在我们开始从我们的设备读取图像之前，我们首先需要一种方法来保存我们的图像URI。图像URI是一个字符序列，允许我们的图像嵌入到我们的应用程序中</p><p id="aa24" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">我们将使用useState来完成这项工作。将以下代码行添加到组件的顶部:</p><p id="9275" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><code class="fe mc md me mf b">Const [Image,SetImage]=useState(null)</code></p><h2 id="c488" class="my mh iq bd mi mz na dn mm nb nc dp mq lp nd ne ms lt nf ng mu lx nh ni mw iw bi translated">创建我们的异步函数</h2><p id="8d6d" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">下一步是运行我们设备的图像拾取器。为此我们将使用<code class="fe mc md me mf b"><a class="ae lf" href="https://www.npmjs.com/package/expo-image-picker" rel="noopener ugc nofollow" target="_blank">expo-image-picker</a> </code><a class="ae lf" href="https://docs.expo.dev/versions/latest/sdk/imagepicker/#imagepickerlaunchimagelibraryasyncoptions" rel="noopener ugc nofollow" target="_blank"><strong class="li ja">launchgimagelibraryasync</strong></a>函数。</p><p id="a9c7" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">该函数返回图像的URI，我们将把它保存在我们的<strong class="li ja">图像</strong>状态中。这方面的代码如下:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="no np l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Async Functions</figcaption></figure><p id="8703" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><em class="nr">注意:如果您想自定义图像拾取器，您可以编辑各种字段，如</em> <strong class="li ja"> <em class="nr">允许编辑</em> </strong> <em class="nr">和</em> <strong class="li ja"> <em class="nr">媒体类型。</em> </strong> <em class="nr">你可以在documentation</em><a class="ae lf" href="https://docs.expo.dev/versions/latest/sdk/imagepicker/#mediatypeoptions" rel="noopener ugc nofollow" target="_blank"><em class="nr">这里</em> </a> <em class="nr">了解更多关于这个的内容。</em></p><h1 id="fa63" class="mg mh iq bd mi mj mk ml mm mn mo mp mq kf mr kg ms ki mt kj mu kl mv km mw mx bi translated">展示我们的形象</h1><p id="4530" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">现在我们已经完成了异步函数，我们要做的就是显示我们选择的图片。为了实现这一点，我们将在我们的应用程序中做一些<a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/how-to-implement-conditional-rendering-in-react-and-react-native-the-right-way-f00e2fa7a730">条件渲染</a>。</p><p id="0e34" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">在组件的return语句中添加以下代码:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="no np l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Conditionally Rendering our Image</figcaption></figure><p id="6b77" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><em class="nr">注意:如果我们的图像状态不为空，我们在这里做的只是渲染我们的图像。因为我们的图像状态只有在我们选择图像时才变得不为空，所以我们不必担心在得到URI之前渲染图像</em></p><h1 id="4115" class="mg mh iq bd mi mj mk ml mm mn mo mp mq kf mr kg ms ki mt kj mu kl mv km mw mx bi translated">测试我们的图像拾取器</h1><p id="34ad" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">现在是时候测试我们的图像拾取器了。如果你点击这个按钮，你应该被重定向到你的手机画廊，在那里你应该可以选择一张图片。这个图像应该会出现在react本地应用程序中。</p><p id="3985" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">这里有一个例子:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/1ee16bb4c512aba4643de4b8fe6d465d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/1*Ve59U60ZCcK4wOyxy8h5aQ.gif"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Testing our Image Picker</figcaption></figure><p id="fa28" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><em class="nr">注意:因为这个例子是在模拟器上运行的，所以没有可供选择的照片。如果您在物理设备上运行此程序，您将能够显示图像</em></p><h1 id="0a86" class="mg mh iq bd mi mj mk ml mm mn mo mp mq kf mr kg ms ki mt kj mu kl mv km mw mx bi translated">完整代码</h1><p id="1c12" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">以下是完整的代码:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="1c2e" class="mg mh iq bd mi mj mk ml mm mn mo mp mq kf mr kg ms ki mt kj mu kl mv km mw mx bi translated">结论</h1><p id="ead7" class="pw-post-body-paragraph lg lh iq li b lj nj ka ll lm nk kd lo lp nl lr ls lt nm lv lw lx nn lz ma mb ij bi translated">感谢您阅读完我的文章<strong class="li ja">“如何使用Expo在React Native中创建图像拾取器”</strong>。如果你有任何问题，请随意提问，我会尽快回答。</p><p id="d0d1" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">我希望你有美好的一天。如果你刚接触媒体，你可以点击这里的链接<a class="ae lf" href="https://bookeraziz.medium.com/membership" rel="noopener">加入。</a></p><h2 id="28b4" class="my mh iq bd mi mz na dn mm nb nc dp mq lp nd ne ms lt nf ng mu lx nh ni mw iw bi translated">资源</h2><ol class=""><li id="50e3" class="nt nu iq li b lj nj lm nk lp nv lt nw lx nx mb ny nz oa ob bi translated"><a class="ae lf" href="https://docs.expo.dev/versions/latest/sdk/imagepicker/#mediatypeoptions" rel="noopener ugc nofollow" target="_blank">世博摄像师</a></li></ol><p id="ceec" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><em class="nr">更多内容看</em> <a class="ae lf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li ja"> <em class="nr">说白了。报名参加我们的</em> <a class="ae lf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li ja"> <em class="nr">免费周报</em> </strong> </a> <em class="nr">。关注我们</em><a class="ae lf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="li ja"><em class="nr">Twitter</em></strong></a><em class="nr">和</em><a class="ae lf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="li ja"><em class="nr">LinkedIn</em></strong></a><em class="nr">。加入我们的</em> <a class="ae lf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="li ja"> <em class="nr">社区</em> </strong> </a> <em class="nr">。</em></strong></a></p></div></div>    
</body>
</html>