<html>
<head>
<title>I rebuilt my Next.js site in Astro. Does it live up to the hype?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在Astro重建了我的Next.js网站。它不辜负炒作吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/i-rebuilt-my-next-js-site-in-astro-does-it-live-up-to-the-hype-5268c09f4463?source=collection_archive---------1-----------------------#2022-06-28">https://javascript.plainenglish.io/i-rebuilt-my-next-js-site-in-astro-does-it-live-up-to-the-hype-5268c09f4463?source=collection_archive---------1-----------------------#2022-06-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e95e6381ab59d178345d3462f9c6d29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIrt0P9QCmVKKXK7E7QQ-A.png"/></div></div></figure><p id="bad9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">任何了解我的人都知道我喜欢Next.js。这是一个构建React应用程序的很好的框架，与Vercel相结合，提供了一个很棒的开发者体验。然而，这个周末，我通过一段新的Fireship.io视频被介绍给了Astro。我听说过几次阿斯特罗，但从没用过它。出于对炒作内容的好奇，我决定将<a class="ae kt" href="https://brockherion.dev" rel="noopener ugc nofollow" target="_blank"> brockherion.dev </a>移植到Astro。</p><p id="476d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在进入我的经验之前，我不会比较每个框架的技术细节。我会给出一些与我的经验相关的不同之处，但这不是Next vs Astro的文章。我只是简单地分享一下使用Astro对我来说是什么样的，以及为什么我计划在这个特定的项目中坚持使用它。您可以在<a class="ae kt" href="https://docs.astro.build/en/comparing-astro-vs-other-tools/#nextjs-vs-astro" rel="noopener ugc nofollow" target="_blank"> Astro Docs </a>上阅读更多关于Next和Astro之间的区别。</p><p id="add2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，继续表演！</p><h1 id="fa0a" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">动机</h1><p id="c77b" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">正如我在<a class="ae kt" href="https://brockherion.dev/blog/posts/how-i-built-brockherion-dev" rel="noopener ugc nofollow" target="_blank">之前的一篇文章中所写的那样，我的网站是使用Next.js、TailwindCSS和TypeScript构建的。我选择这个堆栈是因为实际上构建一个好看的网站是多么容易。这也是我最习惯使用的堆栈，因为我已经使用这些技术有一段时间了。</a></p><p id="98b6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">虽然我喜欢Next.js构建高度交互的网站，但是我发现仅仅针对静态内容进行设置有点令人沮丧，尤其是从降价文件中。我带来了几个“npm”包来处理诸如解析frontmatter之类的事情。虽然这确实让事情变得更容易，但让我的降价页面渲染仍然需要我做大量的工作。不过，这并不是世界末日，尤其是当我所有的组件都安装好之后。</p><p id="6654" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">另一个小问题是实际部署站点。我使用Vercel进行托管，他们让部署你的网站变得非常容易。然而，构建时间从30秒到一分钟多一点不等。再说一遍，这并不是什么失眠的事情，但确实有点烦人。如果我正在修复一些非常小的东西，比如一篇博客文章中的一个打字错误，那就更是如此。</p><p id="17b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于Astro是一个构建静态网站的工具，我很好奇它在下一步会有什么表现。然而，我对原始表演不太感兴趣。Next确实支持静态站点生成，并且做得很好。一旦部署，我的灯塔评分一致在90和100之间的下一个版本的网站。Astro版本也是如此。</p><p id="0179" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我想知道的是开发者的体验。Astro能否解决我在下一个设置中的难点？</p><h1 id="4ffa" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">移植brockherion.dev</h1><p id="dadd" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我用博客模板和对Tailwind和React的支持创建了一个新的Astro项目。Astro很好，因为它支持多种UI框架，包括React、Vue和Svelte。我最初的计划是把我所有的React组件从下一个版本移到这里，做一个精确的1-1端口。这本来是测试原始性能的最佳情况，但是我不太关心这个。我借此机会对用户界面做了一些修改，使它更有凝聚力。因此，虽然布局略有不同，但内容本身或多或少是相同的。</p><p id="093a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我惊讶的是Astro的语法是多么直观。虽然我可以使用JSX组件，但我决定尝试一下Astro组件，并最终真正喜欢上了它们。它们和JSX很相似，在那里我可以相对较快地找到它们。我也意识到我在Next中创建的一些组件可能有点多余。我最终稍微简化了我的页面和组件结构，并清理了一些我留下的技术债务。</p><p id="345e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">几个小时之内，我的所有页面(除了项目页面)和博客文章都被转移了。我并没有花太多时间来移动我的内容，甚至花了更少的时间来修复我之前设置中的一些问题。在对我的SEO设置进行了一点图像优化和微调之后，我已经准备好部署这个网站了。</p><h1 id="8df1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">阿童木值得大肆宣传吗？</h1><p id="a690" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我首先要说的是，我对开始学习Astro的简单程度印象深刻。正如我之前说过的，它和JSX非常相似，让我觉得很熟悉。也就是说，如果我真的想使用React组件，我真的很感激。如果网站更大，这将使过渡过程更加平稳。</p><p id="08de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">其次，我很欣赏Astro将markdown文件视为页面。但在Next中却不是这样，你必须使用“getStaticProps”和“getStaticPaths”来设置和渲染你的markdown文件。我也很喜欢你如何在frontmatter文件中定义你的降价页面的布局。你需要做的就是</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="0cc0" class="mg kv in mc b gy mh mi l mj mk">---<br/>setup: |<br/>  import Layout from ‘../../../layouts/BlogPost.astro’<br/>---</span></pre><p id="cd97" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并且你的页面被包装在你的布局中。</p><p id="b91f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我真的很喜欢Astro处理frontmatter的方式。你可以在你的`. astro `文件中编写这样的代码来抓取你所有的帖子。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="a9f1" class="mg kv in mc b gy mh mi l mj mk">---<br/>let allPosts = await Astro.glob(‘./posts/*.md’);</span><span id="a8fe" class="mg kv in mc b gy ml mi l mj mk">let featuredPosts = allPosts.filter(post =&gt; post.frontmatter.isFeatured);<br/>---</span></pre><p id="6013" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为“allPosts”是一个数组，所以可以非常容易地根据你的帖子的内容进行排序和过滤。我甚至不能开始描述这比我在Next的设置好多少。</p><p id="a542" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">同样让我印象深刻的是Astro版本构建和部署的速度。我前面提到过，下一个版本的构建和部署需要30秒到1分钟。Astro版本的构建和部署需要15到25秒。这在构建时间上是一个不错的改进！</p><p id="aa18" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在下一个版本中，我可以设置一个简单的脚本，在我构建应用程序来重新创建网站地图时运行。我不完全确定我将如何在这里设置它，但我确信它将是非常相似的东西。</p><h1 id="d4e7" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">最后的想法</h1><p id="422c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">鉴于我在这个网站上的用例，Astro比Next.js更适合。虽然在性能方面它们非常相似，但Astro只是让我的事情变得更容易。从如何处理降价到改进构建时间，Astro给我留下了深刻的印象。</p><p id="49ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Astro是否取代Next.js？不，一点也不。对于brockherion.dev来说，Astro更有意义，因为内容是静态的。它让我可以用更少的开销做我需要的事情。Next可以处理静态内容，但是需要更多的设置才能正常工作。对我来说，下一个亮点是当我构建一个非常交互式的应用程序或动态网站时。如果我有很多动态或用户驱动的内容，Next可以轻松处理。在这种情况下，最重要的是使用合适的工具。</p><p id="ab9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">总的来说，我真的很喜欢Astro，迫不及待地想知道它的发展方向。对于构建静态站点来说，这是一个非常棒的工具。它能够为我提供我所需要的东西，同时为我提供一个很好的开发体验。</p><p id="2a26" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">编码快乐！</p><p id="27f3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mm">更多内容请看</em><a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mm">plain English . io</em></strong></a><em class="mm">。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mm">免费周报</em> </strong> </a> <em class="mm">。关注我们关于</em><a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mm">Twitter</em></strong></a><em class="mm">和</em><a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mm">LinkedIn</em></strong></a><em class="mm">。查看我们的</em> <a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mm">社区不和谐</em> </strong> </a> <em class="mm">加入我们的</em> <a class="ae kt" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mm">人才集体</em> </strong> </a> <em class="mm">。</em></p></div></div>    
</body>
</html>