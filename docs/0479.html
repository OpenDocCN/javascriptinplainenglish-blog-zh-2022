<html>
<head>
<title>JavaScript Return Tab Order to Top of the Page After Blur Event</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模糊事件后JavaScript将Tab键顺序返回到页面顶部</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-return-tab-order-to-top-of-the-page-after-blur-event-813ebd5db3cd?source=collection_archive---------13-----------------------#2022-01-27">https://javascript.plainenglish.io/javascript-return-tab-order-to-top-of-the-page-after-blur-event-813ebd5db3cd?source=collection_archive---------13-----------------------#2022-01-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/bf2ee5378cbcb02ef9e0adc29bce05d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dE12AuNUZMJl7bIokKDmAg.jpeg"/></div></div></figure><p id="aab3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">document.activeElement.blur()</code>正在按预期工作，并在单击时将焦点从“下一步”按钮上移开。但是，在下一个表单内容呈现后，单击tab会将焦点放在我的页脚上。焦点将转移到页脚，因为“下一步”按钮是表单选项卡流中的最后一个元素。所以<code class="fe kt ku kv kw b">document.activeElement.blur()</code>看起来是有效的，因为聚焦环被移除了，但是tab键顺序没有被重置。</p><p id="9f0c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不使用<code class="fe kt ku kv kw b">blur</code>，只需将表单的<code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex" rel="noopener ugc nofollow" target="_blank">tabindex</a></code>设置为<code class="fe kt ku kv kw b">-1</code>和<code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus" rel="noopener ugc nofollow" target="_blank">focus</a></code>即可。这里有一个普通的JS示例，您可以在React中使用<code class="fe kt ku kv kw b"><a class="ae kx" href="https://reactjs.org/docs/refs-and-the-dom.html" rel="noopener ugc nofollow" target="_blank">ref</a></code>来修改它。</p><h2 id="98d2" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated"><strong class="ak">document . query selector()</strong></h2><p id="568d" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated"><code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/Document" rel="noopener ugc nofollow" target="_blank">Document</a></code>方法<code class="fe kt ku kv kw b"><strong class="jx io">querySelector()</strong></code>返回文档中匹配指定选择器或选择器组的第一个<code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/Element" rel="noopener ugc nofollow" target="_blank">Element</a></code>。如果没有找到匹配，则返回<code class="fe kt ku kv kw b">null</code>。</p><h2 id="25fa" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">EventTarget.addEventListener()</h2><p id="20d7" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated"><code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" rel="noopener ugc nofollow" target="_blank">EventTarget</a></code>接口的<code class="fe kt ku kv kw b"><strong class="jx io">addEventListener()</strong></code>方法设置了一个函数，每当指定的事件被传递到目标时，这个函数就会被调用。</p><p id="a7c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">常见的目标是<code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/Element" rel="noopener ugc nofollow" target="_blank">Element</a></code>，或者其子节点<code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/Document" rel="noopener ugc nofollow" target="_blank">Document</a></code>和<code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/Window" rel="noopener ugc nofollow" target="_blank">Window</a></code>，但是目标可以是任何支持事件的对象(比如<code class="fe kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" rel="noopener ugc nofollow" target="_blank">XMLHttpRequest</a></code>)。</p><p id="b589" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:</strong><code class="fe kt ku kv kw b">addEventListener()</code>方法是<em class="lw">推荐的</em>注册事件监听器的方法。好处如下:</p><ul class=""><li id="addc" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">它允许为一个事件添加多个处理程序。这对于库、JavaScript模块或任何其他需要与其他库或扩展良好协作的代码特别有用。</li><li id="8f27" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">与使用一个<code class="fe kt ku kv kw b">onXYZ</code>属性相比，当监听器被激活时，它给你一个更细粒度的阶段控制(捕获与冒泡)。</li><li id="dd91" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">它适用于任何事件目标，而不仅仅是HTML或SVG元素。</li></ul><h2 id="736c" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">HTMLElement.focus()</h2><p id="d311" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">方法将焦点设置在指定的元素上，如果它可以被聚焦的话。焦点元素是默认情况下接收键盘和类似事件的元素。</p><pre class="ml mm mn mo gt mp kw mq mr aw ms bi"><span id="5fff" class="ky kz in kw b gy mt mu l mv mw">const form = document.querySelector('form');</span><span id="1ec3" class="ky kz in kw b gy mx mu l mv mw">document.querySelector('#next').addEventListener('click', (ev) =&gt; {<br/>  // Instead of blurring:<br/>  // ev.target.blur();<br/>  <br/>  // Focus the form:<br/>  form.focus({preventScroll: true});<br/>});</span><span id="0798" class="ky kz in kw b gy mx mu l mv mw">button,<br/>form {<br/>  border: 2px solid black;<br/>  margin: 0.2rem;<br/>  outline: none;<br/>}</span><span id="a387" class="ky kz in kw b gy mx mu l mv mw">*:focus {<br/>  border-color: red;<br/>}</span><span id="8c10" class="ky kz in kw b gy mx mu l mv mw">&lt;form tabindex="-1"&gt;<br/>  &lt;button id="next" type="button"&gt;Next&lt;/button&gt;<br/>&lt;/form&gt;<br/>&lt;footer&gt;<br/>  &lt;button&gt;Unrelated button&lt;/button&gt;<br/>&lt;/footer&gt;</span></pre><p id="52e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lw">更多内容看</em> <a class="ae kx" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lw">说白了。报名参加我们的</em> <a class="ae kx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lw">免费周报</em> </strong> </a> <em class="lw">。在我们的</em> <a class="ae kx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lw">社区不和谐</em> </strong> </a> <em class="lw">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>