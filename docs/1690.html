<html>
<head>
<title>A Little-Known JavaScript Promise Feature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个鲜为人知的JavaScript Promise特性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-little-known-javascript-promise-feature-8a37d096ef2c?source=collection_archive---------8-----------------------#2022-04-12">https://javascript.plainenglish.io/a-little-known-javascript-promise-feature-8a37d096ef2c?source=collection_archive---------8-----------------------#2022-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fb28" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">您知道您可以创建自己的定制承诺吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7727de01f6a9c707e1a912480dea0919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6e8diWv9BkAmvPpWd_I_A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author and by <a class="ae kv" href="https://unsplash.com/photos/LrlyZzX6Sws" rel="noopener ugc nofollow" target="_blank">carla</a> on usplash</figcaption></figure><p id="4430" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">你好，如果你想体验灵媒，请考虑支持我和所有其他作家，注册成为</em> <a class="ae kv" href="https://medium.com/@anton.franzen/membership" rel="noopener"> <strong class="ky ir"> <em class="ls">会员</em> </strong> </a> <em class="ls">每月5美元，以保持独立写作的活力，</em> <a class="ae kv" href="https://medium.com/@anton.franzen/membership" rel="noopener"> <strong class="ky ir"> <em class="ls">在此注册；)</em> </strong> </a></p><p id="b601" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了支持他人，Medium还可以通过写作和在这里找到家的强大、积极参与的社区来支持你。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="20ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">承诺最酷的一点是，你可以为他们做<code class="fe ma mb mc md b">await</code>或者对承诺做<code class="fe ma mb mc md b">.then</code>。这两种方法都是在承诺完成后执行代码的有效方法。</p><p id="9487" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你觉得自己对回调、承诺、异步等待不太确定，请查看我的文章，我会深入解释这一切:</p><div class="me mf gp gr mg mh"><a href="https://betterprogramming.pub/callbacks-vs-promises-vs-async-await-a-step-by-step-guide-f93d13447604" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">回调vs .承诺vs .异步Await:逐步指南</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">引擎盖下也有点。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">better编程. pub</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv kp mh"/></div></div></a></div><p id="426c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">这是一个用本机promise构造器作出的承诺:</strong></p><pre class="kg kh ki kj gt mw md mx my aw mz bi"><span id="35c6" class="na nb iq md b gy nc nd l ne nf">const promise = new Promise((resolve, reject) =&gt; {<br/>res('data')<br/>})<br/>const data = await promise // 'data'</span></pre><p id="4556" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，是的，这一切都很酷，但你知道一个<code class="fe ma mb mc md b">async</code>功能就像一个承诺吗？</p><p id="9643" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是的，或者更准确地说，它<em class="ls">返回</em>一个承诺。</p><p id="4976" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，如果我们写一个异步函数，我们可以为它做<code class="fe ma mb mc md b">.then() </code>或<code class="fe ma mb mc md b">await</code>，就像我们为承诺本身做的一样！</p><p id="020f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是请记住，异步函数不是一种承诺；它只是返回一个承诺。</p><p id="38c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而且，因为我们知道它返回一个承诺，我们可以做与承诺相同的事情，如<code class="fe ma mb mc md b">.then()</code>和<code class="fe ma mb mc md b">await</code>等等。</p><p id="ed6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">这里有一个例子:</strong></p><pre class="kg kh ki kj gt mw md mx my aw mz bi"><span id="13b5" class="na nb iq md b gy nc nd l ne nf">const promise = async () =&gt; {</span><span id="a152" class="na nb iq md b gy ng nd l ne nf">return 'data'<br/>}<br/>const data = await promise() // 'data'</span></pre><p id="2241" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我们也可以这样使用</strong><code class="fe ma mb mc md b"><strong class="ky ir">.then</strong></code><strong class="ky ir">:</strong></p><pre class="kg kh ki kj gt mw md mx my aw mz bi"><span id="f1a3" class="na nb iq md b gy nc nd l ne nf">const<em class="ls"> promise </em>=<em class="ls"> async </em>()<em class="ls"> </em>=&gt;<em class="ls"> </em>{<br/><em class="ls">return </em>"data";<br/>};</span><span id="ffcd" class="na nb iq md b gy ng nd l ne nf"><em class="ls">promise</em>()<em class="ls">.then</em>((data) =&gt; <em class="ls">console.log</em>(data)); // 'data'</span></pre><p id="a062" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你不相信我，看看这个</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/fb4aa1283cd08e945a3e150a74c59f9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*huoxYSAop4qTc6DPyMEyeQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/d7c7661fa93a3c915f95c4906b813ef4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A87FOCmsL5RH4MUt0WMLYw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="abb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，它返回一个承诺。✅</p><p id="cb5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您认为您必须用promise构造函数创建一个promise来编写异步代码，那么现在您可以为它创建一个异步函数。当然，承诺有它的位置，异步函数也是如此。</p><p id="8daa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能每天都这样做，但我一开始没有意识到异步函数实际上只是返回一个承诺，无论它返回什么都与承诺解析时相同。</p><p id="b2dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这件作品，我希望你也会喜欢:</p><div class="me mf gp gr mg mh"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-learning-from-react-tutorials-that-suck-5e2031d9bdc7"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">停止从糟糕的React教程中学习</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">不受欢迎的观点</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mq l"><div class="nj l ms mt mu mq mv kp mh"/></div></div></a></div><div class="me mf gp gr mg mh"><a href="https://betterprogramming.pub/callbacks-vs-promises-vs-async-await-a-step-by-step-guide-f93d13447604" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">回调vs .承诺vs .异步Await:逐步指南</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">引擎盖下也有点。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">better编程. pub</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv kp mh"/></div></div></a></div><div class="me mf gp gr mg mh"><a rel="noopener  ugc nofollow" target="_blank" href="/deep-dive-into-javascript-closures-a-step-by-step-tutorial-89cf0731a4c5"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">深入研究JavaScript闭包:分步教程</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">从理论和实践的角度理解闭包。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mq l"><div class="nk l ms mt mu mq mv kp mh"/></div></div></a></div><p id="03cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">plain English . io</em></strong></a><em class="ls">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">Twitter</em></strong></a><em class="ls">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">LinkedIn</em></strong></a><em class="ls">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">社区不和谐</em> </strong> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>