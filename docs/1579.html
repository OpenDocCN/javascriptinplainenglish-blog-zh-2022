<html>
<head>
<title>Types May Finally be Coming to JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">类型可能最终会出现在JavaScript中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/future-javascript-types-may-finally-be-coming-to-javascript-4d4411668dcf?source=collection_archive---------7-----------------------#2022-04-04">https://javascript.plainenglish.io/future-javascript-types-may-finally-be-coming-to-javascript-4d4411668dcf?source=collection_archive---------7-----------------------#2022-04-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0454" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">详细了解将要发生的变化以及它们将如何影响JavaScript。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/cbc96cf9fbb61f11a8ca530f2be05f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TxMPoKaWuoTaumdqReyi-w.png"/></div></div></figure><p id="0498" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">随着<a class="ae lk" href="https://github.com/tc39/proposal-type-annotations" rel="noopener ugc nofollow" target="_blank">类型注释</a>提升到提案级别1阶段，JavaScript离成为更强类型的语言又近了一步。让我们深入探讨一下这些变化对JavaScript意味着什么。</p><h1 id="3bcb" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">JavaScript中的类型</h1><p id="f367" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">JavaScript是动态类型的。这意味着它通过某样东西出现的地方来判断它的类型。例如:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="564a" class="mn lm in mj b gy mo mp l mq mr">let x = 1; // typeof "number"<br/>let y = "1"; // typeof "string"</span></pre><p id="cbea" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在复杂的应用程序和系统中，这是一个巨大的弱点。应用程序可能会因为最小的事情而出错——比如您的API返回“false”而不是false。</p><p id="69bf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这意味着我们有时不得不通过做这样的傻事来保护我们的代码，尤其是在我们无法控制软件发回不可靠类型的情况下:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="ff4c" class="mn lm in mj b gy mo mp l mq mr">if(x === true || x === "true") {<br/>    // this is true<br/>}</span></pre><p id="3364" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于彻头彻尾的软件工程师来说，这是一个巨大的烦恼，但对于初学者来说，JavaScript是一个礼物。JavaScript使得用简单的方式编写相当复杂的东西变得如此容易。如果您的代码是错误的，JavaScript通常会找到一种方法让它工作。大多数JavaScript开发人员发现，随着他们越来越精通这门语言，他们开始时喜欢的灵活性很快就变得令人痛苦。</p><p id="3fcd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">由于这些原因，从来没有一股强大的力量推动JavaScript成为一种带有硬性规则的类型化语言。JavaScript的可访问性是其最大的特点之一，添加类型不仅会使初学者更加困难，还可能破坏许多基于非类型化JavaScript的现有web技术。</p><p id="abe1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，开发了可选的软件包——TypeScript和Flow是其中两个最著名的。这些将JavaScript转化成一种具有强声明类型的语言。</p><h1 id="c504" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">输入:JavaScript类型</h1><p id="8545" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">新的类型注释提案试图找到一个中间地带，这样JavaScript可以保持可访问性，但允许更容易地使用类型等高级特性。</p><p id="b5a8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在某些方面，这是不可避免的。强类型始终是开发人员最需要的JavaScript特性:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ms"><img src="../Images/2f81d034ce6dec4373a1155ef4c32197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q209-M4DGU0HI-eW.png"/></div></div></figure><h1 id="734c" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">类型注释的工作方式</h1><p id="3405" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated"><strong class="kq io">需要澄清的是</strong>，类型注释不会使JavaScript成为强类型语言。相反，他们让JavaScript处理类型。这意味着，一旦这个规范达到实现阶段，如果您向JavaScript添加类型，它们将被简单地忽略。但是，如果用TypeScript编译它，类型将正常工作。</p><p id="2032" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您以前使用过TypeScript，那么您将会熟悉类型注释的外观。例如，定义变量的类型如下所示:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="3e94" class="mn lm in mj b gy mo mp l mq mr">let x:string = "String";<br/>let x:number = 5;</span></pre><h1 id="6fc1" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">类型注释之后JavaScript如何工作</h1><p id="de5a" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">假设您编写了一段如下所示的代码:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="1463" class="mn lm in mj b gy mo mp l mq mr">let x = "String";<br/>console.log(x);</span></pre><p id="0b1c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">稍后，您决定要添加类型。我们可以简单地将类型添加到JavaScript文件中，而不必使用类型脚本和类型注释来编译它:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="f0c8" class="mn lm in mj b gy mo mp l mq mr">let x:string = "String";<br/>console.log(x);</span></pre><p id="3aec" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这种情况下，<code class="fe mt mu mv mj b">:string</code>完全被JavaScript忽略——这意味着它仍然与非类型化的JavaScript和类型包(如TypeScript)兼容。这意味着您可以用TypeScript构建它，但也可以将它作为普通的<code class="fe mt mu mv mj b">.js</code>文件运行。普通JavaScript文件中的类型最终是注释。</p><h1 id="5dcd" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">类型批注中的其他类型示例</h1><p id="0575" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">您所期望的一般类型列表可以在类型注释中找到。比如说-</p><h2 id="d883" class="mn lm in bd ln mw mx dn lr my mz dp lv kx na nb lx lb nc nd lz lf ne nf mb ng bi translated">接口:</h2><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="b112" class="mn lm in mj b gy mo mp l mq mr">interface Name {<br/>    firstName: string,<br/>    lastName: string<br/>}</span></pre><h2 id="3ba0" class="mn lm in bd ln mw mx dn lr my mz dp lv kx na nb lx lb nc nd lz lf ne nf mb ng bi translated">工会类型:</h2><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="3132" class="mn lm in mj b gy mo mp l mq mr">function test(x: string | number) {<br/>    console.log(x);<br/>}</span></pre><h2 id="9331" class="mn lm in bd ln mw mx dn lr my mz dp lv kx na nb lx lb nc nd lz lf ne nf mb ng bi translated">通用类型:</h2><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="2186" class="mn lm in mj b gy mo mp l mq mr">type Test&lt;T&gt; = T[];<br/>let x:Test&lt;number&gt; = [ 1, 2, 3, 4 ];</span></pre><h1 id="8966" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">类型注释背后的基本原理</h1><p id="c9f5" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">主要理由是，随着浏览器开发变得更加简化，Deno和Node.js等后端JavaScript生态系统变得更加流行，JavaScript有机会进入越来越少的构建步骤。TypeScript带来了巨大的变化，在运行TypeScript文件的地方，我们需要将它构建回JavaScript。对于开发人员来说，这显然是一个耗时的、有时是繁重的步骤，并且肯定会限制效率。</p><p id="d968" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在TypeScript中使用类型注释的一个主要好处是它移除了另一个构建步骤。本机TypeScript可以在浏览器中运行，而无需将其转换回JavaScript，这极大地优化了开发人员的体验。</p><p id="3dab" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">同样，这种类型的注释行为为JavaScript中的类型定义提供了一个标准基础。通过标准化JavaScript中最一致的类型部分，它确保了所有类型编译器的一致性，使开发人员更加容易。</p><h1 id="4a66" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">结论</h1><p id="03f4" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">总之，类型正在走向JavaScript，但可能不是以人们预想的方式。JavaScript仍将是一种动态类型语言，但它本身将接受类型声明。该规范仍处于第一阶段，因此可能会有很多变化——但这是JavaScript向更强类型化的世界迈出第一步的激动人心的时刻。</p><p id="ca44" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢您的阅读。</p><p id="7489" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nh">更多内容请看</em><a class="ae lk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nh">plain English . io</em></strong></a><em class="nh">。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nh">免费周报</em> </strong> </a> <em class="nh">。关注我们关于</em><a class="ae lk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nh">Twitter</em></strong></a><em class="nh">和</em><a class="ae lk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nh">LinkedIn</em></strong></a><em class="nh">。加入我们的</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nh">社区不和谐</em> </strong> </a> <em class="nh">。</em></p></div></div>    
</body>
</html>