<html>
<head>
<title>How to Better Use Conditional Judgment in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中更好地使用条件判断</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-better-use-conditional-judgment-in-javascript-5aa1d2981e08?source=collection_archive---------6-----------------------#2022-09-08">https://javascript.plainenglish.io/how-to-better-use-conditional-judgment-in-javascript-5aa1d2981e08?source=collection_archive---------6-----------------------#2022-09-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/40a1f3b72aefa3da7811e333d8a7424b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nFmc-MG-ESmX-d4Uft_9EA.png"/></div></div></figure><p id="36b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文用很短的时间介绍如何用JavaScript编写更简单的条件判断，帮助您编写更简洁、可读性更强的代码。</p><p id="a731" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设我们有一个将颜色值转换为十六进制编码的函数。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="7165" class="lf lg iq lb b gy lh li l lj lk">function convertToHex(color) {<br/>  if (typeof color === 'string') {<br/>    if (color === 'slate') {<br/>      return '#64748b'<br/>    } else if (color === 'gray') {<br/>      return '#6b7280'<br/>    } else if (color === 'red') {<br/>      return '#ef4444'<br/>    } else if (color === 'orange') {<br/>      return '#f97316'<br/>    } else if (color === 'yellow') {<br/>      return '#eab308'<br/>    } else if (color === 'green') {<br/>      return '#22c55e'<br/>    } else {<br/>      return '#ffffff'<br/>    }<br/>  } else {<br/>    return '#ffffff'<br/>  }<br/>}</span></pre><p id="6971" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个函数的目标很简单，就是传入颜色字符串，然后返回相应的十六进制。如果传入的不是字符串，或者没有传递任何内容，则返回白色十六进制。</p><p id="83ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们开始优化这段代码。</p><h2 id="bf29" class="lf lg iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">避免直接使用字符串作为条件</h2><p id="04ae" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">直接使用字符串作为条件的问题是，当我们拼错时会很尴尬。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="7ff7" class="lf lg iq lb b gy lh li l lj lk">convertToHex("salte")</span></pre><p id="9ef1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了避免这种错误，我们可以使用常数。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="f7ce" class="lf lg iq lb b gy lh li l lj lk">const Colors = {<br/> SLATE: 'slate',<br/>  GRAY: 'gray',<br/>  // ...<br/>}</span><span id="8f15" class="lf lg iq lb b gy mh li l lj lk">function convertToHex(color) {<br/>  if (typeof color === 'string') {<br/>    if (color === Colors.SLATE) {<br/>      return '#64748b'<br/>    } else if (color === Color.GRAY) {<br/>      return '#6b7280'<br/>    }<br/>    // ...<br/>  } else {<br/>    return '#ffffff'<br/>  }<br/>}</span><span id="2396" class="lf lg iq lb b gy mh li l lj lk">convertToHex(Colors.SLATE)</span></pre><p id="e124" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果使用typescript，那么可以直接使用enum。</p><h2 id="2c02" class="lf lg iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">使用对象</h2><p id="9eb8" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">其实从上面的代码中不难发现，我们可以直接将十六进制的值存储在对象的值中。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="927e" class="lf lg iq lb b gy lh li l lj lk">const Colors = {<br/> SLATE: '#64748b',<br/>  GRAY: '#6b7280',<br/>  // ...<br/>}</span><span id="79f6" class="lf lg iq lb b gy mh li l lj lk">function convertToHex(color) {<br/>  if (color in Colors) {<br/>    return Colors[color]<br/>  } else {<br/>    return '#ffffff'<br/>  }<br/>}</span><span id="290a" class="lf lg iq lb b gy mh li l lj lk">convertToHex(Colors.SLATE)</span></pre><p id="f043" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样代码会更简洁，可读性更强。</p><h2 id="025a" class="lf lg iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">不符合预期，提前返回</h2><p id="3046" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">另一个最佳实践是，我们可以将意外返回写在函数的顶部，以避免忘记返回。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="ee48" class="lf lg iq lb b gy lh li l lj lk">const Colors = {<br/> SLATE: '#64748b',<br/>  GRAY: '#6b7280',<br/>  // ...<br/>}</span><span id="8fa9" class="lf lg iq lb b gy mh li l lj lk">function convertToHex(color) {<br/>  if (!color in Colors) {<br/>    return '#ffffff'<br/>  }<br/>  return Colors[color]<br/>}</span><span id="45d8" class="lf lg iq lb b gy mh li l lj lk">convertToHex(Colors.SLATE)</span></pre><p id="417d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样你甚至不需要另外一个。使用这个技巧，我们可以消除代码中的许多其他内容。</p><h2 id="e9b1" class="lf lg iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">对对象使用贴图</h2><p id="4768" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">使用Map更加专门化，因为它可以存储任何类型的键，并且它从Map.prototype继承而来，具有更方便的方法和属性。</p><p id="960d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">而Object更方便访问属性，我们可以继续使用Object来实现枚举的作用。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="1b28" class="lf lg iq lb b gy lh li l lj lk">const ColorsEnum = {<br/> SLATE: 'slate',<br/>  GRAY: 'gray',<br/>  // ...<br/>}</span><span id="9409" class="lf lg iq lb b gy mh li l lj lk">const Colors = new Map()<br/>Colors.set(ColorsEnum.SLATE, '#64748b')<br/>Colors.set(ColorsEnum.GRAY, '#6b7280')<br/>// ...<br/>Colors.set('DEFAULT', '#ffffff')</span><span id="fbb8" class="lf lg iq lb b gy mh li l lj lk">function convertToHex(color) {<br/>  if (!Colors.has(color)) {<br/>    return Colors.get('DEFAULT')<br/>  }<br/>  return Colors.get(color)<br/>}</span><span id="2b7b" class="lf lg iq lb b gy mh li l lj lk">convertToHex(Colors.SLATE)</span></pre><h2 id="845e" class="lf lg iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">地图也可以存储功能</h2><p id="2e08" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">假设我们存储了很多颜色，多达上千个，还需要支持后端配置，通过一定的操作过程就可以得到结果。</p><p id="cfb3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我们可以使用映射来存储函数。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="6478" class="lf lg iq lb b gy lh li l lj lk">return Colors.get(color)()</span></pre><h2 id="6f40" class="lf lg iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">尽量避免三元表达式和开关</h2><p id="dd8f" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">三元表达式虽然简洁，但可读性却大打折扣。如果是多级条件，阅读起来会很困难。</p><p id="31d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">switch和if并没有明显的优势，但是有时候很容易返回，导致代码不能按预期执行。</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="3808" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mp">更多内容请看</em><a class="ae mq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mp">plain English . io</em></strong></a><em class="mp">。报名参加我们的</em> <a class="ae mq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="mp">免费周报</em> </strong> </a> <em class="mp">。关注我们关于</em><a class="ae mq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mp">Twitter</em></strong></a><a class="ae mq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mp">LinkedIn</em></strong></a><em class="mp"/><a class="ae mq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mp">YouTube</em></strong></a><em class="mp"/><a class="ae mq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mp">不和</em> </strong> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>