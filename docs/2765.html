<html>
<head>
<title>A Brief Guide to the Object.defineProperty() Method in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中Object.defineProperty()方法的简要指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-brief-guide-to-object-defineproperty-method-in-javascript-400006e05dcc?source=collection_archive---------6-----------------------#2022-07-02">https://javascript.plainenglish.io/a-brief-guide-to-object-defineproperty-method-in-javascript-400006e05dcc?source=collection_archive---------6-----------------------#2022-07-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fb5ee4ef84b3fb9aba4c645bcf694a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i6xgf44wkrs3zgWH"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@afgprogrammer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mohammad Rahmani</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8d3b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">方法添加或修改一个对象的属性。我们可以使用这个方法来提供关于对象属性的额外配置细节，并控制它们的行为。语法是:</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="5831" class="lk ll in lb b gy lm ln l lo lp">Object.defineProperty(object, prop, descriptor);</span></pre><ul class=""><li id="356c" class="lq lr in kc b kd ke kh ki kl ls kp lt kt lu kx lv lw lx ly bi translated"><code class="fe ky kz la lb b">object</code>–我们想要定义属性的任何对象。</li><li id="93fe" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><code class="fe ky kz la lb b">prop</code>–要添加或修改的属性的名称。</li><li id="0513" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><code class="fe ky kz la lb b">descriptor</code>–这是一个指定属性配置细节的对象。</li></ul><p id="1be4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们探索一下可以在描述符对象中使用的属性以及它们的作用。</p><p id="af64" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">任何对象中都有两种类型的属性，一种是有值的数据属性，另一种是由<a class="ae jz" href="https://jscurious.com/javascript-getters-and-setters/" rel="noopener ugc nofollow" target="_blank"> getter-setter </a>函数描述的访问器属性。数据和访问器属性的描述符属性是不同的，我们不能一起使用它们。</p><h1 id="8b7e" class="me ll in bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">通用描述符属性</h1><p id="4011" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">数据和访问器属性有两个共同的描述符属性，它们如下:</p><h2 id="737c" class="lk ll in bd mf ng nh dn mj ni nj dp mn kl nk nl mr kp nm nn mv kt no np mz nq bi translated">可配置的</h2><p id="8a2a" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">它指示属性是否可重新配置(使用<code class="fe ky kz la lb b">defineProperty()</code>重新定义)或删除。如果没有设置，默认为<code class="fe ky kz la lb b">false</code>。如果设置为<code class="fe ky kz la lb b">false</code>，我们不能删除这个属性，如果我们试图重新定义它，它会抛出一个错误。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="1bc5" class="lk ll in lb b gy lm ln l lo lp">const ob = { x: 20 };<br/>Object.defineProperty(ob, "x", { configurable: false });<br/>delete ob.x;<br/>console.log(ob); // { x: 20 }<br/>// re-define property x<br/>Object.defineProperty(ob, "x", { configurable: true });<br/>// TypeError: Cannot redefine property: x</span></pre><h2 id="7e63" class="lk ll in bd mf ng nh dn mj ni nj dp mn kl nk nl mr kp nm nn mv kt no np mz nq bi translated">可列举的</h2><p id="1fd8" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">它指示在枚举对象的属性期间是否出现该属性。如果没有设置，默认为<code class="fe ky kz la lb b">false</code>。如果设置为<code class="fe ky kz la lb b">false</code>，该属性不会出现在<code class="fe ky kz la lb b">Object.keys</code>、<code class="fe ky kz la lb b">Object.values</code>、<code class="fe ky kz la lb b">Object.entries</code>、<code class="fe ky kz la lb b">Object.assign</code>、spread运算符、<code class="fe ky kz la lb b">for...in</code>循环等方法中。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="ff40" class="lk ll in lb b gy lm ln l lo lp">const ob = { x: 20, y: 30, z: 40 };<br/>Object.defineProperty(ob, "x", { enumerable: false });</span><span id="c5f1" class="lk ll in lb b gy nr ln l lo lp">console.log(Object.keys(ob)); // ['y', 'z']<br/>console.log(Object.assign({}, ob)); // { y: 30, z: 40 }<br/>console.log({ ...ob }); // { y: 30, z: 40 }<br/>for (const key in ob) {<br/>  console.log(key); // y z<br/>}</span></pre><h1 id="0dda" class="me ll in bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">数据描述符属性</h1><p id="8d65" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">数据描述符有两个名为<code class="fe ky kz la lb b">value</code>和<code class="fe ky kz la lb b">writable</code>的属性。让我们来探索它们。</p><h2 id="f693" class="lk ll in bd mf ng nh dn mj ni nj dp mn kl nk nl mr kp nm nn mv kt no np mz nq bi translated">价值</h2><p id="b91c" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">它设置属性的值。如果没有提供，则默认为<code class="fe ky kz la lb b">undefined</code>。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="2e29" class="lk ll in lb b gy lm ln l lo lp">const ob = { x: 20 };<br/>Object.defineProperty(ob, "x", { value: 40 });<br/>Object.defineProperty(ob, "y", { value: 55 });<br/>console.log(ob); // { x: 40, y: 55 }</span></pre><h2 id="d923" class="lk ll in bd mf ng nh dn mj ni nj dp mn kl nk nl mr kp nm nn mv kt no np mz nq bi translated">可写的</h2><p id="a997" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">它指示属性值是否可以使用赋值运算符(=)进行更改。如果没有设置，默认为<code class="fe ky kz la lb b">false</code>。如果设置为<code class="fe ky kz la lb b">false</code>，属性值不能使用赋值操作符更改，但仍可使用<code class="fe ky kz la lb b">defineProperty()</code>方法更改。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="a9e2" class="lk ll in lb b gy lm ln l lo lp">const ob = { x: 20 };<br/>Object.defineProperty(ob, "x", { writable: false });<br/>ob.x = 100;<br/>console.log(ob.x); // 20<br/>Object.defineProperty(ob, "x", { value: 55 });<br/>console.log(ob.x); // 55</span></pre><blockquote class="ns nt nu"><p id="26c2" class="ka kb nv kc b kd ke kf kg kh ki kj kk nw km kn ko nx kq kr ks ny ku kv kw kx ig bi translated">如果在创建对象时或通过点/括号符号添加了任何属性，那么可配置、可枚举和可写的默认值将被设置为<code class="fe ky kz la lb b">true</code>。</p></blockquote><h1 id="2bd0" class="me ll in bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">访问者描述符属性</h1><p id="3e92" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">访问器描述符还有两个名为<code class="fe ky kz la lb b">get</code>和<code class="fe ky kz la lb b">set</code>的属性。让我们来探索它们。</p><h2 id="d40e" class="lk ll in bd mf ng nh dn mj ni nj dp mn kl nk nl mr kp nm nn mv kt no np mz nq bi translated">得到</h2><p id="584d" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">它用于创建一个getter函数。默认值为<code class="fe ky kz la lb b">undefined</code>。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="0135" class="lk ll in lb b gy lm ln l lo lp">const ob = { x: 10 };<br/>Object.defineProperty(ob, "x2", {<br/>  get: function () {<br/>    return this.x ** 2;<br/>  },<br/>});</span><span id="7018" class="lk ll in lb b gy nr ln l lo lp">console.log(ob.x2); // 100</span></pre><h2 id="36d3" class="lk ll in bd mf ng nh dn mj ni nj dp mn kl nk nl mr kp nm nn mv kt no np mz nq bi translated">设置</h2><p id="1134" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">它用于创建setter函数。默认值是<code class="fe ky kz la lb b">undefined</code>。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="43a6" class="lk ll in lb b gy lm ln l lo lp">const ob = {};<br/>Object.defineProperty(ob, "x", {<br/>  get: function () {<br/>    return this._x;<br/>  },<br/>  set: function(value) {<br/>    this._x = value;<br/>  }<br/>});</span><span id="44fb" class="lk ll in lb b gy nr ln l lo lp">console.log(ob.x); // undefined<br/>ob.x = 99;<br/>console.log(ob.x); // 99</span></pre><p id="c2f5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们混合了数据和访问器描述符属性，它会抛出一个错误。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="de85" class="lk ll in lb b gy lm ln l lo lp">const ob = {};<br/>Object.defineProperty(ob, "x", {<br/>  value: 20,<br/>  get: function () {<br/>    return this._x;<br/>  }<br/>});</span><span id="7be5" class="lk ll in lb b gy nr ln l lo lp">// TypeError: Invalid property descriptor. <br/>// Cannot both specify accessors and a value or writable attribute</span></pre><blockquote class="ns nt nu"><p id="ab6b" class="ka kb nv kc b kd ke kf kg kh ki kj kk nw km kn ko nx kq kr ks ny ku kv kw kx ig bi translated">如果在<code class="fe ky kz la lb b">defineProperty()</code>方法中没有提到数据和访问器属性，那么默认情况下该属性被视为数据属性。</p></blockquote><p id="f401" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">到目前为止，我们已经讨论了如何设置属性描述符。现在让我们看看如何查看任何属性的描述符。</p><h1 id="1703" class="me ll in bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">object . getownpropertydescriptor()方法</h1><p id="7715" class="pw-post-body-paragraph ka kb in kc b kd nb kf kg kh nc kj kk kl nd kn ko kp ne kr ks kt nf kv kw kx ig bi translated">该方法将对象及其属性名作为参数，并返回各自的属性描述符对象。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="9f22" class="lk ll in lb b gy lm ln l lo lp">const ob = { x: 20 };<br/>console.log(Object.getOwnPropertyDescriptor(ob, "x"));<br/>/*<br/>{<br/>  configurable: true,<br/>  enumerable: true,<br/>  value: 20,<br/>  writable: true<br/>}<br/>*/<br/>ob.y = 30;<br/>console.log(Object.getOwnPropertyDescriptor(ob, "y"));<br/>/*<br/>{<br/>  configurable: true,<br/>  enumerable: true,<br/>  value: 30,<br/>  writable: true<br/>}<br/>*/<br/>Object.defineProperty(ob, "z", {<br/>  value: 40,<br/>  writable: true,<br/>});<br/>console.log(Object.getOwnPropertyDescriptor(ob, "z"));<br/>/*<br/>{<br/>  configurable: false,<br/>  enumerable: false,<br/>  value: 40,<br/>  writable: true<br/>}<br/>*/</span></pre></div><div class="ab cl nz oa hr ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ig ih ii ij ik"><h1 id="7938" class="me ll in bd mf mg og mi mj mk oh mm mn mo oi mq mr ms oj mu mv mw ok my mz na bi translated">你可能也喜欢</h1><ul class=""><li id="6538" class="lq lr in kc b kd nb kh nc kl ol kp om kt on kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/map-in-javascript-and-how-it-is-better-than-object/" rel="noopener ugc nofollow" target="_blank">JavaScript中的地图以及它如何优于Object </a></li><li id="d82d" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/javascript-set-object-to-store-unique-values/" rel="noopener ugc nofollow" target="_blank"> JavaScript设置对象存储唯一值</a></li><li id="5eab" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/different-ways-to-check-if-a-key-exists-in-an-object/" rel="noopener ugc nofollow" target="_blank">JavaScript中检查对象中是否存在键的不同方法</a></li><li id="01ef" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated">【Object.freeze()、Object.seal()和Object.preventExtensions( )的区别</li><li id="f91c" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/generator-functions-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的生成器函数</a></li><li id="5458" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/a-brief-guide-to-promises-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中承诺的简要指南</a></li><li id="2dc2" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/the-vibration-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的震动API</a></li><li id="5718" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/javascript-fetch-api-to-make-http-requests/" rel="noopener ugc nofollow" target="_blank"> JavaScript获取API进行HTTP请求</a></li><li id="1e15" class="lq lr in kc b kd lz kh ma kl mb kp mc kt md kx lv lw lx ly bi translated"><a class="ae jz" href="https://jscurious.com/20-javascript-shorthand-techniques-that-will-save-your-time/" rel="noopener ugc nofollow" target="_blank"> 20+ JavaScript速记编码技巧</a></li></ul></div><div class="ab cl nz oa hr ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ig ih ii ij ik"><p id="6eb7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nv">感谢您的时间:)</em> <br/> <strong class="kc io"> <em class="nv">阿米塔夫·米什拉</em> </strong></p></div><div class="ab cl nz oa hr ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ig ih ii ij ik"><p id="9972" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nv">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nv">plain English . io</em></strong></a><em class="nv">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nv">免费周报</em> </strong> </a> <em class="nv">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nv">Twitter</em></strong></a><em class="nv">和</em><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nv">LinkedIn</em></strong></a><em class="nv">。查看我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nv">社区不和谐</em> </strong> </a> <em class="nv">加入我们的</em> <a class="ae jz" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nv">人才集体</em> </strong> </a> <em class="nv">。</em></p></div></div>    
</body>
</html>