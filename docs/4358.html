<html>
<head>
<title>How to Count the Number of Lines of Text Inside a DOM Element with JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript计算一个DOM元素内部的文本行数？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-count-the-number-of-lines-of-text-inside-a-dom-element-with-javascript-1189021bcad3?source=collection_archive---------3-----------------------#2022-11-24">https://javascript.plainenglish.io/how-to-count-the-number-of-lines-of-text-inside-a-dom-element-with-javascript-1189021bcad3?source=collection_archive---------3-----------------------#2022-11-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/35d29551ea647f5d67b138acc17a1793.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CA2Mt4tpSHEQWHuL"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ridham?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ridham Nagralawala</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a771" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们想用JavaScript计算DOM元素中的文本行数。</p><p id="f19a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用JavaScript计算DOM元素中的文本行数。</p><h1 id="c8b2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将元素的高度除以其行高</h1><p id="58b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了得到一个元素中的行数，我们可以用元素的高度除以它的行高。</p><p id="0282" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有下面的HTML:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ce4b" class="mn lc iq mj b gy mo mp l mq mr">&lt;div style="line-height: 20px"&gt;<br/>  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tristique nec magna non faucibus. Cras ut mi dignissim, tristique elit at, porta lorem. Pellentesque et odio sed enim commodo commodo in sit amet nunc. Phasellus eu tempus felis, id aliquet leo. Curabitur mollis mauris non dui ornare,<br/>&lt;/div&gt;</span></pre><p id="f339" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写下来进行计算:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="956f" class="mn lc iq mj b gy mo mp l mq mr">const el = document.querySelector('div');<br/>const divHeight = +el.offsetHeight<br/>const lineHeight = +el.style.lineHeight.replace('px', '');<br/>const lines = divHeight / lineHeight;<br/>console.log(lines);</span></pre><p id="568f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须像在HTML中一样用CSS <code class="fe ms mt mu mj b">line-height</code>属性显式设置行高。</p><p id="8bd7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe ms mt mu mj b">document.querySelector</code>选择div。</p><p id="01ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们通过使用<code class="fe ms mt mu mj b">offsetHeight</code>属性获得div的高度。</p><p id="4c6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到带有<code class="fe ms mt mu mj b">el.style.lineHeight</code>属性的<code class="fe ms mt mu mj b">lineHeight</code>，我们移除<code class="fe ms mt mu mj b">'px'</code>，这样我们就可以将字符串转换成带有<code class="fe ms mt mu mj b">+</code>的数字。</p><p id="76af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们用<code class="fe ms mt mu mj b">divHeight</code>除以<code class="fe ms mt mu mj b">lineHeight</code>得到div中的行数。</p><h1 id="d514" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="72f2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了得到一个元素中的行数，我们可以用元素的高度除以它的行高。</p><p id="3884" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mv">更多内容看</em> <a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">说白了。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">免费周报</em> </strong> </a> <em class="mv">。关注我们上</em> <a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">推特</em> </strong> </a>，<a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mv">LinkedIn</em></strong></a><strong class="kf ir"><em class="mv">，</em></strong><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mv">YouTube</em></strong></a><strong class="kf ir"><em class="mv">，</em> </strong> <em class="mv">和<a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">不和</em> </strong> </a></em> </strong> <em class="mv">对成长黑客感兴趣？检查出</em> </a><a class="ae kc" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">电路</em> </strong> </a> <strong class="kf ir"> <em class="mv">。</em>T76】</strong></p></div></div>    
</body>
</html>