<html>
<head>
<title>How to Create the Typewriter Animation Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用JavaScript创建打字机动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-the-typewriter-animation-using-javascript-9e1524ebf690?source=collection_archive---------11-----------------------#2022-06-10">https://javascript.plainenglish.io/how-to-create-the-typewriter-animation-using-javascript-9e1524ebf690?source=collection_archive---------11-----------------------#2022-06-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f825" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用JavaScript创建打字机动画的教程</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/5b9085f021656e05dea60034530df880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aFvCIHSBwpoXMfUrMEuAIw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://www.pexels.com/@pixabay/" rel="noopener ugc nofollow" target="_blank">Pixabay</a> on <a class="ae ks" href="https://www.pexels.com/photo/black-vintage-typewriter-163084/" rel="noopener ugc nofollow" target="_blank">pexels</a></figcaption></figure><p id="f14d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这篇博客中，我们将讨论如何用JavaScript创建打字机动画。下面你会看到我们将要创造的动画。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/8f25c594e79faba3dd88cfde459ed93e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Tku7RMiyycaZrPBZcErXkA.gif"/></div></figure><p id="1592" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在开始之前，我们必须创建一个<code class="fe lq lr ls lt b">index.html</code>文件。我还创建了一个包含一些基本样式的<code class="fe lq lr ls lt b">styles.css</code>文件。下面你可以找到<code class="fe lq lr ls lt b">index.html</code>和<code class="fe lq lr ls lt b">styles.css</code>的代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="b710" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们可以开始为打字机动画编写代码了。我们将首先创建两个文件:<code class="fe lq lr ls lt b">typewriter.js</code>和<code class="fe lq lr ls lt b">index.js</code>。<code class="fe lq lr ls lt b">index.js</code>将负责初始化typewriter对象，并在DOM上显示动画。<code class="fe lq lr ls lt b">typewriter.js</code>文件将保存与打字机动画相关的所有逻辑，并将是这个博客的主要焦点。考虑到这一点，我们可以开始为打字机的逻辑编码。</p><p id="f95e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我将把下一部分分成许多部分，详细介绍每一步。如果你想看完整的代码，请滚动到这一部分的末尾。</p><p id="5268" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们从类属性和构造函数开始。可以看出，这个类有许多属性。它有一个<code class="fe lq lr ls lt b">state</code>对象，该对象保存关于当前在DOM上显示的内容状态的重要信息。它有一个<code class="fe lq lr ls lt b">options</code>对象，该对象保存关于应该显示什么以及如何显示的信息。最后，它有一个<code class="fe lq lr ls lt b">nextStep</code>属性，是指向其他类函数的指针。下面我将详细介绍每个属性，并描述它们所代表的含义。</p><p id="224e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">注意:选项是初始化期间唯一可以指定的属性。</p><pre class="kd ke kf kg gt lw lt lx ly aw lz bi"><span id="e6bc" class="ma mb in lt b gy mc md l me mf">options</span><span id="c9e5" class="ma mb in lt b gy mg md l me mf">texts: a string array. Each element will be the text we want to print out on the DOM.</span><span id="2d8d" class="ma mb in lt b gy mg md l me mf">element: this should be a valid HTML element. This element will be the parent element to which the typewriter will write to.<br/>typingSpeed: integer value representing the wait time, in milliseconds, of appending a new character to the DOM.</span><span id="d358" class="ma mb in lt b gy mg md l me mf">deletingSpeed: integer value representing the wait time, in milliseconds, of deleting the last character on the DOM.</span><span id="8815" class="ma mb in lt b gy mg md l me mf">waitDurationBeforeDeleting: integer value representing the wait time, in milliseconds, before beginning to delete the text printed on the DOM.</span><span id="a279" class="ma mb in lt b gy mg md l me mf">nextStep: This attribute will be pointer to either the type(text) or delete(text) function. We will use this attribute to keep track of what should happen next. On initialization, this attribute is set to type. Once the first word has been fully typed, it will be set to delete. We will cover this logic later when we cover the determineNextStep(text) function.</span><span id="1e78" class="ma mb in lt b gy mg md l me mf">state</span><span id="37c5" class="ma mb in lt b gy mg md l me mf">currentText: string value representing the current text as it is displayed on the DOM.</span><span id="67a9" class="ma mb in lt b gy mg md l me mf">index: integer value representing the index of the text we are currently interacting with in the options.texts array. We will use this value to keep track of what is currently being printed.</span><span id="5ee1" class="ma mb in lt b gy mg md l me mf">isDeleting: boolean value representing if we are currently deleting or typing.</span><span id="52bb" class="ma mb in lt b gy mg md l me mf">timeoutDuration: integer value used to determine the wait time before the next action. If we are typing it should be set to options.typingSpeed. If we are deleting it should be set to options.deletingSpeed. And if we finished typing it should be set to options.waitDurationBeforeDeleting. On initialization the typewriter object will begin typing, thus this value must match options.typingSpeed. This can be seen in the class constructor.</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="0fd3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，我们可以介绍类方法。我们将从<code class="fe lq lr ls lt b">start()</code>函数开始。逐行分析，<code class="fe lq lr ls lt b">start()</code>函数的逻辑如下。我们首先从<code class="fe lq lr ls lt b">options.texts</code>数组中确定我们当前正在交互的文本。然后我们完成<code class="fe lq lr ls lt b">nextStep</code>(记住，<code class="fe lq lr ls lt b">nextStep()</code>要么是<code class="fe lq lr ls lt b">type(text)</code>要么是<code class="fe lq lr ls lt b">delete(text)</code>)。一旦<code class="fe lq lr ls lt b">nextStep()</code>完成，我们就更新DOM上的内容。最后，在等待指定的<code class="fe lq lr ls lt b">timeoutDuration</code>(将是以下值之一:<code class="fe lq lr ls lt b">options.typingSpeed</code>、<code class="fe lq lr ls lt b">options.deletingSpeed</code>或<code class="fe lq lr ls lt b">options.waitDurationBeforeDeleting</code>)后，再次调用<code class="fe lq lr ls lt b">start()</code>函数。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="baf4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，我们可以讨论一下<code class="fe lq lr ls lt b">type(text)</code>和<code class="fe lq lr ls lt b">delete(text)</code>功能。这两种功能非常相似。它们接受一个代表<code class="fe lq lr ls lt b">text</code>的<code class="fe lq lr ls lt b">text</code>参数，这个参数来自<code class="fe lq lr ls lt b">options.texts</code>数组，我们目前正在与之交互。从那里，它根据DOM上当前显示的内容更新<code class="fe lq lr ls lt b">state.currentText</code>(根据我们是键入还是删除，是+1字符还是-1字符)。更新<code class="fe lq lr ls lt b">state.currentText</code>后，运行<code class="fe lq lr ls lt b">determineNextStep(text)</code>功能。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="106d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个<code class="fe lq lr ls lt b">determineNextStep(text)</code>功能决定了我们刚刚完成了哪一步，下一步应该做什么动作。打字机可以采取四种可能的行动。</p><ol class=""><li id="7858" class="mh mi in kv b kw kx kz la lc mj lg mk lk ml lo mm mn mo mp bi translated">如果执行的最后一个动作是键入，并且当前文本等于完整的所需文本，那么下一个动作应该是删除屏幕上的文本。</li><li id="f52c" class="mh mi in kv b kw mq kz mr lc ms lg mt lk mu lo mm mn mo mp bi translated">如果执行的最后一个操作是删除，并且当前文本被完全删除，那么下一个操作应该是开始键入options.texts中的下一个文本</li><li id="2896" class="mh mi in kv b kw mq kz mr lc ms lg mt lk mu lo mm mn mo mp bi translated">如果我们当前正在删除并且尚未完全删除当前文本，那么下一步操作应该是继续删除。</li><li id="518b" class="mh mi in kv b kw mq kz mr lc ms lg mt lk mu lo mm mn mo mp bi translated">如果我们当前正在键入，并且还没有完全键入所需的文本，那么下一个动作应该是继续键入。</li></ol><p id="e7b9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面你会看到<code class="fe lq lr ls lt b">determineNextStep(text)</code>的代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="9e24" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">综合所有这些，打字机类应该是这样的:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="2581" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，我们必须初始化<code class="fe lq lr ls lt b">index.js</code>中的打字机对象，这可以用下面的代码来完成。在这里，我们指定了想要显示的文本，以及打字机将更新的元素。因为我没有指定typingSpeed、deletingSpeed或waitDurationBeforeDeleting，所以将使用默认值。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lu lv l"/></div></figure></div><div class="ab cl mv mw hr mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ig ih ii ij ik"><p id="cc23" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就结束了如何创建打字机动画。如果你觉得这有帮助，考虑订阅。下次见，编码快乐！</p><p id="e554" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nc">更多内容尽在</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nc">说白了. io </em> </strong> </a> <em class="nc">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nc">免费周报</em> </strong> </a> <em class="nc">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nc">推特</em> </strong> </a> <em class="nc">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nc">LinkedIn</em></strong></a><em class="nc">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nc">社区不和谐</em> </strong> </a> <em class="nc">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nc">人才集体</em> </strong> </a> <em class="nc">。</em></p></div></div>    
</body>
</html>