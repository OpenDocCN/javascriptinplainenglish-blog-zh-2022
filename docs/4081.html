<html>
<head>
<title>How to Fix the “Cannot Read Property ‘0’ of Undefined” Error in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复JavaScript中的“无法读取未定义的属性“0”错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-cannot-read-property-0-of-undefined-22d41b4e6f12?source=collection_archive---------1-----------------------#2022-10-24">https://javascript.plainenglish.io/javascript-cannot-read-property-0-of-undefined-22d41b4e6f12?source=collection_archive---------1-----------------------#2022-10-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0895" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解JavaScript中的“无法读取未定义的属性“0”错误以及如何轻松修复它。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7340a7bf767d8960c2ddda1532712a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PAtMgBd5Eh9rZPXjeDVszQ.png"/></div></div></figure><p id="03fd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当您尝试访问类似数组的变量的<code class="fe lk ll lm ln b">0</code>索引时，出现“无法读取undefined的属性‘0’”错误，但该变量却是<code class="fe lk ll lm ln b">undefined</code>。要解决这个问题，您可以在访问索引之前将变量初始化为正确数据类型的值。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/dcec7e1fc2cdff3a7f1b22fdd10c55a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/0*85XpfXz25J87Wk-_.png"/></div></figure><p id="8129" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">根据您的情况，您可以通过执行下列操作之一来解决该错误:</p><ol class=""><li id="7c02" class="lp lq in kq b kr ks ku kv kx lr lb ls lf lt lj lu lv lw lx bi translated">为变量提供定义的回退值。</li><li id="ea6b" class="lp lq in kq b kr ly ku lz kx ma lb mb lf mc lj lu lv lw lx bi translated">确保变量已经初始化。</li><li id="ae72" class="lp lq in kq b kr ly ku lz kx ma lb mb lf mc lj lu lv lw lx bi translated">如果访问嵌套数组的索引，检查外部数组是否都不是<code class="fe lk ll lm ln b">undefined</code>。</li></ol><p id="98c7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们将在本文中触及这三种解决方案。</p><h1 id="e493" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">1.提供定义的回退值</h1><p id="59b9" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">我们可以修复JavaScript中的“无法读取未定义的属性' 0 '”错误，方法是在特定索引处访问变量之前给变量一个回退值。当访问可能返回值为<code class="fe lk ll lm ln b">undefined</code>的对象的数组属性时，这种解决方案是有益的。</p><p id="ea77" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们可以用<a class="ae na" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">零合并操作符</a> ( <code class="fe lk ll lm ln b">??</code>)提供一个回退值:</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="e901" class="nf me in ln b gy ng nh l ni nj">// 👇 Initialize to empty array if undefined<br/>const books = library.books ?? [];</span><span id="c264" class="nf me in ln b gy nk nh l ni nj">const firstBook = books[0];</span><span id="988f" class="nf me in ln b gy nk nh l ni nj">console.log(library.books); // undefined</span><span id="440c" class="nf me in ln b gy nk nh l ni nj">console.log(firstBook); // undefined</span><span id="befb" class="nf me in ln b gy nk nh l ni nj">// Initialize to empty string if undefined<br/>const content = firstBook ?? '';</span><span id="6ad4" class="nf me in ln b gy nk nh l ni nj">console.log(content); // '' (empty string)</span></pre><p id="d144" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果不是<code class="fe lk ll lm ln b">null</code>或<code class="fe lk ll lm ln b">undefined</code>，nullish合并运算符(<code class="fe lk ll lm ln b">??</code>)将返回其左侧的值。如果是，那么<code class="fe lk ll lm ln b">??</code>返回它右边的值。</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="aed3" class="nf me in ln b gy ng nh l ni nj">console.log(2 ?? 5); <em class="nl">// 2</em><br/>console.log(undefined ?? 5); <em class="nl">// 5</em></span></pre><p id="ff97" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们可以用<a class="ae na" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">逻辑或</a> ( <code class="fe lk ll lm ln b">||</code>)运算符来代替<code class="fe lk ll lm ln b">??</code>:</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="9110" class="nf me in ln b gy ng nh l ni nj">console.log(2 || 5); // 2<br/>console.log(undefined || 5); // 5</span></pre><h1 id="97a7" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">2.确保变量初始化</h1><p id="de92" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">当您访问未初始化的变量的<code class="fe lk ll lm ln b">0</code>索引时，将出现JavaScript中的“无法读取未定义的属性‘0’”错误。JavaScript中未初始化的变量的<code class="fe lk ll lm ln b">default</code>值为<code class="fe lk ll lm ln b">undefined</code>。</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="3827" class="nf me in ln b gy ng nh l ni nj">let arr;</span><span id="6228" class="nf me in ln b gy nk nh l ni nj">console.log(arr); // undefined</span><span id="a02e" class="nf me in ln b gy nk nh l ni nj">// ❌ Cannot read properties of undefined (reading '0')<br/>console.log(arr[0]);</span><span id="ebe7" class="nf me in ln b gy nk nh l ni nj">const str;</span><span id="1707" class="nf me in ln b gy nk nh l ni nj">// ❌ Cannot read properties of undefined (reading '0')<br/>console.log(str[0]);</span></pre><p id="fddf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这种情况下修复错误很容易；只需将变量设置为一个值，例如，数组为空数组(<code class="fe lk ll lm ln b">[]</code>)，字符串为空字符串(<code class="fe lk ll lm ln b">''</code>)，等等。</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="0982" class="nf me in ln b gy ng nh l ni nj">let arr = [];</span><span id="500d" class="nf me in ln b gy nk nh l ni nj">console.log(arr); // []</span><span id="0448" class="nf me in ln b gy nk nh l ni nj">// ✅ No error<br/>console.log(arr[0]); // undefined</span><span id="be92" class="nf me in ln b gy nk nh l ni nj">const str = '';</span><span id="301c" class="nf me in ln b gy nk nh l ni nj">// ✅ No error<br/>console.log(str[0]); // undefined</span></pre><h1 id="dde4" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">3.检查<code class="fe lk ll lm ln b">undefined</code>的外部阵列</h1><p id="4c91" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">访问嵌套数组中的<code class="fe lk ll lm ln b">0</code>索引时，也会出现“无法读取undefined的属性‘0’”错误。</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="1e81" class="nf me in ln b gy ng nh l ni nj">const arr = [[1, 2, 3]];</span><span id="a7ba" class="nf me in ln b gy nk nh l ni nj">// ❌ Cannot read properties of undefined (reading '0')<br/>console.log(arr[1][0]);</span></pre><p id="1452" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里的数组只包含一个元素，所以访问<code class="fe lk ll lm ln b">1</code>索引会返回<code class="fe lk ll lm ln b">undefined</code>。访问<code class="fe lk ll lm ln b">undefined</code>上的<code class="fe lk ll lm ln b">0</code>索引会导致错误。</p><p id="8403" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">可选的链接运算符是防止这种错误的简洁方法:</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="4ef2" class="nf me in ln b gy ng nh l ni nj">const arr = [[1, 2, 3]];</span><span id="8a3c" class="nf me in ln b gy nk nh l ni nj">// ✅ No error<br/>console.log(arr?.[1]?.[0]); // undefined</span></pre><p id="e043" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于nullish值(<code class="fe lk ll lm ln b">undefined</code>或<code class="fe lk ll lm ln b">null</code>),<a class="ae na" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank">可选链接操作符</a> ( <code class="fe lk ll lm ln b">?.</code>)返回<code class="fe lk ll lm ln b">undefined</code>，而不是尝试访问属性并导致错误。</p><p id="4716" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">由于外部数组的<code class="fe lk ll lm ln b">1</code>索引返回了<code class="fe lk ll lm ln b">undefined</code>，可选的链接操作符将阻止属性访问。</p><p id="cc70" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果值不是nullish，那么<code class="fe lk ll lm ln b">?.</code>操作符将执行属性访问:</p><pre class="kd ke kf kg gt nb ln nc nd aw ne bi"><span id="8c30" class="nf me in ln b gy ng nh l ni nj">const words = [['javascript']];</span><span id="3683" class="nf me in ln b gy nk nh l ni nj">console.log(words?.[0]?.[0]); // javascript</span><span id="7a02" class="nf me in ln b gy nk nh l ni nj">console.log(words?.[0]?.[0]?.[0]); // j</span></pre></div><div class="ab cl nm nn hr no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ig ih ii ij ik"><p id="3f2d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nl">最初发表于</em><a class="ae na" href="https://cbdev.link/12b4b2" rel="noopener ugc nofollow" target="_blank"><em class="nl">codingbeautydev.com</em></a></p><h1 id="0300" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae na" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>