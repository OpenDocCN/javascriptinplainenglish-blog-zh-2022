<html>
<head>
<title>6 Secrets about “null” and “undefined” that You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的关于“空”和“未定义”的6个秘密</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6-secrets-about-null-and-undefined-that-you-should-know-bf759ab59bce?source=collection_archive---------2-----------------------#2022-08-16">https://javascript.plainenglish.io/6-secrets-about-null-and-undefined-that-you-should-know-bf759ab59bce?source=collection_archive---------2-----------------------#2022-08-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0e9d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">也许我们根本不知道“空”和“未定义”</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c11c282e7862307cb087f30edf35e8cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2S4IB2NuO-TRX5cK"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@stevetsang?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Steve Tsang</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="79bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">对于</strong><code class="fe ls lt lu lv b"><strong class="ky ir">null</strong></code><strong class="ky ir"/><code class="fe ls lt lu lv b"><strong class="ky ir">undefined</strong></code><strong class="ky ir">的一切我都不知道，我感到很惭愧，虽然我已经工作很多年了。</strong></p><p id="9eae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你和我一样困惑，这篇文章会告诉你一切。</p><h1 id="2a75" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">每个人都知道的基础知识</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/636008d9fb604aed08058684b968c5c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-WVTEprPNAuQmmm2.png"/></div></div></figure><p id="7f53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一张非常有趣的图片，也许它表达了<code class="fe ls lt lu lv b">null</code>和<code class="fe ls lt lu lv b">undefined</code>的本质区别。</p><p id="dc27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">null</code>和<code class="fe ls lt lu lv b">undefined</code>都代表“空”，那么它们之间的主要区别是什么？</p><ol class=""><li id="eb16" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><code class="fe ls lt lu lv b">undefined</code>表示变量尚未定义。</li><li id="e9a9" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><code class="fe ls lt lu lv b">null</code>意味着变量被定义了，但是它没有指向内存中的任何对象。</li></ol><p id="8bac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是<code class="fe ls lt lu lv b">null</code>和<code class="fe ls lt lu lv b">undefined</code>最基本的区别，你一定很清楚。</p><h1 id="f795" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">1.为什么“typeof null”返回“object”？</h1><p id="da11" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated"><code class="fe ls lt lu lv b">null</code>和<code class="fe ls lt lu lv b">{}</code>不一样，不是数据的对象类型，但是<code class="fe ls lt lu lv b">typeof null</code>为什么会返回object？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="de28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">其实是JavaScript从设计之初就存在的bug，只是到现在都无法修复。</strong></p><p id="d5db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在JavaScript的初始版本中，所有值都存储在32位中。前3位表示数据类型的标记，其余的位是值。</p><p id="a053" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于所有对象，对象的前3位标记为000作为类型标记位。在早期版本的JavaScript中，null被认为是一个特殊的值，对应于C中的空指针。但是，JavaScript不像C中那样有指针，所以null意味着什么也没有或无效，并且由全0(32)表示。</p><p id="bba8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以每当JavaScript读取一个空值，前3位就把它当作一个对象类型，这就是为什么<code class="fe ls lt lu lv b">typeof null</code>返回‘object’。</p><h1 id="0780" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">2.为什么==和===给出不同的结果？</h1><p id="11d8" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">你知道为什么这段代码会给出完全不同的结果吗？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="9dc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ECMA在第11.9.3章清楚地告诉我们</p><ol class=""><li id="fd01" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">如果x为空，y未定义，则返回true。</li><li id="d5ec" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">如果x未定义，y为空，则返回true。</li></ol><h1 id="5c72" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">3.为什么null + 1和undefined + 1返回不同的结果？</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="bc66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这涉及到JavaScript中的隐式类型转换，在执行加法运算之前，它会尝试将表达式中的变量转换为数字类型。例如，' 1' + 1将得到11。</p><p id="09cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当null转换为数字时，它将转换为0。</p><p id="ba22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当undefined被转换为数字时，它被转换为NaN</p><h1 id="d036" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">4.为什么object . prototype . tostring . call(Null)输出'[object Null]'？</h1><p id="24fc" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">toString()是Object的原型方法。当我们调用这个方法时，它默认返回当前对象的[[Class]]。这是[对象Xxx]形式的内部属性，其中Xxx是对象的类型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="3176" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">5.为什么undefined可以被覆盖？</h1><p id="cc22" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">虽然我们不太可能写出这样的代码，但它确实符合所有的规范。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="a38e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript在全局环境中创建了一个只读的未定义变量，但并没有完全禁用局部未定义变量的定义。</p><p id="a01d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以你仍然可以在函数中声明一个未定义的变量，但是这是一个魔鬼，请停止这样做。</p><h1 id="8ab0" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">6.JSON.stringify为什么要删除带有未定义值的内容？</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="f7e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其实这篇文章没有什么好的解读方法。JSON.stringify去掉undefined对应的键，这是JSON自己的转换原则。</p><p id="7de8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有一次我因为不熟悉` JSON.stringify '的转换规则而吃了大亏，你可以点击这篇文章了解它的全部详情。</p><div class="nk nl gp gr nm nn"><a rel="noopener  ugc nofollow" target="_blank" href="/i-almost-lost-my-year-end-bonus-because-of-json-stringify-a715c54559bb"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">因为JSON.stringify我差点丢了年终奖金</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">多么悲伤的故事</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kp nn"/></div></div></a></div><h1 id="39e9" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">最后</h1><p id="ca8f" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated"><strong class="ky ir">感谢阅读。</strong>我期待<strong class="ky ir"> </strong>期待您的关注和阅读更多高质量的文章。</p><div class="nk nl gp gr nm nn"><a rel="noopener  ugc nofollow" target="_blank" href="/i-lost-a-job-opportunity-just-because-of-promise-all-be396f6efe87"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">“我失去了一个工作机会，只是因为承诺。所有”</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">一次让我好难过的面试经历。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nw l"><div class="oc l ny nz oa nw ob kp nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-what-happened-to-npm-run-xxx-cdcb37dbaf44"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">采访者:“npm跑xxx”怎么了？</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">一个大多数人都不知道的秘密。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nw l"><div class="od l ny nz oa nw ob kp nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-can-x-x-return-true-in-javascript-7e1d1fa7b5cd"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">面试官:可以“x！== x "在JavaScript中返回True？</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">你可能不知道的五个神奇的JavaScript知识点！</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nw l"><div class="oe l ny nz oa nw ob kp nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a rel="noopener  ugc nofollow" target="_blank" href="/its-2022-don-t-abuse-the-arrow-function-anymore-905862a9c668"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">现在是2022年，不要再滥用箭头功能了</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">不应该使用箭头函数的4种情况。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nw l"><div class="of l ny nz oa nw ob kp nn"/></div></div></a></div><p id="9766" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="og">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">plain English . io</em></strong></a><em class="og">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="og">免费周报</em> </strong> </a> <em class="og">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">LinkedIn</em></strong></a><em class="og"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">YouTube</em></strong></a><em class="og"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="og">不和</em> </strong> </a> <em class="og">。</em></p></div></div>    
</body>
</html>