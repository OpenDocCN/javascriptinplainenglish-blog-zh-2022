<html>
<head>
<title>JavaScript Promise vs JavaScript Observable — What is the Difference?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript Promise和JavaScript Observable——有什么区别？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-promise-vs-javascript-observable-what-is-the-difference-8d98987e8781?source=collection_archive---------1-----------------------#2022-04-02">https://javascript.plainenglish.io/javascript-promise-vs-javascript-observable-what-is-the-difference-8d98987e8781?source=collection_archive---------1-----------------------#2022-04-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f74a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解什么是JavaScript promise和JavaScript observable，知道它们的区别。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/2e1e41ae9ba2005c76b3e54357bab642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*D2s40Uu5etiq1RXV.jpg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">JavaScript promise vs JavaScript observable — what is the difference?</figcaption></figure><p id="f2cf" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您的应用程序所需的数据不会立即可用。这就是JavaScript promise vs JavaScript observable的由来。</p><p id="eb8d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">任何现代的应用程序总是需要有一种方式使<strong class="ku io"> <em class="lo">反应</em> </strong>。这意味着您的应用程序应该意识到来自用户操作的数据更改和更新，并以预期的方式做出反应。出于这个原因，有两种主要的方法来解决这个问题，因此，您可能认为需要在JavaScript promise和JavaScript observable之间做出决定。</p><p id="8280" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这篇简短的教程提示将为你解决这个争论。在本教程结束时，您将会警惕下一次遇到JavaScript promise vs JavaScript observable困境时如何继续。</p><p id="44e0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">首先，回答你的问题，JavaScript promise和JavaScript observable哪个更好用，答案也很简单。<strong class="ku io">这完全取决于你的预期用例</strong>。我可能打破了你的幻想，但有时，现实往往令人失望(<em class="lo">灭霸——疯狂的泰坦</em>)。所以，你现在应该考虑哪个<strong class="ku io">最适合你的用例</strong>，而不是JavaScript promise和JavaScript observable。</p><p id="b7ca" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我知道你在这里是为了清晰地讨论JavaScript承诺和JavaScript可观察性，但是请耐心等待。</p><p id="d04c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在，继续的最好方法是理解什么是JavaScript承诺，什么是JavaScript可观察。所以我们现在把思维模式从JavaScript promise vs JavaScript observable转移到它们各自是什么，这样就有可能在你应该使用哪个的时候做出正确的决定。</p><p id="167d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">但是我们将用非常简单明了的英语来做这件事——是的，用简单明了的英语来写JavaScript！让我们来回答这两个问题:</p><h2 id="423e" class="lp lq in bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">1.什么是承诺</h2><p id="d5e7" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">承诺就是把你自己放在那里，承诺一旦你有能力，你就会去做一些事情。</p><p id="4751" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">你也可以对自己承诺，一旦你开始健身，你就会停止吃垃圾食品。</p><h2 id="10a1" class="lp lq in bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">2.什么/谁是观察者</h2><p id="d84e" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">把观察者想象成观察变化的人，然后他们向必要的权威汇报。</p><p id="14d7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">你可以观察自己的体重，并在每次进出健身房时记下笔记，这样你就可以<strong class="ku io">关注</strong>自己的体重变化，从而计算出你的基础代谢率等。</p><p id="4a6c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">因此，在理解了什么是承诺和什么是观察者之后，现在让我们将上述理解直接映射到JavaScript反应式编程环境中。那么，让我们来看看:</p><h2 id="ede8" class="lp lq in bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">1.什么是JavaScript承诺</h2><p id="86a4" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">JavaScript promise是一个承诺声明，一旦数据可用，您将把它提供给<strong class="ku io">承诺方</strong>并结清该承诺的债务。<strong class="ku io">一旦债务结清，事情就结束了。这仅做一次。</strong></p><h2 id="3387" class="lp lq in bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">2.什么是JavaScript可观察值</h2><p id="b1bc" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">一个JavaScript observable就是每次数据可用时，你总是向<strong class="ku io">观察方提供数据。然而，您向<strong class="ku io">订阅方</strong>提供数据的能力将达到该方不再需要您的数据的程度。</strong></p><p id="5e4e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">因此，在理解了什么是JavaScript promise和什么是JavaScript observable之后，最好看看在哪里使用它们的示例用例，也许每个用例都有一个代码样本。</p><p id="bee0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在让我们看一些JavaScript promise vs JavaScript observable教程的例子。</p><h2 id="509d" class="lp lq in bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">JavaScript承诺的用例示例。</h2><p id="61c8" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">假设您想要登录到您的用户，<strong class="ku io">然后</strong>一旦用户登录，您将会用一个漂亮的通知消息来欢迎他们。我们可以用一个简单的承诺。</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="6e3c" class="lp lq in mo b gy ms mt l mu mv">/**<br/> * <br/> * @param email <br/> * @param password <br/> * <br/> * login user using their email and password <br/> */<br/>function loginUser(<br/>    email: string,<br/>    password: string<br/>) {<br/>    const resource = new Request(`https://your-backend-endpoint/login`)<br/>    const formData = new FormData();<br/>    formData.set('email', email);<br/>    formData.set('password', password);<br/>    return fetch(resource, {method: 'POST', mode: 'cors', body: formData}).then(<br/>        response =&gt; {<br/>            if (!response.ok) {<br/>                return Promise.reject('Invalid credentials!');<br/>            }<br/>            return response.json();<br/>        }<br/>    ).then(response =&gt; {<br/>        return Promise.resolve(response);<br/>    })<br/>}<br/><br/>/**<br/> * <br/> * @param email <br/> * @param password <br/> * <br/> * hypothetically, when the user clicks the login button, pass in the value for<br/> * email and password.<br/> */<br/>function doLogin(email: string, password: string) {<br/>    loginUser(email, password).then(res =&gt; {<br/>        alert(`Hi there ${res.fullName}`)<br/>    }).catch(err =&gt; {<br/>        alert('Oooops! Invalid credentials provided')<br/>    });<br/>}</span></pre><p id="6531" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在让我们看看JavaScript承诺与JavaScript可观察性讨论的下一个选项。</p><h2 id="1000" class="lp lq in bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">JavaScript可观察的用例示例</h2><p id="01e9" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">因此，一旦您上面的用户登录，那么让我们假设他们有一个部分，他们需要将当天的销售线索添加为电话号码，然后将这些显示在UI上。UI将<strong class="ku io">订阅</strong>输入的数字，然后更新以反映这些变化。</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="f56b" class="lp lq in mo b gy ms mt l mu mv">/**<br/> * This is a mock hypothetical component, and for this case, we are using Angular.<br/> * <br/> * This will give you a better understanding on how powerful JavaScript observables are.<br/> */<br/>@Component({<br/>    selector: 'app-leads-component'<br/>})<br/>export class LeadsComponent {<br/><br/>    /**<br/>     * A list of leads<br/>     */<br/>    private _myLeads: Array;<br/><br/>    /**<br/>     * A BehaviourSubject is an observable which is imported from RXJS.<br/>     * <br/>     * It makes it possible to populate your initial data, with something<br/>     * which you can present to the UI, and have it updated with time.<br/>     */<br/>    public myLeads$: BehaviourSubject&gt; = new BehaviourSubject&gt;([]);<br/><br/>    constructor(<br/>        private _yourBackendService: YourBackendService<br/>    ) {}<br/><br/>    /**<br/>     * when the component intialized<br/>     */<br/>    ngOnInit() {<br/>        this._listenForLeadsFromBackend();<br/>    }<br/><br/>    /**<br/>     * listen for the list of leads user currently has in their backend,<br/>     * and this will fetch the leads only once when the component is<br/>     * initialized.<br/>     * <br/>     * IF you want to have the event for new leads from the backend, then in<br/>     * that case, you will have to go the WebSocket way, which is out of the scope of this tutorial<br/>     */<br/>    private _listenForLeadsFromBackend(): void {<br/>        this._yourBackendService.getLeads().subscribe(<br/>            /**<br/>             * <br/>             * @param leads <br/>             * <br/>             * here, update the list of your leads with the received leads from the server<br/>             * then set the next value for myLeads$ to your _myLeads<br/>             */<br/>            (leads: Array) =&gt; {<br/>                this._myLeads = leads;<br/>                this.updateMyLeadsObservable();<br/>            }<br/>        )<br/>    }<br/><br/><br/>    /**<br/>     * <br/>     * @param number <br/>     * @param name <br/>     * <br/>     * add a lead number by inputting it and then updating on the UI all<br/>     * the leads<br/>     */<br/>    public addCustomerLeadNumber(number: string, name: string) {<br/>        this._myLeads.push(new Lead(number, name));<br/>        this.updateMyLeadsObservable();<br/>    }<br/><br/>    /**<br/>     * common method for updating my leads observable<br/>     */<br/>    public updateMyLeadsObservable(): void {<br/>        this.myLeads$.next(this._myLeads);<br/>    }<br/>}</span></pre><p id="f1c7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">显然，您可以看到JavaScript observable对于那些需要的反应式编程特性来说非常方便，尽管需要更多的代码。</p><p id="af36" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">所以，不要再想JavaScript promise vs JavaScript observable了，想想你的用例吧。</p><h2 id="fe93" class="lp lq in bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated">结论</h2><p id="184a" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">所以，你现在可以看到，这不是JavaScript承诺和JavaScript可观察性的问题，而是哪个最适合你的用例的问题。</p><p id="5f78" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">所以，下一次你想对你的代码进行反应式编程时，你现在可以轻松地在JavaScript promise或JavaScript observable之间进行选择。</p><p id="9703" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这篇简短的JavaScript promise vs JavaScript observable教程只是JavaScript promise和JavaScript observable惊人能力的表面现象。请随意探索，了解更多关于这些令人敬畏和干净的反应式编程方法。</p><p id="9259" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我知道你对JavaScript promise vs JavaScript observable这篇文章的看法。</p><p id="4cd8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">请随意与您的朋友分享这一点，并帮助他们解决JavaScript承诺与JavaScript可观察性之间的困境。</p><p id="171f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">嗯，直到下一篇！</p><p id="6b66" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io"> <em class="lo">快乐编码！</em>T15】</strong></p><p id="f04c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo">有兴趣学习</em><strong class="ku io"><em class="lo">JavaScript</em></strong><em class="lo">吗？在这里结帐类似的牛逼文章:</em> <a class="ae mw" href="https://bingeoncode.com/article/javascript/javascript%20promise%20vs%20javascript%20observable%20%E2%80%93%20what%20is%20the%20difference%3F#related-articles" rel="noopener ugc nofollow" target="_blank"> <em class="lo">相关文章</em> </a></p><p id="dbaf" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo">更多内容看</em> <a class="ae mw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="lo">说白了。报名参加我们的</em> <a class="ae mw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="lo">免费周报</em> </strong> </a> <em class="lo">。关注我们</em><a class="ae mw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="lo">Twitter</em></strong></a><em class="lo">和</em><a class="ae mw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="lo">LinkedIn</em></strong></a><em class="lo">。加入我们的</em> <a class="ae mw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="lo">社区</em> </strong> </a> <em class="lo">。</em></strong></a></p></div></div>    
</body>
</html>