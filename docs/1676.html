<html>
<head>
<title>Sneak-Peek at React Source Code for Their Type Definitions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">先睹为快React源代码的类型定义</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/sneak-peek-at-react-source-code-for-their-type-definitions-84dcfcc28f99?source=collection_archive---------15-----------------------#2022-04-11">https://javascript.plainenglish.io/sneak-peek-at-react-source-code-for-their-type-definitions-84dcfcc28f99?source=collection_archive---------15-----------------------#2022-04-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f031" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你知道这件事吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1634f320de7d4bb37d32bad2d45b8571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXnzSZgSDvRU0ThuBhd1SA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://unsplash.com/photos/P6Pcq1GJneE" rel="noopener ugc nofollow" target="_blank">Evillico</a> on <a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a3ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你有没有想过React是如何实现它们的类型的？就像你做<code class="fe ls lt lu lv b">React.FC</code>的时候<code class="fe ls lt lu lv b">FC</code>住在哪里？它是做什么的？</p><p id="99a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，让我们探索React类型的核心基础，我们将进入React源代码，或者实际上React源代码的类型，所以让我们开始。</p><h1 id="cf44" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">热身:</h1><p id="2c8e" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">当您安装React with TypeScript时，工具(如VS代码等。)将可以访问类型声明，例如，当你悬停在<code class="fe ls lt lu lv b">useState</code>上时，你会看到它接受什么参数，这都是因为在你的<code class="fe ls lt lu lv b">/node_modules</code>中的<code class="fe ls lt lu lv b">d@types/react/index.d.ts</code>的<code class="fe ls lt lu lv b">index.d.ts</code>文件中声明的类型。</p><h2 id="dd81" class="mt lx iq bd ly mu mv dn mc mw mx dp mg lf my mz mi lj na nb mk ln nc nd mm ne bi translated">打字稿事实:</h2><p id="baac" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">当你键入<code class="fe ls lt lu lv b">React.FC</code>时，你怎么能访问一个名为<code class="fe ls lt lu lv b">FC</code>的类型呢？</p><p id="56a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你不知道<code class="fe ls lt lu lv b">FC</code>代表<code class="fe ls lt lu lv b">functional component</code>并表明我们的react组件是一个功能组件。</p><p id="1898" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">那么回到我们如何访问类型。</strong></p><p id="66ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能知道我们可以创建这样一个类型:</p><pre class="kg kh ki kj gt nf lv ng nh aw ni bi"><span id="e9de" class="mt lx iq lv b gy nj nk l nl nm">type myType = {<br/>name: string;</span><span id="ad12" class="mt lx iq lv b gy nn nk l nl nm">}</span></pre><p id="40e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们可以像这样使用这个<code class="fe ls lt lu lv b">type alias</code>定义函数:</p><pre class="kg kh ki kj gt nf lv ng nh aw ni bi"><span id="fec0" class="mt lx iq lv b gy nj nk l nl nm">const App: FC&lt;myType&gt;= ({name}) =&gt; whatEver</span></pre><p id="0b17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是React不是这样定义的，它不是用类型别名定义的，而是用名称空间别名定义的。</p><p id="018e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">具体来说，它是这样定义的:</p><pre class="kg kh ki kj gt nf lv ng nh aw ni bi"><span id="72ec" class="mt lx iq lv b gy nj nk l nl nm"><em class="no">declare</em> namespace React {<br/>// types, interfaces etc...</span><span id="e5f4" class="mt lx iq lv b gy nn nk l nl nm">}</span></pre><p id="9acd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以因为所有的类型，接口等。是在一个名为React的命名空间中定义的，这个命名空间是导出的，我们可以通过React来访问类型、接口等等。“react”中的FC或{FC}。</p><p id="f8f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们深入了解一下index.d.ts文件。</p><h1 id="44a4" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">让我们看看index.d.ts文件</h1><p id="c542" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">所以如果我们去<code class="fe ls lt lu lv b">node_modules/@types/react/index.d.ts</code></p><p id="a1ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们在编辑器中打开文件时看到的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/590f48fa9bb0f4666312154c9c47c38d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2q6PHyMIKTMbpA5J6SJvFw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="e0b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们看到一堆评论和类型等等。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/7090d9dc03d78442df5a915cca3c9ffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3hGDZL48QyEldaHteY2fA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="d2a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，正如我们在第二张图中看到的，我们将React导出为一个名称空间。</p><p id="7cb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了保持在同一轨道上，让我们坚持<code class="fe ls lt lu lv b">FC</code>型并更深入地了解它，如果我们进入<code class="fe ls lt lu lv b">FC</code>型，这就是我们所看到的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/8f705c0e15879df691b1ff72dd987042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HmoUrXqTXFMwyQgdOU5bTA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="464c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以基本上它是<code class="fe ls lt lu lv b">FC</code>的类型别名，有一个泛型类型参数。</p><p id="8a84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在的<code class="fe ls lt lu lv b">FunctionComponent</code>是什么？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/ce8e8d6c044245a5954b5cf24c678142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0czSE0Utmxy_LtJ3ryNQw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="dcab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它是一个带有泛型类型参数的接口，有几种类型，正如我们看到的，它有一个函数可以返回任何<code class="fe ls lt lu lv b">ReactElement</code>或<code class="fe ls lt lu lv b">null</code>。你大概能知道那是干什么用的。😉</p><h2 id="1b38" class="mt lx iq bd ly mu mv dn mc mw mx dp mg lf my mz mi lj na nb mk ln nc nd mm ne bi translated">在我们的组件中</h2><p id="7198" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">现在，在我们的组件中，我们可以从<code class="fe ls lt lu lv b">namespace</code> React导入<code class="fe ls lt lu lv b">FC</code>，并像这样使用它:</p><pre class="kg kh ki kj gt nf lv ng nh aw ni bi"><span id="3971" class="mt lx iq lv b gy nj nk l nl nm">import {FC} from 'react'<br/>type props = {<br/>imAString: string;<br/>};</span><span id="6192" class="mt lx iq lv b gy nn nk l nl nm">const<em class="no"> App</em>:<em class="no"> FC</em>&lt;<em class="no">props</em>&gt;<em class="no"> </em>=<em class="no"> </em>(<em class="no">props</em>)<em class="no"> </em>=&gt;<em class="no"> </em>&lt;h1&gt;{<em class="no">props.imAString</em>}&lt;/h1&gt;;</span></pre><h2 id="1627" class="mt lx iq bd ly mu mv dn mc mw mx dp mg lf my mz mi lj na nb mk ln nc nd mm ne bi translated">结论:</h2><p id="17cd" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">研究源代码很有趣，但是。关于这一点还有很多要说的，而且这篇文章对于你阅读:D来说太长了</p><h2 id="0f93" class="mt lx iq bd ly mu mv dn mc mw mx dp mg lf my mz mi lj na nb mk ln nc nd mm ne bi translated">如果你喜欢这件作品，我希望你也会喜欢:</h2><div class="nt nu gp gr nv nw"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-learning-from-react-tutorials-that-suck-5e2031d9bdc7"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">停止从糟糕的React教程中学习</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">不受欢迎的观点</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://betterprogramming.pub/callbacks-vs-promises-vs-async-await-a-step-by-step-guide-f93d13447604" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">回调vs .承诺vs .异步Await:逐步指南</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">引擎盖下也有点。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">better编程. pub</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kp nw"/></div></div></a></div><p id="a6f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="no">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="no">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="no">免费周报</em> </strong> </a> <em class="no">。关注我们关于</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="no">推特</em> </strong> </a> <em class="no">和</em><em class="no"/></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="no">LinkedIn</em></strong></a><em class="no">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="no">社区</em> </strong> </a> <em class="no">。</em></p></div></div>    
</body>
</html>