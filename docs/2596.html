<html>
<head>
<title>How to Set Up FirebaseUI With Your React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React应用程序设置FirebaseUI</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/setting-up-firebase-ui-with-your-react-application-49ffa20f8168?source=collection_archive---------3-----------------------#2022-06-20">https://javascript.plainenglish.io/setting-up-firebase-ui-with-your-react-application-49ffa20f8168?source=collection_archive---------3-----------------------#2022-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8d1e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用React应用程序设置FirebaseUI的教程。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b483cb80cabd4a7c17b959ba60ebe7c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMEWao2fQlWXQhbw_PGofg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">FirebaseUI+React</figcaption></figure><p id="09f6" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果你不熟悉的话，Firebase是谷歌提供的一项服务，它可以让你更容易地处理后端，甚至完全消除对后端的需求(无服务器)。现在，由于Firebase UI，您甚至不需要为身份验证创建UI组件。到处都有几行代码，您不必管理表单、用户数据库等。</p><p id="b445" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">首先要做的是创建一个react项目，你当然可以在安装完成后移除所有不必要的脚手架。接下来，在Firebase控制台中创建一个Firebase项目，然后导航到该项目的设置页面，并通过单击add a new web app向Firebase项目添加一个web应用程序，这将为我们提供必要的身份验证凭据，您可以使用这些凭据将Firebase连接到react应用程序。复制凭证并简单地将它们粘贴到应用程序的<em class="lo"> App.js </em>文件中。</p><p id="7eae" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">建议尽早初始化Firebase。然后在Firebase项目中导航到authentication，然后单击sign-in method选项并启用一个提供者，您可以看到不同的选项。我们会去一个简单的电子邮件/密码认证。下面你可以添加授权域重定向，这主要是当你想使用第三方重定向。</p><p id="fc06" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">接下来是软件包的安装:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="bedc" class="lu lv in lq b gy lw lx l ly lz">npm install firebaseui firebase</span></pre><p id="517d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您需要的两个包是Firebase和FirebaseUI。出于代码分割和更好管理的目的，创建一个新文件，并将其命名为AuthGoogle.js(当然，您可以随意命名)。</p><p id="4cd9" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在这个文件中，我们需要一些导入。我们从“firebase/compat/app”导入Firebase。接下来，我们需要从FirebaseUI导入所有内容，因为没有默认导出。最后，我们引入了表单的CSS样式，这是由google通过从“firebaseui/dist/firebaseui.css”导入自动提供的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ma"><img src="../Images/5f299f44655ecbf898e244aa0e0206cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dcz0BRo1qXSkn4qAmxoryA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">How Imports in AuthGoogle.js file should look like</figcaption></figure><p id="54d3" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我们需要在useEffect钩子内部设置Firebase UI。这是因为Firebase会将屏幕上的一个元素作为安装Google身份验证UI的目标(您可能知道，这是一个副作用，因为它会导致DOM发生变化)。下图显示了用户界面应该如何设置:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mb"><img src="../Images/2118a0ef0da8180835efee07d50d607e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*311HrI6zhw0zbBRanu_QBA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Firebase ui set-up</figcaption></figure><p id="c61c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我们首先通过调用<code class="fe mc md me lq b">firebase.auth.AuthUI.getInstance()</code>来查看我们是否有一个现有的UI实例，如果它不存在，我们通过调用new <code class="fe mc md me lq b">firebase.auth. AuthUI(firebase.auth())</code>来创建一个新的Firebase实例。然后我们调用<code class="fe mc md me lq b">ui.start()</code>来实际安装UI。作为第一个参数，我们传递页面上目标元素的类，也就是页面上要安装表单的元素。确保您已经在页面上创建了具有该类名(通常作为div)的元素。</p><p id="8a98" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">注意:<code class="fe mc md me lq b">Firebase.auth()</code>初始化SDK的认证。</p><p id="dc4f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">作为第二个参数，我们传递一个对象，该对象包含UI的一些配置。我们在这里设置的第一个选项是“登录选项”。这是一个数组，包含我们希望添加到应用程序中的不同身份验证方法的对象。我们只需要电子邮件认证，因此，我们将提供者设置为<code class="fe mc md me lq b">firebase.auth.EmailAuthProvider.PROVIDER_ID</code>。第二，我们不显示注册时要求的姓名，因此，我们将<code class="fe mc md me lq b">requireDisplayName</code>设置为<code class="fe mc md me lq b">false</code>。主选项属性上的第二个属性是<code class="fe mc md me lq b">signInsuccessUrl</code>。这是成功认证后用户将被重定向到的URL。最后是隐私政策网址。还有许多其他选项可以探索，你可以在这里探索<a class="ae mf" href="https://github.com/firebase/firebaseui-web/blob/master/README.md#overwriting-the-sign-in-success-url" rel="noopener ugc nofollow" target="_blank"> Github链接到Firebase UI </a>。不要忘记将依赖数组添加到useEffect钩子中。</p><p id="637d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在回到App.js文件，我们引入了'<AuthGoogle/>'组件。</p><p id="1d70" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在出现的一个重要问题是，我们的应用程序如何知道用户是否被正确认证，以及我们如何获得用户的详细信息。嗯，我们可以用Google提供的方法<code class="fe mc md me lq b">onAuthStateChanged()</code>来实现，我们可以从<code class="fe mc md me lq b">import {onAuthStateChanged} from ‘firebase/auth</code>中得到这个方法。我们还在useEffect钩子中调用这个方法。作为第一个参数，它接受<code class="fe mc md me lq b">firebase.auth()</code>。作为第二个参数，接受一个回调函数，该函数接收一个用户对象，该对象包含关于用户的所有必要信息；如电子邮件、uid、电话号码等。您可以设置某种状态管理来存储您想要的信息，您还可以利用该状态来检查用户是否经过身份验证并进行适当的重定向。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mg"><img src="../Images/2b40a9c508876fb06bcf79e9b2217f5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TCghkQEi-L6wosUv6SST9Q.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">onAuthStateChanged</figcaption></figure><p id="6388" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">最后，我们如何实现注销？。所以我们可以简单地在认证页面中创建一个按钮，并传递给onClick一个调用<code class="fe mc md me lq b">firebase.auth().signOut()</code>的函数。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mh"><img src="../Images/f23b6cc48226d399ca8641c6cbc50c08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*-oCMrQbpucXEccoO_mKUIA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Implementation on Sign Out.</figcaption></figure><p id="e4bc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果你觉得这有帮助，你可以给我留点掌声。；)</p><p id="3211" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我也有一个YouTube视频解释了这一点。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="5766" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo">更多内容请看</em><a class="ae mf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="lo">plain English . io</em></strong></a><em class="lo">。报名参加我们的</em> <a class="ae mf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="lo">免费周报</em> </strong> </a> <em class="lo">。关注我们关于</em><a class="ae mf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="lo">Twitter</em></strong></a><em class="lo">和</em><a class="ae mf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="lo">LinkedIn</em></strong></a><em class="lo">。查看我们的</em> <a class="ae mf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="lo">社区不和谐</em> </strong> </a> <em class="lo">加入我们的</em> <a class="ae mf" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="lo">人才集体</em> </strong> </a> <em class="lo">。</em></p></div></div>    
</body>
</html>