<html>
<head>
<title>Introducing Server-Sent Event (SSE): An Open, Lightweight, Connection-less Push</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引入服务器发送事件(SSE):一个开放的、轻量级的、无连接的推送</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/server-sent-event-sse-an-open-lightweight-connection-less-push-b5407cce71e2?source=collection_archive---------14-----------------------#2022-03-15">https://javascript.plainenglish.io/server-sent-event-sse-an-open-lightweight-connection-less-push-b5407cce71e2?source=collection_archive---------14-----------------------#2022-03-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6ccc" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解什么是服务器发送的事件，它们的工作原理、特性和局限性。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7a76021895439a9251fe401a91b054d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VMzP98qyFBmwOSiu"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@prateekkatyal?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Prateek Katyal</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b526" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通常，客户端和服务器使用请求-响应模型进行通信。</p><p id="44d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">客户端根据需要向服务器发送请求。服务器处理请求并响应客户端。大多数情况下，这很有效。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lp"><img src="../Images/6ea5c5268c383614f312fa6966f9c949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d3vrabpHR9eY9cNOx7dDbQ.png"/></div></div></figure></div><div class="ab cl lq lr hr ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ig ih ii ij ik"><p id="52a8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们假设客户机不需要请求就想从服务器获得信息或通知。例如，客户端需要知道服务器上生成的实时更新。</p><p id="4574" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我们考虑将数据从服务器实时推送到客户端时，首先想到的是长轮询或WebSocket。Websockets支持多路双向通信。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lp"><img src="../Images/7715a98d17fac0fe8e9e1600403f0b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*paSSUTKwgCz8pzXVfeSAGw.png"/></div></div></figure><p id="378a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这里，您可以看到在初始握手之后，一个全双工持久性套接字连接被建立。如果我们需要的只是单向通信(从服务器到客户端)会怎样？在这种情况下，使用WebSocket将是大材小用</p></div><div class="ab cl lq lr hr ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ig ih ii ij ik"><p id="b3e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是SSE(服务器发送的事件)发挥作用的地方。</p><h1 id="ff4b" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">什么是服务器发送的事件(SSE)？</h1><p id="2d7d" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">SSE使服务器能够通过HTTP或使用专用的服务器推送协议将数据推送到网页。因此，使用SSE，来自基于文本的事件的数据可以有效地从服务器传输到客户端。</p><h2 id="41f5" class="mu ly in bd lz mv mw dn md mx my dp mh lc mz na mj lg nb nc ml lk nd ne mn nf bi translated">上交所工作</h2><p id="81c9" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> SSE </strong> </a>支持XHR流的实现，使其可以跨浏览器高效工作。当消息被传递时，它们通过单一的、持久的HTTP连接被发送。浏览器负责所有的连接管理和消息解析，让应用程序专注于其业务逻辑，而不是自己处理XHR流。SSE使实时数据管理变得简单。让我们仔细看看。</p><ol class=""><li id="640c" class="ng nh in kv b kw kx kz la lc ni lg nj lk nk lo nl nm nn no bi translated">作者在<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource" rel="noopener ugc nofollow" target="_blank">事件源</a>构造函数中指定一个资源，浏览器连接到远程HTTP服务器请求它。</li><li id="c2c1" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">来自服务器的消息时有发生。</li><li id="c424" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">在接收和发送消息时，浏览器检测到它处于空闲状态，除非是维持TCP连接所必需的，并切换到睡眠模式，以便消耗更少的功率。</li><li id="1525" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">浏览器与服务器断开连接。</li><li id="23b2" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">浏览器不是直接保持连接，而是联系网络上的推送代理服务。</li><li id="6ae7" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">在推送代理服务中，客户联系远程服务器，并请求由用户在事件源的构造器中指定的资源(可能包括“最后事件id”HTTP报头等)。).</li><li id="8c44" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">浏览器允许移动设备进入睡眠状态。</li><li id="fb8b" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">从服务器发送新消息。</li><li id="b002" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nl nm nn no bi translated">使用“推送代理”，移动设备通过OMA push等技术接收事件，OMA push仅短暂唤醒以处理事件，然后重新休眠。</li></ol><h2 id="9546" class="mu ly in bd lz mv mw dn md mx my dp mh lc mz na mj lg nb nc ml lk nd ne mn nf bi translated">上交所的特点</h2><ul class=""><li id="2cfc" class="ng nh in kv b kw mp kz mq lc nu lg nv lk nw lo nx nm nn no bi translated">低延迟交付</li><li id="745a" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nx nm nn no bi translated">高效的浏览器消息解析</li><li id="a3dc" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nx nm nn no bi translated">自动跟踪最后看到的消息</li><li id="b1c0" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nx nm nn no bi translated">作为DOM事件的客户端消息通知</li></ul><h2 id="d057" class="mu ly in bd lz mv mw dn md mx my dp mh lc mz na mj lg nb nc ml lk nd ne mn nf bi translated">SSE的局限性</h2><ul class=""><li id="4b31" class="ng nh in kv b kw mp kz mq lc nu lg nv lk nw lo nx nm nn no bi translated">通信仅从服务器到客户端</li><li id="3cb5" class="ng nh in kv b kw np kz nq lc nr lg ns lk nt lo nx nm nn no bi translated">只能传输UTF-8数据</li></ul></div><div class="ab cl lq lr hr ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ig ih ii ij ik"><p id="11df" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ny">感谢您通读🙌🏼。如果您觉得这篇文章有用，请使用👏按钮，并通过您的圈子分享。</em></p><p id="6a72" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ny">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ny">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ny">免费周报</em> </strong> </a> <em class="ny">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ny">Twitter</em></strong></a><em class="ny">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ny">LinkedIn</em></strong></a><em class="ny">。加入我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ny">社区</em> </strong> </a> <em class="ny">。</em></strong></a></p></div></div>    
</body>
</html>