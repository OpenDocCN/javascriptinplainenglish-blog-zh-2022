<html>
<head>
<title>Migrate From TSLint to ESLint: A Brief Guide With No Snark</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从TSLint迁移到ESLint:没有Snark的简要指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/migrating-from-tslint-to-eslint-a-brief-guide-with-no-snark-6480dbbc6f66?source=collection_archive---------6-----------------------#2022-09-19">https://javascript.plainenglish.io/migrating-from-tslint-to-eslint-a-brief-guide-with-no-snark-6480dbbc6f66?source=collection_archive---------6-----------------------#2022-09-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="02a8" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">林挺是任何代码库中的重要功能。本文主要讨论使用ESLint的林挺类型脚本代码</h2></div><h1 id="5bfc" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">什么是林挺？</h1><p id="3b1a" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">林挺是检查代码库中潜在错误的过程，这些错误会影响代码的整体正确性。这些案例从常见的语法错误到与安全相关的缺陷。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/942b257a56a384998b2601c9ee7026a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ikAtZB9x9Midckm1-jPwvA.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk">TypeScript code inspector</figcaption></figure><h1 id="22e8" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">对林挺的需求</h1><p id="cff6" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">它用于消除任何可能引入代码库的错误，作为任何新更改的一部分。林挺有助于问题的早期检测，否则可能会导致生产环境中的代码破坏。</p><p id="83d8" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">对于大型代码库来说，林挺变得尤其重要，因为大量的开发人员并行地为代码库做出贡献。一些使用案例包括:</p><ol class=""><li id="6f0d" class="ml mm in kw b kx mg la mh ld mn lh mo ll mp lp mq mr ms mt bi translated">当新开发人员开始接触代码库，但并不完全了解所遵循的某些代码实践时，实施样式实践是很方便的。</li><li id="7927" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp mq mr ms mt bi translated"><em class="mu">实施安全实践，</em>一些编程结构可能会在代码库中引入安全问题，在代码交付到生产环境之前发现并消除这些问题非常重要。</li><li id="fc36" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp mq mr ms mt bi translated"><em class="mu">确保代码的可维护性，</em>代码的可维护性对于不断增长的代码库来说是一个至关重要的因素，随着repo规模的增加，手动跟踪代码质量成为一个难以解决的问题。林挺派上了用场，你可以在几分钟内检查这个。</li></ol><h1 id="d138" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">可用工具</h1><p id="19a9" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">由于本文的重点是类型脚本代码的林挺，我将提到两个流行的工具用于林挺这样的代码库。</p><ol class=""><li id="c353" class="ml mm in kw b kx mg la mh ld mn lh mo ll mp lp mq mr ms mt bi translated">TSLint <br/> TSLint是林挺类型脚本代码库的默认工具，这是一个专门为Lint类型脚本代码设计的工具，具有一组广泛的本机规则和支持库，可以处理大多数与类型脚本相关的林挺问题。</li><li id="61c5" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp mq mr ms mt bi translated">ESLint <br/> ESLint是林挺JavaScript代码最流行的工具，它已经存在很长时间了，像TSLint一样，它有一套广泛的本地规则和支持库，提供了一个健壮的林挺设置。</li></ol><p id="2eb0" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">既然我们已经看到了可供我们使用的工具，我们可以使用它们来lint代码。但是等等，有一个条件。任何新的代码库都应该是使用ESLint的lint，任何可能是使用TSLint的林挺的现有代码库都应该考虑迁移到ESLint。<em class="mu">但是为什么会这样呢？</em></p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi na"><img src="../Images/f23afdc13f9555108ac57ee870579888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*kHUBdFbsyFX98DpZBS6A_A.jpeg"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk">migration to eslint</figcaption></figure><h1 id="c9cf" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">为什么要迁移？</h1><p id="7db3" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">上述两个工具的问题是，TSLint现在已经被否决了，它早在2019年就被否决了，从那以后，ESLint一直是林挺JavaScript和TypeScript代码库的首选工具。</p><p id="ac05" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">Plantir的这个<a class="ae nb" href="https://blog.palantir.com/tslint-in-2019-1a144c2317a9" rel="noopener ugc nofollow" target="_blank">博客</a>讨论了向ESLint的迁移，以及为JavaScript和TypeScript提供通用工具的努力。</p><h1 id="0b80" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">迁移流程和工具</h1><p id="2f3c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在本节中，我们将了解如何从现有的TSLint配置迁移到ESLint，以及有哪些工具可供我们使用。</p><p id="cb98" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">迁移过程可遵循以下步骤:-</p><ol class=""><li id="028a" class="ml mm in kw b kx mg la mh ld mn lh mo ll mp lp mq mr ms mt bi translated">第一步是将现有的TSLint配置转换为其对应的ESLint配置，为此可以使用该工具<code class="fe nc nd ne nf b">tslint-to-eslint-config</code>，此处<a class="ae nb" href="https://github.com/typescript-eslint/tslint-to-eslint-config" rel="noopener ugc nofollow" target="_blank">提供了该工具</a>。最简单的用法是<br/> <code class="fe nc nd ne nf b">npx tslint-to-eslint-config</code></li><li id="044c" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp mq mr ms mt bi translated">上述步骤将生成一个. eslintrc文件，它是包含所需规则的ESLint的配置文件</li><li id="7253" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp mq mr ms mt bi translated">尽管该工具覆盖面很广，但它可能不会将所有的TSLint规则直接转换为它们的ESLint对应规则，原因是并非所有的TSLint规则都会直接映射到ESLint规则，这在中的<code class="fe nc nd ne nf b">@typescript-eslint/tslint/config</code>下是可见的。eslintc文件，但是这将创建对TSLint的依赖来运行这些规则，并且完整的迁移将受到阻碍。</li><li id="f67b" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp mq mr ms mt bi translated">下一步是找到规则的替代物，它不是由工具直接转换的。<a class="ae nb" href="https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/TSLINT_RULE_ALTERNATIVES.md" rel="noopener ugc nofollow" target="_blank">这里的</a>是TSLint规则和它们的ESLint对应物的详细列表，其中一些已经被工具处理了，另一些可能发现它们的实现是独立的库，还有一些仍然没有相应的ESLint规则。</li><li id="d84e" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp mq mr ms mt bi translated">可能还会有一些规则被转换成ESLint规则，如果这些是一些自定义编写的规则，那么它们的ESLint自定义对应物也可以被实现，甚至需要类型检查的规则也可以有基于ESLint的实现，<a class="ae nb" href="https://typescript-eslint.io/docs/development/custom-rules" rel="noopener ugc nofollow" target="_blank">本</a>部分将详细讨论这一点。非定制规则可能已经作为<code class="fe nc nd ne nf b">eslint-plugin</code>的一部分或某个第三方库实现了。</li></ol><h1 id="2c04" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">挑战</h1><h2 id="d26e" class="ng kd in bd ke nh ni dn ki nj nk dp km ld nl nm ko lh nn no kq ll np nq ks nr bi translated">性能考虑因素</h2><p id="36d9" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">从TSLint迁移到ESLint时，最常见的挑战是需要类型检查的规则的性能。这是因为类型检查需要在运行ESLint之前编译包。这样做的成本取决于包的大小，包越大，过程越慢。</p><p id="8245" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">为了避免这种情况，在<code class="fe nc nd ne nf b">parserOptions</code>中正确设置<code class="fe nc nd ne nf b">tsconfig.json</code>并且不要使用太宽的球体是很重要的。这种用法的示例如下</p><pre class="lr ls lt lu gt ns nf nt nu aw nv bi"><span id="50d9" class="ng kd in nf b gy nw nx l ny nz">parserOptions: {<br/>  project: ["./tsconfig.json"]<br/>}</span></pre><p id="fcf3" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">这基本上是告诉解析器利用包级别<code class="fe nc nd ne nf b">tsconfig</code>。</p><h2 id="ceee" class="ng kd in bd ke nh ni dn ki nj nk dp km ld nl nm ko lh nn no kq ll np nq ks nr bi translated">包级别规则</h2><p id="8506" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这个问题可能不会困扰较小的项目，但对于较大的回购，可能会有许多包在包级别禁用或启用一些规则。现在还没有工具可以直接满足这种需求，所以使用它的一个好主意是拥有一个定制的脚本来处理映射，或者使用一个现有的工具包装在一个定制的脚本之下，在包级别执行并满足包级别的规则结构。</p><p id="11fe" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">不仅仅是规则，包级文件也可能通过<code class="fe nc nd ne nf b">comments</code>在<em class="mu">行或</em>节级禁用和启用规则，这在ESLint规则开始选择应该禁用的代码行或代码节时会产生另一个问题。这可以在自动迁移时解决，例如</p><pre class="lr ls lt lu gt ns nf nt nu aw nv bi"><span id="e2fa" class="ng kd in nf b gy nw nx l ny nz">npx tslint-to-eslint-config --comments</span></pre><p id="ed07" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">虽然这在mono repo的情况下可能不是很方便，从一个点驱动规则，其余的包扩展那些公共的规则集，在这种情况下，这将试图扩展和转换单独的<code class="fe nc nd ne nf b">.eslintrc</code>，然后这将需要手动处理。</p><p id="0cdd" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">下面是一些ESLint注释符号，与TSLint符号一样，它们也用于禁用规则</p><pre class="lr ls lt lu gt ns nf nt nu aw nv bi"><span id="85fe" class="ng kd in nf b gy nw nx l ny nz">// eslint-disable-next-line<br/>// eslint-disable-line</span><span id="5b2d" class="ng kd in nf b gy oa nx l ny nz">/* eslint-disable */<br/>/* eslint-enable */</span><span id="ca75" class="ng kd in nf b gy oa nx l ny nz">// eslint-disable-next-line &lt;rule name&gt;<br/>// eslint-disable-line &lt;rule name&gt;</span><span id="d9e5" class="ng kd in nf b gy oa nx l ny nz">/* eslint-disable &lt;rule name&gt; */<br/>/* eslint-enable &lt;rule name&gt; */</span></pre><h2 id="0406" class="ng kd in bd ke nh ni dn ki nj nk dp km ld nl nm ko lh nn no kq ll np nq ks nr bi translated">行为不同的规则</h2><p id="55ec" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">我们可能会遇到一些与TSLint规则相对应的ESLint规则，但是它们的行为仍然与TSLint规则不同。</p><p id="ae5c" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">这方面的一个例子是<code class="fe nc nd ne nf b">jsx-no-lambda</code>规则详细说明<a class="ae nb" href="https://github.com/palantir/tslint-react" rel="noopener ugc nofollow" target="_blank">这里是</a>，它不允许匿名方法，虽然可以通过将匿名方法声明移动到这样的变量来绕过匿名方法</p><pre class="lr ls lt lu gt ns nf nt nu aw nv bi"><span id="7413" class="ng kd in nf b gy nw nx l ny nz">const someMethod = (): void =&gt; {<br/>   // some code<br/>};</span><span id="aa71" class="ng kd in nf b gy oa nx l ny nz">return (<br/>  &lt;div onClick={someMethod}&gt;<br/>  &lt;/div&gt;<br/>);</span></pre><p id="2c85" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">与此相对应的ESLint是<code class="fe nc nd ne nf b">react/jsx-no-bind</code>，这里详细的<a class="ae nb" href="https://github.com/jsx-eslint/eslint-plugin-react/blob/master/docs/rules/jsx-no-bind.md" rel="noopener ugc nofollow" target="_blank">将捕捉这种情况，这些可能会在迁移过程中提示修复。</a></p><h1 id="a285" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">尾注</h1><p id="f76c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">如果有人正在尝试这种迁移，那么除了这篇博客，他们会发现<a class="ae nb" href="https://typescript-eslint.io/docs/" rel="noopener ugc nofollow" target="_blank">这些</a>文档特别有用。此外，由于TSLint长期以来一直被否决，现在可能是将现有代码库迁移到ESLint的时候了，因为这将允许代码库自由地升级到新的工具版本，这在TSLint下将不受支持，并且可以从正在开发的新工具中进一步受益。这也为更广泛的JavaScript社区打开了大门，这将在某种程度上间接有利于任何不断增长的代码库。<br/>希望这篇博客有助于回答一些与林挺和移民相关的问题。</p><h1 id="1c37" class="kc kd in bd ke kf kg kh ki kj kk kl km jt kn ju ko jw kp jx kq jz kr ka ks kt bi translated">资源</h1><ul class=""><li id="482c" class="ml mm in kw b kx ky la lb ld ob lh oc ll od lp oe mr ms mt bi translated"><a class="ae nb" href="https://blog.palantir.com/tslint-in-2019-1a144c2317a9" rel="noopener ugc nofollow" target="_blank"> Plantir关于TSLint弃用的博客</a></li><li id="58e3" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp oe mr ms mt bi translated"><a class="ae nb" href="https://github.com/typescript-eslint/tslint-to-eslint-config" rel="noopener ugc nofollow" target="_blank"> TSLint到ESLint cli </a></li><li id="43a5" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp oe mr ms mt bi translated"><a class="ae nb" href="https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/TSLINT_RULE_ALTERNATIVES.md" rel="noopener ugc nofollow" target="_blank"> ESLint替代规则</a></li><li id="4075" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp oe mr ms mt bi translated"><a class="ae nb" href="https://typescript-eslint.io/docs/development/custom-rules/" rel="noopener ugc nofollow" target="_blank"> ESLint自定义规则</a></li><li id="3629" class="ml mm in kw b kx mv la mw ld mx lh my ll mz lp oe mr ms mt bi translated"><a class="ae nb" href="https://typescript-eslint.io/docs/" rel="noopener ugc nofollow" target="_blank">打字稿ESLint入门</a></li></ul></div><div class="ab cl of og hr oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ig ih ii ij ik"><p id="d3fe" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated">喜欢您阅读的内容，并希望与我联系？<br/>在<a class="ae nb" href="https://twitter.com/vidit_m100" rel="noopener ugc nofollow" target="_blank"><em class="mu">Twitter</em></a><em class="mu">或</em><a class="ae nb" href="https://www.linkedin.com/in/mathurvidit/" rel="noopener ugc nofollow" target="_blank"><em class="mu">LinkedIn</em></a><em class="mu">上关注我，听听我的想法，或订阅我在Medium上的博客。</em></p></div><div class="ab cl of og hr oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ig ih ii ij ik"><p id="a2b1" class="pw-post-body-paragraph ku kv in kw b kx mg jo kz la mh jr lc ld mi lf lg lh mj lj lk ll mk ln lo lp ig bi translated"><em class="mu">更多内容请看</em><a class="ae nb" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mu">plain English . io</em></strong></a><em class="mu">。报名参加我们的</em> <a class="ae nb" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mu">免费每周简讯</em> </strong> </a> <em class="mu">。关注我们关于</em> <a class="ae nb" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mu">推特</em> </strong> </a>，<a class="ae nb" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mu">LinkedIn</em></strong></a><em class="mu">，</em><a class="ae nb" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mu">YouTube</em></strong></a><em class="mu">，</em> <a class="ae nb" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mu">不和</em> </strong> </a> <em class="mu">。对增长黑客感兴趣？检查出</em> <a class="ae nb" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mu">电路</em> </strong> </a> <em class="mu">。</em></p></div></div>    
</body>
</html>