<html>
<head>
<title>Learn useReducer() Hook and Manage Complex States</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习useReducer()钩子和管理复杂状态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/learn-usereducer-hook-and-manage-complex-states-a-complete-guide-2f91c789abb8?source=collection_archive---------7-----------------------#2022-11-24">https://javascript.plainenglish.io/learn-usereducer-hook-and-manage-complex-states-a-complete-guide-2f91c789abb8?source=collection_archive---------7-----------------------#2022-11-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="bec6" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于useReducer()钩子和管理复杂状态的完整指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8fc5a26d8b6e7e34de5413d48d57710f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apKUrFNK07hb5oYKI6Lc8A.png"/></div></div></figure><p id="a9c1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这篇博客中，我们将详细讨论react中的useReducer()钩子。我们会明白它的必要性，何时使用它，以及如何使用它。</p><h1 id="09aa" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">react组件中的状态管理</h1><p id="f28a" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">有两个钩子来管理react组件中的状态，它们是:</p><ol class=""><li id="9950" class="mh mi in kq b kr ks ku kv kx mj lb mk lf ml lj mm mn mo mp bi translated">使用状态和</li><li id="222e" class="mh mi in kq b kr mq ku mr kx ms lb mt lf mu lj mm mn mo mp bi translated">用户教育</li></ol><h1 id="3961" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">使用状态钩子及其问题</h1><p id="ba2e" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">如果我们谈论react功能组件中的处理状态，那么我们马上会想到useState()钩子。我们使用useState()钩子来存储数据，等待某个动作的触发，基于该动作，状态数据得到更新，并触发一个组件的呈现，通过该组件，新的变化反映在web页面上。这就是useState()钩子的工作方式。</p><p id="908b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">useState()钩子允许你存储一个数据单元，不管它是一个布尔值、字符串、数组还是对象。当您需要在一个组件中存储多个数据单元时，真正的挑战就出现了，这意味着要创建多个useState()钩子。所有这些多重的useState()钩子会使你的代码可读性更差，更难管理，这反过来会影响代码质量。</p><h1 id="bb4a" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">用useReducer()钩子集中组件数据</h1><p id="dd9e" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">如上所述，在一个组件中拥有多个使用状态会影响代码质量。那么，如果我们将所有组件数据集中在一个地方，并从那里进行操作，会怎么样呢？</p><p id="7b21" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">听起来很酷，对吧？</p><p id="1d1c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">到目前为止，您可能已经猜到了，是的，useReducer() hook就是将所有组件数据集中到一个地方，并从那里进行管理。它类似于Redux，但与Redux不同，它很容易实现。</p><pre class="kd ke kf kg gt mv mw mx bn my mz bi"><span id="bc84" class="na ll in mw b be nb nc l nd ne">const INIT_STATE = {<br/>    todo: [{id: 1, title: 'Go to gym'}]<br/>}<br/>function todoReducer(state, action) {}<br/>const [state, dispatch] = useReducer(todoReducer, INIT_STATE);</span></pre><p id="3adb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">useReducer()挂钩接受两个参数:</p><ol class=""><li id="963c" class="mh mi in kq b kr ks ku kv kx mj lb mk lf ml lj mm mn mo mp bi translated"><strong class="kq io">初始状态:</strong>初始状态(INIT_STATE)是用某个值初始化的组件的状态。</li><li id="14bb" class="mh mi in kq b kr mq ku mr kx ms lb mt lf mu lj mm mn mo mp bi translated"><strong class="kq io"> Reducer函数:</strong>Reducer是一个纯函数，接受两个参数:当前状态和一个动作对象。根据动作对象，reducer函数必须以不可变的方式更新状态，并返回新的状态。</li></ol><pre class="kd ke kf kg gt mv mw mx bn my mz bi"><span id="79d6" class="na ll in mw b be nb nc l nd ne">function todoReducer(state, action) {<br/>  switch (action.type) {<br/>    case 'ADD_TODO':<br/>      return {...state, todo: action.payload};<br/>    default:<br/>      return {...state};<br/>  }<br/>}</span></pre><p id="eb81" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后，useReducer()钩子返回一个包含两个项目的数组:当前状态和调度函数。</p><p id="c154" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> Dispatch函数:</strong>Dispatch()函数在您想要更新状态时使用，就像调用setState()一样。您只需调用dispatch()函数并传递适当的操作对象。</p><pre class="kd ke kf kg gt mv mw mx bn my mz bi"><span id="2cc5" class="na ll in mw b be nb nc l nd ne">dispatch({<br/>   type: 'ADD_TODO', <br/>   payload: [...state.todo, {id: 123, title: 'Learn React hooks'}]<br/>});</span></pre><h1 id="28d3" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">useReducer()钩子的工作过程</h1><p id="b9d6" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">基于完成的某些事件或动作，组件调用分派函数，该函数将动作对象发送给Reducer函数。然后，基于动作类型的reducer函数返回一个新的状态，该状态反映在网页上。</p><p id="abf3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看看下面这个实现了useReducer()钩子的迷你项目。该项目是一个小型的社会媒体类型的项目，让你张贴随机的东西。</p><blockquote class="nf ng nh"><p id="70c2" class="ko kp ni kq b kr ks jo kt ku kv jr kw nj ky kz la nk lc ld le nl lg lh li lj ig bi translated"><strong class="kq io"> App.js </strong></p></blockquote><pre class="kd ke kf kg gt mv mw mx bn my mz bi"><span id="f47c" class="na ll in mw b be nb nc l nd ne">import './App.css';<br/>import BetterMicroBlog from './BetterMicroBlog';<br/><br/>function App() {<br/>  return (<br/>    &lt;div className="parent-component"&gt;<br/>    &lt;BetterMicroBlog /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><blockquote class="nf ng nh"><p id="7c9c" class="ko kp ni kq b kr ks jo kt ku kv jr kw nj ky kz la nk lc ld le nl lg lh li lj ig bi translated"><strong class="kq io"> BetterMicroBlog.js </strong></p></blockquote><pre class="kd ke kf kg gt mv mw mx bn my mz bi"><span id="f037" class="na ll in mw b be nb nc l nd ne">import { useReducer, useRef } from "react";<br/>import "./MicroBlog.css";<br/><br/>const BetterMicroBlog = () =&gt; {<br/><br/>    const postInput = useRef();<br/><br/>    const INIT_STATE = {<br/>        data: [{id: Date.now(), content: "React is awesome 🔥"}],<br/>        emptyMsg: false<br/>    }<br/><br/>    function blogReducer(state, action) {<br/>        switch(action.type) {<br/>            case "ADD_POST":<br/>                return {...state, data: action.payload, emptyMsg: false};<br/>            case "DELETE_POST":<br/>                return {...state, data: action.payload, emptyMsg: false};<br/>            case "EMPTY_MSG":<br/>                return {...state, emptyMsg: action.payload}<br/>            default:<br/>                return {...state};<br/>        }<br/>    }<br/><br/>    const [state, dispatch] = useReducer(blogReducer, INIT_STATE);<br/>    <br/>    function addPost() {<br/>        const inputValue = postInput.current.value;<br/>        if (inputValue !== "") {<br/>            dispatch({<br/>                type: "ADD_POST", <br/>                payload: [...state.data, {id: Date.now(), content: inputValue}]<br/>            });<br/>            postInput.current.value = "";<br/>            return;<br/>        }<br/>        dispatch({<br/>            type: "EMPTY_MSG",<br/>            payload: true<br/>        })<br/>    }<br/><br/>    function deletePost(postId) {<br/>        dispatch({<br/>            type: "DELETE_POST", <br/>            payload: [...state.data.filter(post =&gt; post.id !== postId)]<br/>        });<br/>    }<br/><br/>    return (<br/>    &lt;div className="micro-blog"&gt;<br/>    {<br/>        state.emptyMsg ? <br/>        &lt;div className="empty-msg"&gt;Please write something!&lt;/div&gt;<br/>        : null<br/>    }<br/>        &lt;div className="micro-blog-head"&gt;<br/>            &lt;h2&gt;What's happening?&lt;/h2&gt;<br/>            &lt;input<br/>             type="text" <br/>             className="blog-input"<br/>             placeholder="Say Something!" <br/>             ref={postInput}<br/>            /&gt;<br/>            &lt;button onClick={addPost} className="post-btn"&gt;<br/>            Add Post<br/>            &lt;/button&gt;<br/>        &lt;/div&gt;<br/>        &lt;div&gt;<br/>        {<br/>            state.data.map(post =&gt; (<br/>                &lt;div key={post.id} className="post-content"&gt;<br/>                    &lt;p&gt;{post.content}&lt;/p&gt;<br/>                    &lt;div&gt;<br/>                    &lt;button<br/>                     onClick={() =&gt; deletePost(post.id)} <br/>                     className="delete-btn"&gt;<br/>                     Delete<br/>                     &lt;/button&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            ))<br/>        }<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/><br/>export default BetterMicroBlog;</span></pre><blockquote class="nf ng nh"><p id="6ce4" class="ko kp ni kq b kr ks jo kt ku kv jr kw nj ky kz la nk lc ld le nl lg lh li lj ig bi translated"><strong class="kq io">输出</strong></p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/df3cc319cd0768a92b90bf31e04d6bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*3Fod56OxxC3-uO2vZDFKkQ.png"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk">Output</figcaption></figure><p id="b492" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">谢谢你读到这里。我希望现在您已经理解了react中的useReducer()钩子及其重要性。</strong></p><h1 id="c4c4" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">如果你想要更多这样的内容，请在媒体上关注我，订阅我的YouTube频道。</h1><h1 id="1432" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">有疑问吗？通过推特<a class="ae nr" href="https://twitter.com/izrajesh" rel="noopener ugc nofollow" target="_blank">联系我</a>。</h1><p id="ec45" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated"><em class="ni">更多内容看</em> <a class="ae nr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ni">说白了。报名参加我们的</em> <a class="ae nr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ni">免费周报</em> </strong> </a> <em class="ni">。关注我们关于</em> <a class="ae nr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ni">推特</em> </strong> </a>，<a class="ae nr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ni">LinkedIn</em></strong></a><em class="ni">，</em><a class="ae nr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ni">YouTube</em></strong></a><em class="ni">，以及</em> <a class="ae nr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ni">不和</em> </strong> </a> <em class="ni">。对增长黑客感兴趣？检查</em> <a class="ae nr" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ni">电路</em> </strong> </a> <em class="ni">。</em></strong></a></p></div></div>    
</body>
</html>