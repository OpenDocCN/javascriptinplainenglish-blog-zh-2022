<html>
<head>
<title>API Endpoint in Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Express中的API端点</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/api-endpoint-in-expressjs-mern-stack-part-4-94399afb92f0?source=collection_archive---------16-----------------------#2022-06-09">https://javascript.plainenglish.io/api-endpoint-in-expressjs-mern-stack-part-4-94399afb92f0?source=collection_archive---------16-----------------------#2022-06-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="218b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">MERN堆栈第4部分:如何编写一个演示API端点，在这里我们可以发送请求并获得一些响应。</h2></div><p id="d536" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae ky" href="https://www.mayhemcode.com/2022/06/api-endpoint-in-expressjs-mern-stack.html" rel="noopener ugc nofollow" target="_blank"> API端点</a>就像是web应用前端和后端之间的桥梁。所有相关信息都使用这种方法在系统之间传递。<strong class="ke io"> API代表应用程序接口</strong>，顾名思义是web应用的接口。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/ded32b0c08b8078fff41065a8c15f739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FE2JN_FTn5Ws2uEHvG-dTg.png"/></div></div></figure><p id="3188" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在前几篇文章中，我们看到了如何为MERN堆栈开发建立一个环境，我们还看到了如何使用名为npm的节点管理器安装相关的依赖项。在本文中，了解如何编写一个演示API端点，在这里我们可以发送请求并获得一些响应。</p><p id="1d5b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">链接到以前的文章:<a class="ae ky" href="https://www.mayhemcode.com/2022/01/creating-api-endpoints-using-expressjs.html" rel="noopener ugc nofollow" target="_blank">使用Express创建API端点</a></p><h1 id="ab03" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">什么是API？</h1><p id="d1fd" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">第一个问题很重要，但我们在之前的文章中没有回答，那就是API到底是什么，它在web开发和MERN堆栈中有什么用？。我们用一个简单的例子来理解这一点。假设我们去一家酒店，我们点了几样东西。服务员或其他人负责点菜。然后将请求发送给厨师，让他制作所需的菜肴。然后服务员会再一次把东西送过来。处理网络应用程序的整个过程。你是一个用户，请求页面和网站，然后服务员或API将把请求发送到后端服务器，后者处理并发送相关的响应。</p><h1 id="a169" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">步骤1:创建Express应用程序。</h1><p id="4f35" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">首先，我们需要创建一个express应用程序，这是我们在上一篇文章中创建的，如果您还没有看到它，请查看上面的链接，在这一步，我们安装依赖项，如<strong class="ke io"> Express、Axios、Nodemon、</strong>等。然后我们创建一个名为index.js的入口点或主文件。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/f528bf0896b3ed729ae72403054a4cfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/0*lB7zwPB9zQ59i6jj.jpg"/></div></figure><p id="5152" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Index.js是入口点，除此之外，我们还创建了1个文件data.js和一个名为routes的文件夹，data.js将包含用于测试的虚拟API数据，routes文件夹将包含所有页面和路由。我们将在本文的后面研究这些文件。</p><h1 id="6f96" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">步骤2:启动Express服务器。</h1><p id="81d7" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">现在我们将看到如何用一个特定的端口号启动一个express服务器，你可以随意给定任何端口号。代码非常容易理解。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mj"><img src="../Images/4224a2c5ddce5691ccb444f4aac3d4a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NsU-HKTqRKFkSl29OSxZCw.jpeg"/></div></div></figure><p id="c568" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们需要将库添加到文件中，就像我们在python中做的那样，比如导入“库名”，或者在C中做的那样，比如#include <stdio.h>，在javascript中，我们使用require()方法添加库。所以常量变量express会有express库的所有模块，那么我们通过初始化express模块来创建一个app。这里我们使用了端口号1234，你可以使用任何你想要的数字，只要看到端口没有被其他服务占用。</stdio.h></p><p id="4527" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">注意:JavaScript的所有语法都是基于ES6版本的JavaScript。</strong></p><p id="7bf5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们使用listen()方法让应用程序监听指定的端口1234。我们可以看到，这个方法有两个参数，一个是数字，另一个是元组或列表。第一个值是端口号，下一个值可用于请求和响应。</p><h1 id="9932" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">步骤3:制作虚拟API数据。</h1><p id="2297" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">大多数web应用程序使用数据库数据和API从这些数据库中获取数据并显示给最终用户，为了使本教程简单，我们将使用一个javascript文件来存储所有信息。你可以用<strong class="ke io">JSON(JavaScript Object Notation)</strong>格式创建自己的数据，这里我使用了来自一个名为<a class="ae ky" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> JSON placeholder </a>的网站的数据，你也可以获得不同大小的JSON数据来测试应用。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/92f8e0b99336171696941b4157cbea9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*SMpgZX_QfrUKxn7q.jpg"/></div></figure><p id="bd0f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以我已经复制了所有的信息，保存在data.js文件中。变量名为users。我们还需要在这个文件的末尾再添加一行代码，这样我们就可以在其他文件中使用它。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/ee44fb7316a2e6336e0583df411bef23.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*h4fn-Wli-E6XWRSQ.jpg"/></div></figure><p id="5c2a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此代码<strong class="ke io"> module.exports </strong>将导出用户的变量，这样它就可以导入到其他文件中以访问数据。</p><h1 id="bcf5" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">步骤5:创建请求数据的端点。</h1><p id="d710" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">我们已经使用listen()方法让服务器在端口1234上进行侦听，就像我们可以使用指定的路径让不同的端点连接到服务器一样。例如“/主页”和“/主页”，它们将作为服务器的不同端点，提供不同类型的信息。在这里，我们可以创建两种类型的请求:GET请求和POST请求。</p><p id="8ed6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将使用一个GET页面，因为在本文中，我们不会动态地请求特定的用户，我们是唯一请求整个数据的用户，所以GET请求适合于获取信息。当我们向服务器发送一些信息(如用户名、密码或其他具体细节)时，可以使用POST请求。为了获取相关数据，我们可以使用POST方法。我们将看到关于如何为请求各种各样的数据制作一个动态API端点的文章。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/2b0ffd28f3dc2a6ca11586604be1491f.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*kp70wz9-F9URoOX5.jpg"/></div></figure><p id="85cf" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们已经使用了<strong class="ke io"> get() </strong>方法制作了一个名为“/getdata”的端点，接下来的参数是请求和响应对象。假设这是一个POST方法，我们可以从请求对象访问参数，并使用响应对象发送对象。不要忘记导入用户的文件。</p><p id="c882" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的片段中。当用户转到“/getdata”页面时，服务器将检查应用程序中是否存在该端点，然后执行其中的代码并发送响应。在这种情况下，我们发送数据对象作为响应。</p><h1 id="89c8" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">步骤6:测试端点。</h1><p id="4cd1" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">为了检查端点，为此启动服务器，我们需要使用命令<strong class="ke io"> nodemon index.js </strong>运行带有index.js文件的nodemon服务器，然后转到<a class="ae ky" href="https://localhost:PORT/getdata" rel="noopener ugc nofollow" target="_blank"><strong class="ke io">https://localhost:PORT/get data</strong></a>点，查看数据是否显示在浏览器中。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/21b973463775082e6baf2af5fa43e492.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/0*kre8V0UbnVY4o7RT.jpg"/></div></figure><p id="ef73" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，在传统方法中，这些数据将在客户端进行处理，并使用其他技术和CSS以更漂亮的方式显示。在我们的例子中，我们将在未来的文章中使用react。</p><p id="795b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更多文章请访问:</p><div class="mm mn gp gr mo mp"><a href="https://www.mayhemcode.com/search/label/web-tech" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd io gy z fp mu fr fs mv fu fw im bi translated">伤害代码</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">最新的技术新闻，采矿加密货币，weebs动画新闻，游戏更新和硬件提示计算机…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">www.mayhemcode.com\</p></div></div><div class="my l"><div class="mz l na nb nc my nd lj mp"/></div></div></a></div></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="6251" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nl">原载于2022年6月9日</em><a class="ae ky" href="https://www.mayhemcode.com/2022/06/api-endpoint-in-expressjs-mern-stack.html" rel="noopener ugc nofollow" target="_blank"><em class="nl">https://www.mayhemcode.com</em></a><em class="nl">。</em></p><p id="009a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nl">更多内容请看</em> <a class="ae ky" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="nl">说白了就是</em> </strong> </a> <em class="nl">。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="nl">免费每周简讯</em> </strong> </a> <em class="nl">。关注我们</em><a class="ae ky" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="nl">Twitter</em></strong></a><em class="nl">和</em><a class="ae ky" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="nl">LinkedIn</em></strong></a><em class="nl">。查看我们的</em> <a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="nl">社区不和谐</em> </strong> </a> <em class="nl">加入我们的</em> <a class="ae ky" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="nl">人才集体</em> </strong> </a> <em class="nl">。</em></p></div></div>    
</body>
</html>