<html>
<head>
<title>How to Build a Stock Chart with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript构建股票图表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-stock-chart-with-javascript-3c3a735c227?source=collection_archive---------3-----------------------#2022-02-24">https://javascript.plainenglish.io/how-to-build-a-stock-chart-with-javascript-3c3a735c227?source=collection_archive---------3-----------------------#2022-02-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ac6ea9eae35cf0c401f0db9617540a24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NVrIW0ihHdofvVLM.png"/></div></div></figure><p id="8d47" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.anychart.com/blog/2018/11/20/data-visualization-definition-history-examples/" rel="noopener ugc nofollow" target="_blank">数据可视化</a>广泛应用于各个领域。一个这样的领域是金融交易，其中<a class="ae kt" href="https://www.anychart.com/chartopedia/chart-type/stock-chart/" rel="noopener ugc nofollow" target="_blank">股票图表</a>对于智能市场数据分析和决策是必不可少的。无论你是否投资股票，我很肯定你已经遇到过这样的图形，甚至可能需要现在就建立一个。那么，你想知道如何制作股票图表吗？我准备向您展示一个使用Tesla股票价格数据和JavaScript的简单方法！在本教程中，请跟随我，您将学习如何快速创建优雅、交互式的JS股票图表，就像您在图片中看到的那样。</p><h1 id="2903" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">什么是股票图表？</h1><p id="cfda" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">你们中的大多数人可能知道一些基本知识，但为了确保我们都在同一页上，我将简要地告诉你什么是股票图表。</p><p id="7d6f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">股价图基本上是通过在Y轴上绘制价格或成交量，在X轴上绘制时间段，来表示一段时间内股票的价格或成交量的变化。</p><p id="e7ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在快节奏的金融市场中，股票图表在帮助投资者发现趋势并做出正确的买卖决定方面发挥着非常重要的作用。</p><p id="749e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最常用于描绘股票的图表类型是烛台股票图。但是您也可以使用开盘-盘高-盘低-收盘(OHLC)、折线图、面积图、柱形图或其他形式的序列可视化，具体取决于特定的案例和任务。</p><h1 id="6313" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">要创建的股票图表</h1><p id="e05e" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">特斯拉是一家经常出现在新闻中的公司。这些年来，它呈指数级增长，这在它的股票价值中得到了很好的反映。因此，在本教程中，我将构建一个股票图表来展示特斯拉公司的价格变动。我还将向您展示如何添加各种技术指标，并说明最近围绕Elon Musk抛售股票的炒作的影响。</p><p id="3008" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是JavaScript股票图表的最终版本，让您为接下来的步骤做好准备。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lx"><img src="../Images/e4264be33ef05ebfb9a99298850eba71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nLfnuR9dOySv7W0R.png"/></div></div></figure><h1 id="a0df" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">用JavaScript构建股票图表</h1><p id="c146" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">从头开始创建交互式股票图表可能是一项非常艰巨的任务，但使用适当的数据可视化工具会变得更加容易和快速。例如，有一些有用的<a class="ae kt" href="https://en.wikipedia.org/wiki/Comparison_of_JavaScript_charting_libraries" rel="noopener ugc nofollow" target="_blank"> JavaScript图表库</a>能够创建金融图形，你可以使用任何适合你的需求。</p><p id="40a1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，我使用的是其中一个好的库——any chartJS库，它有一些很棒的股票图表选项以及简洁的文档<a class="ae kt" href="https://docs.anychart.com/Stock_Charts/Overview" rel="noopener ugc nofollow" target="_blank">供它们使用，并且对于任何非商业和教育用途都是免费的。</a></p><p id="dcff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">虽然这不是必需的，但是HTML和JavaScript的一些技巧可以帮助更快地理解这些概念。但是一切都很简单，会有大量的解释，所以即使你是新手也没什么好担心的。</p><p id="91b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">开市铃已经响了，是时候创建股票走势图了！</p><h2 id="2444" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">1.制作一个HTML页面</h2><p id="8d84" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我做的第一件事是创建一个HTML页面来保存图表，并添加一个<code class="fe mo mp mq mr b">div</code>元素来呈现图表。应该给这个block元素一个惟一的id，以便以后可以在代码中引用它。</p><p id="3f8d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我还设置了<code class="fe mo mp mq mr b">div</code>的样式，我将宽度和高度定义为100%，空白和填充为0。这将在整个屏幕上显示股票图表。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="aa7d" class="mc kv in mr b gy mw mx l my mz">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;title&gt;JavaScript Stock Chart&lt;/title&gt;<br/>    &lt;style type="text/css"&gt;      <br/>      html, body, #container { <br/>        width: 100%; <br/>        height: 100%; <br/>        margin: 0; <br/>        padding: 0; <br/>      } <br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="fecc" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">2.添加所需的脚本</h2><p id="7fd9" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">因为我使用的是图表库，所以我需要从该库中为股票图表引用适当的JS脚本。记住，这些脚本包含在HTML页面的<code class="fe mo mp mq mr b">head</code>部分。</p><p id="e4d5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于股票图表，我需要添加多个脚本。首先，我包括AnyChart的'<a class="ae kt" href="https://docs.anychart.com/Quick_Start/Modules#core" rel="noopener ugc nofollow" target="_blank"> core </a>和'<a class="ae kt" href="https://docs.anychart.com/Quick_Start/Modules#stock" rel="noopener ugc nofollow" target="_blank"> stock </a>模块。接下来，我添加了帮助加载数据的<a class="ae kt" href="https://docs.anychart.com/Quick_Start/Modules#data_adapter" rel="noopener ugc nofollow" target="_blank">数据适配器</a>模块。最后，我包含了用于用户界面元素的<a class="ae kt" href="https://docs.anychart.com/Quick_Start/Modules#common_ui" rel="noopener ugc nofollow" target="_blank"> UI </a>和<a class="ae kt" href="https://docs.anychart.com/Quick_Start/Modules#exports" rel="noopener ugc nofollow" target="_blank">导出</a>模块，并启用了导出特性，允许您将图表保存为图像或将底层数据提取到数据文件中。</p><p id="acc9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了让股票UI特性正常工作，我还需要链接适当的样式表。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="7a14" class="mc kv in mr b gy mw mx l my mz">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;title&gt;JavaScript Stock Chart&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-stock.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-data-adapter.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-ui.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-exports.min.js"&gt;&lt;/script&gt;</span><span id="990d" class="mc kv in mr b gy na mx l my mz">    &lt;link href="https://cdn.anychart.com/releases/8.11.0/css/anychart-ui.min.css" type="text/css" rel="stylesheet"&gt;<br/>    &lt;link href="https://cdn.anychart.com/releases/8.11.0/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet"&gt;</span><span id="39e3" class="mc kv in mr b gy na mx l my mz">    &lt;style type="text/css"&gt;      <br/>      html, body, #container { <br/>        width: 100%; height: 100%; margin: 0; padding: 0; <br/>      } <br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;  <br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>    &lt;script&gt;<br/><strong class="mr io"><em class="nb">      // All the code for the JS Stock Chart will come here<br/></em></strong>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="10fc" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">3.准备数据</h2><p id="8a6b" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">在这个股票图表中，我想可视化Tesla Inc. (TSLA)的每日股票价格数据，所以我从<a class="ae kt" href="https://finance.yahoo.com/quote/TSLA/history?p=TSLA" rel="noopener ugc nofollow" target="_blank">雅虎财经</a>和CSV数据文件<a class="ae kt" href="https://gist.githubusercontent.com/shacheeswadia/cd509e0b0c03964ca86ae7d894137043/raw/5f336c644ad61728dbac93026f3268b86b8d0680/teslaDailyData.csv" rel="noopener ugc nofollow" target="_blank">这里</a>获取。</p><p id="a691" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在所有的准备工作都完成了，所以让我们开始交易，或者在我们的例子中，编写JavaScript股票图表代码！</p><h2 id="2c10" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">4.编写必要的JavaScript代码</h2><p id="3f46" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">首先，我将代码放在一个名为<code class="fe mo mp mq mr b">anychart.onDocumentReady()</code>的函数中。这确保了在页面完全加载之前不会执行代码。接下来，我使用<code class="fe mo mp mq mr b">anychart.data.loadCsvFile()</code>函数加载数据文件。</p><p id="fb37" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我创建一个数据表，并将加载的数据添加到其中，但是在将这些数据用于我的股票图表之前，我需要对其进行映射。由于我正在创建一个蜡烛图，所以我绘制了开盘价、最高价、最低价和收盘价。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="5005" class="mc kv in mr b gy mw mx l my mz">anychart.onDocumentReady(function () {<br/>  anychart.data.loadCsvFile(    'https://gist.githubusercontent.com/shacheeswadia/cd509e0b0c03964ca86ae7d894137043/raw/5f336c644ad61728dbac93026f3268b86b8d0680/teslaDailyData.csv',<br/>    function (data) {<br/><strong class="mr io"><em class="nb">      // create data table on loaded data<br/></em></strong>      var dataTable = anychart.data.table();<br/>      dataTable.addData(data);</span><span id="e7f4" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">      // map loaded data for the candlestick series<br/></em></strong>      var mapping = dataTable.mapAs({<br/>        open: 1,<br/>        high: 2,<br/>        low: 3,<br/>        close: 4<br/>      });<br/>    }<br/>  );<br/>});</span></pre><p id="adfb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我定义股票图，绘制它，并设置网格线。因为数字在查看股票数据值时很重要，所以为了更好的可读性，我启用了所有网格线。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="4cd6" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// create stock chart<br/></em></strong>var chart = anychart.stock();</span><span id="577f" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// create first plot on the chart<br/></em></strong>var plot = chart.plot(0);</span><span id="819e" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set grid settings<br/></em></strong>plot.yGrid(true).xGrid(true).yMinorGrid(true).xMinorGrid(true);</span></pre><p id="8c82" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在是创造这个系列的主要部分。这是通过使用烛台绘图函数和我前面定义的映射来完成的。我给这个系列命名并添加一个图例图标。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="3ea6" class="mc kv in mr b gy mw mx l my mz">var series = plot.candlestick(mapping)<br/>  .name('Tesla');</span><span id="5a3e" class="mc kv in mr b gy na mx l my mz">series.legendItem().iconType('rising-falling');</span><span id="f997" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// create scroller series with mapped data<br/></em></strong>chart.scroller().candlestick(mapping);</span></pre><p id="e7e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">股价图有长期的价值。因此，我在主图表下添加了一个scroller系列，使用户能够指定日期范围并仔细查看数据的值。我为默认显示设置了一年的范围。</p><p id="39ec" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了方便用户，我提供了一个范围选择器，用户可以手动输入日期，还提供了一个范围选择器，只需点击一下就可以选择常用的时间段。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="2f22" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// set chart selected date/time range<br/></em></strong>chart.selectRange('2020-11-27', '2021-11-26');</span><span id="a72a" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// create range picker<br/></em></strong>var rangePicker = anychart.ui.rangePicker();</span><span id="8046" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// init range picker<br/></em></strong>rangePicker.render(chart);</span><span id="6855" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// create range selector<br/></em></strong>var rangeSelector = anychart.ui.rangeSelector();</span><span id="3373" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// init range selector<br/></em></strong>rangeSelector.render(chart);</span></pre><p id="3e43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我给图表一个标题，引用之前定义的图表容器，并绘制图表。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="b272" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// sets the title of the chart<br/></em></strong>chart.title('Tesla Inc. Stock Chart');</span><span id="defa" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set container id for the chart<br/></em></strong>chart.container('container');</span><span id="d0fa" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// initiate chart drawing<br/></em></strong>chart.draw();</span></pre><p id="104c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是收盘铃，一个美丽的，功能的股票图表创建！</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/f6477630fa3b567d1837130e98561167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dwV7xZ4_diILxJk4"/></div></figure><p id="fefb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以很快发现特斯拉的股价在过去一年中一直在波动，但总体趋势是积极的。将鼠标悬停在图表上，可以看到显示日期以及开盘、盘高、盘低和收盘值的功能性工具提示。这是这里已经提供的许多有用功能之一。</p><p id="68c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在<a class="ae kt" href="https://codepen.io/shacheeswadia/pen/MWEWVxy" rel="noopener ugc nofollow" target="_blank"> CodePen </a>和<a class="ae kt" href="https://playground.anychart.com/Koc2SDL3/" rel="noopener ugc nofollow" target="_blank"> AnyChart Playground </a>上看到这个JS股票图表的初始版本以及完整的代码。</p><h1 id="9729" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">定制JavaScript股票图表</h1><p id="b1a8" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">这个交互式股票图表看起来已经很不错了，展示了可以轻松深入研究的有用信息。但是，这仅仅是开始。</p><p id="60c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将向您展示如何通过添加更多功能(更改系列、添加技术指标、注释等)和微调其可视化来定制JS股价图，所有这些都只需几个简化的操作。</p><h2 id="bec1" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">A.系列类型和条件着色</h2><p id="5237" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">股价图通常用烛台来表示。但这不是强制性的。在这里，我想向您展示如何将数据可视化类型从显示所有四个值(开盘、盘高、盘低和收盘)的蜡烛图快速切换到折线图，在折线图中，您可以指定要绘制的值(默认情况下是第一个值，即本例中的开盘价)。因为只表示了一个值，所以这里不需要我前面做的映射。</p><p id="3979" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，我简单地将系列指定为“line ”,并直接将数据表作为参数传递。</p><p id="30c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了在线股价图中显示上涨和下跌的价格，我添加了有条件的颜色，如果价格下降，我将线的颜色指定为红色，如果价格上升，则为绿色。这可以使用内置的上升冲程和下降冲程功能非常方便地完成。要指定的选项有描边颜色、描边宽度、描边类型和描边结尾。</p><p id="d5b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我还将scroller系列更改为线图表示。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="a04d" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// create and setup line series<br/></em></strong>var lineSeries = plot.line(dataTable)<br/>  .name('Tesla');</span><span id="6a7a" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set rising/falling and normal stroke settings<br/></em></strong>lineSeries.risingStroke('#2FA85A', 3, null, 'round', 'round');<br/>lineSeries.fallingStroke('#EE4237', 3, null, 'round', 'round');</span><span id="6968" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// create scroller series <br/></em></strong>chart.scroller().line(dataTable);</span></pre><p id="5d68" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在<a class="ae kt" href="https://codepen.io/shacheeswadia/pen/jOGOxqq" rel="noopener ugc nofollow" target="_blank"> CodePen </a>和<a class="ae kt" href="https://playground.anychart.com/07Q4lOrV" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>上仔细看看这个新的JS股价图版本。在接下来的步骤中，我将继续绘制烛台系列来表示数据。</p><h2 id="9607" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">B.技术指标:均线和包络线</h2><p id="8d66" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">交易员和投资者通常依靠技术分析来确定趋势，了解金融工具是超买还是超卖，并决定何时卖出或买入。有多种技术指标可以对此有所帮助。让我们看看如何快速将它们添加到股票图表中。</p><p id="c44e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我想包括两个流行的技术指标:指数移动平均线(EMA)和包络线。这两个指示器都可以用很少的代码很容易地绘制出来。</p><p id="8671" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我所要做的就是映射我想要使用的数据值，我将它指定为收盘值，指示笔画宽度和颜色，EMA线绘制在烛台图上。如果没有设置自定义值，我可以指定EMA周期，默认值是50。</p><p id="8105" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">类似地，对于包络线指标，我只指定了绘图，较低和较高的波段线绘制在图表上。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="78ea" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// create EMA indicators with period 50<br/></em></strong>plot<br/>  .ema(dataTable.mapAs({ value: 4 }))<br/>  .series()<br/>  .stroke('1.5 #455a64');</span><span id="7286" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// create envelope indicator<br/></em></strong>chart.plot().env(mapping);</span></pre><p id="7ba2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">看看下面这个带有均线和信封的JS股票图是什么样子的。您也可以在<a class="ae kt" href="https://codepen.io/shacheeswadia/pen/WNZNJjw" rel="noopener ugc nofollow" target="_blank"> CodePen </a>【或<a class="ae kt" href="https://playground.anychart.com/Q2Jze1Rr/" rel="noopener ugc nofollow" target="_blank"> AnyChart Playground </a>】上玩它的互动版本(及其完整代码)，例如，您可以通过点击相应的图例项来隐藏和显示这些额外的技术指标线。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/1dd7bc33753da42d20618b783d511503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7bATcMf76TE0IX5p"/></div></figure><h2 id="2e0d" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">C.MACD指示器</h2><p id="a026" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">MACD或移动平均线收敛发散是一个动量指标，通常用信号线绘制。它是用26周期和12周期均线计算的，当它分别穿过信号线的上方或下方时，它会显示买入或卖出的信号。</p><p id="32b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将MACD指标绘制成一个单独的图，代表MACD线、信号线，并在蜡烛图下方绘制一个面积直方图。我做的第一件事是禁用烛台图表的X轴，因为我将在MACD图。现在，我定义第二个图并绘制数据值。</p><p id="7b11" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我将系列类型设置为面积直方图，并为正值和负值定义描边和填充设置。最后，我只是设置这个图的高度为总高度的40%。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="5c64" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// second plot to show macd values<br/></em></strong>var indicatorPlot = chart.plot(1);</span><span id="b8ba" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// map the values<br/></em></strong>var macdIndicator = indicatorPlot.macd(mapping);</span><span id="b447" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set series type for histogram series.<br/></em></strong>macdIndicator.histogramSeries('area');</span><span id="1c49" class="mc kv in mr b gy na mx l my mz">macdIndicator<br/>  .histogramSeries()<br/>  .normal()<br/>  .fill('green .3')<br/>  .stroke('green');</span><span id="ec8f" class="mc kv in mr b gy na mx l my mz">macdIndicator<br/>  .histogramSeries()<br/>  .normal()<br/>  .negativeFill('red .3')<br/>  .negativeStroke('red');</span><span id="9fe0" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set second plot's height<br/></em></strong>indicatorPlot.height('40%');</span></pre><h2 id="8d8f" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">D.超棒的振荡器</h2><p id="7a70" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Awesome振荡器(AO)通过比较市场动量和整个股票价格在更长时间内的波动来显示工具的强弱。</p><p id="6b7b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我还将这个指标绘制成主图表下面的第二个图表，就像上一步一样。我给你看这个是为了说明各种技术指标可以很容易地绘制出来。</p><p id="6168" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如我对MACD图所做的那样，类似地，我定义了第二个图，并使用ao函数为awesome振荡器指标绘制数据。</p><p id="671c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将线条的颜色指定为绿色代表上涨，红色代表下跌，并将图表的高度设置为40%。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="ff17" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// create awesome oscillator series<br/></em></strong>var aoIndicator = indicatorPlot.ao(mapping);</span><span id="28b8" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set rising and falling stroke settings<br/></em></strong>aoIndicator.series().risingStroke('green');<br/>aoIndicator.series().fallingStroke('red');</span><span id="662b" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set second plot's height<br/></em></strong>indicatorPlot.height('40%');</span></pre><p id="c697" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您将鼠标悬停在顶部或底部图表上，您将在右上角看到两个图标，这两个图标允许您上下移动该图，并使其全屏显示，隐藏另一个图表。</p><p id="d0da" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在CodePen上玩这些JS股票图表版本，这里有MACD图<a class="ae kt" href="https://codepen.io/shacheeswadia/pen/abLbGLG" rel="noopener ugc nofollow" target="_blank"/>【和在<a class="ae kt" href="https://playground.anychart.com/3bds3HuK" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>】,这里有AO图<a class="ae kt" href="https://codepen.io/shacheeswadia/pen/qBPBYVM" rel="noopener ugc nofollow" target="_blank"/>【和在<a class="ae kt" href="https://playground.anychart.com/VFhmH6Ey" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>】。</p><h2 id="0043" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">E.调色板</h2><p id="2db9" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">让你的股价图看起来个性化的一个简单有效的方法是改变图表的颜色。AnyChart库有预构建的设计主题，所以我只需要向<code class="fe mo mp mq mr b">head</code>部分添加必要的脚本，并简单地在代码中设置它。在这里，我应用了单色主题。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="ba02" class="mc kv in mr b gy mw mx l my mz">&lt;script src="https://cdn.anychart.com/releases/8.11.0/themes/monochrome.min.js"&gt;&lt;/script&gt;</span><span id="b4ca" class="mc kv in mr b gy na mx l my mz">...</span><span id="601b" class="mc kv in mr b gy na mx l my mz"><strong class="mr io"><em class="nb">// set chart theme<br/></em></strong>anychart.theme('monochrome');</span></pre><p id="7fdb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">看看股票图表看起来有多复杂和精致！</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/15a1c87b7787700fa9bbca75469a8c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fe5Qe2GFbv-z2miR"/></div></figure><p id="8ac9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，在最后的定制中，我将向您展示一个在股票图表中经常被要求的更酷的东西。</p><h2 id="6ec9" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">F.说明和注释</h2><p id="c641" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">在股价图中，可能需要添加额外显示或突出显示某些内容的自定义对象。例如，在AnyChart JS库中，有一个有用的特性可以让你创建<a class="ae kt" href="https://docs.anychart.com/Stock_Charts/Drawing_Tools_and_Annotations/Overview" rel="noopener ugc nofollow" target="_blank">绘图和注释</a>。</p><p id="4997" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将在这里向您展示如何突出显示一个特定的时期，并为它提供一个解释性说明。我将展示由于埃隆·马斯克出售大量自己的股票而导致特斯拉股价下跌的时候。</p><p id="d921" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我定义注释，然后创建一个矩形。我设置了各种参数，如矩形的宽度和高度，以及指示矩形开始和结束的日期。我还设置了从公司徽标中选择红色的笔画和填充值。</p><p id="ac2a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我在矩形下方创建注释标签。我再次定义标签的起始位置、尺寸、颜色，当然还有文本。</p><pre class="ly lz ma mb gt ms mr mt mu aw mv bi"><span id="0177" class="mc kv in mr b gy mw mx l my mz"><strong class="mr io"><em class="nb">// create annotation rectangle<br/></em></strong>annotation.rectangle({<br/><strong class="mr io"><em class="nb">  // X - part of the first anchor<br/></em></strong>  xAnchor: '2021-11-08',<br/><strong class="mr io"><em class="nb">  // Y - part of the first anchor<br/></em></strong>  valueAnchor: 950,<br/><strong class="mr io"><em class="nb">  // X - part of the second anchor<br/></em></strong>  secondXAnchor: '2021-11-26',<br/><strong class="mr io"><em class="nb">  // Y - part of the second anchor<br/></em></strong>  secondValueAnchor: 1250,<br/><strong class="mr io"><em class="nb">  // set stroke settings<br/></em></strong>  stroke: '3 #c20000',<br/><strong class="mr io"><em class="nb">  // set fill settings<br/></em></strong>  fill: '#c20000 0.25'<br/>});<br/>      <br/><strong class="mr io"><em class="nb">// create annotation and set settings<br/></em></strong>annotation<br/>  .label()<br/>  .xAnchor('2021-11-26')<br/>  .valueAnchor(950)<br/>  .anchor('right-top')<br/>  .offsetY(5)<br/>  .padding(6)<br/>  .text('Elon Musk sells Tesla stock worth $1.05 billion')<br/>  .fontColor('#fff')<br/>  .background({<br/>    fill: '#c20000 0.75',<br/>    stroke: '0.5 #c20000',<br/>    corners: 2<br/>  });</span></pre><p id="05cb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这只是一个简单的例子。如果你想了解更多关于这样的绘图和注释选项在现实生活中的外观和工作方式，请使用这个<a class="ae kt" href="https://www.anychart.com/solutions/drawing-tools/" rel="noopener ugc nofollow" target="_blank">演示工具</a>。</p><p id="b78d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就完成了定制，一个可爱的、交互式的、有洞察力的JS股票图表就完成了。看看下面的最终版本。它看起来不像是你会把钱押在上面的东西吗？你可以在<a class="ae kt" href="https://codepen.io/shacheeswadia/pen/wvrvXrr" rel="noopener ugc nofollow" target="_blank"> CodePen </a>【或者在<a class="ae kt" href="https://playground.anychart.com/69Nf8319/" rel="noopener ugc nofollow" target="_blank"> AnyChart Playground </a>】上查看完整的HTML/CSS/JavaScript代码，并根据自己的喜好定制这个股票图表。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/8cf80f594206201375aeb450c844f6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N3AnXRdvcbePvjXD.png"/></div></figure><h1 id="6710" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="ee96" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">正如你所看到的，创建一个带有技术指标和注释的时尚的交互式股票图表最初看起来很复杂，但实际上非常简单方便。JavaScript图表库有很多，对于大多数支持这种图表类型的库来说，构建股票图表的过程是相似的。因此，您可以根据自己的需求和特定任务选择使用哪一种。</p><p id="1d69" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，我向您展示了如何创建一种类型的股票图表——烛台状——并解释了如何快速更改系列，使其成为一条线。但也有其他有趣的股票图表类型，你可以自己仔细看看，例如，<a class="ae kt" href="https://www.anychart.com/products/anystock/gallery/Stock_Chart_Types/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="1d7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接着，制作股票图表，看看你能否预测接下来会发生什么。当然，在股票市场上，没有哪只股票是稳赚不赔的。但是学习如何绘制一个图肯定会是一个成功的决定！如果你需要任何帮助，请与我联系。</p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="729b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nb">经沙奇·斯瓦迪亚许可出版。原载于2022年1月4日</em> <a class="ae kt" href="https://betterprogramming.pub/how-to-create-a-stock-chart-in-javascript-c250769045c2" rel="noopener ugc nofollow" target="_blank"> <em class="nb">更好编程</em> </a> <em class="nb">标题为“使用AnyChart JavaScript库构建股票图表”。</em></p><p id="c34b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nb">在</em><a class="ae kt" href="https://www.anychart.com/chartopedia/chart-type/stock-chart/" rel="noopener ugc nofollow" target="_blank"><em class="nb">Chartopedia</em></a><em class="nb">上查看更多关于股票图表的信息，这是一个免费的图表类型指南。查看其他</em> <a class="ae kt" href="https://www.anychart.com/blog/category/javascript-chart-tutorials/" rel="noopener ugc nofollow" target="_blank"> <em class="nb"> JavaScript制图教程</em> </a> <em class="nb">。</em></p><p id="9c2f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你想为我们的博客创建一个很酷的客座博文吗？我们迫不及待地希望 <a class="ae kt" href="https://www.anychart.com/support/" rel="noopener ugc nofollow" target="_blank"> <em class="nb">听到您的</em> </a> <em class="nb">来讨论您的想法。</em></p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="2771" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nb">原载于2022年2月24日https://www.anychart.com</em><a class="ae kt" href="https://www.anychart.com/blog/2022/02/24/stock-chart-js/" rel="noopener ugc nofollow" target="_blank"><em class="nb"/></a><em class="nb">。</em></p><p id="d1c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nb">更多内容请看</em><a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">plain English . io</em></strong></a><em class="nb">。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nb">免费周报</em> </strong> </a> <em class="nb">。关注我们关于</em><a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">Twitter</em></strong></a><em class="nb">和</em><a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nb">LinkedIn</em></strong></a><em class="nb">。加入我们的</em> <a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nb">社区不和谐</em> </strong> </a> <em class="nb">。</em></p></div></div>    
</body>
</html>