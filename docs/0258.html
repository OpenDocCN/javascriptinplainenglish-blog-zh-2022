<html>
<head>
<title>Create a Pagination in a React Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以反应方式创建分页</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-pagination-in-a-react-way-df5c6fe1e0c7?source=collection_archive---------0-----------------------#2022-01-15">https://javascript.plainenglish.io/create-a-pagination-in-a-react-way-df5c6fe1e0c7?source=collection_archive---------0-----------------------#2022-01-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="633b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一个漂亮的分页怎么样？🧚‍♂️</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/21a89a4dd689f84f8b2854baf48c1cab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lokw3-BW1Dkz8FUNe3cqzg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">You will cross the bridge when you get to it — — 船到桥头自然直</figcaption></figure><p id="3e06" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">分页一直是一个非常有趣的任务，在我一直在做的项目中，我创建了一个分页，它有三种与页面相关的不同显示。📑</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="7bdc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我简单总结一下。✂️</p><p id="e34f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，每个页面需要显示15张不同的卡片，API总共返回104页。</p><p id="838b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用户可以点击网站底部的分页按钮，或者点击<strong class="jm io"> <em class="lf">上一页</em> </strong> / <strong class="jm io"> <em class="lf">下一页</em> </strong>按钮来切换页面。</p><p id="f7d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">👉站点初始加载时，分页需要显示<strong class="jm io">第一个</strong>和<strong class="jm io">最后一个</strong>三个按钮，中间的<strong class="jm io">按钮被替换为<strong class="jm io">省略号</strong>。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lg"><img src="../Images/d2716bb2739546f8242e33fef70dd85e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_UlkVhGcaSXBU6tEmQr8w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Pagination with first 3 and last 3 page buttons and a <strong class="bd lh">next</strong> button</figcaption></figure><p id="b823" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">👉当用户切换到第4页时，分页的前面会出现一个上一页按钮，它只会显示第一个和最后一个按钮，以及<strong class="jm io">当前</strong>页按钮和两个<strong class="jm io">前的</strong>/<strong class="jm io">/<em class="lf"/></strong>后的<strong class="jm io">按钮，其他按钮都用<strong class="jm io">省略号</strong>代替。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi li"><img src="../Images/c574a97631afb4aff7cb067148239a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4op9gBWdjJv_HgX2tMj4Og.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Pagination with first and last buttons and <strong class="bd lh">previous</strong> / <strong class="bd lh">next</strong> button, plus <strong class="bd lh">current</strong> / <strong class="bd lh">before</strong> / <strong class="bd lh">after</strong> buttons</figcaption></figure><p id="860b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">👉用户可以跳转到最后一页，下一个按钮<strong class="jm io">应该消失，分页只显示前三个按钮和前一个<strong class="jm io">按钮</strong>，中间的<strong class="jm io">按钮</strong>被替换为<strong class="jm io">省略号</strong></strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lj"><img src="../Images/dd5bee6bc481528355b7a5b7ec829018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-tf8GkV1Ma75urStVmpbIA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Pagination with first 3 and last 3 page buttons and a <strong class="bd lh">previous</strong> button</figcaption></figure><p id="474f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">🦜:同样重要的是，按钮<strong class="jm io">样式</strong>应该根据当前页面进行更新。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="b951" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将在下面分享我的步骤，我相信有更好的方法，但也许你会发现这也很有趣和有用。✏️</p><p id="0fc0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">首先</strong>，对于初始站点渲染，在React <strong class="jm io"> useEffect </strong>钩子内，从第1页获取数据，用API响应更新它们。</p><p id="63bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第二个</strong>，将需要的数据传递给我们稍后将创建的分页子组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lk"><img src="../Images/c4433e269625f6a23dff2a03fbf05472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cow2pDjq7azKVqz-XDli7w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Ignore the <strong class="bd lh">fetchPageData </strong>function for now, it will be used later 🍭</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="7b3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，创建<strong class="jm io">分页</strong>组件。</p><p id="4ff4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我将从<strong class="jm io">上一个</strong>按钮开始，它应该只有在当前页面达到<strong class="jm io"> 4 </strong>时才可见:👇</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ll"><img src="../Images/b5f6b547f95dd390a7173fee72903d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zj795Mz6eYZCLswAKRJGsA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">render Previous Button, ignore style and onClick function for now, we will get there later</figcaption></figure><p id="50c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，我们可以创建<strong class="jm io">第一个</strong>三个条件渲染按钮，如果当前页面≤ 3或≥最后一页- 2，它们应该是可见的，并且第一个按钮应该总是出现👇</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lm"><img src="../Images/30f08d6e0a17f0a90be33dc1b5bbf93e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tdnv7n_KbLn34M2trWSftA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">render First three buttons</figcaption></figure><p id="5f0c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当然，我们还得定义两个<strong class="jm io">省略号</strong>，它们是<strong class="jm io">禁用</strong>👐</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/ebfcf4b97960045040966b7446d9cd90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ibDysseTB1XnTgWjw8qF6Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">first ellipsis after first three buttons</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lo"><img src="../Images/1cf6ec7861595c1eda17220e6afba012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yKwiLx-qfOptarbWadhyTw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">second ellipsis before last three buttons</figcaption></figure><p id="f169" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们可以创建<strong class="jm io">最后</strong>三个条件渲染按钮，如果当前页面&lt; 4或≥最后页面-2，它们应该是可见的👇</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lp"><img src="../Images/7419a90c51146a6722010161c0d3cb62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9oDOUhi2O28KdYVUZaOuw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">render last buttons</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/b8c39dd2afe9cac34ed750eaf56f03b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xw74leD5xilun6-OLJNPww.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">the last button always appear</figcaption></figure><p id="171a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下一步，在分页结束时创建<strong class="jm io"> Next </strong>按钮，如果当前页面不是最后一页，该按钮应该总是可见的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/0cb3b694253bffc3e46852316ca95b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1l0WEpS3cJWcVkdhn_klAA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">render <strong class="bd lh">Next</strong> button</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="3e48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在所有这些之后，我们最终可以创建三个<strong class="jm io">中间的</strong>按钮，它们应该在当前页面≥ 4或≤最后三页时出现，我们为<strong class="jm io">当前</strong>页面、前一页<strong class="jm io">和</strong>后一页<strong class="jm io">过滤这三个按钮，然后映射它们👇</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ls"><img src="../Images/79b6d71df49a61cd53c4974b4d0f54f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9NqsMO4P3vUmAwgyQrv0Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">render 3 <strong class="bd lh">middle</strong> buttons</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="d4bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些是分页组件的渲染按钮，我们现在需要的是最后三个步骤:🧚‍♂️</p><p id="e063" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">首先</strong>，我们必须使每个按钮可点击，每次用户点击它们，它应该获取页面数据并呈现不同的卡片，所以我们只需要一个<strong class="jm io"> fetchPageData </strong>函数，我们在开始时忽略了这个函数，* <em class="lf">卡片内容存储在另一个组件中，超出了本文的范围</em>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lt"><img src="../Images/22cd25f12f13ed51fc3ebedca24d2084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TpDo7TYy9I3kaPCgP3g-Ig.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">The fetch function has method ‘GET’ which is defined in an external file something like this below</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/47b14d2e4eaff56a8b909508c474cfdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CFu0XxLnrStxCdrx_UZVMA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">external api file</figcaption></figure><p id="7b6e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第二个</strong>，在每个分页按钮上调用这个函数，不同的页面类似如下👇</p><blockquote class="lv lw lx"><p id="821e" class="jk jl lf jm b jn jo jp jq jr js jt ju ly jw jx jy lz ka kb kc ma ke kf kg kh ig bi translated">fetchPageData(当前页面)</p></blockquote><p id="0660" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">最后一步</strong>，定义<strong class="jm io">活动按钮</strong>样式类似下图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/74c0b9bd03fa26b032c9afed734294cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKkupbOukixzrNoCv2RXWA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">active button regarding to the page</figcaption></figure><p id="0e7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你注意到了，在上面的代码中，我们为每个页码为的<strong class="jm io">按钮准备了如下内容，你可以使用<a class="ae mc" href="https://www.npmjs.com/package/classnames" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> classnames </strong> </a>来定义条件样式，这是我最喜欢的写SCSS的方式。✨</strong></p><pre class="kj kk kl km gt md me mf mg aw mh bi"><span id="4fed" class="mi mj in me b gy mk ml l mm mn">className={classNames(styles.circle, { [styles.<strong class="me io">activeButton</strong>]: btn.label === String(currentPage) })}</span></pre></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="b042" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就是这样！这是我简单的反应分页，希望你喜欢它。</p><p id="ceb7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢您的阅读！🙌</p><p id="f3f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lf">更多内容请看</em><a class="ae mc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lf">plain English . io</em></strong></a><em class="lf">。报名参加我们的</em> <a class="ae mc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lf">免费每周简讯</em> </strong> </a> <em class="lf">。在我们的</em> <a class="ae mc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lf">社区</em> </strong> </a> <em class="lf">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>