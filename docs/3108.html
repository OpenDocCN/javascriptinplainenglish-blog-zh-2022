<html>
<head>
<title>How to Integrate Google Analytics into Your Next.js Web App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将谷歌分析整合到你的Next.js网络应用中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-integrate-google-analytics-into-your-next-js-web-app-2b8ad7283ad5?source=collection_archive---------5-----------------------#2022-08-01">https://javascript.plainenglish.io/how-to-integrate-google-analytics-into-your-next-js-web-app-2b8ad7283ad5?source=collection_archive---------5-----------------------#2022-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d838" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在线追踪你的访客。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/58bf7b0b36d5c337c79ac673e530fa81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3CYj65FLgdw-nVM8"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@isaacmsmith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Isaac Smith</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="615d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天在这篇文章中，我们将看到如何将Google Analytics添加到我们的Next.js应用程序中。所以事不宜迟，让我们直接开始吧。</p><h2 id="ad14" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">步骤1:创建新的Next.js应用程序</h2><p id="7538" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，让我们通过在终端中运行命令来创建一个新的Next.js应用程序:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="ecc4" class="ls lt iq mr b gy mv mw l mx my">npx create-next-app demo-app</span></pre><p id="221a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您已经有一个现有的Next.js应用程序，并希望添加Google Analytics，则不需要这一步。</p><h2 id="3906" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">步骤2:在谷歌分析中创建新的属性</h2><p id="ba39" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在，让我们进入<a class="ae kv" href="https://analytics.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌分析网站</a>。创建你的谷歌分析账户，如果你还没有的话。</p><p id="4d89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建谷歌分析帐户后，点击左下角的“管理”部分，然后点击“创建属性”给这个属性起一个名字，并填写表单要求的所有其他人员。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/e964f0c83485171428c53bc643cc1891.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1PvKmcSR-0MZNz45YJLWtg.png"/></div></div></figure><h2 id="2f50" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">步骤3:在谷歌分析中创建数据流</h2><p id="c8cb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">接下来，我们需要为Next.js应用程序设置数据流。在这里，我们可以为三种类型的平台设置数据流。当我们将分析添加到Next.js应用程序时，我们将选择“Web”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/40de56824e0d782e551a9d5242e4d772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EqXQPqduOMHcMl43b3_TlA.png"/></div></div></figure><p id="2322" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们应该给出我们的网站网址和流名称。完成后，点击“创建流”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/f89a96c1cc0ec914e4d3c48f41038259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0F11FlbidyjbY0iVQL7k-w.png"/></div></div></figure><h2 id="9bc9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">步骤4:将谷歌分析脚本添加到你的Next.js应用程序中</h2><p id="dd5b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">创建流之后，您将获得web流详细信息页面。展开“Global site tag (gtag.js)”，您应该会看到一些脚本代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/6a436422ceb01ab91d240dd89e08ff15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*is_kgNLpcTHtdwg9k4DA3Q.png"/></div></div></figure><p id="2641" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，将这个脚本添加到Next.js应用程序的<code class="fe nb nc nd mr b">_app.tsx</code>中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/93edeef893009f0f46148eaef23e68fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wbh1tg-teVxo0aksr9MrEQ.png"/></div></div></figure><p id="317f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用Next.js的脚本组件来呈现脚本标签。我们在脚本组件中添加了<code class="fe nb nc nd mr b">strategy=”lazyOnload”</code>。我们还将谷歌分析代码放在我们的环境变量中(在<code class="fe nb nc nd mr b">.env</code>文件中)，命名为<code class="fe nb nc nd mr b">NEXT_PUBLIC_GOOGLE_ANALYTICS_CODE</code>。剩下的和我们从Google Analytics网站复制的差不多。</p><h2 id="93c8" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">第五步:测试你的网络应用是否正确设置了谷歌分析</h2><p id="1811" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们已经在Next.js web应用程序中完成了Google Analytics的设置。现在我们需要测试谷歌分析是否设置正确。</p><p id="7357" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们连接到我们的web应用程序，并从浏览器打开控制台。在控制台上，让我们写下<code class="fe nb nc nd mr b">dataLayer</code>,然后按回车键。如果Google Analytics在我们的web应用程序上设置正确，我们应该会看到类似底部的东西。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/4c0feca574a51dce8c73493c401d2586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wun-8kxVxoHlOrxRHEz74g.png"/></div></div></figure><h2 id="3b6d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">结论</h2><p id="d2b3" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们已经成功地将Google Analytics集成到我们的Next.js web应用程序中。我们现在可以从谷歌分析图表中分析我们的网络访问者。</p><p id="d14a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ng">通过</em><a class="ae kv" href="https://www.linkedin.com/in/ludehsar/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ng">Linkedin</em></strong></a><em class="ng">或</em> <a class="ae kv" href="https://rashedul-alam.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ng">与我联系我的网站</em> </strong> </a> <em class="ng">。</em></p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="2c62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ng">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ng">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ng">免费每周简讯</em> </strong> </a> <em class="ng">。关注我们</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ng">推特</em> </strong> </a> <em class="ng">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ng">LinkedIn</em></strong></a><em class="ng">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ng">社区不和谐</em> </strong> </a> <em class="ng">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ng">人才集体</em> </strong> </a> <em class="ng">。</em></strong></a></p></div></div>    
</body>
</html>