<html>
<head>
<title>Navigation between Views in Vue.js with Vue Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue路由器在Vue.js中的视图之间导航</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/navigation-between-views-in-vue-js-with-vue-router-2d890f0b0fb1?source=collection_archive---------9-----------------------#2022-09-10">https://javascript.plainenglish.io/navigation-between-views-in-vue-js-with-vue-router-2d890f0b0fb1?source=collection_archive---------9-----------------------#2022-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/923077169ddf2aa707c0e89bd0e2685a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0NvR4Sl9IBPxSBmbtlUSiA.png"/></div></div></figure><p id="093f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Vue 中创建一个应用程序后，您通常会希望它由多个视图或页面组成。为此，我们需要使用一个名为<code class="fe kx ky kz la b">vue-router</code>的附加包。创建一个简单的Vue应用程序很容易，所以在本指南中，我们将看看如何将<code class="fe kx ky kz la b">vue-router</code>添加到您的新应用程序中。要首先创建您的应用程序，您只需运行以下命令:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="49e5" class="lj lk iq la b gy ll lm l ln lo">npm i -g @vue/cli <br/>vue create my-app</span></pre><p id="bbd6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，<strong class="ka ir">添加一个路由器</strong>到你的应用程序中，这样你就可以在页面间导航，也同样简单。也只需运行以下命令:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="258d" class="lj lk iq la b gy ll lm l ln lo">vue add router</span></pre><p id="f59f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可能会询问您是否要使用历史模式。如果你没有偏好，你可以输入<code class="fe kx ky kz la b">Y</code>。之后，您将在项目中获得更多的文件夹和文件。你的整体结构应该是这样的:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="cd7c" class="lj lk iq la b gy ll lm l ln lo">- public<br/>--- favicon.ico<br/>--- index.html<br/>- src<br/>--- assets<br/>--- components<br/>--- router<br/>------ index.js<br/>--- views<br/>------ About.vue<br/>------ Home.vue<br/>--- App.vue<br/>--- main.js<br/>- package.json<br/>- package-lock.json</span></pre><p id="e876" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，您现在有了许多路由器的新文件，以及对现有文件的一些更改。例如，在<code class="fe kx ky kz la b">main.js</code>中，您的应用程序将使用现在已经创建的路由器文件夹。<code class="fe kx ky kz la b">index.js</code>文件将被导入，如下所示:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="d876" class="lj lk iq la b gy ll lm l ln lo">import { createApp } from 'vue'<br/>import App from './App.vue'<br/>import router from './router'</span><span id="48fd" class="lj lk iq la b gy lp lm l ln lo">createApp(App).use(router).mount('#app')</span></pre><h1 id="1682" class="lq lk iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">修改您的Vue路由器</h1><p id="d007" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">在您的<code class="fe kx ky kz la b">/router/index.js</code>文件中，您将找到路由器的配置！您可以在这里设置页面。默认情况下，您会发现您的<code class="fe kx ky kz la b">router</code>看起来有点像这样:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="fe44" class="lj lk iq la b gy ll lm l ln lo">import { createRouter, createWebHistory } from 'vue-router'<br/>import Home from '../views/Home.vue'</span><span id="003d" class="lj lk iq la b gy lp lm l ln lo">const routes = [<br/>  {<br/>    path: '/',<br/>    name: 'Home',<br/>    component: Home<br/>  },<br/>  {<br/>    path: '/about',<br/>    name: 'About',<br/>    // route level code-splitting<br/>    // this generates a separate chunk (about.[hash].js) for this route<br/>    // which is lazy-loaded when the route is visited.<br/>    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue')<br/>  }<br/>]</span><span id="4c12" class="lj lk iq la b gy lp lm l ln lo">const router = createRouter({<br/>  history: createWebHistory(process.env.BASE_URL),<br/>  routes<br/>})</span><span id="4c54" class="lj lk iq la b gy lp lm l ln lo">export default router</span></pre><p id="d7e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以添加路由有两种方式，如上图。您可以使用<code class="fe kx ky kz la b">import()</code>函数导入，或者使用典型的JavaScript <code class="fe kx ky kz la b">import</code>语句导入<code class="fe kx ky kz la b">import</code>。每个<code class="fe kx ky kz la b">route</code>有3个不同的部分:</p><ul class=""><li id="c32b" class="ms mt iq ka b kb kc kf kg kj mu kn mv kr mw kv mx my mz na bi translated"><code class="fe kx ky kz la b">path</code>，这是用户能够导航到的URL。</li><li id="b9b5" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">页面的<code class="fe kx ky kz la b">name</code>，它是页面的标识符。</li><li id="ad49" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">页面的<code class="fe kx ky kz la b">component</code>。这是当用户导航到<code class="fe kx ky kz la b">path</code>时将出现的组件。</li></ul><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="962b" class="lj lk iq la b gy ll lm l ln lo">{<br/>    path: '/',<br/>    name: 'Home',<br/>    component: Home<br/>}</span></pre><p id="fc13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要添加更多，你只需要添加更多到对象中——所以下面我添加了一个新的页面叫做<code class="fe kx ky kz la b">/contact-us</code>，使用了一个在<code class="fe kx ky kz la b">'../views/ContactUs.vue'</code>中找到的组件:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="fb3b" class="lj lk iq la b gy ll lm l ln lo">import { createRouter, createWebHistory } from 'vue-router'<br/>import Home from '../views/Home.vue'</span><span id="e15b" class="lj lk iq la b gy lp lm l ln lo">const routes = [<br/>  {<br/>    path: '/',<br/>    name: 'Home',<br/>    component: Home<br/>  },<br/>  {<br/>    path: '/contact-us',<br/>    name: 'ContactUs',<br/>    component: () =&gt; import('../views/ContactUs.vue')<br/>  },<br/>  {<br/>    path: '/about',<br/>    name: 'About',<br/>    // route level code-splitting<br/>    // this generates a separate chunk (about.[hash].js) for this route<br/>    // which is lazy-loaded when the route is visited.<br/>    component: () =&gt; import(/* webpackChunkName: "about" */ '../views/About.vue')<br/>  }<br/>]</span><span id="368c" class="lj lk iq la b gy lp lm l ln lo">const router = createRouter({<br/>  history: createWebHistory(process.env.BASE_URL),<br/>  routes<br/>})</span><span id="729e" class="lj lk iq la b gy lp lm l ln lo">export default router</span></pre><h1 id="ee55" class="lq lk iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">使用Vue路由器的动态路由</h1><p id="1314" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">这很好，但是如果你的URL端点不是静态的呢？例如，<code class="fe kx ky kz la b">/user/:id</code>，其中<code class="fe kx ky kz la b">:id</code>可以是任何东西。幸运的是，这也是可能的，只需以这种格式编写URL您只需在<code class="fe kx ky kz la b">path</code>属性中编写<code class="fe kx ky kz la b">/user/:id</code>:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="3329" class="lj lk iq la b gy ll lm l ln lo">{<br/>    path: '/user/:name',<br/>    name: 'User',<br/>    component: () =&gt; import('../views/User.vue')<br/>}</span></pre><p id="a9ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你使用过<code class="fe kx ky kz la b">express</code>，那么<code class="fe kx ky kz la b">vue-router</code>的匹配格式是熟悉的——事实上，你可以在<code class="fe kx ky kz la b">express</code>中进行任何路线匹配，你也可以在<code class="fe kx ky kz la b">vue-router</code>中进行。</p><h1 id="191e" class="lq lk iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">使用Vue路由器重定向</h1><p id="f74b" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated"><strong class="ka ir">最后</strong>，我们还可以设置一条路线重定向到另一条。您可以使用<code class="fe kx ky kz la b">redirect</code>属性来做到这一点。例如，下面将把<code class="fe kx ky kz la b">/home</code>重定向到<code class="fe kx ky kz la b">/homepage</code>:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="6ad7" class="lj lk iq la b gy ll lm l ln lo">{<br/>    path: '/home',<br/>    name: 'home',<br/>    redirect: '/homepage'<br/>}</span></pre><p id="0b56" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这也可以定义为命名路由。下面，我们将把<code class="fe kx ky kz la b">/home</code>重定向到名称为<code class="fe kx ky kz la b">about</code>的路线:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="f64b" class="lj lk iq la b gy ll lm l ln lo">{<br/>    path: '/home',<br/>    name: 'home',<br/>    redirect: { name: 'about' }<br/>}</span></pre><p id="4499" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，你也可以把它定义为一个函数..这意味着您可以创建一些更复杂的逻辑来处理重定向:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="b7b0" class="lj lk iq la b gy ll lm l ln lo">{<br/>    path: '/user/:id',<br/>    name: 'home',<br/>    redirect: (to) =&gt; {<br/>        // to will contain information about the route<br/>        // to.params.id will be whichever `id` is in the URL in /user/:id<br/>    }<br/>}</span></pre><h1 id="783d" class="lq lk iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">使用Vue路由器在页面间导航</h1><p id="8939" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">现在我们已经定义了我们的路由器，我们想在我们的应用程序中使用它。您可能会注意到您的<code class="fe kx ky kz la b">App.vue</code>文件略有变化，包含如下内容:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="a4d0" class="lj lk iq la b gy ll lm l ln lo">&lt;template&gt;<br/>    &lt;div id="nav"&gt;<br/>        &lt;router-link to="/"&gt;Home&lt;/router-link&gt; |<br/>        &lt;router-link to="/about"&gt;About&lt;/router-link&gt;<br/>    &lt;/div&gt;<br/>    &lt;router-view/&gt;<br/>&lt;/template&gt;</span></pre><p id="14d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kx ky kz la b">&lt;router-link&gt;</code>标签可用于在路由器<code class="fe kx ky kz la b">index.js</code>文件中定义的路由之间轻松导航。点击后,<code class="fe kx ky kz la b">&lt;router-view&gt;</code>标签将最终包含您的路线。不过，每条路由还将包含它们自己的<code class="fe kx ky kz la b">&lt;router-view&gt;</code>，这意味着您可以拥有嵌套路由。这些都可以在<code class="fe kx ky kz la b">/routes/index.js</code>中定义。例如，下面是一个嵌套路由，其中包含两个潜在的子路由<code class="fe kx ky kz la b">dashboard</code>和<code class="fe kx ky kz la b">posts</code>:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="6c95" class="lj lk iq la b gy ll lm l ln lo">const routes = [<br/>    {<br/>        path: '/user/:name',<br/>        name: 'User',<br/>        component: import('../views/User.vue'),<br/>        children: [{<br/>            path: 'dashboard',<br/>            component: import('../views/Dashboard.vue'),<br/>        },<br/>        {<br/>            path: 'posts',<br/>            component: import('../views/Posts.vue'),<br/>        }]<br/>    }<br/>]</span></pre><p id="f85c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，既然我们已经定义了子组件，我们仍然可以使用<code class="fe kx ky kz la b">/user/:name</code>路径，但是现在有两个额外的组件将在<code class="fe kx ky kz la b">User.vue</code>中呈现，分别通过<code class="fe kx ky kz la b">/user/:name/dashboard</code>和<code class="fe kx ky kz la b">/user/:name/posts</code>访问。所以当<code class="fe kx ky kz la b">User</code>在App.vue <code class="fe kx ky kz la b">&lt;router-view&gt;</code>中渲染时，<code class="fe kx ky kz la b">dashboard</code>和<code class="fe kx ky kz la b">posts</code>将在<code class="fe kx ky kz la b">&lt;router-view&gt;</code>的<code class="fe kx ky kz la b">User.vue</code>版本中渲染。它看起来有点像这样:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="d0ae" class="lj lk iq la b gy ll lm l ln lo">┌ - - - - - - - - - - - - - - - - - - ┐<br/>| App.vue                             |<br/>| ┌ - - - - - - - - - - - - - - - - ┐ |<br/>| | User.vue                        | | <br/>| | ┌ - - - - - - - ┐ ┌ - - - - - ┐ | |<br/>| | | Dashboard.vue | | Posts.vue | | |<br/>| | └ - - - - - - - ┘ └ - - - - - ┘ | |<br/>| └ - - - - - - - - - - - - - - - - ┘ |<br/>└ - - - - - - - - - - - - - - - - - - ┘</span></pre><p id="f7f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这最终意味着当您导航到<code class="fe kx ky kz la b">/user/:name</code>时<code class="fe kx ky kz la b">User.vue</code>组件将始终可见，但是<code class="fe kx ky kz la b">Dashboard.vue</code>和<code class="fe kx ky kz la b">Posts.vue</code>组件只有在您导航到这些路线时才会可见！</p><h1 id="2a70" class="lq lk iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">使用Vue路由器的编程路由</h1><p id="9897" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">就像我们如何使用<code class="fe kx ky kz la b">&lt;router-link&gt;</code>一样，我们也可以使用<code class="fe kx ky kz la b">router.push</code>以编程方式导航到一条路线。<code class="fe kx ky kz la b">&lt;router-link to="/about"&gt;</code>同样可以用JavaScript写成这样:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="c820" class="lj lk iq la b gy ll lm l ln lo">router.push('/about')</span></pre><p id="c9e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们想更高级一点，我们可以传入一个对象。例如，下面将以编程方式导航到定义为<code class="fe kx ky kz la b">About</code>的<code class="fe kx ky kz la b">name</code>路径，并在末尾添加一个查询字符串<code class="fe kx ky kz la b">?id=15</code>。如果<code class="fe kx ky kz la b">About</code>路由的<code class="fe kx ky kz la b">path</code>为<code class="fe kx ky kz la b">/about</code>，那么它将重定向到的URL将为<code class="fe kx ky kz la b">/about/?id=15</code>:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="5abf" class="lj lk iq la b gy ll lm l ln lo">router.push({ name: 'About', query: { id : 15 }})</span></pre><p id="08c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">类似地，相同的JavaScript可以用HTML表示如下:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="8eb1" class="lj lk iq la b gy ll lm l ln lo">&lt;router-link to="{ name: 'About', query: { id : 15 }}"&gt;About&lt;/router-link&gt;</span></pre><h1 id="67ed" class="lq lk iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">用Vue路由器防止后退按钮</h1><p id="27b7" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated"><strong class="ka ir">虽然</strong>这将为用户导航添加一个新的历史记录条目，但我们也可以<strong class="ka ir">为用户替换</strong>当前页面——这意味着没有历史记录或返回上一页的按钮可用。这通常是不可取的，但在某些情况下会有一些有限的用途。为了以编程方式做到这一点，我们可以使用<code class="fe kx ky kz la b">router.replace</code>:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="f748" class="lj lk iq la b gy ll lm l ln lo">router.replace({ name: 'About', query: { id : 15 }})</span></pre><p id="c677" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者在HTML中，追加<code class="fe kx ky kz la b">replace</code>属性:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="73eb" class="lj lk iq la b gy ll lm l ln lo">&lt;router-link to="{ name: 'About', query: { id : 15 }}" replace&gt;About&lt;/router-link&gt;</span></pre><h1 id="0851" class="lq lk iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论</h1><p id="0da9" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">我希望你已经喜欢这个指南开始使用vue路由器。Vue中的路由器是设置一个新应用程序的一个非常重要的部分，它给了我们在Vue中定义和构建页面如此大的灵活性。要了解更多关于Vue的信息，请查看我的其他指南。</p></div></div>    
</body>
</html>