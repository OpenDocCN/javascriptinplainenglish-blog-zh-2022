<html>
<head>
<title>Using the ‘useRef’ Hook for Keeping Track of Counts in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用“useRef”钩子跟踪React中的计数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-useref-hook-for-keeping-track-of-counts-in-react-47294554f857?source=collection_archive---------4-----------------------#2022-02-22">https://javascript.plainenglish.io/using-useref-hook-for-keeping-track-of-counts-in-react-47294554f857?source=collection_archive---------4-----------------------#2022-02-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1f4a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何使用“useRef”钩子在React中跟踪计数的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c2e811b9d5ae5491e8d31d5fea9fefe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uFQcopUbwnt3ivKP"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@mitchel3uo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mitchell Luo</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4b9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您曾经尝试过用useState钩子更新React中的计数器，您可能会遇到一些问题。也许是一个无限循环，或者也许你就是不能访问正确的值。还好有更好的办法！</p><p id="2356" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">useRef挂钩可用于存储需要随时间变化的可变值，但具有不更新状态的优点。这对于计数器来说是完美的，因为我们不想改变状态。我们只想更新值，并且能够在任何时候访问它，而不必担心它是否被更新，因为值是同步更新的！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/d7e7007db60b85252a1873abc018bdea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xWiKwrSAQ6LTTgorGXHy0Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">First, make sure you are importing useRef</figcaption></figure><p id="ea75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们创建一个新的useRef变量时，它将有一个名为. current的属性。我们可以随时更新这个值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/295b44b358876379b2137b2b5b05ae09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJpwEuQ_XS16JBulzYsaNg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">This current count variable is initialized to 0. So currentCount.current === 0</figcaption></figure><p id="0938" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了让这个例子变得有趣和实用，我将假设我有一系列不同的汽车品牌。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/893f040307348486e046a0f8691bf539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xFUqlwhp14A-JiEepqjV9Q.png"/></div></div></figure><p id="c87b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想做的是成对地创建这个数组的切片。我们可以假设我在useEffect中运行这段代码，可能以某种时间间隔在这个数组中循环，但为了简洁起见，我们只说，只要数组的长度大于currentCount.current值，我们就希望这段代码执行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lu"><img src="../Images/eceef25c83b41c15b6d6ea708c2db255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l3oYn1bi8ECSL22pI9ZReg.png"/></div></div></figure><p id="13db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是用useState和useRef一起设置状态的好方法。我们希望将selectedSlice设置为前两辆汽车，因此我们从currentCount.current(值为0)到currentCount.current + step(值设置为2)获取值。</p><p id="5d25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，假设这处于某种将继续的循环中，我们将currentCount.current设置为它的新值。现在，当这段代码再次运行时，currentCount的当前值将是2。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lv"><img src="../Images/feac0edbeae1157025004a7fe2ce8841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6S9fxuBTJbz7sN2iInpZhg.png"/></div></div></figure><p id="15c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">顾名思义，useRef钩子很适合跟踪事物。它可以是对DOM元素的引用，也可以是对计数器值的引用，或者可能是计数器值的整个散列！当您希望显示给用户的内容发生实际变化时，最好使用useState挂钩。在这个例子中，我想向用户展示给定时间的两辆汽车。对我们的计数器使用useRef钩子将确保我们的计数器不会干涉！</p><p id="2831" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个话题到此为止。感谢您的阅读。</p><p id="dbed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lw">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="lw">plain English . io</em></strong></a><em class="lw">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lw">免费周报</em> </strong> </a> <em class="lw">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lw">社区</em> </strong> </a> <em class="lw">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>