<html>
<head>
<title>Shopping Cart with React and Stripe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带反应和条纹的购物车</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/shopping-cart-with-react-and-stripe-fbbd6ec8d448?source=collection_archive---------3-----------------------#2022-10-20">https://javascript.plainenglish.io/shopping-cart-with-react-and-stripe-fbbd6ec8d448?source=collection_archive---------3-----------------------#2022-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="60ce" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">现实世界电子商务项目的优秀教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0df128ff317ec1e11bb60310368dc671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dTQyToLDnVSI9Feg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@blakewisz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Blake Wisz</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bbb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">做一个电商网站最重要的部分就是如何连接前端和后端。<strong class="ky ir">库珀代码教程</strong>刷新了我对这个话题的看法。</p><p id="c2a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">链接到他的<a class="ae kv" href="https://www.youtube.com/watch?v=_8M-YVY76O8&amp;t=61s&amp;ab_channel=TraversyMedia" rel="noopener ugc nofollow" target="_blank">教程</a></p><p id="ece8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">GitHub <a class="ae kv" href="https://github.com/coopercodes/ReactEcommerceStoreWithStripeAPI" rel="noopener ugc nofollow" target="_blank">代码</a></p><p id="44e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一部分是构建购物页面的<strong class="ky ir">前端</strong>。</p><p id="264f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文件夹结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/637f7f93e064a25fbe1dadbc4d5d31a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*I6kJ1raaiQG7XufYUiWmAg.png"/></div></figure><p id="1442" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要安装哪些依赖项:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/a79bb44b1ad226fb81d040ada8db5bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*YogMJyJrTC0Lwrht_zq0GQ.png"/></div></figure><p id="7e3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于前端，<em class="lu"> react-bootstrap </em>用于样式化，而<em class="lu"> react-router-dom </em>用于路由页面。</p><p id="a509" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于后端来说，<em class="lu"> express js </em>是针对node js web应用框架，<em class="lu"> cors </em>是针对express的中间件(或者有个替代品叫body-parser)，而<em class="lu"> Stripe </em>是在线支付API。</p><p id="b23a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从<strong class="ky ir"> App.js </strong>可以看出，整个项目包括三个页面，主<em class="lu">商店页面</em>，支付成功时的<em class="lu">成功页面</em>，取消支付时的<em class="lu">取消页面</em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lv"><img src="../Images/4ba3a84cc8c0fb453584294bef3dcc42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*bEmwFVp8Yqb59It6XJGgiQ.png"/></div></div></figure><p id="df48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Navbar包括使用React-bootstrap的Navbar。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/1a5c413388416090fe0ed84015e4c547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*rdOdrYLFT6w5wQPH5Ct89A.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/b45b10024fdffd28e003970cb5616fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*hzUeDIIQv2tBCaGV1uCiDg.png"/></div></figure><p id="0343" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击按钮时，显示<em class="lu">显示</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/c36d902a2f937fe778ad64bc4fdb4bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*vpX4kzP3yBd4yJxqtZ6HoQ.png"/></div></figure><p id="8a92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在导航栏之后，<strong class="ky ir"> Modal </strong>是显示购物车商品的框。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/8e818154e40aaff4c21a3cb85d34ffed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*-sTB5P7MdVFeLvgtkiQmaQ.png"/></div></figure><p id="f48c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">显示购物车中的所有商品。</p><p id="f509" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有产品数据都在<em class="lu"> productsStore.js. </em>中</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ma"><img src="../Images/f1f3c67861acb32d9b8d659e2e7bdb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n_3jn9WhKZ9aZPalVpFy9w.png"/></div></div></figure><p id="c68a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">产品列表是一个用Stripe连接的id为的数组(后面我会解释)。<em class="lu"> getProductData </em>按id为所有上下文使用。</p><p id="ffe8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有购物车逻辑代码都在<em class="lu"> cartContext.js </em>中</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/fdb0d48e88a8f808a0ec87cfb283c1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*sM5K1Rj8bfq3m_13HcHXOQ.png"/></div></figure><p id="f8cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用<code class="fe mb mc md me b">createContext() </code>创建cartContext，并用Provider传递值。</p><p id="9fbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">购物车有<strong class="ky ir">四个功能:添加商品、移除商品、删除商品和获取总价。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/80ea6bb712ccd299747e7abc9e5abb7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*HeRGGC6GszDZbQZtRXsgNA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">addOneToCart</figcaption></figure><p id="67e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果数量为0，则在cartProducts数组中添加新项目，或者将数量加1。和从购物车中减少一个是一样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/5ecdb372b670dc9b7df049d691e3eefa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*me-3Ad12uSTtFtNJjIi59Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">removeOneFromCart</figcaption></figure><p id="7eea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后从购物车中删除商品:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/f0ea2a5ad528fee375a97c73e8631e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*6dDe1WcdJ36tRRB0ytgdZg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">deleteFromCart</figcaption></figure><p id="8329" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">过滤不同id的cartProduct</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mi"><img src="../Images/a470cc2cbf6c21d61de89081479e9282.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*74ZUvVtwvQeBtia9XFgFcw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">getTotalCost</figcaption></figure><p id="f7cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用<code class="fe mb mc md me b">reduce()</code>按单价和数量计算总价</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/1b90ecfeaec6b243a73903675c7c4ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*eUoT1yn4pVPILH8QDtznJg.png"/></div></figure><p id="a190" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">商店页面包括产品卡:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/adecb025fcbdfd43116e5976d8c98ee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*LBHBGlaX3AXlCO9E2esqrg.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/9ef37f090906af9d58deef90a8ed39f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*YeQ-k-WDEjKjr85mEAWPxA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">productCard</figcaption></figure><p id="0671" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每张卡片都包含标题、价格和控制数量的按钮。当没有产品时，按钮显示添加到购物车，或者用<code class="fe mb mc md me b">…?..:..</code>从购物车中删除</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><p id="1426" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">后端，server.js. </strong></p><p id="9186" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，注册<a class="ae kv" href="https://stripe.com/" rel="noopener ugc nofollow" target="_blank">条带</a>以获得秘密API密钥。并添加每个产品以获得下面的密钥</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/2fb8f8efcc02bf4143abdc34fa5bfb6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cZG0vRRGvE1CclJEwEEPZg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/de4bc39afeb5656839286233b0decebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*KXrn-xvlI9_rXC1c7miY3g.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/f3842f355ae16818e47403febbd8010a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9lr15kIHcxVLxAqj3YD31w.png"/></div></div></figure><p id="75bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您获得API ID时，按照我之前所说的，在products数组ID中替换它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/c0fc1b116b0ab5f4e86dd42b4c2c5d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ywaH6FAghnibyKaL1A8X6w.png"/></div></div></figure><p id="0414" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并且记得设置账户处理支付功能。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/8c8f0ed927ea91d3c7a972a897d7f2b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*EPL7paojRgPab8kTWDiamA.png"/></div></figure><p id="5d89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用<code class="fe mb mc md me b">app.use()</code>运行每个库</p><p id="3482" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并在结账时发布获取购物车中的商品，如果支付成功，重定向到成功URL，要么取消URL。并将响应发送回用户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0ce674fd26e3f8e13809f21fb2c45a98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*bzDbnznuAKI0-MPsmHlpNQ.png"/></div></figure><p id="9364" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并在端口4000上监听它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/271a77af5f5503650d2c6e84d7fd9cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*Rl7ookD6KRwijPOAE5ISWQ.png"/></div></figure><p id="dc1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更多的<a class="ae kv" href="https://stripe.com/docs/checkout/quickstart?client=react&amp;lang=node" rel="noopener ugc nofollow" target="_blank">条带文档</a>用于创建结帐会话。</p><p id="2f28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="lu">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lu">说白了就是io </em> </strong> </a> <em class="lu">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lu">免费周报</em> </strong> </a> <em class="lu">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="lu">Twitter</em></strong></a>，<a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="lu">LinkedIn</em></strong></a><em class="lu">，</em><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="lu">YouTube</em></strong></a><em class="lu">，</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lu">不和</em> </strong> </a> <em class="lu">。对增长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="lu">电路</em> </strong> </a> <em class="lu">。</em></p></div></div>    
</body>
</html>