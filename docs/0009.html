<html>
<head>
<title>Parallax Effect to Scroll View Items in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Nativeä¸­æ»šåŠ¨è§†å›¾é¡¹ç›®çš„è§†å·®æ•ˆæœ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/parallax-effect-to-scroll-view-items-in-react-native-a2265ce81cba?source=collection_archive---------0-----------------------#2022-01-02">https://javascript.plainenglish.io/parallax-effect-to-scroll-view-items-in-react-native-a2265ce81cba?source=collection_archive---------0-----------------------#2022-01-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6c83" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">åœ¨React Nativeä¸­åˆ›å»ºè§†å·®æ»šåŠ¨æ•ˆæœã€‚</h2></div><p id="af8c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¦‚ä»Šï¼ŒåŠ¨ç”»æ˜¯ç”¨æˆ·ä½“éªŒçš„ä¸€ä¸ªéå¸¸é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒä»¬å…è®¸ä½ åœ¨ä½ çš„ç•Œé¢ä¸­ä¼ è¾¾çœŸå®å¯ä¿¡çš„åŠ¨ä½œï¼Œå¹¶ä¸”æå¤§åœ°æé«˜äº†ç”¨æˆ·ç•Œé¢çš„è´¨é‡ã€‚</p><p id="1ec5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨è¿‡å»çš„å‡ å¤©é‡Œï¼Œæˆ‘åœ¨React Nativeä¸­æœç´¢ä¸€ä¸ªåŒ…æ¥åˆ›å»ºè¿™ç§è§†å·®æ»šåŠ¨æ•ˆæœï¼Œ(è¿™é‡Œæœ‰ä¸€ä¸ªç”¨flutter<a class="ae ky" href="https://docs.flutter.dev/assets/images/docs/cookbook/effects/ParallaxScrolling.gif" rel="noopener ugc nofollow" target="_blank">https://docs . flutter . dev/assets/images/docs/cookbook/effects/parallax scrolling . gif</a>åšçš„ä¾‹å­)ï¼Œä½†æˆ‘æ²¡æœ‰å¥½çš„åº“æ¥å¸®åŠ©æˆ‘ï¼Œæ‰€ä»¥æˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹ï¼Œä½¿ç”¨<a class="kz la ep" href="https://medium.com/u/23d9a033fed2?source=post_page-----a2265ce81cba--------------------------------" rel="noopener" target="_blank">è½¯ä»¶å¤§å¦</a>æä¾›ç»™æˆ‘ä»¬çš„Reanimated 2ä»å¤´å¼€å§‹åˆ›å»ºå®ƒã€‚</p><p id="ed39" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è‡³äºä»Šå¤©ï¼Œè¿™æ˜¯æˆ‘ä»¬å°†è¦å¾—åˆ°çš„ç»“æœ:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/0f0aece140060b53f5e5c27b7819e1d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wRk9WoFrn4PCWrYLSyvs-Q.gif"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Final Outcome</figcaption></figure><p id="6f4c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä¸€ä¸‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®:</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="ca83" class="lw lx in ls b gy ly lz l ma mb">npx react-native init parallaxAnimation</span></pre><p id="3c1b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®åï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æˆ‘ä»¬çš„<code class="fe mc md me ls b">Reanimated Library</code>ã€‚</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="0391" class="lw lx in ls b gy ly lz l ma mb">yarn add react-native-reanimated</span></pre><p id="89b5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç„¶åæˆ‘ä»¬å°±è¦æŒ‰ç…§å®‰è£…æŒ‡å—æ¥äº†ï¼Œè¿™é‡Œéƒ½åˆ—å‡ºæ¥äº†:<a class="ae ky" href="https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/installation" rel="noopener ugc nofollow" target="_blank">https://docs . SW mansion . com/react-native-reanimated/docs/fundamentals/installation</a></p><p id="725c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼ŒReactivedæ˜¯ä¸€ä¸ªreactæœ¬åœ°åº“ï¼Œå…è®¸åˆ›å»ºæµç•…çš„åŠ¨ç”»å’Œäº¤äº’ï¼Œåœ¨UIçº¿ç¨‹ä¸Šè¿è¡Œï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬åšç¥å¥‡çš„ğŸª„</p><p id="5677" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸react-nativeåŠ¨ç”»APIä¸€æ ·ï¼Œå®ƒæä¾›åŠ¨ç”»ã€‚è§†å›¾ã€æ»šåŠ¨è§†å›¾ç­‰ç­‰â€¦å®ƒè¿˜æä¾›äº†å¸ƒå±€åŠ¨ç”»ã€‚</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="18c2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è®©æˆ‘ä»¬åŠ¨æ‰‹åšä¸€äº›ä»£ç ã€‚</p><p id="88de" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™æ˜¯æˆ‘ä»¬çš„åŸºæœ¬ä»£ç :</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Basic code gist</figcaption></figure><p id="4650" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»å°†æˆ‘ä»¬çš„è§†å›¾ã€ScrollViewç­‰è½¬æ¢æˆä¸€äº›åŠ¨ç”»ç»„ä»¶ã€‚</p><p id="8ce9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å°†æŠŠæ»šåŠ¨è§†å›¾è½¬æ¢æˆåŠ¨ç”»è§†å›¾:</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="ecf9" class="lw lx in ls b gy ly lz l ma mb">import Animated from 'react-native-reanimated'</span><span id="a661" class="lw lx in ls b gy mo lz l ma mb">&lt;FlatList&gt;&lt;/FlatList&gt; =&gt; &lt;Animated.FlatList&gt;&lt;/Animated.FlatList&gt;</span></pre><p id="df89" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ³¨æ„:å¦‚æœæ‚¨çš„å»ºè®®åˆ—è¡¨ä¸­æ²¡æœ‰æ˜¾ç¤ºå¹³é¢åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥åˆ›å»ºå®ƒ:</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="a300" class="lw lx in ls b gy ly lz l ma mb">const AnimatedFlatList = Animated.createAnimatedComponent(FlatList)</span><span id="742f" class="lw lx in ls b gy mo lz l ma mb">then we use it as :</span><span id="0da3" class="lw lx in ls b gy mo lz l ma mb">&lt;AnimatedFlatList&gt;&lt;/AnimatedFlatList&gt;</span></pre><p id="caed" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨å°†æˆ‘ä»¬çš„å¹³é¢åˆ—è¡¨è½¬æ¢æˆåŠ¨ç”»ç»„ä»¶åï¼Œåªè¦æˆ‘ä»¬æ»šåŠ¨ï¼Œæˆ‘ä»¬å°±å¿…é¡»æ£€ç´¢æˆ‘ä»¬çš„æ»šåŠ¨ä½ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨useSharedValueæ¥å­˜å‚¨scrollYï¼Œå¹¶ä½¿ç”¨AnimatedscrollHandleræ¥å¤„ç†æ»šåŠ¨äº‹ä»¶(Scrollã€Momentumç­‰)ã€‚):</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="a10b" class="lw lx in ls b gy ly lz l ma mb">const scrollPosition = useSharedValue(0);</span></pre><p id="a8b2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç„¶åï¼Œ</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="a245" class="lw lx in ls b gy ly lz l ma mb">const handleScroll = useAnimatedScrollHandler(<br/>    {<br/>      onScroll: event =&gt; {<br/>        scrollPosition.value = event.contentOffset.y;<br/>      }<br/>    }<br/>);</span></pre><p id="e339" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¹‹åï¼Œæˆ‘ä»¬å°†å®ƒç»‘å®šåˆ°æˆ‘ä»¬çš„FlatListï¼Œå¹¶å°†scrollEventThrottleè®¾ç½®ä¸º16ï¼Œä»¥æ•è·æ‰€æœ‰æ»šåŠ¨äº‹ä»¶:</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="f0b7" class="lw lx in ls b gy ly lz l ma mb">&lt;AnimatedFlatList<br/>    onScroll={handleScroll} <br/>    scrollEventThrottle={16}<br/>   ...<br/>/&gt;</span></pre><p id="d330" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»ä¿å­˜äº†æ»šåŠ¨ä½ç½®ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä½œä¸ºä¸€ä¸ªé“å…·ä¼ é€’ç»™ç»„ä»¶ã€‚</p><p id="aa4b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨æˆ‘ä»¬å¿…é¡»ä¸ºåŠ¨ç”»è®¾ç½®è¾“å…¥èŒƒå›´ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªèŒƒå›´å†…<code class="fe mc md me ls b">Interpolate</code>å€¼ã€‚</p><p id="ebfa" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»å°†é¡¹ç›®ç»„ä»¶è½¬æ¢ä¸ºåŠ¨ç”»ç»„ä»¶ï¼Œæˆ‘ä»¬åªåˆ¶ä½œå›¾åƒåŠ¨ç”»(æˆ‘ä»¬å°†ä½¿å…¶åœ¨Yè½´ä¸Šå¹³ç§»ï¼Œå› æ­¤å›¾åƒå°†æˆä¸ºåŠ¨ç”»ç»„ä»¶:</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="eb44" class="lw lx in ls b gy ly lz l ma mb">const Item=({index, scrollPosition})=&gt;{<br/>  return (<br/>      &lt;View key={index} style={styles.scrollContent}&gt;<br/>        &lt;Animated.Image<br/>          style={[{<br/>           height: <strong class="ls io"><em class="mp">Dimensions</em></strong>.get('screen').height*2,<br/>           width: <strong class="ls io"><em class="mp">Dimensions</em></strong>.get('window').width,<br/>           resizeMode:'cover',<br/>        }]} <br/>          source={{uri:'https://random.imagecdn.app/1920/1080'}}/&gt;<br/>      &lt;Text <br/>        style={[<br/>          {color: 'white', position: 'absolute',zIndex:99, <br/>          fontSize: 50, bottom: 10}]}<br/>        &gt;<br/>         hehehehhehe<br/>        &lt;/Text&gt;<br/>      &lt;/View&gt;<br/>  )<br/>}</span></pre><p id="59c4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ æˆ‘ä»¬çš„åŠ¨ç”»æ ·å¼ï¼Œè¿™å¯ä»¥é€šè¿‡ä½¿ç”¨åŠ¨ç”»æ ·å¼é’©å­æ¥å®Œæˆï¼Œæˆ‘ä»¬çš„ç»„ä»¶åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="lc ld le lf gt lr ls lt lu aw lv bi"><span id="4082" class="lw lx in ls b gy ly lz l ma mb">const Item=({index, scrollPosition})=&gt;{</span><span id="c9b4" class="lw lx in ls b gy mo lz l ma mb"><br/>const {height, width} = useWindowDimensions()  </span><span id="187e" class="lw lx in ls b gy mo lz l ma mb">const imageAnimatedStyle = useAnimatedStyle(() =&gt; {<br/>    const translateY = interpolate(<br/>        scrollPosition.value,<br/>        [(index-1)* height/2, index*height/2, (index+1)*height/2],<br/>        [-100, 0, 100],<br/>    );<br/>    return {<br/>      transform: [{translateY}],<br/>    };<br/>  }, []);</span><span id="11ee" class="lw lx in ls b gy mo lz l ma mb">  return (<br/>      &lt;View key={index} style={styles.scrollContent}&gt;<br/>        &lt;Animated.Image<br/>          style={[{<br/>           height: <strong class="ls io"><em class="mp">height</em></strong>*1.5,<br/>           width: <strong class="ls io"><em class="mp">width</em></strong>,<br/>           resizeMode:'cover',<br/>         },<br/>         <strong class="ls io"><em class="mp">imageAnimatedStyle</em></strong>             <br/>        ]} <br/>          source={{uri:'https://random.imagecdn.app/1920/1080'}}/&gt;<br/>      &lt;Text <br/>        style={[<br/>          {color: 'white', position: 'absolute',zIndex:99, <br/>          fontSize: 50, bottom: 10}]}<br/>        &gt;<br/>         hehehehhehe<br/>        &lt;/Text&gt;<br/>      &lt;/View&gt;<br/>  )<br/>}</span></pre><p id="d1c1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°è§£é‡Šä»£ç :</p><p id="1f3f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬ä»propsä¸­æ£€ç´¢æˆ‘ä»¬çš„æ»šåŠ¨ä½ç½®ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡æ»šåŠ¨ä½ç½®è¿›è¡Œæ’å€¼ï¼Œè¿™æ ·æˆ‘ä»¬çš„èŒƒå›´å°†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®ã€ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“æˆ‘ä»¬æ˜¯å‘ä¸Šæ»šåŠ¨è¿˜æ˜¯å‘ä¸‹æ»šåŠ¨ï¼Œç„¶åæˆ‘ä»¬å°†åŠ¨ç”»æ ·å¼é™„åŠ åˆ°å›¾åƒæ ·å¼çš„å…¶ä½™éƒ¨åˆ†ã€‚</p><p id="122c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨æˆ‘ä»¬å°±åƒåœ¨ç©Yè½´ä¸Šå›¾åƒçš„ä½ç½®ï¼Œæˆ‘ä»¬å°†ä¸Šä¸‹ç§»åŠ¨ä¸€ç‚¹ç‚¹æ¥è·å¾—è¿™ä¸ªæ¼‚äº®çš„è§†å·®æ•ˆæœã€‚</p><p id="6369" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸‹é¢æ˜¯æœ€ç»ˆçš„ä»£ç :</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Final code</figcaption></figure></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="05f3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç¼–ç å¿«ä¹ï¼</p><p id="8c82" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mp">æ›´å¤šå†…å®¹çœ‹</em> <a class="ae ky" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mp">è¯´ç™½äº†ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> </a><a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mp">å…è´¹æ¯å‘¨ç®€è®¯</em> </a> <em class="mp">ã€‚åœ¨æˆ‘ä»¬çš„</em> <a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="mp">ç¤¾åŒº</em> </a> <em class="mp">è·å¾—ç‹¬å®¶å†™ä½œæœºä¼šå’Œå»ºè®®ã€‚</em></p></div></div>    
</body>
</html>