<html>
<head>
<title>How to Create Your Own CLI with Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Node.js创建自己的CLI</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-your-own-cli-with-node-js-9004091a64d5?source=collection_archive---------3-----------------------#2022-05-17">https://javascript.plainenglish.io/how-to-create-your-own-cli-with-node-js-9004091a64d5?source=collection_archive---------3-----------------------#2022-05-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="b2e9" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用Node.js、TypeScript和Rollup，通过一个命令从自定义模板创建自己的CLI来引导项目</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/51c2717c9d565231ce9de7e91fc057a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*krv67-X1NNltMRJn"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@jakewalker?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jake Walker</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0f05" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您看到了一篇关于React的很棒的文章，您想尽快启动并运行一个新项目，并尝试一下您读到的内容。您可能不想安装依赖项、管理NPM脚本、配置linters和formatters(如果您确实需要它们的话)以及手动设置TypeScript。使用一个命令来做这件事会很好，对吗？你可以的！</p><p id="54da" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">React app有<a class="ae ks" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> CRA </a>，Vue有<a class="ae ks" href="https://cli.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue CLI </a>，Svelte有<a class="ae ks" href="https://github.com/Rich-Harris/degit" rel="noopener ugc nofollow" target="_blank"> Degit </a>等等。这些是构建你的应用程序的非常有用的工具:易于使用，高效，<a class="ae ks" href="https://create-react-app.dev/docs/custom-templates/" rel="noopener ugc nofollow" target="_blank">在某种程度上可扩展</a>。但是如果你想用一些独特的或者完全定制的东西呢？你不能让上面的工具以不同的方式工作。</p><p id="56a8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您对现有的工具不满意，或者您只想创建满足您需求的东西，那么是时候创建您自己的命令行界面了，也称为CLI。本文将帮助您创建一个可以按照您想要的方式引导项目的Node。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="226d" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">序</h1><p id="4fcc" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">这篇文章的灵感来自张秀坤·昆德尔的这篇令人难以置信的<a class="ae ks" href="https://www.twilio.com/blog/how-to-build-a-cli-with-node-js" rel="noopener ugc nofollow" target="_blank">帖子</a>。我用它构建了我的第一个CLI，并遇到了一些问题。我将依靠Dominic的文章，并向您展示如何避免我遇到的问题，以及如何向该项目添加TypeScript。</p><h1 id="c2c7" class="lw lx in bd ly lz mt mb mc md mu mf mg jt mv ju mi jw mw jx mk jz mx ka mm mn bi translated">项目概述</h1><p id="e38e" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">本文的主要目标是展示如何用Node构建CLI。此外，我想在本文中谈谈devexp，以及在下一篇中扩展这个CLI的功能。最终代码可在<a class="ae ks" href="https://codesandbox.io/s/create-project-oweiqo" rel="noopener ugc nofollow" target="_blank">这里</a>获得。这个项目将在节点14和以上。</p><p id="996b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您继续学习，在本文的结尾，您将拥有一个跨平台的CLI来帮助您用一行命令和一个方便的向导启动项目。它还可以随着您需求的增长而轻松扩展。</p><h1 id="3134" class="lw lx in bd ly lz mt mb mc md mu mf mg jt mv ju mi jw mw jx mk jz mx ka mm mn bi translated">项目设置</h1><p id="f5d0" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">让我们为我们的项目创建一个目录，然后在其中启动一个Node.js项目。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="151d" class="nd lx in mz b gy ne nf l ng nh">mkdir create-project &amp;&amp; cd create-project<br/>npm init --yes</span></pre><p id="9da2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，创建一些文件。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="9496" class="nd lx in mz b gy ne nf l ng nh">mkdir bin &amp;&amp; touch bin/create-project.js<br/>mkdir src &amp;&amp; touch src/cli.js</span></pre><p id="ab9f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">项目结构应该如下所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/b39f6fcd0fda8d62a0e45a6f698a8c38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*kJHDzQsXvUMJMmHa2_tw4A.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Project structure at the beginning</figcaption></figure><p id="2072" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让这些文件包含一点代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Entry point (cli.js) and executable (create-project.js)</figcaption></figure><p id="674a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后确保你的<code class="fe nl nm nn mz b">package.json</code>有<code class="fe nl nm nn mz b">bin</code>条目，并且<code class="fe nl nm nn mz b">type</code>等于<code class="fe nl nm nn mz b">module</code>，因为我们在<code class="fe nl nm nn mz b">create-project.js</code>文件中使用es导入。您可能还注意到了<code class="fe nl nm nn mz b">keywords</code>字段，现在您可以跳过它。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">bin entries define CLI commands exposed by our package</figcaption></figure><p id="aa0a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们反思一下我们刚刚所做的。</p><p id="3697" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们创建了一个简单的项目结构:<code class="fe nl nm nn mz b">cli.js</code>是我们的入口文件，<code class="fe nl nm nn mz b">create-project.js</code>是我们的可执行文件。不要被<code class="fe nl nm nn mz b">create-project.js</code>文件里面的第一行吓倒！这是<a class="ae ks" href="https://en.wikipedia.org/wiki/Shebang_(Unix)" rel="noopener ugc nofollow" target="_blank"> shebang行</a>，它的目的是告诉系统我们想要使用什么解释器来运行这个脚本。</p><p id="bbdc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其次，我们在<code class="fe nl nm nn mz b">package.json</code>的<code class="fe nl nm nn mz b">bin</code>字段中添加了<code class="fe nl nm nn mz b">create-project.js</code>的路径。当一个包被全局安装(或<a class="ae ks" href="https://docs.npmjs.com/cli/v8/commands/npm-link" rel="noopener ugc nofollow" target="_blank">链接</a>)时，它将使<code class="fe nl nm nn mz b">bin</code>字段中指定的命令在系统的任何地方都可用，并且这些命令将指向相应值中指定的文件。你可以从NPM官方文件中了解更多。</p><p id="c682" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在奇迹发生了。确保您在项目文件夹中，并运行以下命令。我还推荐使用分离的终端标签或者不同的窗口，这样你就不会迷失在项目和测试目录中。为了使事情变得简单，我将在下面的代码片段的第一行用注释标记实际的终端选项卡。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="7628" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>npm link</span><span id="b906" class="nd lx in mz b gy no nf l ng nh">// switch to another tab and create test-dir directory<br/>// test-dir tab<br/>cd ../<br/>mkdir test-dir &amp;&amp; cd test-dir<br/>create-project</span></pre><p id="d92b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您的终端中应该有一个类似于下面的日志。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="5c42" class="nd lx in mz b gy ne nf l ng nh">[<br/>  '/Users/username/.nvm/versions/node/v14.19.2/bin/node',<br/>  '/usr/local/bin/create-project'<br/>]</span></pre><p id="f78e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">瞧啊。我们有一个可以从任何地方调用的工作脚本。现在它没有做任何有用的事情，但是我们将在下一节中讨论它。</p><h1 id="6f7c" class="lw lx in bd ly lz mt mb mc md mu mf mg jt mv ju mi jw mw jx mk jz mx ka mm mn bi translated">以打字打的文件</h1><p id="a954" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">我们想要创建的CLI有一个简单的目的，只需要一点代码，因此使用TypeScript可能没有意义。但是，我想向您展示如何用TypeScript和Rollup设置这个项目。该项目可以扩展，并且有类型检查将是有用的，所以让我们马上添加它！</p><blockquote class="np nq nr"><p id="24da" class="kt ku ns kv b kw kx jo ky kz la jr lb nt ld le lf nu lh li lj nv ll lm ln lo ig bi translated">您可能想知道为什么我们需要Rollup？</p><p id="18ae" class="kt ku ns kv b kw kx jo ky kz la jr lb nt ld le lf nu lh li lj nv ll lm ln lo ig bi translated">编译<code class="fe nl nm nn mz b">.ts</code>文件的第一个选项当然是<code class="fe nl nm nn mz b">tsc</code>，它做得很好，但是有一个问题。Node要求我们在使用es模块时指定扩展名，所以我们必须将每个文件作为<code class="fe nl nm nn mz b">import something from './something.ts'</code>导入。当这段代码用<code class="fe nl nm nn mz b">tsc</code>编译时，它保留了<code class="fe nl nm nn mz b">.ts</code>扩展名，这使得它无法运行。编译后可以选择修改扩展名，但是用bundler可以很容易地完成。这就是为什么我们需要汇总。</p></blockquote><p id="3eeb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，让我们安装一些依赖项并创建一个<code class="fe nl nm nn mz b">tsconfig.json</code>。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="70ca" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>touch .npmrc &amp;&amp; echo "save-exact=true" &gt; .npmrc<br/>npm i -D typescript rollup @rollup/plugin-typescript tslib @types/node<br/>npx tsc --init</span></pre><p id="e923" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">注意，我们还用<code class="fe nl nm nn mz b">save-exact=true</code>创建了一个<code class="fe nl nm nn mz b">.npmrc</code>文件，所以已安装软件包的版本将被固定。这与项目无关，但以可控的方式更新依赖关系是个好主意。</p><p id="118b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，创建汇总配置。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="cccc" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>touch rollup.config.js</span></pre><p id="c84b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">并将项目文件重构为<code class="fe nl nm nn mz b">.ts</code>。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="cf4d" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>mv src/cli.js src/cli.ts<br/>touch src/types.ts</span></pre><p id="b950" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">具有TypeScript和Rollup配置的项目结构应该如下所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/f1450a3aaf734704b6ee5197a0325581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*ux_tdJlGMbhbMUCY4LP81Q.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Project structure. Adding TS and Rollup</figcaption></figure><p id="9a89" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们更改我们的TypeScript配置并设置Rollup。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">TS setup. TSConfig and Rollup config</figcaption></figure><p id="79eb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们刚刚做了什么？</p><p id="844e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们从<code class="fe nl nm nn mz b">tsconfig.json</code>中删除了一堆生成的选项和注释，留下了我们感兴趣的字段。注意，我们让<code class="fe nl nm nn mz b">target</code>和<code class="fe nl nm nn mz b">module</code>字段等于<code class="fe nl nm nn mz b">esnext</code>，因为我们使用的是ES模块。</p><p id="cb21" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其次，我们直接从<a class="ae ks" href="https://medium.com/r?url=https%3A%2F%2Fgithub.com%2Frollup%2Frollup-plugin-typescript%23usage" rel="noopener"> @rollup/plugin-typescript文档</a>中使用基本的Rollup配置。我们添加的唯一内容是一个<code class="fe nl nm nn mz b">output</code>字段，用于指示编译代码的位置。</p><p id="1fce" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，将第一个类型添加到<code class="fe nl nm nn mz b">types.ts</code>中，并在<code class="fe nl nm nn mz b">cli.ts</code>中使用。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Our first type for raw args</figcaption></figure><p id="11ec" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们检查一下一切是否正常。运行以下命令，使用Rollup编译和捆绑代码。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="db3b" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>npx rollup -c rollup.config.js</span></pre><p id="30b3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您遵循这些步骤，您将会看到一个汇总日志，告诉您我们的代码已经成功编译并打包到了<code class="fe nl nm nn mz b">dist</code>目录中的一个文件中。我们需要做的最后一件事是重构<code class="fe nl nm nn mz b">create-project.js</code>文件以使用编译后的代码代替源代码，并将<code class="fe nl nm nn mz b">dist/cli.js</code>添加到<code class="fe nl nm nn mz b">package.json</code>中的主字段。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">create-project.js should now use compiled version of our code</figcaption></figure><p id="4957" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦完成，让我们确保一切都按计划进行。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="cefc" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>npm link</span><span id="7786" class="nd lx in mz b gy no nf l ng nh">// test-dir tab<br/>create-project</span></pre><p id="441a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您看到和以前一样的日志，那么一切正常。</p><h1 id="7125" class="lw lx in bd ly lz mt mb mc md mu mf mg jt mv ju mi jw mw jx mk jz mx ka mm mn bi translated">DevExp</h1><p id="44e1" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">随着我们项目的增长，有几个步骤可以让我们的开发人员体验更顺畅。</p><p id="8489" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，让我们将刚刚使用的Rollup命令存储在<code class="fe nl nm nn mz b">package.json</code>的脚本部分，这样我们就有一个方便的方法来调用它。</p><p id="7834" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其次，最好不要在每次接触文件时都运行它，而是让Rollup监视那些变化，并在它们发生时编译我们的代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Added build and dev scripts</figcaption></figure><p id="5859" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们试一试。运行以下命令。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="8def" class="nd lx in mz b gy ne nf l ng nh">// switch to another tab and change into create-project directory<br/>// watcher tab<br/>npm run dev</span><span id="a577" class="nd lx in mz b gy no nf l ng nh">// test-dir tab<br/>create-project</span></pre><p id="d03e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，向<code class="fe nl nm nn mz b">cli.ts</code>添加一些额外的日志记录，并再次运行。</p><p id="1c90" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">例如，我将<code class="fe nl nm nn mz b">console.log('meow');</code>添加到<code class="fe nl nm nn mz b">cli.ts</code>，它被记录到我的终端。</p><p id="0c48" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如我们所见，Rollup动态编译我们的代码，不需要额外的步骤。这将在未来为我们节省大量时间。现在一切都设置好了，我们可以专注于代码了。</p><h1 id="91f1" class="lw lx in bd ly lz mt mb mc md mu mf mg jt mv ju mi jw mw jx mk jz mx ka mm mn bi translated">解析参数</h1><p id="f0cb" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">唷！是时候回到我们的项目了。正如我们在开始时所描述的，它的目的是:引导项目。但是可能有选择。例如，一个项目必须用普通JavaScript编写，而另一个项目必须使用TypeScript。其中一个我们想为React应用程序设置，下一次我们可能想使用Vue。必须使用我们将传递给CLI命令的参数来定义和处理这些选项。我们开始吧！</p><p id="d55e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们必须定义我们想要使用的选项。我建议从这些标志开始:</p><ol class=""><li id="de21" class="nw nx in kv b kw kx kz la lc ny lg nz lk oa lo ob oc od oe bi translated"><code class="fe nl nm nn mz b">--git</code>简写为<code class="fe nl nm nn mz b">-g</code>——在一个创建的项目中初始化一个git存储库</li><li id="1e8e" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated"><code class="fe nl nm nn mz b">--install</code>简写<code class="fe nl nm nn mz b">-i</code> —安装所选模板的依赖项</li><li id="907b" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated"><code class="fe nl nm nn mz b">--yes</code>用速记<code class="fe nl nm nn mz b">-y</code>——跳过上面两个标志，并把它们解释为已经通过</li></ol><p id="8dec" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">此外，我们必须指定一个模板。什么是模板？这是我们需要复制到创建的项目中并安装依赖项的一组文件。在我们的例子中，它将是<code class="fe nl nm nn mz b">javascript</code>或<code class="fe nl nm nn mz b">typescript</code>。</p><p id="8153" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，我们需要安装<a class="ae ks" href="https://www.npmjs.com/package/arg" rel="noopener ugc nofollow" target="_blank"> arg </a>。这个包将帮助我们解析传递给CLI命令的参数。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="fb81" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>npm i arg</span></pre><p id="f014" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将解析参数的函数实际上是一个实用程序。把所有的工具放在一个地方很方便。让我们为这个函数创建一个<code class="fe nl nm nn mz b">src/utils</code>目录和一个文件。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="b8db" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>mkdir src/utils<br/>touch src/utils/parse-arguments-into-options.ts</span></pre><p id="9592" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">带有utils的项目结构应该是这样的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ok"><img src="../Images/2af2e1c0dbfd7c4e2c876d3f93d5b4ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9aBA4JqNtYxlcGTZuDstg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Project structure. Adding utils</figcaption></figure><p id="e5fa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们在<code class="fe nl nm nn mz b">parse-arguments-into-options.ts</code>内部编写代码，并在<code class="fe nl nm nn mz b">cli.ts</code>中使用。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Parsing args</figcaption></figure><p id="e8e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们来分解一下。</p><p id="5f91" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们创建了一个名为<code class="fe nl nm nn mz b">parseArgumentsIntoOptions</code>的函数，它使用新安装的包<code class="fe nl nm nn mz b">arg</code>。它将指定的标志(注意允许我们为标志指定短别名的语法)解析成对象<code class="fe nl nm nn mz b">args</code>，并将模板传递给特殊的<code class="fe nl nm nn mz b">args._</code>数组。例如，<code class="fe nl nm nn mz b">create-project -g javascript</code>将产生下面的输出。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="170d" class="nd lx in mz b gy ne nf l ng nh">{<br/>  git: true,<br/>  install: false,<br/>  skipPrompts: false,<br/>  template: ‘javascript’<br/>}</span></pre><p id="cc42" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，我们更新了我们的类型。我们添加了<code class="fe nl nm nn mz b">RawOptions</code>来表示解析的选项。</p><p id="5994" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，我们在<code class="fe nl nm nn mz b">cli.ts</code>中使用了<code class="fe nl nm nn mz b">parseArgumentsIntoOptions</code>。</p><p id="f7ec" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Rollup watcher打开的情况下，我们需要做的就是运行带有一些参数的<code class="fe nl nm nn mz b">create-project</code>来测试这段逻辑。如果您已经停止了观察器，请再次启动它。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="da4e" class="nd lx in mz b gy ne nf l ng nh">// watcher tab<br/>npm run dev</span></pre><p id="543c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们试试这个。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="dce8" class="nd lx in mz b gy ne nf l ng nh">// test-dir tab<br/>create-project -g -i</span></pre><p id="edfe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这应该会产生下面的输出。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="8653" class="nd lx in mz b gy ne nf l ng nh">{ git: true, install: true, skipPrompts: false, template: undefined }</span></pre><p id="e6dc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">注意，它将在没有在<code class="fe nl nm nn mz b">arg</code>调用中指定的标志上中断。例如，这个会抛出一个错误。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="5fee" class="nd lx in mz b gy ne nf l ng nh">// test-dir tab<br/>create-project -a</span><span id="b18e" class="nd lx in mz b gy no nf l ng nh">// ArgError: unknown or unexpected option: -a</span></pre><h1 id="fbf6" class="lw lx in bd ly lz mt mb mc md mu mf mg jt mv ju mi jw mw jx mk jz mx ka mm mn bi translated">向导设置</h1><p id="2d72" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">能够使用传递的参数很好，但是有一个问题。我们如何告诉其他工程师他们可以使用什么论点？嗯，我们可以写一些文档，是的，这是一个好方法。但是如果我们更进一步呢？如果我们问用户他们想要什么类型的模板或者他们打算使用什么标志呢？在这一章中，我们将为我们的项目添加一个方便的向导。</p><p id="3d24" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">像往常一样，我们将从安装依赖项开始。这次— <a class="ae ks" href="https://www.npmjs.com/package/inquirer" rel="noopener ugc nofollow" target="_blank">问询者</a>。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="9c16" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>npm i inquirer<br/>npm i -D @types/inquirer</span></pre><p id="c6f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们需要创建另一个实用程序来提示用户缺少选项。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="eb5e" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>touch src/utils/prompt-for-missing-options.ts</span></pre><p id="42f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在此之后，让我们写代码，将做实际的提示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Prompting user for missing options</figcaption></figure><p id="d68c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是很多代码，让我们看看它做什么。</p><p id="afd9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们编写了提示用户缺少参数的逻辑，将它们作为问题添加到<code class="fe nl nm nn mz b">inquirer.prompt</code>方法中。我们还处理了<code class="fe nl nm nn mz b">skipPrompts</code>选项来强制<code class="fe nl nm nn mz b">git</code>和<code class="fe nl nm nn mz b">install</code>选项。</p><p id="b039" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其次，我们重构了我们的类型。我们现在有了一个<code class="fe nl nm nn mz b">Options</code>类型，它表示将用于定制我们的CLI的选项。</p><p id="994b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，我们添加了对<code class="fe nl nm nn mz b">cli.ts</code>的<code class="fe nl nm nn mz b">promptForMissingOptions</code>调用。</p><p id="9619" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们检查一下！</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="52da" class="nd lx in mz b gy ne nf l ng nh">// test-dir tab<br/>create-project</span></pre><p id="6097" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您继续操作，您应该会看到一个向导，引导您完成项目设置。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="e314" class="nd lx in mz b gy ne nf l ng nh">create-project<br/>? Please choose which project template to use (Use arrow keys)<br/>❯ JavaScript<br/>  TypeScript<br/>? Initialize a git repository? (y/N)<br/>? Install packages? (Y/n)<br/>{ git: false, install: true, template: 'javascript' }</span></pre><p id="138f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是一场胜利！我们有一个简单而有用的向导来帮助我们手动设置我们的项目，而不必记住我们需要传递什么参数或者我们当前支持什么模板。</p><h1 id="10d8" class="lw lx in bd ly lz mt mb mc md mu mf mg jt mv ju mi jw mw jx mk jz mx ka mm mn bi translated">创建项目</h1><p id="4265" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">设置结束了。</p><ol class=""><li id="98b1" class="nw nx in kv b kw kx kz la lc ny lg nz lk oa lo ob oc od oe bi translated">我们知道如何解析用户输入的参数。</li><li id="82db" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated">我们知道如何处理这些参数来获得创建项目的选项。</li><li id="80a0" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated">我们甚至创建了一个漂亮的向导，使我们的CLI更方便使用！</li></ol><p id="58b5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们必须使用这些选项来实际创建一个新项目。</p><p id="79a2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，让我们创建自己的模板，并向其中添加一些文件。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="f08d" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>mkdir -p templates/javascript/src<br/>mkdir -p templates/typescript/src<br/>touch templates/javascript/src/index.js<br/>touch templates/typescript/src/index.ts<br/>touch templates/javascript/package.json<br/>touch templates/typescript/package.json</span></pre><p id="ed0a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">项目结构正在增长，现在看起来是这样的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ok"><img src="../Images/aa9c09ed087c867422cc16567c015605.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-wsCSVJ1sagzXlP7DMKow.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Project structure. Adding templates</figcaption></figure><p id="3d46" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，给两个创建的<code class="fe nl nm nn mz b">package.json</code>文件添加合理的内容。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">package.json stubs for JS and TS templates</figcaption></figure><p id="5d70" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们还需要一堆依赖项。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="540b" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>npm i execa chalk listr ncp pkg-install<br/>npm i -D @types/inquirer @types/listr @types/ncp @types/node</span></pre><p id="414a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">关于他们的几句话:</p><ol class=""><li id="6f28" class="nw nx in kv b kw kx kz la lc ny lg nz lk oa lo ob oc od oe bi translated"><a class="ae ks" href="https://www.npmjs.com/package/execa" rel="noopener ugc nofollow" target="_blank"> execa </a>用于运行命令。</li><li id="8f06" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated">粉笔是一种终端管柱造型工具。</li><li id="1d6d" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated"><a class="ae ks" href="https://www.npmjs.com/package/listr" rel="noopener ugc nofollow" target="_blank"> listr </a>是一个终端任务列表。</li><li id="96fa" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated"><a class="ae ks" href="https://www.npmjs.com/package/ncp" rel="noopener ugc nofollow" target="_blank"> ncp </a>是一个异步递归复制的工具。</li><li id="eb01" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated"><a class="ae ks" href="https://www.npmjs.com/package/pkg-install" rel="noopener ugc nofollow" target="_blank"> pkg-install </a>提供了一个独立于平台的软件包安装程序。</li></ol><p id="925f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，让我们根据我们的选项指定可能发生的操作。提醒一下，我们有三个选择:</p><ol class=""><li id="feaf" class="nw nx in kv b kw kx kz la lc ny lg nz lk oa lo ob oc od oe bi translated"><code class="fe nl nm nn mz b">template</code> —用于已创建项目的启动器。</li><li id="0d4c" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated"><code class="fe nl nm nn mz b">git</code> —是否初始化git存储库。</li><li id="4905" class="nw nx in kv b kw of kz og lc oh lg oi lk oj lo ob oc od oe bi translated"><code class="fe nl nm nn mz b">install</code> —是否从复制的<code class="fe nl nm nn mz b">package.json</code>安装包。</li></ol><p id="f5ec" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">基于此，我们看到了三个额外的实用函数:初始化git存储库、复制模板和安装包。此外，最好将项目创建管道与参数处理逻辑分开，这样它也有自己的文件。让我们创建这些文件。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="a152" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>touch src/main.ts<br/>touch src/utils/init-git-repo.ts<br/>touch src/utils/copy-template-files.ts<br/>touch src/utils/install-packages.ts</span></pre><p id="c6b8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，在其中编写一些代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Project tasks</figcaption></figure><p id="d2e2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们来分解一下。</p><p id="3a28" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们创造了<code class="fe nl nm nn mz b">main.ts</code>。这是一个简单的运行器，它使用<code class="fe nl nm nn mz b">listr</code>任务管理器根据传入的参数创建任务队列。</p><p id="c8b1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其次，我们已经将所有的任务描述为上面提到的工具。</p><p id="2111" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，我们在<code class="fe nl nm nn mz b">cli.ts</code>中使用了<code class="fe nl nm nn mz b">createProject</code>流道。</p><p id="fd8e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">是时候测试我们的杰作了。让我们再次运行我们的CLI命令。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="c343" class="nd lx in mz b gy ne nf l ng nh">// test-dir tab<br/>create-project -y</span></pre><p id="132d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦你完成了向导，一个绿色的日志将出现在终端中，宣布你刚刚创建的项目！似乎是时候纵情享乐，把帽子抛向天空了，但是有一个小障碍。运行以下命令。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="d8b1" class="nd lx in mz b gy ne nf l ng nh">// test-dir tab<br/>create-project jabbascript</span></pre><p id="a8c6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这将抛出一个错误，因为没有jabbascript这样的模板！虽然没有这样的模板是非常不幸的，但是我们不应该让一个不受支持的模板破坏项目的创建。我们必须用与<code class="fe nl nm nn mz b">arg</code>检查其他参数相同的方式来检查这一点。</p><p id="c844" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为此，我们还需要一个实用函数来检查传递的模板的正确性。让我们创造它。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="f136" class="nd lx in mz b gy ne nf l ng nh">// create-project tab<br/>touch src/utils/check-template-validity.ts</span></pre><p id="e629" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们写代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Template validation</figcaption></figure><p id="9b8a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们在<code class="fe nl nm nn mz b">types.ts</code>中添加了与模板相关的类型，用它们在<code class="fe nl nm nn mz b">check-template-validity.ts</code>中验证模板(注意，它将未定义的模板视为有效，所以我们不会抛出不必要的警告)，然后在<code class="fe nl nm nn mz b">parse-arguments-into-options.ts</code>中添加了验证。让我们再次尝试创建一个jabbascript项目。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="5540" class="nd lx in mz b gy ne nf l ng nh">// test-dir tab<br/>create-project jabbascript<br/>WARNING You passed incorrect template: jabbascript. List of supported templates: javascript, typescript<br/>? Please choose which project template to use (Use arrow keys)<br/>❯ JavaScript<br/>  TypeScript</span></pre><p id="427b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您应该看到上面的日志。我们首先通知用户还没有JavaScript模板，然后让他们选择一个支持的模板。否则一切照旧。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="bdc0" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">结论</h1><p id="1688" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">看起来我们成功了！我们已经创建了一个有用的命令行界面，允许我们只用一个命令就可以启动我们喜欢的项目。虽然有像这样功能更多的工具，但拥有自己的工具是很棒的。没有什么比你和<em class="ns">为</em>你写的更能满足你的需求了。</p><p id="92dc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-your-own-cli-with-node-js-7646a976f8fa">这个系列的第二部</a>已经有了！我们将扩展CLI的功能，使其更加方便。如果你喜欢这篇文章，看看第二部分。我会很高兴在那里见到你！</p><p id="c7da" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">祝你今天开心！玩的开心！</p><p id="6242" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ns">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ns">plain English . io</em></strong></a><em class="ns">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ns">免费周报</em> </strong> </a> <em class="ns">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ns">Twitter</em></strong></a><em class="ns">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ns">LinkedIn</em></strong></a><em class="ns">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ns">社区不和谐</em> </strong> </a> <em class="ns">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ns">人才集体</em> </strong> </a> <em class="ns">。</em></p></div></div>    
</body>
</html>