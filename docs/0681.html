<html>
<head>
<title>Polyfill CSS using styled-components mixins in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中使用样式化组件混合的聚合填充CSS</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/polyfill-flex-gap-using-mixin-function-with-styled-components-201be7951fd3?source=collection_archive---------7-----------------------#2022-02-07">https://javascript.plainenglish.io/polyfill-flex-gap-using-mixin-function-with-styled-components-201be7951fd3?source=collection_archive---------7-----------------------#2022-02-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7acd" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">以挠性间隙聚合填充物为例</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e2f785d587c28ade5a2e8fa7d0454a72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yo6MktzKoHQRg8FM0V51aQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image from Envato Elements (license code: WKRCBG5HQ3)</figcaption></figure><h1 id="abf4" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">风格组件和弹性间隙简介</h1><p id="a8ca" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated"><a class="ae mg" href="https://styled-components.com/" rel="noopener ugc nofollow" target="_blank"> Styled-components </a>是一种向React项目添加样式的现代方法。与使用单独管道将样式代码编译成CSS的SCSS/萨斯不同，styled-component允许我们使用类似SCSS的语法混合JavaScript来编写CSS，并且它将生成的样式应用到目标React组件，而无需担心类名冲突。</p><p id="49ae" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">CSS属性<code class="fe mm mn mo mp b">gap</code>是flexbox特性家族中的一颗新星。它用于表示flex容器中子项目之间的间距，而没有令人头疼的<code class="fe mm mn mo mp b">margin</code>。</p><p id="dd95" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">想象一下:</p><ul class=""><li id="bf95" class="mq mr in lm b ln mh lq mi lt ms lx mt mb mu mf mv mw mx my bi translated">我们将一个<code class="fe mm mn mo mp b">StyledParent</code>组件定义为flex容器，这意味着其中的子项之间应该有一个空格<code class="fe mm mn mo mp b">8px</code></li><li id="cde6" class="mq mr in lm b ln mz lq na lt nb lx nc mb nd mf mv mw mx my bi translated">我们将一个<code class="fe mm mn mo mp b">StyledChild</code>组件定义为flex项，它呈现一个具有固定高度和宽度的灰色框</li><li id="8479" class="mq mr in lm b ln mz lq na lt nb lx nc mb nd mf mv mw mx my bi translated">我们在一个<code class="fe mm mn mo mp b">StyledParent</code>中放置了三个<code class="fe mm mn mo mp b">StyledChild</code>，代码如下:</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="367b" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">然后我们可以看到在三个灰色框之间应用了<code class="fe mm mn mo mp b">8px</code>间距:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/64549e4ef1504846261f348c624b2f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:374/format:webp/1*7nt2asDYRa_xwOV2aZTngQ.png"/></div></div></figure><p id="7d3e" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">更深入的解释[1]和浏览器兼容性状态[2]可以在参考资料部分找到。</p><h1 id="47f8" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated"><strong class="ak">使用mixins的带样式组件的聚合填充物</strong></h1><p id="d1a9" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">在应用程序需要运行的浏览器中，并非所有现代CSS属性都受支持，您可以选择不使用它们或应用polyfill。</p><p id="793a" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">polyfill CSS的一种传统方式是使用一种后处理工具，如<code class="fe mm mn mo mp b">PostCSS</code>来识别polyfill，并在捆绑后将其添加到最终的样式表中。但是有了<code class="fe mm mn mo mp b">styled-components</code>，我们又多了一个选择——<code class="fe mm mn mo mp b">mixins</code>。</p><p id="7435" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated"><code class="fe mm mn mo mp b">mixins</code>的概念类似于SCSS/萨斯:一个生成可重用CSS块的函数——在我们的上下文中，它只是一个JavaScript函数！</p><p id="b2a7" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">也就是说，我们想要编写一个JavaScript函数来:</p><ul class=""><li id="0af5" class="mq mr in lm b ln mh lq mi lt ms lx mt mb mu mf mv mw mx my bi translated">检测浏览器是否支持该功能</li><li id="f624" class="mq mr in lm b ln mz lq na lt nb lx nc mb nd mf mv mw mx my bi translated">如果支持，我们可以生成不带polyfill的最新版本的CSS</li><li id="38f7" class="mq mr in lm b ln mz lq na lt nb lx nc mb nd mf mv mw mx my bi translated">如果不支持，我们生成多填充CSS</li></ul><p id="3e9c" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">例如，我们想替换…</p><pre class="kd ke kf kg gt nh mp ni nj aw nk bi"><span id="07d6" class="nl kt in mp b gy nm nn l no np">export const StyledParent = styled.div`<br/>  display: flex;<br/>  <strong class="mp io">gap: 8px;</strong><br/>`;</span></pre><p id="564d" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">…与…</p><pre class="kd ke kf kg gt nh mp ni nj aw nk bi"><span id="abd9" class="nl kt in mp b gy nm nn l no np">export const StyledParentWithMixin = styled.div`<br/>  display: flex;<br/>  <strong class="mp io">${flexGap("8px")}</strong><br/>`;</span></pre><p id="1b30" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">…实施非常简单</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><blockquote class="nq nr ns"><p id="d9dc" class="lk ll nt lm b ln mh jo lp lq mi jr ls nu mj lv lw nv mk lz ma nw ml md me mf ig bi translated">注意:本文提供的多填充代码并不是涵盖所有边缘情况的完整解决方案，但它适用于简单的用途(例如，<code class="fe mm mn mo mp b">gap</code>使用绝对值)</p></blockquote><p id="aaf9" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">你可能想知道为什么我们需要用JavaScript而不是<code class="fe mm mn mo mp b">supports</code>来检测CSS特性支持——这是因为有时不使用JavaScript很难做到这一点[3]。</p><p id="ed6f" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">检测代码可以在下面找到:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Modified from <a class="ae mg" href="https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css/flexgap.js" rel="noopener ugc nofollow" target="_blank">https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css/flexgap.js</a></figcaption></figure><p id="2bdb" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated">这里需要注意的是，实际的检测逻辑将在运行时只运行一次，并将缓存的结果用于所有后续调用，因此性能不会受到影响。</p><h1 id="fa58" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">操场</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx nf l"/></div></figure><h1 id="d026" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">参考</h1><ul class=""><li id="381a" class="mq mr in lm b ln lo lq lr lt ny lx nz mb oa mf mv mw mx my bi translated">[1] <a class="ae mg" href="https://css-tricks.com/almanac/properties/g/gap/" rel="noopener ugc nofollow" target="_blank"> gap | CSS-Tricks </a></li><li id="699d" class="mq mr in lm b ln mz lq na lt nb lx nc mb nd mf mv mw mx my bi translated">[2] <a class="ae mg" href="https://caniuse.com/flexbox-gap" rel="noopener ugc nofollow" target="_blank">我可以使用flex-gap吗？</a></li><li id="aac5" class="mq mr in lm b ln mz lq na lt nb lx nc mb nd mf mv mw mx my bi translated">[3] <a class="ae mg" href="https://ishadeed.com/article/flexbox-gap/" rel="noopener ugc nofollow" target="_blank">如何检测浏览器对Flexbox Gap的支持？</a></li></ul><p id="38c8" class="pw-post-body-paragraph lk ll in lm b ln mh jo lp lq mi jr ls lt mj lv lw lx mk lz ma mb ml md me mf ig bi translated"><em class="nt">更多内容看</em> <a class="ae mg" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="nt">说白了。报名参加我们的</em> <a class="ae mg" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="nt">免费周报</em> </strong> </a> <em class="nt">。在我们的</em> <a class="ae mg" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="nt">社区不和谐</em> </strong> </a> <em class="nt">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>