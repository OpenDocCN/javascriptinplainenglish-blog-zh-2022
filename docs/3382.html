<html>
<head>
<title>How to Create Todo App with Next.js &amp; Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Next.js和Firebase创建Todo应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-todo-app-with-nextjs-firebase-383dcee65076?source=collection_archive---------0-----------------------#2022-08-24">https://javascript.plainenglish.io/how-to-create-todo-app-with-nextjs-firebase-383dcee65076?source=collection_archive---------0-----------------------#2022-08-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/14d1cbcf3d559f7f7c9c2d50098120e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9ncMWN4w3NQOh6UkiQlBw.png"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk">Todo app with Nextjs and firebase</figcaption></figure><div class=""/><div class=""><h2 id="ee76" class="pw-subtitle-paragraph jz jb jc bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">嘿devs，欢迎来到本教程；我们会用React，Next.js + Firebase搭建一个实时的Todo App。</h2></div><p id="52a5" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">这是这篇文章的视频解释👇</p><figure class="ln lo lp lq gt ip"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="525e" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated"><strong class="kt jd">这个项目的完整代码可以在这个</strong> <a class="ae lt" href="https://github.com/anjalbinayak/medium-nextjs-firebase-todo" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jd">资源库</strong> </a>中找到👇</p><div class="im in gp gr io lu"><a href="https://github.com/anjalbinayak/medium-nextjs-firebase-todo" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd jd gy z fp lz fr fs ma fu fw jb bi translated">TodoApp-Nextjs-Firebase</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">点击此处查看该待办事项应用的代码。别忘了使用黑暗模式😉</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi iu lu"/></div></div></a></div><p id="7aa8" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在我们开始编写代码之前，我想告诉你，我希望你对React和Next.js有基本的了解。</p><p id="eb06" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">如果您不熟悉React和Next，请浏览这些文档:</p><ol class=""><li id="7def" class="mj mk jc kt b ku kv kx ky la ml le mm li mn lm mo mp mq mr bi translated"><a class="ae lt" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React文档</a></li><li id="2488" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated"><a class="ae lt" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js文档</a></li></ol><h2 id="8963" class="mx my jc bd mz na nb dn nc nd ne dp nf la ng nh ni le nj nk nl li nm nn no np bi translated">这是我们要建造的东西</h2><p id="19a3" class="pw-post-body-paragraph kr ks jc kt b ku nq kd kw kx nr kg kz la ns lc ld le nt lg lh li nu lk ll lm ig bi translated">完成本教程后，我们的应用程序将如下所示:</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/360d8d4ba63682ab9d9b6bd5cce8dd89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tJ2nsMLe0Bab_8QQTWaR-w.png"/></div></div></figure><h2 id="c4eb" class="mx my jc bd mz na nb dn nc nd ne dp nf la ng nh ni le nj nk nl li nm nn no np bi translated">这是我们这个项目的技术堆栈</h2><ol class=""><li id="8aa7" class="mj mk jc kt b ku nq kx nr la nv le nw li nx lm mo mp mq mr bi translated"><strong class="kt jd"> React </strong> : <br/>我们会为构建这个应用的UI做出反应。</li><li id="4f46" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated"><strong class="kt jd"> Next.js </strong> : <br/> Next.js是一个基于React的框架，用于构建现代web应用。它提供了一些好处，比如服务器端渲染和许多SEO好处</li><li id="7812" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">我们将使用Firebase作为这个应用程序的后端。我们将数据存储在<em class="ny">Firestore</em>T25】中。它为创建实时应用程序提供了许多功能。<br/>(我们的待办事宜应用将是实时的)</li><li id="2a0b" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated"><strong class="kt jd">ChakraUI</strong>:<br/>ChakraUI是一个造型框架。它已经设计好了可以在应用程序中使用的组件。它提供了响应能力、黑暗模式、吸引眼球的配色方案等等。</li></ol><h2 id="5071" class="mx my jc bd mz na nb dn nc nd ne dp nf la ng nh ni le nj nk nl li nm nn no np bi translated">为什么我们在项目中使用Firebase？</h2><p id="18e7" class="pw-post-body-paragraph kr ks jc kt b ku nq kd kw kx nr kg kz la ns lc ld le nt lg lh li nu lk ll lm ig bi translated">Firebase提供了如此多的功能，让人难以忽视。</p><p id="26c4" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">它仅用4-5行代码就提供了社交认证。</p><p id="e882" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们将使用Firebase在我们的项目中实现<strong class="kt jd"> Google Auth </strong>。</p><p id="f18e" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">Firebase的一些功能包括:</p><ol class=""><li id="b5e5" class="mj mk jc kt b ku kv kx ky la ml le mm li mn lm mo mp mq mr bi translated">证明</li><li id="258d" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">实时服务器</li><li id="67c1" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">低安全风险</li><li id="a825" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">社会认证</li><li id="e7f1" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">最小设置</li></ol><h1 id="c69f" class="nz my jc bd mz oa ob oc nc od oe of nf ki og kj ni kl oh km nl ko oi kp no oj bi translated">目录</h1><ol class=""><li id="8201" class="mj mk jc kt b ku nq kx nr la nv le nw li nx lm mo mp mq mr bi translated">创建Firebase项目</li><li id="fa0d" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">创建与Firestore互动的方法</li><li id="1596" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">创建React组件(添加Todo、Auth、TodoList)</li><li id="2f52" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">npm运行开发😁</li></ol><p id="8814" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">让我们从创建下一个应用程序开始。</p><p id="3317" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">键入以下命令安装下一个应用程序:</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="6281" class="mx my jc ol b gy op oq l or os">npx create-next-app next-firebase-todo</span></pre><p id="65bb" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated"><strong class="kt jd">安装所需的依赖项</strong></p><ol class=""><li id="9f53" class="mj mk jc kt b ku kv kx ky la ml le mm li mn lm mo mp mq mr bi translated">Chakra UI</li></ol><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="9765" class="mx my jc ol b gy op oq l or os">npm i @chakra-ui/react @emotion/react @emotion/styled framer-motion</span></pre><p id="37b4" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">2.重火力点</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="50e5" class="mx my jc ol b gy op oq l or os">npm i firebase</span></pre><h2 id="45b9" class="mx my jc bd mz na nb dn nc nd ne dp nf la ng nh ni le nj nk nl li nm nn no np bi translated">创建Firebase项目</h2><p id="e6fe" class="pw-post-body-paragraph kr ks jc kt b ku nq kd kw kx nr kg kz la ns lc ld le nt lg lh li nu lk ll lm ig bi translated">转到<a class="ae lt" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank">火焰基座控制台</a>。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/847ce7bc93be647fe4a987f1401684d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SOmdRJ7i6aj-ACFYmlUy3Q.png"/></div></div></figure><p id="4a04" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">点击创建一个项目。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/a875bd1ec2db40e341aa85047aabbf5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Inr7tjuEu7c8qRVhH7cqg.png"/></div></div></figure><p id="4b22" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">命名您的项目并勾选方框，然后点击<strong class="kt jd">继续。</strong></p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/8cb6409f578928cf9a12365c40bf39cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h66DMtLKcGZ3ZFWPt5xHzg.png"/></div></div></figure><p id="d809" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们不需要谷歌项目分析。因此，松开按钮并点击<strong class="kt jd">继续。</strong></p><p id="b6bc" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">创建项目后，您将看到项目仪表板。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/f00ad64f91ea831d61ac5bb82d29d890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wcsv0IWqB9fitFtoeU9Xqw.png"/></div></div></figure><p id="31a4" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">如图标所示，第一个按钮用于IOS项目，第二个用于Android项目，第三个用于Web应用程序。</p><p id="70e5" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们正在创建一个web应用程序，因此我们将单击它。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ot"><img src="../Images/38eb1f709ee2bc660abd33eac0bdfdc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eg12yEP4AQpbIEGXjCGbIg.png"/></div></div></figure><p id="55e7" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">命名您的web应用程序，然后单击<strong class="kt jd">注册应用程序。</strong></p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/707829da213d82265896c0816838df15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g6GGzwtFb_GwzpLolEFwhw.png"/></div></div></figure><p id="3d3a" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">复制这段代码并点击<strong class="kt jd">继续到控制台。</strong></p><p id="2c62" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated"><strong class="kt jd">注意</strong>:把这段代码保存在某个地方。我们将在我们的项目中用到它。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/f5351565967df82920bad9ef2f881be7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZRP60_eNYhJOuY03zTbNA.png"/></div></div></figure><p id="214d" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在左侧，点击<strong class="kt jd">构建。</strong></p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/e333b5011f2935f4e360e21b4597efa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0G-XRynINZjLSLoK01d_XA.png"/></div></div></figure><p id="7424" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们只需要这个列表中firebase的两个特性。</p><p id="c094" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated"><strong class="kt jd">认证</strong> —用于添加Google登录。<br/> <strong class="kt jd"> FireStore数据库</strong> —用于存储用户的待办事项。</p><p id="c03c" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在，让我们先启用这两个特性。</p><p id="a2e9" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">点击认证。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/49b53a54739911c1beb50ba9e4de577e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z0DHoIAVk-L9dAjkQ6nNyQ.png"/></div></div></figure><p id="cd5e" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">单击开始。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/a72ce5c2bc6b6862462f8cfecd68b106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VUqH5NtZAoKzvELqSJqPeQ.png"/></div></div></figure><p id="0d44" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们将只使用谷歌认证，所以点击谷歌。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/2ec523425e403b629646080dde720edc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g9BYFA0WbTc5sFNjhSVreQ.png"/></div></div></figure><p id="c7db" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">启用Google身份验证，选择项目支持电子邮件，然后单击保存。</p><p id="eab8" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们已经在Firebase项目中成功启用了Google Auth。</p><p id="a8c8" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在让我们启用Firestore数据库。</p><p id="309e" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">转到左侧边栏，单击构建，然后单击Firestore数据库。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/363993dcaa8290ab23cf2a7e3c28fc94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vdV_vx19bmvyQR0zix2JFg.png"/></div></div></figure><p id="1129" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">点击创建数据库。</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/7022a76e59621fd10a8e6aed8d9d30f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tWuCHaNkt24P0kxWL_AgVg.png"/></div></div></figure><p id="ccb6" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在测试模式下选择<em class="ny">启动</em>并点击<strong class="kt jd">下一步，</strong>并点击<strong class="kt jd">启用。</strong></p><p id="f29f" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在我们已经启用了项目所需的<strong class="kt jd">认证</strong>和<strong class="kt jd"> Firestore数据库</strong>。</p><p id="8ac0" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在让我们开始编码。</p><p id="1bb6" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">让我们转到<code class="fe ou ov ow ol b">pages/_app.js</code>并复制粘贴以下内容:</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="9d4e" class="mx my jc ol b gy op oq l or os">import { ChakraProvider } from "@chakra-ui/react";</span><span id="f9e7" class="mx my jc ol b gy ox oq l or os">function MyApp({ Component, pageProps }) {</span><span id="9913" class="mx my jc ol b gy ox oq l or os">return (</span><span id="6307" class="mx my jc ol b gy ox oq l or os">&lt;ChakraProvider&gt;</span><span id="2e87" class="mx my jc ol b gy ox oq l or os">&lt;Component {...pageProps} /&gt;</span><span id="8179" class="mx my jc ol b gy ox oq l or os">&lt;/ChakraProvider&gt;</span><span id="099a" class="mx my jc ol b gy ox oq l or os">);</span><span id="98ef" class="mx my jc ol b gy ox oq l or os">}</span><span id="d7cc" class="mx my jc ol b gy ox oq l or os">export default MyApp;</span></pre><p id="8d4d" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们只是把<code class="fe ou ov ow ol b">&lt;Component {…pageProps} /&gt;</code>包在了<code class="fe ou ov ow ol b">&lt;ChakraProvider&gt;</code>里面。</p><p id="1ef0" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">Chakra UI的官方文档是这样建议的。</p><p id="01a1" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在，我们将在我们的web应用程序中设置Firebase。</p><p id="34ba" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">让我们在项目根目录下创建一个名为<code class="fe ou ov ow ol b">firebase</code>的新文件夹。</p><p id="2368" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在<code class="fe ou ov ow ol b">firebase</code>目录下创建一个名为<code class="fe ou ov ow ol b">index.js</code>的文件。</p><p id="3227" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在粘贴我之前告诉你复制的代码(firebase config):</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="4821" class="mx my jc ol b gy op oq l or os">import { initializeApp } from "firebase/app";</span><span id="4755" class="mx my jc ol b gy ox oq l or os">import { getAuth } from "firebase/auth";</span><span id="f63e" class="mx my jc ol b gy ox oq l or os">import { getFirestore } from "firebase/firestore";</span><span id="2e8f" class="mx my jc ol b gy ox oq l or os"><strong class="ol jd">// replace this firebase conFigvariable with your own</strong></span><span id="259d" class="mx my jc ol b gy ox oq l or os">const firebaseConfig = {</span><span id="fe23" class="mx my jc ol b gy ox oq l or os">apiKey: "AIzaSyClH1YdssQHAA0peMtQ_wj2A4Crnc4fEgU",</span><span id="01e3" class="mx my jc ol b gy ox oq l or os">authDomain: "medium-firebase-next-todo.firebaseapp.com",</span><span id="e615" class="mx my jc ol b gy ox oq l or os">projectId: "medium-firebase-next-todo",</span><span id="2c92" class="mx my jc ol b gy ox oq l or os">storageBucket: "medium-firebase-next-todo.appspot.com",</span><span id="d412" class="mx my jc ol b gy ox oq l or os">messagingSenderId: "989711683222",</span><span id="87cf" class="mx my jc ol b gy ox oq l or os">appId: "1:989711683222:web:bc878dca5a5d251177fcb7",</span><span id="b099" class="mx my jc ol b gy ox oq l or os">};</span><span id="52ea" class="mx my jc ol b gy ox oq l or os">const app = initializeApp(firebaseConfig);</span><span id="c462" class="mx my jc ol b gy ox oq l or os">const auth = getAuth(app);</span><span id="1ee6" class="mx my jc ol b gy ox oq l or os">const db = getFirestore(app);</span><span id="0fbd" class="mx my jc ol b gy ox oq l or os">export { auth, db };</span></pre><p id="8ff6" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们在这里做的是粘贴firebase配置。我们另外创建了两个变量<code class="fe ou ov ow ol b">auth </code>和<code class="fe ou ov ow ol b">db </code>，它们分别是<strong class="kt jd"> firebase认证模块</strong>和<strong class="kt jd"> firestore模块</strong>。</p><p id="4e63" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">让我们为我们的项目添加一个新的依赖项，它是<code class="fe ou ov ow ol b">react-icons</code>。</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="b2d4" class="mx my jc ol b gy op oq l or os">npm install react-icons --save</span></pre><p id="dde7" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">React图标库允许你添加漂亮的图标到你的项目中。</p><p id="00aa" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在让我们创建创建todos并与之交互的方法。</p><h2 id="70a3" class="mx my jc bd mz na nb dn nc nd ne dp nf la ng nh ni le nj nk nl li nm nn no np bi translated">与Firestore互动的方法</h2><p id="8857" class="pw-post-body-paragraph kr ks jc kt b ku nq kd kw kx nr kg kz la ns lc ld le nt lg lh li nu lk ll lm ig bi translated">在项目的根目录下创建一个名为<code class="fe ou ov ow ol b">api</code>的目录。</p><p id="d2b1" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">然后创建一个文件<code class="fe ou ov ow ol b">todo.js</code>。</p><p id="9406" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">并将下面的代码复制粘贴到<code class="fe ou ov ow ol b">todo.js</code>中。</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="431f" class="mx my jc ol b gy op oq l or os">import { db } from "../firebase";</span><span id="0039" class="mx my jc ol b gy ox oq l or os">import {</span><span id="9d5f" class="mx my jc ol b gy ox oq l or os">collection,</span><span id="4f26" class="mx my jc ol b gy ox oq l or os">addDoc,</span><span id="2431" class="mx my jc ol b gy ox oq l or os">updateDoc,</span><span id="7d3c" class="mx my jc ol b gy ox oq l or os">doc,</span><span id="fdff" class="mx my jc ol b gy ox oq l or os">deleteDoc,</span><span id="7789" class="mx my jc ol b gy ox oq l or os">} from "firebase/firestore";</span><span id="1f44" class="mx my jc ol b gy ox oq l or os">const addTodo = async ({ userId, title, description, status }) =&gt; {</span><span id="9c36" class="mx my jc ol b gy ox oq l or os">try {</span><span id="f338" class="mx my jc ol b gy ox oq l or os">await addDoc(collection(db, "todo"), {</span><span id="d9fc" class="mx my jc ol b gy ox oq l or os">user: userId,</span><span id="fdda" class="mx my jc ol b gy ox oq l or os">title: title,</span><span id="3403" class="mx my jc ol b gy ox oq l or os">description: description,</span><span id="7b0f" class="mx my jc ol b gy ox oq l or os">status: status,</span><span id="8be5" class="mx my jc ol b gy ox oq l or os">createdAt: new Date().getTime(),</span><span id="099f" class="mx my jc ol b gy ox oq l or os">});</span><span id="0285" class="mx my jc ol b gy ox oq l or os">} catch (err) {}</span><span id="f769" class="mx my jc ol b gy ox oq l or os">};</span><span id="20df" class="mx my jc ol b gy ox oq l or os">const toggleTodoStatus = async ({ docId, status }) =&gt; {</span><span id="6d2b" class="mx my jc ol b gy ox oq l or os">try {</span><span id="83b8" class="mx my jc ol b gy ox oq l or os">const todoRef = doc(db, "todo", docId);</span><span id="42bd" class="mx my jc ol b gy ox oq l or os">await updateDoc(todoRef, {</span><span id="10de" class="mx my jc ol b gy ox oq l or os">status,</span><span id="0e50" class="mx my jc ol b gy ox oq l or os">});</span><span id="f699" class="mx my jc ol b gy ox oq l or os">} catch (err) {</span><span id="0f15" class="mx my jc ol b gy ox oq l or os">console.log(err);</span><span id="064f" class="mx my jc ol b gy ox oq l or os">}</span><span id="738a" class="mx my jc ol b gy ox oq l or os">};</span><span id="e2c4" class="mx my jc ol b gy ox oq l or os">const deleteTodo = async (docId) =&gt; {</span><span id="b34f" class="mx my jc ol b gy ox oq l or os">try {</span><span id="e7fa" class="mx my jc ol b gy ox oq l or os">const todoRef = doc(db, "todo", docId);</span><span id="a2f9" class="mx my jc ol b gy ox oq l or os">await deleteDoc(todoRef);</span><span id="88a0" class="mx my jc ol b gy ox oq l or os">} catch (err) {</span><span id="d978" class="mx my jc ol b gy ox oq l or os">console.log(err);</span><span id="ab5b" class="mx my jc ol b gy ox oq l or os">}</span><span id="1649" class="mx my jc ol b gy ox oq l or os">};</span><span id="be25" class="mx my jc ol b gy ox oq l or os">export { addTodo, toggleTodoStatus, deleteTodo };</span></pre><p id="b01d" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在让我们创建一个身份验证挂钩来检查用户的身份验证状态。</p><p id="fecf" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">创建一个名为<code class="fe ou ov ow ol b">hooks</code>的目录</p><p id="a0e6" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">并在<code class="fe ou ov ow ol b">hooks</code>目录下创建一个文件<code class="fe ou ov ow ol b">useAuth.js</code></p><p id="511b" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">并将下面的代码复制粘贴到<code class="fe ou ov ow ol b">useAuth.js</code>中。</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="0897" class="mx my jc ol b gy op oq l or os">import { useEffect, useState } from "react";</span><span id="4aa3" class="mx my jc ol b gy ox oq l or os">import { auth } from "../firebase";</span><span id="19e7" class="mx my jc ol b gy ox oq l or os">const useAuth = () =&gt; {</span><span id="bad4" class="mx my jc ol b gy ox oq l or os">const [user, setUser] = useState(null);</span><span id="8432" class="mx my jc ol b gy ox oq l or os">const [isLoggedIn, setIsLoggedIn] = useState(false);</span><span id="90e3" class="mx my jc ol b gy ox oq l or os">useEffect(() =&gt; {</span><span id="481d" class="mx my jc ol b gy ox oq l or os">auth.onAuthStateChanged((user) =&gt; {</span><span id="21e4" class="mx my jc ol b gy ox oq l or os">setIsLoggedIn(user &amp;&amp; user.uid ? true : false);</span><span id="d24c" class="mx my jc ol b gy ox oq l or os">setUser(user);</span><span id="28d1" class="mx my jc ol b gy ox oq l or os">});</span><span id="aee3" class="mx my jc ol b gy ox oq l or os">});</span><span id="cca3" class="mx my jc ol b gy ox oq l or os">return { user, isLoggedIn };</span><span id="d430" class="mx my jc ol b gy ox oq l or os">};</span><span id="e319" class="mx my jc ol b gy ox oq l or os">export default useAuth;</span></pre><p id="dec0" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们所做的是创建一个useAuth钩子来返回当前的<code class="fe ou ov ow ol b">user </code>和<code class="fe ou ov ow ol b">isLoggedIn </code>布尔值。</p><p id="1624" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">每次auth状态改变时，调用<code class="fe ou ov ow ol b">onAuthStateChanged </code>中的方法。</p><p id="f612" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">这个功能是firebase本身提供的。</p><p id="c02d" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在让我们创建用户界面。</p><h2 id="a626" class="mx my jc bd mz na nb dn nc nd ne dp nf la ng nh ni le nj nk nl li nm nn no np bi translated">创建React组件</h2><p id="3275" class="pw-post-body-paragraph kr ks jc kt b ku nq kd kw kx nr kg kz la ns lc ld le nt lg lh li nu lk ll lm ig bi translated">在web应用程序的根目录下创建<code class="fe ou ov ow ol b">components </code>目录。</p><p id="ee69" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们将在应用程序中创建3个组件:</p><ol class=""><li id="dba2" class="mj mk jc kt b ku kv kx ky la ml le mm li mn lm mo mp mq mr bi translated">AddTodo —用于添加新的Todo</li><li id="d1d1" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">Auth —用于添加登录/注销按钮</li><li id="9aab" class="mj mk jc kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">待办事项—用于正确查看所有现有的待办事项</li></ol><p id="00ad" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">让我们从AddTodo开始。</p><p id="13f9" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在<code class="fe ou ov ow ol b">components</code>目录中创建<code class="fe ou ov ow ol b"> AddTodo.jsx</code>。</p><p id="f264" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">将以下代码复制并粘贴到AddTodo.jsx中:</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="e994" class="mx my jc ol b gy op oq l or os">import React from "react";</span><span id="050c" class="mx my jc ol b gy ox oq l or os">import {</span><span id="3df1" class="mx my jc ol b gy ox oq l or os">Box,</span><span id="b970" class="mx my jc ol b gy ox oq l or os">Input,</span><span id="2474" class="mx my jc ol b gy ox oq l or os">Button,</span><span id="2734" class="mx my jc ol b gy ox oq l or os">Textarea,</span><span id="b1ab" class="mx my jc ol b gy ox oq l or os">Stack,</span><span id="7a5a" class="mx my jc ol b gy ox oq l or os">Select,</span><span id="3df2" class="mx my jc ol b gy ox oq l or os">useToast,</span><span id="66e7" class="mx my jc ol b gy ox oq l or os">} from "@chakra-ui/react";</span><span id="e28d" class="mx my jc ol b gy ox oq l or os">import useAuth from "../hooks/useAuth";</span><span id="c90f" class="mx my jc ol b gy ox oq l or os">import { addTodo } from "../api/todo";</span><span id="a9a3" class="mx my jc ol b gy ox oq l or os">const AddTodo = () =&gt; {</span><span id="f36d" class="mx my jc ol b gy ox oq l or os">const [title, setTitle] = React.useState("");</span><span id="703a" class="mx my jc ol b gy ox oq l or os">const [description, setDescription] = React.useState("");</span><span id="24e0" class="mx my jc ol b gy ox oq l or os">const [status, setStatus] = React.useState("pending");</span><span id="a4cd" class="mx my jc ol b gy ox oq l or os">const [isLoading, setIsLoading] = React.useState(false);</span><span id="315b" class="mx my jc ol b gy ox oq l or os">const toast = useToast();</span><span id="22b2" class="mx my jc ol b gy ox oq l or os">const { isLoggedIn, user } = useAuth();</span><span id="6eb3" class="mx my jc ol b gy ox oq l or os">const handleTodoCreate = async () =&gt; {</span><span id="7da1" class="mx my jc ol b gy ox oq l or os">if (!isLoggedIn) {</span><span id="c2e4" class="mx my jc ol b gy ox oq l or os">toast({</span><span id="f46c" class="mx my jc ol b gy ox oq l or os">title: "You must be logged in to create a todo",</span><span id="5dff" class="mx my jc ol b gy ox oq l or os">status: "error",</span><span id="94ab" class="mx my jc ol b gy ox oq l or os">duration: 9000,</span><span id="5382" class="mx my jc ol b gy ox oq l or os">isClosable: true,</span><span id="00c0" class="mx my jc ol b gy ox oq l or os">});</span><span id="3f7a" class="mx my jc ol b gy ox oq l or os">return;</span><span id="3c74" class="mx my jc ol b gy ox oq l or os">}</span><span id="f3f5" class="mx my jc ol b gy ox oq l or os">setIsLoading(true);</span><span id="af53" class="mx my jc ol b gy ox oq l or os">const todo = {</span><span id="32c4" class="mx my jc ol b gy ox oq l or os">title,</span><span id="c12f" class="mx my jc ol b gy ox oq l or os">description,</span><span id="23ab" class="mx my jc ol b gy ox oq l or os">status,</span><span id="68cc" class="mx my jc ol b gy ox oq l or os">userId: user.uid,</span><span id="1805" class="mx my jc ol b gy ox oq l or os">};</span><span id="ae07" class="mx my jc ol b gy ox oq l or os">await addTodo(todo);</span><span id="638e" class="mx my jc ol b gy ox oq l or os">setIsLoading(false);</span><span id="f0f5" class="mx my jc ol b gy ox oq l or os">setTitle("");</span><span id="389c" class="mx my jc ol b gy ox oq l or os">setDescription("");</span><span id="d344" class="mx my jc ol b gy ox oq l or os">setStatus("pending");</span><span id="3aa1" class="mx my jc ol b gy ox oq l or os">toast({ title: "Todo created successfully", status: "success" });</span><span id="82ef" class="mx my jc ol b gy ox oq l or os">};</span><span id="7f2d" class="mx my jc ol b gy ox oq l or os">return (</span><span id="e2f6" class="mx my jc ol b gy ox oq l or os">&lt;Box w="40%" margin={"0 auto"} display="block" mt={5}&gt;</span><span id="03a4" class="mx my jc ol b gy ox oq l or os">&lt;Stack direction="column"&gt;</span><span id="1bac" class="mx my jc ol b gy ox oq l or os">&lt;Input</span><span id="5509" class="mx my jc ol b gy ox oq l or os">placeholder="Title"</span><span id="87e7" class="mx my jc ol b gy ox oq l or os">value={title}</span><span id="d9d7" class="mx my jc ol b gy ox oq l or os">onChange={(e) =&gt; setTitle(e.target.value)}</span><span id="1865" class="mx my jc ol b gy ox oq l or os">/&gt;</span><span id="e1c0" class="mx my jc ol b gy ox oq l or os">&lt;Textarea</span><span id="f6b7" class="mx my jc ol b gy ox oq l or os">placeholder="Description"</span><span id="3dd1" class="mx my jc ol b gy ox oq l or os">value={description}</span><span id="a1ae" class="mx my jc ol b gy ox oq l or os">onChange={(e) =&gt; setDescription(e.target.value)}</span><span id="f362" class="mx my jc ol b gy ox oq l or os">/&gt;</span><span id="b3ec" class="mx my jc ol b gy ox oq l or os">&lt;Select value={status} onChange={(e) =&gt; setStatus(e.target.value)}&gt;</span><span id="193d" class="mx my jc ol b gy ox oq l or os">&lt;option</span><span id="ff23" class="mx my jc ol b gy ox oq l or os">value={"pending"}</span><span id="8508" class="mx my jc ol b gy ox oq l or os">style={{ color: "yellow", fontWeight: "bold" }}</span><span id="7b31" class="mx my jc ol b gy ox oq l or os">&gt;</span><span id="7bd0" class="mx my jc ol b gy ox oq l or os">Pending ⌛</span><span id="47b5" class="mx my jc ol b gy ox oq l or os">&lt;/option&gt;</span><span id="6407" class="mx my jc ol b gy ox oq l or os">&lt;option</span><span id="9efa" class="mx my jc ol b gy ox oq l or os">value={"completed"}</span><span id="0c96" class="mx my jc ol b gy ox oq l or os">style={{ color: "green", fontWeight: "bold" }}</span><span id="8608" class="mx my jc ol b gy ox oq l or os">&gt;</span><span id="fdca" class="mx my jc ol b gy ox oq l or os">Completed ✅</span><span id="a7ca" class="mx my jc ol b gy ox oq l or os">&lt;/option&gt;</span><span id="38c6" class="mx my jc ol b gy ox oq l or os">&lt;/Select&gt;</span><span id="db94" class="mx my jc ol b gy ox oq l or os">&lt;Button</span><span id="abef" class="mx my jc ol b gy ox oq l or os">onClick={() =&gt; handleTodoCreate()}</span><span id="74da" class="mx my jc ol b gy ox oq l or os">disabled={title.length &lt; 1 || description.length &lt; 1 || isLoading}</span><span id="0fb3" class="mx my jc ol b gy ox oq l or os">variantColor="teal"</span><span id="2ca6" class="mx my jc ol b gy ox oq l or os">variant="solid"</span><span id="25a8" class="mx my jc ol b gy ox oq l or os">&gt;</span><span id="1055" class="mx my jc ol b gy ox oq l or os">Add</span><span id="1144" class="mx my jc ol b gy ox oq l or os">&lt;/Button&gt;</span><span id="15ca" class="mx my jc ol b gy ox oq l or os">&lt;/Stack&gt;</span><span id="d5a5" class="mx my jc ol b gy ox oq l or os">&lt;/Box&gt;</span><span id="0be8" class="mx my jc ol b gy ox oq l or os">);</span><span id="9e64" class="mx my jc ol b gy ox oq l or os">};</span><span id="0766" class="mx my jc ol b gy ox oq l or os">export default AddTodo;</span></pre><p id="5e81" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在，在<code class="fe ou ov ow ol b">component</code>目录中创建<code class="fe ou ov ow ol b">Auth.jsx</code>，并将以下代码复制并粘贴到其中:</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="c81d" class="mx my jc ol b gy op oq l or os">import React from "react";</span><span id="5743" class="mx my jc ol b gy ox oq l or os">import { Box, Button, Link, Text, useColorMode } from "@chakra-ui/react";</span><span id="bae7" class="mx my jc ol b gy ox oq l or os">import { signInWithPopup, GoogleAuthProvider } from "firebase/auth";</span><span id="448f" class="mx my jc ol b gy ox oq l or os">import { FaGoogle, FaMoon, FaSun } from "react-icons/fa";</span><span id="a8af" class="mx my jc ol b gy ox oq l or os">import { auth } from "../firebase";</span><span id="8a1b" class="mx my jc ol b gy ox oq l or os">import useAuth from "../hooks/useAuth";</span><span id="65d8" class="mx my jc ol b gy ox oq l or os">const Auth = () =&gt; {</span><span id="b69a" class="mx my jc ol b gy ox oq l or os">const { toggleColorMode, colorMode } = useColorMode();</span><span id="c5a6" class="mx my jc ol b gy ox oq l or os">const { isLoggedIn, user } = useAuth();</span><span id="6cc1" class="mx my jc ol b gy ox oq l or os">const handleAuth = async () =&gt; {</span><span id="0ee5" class="mx my jc ol b gy ox oq l or os">const provider = new GoogleAuthProvider();</span><span id="b89c" class="mx my jc ol b gy ox oq l or os">signInWithPopup(auth, provider)</span><span id="d371" class="mx my jc ol b gy ox oq l or os">.then((result) =&gt; {</span><span id="58a5" class="mx my jc ol b gy ox oq l or os">// This gives you a Google Access Token. You can use it to access the Google API.</span><span id="b58f" class="mx my jc ol b gy ox oq l or os">const credential = GoogleAuthProvider.credentialFromResult(result);</span><span id="9feb" class="mx my jc ol b gy ox oq l or os">const token = credential.accessToken;</span><span id="6391" class="mx my jc ol b gy ox oq l or os">// The signed-in user info.</span><span id="6240" class="mx my jc ol b gy ox oq l or os">const user = result.user;</span><span id="552b" class="mx my jc ol b gy ox oq l or os">// ...</span><span id="0b88" class="mx my jc ol b gy ox oq l or os">})</span><span id="e6d2" class="mx my jc ol b gy ox oq l or os">.catch((error) =&gt; {</span><span id="cc43" class="mx my jc ol b gy ox oq l or os">// Handle Errors here.</span><span id="a3f7" class="mx my jc ol b gy ox oq l or os">const errorCode = error.code;</span><span id="e57a" class="mx my jc ol b gy ox oq l or os">const errorMessage = error.message;</span><span id="cd43" class="mx my jc ol b gy ox oq l or os">// The email of the user's account used.</span><span id="2721" class="mx my jc ol b gy ox oq l or os">const email = error.customData.email;</span><span id="2274" class="mx my jc ol b gy ox oq l or os">// The AuthCredential type that was used.</span><span id="bd2e" class="mx my jc ol b gy ox oq l or os">const credential = GoogleAuthProvider.credentialFromError(error);</span><span id="e914" class="mx my jc ol b gy ox oq l or os">// ...</span><span id="470d" class="mx my jc ol b gy ox oq l or os">});</span><span id="2a89" class="mx my jc ol b gy ox oq l or os">};</span><span id="a5cf" class="mx my jc ol b gy ox oq l or os">return (</span><span id="d40a" class="mx my jc ol b gy ox oq l or os">&lt;Box position={"fixed"} top="5%" right="5%"&gt;</span><span id="b219" class="mx my jc ol b gy ox oq l or os">&lt;Button onClick={() =&gt; toggleColorMode()}&gt;</span><span id="4050" class="mx my jc ol b gy ox oq l or os">{colorMode == "dark" ? &lt;FaSun /&gt; : &lt;FaMoon /&gt;}</span><span id="5f3a" class="mx my jc ol b gy ox oq l or os">&lt;/Button&gt;{" "}</span><span id="b75c" class="mx my jc ol b gy ox oq l or os">{isLoggedIn &amp;&amp; (</span><span id="11b5" class="mx my jc ol b gy ox oq l or os">&lt;&gt;</span><span id="2772" class="mx my jc ol b gy ox oq l or os">&lt;Text color="green.500"&gt;{user.email}&lt;/Text&gt;</span><span id="0f55" class="mx my jc ol b gy ox oq l or os">&lt;Link color="red.500" onClick={() =&gt; auth.signOut()}&gt;</span><span id="1650" class="mx my jc ol b gy ox oq l or os">Logout</span><span id="382e" class="mx my jc ol b gy ox oq l or os">&lt;/Link&gt;</span><span id="eeea" class="mx my jc ol b gy ox oq l or os">&lt;/&gt;</span><span id="b697" class="mx my jc ol b gy ox oq l or os">)}</span><span id="7739" class="mx my jc ol b gy ox oq l or os">{!isLoggedIn &amp;&amp; (</span><span id="90e4" class="mx my jc ol b gy ox oq l or os">&lt;Button leftIcon={&lt;FaGoogle /&gt;} onClick={() =&gt; handleAuth()}&gt;</span><span id="3a27" class="mx my jc ol b gy ox oq l or os">Login with Google</span><span id="af1c" class="mx my jc ol b gy ox oq l or os">&lt;/Button&gt;</span><span id="1ca2" class="mx my jc ol b gy ox oq l or os">)}</span><span id="8f60" class="mx my jc ol b gy ox oq l or os">&lt;/Box&gt;</span><span id="11de" class="mx my jc ol b gy ox oq l or os">);</span><span id="5883" class="mx my jc ol b gy ox oq l or os">};</span><span id="34c3" class="mx my jc ol b gy ox oq l or os">export default Auth;</span></pre><p id="7500" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在让我们在<code class="fe ou ov ow ol b">components </code>目录中创建<code class="fe ou ov ow ol b">TodoList.jsx </code>组件。</p><p id="2614" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">并将以下代码复制并粘贴到其中:</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="ffc7" class="mx my jc ol b gy op oq l or os">import {</span><span id="e82e" class="mx my jc ol b gy ox oq l or os">Badge,</span><span id="c4c8" class="mx my jc ol b gy ox oq l or os">Box,</span><span id="3cee" class="mx my jc ol b gy ox oq l or os">Heading,</span><span id="3195" class="mx my jc ol b gy ox oq l or os">SimpleGrid,</span><span id="e6cd" class="mx my jc ol b gy ox oq l or os">Text,</span><span id="44cf" class="mx my jc ol b gy ox oq l or os">useToast,</span><span id="b7ec" class="mx my jc ol b gy ox oq l or os">} from "@chakra-ui/react";</span><span id="ae97" class="mx my jc ol b gy ox oq l or os">import React, { useEffect } from "react";</span><span id="00fc" class="mx my jc ol b gy ox oq l or os">import useAuth from "../hooks/useAuth";</span><span id="fcc5" class="mx my jc ol b gy ox oq l or os">import { collection, onSnapshot, query, where } from "firebase/firestore";</span><span id="6e48" class="mx my jc ol b gy ox oq l or os">import { db } from "../firebase";</span><span id="158b" class="mx my jc ol b gy ox oq l or os">import { FaToggleOff, FaToggleOn, FaTrash } from "react-icons/fa";</span><span id="09fe" class="mx my jc ol b gy ox oq l or os">import { deleteTodo, toggleTodoStatus } from "../api/todo";</span><span id="5231" class="mx my jc ol b gy ox oq l or os">const TodoList = () =&gt; {</span><span id="3cb8" class="mx my jc ol b gy ox oq l or os">const [todos, setTodos] = React.useState([]);</span><span id="2a63" class="mx my jc ol b gy ox oq l or os">const {  user } = useAuth();</span><span id="6891" class="mx my jc ol b gy ox oq l or os">const toast = useToast();</span><span id="77e0" class="mx my jc ol b gy ox oq l or os">const refreshData = () =&gt; {</span><span id="2b9e" class="mx my jc ol b gy ox oq l or os">if (!user) {</span><span id="82f9" class="mx my jc ol b gy ox oq l or os">setTodos([]);</span><span id="a8b0" class="mx my jc ol b gy ox oq l or os">return;</span><span id="ccd3" class="mx my jc ol b gy ox oq l or os">}</span><span id="e410" class="mx my jc ol b gy ox oq l or os">const q = query(collection(db, "todo"), where("user", "==", user.uid));</span><span id="5679" class="mx my jc ol b gy ox oq l or os">onSnapshot(q, (querySnapchot) =&gt; {</span><span id="3f52" class="mx my jc ol b gy ox oq l or os">let ar = [];</span><span id="3008" class="mx my jc ol b gy ox oq l or os">querySnapchot.docs.forEach((doc) =&gt; {</span><span id="619b" class="mx my jc ol b gy ox oq l or os">ar.push({ id: doc.id, ...doc.data() });</span><span id="2968" class="mx my jc ol b gy ox oq l or os">});</span><span id="769b" class="mx my jc ol b gy ox oq l or os">setTodos(ar);</span><span id="5639" class="mx my jc ol b gy ox oq l or os">});</span><span id="35b8" class="mx my jc ol b gy ox oq l or os">};</span><span id="3bae" class="mx my jc ol b gy ox oq l or os">useEffect(() =&gt; {</span><span id="942c" class="mx my jc ol b gy ox oq l or os">refreshData();</span><span id="d1ff" class="mx my jc ol b gy ox oq l or os">}, [user]);</span><span id="d93c" class="mx my jc ol b gy ox oq l or os">const handleTodoDelete = async (id) =&gt; {</span><span id="3432" class="mx my jc ol b gy ox oq l or os">if (confirm("Are you sure you wanna delete this todo?")) {</span><span id="247d" class="mx my jc ol b gy ox oq l or os">deleteTodo(id);</span><span id="b6c7" class="mx my jc ol b gy ox oq l or os">toast({ title: "Todo deleted successfully", status: "success" });</span><span id="bd6d" class="mx my jc ol b gy ox oq l or os">}</span><span id="157e" class="mx my jc ol b gy ox oq l or os">};</span><span id="6810" class="mx my jc ol b gy ox oq l or os">const handleToggle = async (id, status) =&gt; {</span><span id="e4c7" class="mx my jc ol b gy ox oq l or os">const newStatus = status == "completed" ? "pending" : "completed";</span><span id="0d2a" class="mx my jc ol b gy ox oq l or os">await toggleTodoStatus({ docId: id, status: newStatus });</span><span id="4b2b" class="mx my jc ol b gy ox oq l or os">toast({</span><span id="8012" class="mx my jc ol b gy ox oq l or os">title: `Todo marked ${newStatus}`,</span><span id="1325" class="mx my jc ol b gy ox oq l or os">status: newStatus == "completed" ? "success" : "warning",</span><span id="6cf7" class="mx my jc ol b gy ox oq l or os">});</span><span id="7e65" class="mx my jc ol b gy ox oq l or os">};</span><span id="df21" class="mx my jc ol b gy ox oq l or os">return (</span><span id="0a00" class="mx my jc ol b gy ox oq l or os">&lt;Box mt={5}&gt;</span><span id="5e30" class="mx my jc ol b gy ox oq l or os">&lt;SimpleGrid columns={{ base: 1, md: 3 }} spacing={8}&gt;</span><span id="3820" class="mx my jc ol b gy ox oq l or os">{todos &amp;&amp;</span><span id="5206" class="mx my jc ol b gy ox oq l or os">todos.map((todo) =&gt; (</span><span id="7a55" class="mx my jc ol b gy ox oq l or os">&lt;Box</span><span id="da1c" class="mx my jc ol b gy ox oq l or os">p={3}</span><span id="3ba4" class="mx my jc ol b gy ox oq l or os">boxShadow="2xl"</span><span id="747e" class="mx my jc ol b gy ox oq l or os">shadow={"dark-lg"}</span><span id="0d04" class="mx my jc ol b gy ox oq l or os">transition="0.2s"</span><span id="1e0f" class="mx my jc ol b gy ox oq l or os">_hover={{ boxShadow: "sm" }}</span><span id="a83d" class="mx my jc ol b gy ox oq l or os">&gt;</span><span id="0cd3" class="mx my jc ol b gy ox oq l or os">&lt;Heading as="h3" fontSize={"xl"}&gt;</span><span id="8fc1" class="mx my jc ol b gy ox oq l or os">{todo.title}{" "}</span><span id="70b1" class="mx my jc ol b gy ox oq l or os">&lt;Badge</span><span id="e37d" class="mx my jc ol b gy ox oq l or os">color="red.500"</span><span id="f42f" class="mx my jc ol b gy ox oq l or os">bg="inherit"</span><span id="9d7b" class="mx my jc ol b gy ox oq l or os">transition={"0.2s"}</span><span id="12d3" class="mx my jc ol b gy ox oq l or os">_hover={{</span><span id="6942" class="mx my jc ol b gy ox oq l or os">bg: "inherit",</span><span id="f184" class="mx my jc ol b gy ox oq l or os">transform: "scale(1.2)",</span><span id="d1f8" class="mx my jc ol b gy ox oq l or os">}}</span><span id="3855" class="mx my jc ol b gy ox oq l or os">float="right"</span><span id="6105" class="mx my jc ol b gy ox oq l or os">size="xs"</span><span id="3e56" class="mx my jc ol b gy ox oq l or os">onClick={() =&gt; handleTodoDelete(todo.id)}</span><span id="7b5a" class="mx my jc ol b gy ox oq l or os">&gt;</span><span id="4c9f" class="mx my jc ol b gy ox oq l or os">&lt;FaTrash /&gt;</span><span id="a441" class="mx my jc ol b gy ox oq l or os">&lt;/Badge&gt;</span><span id="2c70" class="mx my jc ol b gy ox oq l or os">&lt;Badge</span><span id="5806" class="mx my jc ol b gy ox oq l or os">color={todo.status == "pending" ? "gray.500" : "green.500"}</span><span id="4e90" class="mx my jc ol b gy ox oq l or os">bg="inherit"</span><span id="6195" class="mx my jc ol b gy ox oq l or os">transition={"0.2s"}</span><span id="6e54" class="mx my jc ol b gy ox oq l or os">_hover={{</span><span id="6372" class="mx my jc ol b gy ox oq l or os">bg: "inherit",</span><span id="8556" class="mx my jc ol b gy ox oq l or os">transform: "scale(1.2)",</span><span id="1917" class="mx my jc ol b gy ox oq l or os">}}</span><span id="1674" class="mx my jc ol b gy ox oq l or os">float="right"</span><span id="892f" class="mx my jc ol b gy ox oq l or os">size="xs"</span><span id="ceea" class="mx my jc ol b gy ox oq l or os">onClick={() =&gt; handleToggle(todo.id, todo.status)}</span><span id="e9ff" class="mx my jc ol b gy ox oq l or os">&gt;</span><span id="f5ef" class="mx my jc ol b gy ox oq l or os">{todo.status == "pending" ? &lt;FaToggleOff /&gt; : &lt;FaToggleOn /&gt;}</span><span id="333c" class="mx my jc ol b gy ox oq l or os">&lt;/Badge&gt;</span><span id="ba50" class="mx my jc ol b gy ox oq l or os">&lt;Badge</span><span id="8b6d" class="mx my jc ol b gy ox oq l or os">float="right"</span><span id="346c" class="mx my jc ol b gy ox oq l or os">opacity="0.8"</span><span id="3917" class="mx my jc ol b gy ox oq l or os">bg={todo.status == "pending" ? "yellow.500" : "green.500"}</span><span id="deb5" class="mx my jc ol b gy ox oq l or os">&gt;</span><span id="d59a" class="mx my jc ol b gy ox oq l or os">{todo.status}</span><span id="df90" class="mx my jc ol b gy ox oq l or os">&lt;/Badge&gt;</span><span id="9ec0" class="mx my jc ol b gy ox oq l or os">&lt;/Heading&gt;</span><span id="127f" class="mx my jc ol b gy ox oq l or os">&lt;Text&gt;{todo.description}&lt;/Text&gt;</span><span id="dd68" class="mx my jc ol b gy ox oq l or os">&lt;/Box&gt;</span><span id="5ba2" class="mx my jc ol b gy ox oq l or os">))}</span><span id="f3b9" class="mx my jc ol b gy ox oq l or os">&lt;/SimpleGrid&gt;</span><span id="72d8" class="mx my jc ol b gy ox oq l or os">&lt;/Box&gt;</span><span id="d6ca" class="mx my jc ol b gy ox oq l or os">);</span><span id="2899" class="mx my jc ol b gy ox oq l or os">};</span><span id="4e03" class="mx my jc ol b gy ox oq l or os">export default TodoList;</span></pre><p id="8bbc" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们已经创建了所有需要的组件，现在我们要把它们放到我们的应用程序中。</p><p id="b859" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">转到<code class="fe ou ov ow ol b">pages/index.js</code>删除所有内容并粘贴以下内容:</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="e44e" class="mx my jc ol b gy op oq l or os">import { Container } from "@chakra-ui/react";</span><span id="a46b" class="mx my jc ol b gy ox oq l or os">import AddTodo from "../components/AddTodo";</span><span id="0c5f" class="mx my jc ol b gy ox oq l or os">import Auth from "../components/Auth";</span><span id="514b" class="mx my jc ol b gy ox oq l or os">import TodoList from "../components/TodoList";</span><span id="d112" class="mx my jc ol b gy ox oq l or os">export default function Home() {</span><span id="dc72" class="mx my jc ol b gy ox oq l or os">return (</span><span id="7a1f" class="mx my jc ol b gy ox oq l or os">&lt;Container maxW="7xl"&gt;</span><span id="1a80" class="mx my jc ol b gy ox oq l or os">&lt;Auth /&gt;</span><span id="e39f" class="mx my jc ol b gy ox oq l or os">&lt;AddTodo /&gt;</span><span id="e8df" class="mx my jc ol b gy ox oq l or os">&lt;TodoList /&gt;</span><span id="ef17" class="mx my jc ol b gy ox oq l or os">&lt;/Container&gt;</span><span id="d6be" class="mx my jc ol b gy ox oq l or os">);</span><span id="68c4" class="mx my jc ol b gy ox oq l or os">}</span></pre><p id="bd04" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">我们结束了。</p><h2 id="3fac" class="mx my jc bd mz na nb dn nc nd ne dp nf la ng nh ni le nj nk nl li nm nn no np bi translated">npm运行开发</h2><p id="f6f5" class="pw-post-body-paragraph kr ks jc kt b ku nq kd kw kx nr kg kz la ns lc ld le nt lg lh li nu lk ll lm ig bi translated">我们已经完成了应用程序的编码。</p><p id="7bce" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">转到您的终端并键入:</p><pre class="ln lo lp lq gt ok ol om on aw oo bi"><span id="4eda" class="mx my jc ol b gy op oq l or os">npm run dev</span></pre><p id="9595" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">并在浏览器中转至<code class="fe ou ov ow ol b">localhost:3000</code>。</p><p id="c50f" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">您将看到类似这样的内容:</p><figure class="ln lo lp lq gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/67fed0922d3c5c6e55fc0c0c84ecfd63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bg9EnbAXfW704jXNdjG-_w.png"/></div></div></figure><p id="3773" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在你可以<strong class="kt jd">登录谷歌</strong>并开始添加待办事项。</p><p id="7187" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">获得完整的代码<a class="ae lt" href="https://github.com/anjalbinayak/medium-nextjs-firebase-todo" rel="noopener ugc nofollow" target="_blank">在这里</a>。</p><p id="e82b" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">这里看解说视频<a class="ae lt" href="https://www.youtube.com/watch?v=wkKzKpTY4w4" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="d88e" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在推特上关注我。</p></div><div class="ab cl oy oz hr pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ig ih ii ij ik"><p id="8a45" class="pw-post-body-paragraph kr ks jc kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated"><em class="ny">更多内容请看</em><a class="ae lt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt jd"><em class="ny">plain English . io</em></strong></a><em class="ny">。报名参加我们的</em> <a class="ae lt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jd"> <em class="ny">免费周报</em> </strong> </a> <em class="ny">。关注我们关于</em><a class="ae lt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt jd"><em class="ny">Twitter</em></strong></a><a class="ae lt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt jd"><em class="ny">LinkedIn</em></strong></a><em class="ny"/><a class="ae lt" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt jd"><em class="ny">YouTube</em></strong></a><em class="ny"/><a class="ae lt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt jd"><em class="ny">不和</em> </strong> </a> <em class="ny">。对增长黑客感兴趣？检查</em> <a class="ae lt" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jd"> <em class="ny">电路</em> </strong> </a> <em class="ny">。</em></p></div></div>    
</body>
</html>