<html>
<head>
<title>How to Handle React Native Forms the Best Way Using Formik</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Formik以最佳方式处理React原生表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-native-forms-formik-the-best-way-step-by-step-3bde7d02ba4f?source=collection_archive---------4-----------------------#2022-04-03">https://javascript.plainenglish.io/react-native-forms-formik-the-best-way-step-by-step-3bde7d02ba4f?source=collection_archive---------4-----------------------#2022-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="01f8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Formik处理React原生表单的分步指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fc147865f2505a4bc81ce75385254375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ne6x5GIhEC4fA4_eaYznNg.jpeg"/></div></div></figure><p id="e143" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">表单不容易处理，尤其是当表单中有很多字段时。我们知道，表单中的每个字段都需要被跟踪，我们可以通过为每个字段设置<code class="fe ln lo lp lq b">useState</code> hook来实现。</p><h2 id="cdc0" class="lr ls iq bd lt lu lv dn lw lx ly dp lz la ma mb mc le md me mf li mg mh mi mj bi translated">例如:</h2><pre class="kg kh ki kj gt mk lq ml mm aw mn bi"><span id="2a79" class="lr ls iq lq b gy mo mp l mq mr">const [username, setUsername] = useState&lt;string&gt;('');<br/>//code line..<br/>//code line..<br/>const [address, setAddress] = useState&lt;string&gt;('');</span></pre><p id="03da" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">另一种处理表单域的方式</strong>是使用<code class="fe ln lo lp lq b">useReducer</code>来使它变得更简单。</p><h2 id="1bef" class="lr ls iq bd lt lu lv dn lw lx ly dp lz la ma mb mc le md me mf li mg mh mi mj bi translated">例如:</h2><pre class="kg kh ki kj gt mk lq ml mm aw mn bi"><span id="72a7" class="lr ls iq lq b gy mo mp l mq mr">const initialState = {<br/>  username: "",<br/>  address: "",<br/>};</span><span id="1e82" class="lr ls iq lq b gy ms mp l mq mr">function reducer(state, action) {<br/>  switch (action.type) {<br/>    case "setUsername":<br/>      return { ...state, username: action.payload };<br/>    case "setAddress":<br/>      return { ...state, address: action.payload };<br/>    default:<br/>      throw new Error();<br/>  }<br/>}</span><span id="027c" class="lr ls iq lq b gy ms mp l mq mr">export const App = () =&gt; {<br/>  const [state, dispatch] = useReducer(reducer, initialState);<br/>  //...<br/>};</span></pre><p id="4671" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的例子是处理表单字段状态的两种方法，正如你所看到的，如果有2-5个字段，这并不坏，但是如果表单中包含10个甚至20个字段呢？代码会越来越多，而且会很乱。</p><p id="73de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里福米克可以帮忙！</p><h1 id="779d" class="mt ls iq bd lt mu mv mw lw mx my mz lz jw na jx mc jz nb ka mf kc nc kd mi nd bi translated"><strong class="ak">步骤1 —安装Formik </strong></h1><p id="de0e" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">在我们开始之前，让我们通过下一个命令<code class="fe ln lo lp lq b">npm i formik</code>先安装<strong class="kt ir"> Formik </strong>。现在我们可以将Formik导入表单屏幕。它应该看起来像下面的例子:</p><pre class="kg kh ki kj gt mk lq ml mm aw mn bi"><span id="fc2f" class="lr ls iq lq b gy mo mp l mq mr">import { Formik } from 'formik';</span><span id="632d" class="lr ls iq lq b gy ms mp l mq mr">export const MyForm = props =&gt; (<br/>  &lt;Formik&gt;<br/>    {()=&gt;(<br/>      //code line..<br/>      //code line..<br/>    )}<br/>  &lt;/Formik&gt;<br/>);</span></pre><p id="6ba9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你所看到的，在<strong class="kt ir"> Formik </strong>标签中有一个JavaScript函数，这个函数将处理我们的表单元素，就像我们稍后看到的那样。</p><h1 id="ab10" class="mt ls iq bd lt mu mv mw lw mx my mz lz jw na jx mc jz nb ka mf kc nc kd mi nd bi translated">第2步— Formik方法和道具</h1><p id="55d2" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">Formik渲染方法和道具，例如:</p><ul class=""><li id="e97d" class="nj nk iq kt b ku kv kx ky la nl le nm li nn lm no np nq nr bi translated"><strong class="kt ir"> initialValues: </strong>您<strong class="kt ir">必须用初始值初始化所有字段</strong>，否则React将抛出一个错误，指出您已将输入从非受控更改为受控。</li><li id="b982" class="nj nk iq kt b ku ns kx nt la nu le nv li nw lm no np nq nr bi translated"><strong class="kt ir"> onSubmit: </strong>您的表单提交处理程序。所有表单字段值将被传递给<code class="fe ln lo lp lq b">onSubmit</code>函数。</li></ul><pre class="kg kh ki kj gt mk lq ml mm aw mn bi"><span id="3bae" class="lr ls iq lq b gy mo mp l mq mr">&lt;Formik<br/>    initialValues={{ username: '', address: '' }}<br/>    onSubmit={(values) =&gt; console.log(values)}<br/>  &gt;<br/>    {() =&gt; (<br/>      //code line..<br/>      //code line..<br/>    )}<br/>  &lt;/Formik&gt;</span></pre><h1 id="6c3f" class="mt ls iq bd lt mu mv mw lw mx my mz lz jw na jx mc jz nb ka mf kc nc kd mi nd bi translated">步骤3—使用Formik创建表单</h1><p id="e979" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">在Formik标记中，我们设置了一个JavaScript函数。这个函数的意义是返回表单元素，让我们创建一个简单的表单。</p><pre class="kg kh ki kj gt mk lq ml mm aw mn bi"><span id="0905" class="lr ls iq lq b gy mo mp l mq mr">&lt;Formik<br/>  initialValues={{ email: '', username: '' }}<br/>  onSubmit={values =&gt; console.log(values)}<br/>&gt;<br/>  {() =&gt; (<br/>    &lt;View&gt;<br/>      &lt;TextInput /&gt; //This field for username.<br/>      &lt;TextInput /&gt; //This field for address.<br/>      &lt;Button onPress={} title="Submit" /&gt; //Button for Submit<br/>    &lt;/View&gt;<br/>  )}<br/>&lt;/Formik&gt;</span></pre><p id="e821" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的例子中，你可以看到<code class="fe ln lo lp lq b">&lt;View&gt;&lt;/View&gt;</code>包含了我们的表单字段，一个是用户名的<strong class="kt ir">字段，一个是地址</strong>的<strong class="kt ir">字段，此外，我们还有“提交”按钮来打印这些字段中的值。</strong></p><p id="3bf2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">主要的两个问题是，我们如何连接和存储要在某个状态下保存的字段值，以及提交按钮如何打印出在该特定状态下保存的值。</p><h1 id="64d9" class="mt ls iq bd lt mu mv mw lw mx my mz lz jw na jx mc jz nb ka mf kc nc kd mi nd bi translated">步骤4—用Formik连接表单</h1><p id="1db0" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">现在我们有了一个简单的表单，我们需要回答上面的两个问题，为此我们需要首先将表单连接到Formik。我们的简单表单和Formik之间的连接是通过使用由<code class="fe ln lo lp lq b">&lt;Formik&gt;&lt;/Formik&gt;</code>标签内的<strong class="kt ir"> JavaScript函数</strong>接收的<strong class="kt ir"> props </strong>来完成的。</p><p id="53c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些道具内部包含一些属性，我们将在接下来的属性中使用这些属性:<strong class="kt ir"> handleChange </strong>，<strong class="kt ir"> handleSubmit </strong>，<strong class="kt ir"> values </strong>以尽可能保持简单。</p><p id="4f60" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> handleChange: </strong>该处理程序将通过将字段设置为<strong class="kt ir"> onChangeText </strong>属性来处理字段中的更改，其值名类似于:<code class="fe ln lo lp lq b">handleChange(‘username’)</code>。</p><p id="8fb4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> handleSubmit: </strong>这个处理程序会将所有的字段值传递给提交函数，这个函数在Formik标签处已经定义为<code class="fe ln lo lp lq b"><strong class="kt ir">onSubmit</strong></code> <strong class="kt ir"> </strong>。</p><p id="1cf9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">值:</strong>这是一个对象，它包含了之前在Formik标签中定义的所有<code class="fe ln lo lp lq b"><strong class="kt ir">initialValues</strong></code> <strong class="kt ir"> </strong>，但是每次字段中的值被<strong class="kt ir"> handleChange </strong>改变时，它都会被更新。</p><p id="de42" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最终结果应该是这样的:</p><pre class="kg kh ki kj gt mk lq ml mm aw mn bi"><span id="fc78" class="lr ls iq lq b gy mo mp l mq mr">export const MyReactNativeForm = props =&gt; (<br/>  &lt;Formik<br/>    initialValues={{ username: '', address = '' }}<br/>    onSubmit={values =&gt; console.log(values)}<br/>  &gt;<br/>    {({ handleChange, handleSubmit, values }) =&gt; (<br/>      &lt;View&gt;<br/>        &lt;TextInput<br/>          onChangeText={handleChange('username')}<br/>          value={values.username}<br/>        /&gt;<br/>        &lt;TextInput<br/>          onChangeText={handleChange('address')}<br/>          value={values.address}<br/>        /&gt;<br/>        &lt;Button onPress={handleSubmit} title="Submit" /&gt;<br/>      &lt;/View&gt;<br/>    )}<br/>  &lt;/Formik&gt;<br/>);</span></pre><p id="ac85" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们已经将表单连接到Formik，而不需要自己处理表单中每个字段的状态，我们可以根据需要继续添加越来越多的字段，并让Formik进行状态管理。</p><p id="ccad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">很棒吧？</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="4bad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">感谢您到目前为止的阅读，如果您喜欢这样的内容，并且您想支持我作为一名程序员和作家撰写更多这样的文章，<a class="ae oe" href="https://medium.com/membership/@nissimzarur" rel="noopener"> <strong class="kt ir"> <em class="of">请使用我的链接注册Medium成为会员(每月订阅5美元)，您将可以无限制地访问Medium上的所有内容。</em>T31</strong></a></strong></p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><ul class=""><li id="3703" class="nj nk iq kt b ku kv kx ky la nl le nm li nn lm no np nq nr bi translated">如果你想了解<a class="ae oe" href="https://nissimzarur.medium.com/what-is-callbacks-how-it-works-in-javascript-step-by-step-real-life-example-425bc277893" rel="noopener"> <strong class="kt ir"> <em class="of">回调</em> </strong> </a>以及它在JavaScript中是如何工作的？<a class="ae oe" href="https://nissimzarur.medium.com/what-is-callbacks-how-it-works-in-javascript-step-by-step-real-life-example-425bc277893" rel="noopener"> <strong class="kt ir"> <em class="of">此处</em> </strong> </a>。</li><li id="ed17" class="nj nk iq kt b ku ns kx nt la nu le nv li nw lm no np nq nr bi translated">如果你想了解<a class="ae oe" href="https://towardsdev.com/4-types-of-javascript-scopes-all-you-need-to-know-about-207598da120e" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="of">范围</em> </strong> </a>和每个范围之间的区别，你可以在这里  阅读它们。</li><li id="dc47" class="nj nk iq kt b ku ns kx nt la nu le nv li nw lm no np nq nr bi translated">如果你想学习关于<a class="ae oe" href="https://nissimzarur.medium.com/what-is-closures-how-it-works-in-javascript-step-by-step-real-life-example-eb4a97c7120d" rel="noopener"> <strong class="kt ir"> <em class="of">闭包</em> </strong> </a>以及它在JavaScript中如何工作的真实例子，你可以在这里阅读<a class="ae oe" href="https://nissimzarur.medium.com/what-is-closures-how-it-works-in-javascript-step-by-step-real-life-example-eb4a97c7120d" rel="noopener"><strong class="kt ir"><em class="of"/></strong></a>。</li><li id="f696" class="nj nk iq kt b ku ns kx nt la nu le nv li nw lm no np nq nr bi translated">如果你想了解一下<a class="ae oe" href="https://nissimzarur.medium.com/javascript-arrow-function-vs-regular-function-whats-the-difference-fast-understanding-cda1a162a355" rel="noopener"> <strong class="kt ir"> <em class="of">箭头函数&amp;常规函数</em> </strong> </a>的区别你可以在这里阅读一下<a class="ae oe" href="https://nissimzarur.medium.com/javascript-arrow-function-vs-regular-function-whats-the-difference-fast-understanding-cda1a162a355" rel="noopener"><strong class="kt ir"><em class="of"/></strong></a>。</li></ul><p id="aec4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="of">更多内容请看</em><a class="ae oe" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="of">plain English . io</em></strong></a><em class="of">。报名参加我们的</em> <a class="ae oe" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="of">免费每周简讯</em> </strong> </a> <em class="of">。关注我们</em> <a class="ae oe" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="of">推特</em> </strong> </a> <em class="of">和</em><a class="ae oe" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="of">LinkedIn</em></strong></a><em class="of">。加入我们的</em> <a class="ae oe" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="of">社区不和谐</em> </strong> </a> <em class="of">。</em></p></div></div>    
</body>
</html>