<html>
<head>
<title>How to Set up Github Actions for CI/CD in React Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React应用中为CI/CD设置Github操作</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-github-actions-for-ci-cd-in-react-apps-a49a20129fcc?source=collection_archive---------4-----------------------#2022-07-19">https://javascript.plainenglish.io/how-to-set-up-github-actions-for-ci-cd-in-react-apps-a49a20129fcc?source=collection_archive---------4-----------------------#2022-07-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="bd15" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何设置Github Actions，这是一个CI/CD平台，允许我们为代码测试、构建、部署等构建自动化管道。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e134dcec15f020709b827e2c776ca60b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*poVqhn3nbvTSeNlajRO8yw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@synkevych?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Roman Synkevych 🇺🇦</a> on <a class="ae ks" href="https://unsplash.com/s/photos/github-actions?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2101" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">随着项目复杂性和团队规模的增长，确保正在开发的代码不破坏现有代码变得越来越重要。除此之外，确保代码遵循为项目定义的编码标准以及一旦代码被合并到默认分支上就自动部署到开发/阶段环境中也很重要。如果项目遵循<a class="ae ks" href="https://trunkbaseddevelopment.com/" rel="noopener ugc nofollow" target="_blank">基于主干的开发</a>，确保每个人都遵循定义的过程就变得更加重要。这正是使用<a class="ae ks" href="https://github.com/features/actions" rel="noopener ugc nofollow" target="_blank"> Github Actions </a>可以解决的问题。</p><h1 id="9861" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">什么是CI/CD？</h1><p id="0511" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated"><strong class="kv io"> CI代表持续集成</strong>，其中增量代码变更频繁且可靠地完成，而<strong class="kv io"> CD代表持续交付/持续部署</strong>，其中代码变更一合并就交付或部署到开发或试运行环境。</p><h1 id="d256" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">什么是Github动作？</h1><p id="56a3" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">Github Actions是一个CI/CD平台，它允许我们为代码测试、构建、部署等构建自动化管道。Github动作并不局限于React应用程序，也可以用于基于其他框架的应用程序。<a class="ae ks" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> Jenkins </strong> </a>是Github动作的替代选项之一，可用于设置CI/CD管道。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/77fa39298a79d5ee99538f702837eb06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6SSmTua9bbgiGwd0uzt9A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Github Actions Homepage</figcaption></figure><h1 id="1a8d" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">为CI/CD使用Github操作</h1><p id="bd9a" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">Github动作可以通过在项目根目录下的<code class="fe mn mo mp mq b">.github/workflows</code>目录中为工作流添加<code class="fe mn mo mp mq b"><strong class="kv io">yml</strong></code> <strong class="kv io"> </strong>文件来设置。在本文的过程中，我们将使用<code class="fe mn mo mp mq b">CI.yml</code>作为<strong class="kv io">持续集成</strong>工作流，使用<code class="fe mn mo mp mq b">CD.yml</code>作为<strong class="kv io">持续部署</strong>工作流。</p><h2 id="90a3" class="mr lq in bd lr ms mt dn lv mu mv dp lz lc mw mx mb lg my mz md lk na nb mf nc bi translated">设置配置项工作流</h2><p id="1410" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">每当针对主(默认)分支注册了拉请求或推事件时，<code class="fe mn mo mp mq b">CI.yml</code>将负责执行工作流。CI工作流包括执行测试用例，检查林挺和测试构建。如果您想为Lint设置ESLint和beauty，请执行checkout:</p><div class="nd ne gp gr nf ng"><a rel="noopener  ugc nofollow" target="_blank" href="/setup-eslint-and-prettier-in-a-react-app-2022-ec09be9f0407"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd io gy z fp nl fr fs nm fu fw im bi translated">使用绝对导入在React应用程序中设置ESLint和更漂亮(2022)</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">使用绝对导入为React应用程序设置Eslint和更漂亮。</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="np l"><div class="nq l nr ns nt np nu km ng"/></div></div></a></div><p id="0af8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">作为提高效率的附加组件，给定的工作流文件还实现了<strong class="kv io">依赖项缓存，以使工作流更加高效</strong> ( <a class="ae ks" href="https://docs.github.com/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows" rel="noopener ugc nofollow" target="_blank">缓存Github操作中的依赖项</a> ) <strong class="kv io"> </strong>，因为默认情况下Github操作使用全新的虚拟环境，每次执行操作时都会下载并重新安装所有依赖项。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">&gt;</figcaption></figure><h2 id="a502" class="mr lq in bd lr ms mt dn lv mu mv dp lz lc mw mx mb lg my mz md lk na nb mf nc bi translated">设置光盘工作流程</h2><p id="ef78" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated"><code class="fe mn mo mp mq b">CD.yml</code>将负责部署工作流，如<strong class="kv io">在开发或试运行环境中部署代码</strong>以及执行CI工作流。部署脚本可能需要一些秘密环境变量，可以通过设置&gt;秘密&gt;动作下的<a class="ae ks" href="https://docs.github.com/en/actions/security-guides/encrypted-secrets" rel="noopener ugc nofollow" target="_blank"> Github加密秘密</a>添加这些变量。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nx"><img src="../Images/7ee8c28edef1f63a5f1030d3d088c317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tXvnmBKtNyqWj-H_wBxy1g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Adding Action Secrets in Github</figcaption></figure><p id="8467" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面是在主分支上完成CI工作流后执行的CD管道的配置。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="5a5c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里值得一提的是，如果对已定义分支的推送仅限于pull请求(<a class="ae ks" href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/defining-the-mergeability-of-pull-requests/about-protected-branches#require-pull-request-reviews-before-merging" rel="noopener ugc nofollow" target="_blank"> Github:在合并</a>之前需要pull请求)，那么我们不需要再次执行CI工作流，只需安装依赖项并继续进行构建和部署，但由于我们大多数人通常不使用它，因此CI工作流将在部署步骤之前执行。</p><h2 id="17cd" class="mr lq in bd lr ms mt dn lv mu mv dp lz lc mw mx mb lg my mz md lk na nb mf nc bi translated">添加工作流状态徽章</h2><p id="a0f8" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在自述文件中显示<a class="ae ks" href="https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge" rel="noopener ugc nofollow" target="_blank">工作流程状态徽章</a>怎么样？这可以通过将下面给出的URL添加到Readmeand并用所需的值替换占位符值来实现。</p><pre class="kd ke kf kg gt ny mq nz oa aw ob bi"><span id="aa3e" class="mr lq in mq b gy oc od l oe of">![Workflow](https://github.com/&lt;OWNER&gt;/&lt;REPOSITORY&gt;/actions/workflows/&lt;WORKFLOW_FILE&gt;/badge.svg)</span><span id="6885" class="mr lq in mq b gy og od l oe of">// Example Workflow Badge Url:<br/>![example workflow](<a class="ae ks" href="https://github.com/github/docs/actions/workflows/main.yml/badge.svg" rel="noopener ugc nofollow" target="_blank">https://github.com/github/docs/actions/workflows/main.yml/badge.svg</a>)</span></pre><p id="b9e8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">添加后，徽章将在自述文件中显示工作流的<strong class="kv io">通过/失败</strong>状态，以及工作流的名称，如所附图像所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oh"><img src="../Images/e5c4688a5a65f17ad6e9628cfa475df6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RstP-O9bisG6GVgfIySHDQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Workflow Status Badges</figcaption></figure><h1 id="c6b6" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="22f7" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">一旦设置完成，CI工作流将在针对列出的分支提出拉请求或收到推事件时执行；当CI工作流在列出的分支上完成时，CD工作流将被执行，并且可以使用存储库主页上的<strong class="kv io">操作</strong>选项卡对其进行监控，如下图所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oi"><img src="../Images/ef3369f095356cac6a0500b879ff56ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xT5C8vFdZEtA9s6iJTM4TA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Actions tab on Github</figcaption></figure><p id="bdb4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">和往常一样，这里有一个Github上<a class="ae ks" href="https://github.com/eshankvaish/react-ci-cd" rel="noopener ugc nofollow" target="_blank">完整设置代码</a>的链接。</p><div class="nd ne gp gr nf ng"><a href="https://github.com/eshankvaish/react-ci-cd" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd io gy z fp nl fr fs nm fu fw im bi translated">GitHub - eshankvaish/react-ci-cd:对CI/CD管道使用GitHub操作的react应用程序</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">在项目目录中，可以运行:在开发模式下运行应用程序。打开http://localhost:3000在…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div><div class="np l"><div class="oj l nr ns nt np nu km ng"/></div></div></a></div><pre class="kd ke kf kg gt ny mq nz oa aw ob bi"><span id="da54" class="mr lq in mq b gy oc od l oe of">Want to connect?<br/>React out on <a class="ae ks" href="https://twitter.com/eshankvaish" rel="noopener ugc nofollow" target="_blank">Twitter</a>, <a class="ae ks" href="https://www.linkedin.com/in/eshankvaish/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a> or in the comments below!</span></pre><blockquote class="ok ol om"><p id="d6c9" class="kt ku on kv b kw kx jo ky kz la jr lb oo ld le lf op lh li lj oq ll lm ln lo ig bi translated"><em class="in">感谢阅读。请分享您对使用Github动作为CI/CD建立自动化管道的想法。</em></p></blockquote><p id="d8c3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="on">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="on">说白了就是</em> </strong> </a> <em class="on">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="on">免费周报</em> </strong> </a> <em class="on">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="on">Twitter</em></strong></a><em class="on">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="on">LinkedIn</em></strong></a><em class="on">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="on">社区不和谐</em> </strong> </a> <em class="on">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="on">人才集体</em> </strong> </a> <em class="on">。</em></p></div></div>    
</body>
</html>