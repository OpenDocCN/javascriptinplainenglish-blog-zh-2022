<html>
<head>
<title>6 Cheap Traps of JavaScript That Also Get The Better Of Professionals Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个便宜的JavaScript陷阱，也让专业开发人员受益匪浅</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6-cheap-traps-of-javascript-that-also-get-the-better-of-professionals-developers-8818e0a1f190?source=collection_archive---------11-----------------------#2022-01-06">https://javascript.plainenglish.io/6-cheap-traps-of-javascript-that-also-get-the-better-of-professionals-developers-8818e0a1f190?source=collection_archive---------11-----------------------#2022-01-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fa1b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不管你的经历如何，他们中的一些人会抓住你。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9d2f616fd0da942b0d96a8b2f9fb0214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7KobN2y3foGrhofOQxbTzA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Art made by the <a class="ae kv" href="http://www.arnoldcode.com" rel="noopener ugc nofollow" target="_blank">Author</a> by <a class="ae kv" href="http://www.canva.com" rel="noopener ugc nofollow" target="_blank">Canva</a></figcaption></figure><h1 id="cf65" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">1.“With”的缺陷</h1><p id="3d24" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">with</code>语句为您提供了一种访问对象属性的快捷方式。</p><p id="f378" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">但是当你看到代码时，你会加入到是否应该使用它的冲突观点中。道格拉斯·克洛克福特不喜欢它。约翰·瑞西格在他的《T21》一书中揭示了它的几种巧妙用法。他承认使用时会令人困惑，我同意他的观点。</p><p id="73f6" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">孤立地看一个<code class="fe mk ml mm mn b">with</code>块，不可能准确地说出发生了什么:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="0712" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">我是修改了本地变量<code class="fe mk ml mm mn b">bob, eric, max, optimus</code>还是设置了<code class="fe mk ml mm mn b">babyNames.bob, babyNames.eric, babyNames.max, babyNames.optimus</code>？</p><p id="af3a" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">嗯，如果<code class="fe mk ml mm mn b">babyNames.bob</code>已经被定义，那么它被重置为‘好’否则，如果范围内有一个<code class="fe mk ml mm mn b">bob</code>变量，就改变它。最后一种情况发生在没有对象<code class="fe mk ml mm mn b">babyNames</code>或者<code class="fe mk ml mm mn b">babyNames</code>没有属性<code class="fe mk ml mm mn b">bob</code>的时候。</p><p id="95dc" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">最后，确切地写下你想做的事情会更清楚。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="59ed" class="kw kx iq bd ky kz nc lb lc ld nd lf lg jw ne jx li jz nf ka lk kc ng kd lm ln bi translated">2.数组和类型of！=数组</h1><p id="639a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">typeOf</code>返回基本类型实例的类型。</p><p id="ba82" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><code class="fe mk ml mm mn b">Array</code>不是基本类型。所以<code class="fe mk ml mm mn b">typeof</code>和<code class="fe mk ml mm mn b">Array</code>是<code class="fe mk ml mm mn b">Object</code>而不是<code class="fe mk ml mm mn b">Array</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="5215" class="kw kx iq bd ky kz nc lb lc ld nd lf lg jw ne jx li jz nf ka lk kc ng kd lm ln bi translated">3.文字和数组的实例会产生误导</h1><p id="6f0b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">instanceOf</code>返回对象是否是使用指定的构造函数构造的。</p><p id="4407" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">这也适用于其原型链中的对象。这在检查您自己定义的对象类型时非常有用。但是如果您使用字面语法创建一个内置类型的实例，那就太容易引起误解了:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="6ccd" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">由于<code class="fe mk ml mm mn b"><a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/array-reduce-in-javascript-b196353a5f6d?source=your_stories_page----------------------------------------">Array</a></code>不是真正的内置类型之一(它的作用是——因此<code class="fe mk ml mm mn b">typeof</code>不像预期的那样工作),所以<code class="fe mk ml mm mn b">instanceof</code>确实像预期的那样工作:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="8533" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">综上所述，如果想测试类型<code class="fe mk ml mm mn b">Boolean</code>、<code class="fe mk ml mm mn b">String</code>、<code class="fe mk ml mm mn b">Number</code>，或者<code class="fe mk ml mm mn b">Function</code>，可以使用<code class="fe mk ml mm mn b">typeof</code>。其他的都可以用<code class="fe mk ml mm mn b">instanceof</code>。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="9c63" class="kw kx iq bd ky kz nc lb lc ld nd lf lg jw ne jx li jz nf ka lk kc ng kd lm ln bi translated">4.字符串替换不是全局应用的</h1><p id="f464" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">字符串<code class="fe mk ml mm mn b">replace </code>函数只替换第一个匹配。再多就哔！他们不会被取代。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="2d90" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">如果您希望替换所有匹配，您必须使用一个<a class="ae kv" href="https://levelup.gitconnected.com/indiana-jones-and-the-universal-way-to-search-for-text-1901990f53ae" rel="noopener ugc nofollow" target="_blank">正则表达式</a>并向其添加全局修饰符。全局修饰符确保替换在第一次匹配后停止。</p><h1 id="aea9" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">5.“+”运算符既可以加法也可以连接</h1><p id="8261" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">JavaScript的<code class="fe mk ml mm mn b">+</code>操作符总是导致连接。</p><p id="0f35" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">缩小范围，当任一操作数为<code class="fe mk ml mm mn b">string</code>时。如果你想加一个数字，这可能会让你崩溃。例如，输入元素的内容(将是一个<code class="fe mk ml mm mn b">string</code>)。</p><p id="5205" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">你需要先投<code class="fe mk ml mm mn b">Number</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="007a" class="kw kx iq bd ky kz nc lb lc ld nd lf lg jw ne jx li jz nf ka lk kc ng kd lm ln bi translated">6.Math.max和Math.min扭曲无限</h1><p id="1d4b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这个疑难杂症列表的末尾有一个很大的混乱的小疑难杂症。</p><p id="4b2f" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><code class="fe mk ml mm mn b">Math.max()</code> &amp; <code class="fe mk ml mm mn b">Math.min()</code>是两个效用函数，给出参数的最大值或最小值。当你不带任何参数地使用它们时，你会得到<code class="fe mk ml mm mn b">-Infinity</code> &amp; <code class="fe mk ml mm mn b">Infinity</code>。</p><p id="b0d6" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><strong class="lq ir"> <em class="nh">这里有什么问题？</em> </strong></p><ul class=""><li id="3448" class="ni nj iq lq b lr mo lu mp lx nk mb nl mf nm mj nn no np nq bi translated">Max =&gt; <code class="fe mk ml mm mn b">-Infinity</code></li><li id="7810" class="ni nj iq lq b lr nr lu ns lx nt mb nu mf nv mj nn no np nq bi translated">Min =&gt; <code class="fe mk ml mm mn b">Infinity</code></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="e84f" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">获取26份备忘单，只研究你真正需要的东西，以获得你的第一份网络开发工作！ </p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/227a060a3bfa55f41fa795d5990e6032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Nqyiu4c6K-mCxE9e.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://arnoldcodeacademy.ck.page/26-web-dev-cheat-sheets" rel="noopener ugc nofollow" target="_blank">Arnold Code Academy 26 Web Developer Cheatsheets</a></figcaption></figure><p id="e461" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><em class="nh">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nh">plain English . io</em></a><em class="nh">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nh">免费每周简讯</em> </a> <em class="nh">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="nh">社区</em> </a> <em class="nh">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>