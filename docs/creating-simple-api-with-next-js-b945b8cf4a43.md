# å¦‚ä½•ç”¨ Next.js åˆ›å»ºç®€å•çš„ API

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/creating-simple-api-with-next-js-b945b8cf4a43?source=collection_archive---------9----------------------->

## ä½¿ç”¨ Next.js åˆ›å»ºç®€å• API çš„æŒ‡å—

![](img/871f4b405d2bfa227da36b38f7b3c2d7.png)

Photo by [Rames Quinerie](https://unsplash.com/@ramesquinerie?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

å¦‚æœä½ å·²ç»ç†Ÿæ‚‰ Reactï¼Œä½ å¯èƒ½å¬è¯´è¿‡ Next.jsã€‚å®ƒæ˜¯ç”± Vercel æ„å»ºçš„ React æ¡†æ¶ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€æ¡å¼€ç®±å³ç”¨çš„å¯é€‰è·¯å¾„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç”¨ JavaScript ç¼–å†™åç«¯ä»£ç ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª APIã€‚

## å®‰è£… Next.js

åœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
npx create-next-app@latest
```

å®‰è£…å®Œæˆåï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€äº›æ¥è‡ª Next.js çš„æ ·æ¿æ–‡ä»¶ã€‚ç°åœ¨åªéœ€å…³æ³¨`pages`æ–‡ä»¶å¤¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé‡Œé¢ä¼šæœ‰`api`æ–‡ä»¶å¤¹ã€`_app.js`å’Œ`index.js`æ–‡ä»¶ã€‚`Index.js`æ–‡ä»¶å°±åƒæˆ‘ä»¬çš„ home ç»„ä»¶ï¼Œ`_app.js`æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„åŒ…è£…å™¨ï¼Œ`api`æ–‡ä»¶å¤¹æ˜¯æˆ‘ä»¬å°†è¦åˆ›å»ºçš„ API çš„æ‰€æœ‰ç«¯ç‚¹æ‰€åœ¨çš„åœ°æ–¹ã€‚

ä¸è¦å¿˜è®°è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å¯åŠ¨æˆ‘ä»¬çš„ä¸‹ä¸€ä¸ªåº”ç”¨ç¨‹åº:

```
npm run dev
```

è¿™ä¸ªå‘½ä»¤å°†åœ¨ http://localhost:3000 å¯åŠ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚

ç°åœ¨è®©æˆ‘ä»¬åªå…³æ³¨`api`æ–‡ä»¶å¤¹ï¼Œå› ä¸ºæˆ‘ä»¬çš„å·¥ä½œä¸»è¦åœ¨è¿™é‡Œã€‚åœ¨`api`æ–‡ä»¶å¤¹é‡Œï¼Œä½ ä¼šçœ‹åˆ°`hello.js`æ–‡ä»¶ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥åˆ é™¤å®ƒã€‚

åœ¨è¿™ä¸ªæ¼”ç¤ºä¸­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦åˆ¶ä½œä¸€ä¸ª APIï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªè‹±é›„å’Œè§’è‰²çš„é›†åˆã€‚åœ¨ Next.js ä¸­ï¼Œæˆ‘ä»¬çš„æ–‡ä»¶å¤¹ç»“æ„å°†æˆä¸ºæˆ‘ä»¬çš„ç«¯ç‚¹è·¯å¾„ï¼Œå› æ­¤æˆ‘ä»¬å°†æ›´å®¹æ˜“ç»„ç»‡å®ƒã€‚

ç°åœ¨åˆ›å»º`heroes`æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ª`index.js`æ–‡ä»¶ã€‚å¦‚æœ URL ä¸­æ²¡æœ‰å‘é€å‚æ•°ï¼Œ`index.js`æ–‡ä»¶å°†æˆä¸ºé»˜è®¤è·¯å¾„ã€‚ç”±äºæˆ‘ä»¬ä¹Ÿæƒ³è·å¾—å…·æœ‰ç‰¹å®š id çš„è‹±é›„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿåœ¨è‹±é›„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº†`[id].js`æ–‡ä»¶ã€‚ä¸ºäº†åœ¨ Next.js ä¸­åˆ›å»ºä¸€ä¸ªåŠ¨æ€ API è·¯ç”±ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ–‡ä»¶åæ”¾åœ¨æ‹¬å·ä¸­ï¼Œä»¥å‘Šè¯‰ Next.js è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€è·¯ç”±ã€‚åœ¨`index.js`æ–‡ä»¶ä¸­ï¼Œç¼–å†™å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç :

```
export default async function handler(req, res) {let data = await fetch(`${urlToFetch}`)let json = await data.json()res.send(json)}
```

è¿™æ®µä»£ç å°†æ£€ç´¢æ‰€æœ‰è‹±é›„çš„åˆ—è¡¨ï¼Œå¹¶å°†å…¶å‘é€å›å®¢æˆ·ç«¯*(æ³¨æ„:æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ä»£ç )ã€‚*

è¦è®¿é—®æˆ‘ä»¬çš„ APIï¼Œæˆ‘ä»¬éœ€è¦è¿½åŠ æˆ‘ä»¬çš„ URLã€‚æˆ‘ä»¬çš„ URL å˜æˆäº†[*http://localhost:3000*](http://localhost:3000)*/API/heroes*ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ heroes æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ URL ä¸­åæ˜ å®ƒã€‚

ç°åœ¨åœ¨`[id].js`æ–‡ä»¶ä¸­ï¼Œç¼–å†™å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç :

```
export default async function handler(req, res) {let id = req.query.idlet data = await fetch(`${urlToFetch}/${id}`)let json = await data.json()res.send(json)}
```

è¦è®¿é—® APIï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™[*http://localhost:3000*](http://localhost:3000)*/API/heroes/{ id }*å¹¶ç”¨æŸä¸ªç‰¹å®šçš„ id æ›¿æ¢ id å³å¯ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸æ–‡ä»¶åç›¸åŒçš„å•è¯æ¥è®¿é—® URL ä¸­çš„å‚æ•°ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ–‡ä»¶åæ˜¯`[id].js`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å®ƒ`by req.query.id`ã€‚è¿™å°†å‘å®¢æˆ·ç«¯å‘é€åŒ…å«ç‰¹å®šæ•°æ®çš„å“åº”ã€‚è§’è‰²éƒ¨åˆ†ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è‹±é›„æ–‡ä»¶å¤¹çš„åŒä¸€å±‚å†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚

å°±æ˜¯è¿™æ ·ï¼å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ å¼€å§‹ç”¨ Next.js åˆ›å»º APIï¼Œå¹²æ¯ï¼ğŸ»

## è¿›ä¸€æ­¥é˜…è¯»

[](/data-fetching-with-next-js-13s-bleeding-edge-features-a-primer-a60ddd3f7570) [## ä½¿ç”¨ Next.js 13 çš„å‰æ²¿ç‰¹æ€§è·å–æ•°æ®â€”â€”å…¥é—¨

### NextJS 13 ä¸­çš„æ•°æ®è·å–ä½¿ç”¨äº†åº”ç”¨ç¨‹åºç›®å½•ã€æµã€æš‚æŒ‚ä»¥åŠæ··åˆæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç»„ä»¶ã€‚

javascript.plainenglish.io](/data-fetching-with-next-js-13s-bleeding-edge-features-a-primer-a60ddd3f7570) 

*æ›´å¤šå†…å®¹çœ‹* [***è¯´ç™½äº†ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„***](https://plainenglish.io/) **[***å…è´¹å‘¨æŠ¥***](http://newsletter.plainenglish.io/) *ã€‚å…³æ³¨æˆ‘ä»¬å…³äº*[***Twitter***](https://twitter.com/inPlainEngHQ)*å’Œ*[***LinkedIn***](https://www.linkedin.com/company/inplainenglish/)*ã€‚æŸ¥çœ‹æˆ‘ä»¬çš„* [***ç¤¾åŒºä¸å’Œè°***](https://discord.gg/GtDtUAvyhW) *åŠ å…¥æˆ‘ä»¬çš„* [***äººæ‰é›†ä½“***](https://inplainenglish.pallet.com/talent/welcome) *ã€‚***