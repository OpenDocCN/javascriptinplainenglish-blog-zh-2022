<html>
<head>
<title>7 Quick TypeScript One-Liners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">7个快速打印的一行程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/7-quick-typescript-one-liners-d5c060f5fb94?source=collection_archive---------9-----------------------#2022-04-05">https://javascript.plainenglish.io/7-quick-typescript-one-liners-d5c060f5fb94?source=collection_archive---------9-----------------------#2022-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3e25" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">代码越少越好。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/934109d75b2e8bcbcb95ab49a124dd02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvx9VJaVkTTJJTARljE9BQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by Author</figcaption></figure><p id="8e6b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更少的代码通常意味着更好的代码。在本文中，我将向您介绍TypeScript的7种单行代码，其中有许多高级用法，如泛型、断言等。希望能帮到你。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="8032" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">底部可见</h1><p id="e53b" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">确定页面底部是否可见。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/5147b23172355868e5d0a088fc23ead9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dFDMgZ4AGBmvdJqdrz-aXw.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="c117" class="nb lz iq mx b gy nc nd l ne nf">const bottomVisible = (): boolean =&gt;<br/>  document.documentElement.clientHeight + window.scrollY &gt;=<br/>  (document.documentElement.clientHeight ||<br/>    document.documentElement.scrollHeight);</span></pre><h1 id="2633" class="ly lz iq bd ma mb ng md me mf nh mh mi jw ni jx mk jz nj ka mm kc nk kd mo mp bi translated">chunk阵列</h1><p id="47a8" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">基于传入大小的块数组。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/933e3add8cc4c782e73881b256575925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0BcHfZ2QPHAyGWHamg44IA.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="ae62" class="nb lz iq mx b gy nc nd l ne nf">const chunkArray = &lt;T&gt;(arr: T[], size: number) =&gt;<br/>  [...new Array(Math.ceil(arr.length / size))].map((_, i) =&gt;<br/>    arr.slice(i * size, (i + 1) * size),<br/>  );</span><span id="02f4" class="nb lz iq mx b gy nm nd l ne nf">// [ [ 0, 1 ], [ 2, 3 ], [ 4 ] ]<br/>console.log(chunkArray([0, 1, 2, 3, 4], 2));<br/>// [ [ 0, 1, 2, 3, 4 ] ]<br/>console.log(chunkArray([0, 1, 2, 3, 4], 100));</span></pre><h1 id="7bb7" class="ly lz iq bd ma mb ng md me mf nh mh mi jw ni jx mk jz nj ka mm kc nk kd mo mp bi translated">面具</h1><p id="4696" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">加密字符，可以选择末尾保留的字符数，也可以自定义加密字符。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/373b5742d3276e11959690eca97fc2e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MmOJ5ke_76sVA6MYRhqtSA.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="adbe" class="nb lz iq mx b gy nc nd l ne nf">const mask = (char: number | string, num = 0, mask = '*') =&gt;<br/>  String(char).slice(-num).padStart(String(char).length, mask);</span><span id="57ec" class="nb lz iq mx b gy nm nd l ne nf">console.log(mask('123')); // 123<br/>console.log(mask('123456789', 4)); // *****6789<br/>console.log(mask('123456789', 3, '#')); // ######789</span></pre><h1 id="920e" class="ly lz iq bd ma mb ng md me mf nh mh mi jw ni jx mk jz nj ka mm kc nk kd mo mp bi translated">开/关</h1><p id="3766" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated"><code class="fe no np nq mx b">Add/Remove</code>DOM元素或事件委托对象的事件监听器，没有<code class="fe no np nq mx b">addEventListener/removeEventListener</code>的麻烦。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/cdc6cf63a267bea5e80183389d37cc8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bQSIGR3NUXtveXgNF0h22Q.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="1ed8" class="nb lz iq mx b gy nc nd l ne nf">const on = &lt;T extends Window | Document | HTMLElement | EventTarget&gt;(<br/>  obj: T | null,<br/>  ...args: Parameters&lt;T['addEventListener']&gt; | [string, Function | null, ...any]<br/>): void =&gt; {<br/>  obj?.addEventListener?.(<br/>    ...(args as Parameters&lt;HTMLElement['addEventListener']&gt;),<br/>  );<br/>};</span><span id="62bb" class="nb lz iq mx b gy nm nd l ne nf">const off = &lt;T extends Window | Document | HTMLElement | EventTarget&gt;(<br/>  obj: T | null,<br/>  ...args:<br/>    | Parameters&lt;T['removeEventListener']&gt;<br/>    | [string, Function | null, ...any]<br/>): void =&gt; {<br/>  obj?.removeEventListener?.(<br/>    ...(args as Parameters&lt;HTMLElement['removeEventListener']&gt;),<br/>  );<br/>};</span></pre><h1 id="4360" class="ly lz iq bd ma mb ng md me mf nh mh mi jw ni jx mk jz nj ka mm kc nk kd mo mp bi translated">getUUID</h1><p id="5730" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">使用浏览器中可用的<a class="ae ns" href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto" rel="noopener ugc nofollow" target="_blank">加密</a> API生成符合<a class="ae ns" href="https://www.ietf.org/rfc/rfc4122.txt" rel="noopener ugc nofollow" target="_blank"> RFC4122 </a>版本4的UUID。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/f34bccc3db61042a6e918afc9da54ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vbSqOQHFPI9rPjYwN2S6aA.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="847e" class="nb lz iq mx b gy nc nd l ne nf">const getUUID = () =&gt;<br/>  (String(1e7) + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =&gt;<br/>    (<br/>      Number(c) ^<br/>      (crypto.getRandomValues(new Uint8Array(1))[0] &amp; (15 &gt;&gt; (Number(c) / 4)))<br/>    ).toString(16),<br/>  );</span><span id="c235" class="nb lz iq mx b gy nm nd l ne nf">console.log(getUUID());</span></pre><h1 id="b46f" class="ly lz iq bd ma mb ng md me mf nh mh mi jw ni jx mk jz nj ka mm kc nk kd mo mp bi translated">一次</h1><p id="6535" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">执行一次函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/a9996fdc1eca87049302f8fb74f87c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iN3_l0NELWCB7D89a7lqQg.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="8292" class="nb lz iq mx b gy nc nd l ne nf">const once = &lt;T extends (...args: any) =&gt; any&gt;(fn: T) =&gt;<br/>  (<br/>    (ran = false) =&gt;<br/>    (): ReturnType&lt;T&gt; =&gt;<br/>      ran ? fn : ((ran = !ran), (fn = fn()))<br/>  )();</span><span id="a114" class="nb lz iq mx b gy nm nd l ne nf">let n = 1;<br/>const incOnce = once(() =&gt; ++n);<br/>console.log(incOnce()); // 2<br/>console.log(incOnce()); // 2<br/>console.log(incOnce()); // 2<br/>console.log('n: ', n); // n: 2</span></pre><h1 id="d47f" class="ly lz iq bd ma mb ng md me mf nh mh mi jw ni jx mk jz nj ka mm kc nk kd mo mp bi translated">sdbm</h1><p id="669c" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">将输入字符串散列成一个整数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/ae4412a736d534b8ca7479ee30df65ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mw-v6kAbSiFo6CDz1gXYZg.png"/></div></div></figure><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="1b2c" class="nb lz iq mx b gy nc nd l ne nf">const sdbm = (str: string) =&gt;<br/>  str<br/>    .split('')<br/>    .reduce(<br/>      (acc, cur) =&gt; (acc = cur.charCodeAt(0) + (acc &lt;&lt; 6) + (acc &lt;&lt; 16) - acc),<br/>      0,<br/>    );</span><span id="9ffa" class="nb lz iq mx b gy nm nd l ne nf">console.log(sdbm('Hello')); // -1421493998<br/>console.log(sdbm('Hello')); // -1421493998<br/>console.log(sdbm('World')); // -2242392430</span></pre></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="4613" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">今天就到这里。我是Zachary，我会继续输出与web开发相关的故事，如果你喜欢这样的故事并想支持我，请考虑成为 <a class="ae ns" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nw">中级会员</em> </a> <em class="nw">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae ns" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nw">我的链接</em> </a> <em class="nw">报名，我会得到一点佣金。</em></p><p id="3213" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你的支持对我来说很重要——谢谢。</p><p id="4205" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nw">更多内容看</em> <a class="ae ns" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="nw">说白了就是</em> </strong> </a> <em class="nw">。报名参加我们的</em> <a class="ae ns" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="nw">免费每周简讯</em> </strong> </a> <em class="nw">。关注我们</em> <a class="ae ns" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="nw">推特</em> </strong> </a> <em class="nw">和</em><a class="ae ns" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="nw">LinkedIn</em></strong></a><em class="nw">。加入我们的</em> <a class="ae ns" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="nw">社区不和谐</em> </strong> </a> <em class="nw">。</em></p></div></div>    
</body>
</html>