<html>
<head>
<title>Deploy React with GitHub Actions on Shared Hosting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在共享主机上部署使用GitHub操作的React</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deploy-react-with-github-actions-on-shared-hosting-d950fcf27685?source=collection_archive---------0-----------------------#2022-12-28">https://javascript.plainenglish.io/deploy-react-with-github-actions-on-shared-hosting-d950fcf27685?source=collection_archive---------0-----------------------#2022-12-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/7b4ebd8f7cf322fec775fb9a5a6e3fac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*JEJHNlJc1PsuQ3P7G4MY-Q.png"/></div></figure><p id="e551" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">让我们看看用FTP Deploy GitHub Action在共享主机上部署React app的流程。</p><p id="4c7a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">先决条件:</strong></p><ul class=""><li id="7e87" class="kp kq in jt b ju jv jy jz kc kr kg ks kk kt ko ku kv kw kx bi translated">在cPanel中设置一个FTP帐户。</li><li id="5879" class="kp kq in jt b ju ky jy kz kc la kg lb kk lc ko ku kv kw kx bi translated">在GitHub中设置React项目。</li></ul><p id="a5b1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">开始吧！</p><p id="994b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">设置GitHub动作:</strong></p><p id="875f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">选项1:</p><p id="cb3a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在项目目录的根目录下运行下面的命令。在workflows文件夹中创建ci.yml文件，该文件可以有任何名称，但应以. yml扩展名结尾。将下面的配置代码片段写入ci.yml文件。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="5fca" class="lm ln in li b be lo lp l lq lr">mkdir .github/ <br/>mkdir .github/workflows/ <br/>touch .github/workflows/ci.yml</span></pre><p id="314e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">选项2:</p><p id="3e22" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在GitHub存储库中，点击<strong class="jt io">动作&gt;自己设置一个工作流</strong>，并将下面的配置代码片段写入ci.yml文件。该文件可以有任何名称，但应以. yml扩展名结尾。</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="bcb6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">让我解释一下每个部分的功能。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="5d44" class="lm ln in li b be lo lp l lq lr">name: 🚀 Deploy on push master</span></pre><p id="1baf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">只是为工作流指定一个名称。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="df0a" class="lm ln in li b be lo lp l lq lr">on: <br/>  push:<br/>    branches:    <br/>      - master</span></pre><p id="8c9d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当一个人推送到<em class="lu">主</em>分支时，上面的代码片段触发工作流。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="bbf1" class="lm ln in li b be lo lp l lq lr">jobs:<br/>  web-deploy:<br/>    name: 🎉 Deploy<br/>    runs-on: ubuntu-latest</span></pre><p id="5be1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">作业</em> —将工作流中运行的所有作业组合在一起。指定和设置一个<em class="lu"> web-deploy </em>作业。</p><p id="9cbf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">runs-on:ubuntu-latest</em>—配置使用最新版本的Ubuntu运行工作流。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="0f7b" class="lm ln in li b be lo lp l lq lr">strategy:<br/>      matrix:<br/>        node-version: [16.x]</span></pre><p id="c4d0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">伴随节点版本的<em class="lu">矩阵</em>告诉工作流在指定的节点版本上运行<em class="lu"> web-deploy </em>。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="3b96" class="lm ln in li b be lo lp l lq lr">steps:<br/>    - name: 🚚 Get latest code<br/>      uses: actions/checkout@v2</span></pre><p id="7091" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">步骤</em> —将<em class="lu"> web-deploy </em>作业中运行的所有步骤组合在一起。</p><p id="d4dd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">使用:actions/checkout@v2 </em> —签出存储库，以便工作流可以访问它。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="9fca" class="lm ln in li b be lo lp l lq lr"> - name: Use Node.js ${{ matrix.node-version }}<br/>      uses: actions/setup-node@master<br/>      with:<br/>        node-version: ${{ matrix.node-version }}</span></pre><p id="e76a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">用途:actions/setup-node @ master</em>—在CI环境中安装指定的节点版本(16)。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="b581" class="lm ln in li b be lo lp l lq lr">- name: Copy .env.prod.example to .env<br/>      run: cp .env.prod.example .env</span></pre><p id="b4e1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">运行:cp .env.prod.example。env  —用所需的环境变量创建一个. env。(重要是因为。env总是被添加到。gitignore)。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="a68b" class="lm ln in li b be lo lp l lq lr">- name: 🔨 Build Project <br/>      run: |<br/>        npm install<br/>        npm run build</span></pre><p id="d3b8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">运行:npm安装</em> —使用npm安装程序包节点依赖项。</p><p id="825b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">运行:npm运行构建</em> —构建React项目。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="ce32" class="lm ln in li b be lo lp l lq lr">- name: 📂 Sync files<br/>      uses: SamKirkland/FTP-Deploy-Action@4.3.3<br/>      with:<br/>        server: ${{ secrets.SERVER }}<br/>        username: ${{ secrets.FTP_USERNAME }}<br/>        password: ${{ secrets.FTP_PASSWORD }}<br/>        local-dir: build/</span></pre><p id="a027" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用FTP凭证将文件从<em class="lu">构建</em>文件夹传输到共享托管服务器。</p><p id="194c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">添加GitHub秘密:</strong></p><p id="a09f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">转到GitHub存储库的<strong class="jt io">设置</strong>选项卡，点击<strong class="jt io">机密</strong> &gt; <strong class="jt io">动作</strong> &gt; <strong class="jt io">新建存储库机密</strong>添加FTP服务器、帐号用户名和密码。</p><p id="7431" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">例如，对于FTP用户名:<strong class="jt io"> FTP_USERNAME </strong>作为名称，<strong class="jt io">zon@zon.com</strong>作为值。</p><p id="d1a7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">要访问管道中的变量，请使用以下格式:</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="fcfb" class="lm ln in li b be lo lp l lq lr">${{ secrets.SERVER }} <br/>${{ secrets.FTP_USERNAME }} <br/>${{ secrets.FTP_PASSWORD }}</span></pre><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/272d443f5247d889f3f1a83e828f9b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wM9VhGelPG7XqvHw.png"/></div></div></figure><p id="a00e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，每当有人推送到主分支时，管道就开始运行<em class="lu"> web-deploy </em>作业，该作业构建并部署react应用程序。</p><p id="2f9a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">转到<strong class="jt io">操作</strong>选项卡，监控它是正在运行、成功部署还是失败。</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/92623a7b884161cd2bc18d2e279167d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fg2fFeKYSWB8XYNn.png"/></div></div></figure><p id="08aa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GitHub上的CI/CD管道到此结束。感谢阅读！</p></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="8079" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">原载于2022年12月28日</em><a class="ae mh" href="https://anlisha.com.np/blog/deploy-react-with-github-actions-on-shared-hosting/" rel="noopener ugc nofollow" target="_blank"><em class="lu">【https://anlisha.com.np】</em></a><em class="lu">。</em></p><p id="36bd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">更多内容看</em> <a class="ae mh" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="lu">说白了。</em></strong></a></p><p id="bf03" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lu">报名参加我们的</em> <a class="ae mh" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="lu">免费每周简讯</em> </strong> </a> <em class="lu">。关注我们上</em> <a class="ae mh" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="lu">推特</em> </strong> </a>，<a class="ae mh" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="lu">领英</em> </strong> </a> <strong class="jt io"> <em class="lu">，</em></strong><a class="ae mh" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="lu">YouTube</em></strong></a><strong class="jt io"><em class="lu">，以及</em></strong><em class="lu"><a class="ae mh" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="lu">不和</em> </strong> </a></em> </p><p id="7e56" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="lu">想扩大你的软件创业规模</em> </strong> <em class="lu">？检查出</em> <a class="ae mh" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="lu">电路</em> </strong> </a> <em class="lu">。</em></p></div></div>    
</body>
</html>