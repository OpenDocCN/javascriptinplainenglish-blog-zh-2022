<html>
<head>
<title>Create Your First AWS CDK Project in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在TypeScript中创建您的第一个AWS CDK项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-your-first-aws-cdk-project-in-typescript-1dde17e59e62?source=collection_archive---------3-----------------------#2022-07-28">https://javascript.plainenglish.io/create-your-first-aws-cdk-project-in-typescript-1dde17e59e62?source=collection_archive---------3-----------------------#2022-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="459b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何用TypeScript创建你的第一个AWS CDK项目的教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5e399beee19ec49802a0392613500fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4G72slrrSf0GqWla"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@we_are_rising?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">lucas Favre</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e8a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将在TypeScript中从头开始创建我们的第一个AWS CDK项目。因此，没有进一步的行动，让我们直接进入它。</p><h2 id="7188" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">先决条件</h2><p id="5f7e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在开始我们的项目之前，我们需要在本地机器上安装一些依赖项。首先，我们需要在我们的电脑上安装<a class="ae kv" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">节点JS </a>。</p><p id="ed89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要在本地机器上安装<a class="ae kv" href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" rel="noopener ugc nofollow" target="_blank"> AWS CLI </a>。我们还需要有一个AWS帐户。如果您没有AWS帐户，<a class="ae kv" href="https://portal.aws.amazon.com/billing/signup" rel="noopener ugc nofollow" target="_blank">免费创建一个AWS帐户</a>。</p><p id="9a02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步也是最后一步是安装AWS CDK工具包。您可以通过在终端中键入以下命令来安装它:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="6dfc" class="ls lt iq mr b gy mv mw l mx my">npm install -g aws-cdk</span></pre><h2 id="a411" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">配置管理用户</h2><p id="d0dd" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">如果您还没有，我们的下一步是在AWS中创建一个管理用户。</p><p id="5bec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要创建新的管理用户，请转到AWS IAM控制台并单击<a class="ae kv" href="https://console.aws.amazon.com/iam/home?#/users$new" rel="noopener ugc nofollow" target="_blank">添加用户</a>。</p><p id="4284" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">键入您的用户名，然后单击“编程访问”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/25dfcee9a8323ad22bc6c2f6f837dd9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_e4SIlS5KISezviL33OEQ.png"/></div></div></figure><p id="0f5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击“下一步”后，从“设置权限”选项卡中选择“直接附加现有策略”，并选择“管理员访问权限”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/174193db1871b395559b52f63d0fc967.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WzYT5pFeYrBJ5wtMEb42cA.png"/></div></div></figure><p id="0eba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击“下一步”按钮后，让我们跳过“标签”部分。继续点击“下一步”按钮，直到它显示“创建用户”现在，点击“创建用户”按钮。之后，它应该显示如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/df2d658c7fa7cd5bc285f293a72d0963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ECNbmguUY84XDjO-3T1tDQ.png"/></div></div></figure><p id="4058" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，<strong class="ky ir">暂时不要关闭这个页面</strong>。在您的PC上，转到您的终端，键入以下命令:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d030" class="ls lt iq mr b gy mv mw l mx my">aws configure</span></pre><p id="75b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它应该询问访问密钥ID、秘密访问密钥、区域名称和输出格式。从网站上粘贴访问密钥ID和秘密访问密钥。您可以选择任何区域名称，如<code class="fe nc nd ne mr b">us-east-1</code>、<code class="fe nc nd ne mr b">eu-west-1</code>，暂时将输出格式留空。</p><h2 id="0aeb" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">创建新项目</h2><p id="02ec" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">配置完所有设置后，就该创建一个新的AWS CDK项目了。让我们到您的终端，在我们的项目目录中，为我们的CDK项目创建一个新文件夹。我们可以使用下面的命令创建一个新文件夹，并将其移入该目录:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="add9" class="ls lt iq mr b gy mv mw l mx my">mkdir cdk-starter &amp;&amp; cd cdk-starter</span></pre><p id="a4fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，键入以下命令创建一个新的TypeScript CDK项目:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="812a" class="ls lt iq mr b gy mv mw l mx my">cdk init app --language=typescript</span></pre><h2 id="6f3e" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">项目结构</h2><p id="1754" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">完成<code class="fe nc nd ne mr b">cdk init</code>后，让我们进入代码编辑器，看看项目结构。它应该类似于下面的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/a3148cdc3e8a54fc2e3eb87969fd3303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*Zg0343tc0tBrlPMFMsa8kA.png"/></div></figure><p id="d8a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们细分每个文件及其代表的内容:</p><ol class=""><li id="39bd" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr nl nm nn no bi translated"><code class="fe nc nd ne mr b">bin/cdk-starter.ts</code>:</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/b405a6229dec6dd817a0c16f5a05b7d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mhMqplva64kT81nIwI9Yw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">cdk-starter.ts</figcaption></figure><p id="a15d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是您的应用程序的入口点。这里，我们从<code class="fe nc nd ne mr b">lib/cdk-starter-stack.ts</code>文件中加载<code class="fe nc nd ne mr b">CDKStarterStack</code>类的实例。</p><p id="a083" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.<code class="fe nc nd ne mr b">lib/cdk-starter-stack.ts</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/5d0718134b0b8acbbff77c23544ed1fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJHTGC3H5sNXfBB131b8Cg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">cdk-starter-stack.ts</figcaption></figure><p id="6e61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们申请的主要文件。在这里，我们将集成AWS的所有基础设施。</p><p id="9c6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们在终端中执行以下命令，生成YAML文件中的所有基础设施代码:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="4d5e" class="ls lt iq mr b gy mv mw l mx my">cdk synth</span></pre><p id="25bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您会看到一个名为<code class="fe nc nd ne mr b">cdk.out</code>的新文件夹生成。</p><p id="4e40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，当我们启动一个新的CDK项目时，我们只需要执行下面的命令一次。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="9a73" class="ls lt iq mr b gy mv mw l mx my">cdk bootstrap</span></pre><p id="9965" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该命令将在我们的AWS帐户中创建CDK工具包。</p><h2 id="9246" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">让我们创建第一个λ函数</h2><p id="895e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在，让我们创建第一个λ函数。首先，让我们从终端中的以下命令安装<code class="fe nc nd ne mr b">aws-lambda</code>:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="ec9e" class="ls lt iq mr b gy mv mw l mx my">npm install aws-lambda<br/>npm install --save-dev @types/aws-lambda</span></pre><p id="e54a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将在TypeScript中创建我们的Lambda函数。因此，我们将需要另一个包，esbuild，将我们的TypeScript代码编译成JavaScript。我们可以通过运行以下命令来安装此软件包:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="a734" class="ls lt iq mr b gy mv mw l mx my">npm install --save-dev esbuild</span></pre><p id="0299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们在<code class="fe nc nd ne mr b">src/lambda/handlers</code>文件夹中创建一个新的λ函数。我们将这个文件称为<code class="fe nc nd ne mr b">index.ts</code>。我们把下面的代码粘贴到<code class="fe nc nd ne mr b">index.ts</code>中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="3825" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们也改变<code class="fe nc nd ne mr b">cdk-starter-stack.ts</code>文件来增加我们的λ函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="969d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们刚刚将我们的lambda函数链接到API网关，以将这个Lambda函数调用到API。</p><p id="207d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们运行<code class="fe nc nd ne mr b">cdk synth</code>来生成我们的基础设施文件，然后运行<code class="fe nc nd ne mr b">cdk deploy</code>来将我们的应用程序部署到云中。</p><p id="2130" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在成功地将我们的应用程序部署到云中之后，我们将在我们的终端中获得一个URL。让我们通过点击终端来测试我们的应用程序，我们应该会看到来自lambda函数的消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/71702aff7fc2544c15d7f20e72f5196d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KTmlmdxKmn-7SR_4iQG2DQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/404797b51ddaea1665c28a3221e7dc33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SvdtI0vlndTpu1guu--_eg.png"/></div></div></figure><h2 id="43c0" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">结论</h2><p id="e1d0" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们已经成功地用TypeScript创建了我们的第一个AWS CDK应用程序。这很简单也很有趣！</p><p id="224b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是通过在代码中构建额外的基础设施和构建现实世界的解决方案来让我们的手变得更脏。</p><p id="6474" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望你喜欢我的文章。祝你有愉快的一天！</p><h2 id="729b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">参考</h2><ol class=""><li id="f294" class="ng nh iq ky b kz ml lc mm lf nv lj nw ln nx lr nl nm nn no bi translated"><a class="ae kv" href="https://cdkworkshop.com/" rel="noopener ugc nofollow" target="_blank">https://cdkworkshop.com/</a></li></ol><p id="5e24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ny">通过</em><a class="ae kv" href="https://www.linkedin.com/in/ludehsar/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ny">Linkedin</em></strong></a><em class="ny">或</em> <a class="ae kv" href="https://rashedul-alam.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">与我联系，我的网站</em> </strong> </a> <em class="ny">。</em></p></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><p id="3576" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ny">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ny">plain English . io</em></strong></a><em class="ny">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">免费周报</em> </strong> </a> <em class="ny">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ny">Twitter</em></strong></a><strong class="ky ir"><em class="ny"/></strong><em class="ny">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ny">LinkedIn</em></strong></a><em class="ny">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">社区不和谐</em> </strong> </a> <em class="ny">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">人才集体</em> </strong> </a> <em class="ny">。</em></p></div></div>    
</body>
</html>