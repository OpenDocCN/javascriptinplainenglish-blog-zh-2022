<html>
<head>
<title>Angular 14 HttpClient &amp; Http Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular 14 HttpClient &amp; Http服务</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-14-httpclient-http-services-a2ed888b56d?source=collection_archive---------2-----------------------#2022-10-22">https://javascript.plainenglish.io/angular-14-httpclient-http-services-a2ed888b56d?source=collection_archive---------2-----------------------#2022-10-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2187" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天，我们将向您展示如何使用HttpClient服务在Angular 12中使用RESTful API。HttpClient服务是Angular中非常有用的API，用于与远程服务器进行通信。在本帖中，我们将教你如何用Angular制作HTTP请求。</p><h1 id="50c1" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">有角度的HttpClient功能</h1><ul class=""><li id="6959" class="lj lk iq jp b jq ll ju lm jy ln kc lo kg lp kk lq lr ls lt bi translated">明显的支持</li><li id="47a3" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">轻松的API测试</li><li id="4860" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">顺畅的请求和响应机制</li><li id="fc4f" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">更好的错误处理</li></ul><p id="8cf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">HttpClient是一个可注入的服务，它附带了各种强大的方法来与远程服务器通信。HttpClient API可以轻松发送Http POST、GET、PUT和DELETE请求。</p><h1 id="e38d" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Angular 14 HttpClient方法</h1><ul class=""><li id="0951" class="lj lk iq jp b jq ll ju lm jy ln kc lo kg lp kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">request()</code></li><li id="0f8f" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">delete()</code></li><li id="8acc" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">get()</code></li><li id="a130" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">head()</code></li><li id="2cef" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">jsonp()</code></li><li id="1aa7" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">options()</code></li><li id="0ed6" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">patch()</code></li><li id="c29e" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">post()</code></li><li id="2c17" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">put()</code></li></ul><p id="69a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将向您展示标准HTTP方法的实际例子，如GET、PUT、POST和DELETE，这些方法允许您与REST API服务器进行通信。</p><p id="8721" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本教程结束时，你将能够理解。如何在Angular app中设置HttpClientModule？使用JSON server NPM包使用本地服务器发出请求，以及如何使用HttpClient API使用Angular发出GET、POST、PUT &amp; DELETE请求。</p><h1 id="704e" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Angular HttpClient服务示例</h1><ul class=""><li id="5d1f" class="lj lk iq jp b jq ll ju lm jy ln kc lo kg lp kk lq lr ls lt bi translated">安装Angular CLI</li><li id="8ec1" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">在Angular中配置假的JSON服务器</li><li id="2787" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">在Angular中启用路由服务</li><li id="53a1" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">配置角度HttpClient</li><li id="cfd3" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">使用Angular HttpClient API创建使用RESTful API的Angular服务</li><li id="9a16" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">从Angular组件访问HttpClient API</li><li id="fc8b" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">在Angular中发送HTTP GET和DELETE请求来管理数据</li><li id="b254" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">在Angular中发出HTTP PUT请求以更新数据</li></ul><h1 id="95d6" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">创建角度项目</h1><p id="45cc" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">为了创建这个演示应用程序，您必须在您的机器上设置Node JS开发环境。</p><p id="e5fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular项目是使用Angular CLI开发的，这是一个官方工具。点击以下命令安装Angular CLI，如果已经安装Angular CLI，则忽略。</p><p id="314a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用Angular创建一个员工记录管理系统，在这个演示应用程序中，我将通过HttpClient服务使用RESTful API。</p><p id="1bd2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是时候设置Angular项目了，在Angular CLI中运行以下命令。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="76ae" class="mo km iq mc b gy mp mq l mr ms">ng new angular-httpclient-app</span></pre><p id="e09c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它会问你以下问题…</p><p id="3c8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您想要添加角度路由吗？<br/>选择y并按回车键。</p><p id="c60a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您想使用哪种样式表格式？(使用箭头键)<br/>选择CSS并按回车键</p><p id="60fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后你的项目将开始创建，一旦项目被创建，不要忘记进入项目的文件夹。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="f312" class="mo km iq mc b gy mp mq l mr ms">cd angular-httpclient-app</span></pre><p id="631f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用带有Angular的Bootstrap 4 CSS框架来使用带有HttpClient服务的RESTful API。点击下面的命令在你的Angular应用程序中获得引导。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="c40a" class="mo km iq mc b gy mp mq l mr ms">npm install bootstrap</span></pre><p id="7bb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，转到<code class="fe lz ma mb mc b">angular.json</code>文件，用“样式”替换下面的代码:[ ]数组。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="bdc3" class="mo km iq mc b gy mp mq l mr ms">"styles": [<br/>            "node_modules/bootstrap/dist/css/bootstrap.min.css",<br/>            "src/styles.css"<br/>          ]</span></pre><p id="d5aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们必须生成以下组件。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="f553" class="mo km iq mc b gy mp mq l mr ms">ng g c employee-create<br/>ng g c employee-edit<br/>ng g c employee-list</span></pre><h1 id="4f09" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">在Angular中配置JSON服务器</h1><p id="b8f2" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我们将创建一个假服务器来测试我们的Angular应用程序，所以我们将利用<a class="ae mt" href="https://www.npmjs.com/package/json-server" rel="noopener ugc nofollow" target="_blank"> json-server </a> NPM包来解决我们的问题。</p><p id="42d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的项目中安装JSON服务器，在Angular CLI中运行以下命令。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="2917" class="mo km iq mc b gy mp mq l mr ms">npm i json-server --save</span></pre><p id="7702" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，创建一个名为server的文件夹，并将数据库文件保存在其中，以便在本地管理API。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="d25d" class="mo km iq mc b gy mp mq l mr ms">mkdir server &amp;&amp; cd server</span><span id="20e2" class="mo km iq mc b gy mu mq l mr ms">touch db.json</span></pre><p id="a5ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦创建了<code class="fe lz ma mb mc b">db.json</code>文件，然后在其中添加一些数据。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="5f63" class="mo km iq mc b gy mp mq l mr ms">{<br/>  "employees": [{<br/>    "id": 1,<br/>    "name": "Tony Stark",<br/>    "email": "tony@mcu.com",<br/>    "phone": "001-123-4567"<br/>  }, {<br/>    "id": 2,<br/>    "name": "Black Widow",<br/>    "email": "black-widow@mcu.com",<br/>    "phone": "001-123-4568"<br/>  }]<br/>}</span></pre><p id="876e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，运行下面的命令来运行JSON服务器。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="0697" class="mo km iq mc b gy mp mq l mr ms">json-server --watch db.json</span></pre><p id="09b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，如果你用Angualr 7 Http post发出任何请求，put，get或delete你的db.json文件将在本地得到更新。</p><p id="4ec4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在这个URL <code class="fe lz ma mb mc b">http://localhost:3000/employees</code>上查看您的本地db.json文件。</p><h1 id="cca8" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">在Angula中启用路由服务</h1><p id="3635" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">为了在Angular组件间导航，我们需要激活应用程序中的路由服务，要启用路由，请转到<code class="fe lz ma mb mc b">app-routing.module.ts</code>文件并添加以下代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="3a0a" class="mo km iq mc b gy mp mq l mr ms">import { NgModule } from '@angular/core';<br/>import { Routes, RouterModule } from '@angular/router';<br/>import { EmployeeCreateComponent } from './employee-create/employee-create.component';<br/>import { EmployeeEditComponent } from './employee-edit/employee-edit.component';<br/>import { EmployeeListComponent } from './employee-list/employee-list.component';<br/>const routes: Routes = [<br/>  { path: '', pathMatch: 'full', redirectTo: 'create-employee' },<br/>  { path: 'create-employee', component: EmployeeCreateComponent },<br/>  { path: 'employees-list', component: EmployeeListComponent },<br/>  { path: 'employee-edit/:id', component: EmployeeEditComponent },<br/>];<br/>@NgModule({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule],<br/>})<br/>export class AppRoutingModule {}</span></pre><p id="d7b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在视图中启用路由，在app.component.html文件中添加以下代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="1562" class="mo km iq mc b gy mp mq l mr ms">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span></pre><p id="c158" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请确保从“”导入导入批准模块。app.module.ts文件中的“/app-routing.module”。；</p><h1 id="ae3a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">导入HttpClient API</h1><p id="9458" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在本教程中，我将向您演示如何使用带有HttpClient服务的Angular中的RESTful API来访问外部服务器以获取数据。为了使用HttpClient API与Http远程服务器进行通信，您必须在Angular应用程序中设置此服务。</p><p id="451e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到<code class="fe lz ma mb mc b">app.module.ts</code>并粘贴以下代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="5f32" class="mo km iq mc b gy mp mq l mr ms">import { HttpClientModule } from '@angular/common/http';</span></pre><p id="7d42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lz ma mb mc b">@NgModule's</code>导入数组中包含HttpClientModule。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="8711" class="mo km iq mc b gy mp mq l mr ms">@NgModule({<br/>  imports: [<br/>    HttpClientModule<br/>   ]<br/>})</span></pre><p id="5004" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您已经在应用程序中注入了HttpClientModule，现在您可以在Angular app中轻松使用它。</p><p id="437d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另外，这里是完整的app.module.ts文件，包含路由、表单、app组件、http模块。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="b969" class="mo km iq mc b gy mp mq l mr ms">import { NgModule } from '@angular/core';<br/>import { BrowserModule } from '@angular/platform-browser';<br/>import { AppComponent } from './app.component';<br/>import { FormsModule, ReactiveFormsModule } from '@angular/forms';<br/>import { AppRoutingModule } from './app-routing.module';<br/>import { EmployeeCreateComponent } from './employee-create/employee-create.component';<br/>import { EmployeeEditComponent } from './employee-edit/employee-edit.component';<br/>import { EmployeeListComponent } from './employee-list/employee-list.component';<br/>import { HttpClientModule } from '@angular/common/http';<br/>@NgModule({<br/>  declarations: [<br/>    AppComponent,<br/>    EmployeeCreateComponent,<br/>    EmployeeEditComponent,<br/>    EmployeeListComponent,<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    HttpClientModule,<br/>    FormsModule,<br/>    ReactiveFormsModule,<br/>    AppRoutingModule,<br/>  ],<br/>  providers: [],<br/>  bootstrap: [AppComponent],<br/>})<br/>export class AppModule {}</span></pre><h1 id="2ac8" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">创建角度服务</h1><p id="857f" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">为了使用Angular HttpClient服务创建消费RESTful API，我们需要在应用程序中创建一个服务文件。这个文件将保存我们的演示应用程序的核心逻辑。</p><h2 id="8b26" class="mo km iq bd kn mv mw dn kr mx my dp kv jy mz na kz kc nb nc ld kg nd ne lh nf bi translated">涵盖的功能:</h2><ul class=""><li id="efa5" class="lj lk iq jp b jq ll ju lm jy ln kc lo kg lp kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">Create Employee</code></li><li id="e5fa" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">Delete Employee</code></li><li id="8c21" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">Update Employee</code></li><li id="ab70" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><code class="fe lz ma mb mc b">Manage Employee List</code></li></ul><p id="705f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了在Angular中使用RESTful API创建CRUD操作，我们需要生成<code class="fe lz ma mb mc b">employee.ts</code>类和<code class="fe lz ma mb mc b">rest-api.service.ts</code>文件。</p><p id="86fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，生成员工接口类:</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="7fa8" class="mo km iq mc b gy mp mq l mr ms">ng g i shared/Employee</span></pre><p id="f8a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到<code class="fe lz ma mb mc b">shared/employee.ts</code>并在Employee类中定义数据类型。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="e874" class="mo km iq mc b gy mp mq l mr ms">export class Employee {<br/>   id: string;<br/>   name: string;<br/>   email: string;<br/>   phone: number;<br/>}</span></pre><p id="df74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，生成RestApiService类:</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="b1c9" class="mo km iq mc b gy mp mq l mr ms">ng g s shared/rest-api</span></pre><p id="7dc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将在这个文件中写下使用HttpClient API消费RESTful API的核心逻辑。在这个演示应用程序中，我们还将使用RxJS来处理异步操作和错误。</p><p id="c863" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们转到<code class="fe lz ma mb mc b">shared/rest-api.service.ts</code>文件并添加以下代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="f987" class="mo km iq mc b gy mp mq l mr ms">import { Injectable } from '@angular/core';<br/>import { HttpClient, HttpHeaders } from '@angular/common/http';<br/>import { Employee } from '../shared/employee';<br/>import { Observable, throwError } from 'rxjs';<br/>import { retry, catchError } from 'rxjs/operators';<br/>@Injectable({<br/>  providedIn: 'root',<br/>})<br/>export class RestApiService {<br/>  // Define API<br/>  apiURL = 'http://localhost:3000';<br/>  constructor(private http: HttpClient) {}<br/>  /*========================================<br/>    CRUD Methods for consuming RESTful API<br/>  =========================================*/<br/>  // Http Options<br/>  httpOptions = {<br/>    headers: new HttpHeaders({<br/>      'Content-Type': 'application/json',<br/>    }),<br/>  };<br/>  // HttpClient API get() method =&gt; Fetch employees list<br/>  getEmployees(): Observable&lt;Employee&gt; {<br/>    return this.http<br/>      .get&lt;Employee&gt;(this.apiURL + '/employees')<br/>      .pipe(retry(1), catchError(this.handleError));<br/>  }<br/>  // HttpClient API get() method =&gt; Fetch employee<br/>  getEmployee(id: any): Observable&lt;Employee&gt; {<br/>    return this.http<br/>      .get&lt;Employee&gt;(this.apiURL + '/employees/' + id)<br/>      .pipe(retry(1), catchError(this.handleError));<br/>  }<br/>  // HttpClient API post() method =&gt; Create employee<br/>  createEmployee(employee: any): Observable&lt;Employee&gt; {<br/>    return this.http<br/>      .post&lt;Employee&gt;(<br/>        this.apiURL + '/employees',<br/>        JSON.stringify(employee),<br/>        this.httpOptions<br/>      )<br/>      .pipe(retry(1), catchError(this.handleError));<br/>  }<br/>  // HttpClient API put() method =&gt; Update employee<br/>  updateEmployee(id: any, employee: any): Observable&lt;Employee&gt; {<br/>    return this.http<br/>      .put&lt;Employee&gt;(<br/>        this.apiURL + '/employees/' + id,<br/>        JSON.stringify(employee),<br/>        this.httpOptions<br/>      )<br/>      .pipe(retry(1), catchError(this.handleError));<br/>  }<br/>  // HttpClient API delete() method =&gt; Delete employee<br/>  deleteEmployee(id: any) {<br/>    return this.http<br/>      .delete&lt;Employee&gt;(this.apiURL + '/employees/' + id, this.httpOptions)<br/>      .pipe(retry(1), catchError(this.handleError));<br/>  }<br/>  // Error handling<br/>  handleError(error: any) {<br/>    let errorMessage = '';<br/>    if (error.error instanceof ErrorEvent) {<br/>      // Get client-side error<br/>      errorMessage = error.error.message;<br/>    } else {<br/>      // Get server-side error<br/>      errorMessage = `Error Code: ${error.status}\nMessage: ${error.message}`;<br/>    }<br/>    window.alert(errorMessage);<br/>    return throwError(() =&gt; {<br/>      return errorMessage;<br/>    });<br/>  }<br/>}</span></pre><h1 id="917a" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">使用角度HTTP POST请求创建数据</h1><p id="455d" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">转到<code class="fe lz ma mb mc b">employee-create.component.html</code>添加以下代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="519f" class="mo km iq mc b gy mp mq l mr ms">&lt;div class="container custom-container"&gt;<br/>  &lt;div class="col-md-12"&gt;<br/>    &lt;h3 class="mb-3 text-center"&gt;Create Employee&lt;/h3&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;input type="text" [(ngModel)]="employeeDetails.name" class="form-control" placeholder="Name"&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;input type="text" [(ngModel)]="employeeDetails.email" class="form-control" placeholder="Email"&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;input type="text" [(ngModel)]="employeeDetails.phone" class="form-control" placeholder="Phone"&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;button class="btn btn-success btn-lg btn-block" (click)="addEmployee(employeeDetails)"&gt;Create Employee&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="568b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到<code class="fe lz ma mb mc b">employee-create.component.ts</code>文件并添加以下代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="63b7" class="mo km iq mc b gy mp mq l mr ms">import { Component, OnInit, Input } from '@angular/core';<br/>import { Router } from '@angular/router';<br/>import { RestApiService } from '../shared/rest-api.service';<br/>@Component({<br/>  selector: 'app-employee-create',<br/>  templateUrl: './employee-create.component.html',<br/>  styleUrls: ['./employee-create.component.scss'],<br/>})<br/>export class EmployeeCreateComponent implements OnInit {<br/>  @Input() employeeDetails = { name: '', email: '', phone: 0 };<br/>  constructor(public restApi: RestApiService, public router: Router) {}<br/>  ngOnInit() {}<br/>  addEmployee(dataEmployee: any) {<br/>    this.restApi.createEmployee(this.employeeDetails).subscribe((data: {}) =&gt; {<br/>      this.router.navigate(['/employees-list']);<br/>    });<br/>  }<br/>}</span></pre><p id="6b25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过在employee create组件中添加上面给出的代码，我们可以通过Angular组件发出HTTP POST请求来轻松创建一个雇员。</p><h1 id="177c" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">发送HTTP GET和DELETE请求</h1><p id="7740" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在这一部分，我将管理我们在上面创建的员工列表。我将使用我们的RESTful API服务，通过我们的自定义API发送<code class="fe lz ma mb mc b">get()</code>和<code class="fe lz ma mb mc b">delete()</code>请求。</p><p id="775a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在employee-list.component.html文件中添加代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="cf6d" class="mo km iq mc b gy mp mq l mr ms">&lt;div class="container custom-container-2"&gt;<br/>  &lt;!-- Show it when there is no employee --&gt;<br/>  &lt;div class="no-data text-center" *ngIf="Employee.length == 0"&gt;<br/>    &lt;p&gt;There is no employee added yet!&lt;/p&gt;<br/>    &lt;button class="btn btn-outline-primary" routerLink="/create-employee"&gt;<br/>      Add Empoyee<br/>    &lt;/button&gt;<br/>  &lt;/div&gt;<br/>  &lt;!-- Employees list table, it hides when there is no employee --&gt;<br/>  &lt;div *ngIf="Employee.length !== 0"&gt;<br/>    &lt;h3 class="mb-3 text-center"&gt;Employees List&lt;/h3&gt;<br/>    &lt;div class="col-md-12"&gt;<br/>      &lt;table class="table table-bordered"&gt;<br/>        &lt;thead&gt;<br/>          &lt;tr&gt;<br/>            &lt;th scope="col"&gt;User Id&lt;/th&gt;<br/>            &lt;th scope="col"&gt;Name&lt;/th&gt;<br/>            &lt;th scope="col"&gt;Email&lt;/th&gt;<br/>            &lt;th scope="col"&gt;Phone&lt;/th&gt;<br/>            &lt;th scope="col"&gt;Action&lt;/th&gt;<br/>          &lt;/tr&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>          &lt;tr *ngFor="let employee of Employee"&gt;<br/>            &lt;td&gt;{{ employee.id }}&lt;/td&gt;<br/>            &lt;td&gt;{{ employee.name }}&lt;/td&gt;<br/>            &lt;td&gt;{{ employee.email }}&lt;/td&gt;<br/>            &lt;td&gt;{{ employee.phone }}&lt;/td&gt;<br/>            &lt;td&gt;<br/>              &lt;span class="edit" routerLink="/employee-edit/{{ employee.id }}"<br/>                &gt;Edit&lt;/span&gt;<br/>              &lt;span class="delete" (click)="deleteEmployee(employee.id)"<br/>                &gt;Delete&lt;/span<br/>              &gt;<br/>            &lt;/td&gt;<br/>          &lt;/tr&gt;<br/>        &lt;/tbody&gt;<br/>      &lt;/table&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="b139" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在employee-list.component.ts文件中添加代码。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="0ec7" class="mo km iq mc b gy mp mq l mr ms">import { Component, OnInit } from '@angular/core';<br/>import { RestApiService } from '../shared/rest-api.service';<br/>@Component({<br/>  selector: 'app-employee-list',<br/>  templateUrl: './employee-list.component.html',<br/>  styleUrls: ['./employee-list.component.scss'],<br/>})<br/>export class EmployeeListComponent implements OnInit {<br/>  Employee: any = [];<br/>  constructor(public restApi: RestApiService) {}<br/>  ngOnInit() {<br/>    this.loadEmployees();<br/>  }<br/>  // Get employees list<br/>  loadEmployees() {<br/>    return this.restApi.getEmployees().subscribe((data: {}) =&gt; {<br/>      this.Employee = data;<br/>    });<br/>  }<br/>  // Delete employee<br/>  deleteEmployee(id: any) {<br/>    if (window.confirm('Are you sure, you want to delete?')) {<br/>      this.restApi.deleteEmployee(id).subscribe((data) =&gt; {<br/>        this.loadEmployees();<br/>      });<br/>    }<br/>  }<br/>}</span></pre><h1 id="d014" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">更新数据</h1><p id="7635" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我将在Angular中发送HTTP PUT请求，以更新我们的小演示应用程序中的当前员工数据，这非常简单，只需遵循以下步骤。</p><p id="bae1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更新employee-edit.component.html中的代码:</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="5d7e" class="mo km iq mc b gy mp mq l mr ms">&lt;div class="container custom-container"&gt;<br/>  &lt;div class="col-md-12"&gt;<br/>    <br/>    &lt;h3 class="mb-3 text-center"&gt;Update Employee&lt;/h3&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;input type="text" [(ngModel)]="employeeData.name" class="form-control" placeholder="Name"&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;input type="text" [(ngModel)]="employeeData.email" class="form-control" placeholder="Email"&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;input type="text" [(ngModel)]="employeeData.phone" class="form-control" placeholder="Phone"&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group"&gt;<br/>      &lt;button class="btn btn-success btn-lg btn-block" (click)="updateEmployee()"&gt;Update Employee&lt;/button&gt;<br/>    &lt;/div&gt;<br/>    <br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><h1 id="643b" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><code class="fe lz ma mb mc b">employee-edit.component.ts</code></h1><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="3d56" class="mo km iq mc b gy mp mq l mr ms">import { Component, OnInit } from '@angular/core';<br/>import { RestApiService } from "../shared/rest-api.service";<br/>import { ActivatedRoute, Router } from '@angular/router';<br/>@Component({<br/>  selector: 'app-employee-details',<br/>  templateUrl: './employee-edit.component.html',<br/>  styleUrls: ['./employee-edit.component.scss']<br/>})<br/>export class EmployeeEditComponent implements OnInit {<br/>  id = this.actRoute.snapshot.params['id'];<br/>  employeeData: any = {};<br/>  constructor(<br/>    public restApi: RestApiService,<br/>    public actRoute: ActivatedRoute,<br/>    public router: Router<br/>  ) { <br/>  }<br/>  ngOnInit() { <br/>    this.restApi.getEmployee(this.id).subscribe((data: {}) =&gt; {<br/>      this.employeeData = data;<br/>    })<br/>  }<br/>  // Update employee data<br/>  updateEmployee() {<br/>    if(window.confirm('Are you sure, you want to update?')){<br/>      this.restApi.updateEmployee(this.id, this.employeeData).subscribe(data =&gt; {<br/>        this.router.navigate(['/employees-list'])<br/>      })<br/>    }<br/>  }<br/>}</span></pre><p id="064d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您可以在浏览器中测试Angular HttpClient应用程序，只需在终端中键入<code class="fe lz ma mb mc b">ng serve</code>。</p><h1 id="f932" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">运行角度应用程序</h1><p id="dd73" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">使用下面给出的命令开始您的项目。</p><pre class="mg mh mi mj gt mk mc ml mm aw mn bi"><span id="52d8" class="mo km iq mc b gy mp mq l mr ms">ng serve --open</span></pre><h1 id="00c1" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">结论</h1><p id="2975" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这就是现在…如果这个教程对你有帮助，那么一定要与他人分享。</p><p id="e610" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ng">更多内容看</em> <a class="ae mt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ng">说白了。报名参加我们的</em> <a class="ae mt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ng">免费周报</em> </strong> </a> <em class="ng">。关注我们关于</em> <a class="ae mt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ng">推特</em> </strong> </a>，<a class="ae mt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ng">LinkedIn</em></strong></a><em class="ng">，</em><a class="ae mt" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ng">YouTube</em></strong></a><em class="ng">，</em> <a class="ae mt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ng">不和</em> </strong> </a> <strong class="jp ir"> <em class="ng">。</em>T56】</strong></strong></a></p><p id="b785" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ng">有兴趣规模化你的软件创业</em> </strong> <em class="ng">？检查</em> <a class="ae mt" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ng">电路</em> </strong> </a> <em class="ng">。</em></p></div></div>    
</body>
</html>