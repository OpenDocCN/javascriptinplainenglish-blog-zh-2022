<html>
<head>
<title>Attribute-Driven CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">属性驱动的CSS</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/attribute-driven-css-9310e3da1a6a?source=collection_archive---------1-----------------------#2022-10-16">https://javascript.plainenglish.io/attribute-driven-css-9310e3da1a6a?source=collection_archive---------1-----------------------#2022-10-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9d22" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">避免用JavaScript切换CSS类</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/08e2ea2e3d2316ecf298f1388f8ee032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Rfi592jrIDNtPgbG"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9d03" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在开发网站或web应用程序时，我们有时会面临动态内容样式的挑战。有一种常见的方法可以解决这些问题，但今天我想向您展示另一种方法，并解释为什么它更好。</p><h2 id="bf80" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lg mc md me lk mf mg mh lo mi mj mk ml bi translated">动态内容样式</h2><p id="02b2" class="pw-post-body-paragraph kx ky iq kz b la mm jr lc ld mn ju lf lg mo li lj lk mp lm ln lo mq lq lr ls ij bi translated">我说的“动态内容样式”是什么意思？每当JavaScript干扰你的风格时。以下是一些例子:</p><p id="1fc4" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">你会如何设计手机导航？它看起来会像这样吗？</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="420a" class="lt lu iq ms b gy mw mx l my mz">&lt;nav class=`nav {navOpened ? 'open' : ''}`&gt;</span></pre><p id="6cf1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">解决方案的外观取决于您使用的语言，但它通常看起来与任何语言都相似。我经常看到这种模式。另一个例子是像这样有条件地隐藏:</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="5452" class="lt lu iq ms b gy mw mx l my mz">&lt;div class=`some-cool-class {toggled ? 'd-show' : 'd-hidden'}`&gt;</span></pre><p id="4c2f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">请注意，<em class="na">公开</em>或<em class="na"> d-show </em>风格可能会做同样的事情。当然，这也可能是直接切换/添加样式以避免出现类名，但这同样糟糕，如果不是更糟糕的话。</p><p id="2c63" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这种技术在body元素中也很常见。例如，当DOM完全加载时，人们用它来附加一个特定的类，当网站滚动时，或者当一个模态打开时，用它来锁定滚动。</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="a6cf" class="lt lu iq ms b gy mw mx l my mz">&lt;body class=`{loaded ? 'loaded' : ''} {scrolled ? 'scrolled' : ''} {scrollLock ? 'scroll-lock' : ''}`&gt;</span></pre><p id="2a90" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这有几个问题:</p><ol class=""><li id="77bc" class="nb nc iq kz b la lb ld le lg nd lk ne lo nf ls ng nh ni nj bi translated">条件样式和类很难阅读，尤其是当你组合了几个静态和动态类的时候。</li><li id="0de3" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls ng nh ni nj bi translated">JavaScript规定了元素的外观(关注点分离)。</li><li id="72e0" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls ng nh ni nj bi translated">你最终要么对同一个类使用多个类，要么用一个类来管理它们(开放类对d-hidden/d-show)。我通常看到的最糟糕的情况是两者兼而有之。</li></ol><p id="1b99" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">那么，什么是更好的解决方案呢？</p><h2 id="5949" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lg mc md me lk mf mg mh lo mi mj mk ml bi translated">属性驱动的方法</h2><p id="0159" class="pw-post-body-paragraph kx ky iq kz b la mm jr lc ld mn ju lf lg mo li lj lk mp lm ln lo mq lq lr ls ij bi translated">这种方法将HTML数据和aria属性用于样式元素。例如:</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="2dce" class="lt lu iq ms b gy mw mx l my mz">&lt;nav class="nav" aria-expanded=`{navOpened}`&gt;</span></pre><p id="cc4c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，您可以在CSS中使用aria属性作为选择器:</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="a034" class="lt lu iq ms b gy mw mx l my mz">[aria-expanded='true'] {<br/>  /* ... */<br/>}</span></pre><p id="e86a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">是的，这可能并不总是一个好主意。你不能简单地用aria-hidden隐藏任何元素(尽管你可以隐藏任何没有表示作用的aria-hidden元素)，而且你可以说这也混合了分离(a11y和样式)。如果您想要严格分离，您可以利用数据属性:</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="27d9" class="lt lu iq ms b gy mw mx l my mz">&lt;nav class="nav" aria-expanded=`{navOpened}` data-expanded=`{navOpened}`&gt;</span></pre><p id="50d5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">和CSS:</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="652d" class="lt lu iq ms b gy mw mx l my mz">[data-expanded='true'] {<br/>  /* ... */<br/>}</span></pre><p id="b498" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">下面是之前body元素的例子:</p><pre class="kh ki kj kk gt mr ms mt mu aw mv bi"><span id="9d05" class="lt lu iq ms b gy mw mx l my mz">&lt;body data-loaded=`{loaded}` data-scrolled=`{scrolled}` data-scroll-lock=`{scrollLock}`&gt;</span></pre><p id="b3d5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">为什么更好？</p><ol class=""><li id="8779" class="nb nc iq kz b la lb ld le lg nd lk ne lo nf ls ng nh ni nj bi translated">JavaScript只控制属性，不控制类名。</li><li id="d3f8" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls ng nh ni nj bi translated">数据属性可以作为变量名的附加描述(参见上面的数据扩展和navOpened名称的例子，它们在一起阅读时是有意义的)。因此，它增加了可读性。</li><li id="ecae" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls ng nh ni nj bi translated">任何数据扩展的元素都将接受特定的样式；你会有不同的机制来避免混合通用和专用的解决方案。</li><li id="9d48" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls ng nh ni nj bi translated">您不必为open或hidden这样的状态定义类名；它们是属性。</li></ol><p id="39ee" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">就这些了，伙计们。<br/>感谢您的阅读。</p><p id="6c3c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">你对此有什么看法？之前有条件添加类名吗？你如何解决可读性问题？</p><p id="cacb" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="na">更内容于</em> <a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> <em class="na">普通英语</em> </strong> </a> <em class="na">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> <em class="na">免费周报</em> </strong> </a> <em class="na">。在</em> <a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> <em class="na">推特</em></strong></a><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz ir"><em class="na">领英</em></strong></a><strong class="kz ir"><em class="na"/></strong><a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kz ir"><em class="na">YouTube</em></strong></a><strong class="kz ir"><em class="na">和</em></strong><em class="na"/><strong class="kz ir">T48不和</strong>T52 </p></div></div>    
</body>
</html>