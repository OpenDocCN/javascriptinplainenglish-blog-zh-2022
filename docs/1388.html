<html>
<head>
<title>What are Callbacks &amp; How Do They Work in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是回调&amp;它们在JavaScript中是如何工作的？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-callbacks-how-it-works-in-javascript-step-by-step-real-life-example-425bc277893?source=collection_archive---------12-----------------------#2022-03-21">https://javascript.plainenglish.io/what-is-callbacks-how-it-works-in-javascript-step-by-step-real-life-example-425bc277893?source=collection_archive---------12-----------------------#2022-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="eafc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript回调的分步指南——用真实的例子解释。</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/0de4c85165532c068a1c4b08125e0b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gBTyt9GLzEK6qf0IZ9dKKQ.jpeg"/></div></div></figure><p id="867b" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">有几个定义可以描述回调，让我们看看其中的3个。</p><ul class=""><li id="6825" class="lu lv iq la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">回调是作为参数传递给另一个函数的函数。</li><li id="0a3e" class="lu lv iq la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">这种技术允许一个函数调用另一个函数。</li><li id="0130" class="lu lv iq la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">回调函数可以在另一个函数完成后运行。</li></ul><p id="a824" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">让我们<strong class="la ir">简化那些定义</strong>。</p><p id="93da" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我将使用箭头函数而不是常规函数来解释回调，如果你不知道最流行的创建函数方法之间的区别，你可以在这里查看<a class="ae mi" href="https://nissimzarur.medium.com/javascript-arrow-function-vs-regular-function-whats-the-difference-fast-understanding-cda1a162a355" rel="noopener"><strong class="la ir"><em class="mj"/></strong></a>。</p><p id="83b1" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">让我们看看下面的例子:</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="ff25" class="mp mq iq ml b gy mr ms l mt mu">const calc = (x, y) =&gt; {<br/>    let sum = x + y; //5 + 6<br/>    return sum;<br/>}</span><span id="85ee" class="mp mq iq ml b gy mv ms l mt mu">const result = calc(5,6); //Will return 11.</span></pre><p id="1f25" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">该函数将计算<code class="fe mw mx my ml b">x</code> + <code class="fe mw mx my ml b">y</code>的和，然后将和值返回给<code class="fe mw mx my ml b">result</code>变量。从例子中我们可以看到，最终结果是11。</p><p id="585d" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在，让我们创建另一个函数来将结果打印到控制台。</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="372a" class="mp mq iq ml b gy mr ms l mt mu">const calc = (x, y) =&gt; {<br/>    let sum = x + y; //5 + 6<br/>    return sum;<br/>}</span><span id="4466" class="mp mq iq ml b gy mv ms l mt mu">const showResult = (result) =&gt; {<br/>    console.log(result);<br/>}</span><span id="9c44" class="mp mq iq ml b gy mv ms l mt mu">const result = calc(5, 6); //Will return 11.</span><span id="1bc6" class="mp mq iq ml b gy mv ms l mt mu">showResult(result); //Will print 11 to the console.</span></pre><p id="b12a" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在我们有了函数<code class="fe mw mx my ml b">showResult(result)</code>，它接收<code class="fe mw mx my ml b">result</code>变量作为参数，打印出<code class="fe mw mx my ml b">calc(x, y)</code>函数的计算值。换句话说，我们必须等到函数<code class="fe mw mx my ml b">calc(x, y)</code>完成并返回计算值才能使用<code class="fe mw mx my ml b">showResult(result)</code>函数。</p><p id="8024" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是将<code class="fe mw mx my ml b">showResult</code>函数转换为回调函数的一个好点，让我们看看下面的例子:</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="57b6" class="mp mq iq ml b gy mr ms l mt mu">const calc = (x, y, callback)=&gt;{<br/>    let sum = x + y;<br/>    callback(sum); //Will print to the console the result.<br/>}</span><span id="dad5" class="mp mq iq ml b gy mv ms l mt mu">const showResult = (result)=&gt;{<br/>    console.log(result);<br/>}</span><span id="8b79" class="mp mq iq ml b gy mv ms l mt mu">calc(5, 6, showResult); //Here we add the showResult to be callback.</span></pre><p id="6f3c" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在，我们将在<code class="fe mw mx my ml b">calc</code>函数结束计算后调用的函数<code class="fe mw mx my ml b">showResult</code>作为参数传递。<code class="fe mw mx my ml b">calc</code>函数中的<code class="fe mw mx my ml b">callback</code>参数现在作为<code class="fe mw mx my ml b">showResult</code>使用，期望接收一个<code class="fe mw mx my ml b">result</code>参数将结果打印到控制台。这样，我们可以确保在计算结束时打印出结果。</p><p id="aa8f" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这些函数都是同步函数，<strong class="la ir">回调真正出彩的地方在异步函数</strong>，一个函数要等待另一个函数。</p><p id="92ed" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在我们知道了回调是如何工作的，让我们创建一个真实的例子:</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="e60f" class="mp mq iq ml b gy mr ms l mt mu">const fetchMovies = (url, callback)=&gt;{<br/>    fetch(url)<br/>  .then(response =&gt; response.json())<br/>  .then(data =&gt;{<br/>      callback(data);<br/>  });<br/>}</span><span id="634f" class="mp mq iq ml b gy mv ms l mt mu">const filterMoviesById = (result)=&gt;{<br/>    const filteredResults = result.filter((item)=&gt;[1,5,6,9,15].includes(item.id));<br/>    <br/>    console.log(filteredResults);<br/>}</span><span id="deaf" class="mp mq iq ml b gy mv ms l mt mu">fetchMovies('<a class="ae mi" href="http://example.com/movies.json'" rel="noopener ugc nofollow" target="_blank">http://example.com/movies'</a>, filterMoviesById);</span></pre><p id="106b" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">首先，我们来解释一下上面的例子。我们创建一个请求，从包含电影列表的URL <code class="fe mw mx my ml b">“<a class="ae mi" href="http://example.com/movies.json'" rel="noopener ugc nofollow" target="_blank">http://example.com/movies</a>”</code>获取数据，然后我们希望只打印id为[1，5，6，9，15]的电影。</p><p id="a933" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><strong class="la ir">步骤1: </strong>我们创建了<code class="fe mw mx my ml b">fetchMovies</code>函数，它接收<code class="fe mw mx my ml b">url</code>和<code class="fe mw mx my ml b">callback</code>作为参数。</p><p id="b536" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><strong class="la ir">步骤2: </strong>我们创建过滤函数，只查找带有我们要找的id的电影。</p><p id="b65d" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><strong class="la ir">步骤3: </strong>我们将参数<code class="fe mw mx my ml b">url</code>和<code class="fe mw mx my ml b"> filterMoviesById</code>回调传递给<code class="fe mw mx my ml b">fetchMovies</code>。</p><p id="ca4b" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在，函数<code class="fe mw mx my ml b">fetchMovies</code>是一个异步函数，这意味着当我们进行fetch调用时，我们不会等待结果的到来，编译器会处理其他任务，所以我们需要确保当结果到来时，我们将调用<code class="fe mw mx my ml b"><strong class="la ir">filterMoviesById</strong></code> <strong class="la ir"> </strong>函数并打印过滤后的结果。</p></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><h2 id="9856" class="mp mq iq bd mz na nb dn nc nd ne dp nf lh ng nh ni ll nj nk nl lp nm nn no np bi translated">捐款</h2><p id="9c04" class="pw-post-body-paragraph ky kz iq la b lb nq jr ld le nr ju lg lh ns lj lk ll nt ln lo lp nu lr ls lt ij bi translated">如果你觉得这篇文章很有帮助，并且你想支持我上传更多那样的内容，你可以点击<a class="ae mi" href="https://www.paypal.com/donate/?hosted_button_id=V6ELVKKEES4FA" rel="noopener ugc nofollow" target="_blank"> <strong class="la ir"> <em class="mj">这里</em> </strong> </a> <strong class="la ir"> <em class="mj">给我买杯咖啡。</em>T29】</strong></p></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><h2 id="ca74" class="mp mq iq bd mz na nb dn nc nd ne dp nf lh ng nh ni ll nj nk nl lp nm nn no np bi translated">额外的例子</h2><p id="6d32" class="pw-post-body-paragraph ky kz iq la b lb nq jr ld le nr ju lg lh ns lj lk ll nt ln lo lp nu lr ls lt ij bi translated">如果我们将异步函数视为同步函数会怎么样？</p><p id="e70c" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">下面是一个<strong class="la ir">不会</strong>工作的例子:</p><pre class="kn ko kp kq gt mk ml mm mn aw mo bi"><span id="b695" class="mp mq iq ml b gy mr ms l mt mu">const fetchMovies = (url, callback)=&gt;{<br/>    fetch(url)<br/>  .then(response =&gt; response.json())<br/>  .then(data =&gt;{<br/>      callback(data);<br/>  });<br/>}</span><span id="8b41" class="mp mq iq ml b gy mv ms l mt mu">const filterMoviesById = (result)=&gt;{<br/>    const filteredResults = result.filter((item)=&gt;[1,5,6,9,15].includes(item.id));<br/>    <br/>    console.log(filteredResults);<br/>}</span><span id="50c9" class="mp mq iq ml b gy mv ms l mt mu">const result = fetchMovies('<a class="ae mi" href="http://example.com/movies.json'" rel="noopener ugc nofollow" target="_blank">http://example.com/movies.json'</a>);<br/>filterMoviesById(result); //result is undefined.</span></pre><p id="7ba4" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">正如我们看到的，我们不能用异步函数做同样的事情，<code class="fe mw mx my ml b">fetch</code>是一个异步函数，所以我们需要等待结果，然后调用函数<code class="fe mw mx my ml b">filterMoviesById</code>来过滤结果。所以在这里你可以看到我们必须将函数作为回调传递给<code class="fe mw mx my ml b">fetchMovies</code>，当结果到达时，调用回调。</p><p id="7bd2" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这就是回调的力量。</p></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="20e8" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><strong class="la ir"/>感谢您到目前为止的阅读，如果您喜欢这样的内容，并且您想支持我作为一名程序员和作家写更多这样的文章，<a class="ae mi" href="https://medium.com/membership/@nissimzarur" rel="noopener"> <strong class="la ir"> <em class="mj">请使用我的链接注册Medium成为会员(每月订阅5美元)，您将可以无限制地访问Medium上的所有内容。</em> </strong> </a></p></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><ul class=""><li id="0eaa" class="lu lv iq la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">如果你想了解更多关于“<a class="ae mi" href="https://towardsdev.com/4-types-of-javascript-scopes-all-you-need-to-know-about-207598da120e" rel="noopener ugc nofollow" target="_blank"> <strong class="la ir"> <em class="mj">范围</em> </strong> </a>以及各个范围之间的区别”你可以在这里阅读<a class="ae mi" href="https://towardsdev.com/4-types-of-javascript-scopes-all-you-need-to-know-about-207598da120e" rel="noopener ugc nofollow" target="_blank"><strong class="la ir"><em class="mj"/></strong></a>。</li><li id="283a" class="lu lv iq la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">如果你想了解更多关于"<a class="ae mi" href="https://nissimzarur.medium.com/what-is-closures-how-it-works-in-javascript-step-by-step-real-life-example-eb4a97c7120d" rel="noopener"> <strong class="la ir"> <em class="mj">闭包</em> </strong> </a>以及它在JavaScript中如何工作的真实例子"你可以在这里  阅读<a class="ae mi" href="https://nissimzarur.medium.com/what-is-closures-how-it-works-in-javascript-step-by-step-real-life-example-eb4a97c7120d" rel="noopener"> <strong class="la ir"> <em class="mj">。</em></strong></a></li><li id="4e61" class="lu lv iq la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">如果你想了解更多关于<a class="ae mi" href="https://nissimzarur.medium.com/javascript-arrow-function-vs-regular-function-whats-the-difference-fast-understanding-cda1a162a355" rel="noopener"> <strong class="la ir"> <em class="mj">箭头函数&amp;常规函数</em></strong></a><em class="mj"/>的区别你可以在这里阅读<a class="ae mi" href="https://nissimzarur.medium.com/javascript-arrow-function-vs-regular-function-whats-the-difference-fast-understanding-cda1a162a355" rel="noopener"><strong class="la ir"><em class="mj"/></strong></a>。</li></ul></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="784b" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">谢谢，希望对你有帮助。请继续关注更多JavaScript解释、示例和技巧。</p><p id="83e0" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><em class="mj">更多内容请看</em><a class="ae mi" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="la ir"><em class="mj">plain English . io</em></strong></a><em class="mj">。报名参加我们的</em> <a class="ae mi" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="la ir"> <em class="mj">免费周报</em> </strong> </a> <em class="mj">。关注我们关于</em><a class="ae mi" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="la ir"><em class="mj">Twitter</em></strong></a><em class="mj">和</em><a class="ae mi" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="la ir"><em class="mj">LinkedIn</em></strong></a><em class="mj">。查看我们的</em> <a class="ae mi" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="la ir"> <em class="mj">社区不和谐</em> </strong> </a> <em class="mj">加入我们的</em> <a class="ae mi" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="la ir"> <em class="mj">人才集体</em> </strong> </a> <em class="mj">。</em></p></div></div>    
</body>
</html>