<html>
<head>
<title>Deal With “Maximum Call Stack Size Exceeded” Error in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理JavaScript中的“超出最大调用堆栈大小”错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deal-with-maximum-call-stack-size-exceeded-error-in-javascript-45c035161a78?source=collection_archive---------6-----------------------#2022-09-05">https://javascript.plainenglish.io/deal-with-maximum-call-stack-size-exceeded-error-in-javascript-45c035161a78?source=collection_archive---------6-----------------------#2022-09-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dbea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何避免JavaScript数组中“超过最大调用堆栈大小”错误的教程。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/48b6654c333408bb6ffa4630fed65304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fviF7hy1ELH0I7aT"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@eaterscollective?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Eaters Collective</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9c1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最近不得不开发一个Node.js脚本，它处理几个数组，每个数组包含100k个以上的元素。在用<code class="fe ls lt lu lv b">push()</code>函数和JavaScript spread操作符合并这些数组时，我遇到了“超出最大调用堆栈大小”错误。</p><p id="4d30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这让我有机会深入研究这个问题，并找出如何处理它。现在让我们来看看这个错误是什么，为什么会发生，以及如何避免它。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="864b" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">为什么会出现“超出最大调用堆栈大小”错误</h1><p id="74c8" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">让我们考虑下面的例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="24f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您在浏览器控制台中运行此代码片段，您将获得以下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/3d4cf822199323c60d0cd95b26fb9811.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*QODDw-2y6wvxiaM2Xondsg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Getting the RangeError</figcaption></figure><p id="1a65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">发生这种情况是因为当您使用spread运算符时，源数组的所有元素都存储在堆栈中并添加到参数列表中。因此，在处理大量元素(一般&gt; 135K)时，会得到“超出最大调用栈大小”的错误。</p><p id="aa2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，当使用spread操作符时，可以处理的元素数量受到堆栈大小的限制。注意，使用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" rel="noopener ugc nofollow" target="_blank">apply()</a></code>函数时也会发生同样的事情。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="2b3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看“【JavaScript函数可以接受的最大参数数量是多少？ " StackOverflow问题，了解有关堆栈大小限制的更多信息。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="f8af" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">如何避免数组出现“超出最大调用堆栈大小”错误</h1><p id="0f8c" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">处理“超出最大调用堆栈大小”错误很容易。你所要做的就是避免使用扩展操作符或<code class="fe ls lt lu lv b">apply()</code>函数。例如，您可以迭代所有数组元素，并对每个元素调用<code class="fe ls lt lu lv b">push()</code>，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ba87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将根据需要填充<code class="fe ls lt lu lv b">array2</code>。</p><p id="179f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，JavaScript可以在几分之一秒内执行这个代码片段。因此，即使您正在执行500k次<code class="fe ls lt lu lv b">push()</code>操作，您也不必担心性能。</p><p id="7f5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在浏览器控制台中运行此代码片段，您将获得以下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/60dadbc4a20702f0d48985740c6990fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*Ict3JUD78mySeDfqveY_pg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Populating array2 successfully</figcaption></figure><p id="0e8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊！您将学习如何处理JavaScript数组中的“超出最大调用堆栈大小”错误。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="a236" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">结论</h1><p id="3649" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在本文中，您了解了什么是“超出最大调用堆栈大小”JavaScript错误，为什么会出现这种错误，以及如何避免这种错误。处理这个错误并不难，但前提是您知道它被触发的原因。在这里，您有机会了解关于这个错误的更多信息。</p><p id="4073" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！我希望这篇文章对你有所帮助。请随意留下任何问题、评论或建议。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="06c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ne">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ne">plain English . io</em></strong></a><em class="ne">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ne">免费周报</em> </strong> </a> <em class="ne">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ne">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ne">LinkedIn</em></strong></a><em class="ne"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ne">YouTube</em></strong></a><em class="ne"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ne">不和</em> </strong> </a> <em class="ne">。</em></p></div></div>    
</body>
</html>