<html>
<head>
<title>How to Use Sequelize (v6) ORM (Lambda With TypeScript)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用sequel ize(V6)ORM(Lambda With TypeScript)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-sequelize-v6-orm-lambda-with-typescript-2dfc56dee6a1?source=collection_archive---------2-----------------------#2022-08-12">https://javascript.plainenglish.io/how-to-use-sequelize-v6-orm-lambda-with-typescript-2dfc56dee6a1?source=collection_archive---------2-----------------------#2022-08-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4375" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">1.建立一个本地数据库。2.设置无服务器框架模板。3.设置序列模型和数据库连接。4.使用无服务器创建端点。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d454b9c2bb1b020fc2334a471f4e4e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J793XCawfQKxLHFtqvewtg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Lambda functions using Sequelize ORM with TypescriptS</figcaption></figure><h1 id="b6a5" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">什么是顺序化？</h1><p id="8449" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Sequelize是一个现代的TypeScript和Node.js ORM，用于Postgres、MySQL、MariaDB、SQLite、SQL Server等等。具有可靠的事务支持、关系、急切加载和延迟加载、读取复制等特性。</p><p id="1905" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">【https://sequelize.org/】来源:<a class="ae mp" href="https://sequelize.org/" rel="noopener ugc nofollow" target="_blank"><em class="mj"/></a></p><p id="6c73" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">Sequelize是一个用nodeJS编写的ORM，支持TypeScript。那么接下来的问题就是，ORM是什么？</p><h1 id="faa8" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">什么是ORM(对象关系映射)？</h1><p id="fe1e" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><strong class="lp ir"> <em class="mj">对象-关系映射</em></strong><em class="mj">(</em><strong class="lp ir"><em class="mj">ORM</em></strong><em class="mj">，</em><strong class="lp ir"><em class="mj">O/RM</em></strong><em class="mj">，以及</em> <strong class="lp ir"> <em class="mj"> O/R映射工具</em> </strong> <em class="mj">)中的</em> <a class="ae mp" href="https://en.wikipedia.org/wiki/Computer_science" rel="noopener ugc nofollow" target="_blank"> <em class="mj">计算机科学</em> </a> <em class="mj">是</em> <a class="ae mp" href="https://en.wikipedia.org/wiki/Computer_programming" rel="noopener ugc nofollow" target="_blank">这实际上创建了一个“虚拟的 </a><a class="ae mp" href="https://en.wikipedia.org/wiki/Object_database" rel="noopener ugc nofollow" target="_blank"> <em class="mj">对象数据库</em> </a> <em class="mj">”，可以在编程语言</em>中使用</p><p id="187d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><em class="mj">来源:</em> <a class="ae mp" href="https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping" rel="noopener ugc nofollow" target="_blank"> <em class="mj">维基</em> </a></p><p id="4413" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">基本上，这意味着ORM将允许您的应用程序以面向对象的方式与数据库交互。您可以使用OMR库定义表及其关系，然后与数据库表进行通信。</p><p id="772b" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">您的应用程序将能够根据对象与数据库进行交互，其中每个表将由一个模型类表示。这些类可以访问ORM库中的许多函数，这些函数将执行特定的数据库操作，如创建、读取、更新、删除等。</p><p id="159f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">作为一名应用程序开发人员，最好的一点是用自己选择的编程语言来完成所有这些工作(例如:Sequelize的Node.js)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/6170e5c9ce5c759bbf454eab60f5b0a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-AguY4aVQfZU7Jf0xUY4Rg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Object-relational mapping (ORM)</figcaption></figure><h1 id="f370" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">我们要实现什么？</h1><p id="1536" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在，让我们定义这篇文章的范围:</p><ul class=""><li id="3677" class="mr ms iq lp b lq mk lt ml lw mt ma mu me mv mi mw mx my mz bi translated">设置本地Postgres数据库</li><li id="80a3" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated">使用无服务器框架的TypeScript模板设置一个空项目</li><li id="f8dc" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated">安装Sequelize和其他相关的软件包</li><li id="33ec" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated">使用顺序化ORM定义以下模式</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/a9f065df4391bb4884509c2cff9cb1c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aE9dln9AQoSdI6o3QYR8GA.png"/></div></div></figure><ul class=""><li id="1b55" class="mr ms iq lp b lq mk lt ml lw mt ma mu me mv mi mw mx my mz bi translated">公开一些端点来对这3个模型/表执行CRUD操作</li></ul><h1 id="2f5d" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">1.建立本地数据库</h1><p id="e509" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">这很简单。你可以根据你的操作系统从这里下载相关的安装程序-<a class="ae mp" href="https://www.postgresql.org/download/" rel="noopener ugc nofollow" target="_blank">https://www.postgresql.org/download/</a></p><p id="8d1d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">如果你遇到困难，这段视频可以帮助你:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">How to install Postgres</figcaption></figure><p id="8f36" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">一旦你在本地安装了Postgres，它的服务器应该在端口5432上运行，你应该能够通过一个像<a class="ae mp" href="https://dbeaver.io/" rel="noopener ugc nofollow" target="_blank"> DBeaver </a>或<a class="ae mp" href="https://eggerapps.at/postico/" rel="noopener ugc nofollow" target="_blank"> Postico </a>这样的客户端连接到它。我在Mac上使用Postico，它的连接管理器看起来像这样(如果你有不同的设置，请更改用户&amp;密码)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/0282b0c4e7e6d88d887b6c85bf9f63c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vNuq6gp3U_LkyqRrqn1NBQ.png"/></div></div></figure><p id="c6b3" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">最后，创建一个新的数据库，并将其命名为<strong class="lp ir"> mytestdb。</strong>您还不需要创建任何表格。我们将使用Sequelize来为我们构建它。</p><h1 id="f48b" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">2.设置无服务器框架模板</h1><p id="03e4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们将使用<a class="ae mp" href="https://www.serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器框架</a>来编写我们的lambda函数。(如果你有兴趣更好地了解这个框架，那么我有另一篇关于如何充分利用它的文章<a class="ae mp" href="https://aws.plainenglish.io/5-tips-to-master-the-serverless-framework-1ecd97fc48d0" rel="noopener ugc nofollow" target="_blank">在这里</a>)。</p><p id="2736" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">全局安装无服务器:</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="e986" class="no kw iq nk b gy np nq l nr ns">npm install -g serverless</span></pre><p id="07b9" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">然后在您的机器上创建一个新文件夹，并使用终端导航到该文件夹。这里，我们将使用以下命令创建一个带有TypeScript的无服务器模板项目:</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="a520" class="no kw iq nk b gy np nq l nr ns">sls create --template aws-nodejs-typescript</span></pre><p id="ef8c" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">您将需要一些其他的包来构建这个API，所以请继续安装这些节点包:</p><ul class=""><li id="1f8a" class="mr ms iq lp b lq mk lt ml lw mt ma mu me mv mi mw mx my mz bi translated"><a class="ae mp" href="https://www.npmjs.com/package/pg" rel="noopener ugc nofollow" target="_blank">pg</a>(<a class="ae mp" href="https://www.npmjs.com/package/pg" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/pg</a>)</li><li id="6964" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated"><a class="ae mp" href="https://www.npmjs.com/package/serverless-offline" rel="noopener ugc nofollow" target="_blank">无服务器离线</a>(让你在本地运行lambda函数的插件)</li><li id="df9f" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated"><a class="ae mp" href="https://www.serverless.com/plugins/serverless-plugin-typescript" rel="noopener ugc nofollow" target="_blank">无服务器插件类型脚本</a>(支持零配置类型脚本的无服务器插件)</li></ul><h1 id="5add" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">3.设置序列模型和数据库连接</h1><p id="b677" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在这个阶段，如果您想直接进入代码，看看它看起来像什么，那么您可以从这里得到它:</p><div class="nt nu gp gr nv nw"><a href="https://github.com/metacollective9/sequelize-serverless-poc" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">GitHub -元集合9/sequelize-无服务器-poc</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">这个项目是使用aws-nodejs-typescript模板从无服务器框架中生成的。有关详细信息…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div></div></a></div><p id="9370" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">就文件夹结构而言，它是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/586f4f0842b94b01d02140c004773a0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFnNHkuuzPinwiaW804y1w.png"/></div></div></figure><p id="6dfa" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我所有的数据库模型和连接类都在<strong class="lp ir"> db </strong>文件夹中，而每个特定模型的所有API处理程序都在<strong class="lp ir"> functions </strong>文件夹中。</p><p id="23e4" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">首先，我们需要配置<code class="fe og oh oi nk b">serverless.yml</code>文件，我们将在其中添加本地主机的数据库连接细节，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div></figure><p id="ad84" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">现在，让我们按照上面的ERD图创建我们的模型。</p><p id="6704" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">第一个是Author，看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">author.ts</figcaption></figure><p id="6116" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><code class="fe og oh oi nk b">Author</code>类定义了<code class="fe og oh oi nk b">Sequelize</code>的模型，而<code class="fe og oh oi nk b">initAuthor</code>函数将接收一个<code class="fe og oh oi nk b">sequelize</code>对象，然后创建一个定义了数据类型的表。其中大部分是不言自明的，但是请注意像<code class="fe og oh oi nk b">paranoid</code>这样的属性被设置为<code class="fe og oh oi nk b">true</code>，这将添加3个基于时间戳的列<code class="fe og oh oi nk b">created_at, updated_at, deleted_at</code>，并且这些将基于您通过Sequelize执行的活动自动更新。</p><p id="03b9" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">与此类似，我们将添加一个这样的<code class="fe og oh oi nk b">Publisher</code>模型:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">publisher.ts</figcaption></figure><p id="2a87" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">最后是<code class="fe og oh oi nk b">book</code>表的模型:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">book.ts</figcaption></figure><p id="87df" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">注意在<code class="fe og oh oi nk b">Book</code>类中，我们有2个引用属性，<code class="fe og oh oi nk b">publisher_id</code> &amp; <code class="fe og oh oi nk b">Authors</code>。我们将在我们的<code class="fe og oh oi nk b">db</code>文件中这样设置这些引用:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">db.ts</figcaption></figure><p id="0d64" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><code class="fe og oh oi nk b">db</code>类的构造函数用我们在<code class="fe og oh oi nk b">serverless.yml</code>文件中设置的DB连接细节创建了一个新的<code class="fe og oh oi nk b">sequelize</code>对象。</p><p id="537f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><code class="fe og oh oi nk b">associate</code>功能将创建模型之间的关联。</p><p id="6422" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">如果你回头参考《ERD》，我们可以有一本由许多作者写的书(例如-<a class="ae mp" href="https://www.amazon.co.uk/Good-Omens-Neil-Gaiman/dp/0552171891" rel="noopener ugc nofollow" target="_blank">https://www . Amazon . co . uk/Good-Omens-Neil-Gaiman/DP/0552171891</a>)。这将需要一个包含图书作者参考的连接表。我们通过使用<code class="fe og oh oi nk b">belongsToMany</code>关联将我们的<code class="fe og oh oi nk b">book</code>模型与<code class="fe og oh oi nk b">author</code>模型相关联来实现这一点。使用这个关联<code class="fe og oh oi nk b">Sequelize</code>将生成如下表格:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/e4aafa1852f434171890847cebe634c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-8rczKiOOqhjRLLpzdDyQ.png"/></div></div></figure><p id="f1dd" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">然后我们有一个从<code class="fe og oh oi nk b">books</code>表到<code class="fe og oh oi nk b">publisher</code>表的<code class="fe og oh oi nk b">foreign key</code>关联。这是通过使用<code class="fe og oh oi nk b">belongsTo</code>关联实现的。注意,<code class="fe og oh oi nk b">foreignKey</code>属性的名称将是数据库表中的列名。像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/f966a48ed26ff90d8246903c7810969d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ExgSCGUEP0NmxwwObO2Xwg.png"/></div></div></figure><p id="e819" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">类似于<code class="fe og oh oi nk b">book</code>表，设置<code class="fe og oh oi nk b">author</code>表和发布者表与<code class="fe og oh oi nk b">book</code>表的关联。这将允许您使用<code class="fe og oh oi nk b">sequelize</code>直接从关联的表中获取数据。</p><p id="65a5" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">最后，我们为每个模型调用<code class="fe og oh oi nk b">seed</code>函数。这只会在表为空时将数据填充到表中。</p><p id="bb6c" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">注意，<code class="fe og oh oi nk b">db</code>对象是如何被传递的，然后使用<code class="fe og oh oi nk b">sequelize</code>的<code class="fe og oh oi nk b">bulkCreate</code>函数(ORM的助手函数):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Seeding of a table</figcaption></figure><h1 id="7771" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">4.使用无服务器创建端点</h1><p id="3ad4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们现在已经完成了模型和数据库连接的设置。让我们创建一些端点来访问这些表。</p><p id="fa66" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在您的<code class="fe og oh oi nk b">serverless.yml</code>文件中，您可以像这样声明您的函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div></figure><p id="b350" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">这些端点是我们到目前为止构建的3个模型/表的REST API端点。</p><p id="174d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在每个端点的<code class="fe og oh oi nk b">handlers</code>中，我们将拥有使这些API工作的逻辑。</p><p id="d153" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我现在不打算逐一介绍它们(您可以在<a class="ae mp" href="https://github.com/metacollective9/sequelize-serverless-poc" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上查看完整的实现)，但是这里有一个示例，说明如何使用<code class="fe og oh oi nk b">sequelize</code>来获取数据，包括来自相关表的数据:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div></figure><p id="63e8" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">请注意如何使用<code class="fe og oh oi nk b">DB</code>对象从<code class="fe og oh oi nk b">book</code>表中获取数据，以及如何使用<code class="fe og oh oi nk b">findAll</code>函数从该表中获取所有数据，包括来自<code class="fe og oh oi nk b">publisher</code> &amp; <code class="fe og oh oi nk b">author</code>表的相关数据。</p><p id="64a4" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">当我调用该端点时，得到的响应是JSON格式的数据，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">response.json</figcaption></figure><p id="60bc" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">如你所见<code class="fe og oh oi nk b">sequelize</code>是一个非常强大的ORM库。它有大量的特性和实用方法，可以使使用数据库变得非常容易。我强烈推荐在这里浏览他们的文档:</p><div class="nt nu gp gr nv nw"><a href="https://sequelize.org/docs/v6/getting-started/" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">开始|序列</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">在本教程中，你将学习制作一个简单的序列设置。Sequelize可通过npm(或yarn)获得。你会…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">sequelize.org</p></div></div></div></a></div><p id="929c" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">从这里查看工作示例:</p><div class="nt nu gp gr nv nw"><a href="https://github.com/metacollective9/sequelize-serverless-poc" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">GitHub -元集合9/sequelize-无服务器-poc</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">这个项目是使用aws-nodejs-typescript模板从无服务器框架中生成的。有关详细信息…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div></div></a></div><p id="95be" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">并运行<code class="fe og oh oi nk b">npm install &amp;&amp; sls offline</code>在本地运行&amp;测试这些API。</p></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><p id="1216" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">感谢您的阅读，如果您想支持我，请关注我，成为会员，支持我们这个平台上的所有人。</p><div class="nt nu gp gr nv nw"><a href="https://medium.com/@metacollective/membership" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">通过我的推荐链接加入媒体Meta Collective</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy kp nw"/></div></div></a></div></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><p id="9244" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><em class="mj">更多内容看</em> <a class="ae mp" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mj">说白了。报名参加我们的</em> <a class="ae mp" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mj">免费周报</em> </strong> </a> <em class="mj">。关注我们关于</em> <a class="ae mp" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mj">推特</em> </strong> </a>，<a class="ae mp" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lp ir"><em class="mj">LinkedIn</em></strong></a><em class="mj">，以及</em> <a class="ae mp" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mj">不和</em> </strong> </a> <em class="mj">。</em></strong></a></p></div></div>    
</body>
</html>