<html>
<head>
<title>TypeScript Generics Explained in 2 Minutes with Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用2分钟的时间用例子解释了类型脚本泛型</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-generics-explained-in-2-minutes-c95e49783347?source=collection_archive---------6-----------------------#2022-01-23">https://javascript.plainenglish.io/typescript-generics-explained-in-2-minutes-c95e49783347?source=collection_archive---------6-----------------------#2022-01-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2c8a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">深入探究类型脚本泛型</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9454c2598a5453234177f4a92a8d17d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WGOSmHZCuAGWVLRITKe2yA.png"/></div></div></figure><p id="ad0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TypeScript是强大的，它可以使您的代码更加稳定、易读、易于重构等等。</p><p id="3fdb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TypeScript包含<strong class="kt ir"> <em class="ln">泛型</em> </strong>，这在想要编写干净的可重用代码时非常有用。<strong class="kt ir"> <em class="ln">泛型</em> </strong>为开发人员提供了一种创建可重用代码的方式，它的工作方式使得组件可以与任何数据类型一起工作，而不局限于单一数据类型。</p><p id="9b96" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">鉴于您已经阅读了这篇文章，我希望您已经了解了TypeScript的基础知识，并且希望了解更多关于TypeScript中的<strong class="kt ir"> <em class="ln">泛型</em> </strong>的知识，所以我不会深入解释TypeScript本身。</p><p id="6e4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">考虑以下代码:</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="7bf7" class="lt lu iq lp b gy lv lw l lx ly">let courses = [];</span><span id="a6f4" class="lt lu iq lp b gy lz lw l lx ly">const fetchCourseTemplates = async () =&gt; {<br/>  isLoading = true;<br/>  const companyId = '123';<br/>  try {<br/>    courses = await getAllDocuments(`course_templates/${companyId}/templates`);<br/>    isLoading = false;<br/>  } catch (e) {<br/>    isLoading = false;<br/>    throw new <strong class="lp ir"><em class="ln">Error</em></strong>('Cant load templates: ' + e);<br/>  }<br/>};</span></pre><p id="de5a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们调用的函数将如下所示:</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="9fb7" class="lt lu iq lp b gy lv lw l lx ly">// Our reuseable function to get data<br/>export const getAllDocuments = async (collectionName: string) =&gt; {<br/>  const documents = [];<br/>  const querySnapshot = await getDocs(collection(db, collectionName));<br/>  querySnapshot.forEach((doc) =&gt; {<br/>    const data = doc.data();<br/>    documents.push({<br/>      id: doc.id,<br/>      ...data<br/>    });<br/>  });<br/><br/>  return documents;<br/>};</span></pre><p id="bf4d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的代码中，您从一个API获取一些数据，并传递一个关于在哪里获取数据的参数(在本例中，是对Firebase中一个集合的引用)。从函数传回的数据存储在一个变量中。一切都好，对吧？</p><p id="57e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不完全是。你看，如果你有一个可重用的函数从集合中获取数据，你永远不知道你实际上得到的是哪种类型的数据。你现在可能知道了，但TypeScript不知道。</p><p id="bb19" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设您正在使用这个函数从Firebase的不同地方检索各种不同的文档，您得到的数据很可能会不时地有所不同。那么我们如何让TypeScript开心呢？</p><h1 id="d044" class="ma lu iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">介绍泛型</h1><p id="4200" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">在这种情况下，泛型将帮助您。您可以扩展该函数以使用泛型，并且在调用该函数时，您可以指定正在处理的数据类型。这样会让TypeScript看得懂。</p><p id="7061" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看上面的代码，看看使用泛型会是什么样子。</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="b4e0" class="lt lu iq lp b gy lv lw l lx ly">let courses: Course[] = [];</span><span id="7eee" class="lt lu iq lp b gy lz lw l lx ly">const fetchCourseTemplates = async () =&gt; {<br/>  isLoading = true;<br/>  const companyId = '123';<br/>  try {<br/>    courses = await getAllDocuments&lt;Course&gt;(`course_templates/${companyId}/templates`);<br/>    isLoading = false;<br/>  } catch (e) {<br/>    isLoading = false;<br/>    throw new <strong class="lp ir"><em class="ln">Error</em></strong>('Cant load templates: ' + e);<br/>  }<br/>};</span></pre><p id="c70b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里的主要区别在于等待。你可能会注意到<course>。这基本上就是我向函数传递一个类型，告诉TypeScript函数应该处理什么数据。让我们看看下一个函数</course></p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="a6cc" class="lt lu iq lp b gy lv lw l lx ly">// Our reuseable function to get data<br/>export const getAllDocuments = async &lt;T&gt;(collectionName: string) =&gt; {<br/>  const documents: T[] = [];<br/>  const querySnapshot = await getDocs(collection(db, collectionName));<br/>  querySnapshot.forEach((doc) =&gt; {<br/>    const data = doc.data();<br/>    documents.push({<br/>      ...data<br/>    } as T);<br/>  });<br/><br/>  return documents;<br/>};</span></pre><p id="6318" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意async关键字后，我做<strong class="kt ir"> <em class="ln"> &lt; T &gt; </em> </strong>。这是我把调用函数的类型取回来。再往下，你会看到我创建的数组应该是我传递的类型(我们通过了<strong class="kt ir">课程</strong>)。当我们返回时，TypeScript现在知道我正在返回我提供的任何类型。在我们的例子中，它将返回一个课程数组，因为我们在<strong class="kt ir"><em class="ln">fetchcoursetypes</em></strong>函数中将课程作为我们的类型传递。</p><p id="34d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">差不多结束了！我希望你理解了以上内容。当然，除了我刚才展示的，还有更多关于泛型的东西和用例，但希望它能给你一个基本的理解，你能明白它为什么强大。</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="5f1b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="ln">如果你想找个时间和我聊聊，请关注我的</em></strong><a class="ae nd" href="https://twitter.com/nickycdk" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln">Twitter</em></strong></a><strong class="kt ir"><em class="ln">|</em></strong><a class="ae nd" href="https://www.linkedin.com/in/dknickychristensen/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln">LinkedIn</em></strong></a><strong class="kt ir"><em class="ln">或者直接访问我的</em> </strong> <a class="ae nd" href="https://nickychristensen.dk/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ln">网站</em> </strong> </a> <strong class="kt ir"> <em class="ln">(丹麦文)<em class="ln"/></em></strong></p><p id="e382" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">更多内容请看</em><a class="ae nd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln">plain English . io</em></strong></a><em class="ln">。报名参加我们的</em> <a class="ae nd" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ln">免费每周简讯</em> </strong> </a> <em class="ln">。在我们的</em> <a class="ae nd" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ln">社区不和谐</em> </strong> </a> <em class="ln">中获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>