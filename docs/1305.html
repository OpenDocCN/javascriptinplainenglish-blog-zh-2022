<html>
<head>
<title>How to Embed YouTube Links with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript嵌入YouTube链接</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/embedding-youtube-links-with-javascript-1f55f260afff?source=collection_archive---------8-----------------------#2022-03-15">https://javascript.plainenglish.io/embedding-youtube-links-with-javascript-1f55f260afff?source=collection_archive---------8-----------------------#2022-03-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4e3e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">用JavaScript嵌入YouTube链接的教程。</h2></div><p id="b8d3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我儿子喜欢动物。对于我在熨斗学校软件工程项目中的第一个编码项目，我想为他制作一个在线动物园应用程序，在那里他可以看到他最喜欢的动物，并了解新的动物。当然，如果没有视频，这个应用就不完整。但是我只是在课堂上看到过这种情况，并没有亲自编写过代码。</p><p id="30d3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在HTML文件中，我只创建了两个容器。一个是动物列表的侧边栏。第二个将显示关于单个动物的信息。我会在Javascript文件中动态呈现这些容器的实际HTML内容。</p><p id="97c1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在侧边栏中有了动物列表后，我创建了一个事件监听器，显示被点击动物的名称、图片、事实、活动和视频。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/cad74208348cbf3710aa8f5d4ff62f43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hsWDcLIzRE56-7Osby9A1w.png"/></div></div></figure><p id="118e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">前四个元素很容易编写，但是我怎么才能将YouTube视频嵌入到与图片相同大小的框架中呢？</p><p id="a7aa" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">用一个<iframe>标签，我在DOM上为它创建了一个位置。</iframe></p><pre class="kz la lb lc gt lk ll lm ln aw lo bi"><span id="d47e" class="lp lq in ll b gy lr ls l lt lu">mainContainer.innerHTML = `    <br/>&lt;h1 class="name"&gt;&lt;strong&gt;${<strong class="ll io">foundAnimal.name</strong>}&lt;/strong&gt; &lt;/h1&gt;    <br/>&lt;img class="image-container" src="${<strong class="ll io">foundAnimal.image</strong>}"/&gt;    <br/>&lt;h3 class="fact"&gt;&lt;strong&gt;Fun Fact&lt;/strong&gt;: ${<strong class="ll io">foundAnimal.fact</strong>}&lt;/h3&gt;    &lt;h3 class="activity"&gt;Activity:${<strong class="ll io">foundAnimal.activity</strong>}&lt;/h3&gt;    <br/><strong class="ll io">&lt;iframe id="player" class="inset-0 w-full h-full" frameborder="0" &gt;&lt;/iframe&gt; </strong>   <br/>`;</span></pre><p id="c997" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">与其他HTML元素不同，我不能使用foundAnimal变量来插入视频链接。此变量使用。从JSON服务器获取的动物数组上的find方法，用于在单击时查找关于特定动物的数据。</p><pre class="kz la lb lc gt lk ll lm ln aw lo bi"><span id="31c8" class="lp lq in ll b gy lr ls l lt lu">document.addEventListener("click", (e) =&gt; {  <br/>if (e.target.className === "animal-clicker") {    <br/>const <strong class="ll io">foundAnimal</strong> = animalsArray.<strong class="ll io">find</strong>(      <br/>(animal) =&gt; animal.id === parseInt(e.target.id));    renderMainContainerDetails(foundAnimal);  }<br/>});</span></pre><p id="fd0b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用iframe元素的另一个挑战是，因为我是用JavaScript呈现mainContainer细节的，所以我不能用简单的document.querySelector通过ID来获取iframe。node-getter本质上是一个作为函数编写的全局变量querySelector。</p><pre class="kz la lb lc gt lk ll lm ln aw lo bi"><span id="56d0" class="lp lq in ll b gy lr ls l lt lu">const mainContainer = document.querySelector(".animal-container");<br/><strong class="ll io">const videoPlayer = () =&gt; document.querySelector("#player");</strong></span></pre><p id="72f4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">换句话说，“。“animal-container”在页面加载时已经是一个DOM元素，而“#player”则不是由于它的动态渲染。</p><p id="75d7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦有了节点获取函数，我就可以简单地调用renderMainContainerDetails函数中的videoPlayer函数。然后，我可以使用foundAnimal变量将视频链接插入到后面提取视频ID的函数中。(记住，因为videoPlayer是一个函数，所以调用时我需要括号)。</p><pre class="kz la lb lc gt lk ll lm ln aw lo bi"><span id="309c" class="lp lq in ll b gy lr ls l lt lu">function renderMainContainerDetails(foundAnimal) {  mainContainer.innerHTML = `    <br/>&lt;h1 class="name"&gt;&lt;strong&gt;${foundAnimal.name}&lt;/strong&gt; &lt;/h1&gt;    &lt;img class="image-container" src="${foundAnimal.image}"/&gt;    &lt;h3 class="fact"&gt;&lt;strong&gt;Fun Fact&lt;/strong&gt;: ${foundAnimal.fact}&lt;/h3&gt;    &lt;h3 class="activity"&gt;Activity: ${foundAnimal.activity}&lt;/h3&gt;    &lt;iframe id="player" class="inset-0 w-full h-full" frameborder="0" &gt;&lt;/iframe&gt;    `;  <br/><strong class="ll io">videoPlayer().src = `https://www.youtube.com/embed/${extractVideoID(    foundAnimal.video)}`;</strong><br/>}</span></pre><p id="6244" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们来分解一下:videoPlayer()通过ID调用iframe。我用“，”指定来源。src”，然后通过调用extractVideoID函数插入YouTube地址，该函数将来自JSON服务器的视频链接作为其参数。</p><p id="19ed" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在下一段代码看起来像魔术一样。我自己用我高超的谷歌搜索能力找到了这个。本质上，它接受提供的URL并将其转换成正则表达式。(如果你必须像我一样了解所有细节，YouTube会为其视频分配一个11个字符的ID，它出现在匹配数组的索引7处)。</p><pre class="kz la lb lc gt lk ll lm ln aw lo bi"><span id="22be" class="lp lq in ll b gy lr ls l lt lu">function extractVideoID(url) {  <br/>var regExp =    /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&amp;\?]*).*/;  <br/>var match = url.match(regExp);  <br/>if (match &amp;&amp; match[7].length == 11) {    <br/>return match[7];  <br/>} else {    <br/>alert("Could not extract video ID.");}<br/>}</span></pre><p id="d18c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">瞧啊。现在，为了将iframe居中并使其大小与上图相同，我必须添加额外的CSS规范。</p><pre class="kz la lb lc gt lk ll lm ln aw lo bi"><span id="9d37" class="lp lq in ll b gy lr ls l lt lu">#player {  <br/>width: 400px;  <br/>height: 400px;  <br/>background-size: cover;  <br/>margin-left: auto;  <br/>margin-right: auto;  <br/>display: block;  <br/>width: 50%;  <br/>padding-top: 1cm;  <br/>padding-bottom: 1cm;<br/>}</span></pre><p id="0f4f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在做这个项目之前，我认为在其他网站上看到视频没什么。我现在已经对各种功能和文件之间如何通信有了深入的了解。为了重申这个特性的复杂性，最后看一下renderMainContainerDetails函数的最后一行:</p><pre class="kz la lb lc gt lk ll lm ln aw lo bi"><span id="f083" class="lp lq in ll b gy lr ls l lt lu"><strong class="ll io">videoPlayer().src = `https://www.youtube.com/embed/${extractVideoID(    foundAnimal.video)}`</strong></span></pre><p id="c99f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个videoPlayer函数调用指定了要插入到iframe HTML元素中的源，要求JavaScript插入HTTP地址，其中调用了extractVideoID函数，并使用之前定义的foundAnimal变量从JSON服务器传递了一个视频链接。</p><p id="daed" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果“合成”意味着将不同实体的组成元素组合成一个统一的有机体，那么最后一行就是教科书上的例子。保持惊讶，你们所有人。</p><p id="2c40" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢您的阅读。</p><p id="a01d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lv">更多内容请看</em><a class="ae lw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="lv">plain English . io</em></strong></a><em class="lv">。报名参加我们的</em> <a class="ae lw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="lv">免费周报</em> </strong> </a> <em class="lv">。关注我们关于</em><a class="ae lw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="lv">Twitter</em></strong></a><em class="lv">和</em><strong class="ke io"><em class="lv"/></strong><a class="ae lw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="lv">LinkedIn</em></strong></a><em class="lv">。加入我们的</em> <a class="ae lw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="lv">社区</em> </strong> </a> <em class="lv">。</em></p></div></div>    
</body>
</html>