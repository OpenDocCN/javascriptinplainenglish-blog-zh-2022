<html>
<head>
<title>How to Write a TypeScript Module for Fetch Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Fetch请求编写TypeScript模块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-write-a-typescript-module-for-fetch-requests-deecc9742a63?source=collection_archive---------7-----------------------#2022-07-14">https://javascript.plainenglish.io/how-to-write-a-typescript-module-for-fetch-requests-deecc9742a63?source=collection_archive---------7-----------------------#2022-07-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d323" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">编写模块化和可重用的API调用</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/f177f7de1aecf2691d36bbe2fd2fcfdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2qMWbk4SrJ__iSgZ5ANEA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@pathum_danthanarayana?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Pathum Danthanarayana</a> on <a class="ae ks" href="https://unsplash.com/s/photos/elegance?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3f99" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最近我一直在重构很多代码，从JavaScript到TypeScript。在这样做的时候，我还试图使它更加模块化，并更清晰地注入依赖关系。我认为这是一种更优雅的设计模式…</p><p id="5cd9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，频繁地向一些不同的API发出大量的获取请求，我最终为此编写了非常相似的TypeScript模块。我发现这是一个非常有用的方法。我在网上见过很多这样做的方法，但我个人觉得这种方法更简单明了，所以我想在这里分享一下:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div></figure><p id="3df9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我喜欢这种方法的一点是，编写一堆调用相同API的方法变得非常容易，就像您在第24–32行看到的那样。</p><p id="c6fa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在其他地方以类似的模式重用这段代码也很容易，因为您在第35行非常清楚地注入了基本URL依赖。</p><p id="46d4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后但同样重要的是，我发现在编写测试时采用这种方法真的很有帮助。像这样用不同的方法在一个模块中非常清楚地定义所有的东西，使得模仿这个文件中的方法变得非常容易，而不需要做更多的全局或复杂的模仿。这使得测试变得更加有趣。</p><p id="6027" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后但并非最不重要的一点是，用这种方式保持一切异步非常容易，而且当您导入方法而不是编写和重复大量提取逻辑时，代码看起来更整洁。</p><p id="7b32" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">例如，要使用<code class="fe lr ls lt lu b">getPosts</code>方法，您可以只写:</p><pre class="kd ke kf kg gt lv lu lw lx aw ly bi"><span id="1b94" class="lz ma in lu b gy mb mc l md me">import makeRequests from "./fetchutils/fetch";</span><span id="2198" class="lz ma in lu b gy mf mc l md me">const results = await makeRequests.getPosts();</span><span id="eeab" class="lz ma in lu b gy mf mc l md me">console.log(results);</span></pre><p id="be0b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就对了。简单的东西，但如果你像我一样最终重构一个大的旧JavaScript代码库，希望会有帮助。</p><p id="35aa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mg">更多内容尽在</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mg">说白了. io </em> </strong> </a> <em class="mg">。报名参加我们的</em><strong class="kv io"><em class="mg"/></strong><a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mg">免费周报</em> </strong> </a> <em class="mg">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mg">Twitter</em></strong></a><strong class="kv io"><em class="mg"/></strong><em class="mg">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mg">LinkedIn</em></strong></a><em class="mg">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mg">社区不和谐</em> </strong> </a> <em class="mg">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mg">人才集体</em> </strong> </a> <em class="mg">。</em></p></div></div>    
</body>
</html>