<html>
<head>
<title>Toggle Color Mode with Chakra UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用脉轮用户界面切换颜色模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/toggle-color-mode-with-chakra-ui-187c275bc428?source=collection_archive---------13-----------------------#2022-02-01">https://javascript.plainenglish.io/toggle-color-mode-with-chakra-ui-187c275bc428?source=collection_archive---------13-----------------------#2022-02-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="722d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何切换查克拉用户界面的颜色模式。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/01cc0a0c86eb0d49c8f6ce59b59270aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m3DBjPL-z9OzWpm2"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@ramone?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Stainless Images</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d905" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最近我刚刚完成了一个来自<a class="ae ks" href="https://www.frontendmentor.io/home" rel="noopener ugc nofollow" target="_blank"> frontendmentor.io </a>的挑战，它是关于在主页上显示一些来自API的数据，并且只需要一个又一个页面就可以到达每个项目的细节，非常简单。但我的注意力被吸引到一个要求，它需要能够切换颜色模式，在黑暗，明亮的模式。我觉得受到了挑战。</p><p id="1df6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">毫无疑问，我直接下载启动项目。我还决定用<code class="fe lp lq lr ls b">create-create-app</code>模板做挑战和查克拉UI作为它的UI库。我现在真的很喜欢Chakra，因为它是基于组件的(更多内容见这里的<a class="ae ks" href="https://medium.com/p/4e1158126b0c" rel="noopener"/>)。</p><p id="7f91" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以下是我学到的快速切换颜色开关的方法。</p><h1 id="ff97" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">1.把你的组件包在里面<code class="fe lp lq lr ls b">ChakraProvider</code></h1><pre class="kd ke kf kg gt ml ls mm mn aw mo bi"><span id="e2db" class="mp lu in ls b gy mq mr l ms mt">function App() {</span><span id="85f3" class="mp lu in ls b gy mu mr l ms mt">return (</span><span id="4821" class="mp lu in ls b gy mu mr l ms mt">&lt;ChakraProvider&gt;</span><span id="6ad2" class="mp lu in ls b gy mu mr l ms mt">  &lt;Header /&gt;</span><span id="93b2" class="mp lu in ls b gy mu mr l ms mt">    &lt;Routes&gt;</span><span id="5896" class="mp lu in ls b gy mu mr l ms mt">      &lt;Route exact path='/' element={&lt;Home /&gt;} /&gt;</span><span id="d59d" class="mp lu in ls b gy mu mr l ms mt">      &lt;Route path='/country/:name' element={&lt;Country /&gt;} /&gt;</span><span id="e380" class="mp lu in ls b gy mu mr l ms mt">    &lt;/Routes&gt;</span><span id="7516" class="mp lu in ls b gy mu mr l ms mt"> &lt;/ChakraProvider&gt;</span><span id="2159" class="mp lu in ls b gy mu mr l ms mt">);</span><span id="30e3" class="mp lu in ls b gy mu mr l ms mt">}</span></pre><h1 id="c65c" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">2.在根目录下创建theme.js</h1><p id="884c" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated"><em class="na"> //theme.js </em></p><pre class="kd ke kf kg gt ml ls mm mn aw mo bi"><span id="b401" class="mp lu in ls b gy mq mr l ms mt">//background color<br/>export const darkBg = 'hsl(207, 26%, 17%)'<br/>export const lightBg = 'hsl(0, 0%, 98%)'</span><span id="2ca5" class="mp lu in ls b gy mu mr l ms mt">//element color<br/>export const darkElement = 'hsl(209, 23%, 22%)'<br/>export const lightElement = 'hsl(0, 0%, 100%)'</span><span id="7dff" class="mp lu in ls b gy mu mr l ms mt">//text color<br/>export const lightModeText = 'hsl(200, 15%, 8%)'<br/>export const darkModeText = 'hsl(0, 0%, 100%)'</span></pre><p id="f4e0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我还导出所有恒定颜色的原因是，我想用它来与当前颜色状态进行比较，我们将在稍后讨论它。还是在<code class="fe lp lq lr ls b">theme.js</code>文件中，我定义了一些颜色，以便以后更容易访问。然后我声明了一个函数来改变颜色，如下所示:</p><pre class="kd ke kf kg gt ml ls mm mn aw mo bi"><span id="405e" class="mp lu in ls b gy mq mr l ms mt">import { useColorModeValue } from '@chakra-ui/react'</span><span id="238e" class="mp lu in ls b gy mu mr l ms mt">export const CentralTheme = () =&gt; {<br/>  let elementColor = useColorModeValue(lightElement, darkElement)<br/>  let bgColor = useColorModeValue(lightBg, darkBg)<br/>  let textColor = useColorModeValue(lightModeText, darkModeText)<br/>  return {<br/>    elementColor, bgColor, textColor<br/>  }<br/>}</span></pre><p id="f8f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在那里，我使用Chakra提供的<code class="fe lp lq lr ls b">useColorModeValue</code>钩子，并将它赋给一个变量，这样我就可以很容易地在另一个组件中访问它。像<code class="fe lp lq lr ls b">elementColor</code>这样的变量将保存当前的颜色值。这是关键语法(更多来自<a class="ae ks" href="https://chakra-ui.com/docs/features/color-mode#usecolormodevalue" rel="noopener ugc nofollow" target="_blank">文档</a>):</p><pre class="kd ke kf kg gt ml ls mm mn aw mo bi"><span id="ca00" class="mp lu in ls b gy mq mr l ms mt">// Here's the signature <br/>const value = useColorModeValue(lightModeValue, darkModeValue)</span></pre><h1 id="9add" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">3.从另一个组件访问功能</h1><p id="54f6" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">例如，在我的header组件中，我使用了来自<code class="fe lp lq lr ls b">theme.js</code>的<code class="fe lp lq lr ls b">CentralTheme()</code>函数的颜色，因此它可以根据当前的颜色模式改变方向。</p><p id="3167" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="na"> //header.js </em></p><pre class="kd ke kf kg gt ml ls mm mn aw mo bi"><span id="071b" class="mp lu in ls b gy mq mr l ms mt">import { Flex, Box, useColorMode } from "@chakra-ui/react";<br/>import { CentralTheme, lightBg } from "../theme";</span><span id="79f6" class="mp lu in ls b gy mu mr l ms mt">const Header = () =&gt; {<br/>  const { toggleColorMode } = useColorMode()</span><span id="b641" class="mp lu in ls b gy mu mr l ms mt"> return(<br/>    &lt;Flex bg={CentralTheme().bgColor} color={CentralTheme().textColor}&gt;<br/>      &lt;Flex onClick={toggleColorMode} &gt;<br/>      {<br/>        CentralTheme().bgColor === lightBg ?<br/>          'Light Mode'<br/>        :<br/>          'Dark Mode'<br/>      }<br/>      &lt;/Flex&gt;<br/>    &lt;/Flex&gt;<br/>  )<br/>}</span></pre><p id="8435" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在那里，我导入<code class="fe lp lq lr ls b">useColorMode</code>并通过析构它得到<code class="fe lp lq lr ls b">toggleColorMode</code>。这个<code class="fe lp lq lr ls b">toggleColorMode</code>用来改变颜色模式，并放入onClick事件中。</p><p id="c6f7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我还通过调用<code class="fe lp lq lr ls b">bg </code>和<code class="fe lp lq lr ls b">color </code>道具内部的<code class="fe lp lq lr ls b">CentralTheme()</code>函数来访问当前的背景和文字颜色，得到我想要的值。</p><p id="1556" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我还将当前颜色与从<code class="fe lp lq lr ls b">theme.js</code>导出的恒定颜色进行比较，以决定显示哪个文本。最后，每当您单击组件时，组件将改变其颜色。</p><p id="f23e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其余部分是相同的，将其应用于另一个组件。这就是我今天从脉轮中学到的一切，祝你愉快！</p><p id="18a4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="na">更内容于</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="na">浅显易懂的英语中</em> </strong> </a> <em class="na">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="na">免费周报</em> </strong> </a> <em class="na">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="na">社群不和</em> </strong> </a> <em class="na">中获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>