<html>
<head>
<title>Create a Live Twitter Profile Banner to Show Followers Counter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åˆ›å»ºä¸€ä¸ªå®æ—¶Twitterä¸ªäººèµ„æ–™æ¨ªå¹…ï¼Œä»¥æ˜¾ç¤ºå…³æ³¨è€…è®¡æ•°å™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/create-a-live-twitter-profile-banner-to-show-followers-counter-86984a45e560?source=collection_archive---------21-----------------------#2022-01-31">https://javascript.plainenglish.io/create-a-live-twitter-profile-banner-to-show-followers-counter-86984a45e560?source=collection_archive---------21-----------------------#2022-01-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9a1f" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ç”¨å¼€å‘äººå‘˜è¿½éšè€…å’ŒYouTubeè®¢æˆ·è‡ªåŠ¨æ›´æ–°æ‚¨çš„Twitteræ¨ªå¹…</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/14be9e3431bae22603b5cb2c912c41b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F8UcxxGefkM4vzJ2GpZ1Dw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Twitter Header</figcaption></figure><p id="2030" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">åœ¨æœ¬ç³»åˆ—çš„<a class="ae lo" rel="noopener ugc nofollow" target="_blank" href="/automatically-tweet-popular-articles-from-dev-46da29c7a20c">å‰ä¸€éƒ¨åˆ†</a>ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•è‡ªåŠ¨å‘å¸ƒä½ çš„çƒ­é—¨æ–‡ç« ã€‚</p><div class="lp lq gp gr lr ls"><a rel="noopener  ugc nofollow" target="_blank" href="/automatically-tweet-popular-articles-from-dev-46da29c7a20c"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd io gy z fp lx fr fs ly fu fw im bi translated">ä»DEVè‡ªåŠ¨å‘å¸ƒçƒ­é—¨æ–‡ç« </h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">å¼€æºå·¥å…·ï¼Œè‡ªåŠ¨å‘å¸ƒä½ çš„çƒ­é—¨æ–‡ç« </h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mb l"><div class="mc l md me mf mb mg km ls"/></div></div></a></div><p id="1904" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ç°åœ¨ä½œä¸ºå¤§å¤šæ•°å¼€å‘è€…ï¼Œæˆ‘å¹¶æ²¡æœ‰å°±æ­¤æ­¢æ­¥ï¼Œlolã€‚æˆ‘æ›´è¿›ä¸€æ­¥ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œç”¨æˆ‘åœ¨<a class="ae lo" href="https://dev.to/anshuman_bhardwaj" rel="noopener ugc nofollow" target="_blank"> DEV </a>ã€<a class="ae lo" href="https://anshuman-bhardwaj.medium.com" rel="noopener"> Medium </a>å’Œ<a class="ae lo" href="https://www.youtube.com/channel/UC9-rIQbbBVxJyTIWPdhK4YA" rel="noopener ugc nofollow" target="_blank"> YouTube </a>çš„ç²‰ä¸æ•°è‡ªåŠ¨æ›´æ–°æˆ‘çš„Twitteræ¨ªå¹…ã€‚</p><p id="ee8c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ç›¸ä¿¡æˆ‘ï¼Œè¿™æ¯”æˆ‘ä»¬æƒ³è±¡çš„è¦ç®€å•å¾—å¤šï¼Œæ˜¯å—ï¼Ÿ</p><p id="1075" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">è®©æˆ‘ä»¬æ‰¾å‡ºç­”æ¡ˆã€‚</p><h1 id="7493" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">æ•…éšœ</h1><ol class=""><li id="49bc" class="mz na in ku b kv nb ky nc lb nd lf ne lj nf ln ng nh ni nj bi translated">ç”¨å ä½ç¬¦åˆ›å»ºä¸€ä¸ªæ—¶é«¦çš„Twitteræ¨ªå¹…å›¾åƒ</li><li id="57ec" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln ng nh ni nj bi translated">é˜…è¯»æ¥è‡ªDEVã€Mediumå’ŒYouTubeçš„å…³æ³¨è€…</li><li id="79fa" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln ng nh ni nj bi translated">ä½¿ç”¨Twitter APIæ›´æ–°æ¨ªå¹…</li><li id="1d77" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln ng nh ni nj bi translated">æ¯éš”ä¸€æ®µæ—¶é—´åšä¸€æ¬¡</li></ol><h1 id="4ef2" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">åˆ›å»ºå›¾åƒæ¨¡æ¿</h1><p id="44d5" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb np ld le lf nq lh li lj nr ll lm ln ig bi translated">å¼€å§‹çš„ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œç¨åæˆ‘ä»¬å¯ä»¥ç”¨å®æ—¶æ•°æ®å¡«å……å®ƒã€‚</p><p id="e49a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æˆ‘æ€»æ˜¯ä½¿ç”¨Canvaä¸ºTwitterå’ŒYouTubeåˆ›å»ºå›¾ç‰‡ã€‚æ‰€ä»¥ï¼Œæˆ‘å»äº†é‚£é‡Œï¼Œç”¨ä»–ä»¬çš„Twitteræ¨ªå¹…æ¨¡æ¿ä¸ºè‡ªå·±åˆ›å»ºäº†ä¸€ä¸ªã€‚</p><p id="17bb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æˆ‘æ·»åŠ äº†æ‰€æœ‰ä¸‰ä¸ªå¸æˆ·çš„ç”¨æˆ·åï¼Œå¹¶ç•™ä¸‹ä¸€äº›ç©ºé—´æ¥å¡«å……å®æ—¶è®¡æ•°å™¨å€¼ã€‚</p><p id="ff40" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æˆ‘ä»ä¸€äº›æ¨ç‰¹è´¦å·ä¸Šè·å¾—äº†çµæ„ŸğŸ‰ï¼</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/14be9e3431bae22603b5cb2c912c41b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F8UcxxGefkM4vzJ2GpZ1Dw.png"/></div></div></figure><h1 id="de29" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">è·å–å¼€å‘è€…å…³æ³¨è€…</h1><p id="869e" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb np ld le lf nq lh li lj nr ll lm ln ig bi translated">è¿™ä¸ªæ˜¯æœ€ç®€å•çš„ï¼Œä½ è¦åšçš„å°±æ˜¯</p><ul class=""><li id="b0b2" class="mz na in ku b kv kw ky kz lb ns lf nt lj nu ln nv nh ni nj bi translated">ä»æ‚¨çš„å¼€å‘å¸æˆ·è·å–API</li><li id="3cfa" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated">ä½¿ç”¨ä»–ä»¬çš„è¿½éšè€…APIè·å¾—æ‰€æœ‰è¿½éšè€…</li><li id="b981" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated">ä»–ä»¬æ¯é¡µæœ€å¤šåªå‘é€1000ä¸ªè¿½éšè€…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¿è¡Œä¸€ä¸ªå¾ªç¯ï¼Œåªè¦è¿½éšè€…è¢«è¿”å›</li></ul><h2 id="1261" class="nw mi in bd mj nx ny dn mn nz oa dp mr lb ob oc mt lf od oe mv lj of og mx oh bi translated">ä»£ç ç‰‡æ®µ</h2><pre class="kd ke kf kg gt oi oj ok ol aw om bi"><span id="bb09" class="nw mi in oj b gy on oo l op oq">// fetch all followers<br/>export async function getFollowersFromDev(): Promise&lt;any[]&gt; {<br/>  // start with page 1<br/>  let page = 1,<br/>    limit = 1000;<br/>  const followers = [];<br/>  // repeat until page number exists<br/>  while (page) {<br/>    const res = await fetch(<br/>      `${process.env.DEV_API_URL}/followers/users?per_page=${limit}&amp;page=${page}`,<br/>      {<br/>        headers: {<br/>          "api-key": process.env.DEV_API_KEY as string,<br/>        },<br/>      }<br/>    );<br/>    const answer = await res.json();<br/>    if (answer &amp;&amp; Array.isArray(answer) &amp;&amp; answer.length) {<br/>      followers.push(...answer);<br/>      // increment page number if this page is full, otherwise set to 0<br/>      page = answer.length === limit ? page + 1 : 0;<br/>    } else {<br/>      // no more followers, so set page to 0<br/>      page = 0;<br/>    }<br/>  }<br/>  return followers;<br/>}</span></pre><h1 id="4dc1" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">è·å–YouTubeè®¢æˆ·</h1><p id="99a2" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb np ld le lf nq lh li lj nr ll lm ln ig bi translated">æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ç”¨äºè¿™ä¸ªçš„REST APIï¼Œ</p><ul class=""><li id="56ce" class="mz na in ku b kv kw ky kz lb ns lf nt lj nu ln nv nh ni nj bi translated">åœ¨ä½ çš„è°·æ­Œäº‘å¹³å°é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªAPIå¯†é’¥ï¼Œå¹¶å…è®¸è®¿é—®YouTubeçš„API</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi or"><img src="../Images/c2f2a9723926a3fd3735a01b6fb210f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DjS9HqNGQi4VUEx0.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Create API Key</figcaption></figure><ul class=""><li id="b5df" class="mz na in ku b kv kw ky kz lb ns lf nt lj nu ln nv nh ni nj bi translated">è®¿é—®<a class="ae lo" href="https://studio.youtube.com/" rel="noopener ugc nofollow" target="_blank"> YouTube Studio </a>è·å–æ‚¨çš„é¢‘é“IDï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi os"><img src="../Images/714e4ff24d854678113154e46017346c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/0*TtJJNt_OG2zH6f6v.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Copy Channel ID</figcaption></figure><ul class=""><li id="aa8c" class="mz na in ku b kv kw ky kz lb ns lf nt lj nu ln nv nh ni nj bi translated">æ¥ä¸‹æ¥æ‚¨è¦åšçš„å°±æ˜¯è°ƒç”¨APIå¹¶è¯»å–æ•°æ®</li></ul><h2 id="10f8" class="nw mi in bd mj nx ny dn mn nz oa dp mr lb ob oc mt lf od oe mv lj of og mx oh bi translated">ä»£ç ç‰‡æ®µ</h2><pre class="kd ke kf kg gt oi oj ok ol aw om bi"><span id="e783" class="nw mi in oj b gy on oo l op oq"><br/>export async function getYoutubeSubscribers() {<br/>  const res = await fetch(<br/>    `<a class="ae lo" href="https://youtube.googleapis.com/youtube/v3/channels?part=statistics&amp;id=${YT_CHANNEL_ID}&amp;key=${YT_API_KEY}`" rel="noopener ugc nofollow" target="_blank">https://youtube.googleapis.com/youtube/v3/channels?part=statistics&amp;id=${YT_CHANNEL_ID}&amp;key=${YT_API_KEY}`</a><br/>  );<br/>  const data = await res.json();<br/>  return data?.items[0]?.statistics?.subscriberCount || 330;<br/>}<br/></span></pre><h1 id="c56c" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">è·å–ä¸­ç­‰å…³æ³¨è€…</h1><p id="8274" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb np ld le lf nq lh li lj nr ll lm ln ig bi translated">å—¯ï¼Œè¿™æ˜¯æœ€å›°éš¾çš„ï¼ŒMediumä¼¼ä¹æ²¡æœ‰æä¾›ä¸€ä¸ªAPIæ¥è®©è¿½éšè€…è®¡æ•°ã€‚ä½†æ˜¯åœ¨è°·æ­Œä¸Šæœç´¢ï¼Œæˆ‘å‘ç°äº†GitHubç”¨æˆ·newhouseçš„è¿™ä¸ªè¦ç‚¹ï¼Œéå¸¸æ„Ÿè°¢ä»–ä»¬ã€‚</p><p id="36bd" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">äº‹å®è¯æ˜ï¼Œå¦‚æœä½ åœ¨ä½ çš„ä¸­ç­‰ä¸ªäººèµ„æ–™URLçš„æœ«å°¾æ·»åŠ ä¸€ä¸ª<code class="fe ot ou ov oj b">?format=json</code>ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªJSONå“åº”ï¼Œå…¶ä¸­æœ‰ä¸€å †æ•°æ®ï¼ŒåŒ…æ‹¬â€œSocialStatsâ€ã€‚</p><p id="4aa5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ä½†æ˜¯ï¼Œâ€œç­‰ç­‰â€¦ç­‰ç­‰â€¦ç­‰ç­‰ï¼Œä¸è¦è¿™ä¹ˆå¿«â€ï¼Œä¸­é˜Ÿè¯´ã€‚</p><p id="a259" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ä»–ä»¬åœ¨å®é™…çš„JSONå‰é¢æ·»åŠ äº†ä¸€äº›æ–‡æœ¬ï¼Œä»¥é™åˆ¶ä½œä¸ºAPIçš„ä½¿ç”¨ã€‚</p><p id="dbf4" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æ­¤å¤–ï¼Œå½“æˆ‘åšä¸€ä¸ªè·å–è¯·æ±‚æ—¶å®ƒæ²¡æœ‰è§£å†³ï¼Œä½†å½“ä½¿ç”¨å¤±çœ ç—‡æ—¶å®ƒå·¥ä½œäº†ï¼Œæ‰€ä»¥å½“æˆ‘å‘å‡ºç½‘ç»œè¯·æ±‚æ—¶ï¼Œæˆ‘ä½¿ç”¨å¤±çœ ç—‡ä½œä¸ºç”¨æˆ·ä»£ç†ã€‚</p><h2 id="49d6" class="nw mi in bd mj nx ny dn mn nz oa dp mr lb ob oc mt lf od oe mv lj of og mx oh bi translated">ä»£ç ç‰‡æ®µ</h2><pre class="kd ke kf kg gt oi oj ok ol aw om bi"><span id="98fd" class="nw mi in oj b gy on oo l op oq">export async function getMediumFollowers() {<br/>  const res = await fetch("<a class="ae lo" href="https://medium.com/@anshuman-bhardwaj?format=json" rel="noopener">https://medium.com/@anshuman-bhardwaj?format=json</a>", {<br/>    headers: {<br/>      "user-agent": "insomnia/2021.7.2", // didn't work without this for me<br/>    },<br/>  });<br/>  // Medium adds this to the JSON text<br/>  const hijackString = "";<br/>  const jsonText = await res.text();<br/>  // remove the hijackString from JSON before parsing<br/>  const data = JSON.parse(jsonText.replace(hijackString, ""));<br/>  return (<br/>    data?.payload?.references?.SocialStats?.[MEDIUM_USER_ID]<br/>      ?.usersFollowedByCount || 20<br/>  );<br/>}</span></pre><h1 id="767e" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">æ›´æ–°æˆ‘çš„Twitterä¸ªäººèµ„æ–™æ¨ªå¹…</h1><p id="20bc" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb np ld le lf nq lh li lj nr ll lm ln ig bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªAPIå¤„ç†å‡½æ•°ï¼Œå®ƒå°†</p><ol class=""><li id="7cf4" class="mz na in ku b kv kw ky kz lb ns lf nt lj nu ln ng nh ni nj bi translated">ä»ä»¥ä¸Šä¸‰ç§æ–¹æ³•ä¸­è·å–æ•°æ®</li><li id="af92" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln ng nh ni nj bi translated">ç”¨ä»ä¸Šè¿°æ–¹æ³•ä¸­è·å–çš„å€¼æ›´æ–°æˆ‘ä»¬åˆ›å»ºçš„å ä½ç¬¦å›¾åƒ</li><li id="eddf" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln ng nh ni nj bi translated">ä½¿ç”¨v1 APIçš„<a class="ae lo" href="https://developer.twitter.com/en/docs/twitter-api/v1/accounts-and-users/manage-account-settings/api-reference/post-account-update_profile_banner" rel="noopener ugc nofollow" target="_blank"> update_profile_banner </a>ç«¯ç‚¹å°†æ›´æ–°åçš„å›¾ç‰‡ä¸Šä¼ åˆ°æˆ‘çš„Twitterè´¦æˆ·ã€‚</li></ol><h1 id="a399" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">æ›´æ–°å›¾åƒ</h1><p id="8e24" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb np ld le lf nq lh li lj nr ll lm ln ig bi translated">æˆ‘ä»¬å°†ä½¿ç”¨<code class="fe ot ou ov oj b">jimp</code> <a class="ae lo" href="https://www.npmjs.com/package/jimp" rel="noopener ugc nofollow" target="_blank"> npmåŒ…</a>åœ¨æˆ‘ä»¬çš„å›¾åƒä¸Šæ·»åŠ æ–‡æœ¬ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°å ä½ç¬¦çš„ç¡®åˆ‡åæ ‡ã€‚(ç‚¹å‡»å’Œè¯•éªŒå¯¹æˆ‘æ¥è¯´å¾ˆå¥½)</p><p id="e5d5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æˆ‘ä»¬ä½¿ç”¨æ¥è‡ªjimpçš„<code class="fe ot ou ov oj b">print</code>æ–¹æ³•å°†æ–‡æœ¬æ”¾åœ¨å›¾åƒä¹‹ä¸Šã€‚</p><p id="cd67" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æˆ‘å·²ç»åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è§£é‡Šäº†å¦‚ä½•è·å¾—Twitter APIè¯ä¹¦ã€‚æ‰€ä»¥ï¼Œè¯·å‚è€ƒé‚£ç¯‡æ–‡ç« ï¼Œæˆ‘ç°åœ¨è·³è¿‡å®ƒã€‚</p><h1 id="6351" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">é™åˆ¶</h1><ul class=""><li id="7ba0" class="mz na in ku b kv nb ky nc lb nd lf ne lj nf ln nv nh ni nj bi translated">Twitter APIæ¥å—å›¾åƒçš„<code class="fe ot ou ov oj b">base64</code>ç¼–ç ï¼Œä½†æˆ‘åœ¨ä½¿ç”¨<code class="fe ot ou ov oj b">fetch</code>è°ƒç”¨æ—¶è¾¾åˆ°äº†æœ€å¤§æœ‰æ•ˆè´Ÿè½½å¤§å°ï¼Œä½†ä½¿ç”¨<a class="ae lo" href="https://github.com/FeedHive/twitter-api-client" rel="noopener ugc nofollow" target="_blank"> Twitter APIå®¢æˆ·ç«¯</a> npmåŒ…ä¸ºæˆ‘ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ã€‚</li><li id="cf22" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated">æˆ‘çš„Next.js APIå¤„ç†å‡½æ•°åœ¨è¿è¡Œæ—¶æ— æ³•è§£ææ¥è‡ª<code class="fe ot ou ov oj b">jimp</code>æ¨¡å—çš„å­—ä½“ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒä»¬å¤åˆ¶åˆ°å…¬å…±æ–‡ä»¶å¤¹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li><li id="cad5" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated">å½“æˆ‘ä½¿ç”¨Next.jså‡½æ•°æ—¶ï¼Œæˆ‘æ— æ³•å°†æ˜ åƒå†™åˆ°ç£ç›˜ä¸Šã€‚</li><li id="a950" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated">æ˜¯çš„ï¼Œæˆ‘çŸ¥é“<code class="fe ot ou ov oj b">getBase64Async</code>å­˜åœ¨äº<code class="fe ot ou ov oj b">jimp</code>ä¸­ï¼Œä½†æ˜¯å®ƒç»™å‡ºäº†ä¸€ä¸ªå·¨å¤§çš„è¿”å›å€¼ï¼Œå¤§çº¦æ˜¯åŸå§‹å¤§å°çš„6å€ã€‚å› æ­¤ï¼Œæˆ‘ç”¨ä¸€ä¸ª<code class="fe ot ou ov oj b">toString</code>è°ƒç”¨é“¾æ¥äº†<code class="fe ot ou ov oj b">getBufferAsync</code>å®ç”¨ç¨‹åºï¼Œè¿™å¯¹æˆ‘æ¥è¯´å¾ˆå¥½ã€‚</li></ul><h1 id="02e2" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">ä»£ç ç‰‡æ®µ</h1><pre class="kd ke kf kg gt oi oj ok ol aw om bi"><span id="f028" class="nw mi in oj b gy on oo l op oq">import { NextApiRequest, NextApiResponse } from "next";<br/>import {<br/>  formatLog,<br/>  getFollowersFromDev,<br/>  getMediumFollowers,<br/>  getYoutubeSubscribers,<br/>  twitterClient,<br/>} from "../../../utils";<br/>import path from "path";<br/>import jimp from "jimp";</span><span id="467b" class="nw mi in oj b gy ow oo l op oq">export default async function views(<br/>  request: NextApiRequest,<br/>  response: NextApiResponse<br/>) {<br/>  console.info(formatLog("Running Update Twitter Header Function"));<br/>  try {<br/>    const devFollowers = await getFollowersFromDev();<br/>    const ytSubs = await getYoutubeSubscribers();<br/>    const mediumFollowers = await getMediumFollowers();</span><span id="9e67" class="nw mi in oj b gy ow oo l op oq">const filePath = path.resolve("./public/yellow_twitter_header.png");<br/>    const jimpFont = path.resolve(<br/>      "./public/open-sans-32-black/open-sans-32-black.fnt"<br/>    );<br/>    path.resolve("./public/open-sans-32-black/open-sans-32-black.png");</span><span id="d827" class="nw mi in oj b gy ow oo l op oq">const image = await jimp.read(filePath);<br/>    const font = await jimp.loadFont(jimpFont);<br/>    image.print(font, 150, 98, ytSubs);<br/>    image.print(font, 620, 98, devFollowers.length);<br/>    image.print(font, 1130, 98, mediumFollowers);<br/>    const fromImage = await image.getBufferAsync(image.getMIME());<br/>    const updatedHeader =<br/>      await twitterClient.accountsAndUsers.accountUpdateProfileBanner({<br/>        banner: fromImage.toString("base64"),<br/>        width: 1500,<br/>        height: 500,<br/>      });<br/>    response.status(200).send({<br/>      type: "success",<br/>      updatedHeader,<br/>      devFollowers: devFollowers.length,<br/>      ytSubs,<br/>      mediumFollowers,<br/>    });<br/>  } catch (e: any) {<br/>    console.log(e);<br/>    response.status(500).send({<br/>      type: "error",<br/>      message: e.message,<br/>    });<br/>  }<br/>}</span></pre><h1 id="347e" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">è®¡åˆ’æ›´æ–°</h1><p id="f801" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb np ld le lf nq lh li lj nr ll lm ln ig bi translated">æ—¢ç„¶æˆ‘ä»¬å·²ç»å®Œæˆäº†æ‰€æœ‰çš„ç¹é‡å·¥ä½œï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ä¸Šé¢åˆ›å»ºçš„APIå¤„ç†ç¨‹åºã€‚</p><p id="f397" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ä¸ºäº†å®‰æ’æ—¶é—´ï¼Œæˆ‘ä½¿ç”¨GitHub actionsåˆ›å»ºäº†ä¸€ä¸ªCronä½œä¸šï¼Œæ¯5åˆ†é’Ÿè¿è¡Œä¸€æ¬¡æ¥æ›´æ–°æˆ‘çš„ä¸ªäººèµ„æ–™å›¾ç‰‡ã€‚Cronä½œä¸šè°ƒç”¨ä¸Šé¢åˆ›å»ºçš„APIå¤„ç†ç¨‹åºï¼Œå°±è¿™æ ·ã€‚</p><p id="f84d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒè¿è¡Œå¾—ç›¸å½“å¥½ã€‚</p><p id="faf9" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æ³¨æ„:Twitterçš„æ›´æ–°æ¨ªå¹…APIæ˜¯æœ‰é€Ÿç‡é™åˆ¶çš„ï¼Œæ‰¾ä¸åˆ°ç¡®åˆ‡çš„æ•°å­—ï¼Œä½†å®ƒåœ¨15åˆ†é’Ÿå†…å¤§çº¦æœ‰30ä¸ªå‘¼å«ã€‚å¦‚æœä½ çŸ¥é“ï¼Œè¯·å†™åœ¨è¯„è®ºé‡Œã€‚</p><h1 id="e3f9" class="mh mi in bd mj mk ml mm mn mo mp mq mr jt ms ju mt jw mu jx mv jz mw ka mx my bi translated">èµ„æº</h1><ul class=""><li id="d86d" class="mz na in ku b kv nb ky nc lb nd lf ne lj nf ln nv nh ni nj bi translated"><a class="ae lo" href="https://developers.google.com/youtube/v3/guides/implementation/channels" rel="noopener ugc nofollow" target="_blank"> YouTube API </a></li><li id="67d0" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated"><a class="ae lo" href="https://developers.forem.com/api" rel="noopener ugc nofollow" target="_blank">å¼€å‘API </a></li><li id="905b" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated"><a class="ae lo" href="https://github.com/FeedHive/twitter-api-client" rel="noopener ugc nofollow" target="_blank">æ¨ç‰¹APIå®¢æˆ·ç«¯</a></li><li id="03bb" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated"><a class="ae lo" href="https://github.com/Anshuman71/tweet-my-articles" rel="noopener ugc nofollow" target="_blank"> GitHubå›è´­</a></li><li id="ec7d" class="mz na in ku b kv nk ky nl lb nm lf nn lj no ln nv nh ni nj bi translated"><a class="ae lo" href="https://gist.github.com/newhouse/843c444ddefe084ea7f01603627dbcfd" rel="noopener ugc nofollow" target="_blank">æ–°æˆ¿å­çš„è¦æ—¨</a></li></ul></div><div class="ab cl ox oy hr oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="ig ih ii ij ik"><p id="3c19" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¥½äº†ï¼Œå°±è¿™äº›ï¼Œæœ‹å‹ä»¬ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„æŒ‡å—ï¼Œå¹¶é€šè¿‡åˆ†å‰æ­¤<a class="ae lo" href="https://github.com/Anshuman71/tweet-my-articles" rel="noopener ugc nofollow" target="_blank"> GitHub Repo </a>æ¥ä½¿ç”¨å®ƒã€‚</p><p id="5472" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•åé¦ˆæˆ–é—®é¢˜ï¼Œè¯·éšæ—¶åœ¨ä¸‹é¢çš„è¯„è®ºä¸­æå‡ºï¼Œæˆ‘å¾ˆä¹æ„å¬åˆ°å¹¶è§£å†³å®ƒä»¬ã€‚</p><p id="0c04" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æ›´å¤šæ­¤ç±»å†…å®¹ï¼Œè¯·å…³æ³¨æˆ‘</p><p id="fb30" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="pe">ç›´åˆ°ä¸‹ä¸€æ¬¡</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/90479071f0086a7786d00b29bbc6bebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/0*JBDWeINf9HdheobU.gif"/></div></figure></div><div class="ab cl ox oy hr oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="ig ih ii ij ik"><p id="2c3e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="pe">åŸè½½äº2022å¹´1æœˆ31æ—¥</em><a class="ae lo" href="https://theanshuman.dev/articles/create-a-live-twitter-profile-banner-to-show-followers-count-3k2h" rel="noopener ugc nofollow" target="_blank"><em class="pe">https://theanshuman . dev</em></a><em class="pe">ã€‚</em></p><p id="ce4b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="pe">æ›´å¤šå†…å®¹çœ‹</em> <a class="ae lo" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="pe">è¯´ç™½äº†å°±æ˜¯</em> </strong> </a> <em class="pe">ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em><strong class="ku io"><em class="pe"/></strong><a class="ae lo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="pe">å…è´¹æ¯å‘¨ç®€è®¯</em> </strong> </a> <em class="pe">ã€‚åœ¨æˆ‘ä»¬çš„</em> <a class="ae lo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="pe">ç¤¾åŒºä¸å’Œè°</em> </strong> </a> <em class="pe">è·å–ç‹¬å®¶å†™ä½œæœºä¼šå’Œå»ºè®®ã€‚</em></p></div></div>    
</body>
</html>