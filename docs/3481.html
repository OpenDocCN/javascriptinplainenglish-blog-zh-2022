<html>
<head>
<title>Design Patterns in TypeScript: Observer Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript中的设计模式:观察者模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/design-patterns-in-typescript-observer-pattern-cf0adb5e17be?source=collection_archive---------12-----------------------#2022-08-31">https://javascript.plainenglish.io/design-patterns-in-typescript-observer-pattern-cf0adb5e17be?source=collection_archive---------12-----------------------#2022-08-31</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="f823" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">了解如何在TypeScript中轻松实现观察者模式</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/11379d9476fe7c34516ba3bb015284a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVhMl790gSvVvyO-n_n6ww.jpeg"/></div></div></figure><p id="3503" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">在本系列中，我们将探讨各种设计模式，它们在TypeScript中的实现，以及它们如何改善开发人员的生活。</p><p id="541d" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">如果你没有读过本系列的前几篇文章，你可能想看看下面的列表，因为随着我们阅读本系列，模式的难度会增加。</p><div class="lo lp gq gs lq"><div role="button" tabindex="0" class="ab bv gw cb fq lr ls bn lt kq ex"><div class="lu l"><div class="ab q"><div class="l di"><img alt="Wesley Smits" class="l de bw lv lw fe" src="../Images/7a561a9f300daf7c9e2d76d587f1a634.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*H158s-_jAurIskZW003JLg.jpeg"/><div class="fb bw l lv lw fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://medium.com/@WesleySmits?source=post_page-----cf0adb5e17be--------------------------------" rel="noopener follow" target="_top">韦斯利·史密斯</a></p></div></div><div class="lz ma gx l"><h2 class="bd is un oh fq uo fs ft pm fv fx iq bi translated">打字稿中的设计模式</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi up au uq ur us rd ut an eh ei uu uv uw el em eo de bk ep" href="https://medium.com/@WesleySmits/list/design-patterns-in-typescript-8130a1c7083f?source=post_page-----cf0adb5e17be--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ux l fp"><span class="bd b dl z dk">2 stories</span></div></div></div><div class="mm dh mn fq ab mo fp di"><div class="di me bv mf mg"><div class="dh l"><img alt="" class="dh" src="../Images/14db296097795b058cbdec451bab218e.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*LVhMl790gSvVvyO-n_n6ww.jpeg"/></div></div><div class="di me bv mh mi mj"><div class="dh l"><img alt="Design Patterns in Typescript: Singleton Pattern" class="dh" src="../Images/a21ce3957d70751e6192892d8d02d58f.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*lOwInyETUDh5AG2uM09qxg.jpeg"/></div></div><div class="di bv mk ml mj"><div class="dh l"><div class="mp mq mr l ms"/></div></div></div></div></div><p id="fe39" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">观察者模式是一种行为设计模式，它允许您建立一个订阅模型来通知其他对象它们正在观察的对象所发生的事件。</p><blockquote class="mt"><p id="f15f" class="mu mv ir bd mw mx my mz na nb nc ln dk translated">“主体只知道关于它的观察者的一件事，他们实现了一个特定的接口，他们对它是哪个类、它做什么或者它包含什么一无所知。”</p></blockquote><h2 id="56b9" class="nd ne ir bd nf ng nh dn ni nj nk dp nl lb nm nn no lf np nq nr lj ns nt nu nv bi translated">真实世界的例子</h2><p id="c044" class="pw-post-body-paragraph ks kt ir ku b kv nw js kx ky nx jv la lb ny ld le lf nz lh li lj oa ll lm ln ik bi translated">这种模式非常类似于杂志订阅。订阅杂志的人不再需要定期去商店查看最新一期的杂志。该杂志的出版商持有一份所有订户的名单，并在有新的期刊时发送给订户。</p><h2 id="e42d" class="nd ne ir bd nf ng ob dn ni nj oc dp nl lb od nn no lf oe nq nr lj of nt nu nv bi translated">观察者模式的结构</h2><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="ab gv cl og"><img src="../Images/131a764f4ea476615648a37dbeca3337.png" data-original-src="https://miro.medium.com/v2/format:webp/1*djwNpHH6jjHA_gNeqT8yWA.png"/></div></figure><h2 id="cb9d" class="nd ne ir bd nf ng ob dn ni nj oc dp nl lb od nn no lf oe nq nr lj of nt nu nv bi translated">如何在TypeScript中实现观察者模式</h2><p id="7b6d" class="pw-post-body-paragraph ks kt ir ku b kv nw js kx ky nx jv la lb ny ld le lf nz lh li lj oa ll lm ln ik bi translated">为了在TypeScript中实现观察者模式，我们需要首先理解该模式是如何工作的。</p><ol class=""><li id="5bdb" class="oh oi ir ku b kv kw ky kz lb oj lf ok lj ol ln om on oo op bi translated">一个拥有某种有趣状态的物体叫做主体。这个主题还包含一个对这个状态感兴趣的订阅者列表。</li><li id="ef30" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln om on oo op bi translated">当这个状态改变时，主题在所有这些订阅者上调用update()方法。</li></ol><p id="b62e" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">让我们开始定义两个接口来帮助我们更容易地设置模式。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ov ow l"/></div></figure><p id="0448" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这有助于我们实施正确的方法，但是每个主体都必须实现包含相同逻辑的attach、detach和notify方法。让我们也创建一个抽象类来编写这个逻辑。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ov ow l"/></div></figure><p id="9ce6" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这个实现非常简单。</p><ul class=""><li id="1053" class="oh oi ir ku b kv kw ky kz lb oj lf ok lj ol ln ox on oo op bi translated">我们跟踪观察器的数组(这些只是在我们的接口中定义了更新方法的类)</li><li id="d987" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln ox on oo op bi translated"><code class="fe oy oz pa pb b">attach()</code>方法检查传入的观察者是否已经在数组中，如果不是，它将把它推入数组。</li><li id="0755" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln ox on oo op bi translated"><code class="fe oy oz pa pb b">detach()</code>方法从数组中移除传入的观察者。</li><li id="7028" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln ox on oo op bi translated"><code class="fe oy oz pa pb b">notify()</code>方法将对每个观察者调用update方法，将对自身的引用作为参数传递。</li></ul><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ov ow l"/></div></figure><h2 id="f0d3" class="nd ne ir bd nf ng ob dn ni nj oc dp nl lb od nn no lf oe nq nr lj of nt nu nv bi translated">使用观察者模式的优势</h2><ol class=""><li id="778b" class="oh oi ir ku b kv nw ky nx lb pc lf pd lj pe ln om on oo op bi translated">主体只知道关于它的观察者的一件事，即他们实现了一个特定的接口，他们对它是哪个类、做什么或包含什么一无所知。</li><li id="73b9" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln om on oo op bi translated"><strong class="ku is">我们可以随时添加/删除/替换观察员</strong>。由于主题保存了一个需要被通知的观察者的简单列表，所以它会毫无问题地通知列表中的任何东西。</li><li id="52ac" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln om on oo op bi translated"><strong class="ku is">我们从来不需要为了增加新的观察者而修改主题</strong>。因为一个观察者调用公共的<code class="fe oy oz pa pb b">attach()</code>方法，我们永远不需要触及这个主题。</li><li id="9f59" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln om on oo op bi translated">如果主题或观察者得到了另一种用法，<strong class="ku is">我们可以很容易地重用它们，因为这两者不是紧密耦合的。</strong></li><li id="df01" class="oh oi ir ku b kv oq ky or lb os lf ot lj ou ln om on oo op bi translated"><strong class="ku is">一改互不影响</strong>。因为主体和观察者是松散耦合的，所以只要它们遵守其固有接口的规则，变化就不会相互影响。</li></ol><h2 id="f5f6" class="nd ne ir bd nf ng ob dn ni nj oc dp nl lb od nn no lf oe nq nr lj of nt nu nv bi translated">结论</h2><p id="457d" class="pw-post-body-paragraph ks kt ir ku b kv nw js kx ky nx jv la lb ny ld le lf nz lh li lj oa ll lm ln ik bi translated">观察者模式是最容易理解的设计模式之一。这是一个关于设计模式如何改进你的代码的很好的介绍，我建议阅读更多关于这个主题的内容。</p><p id="19cd" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">感谢阅读。如果你对此有想法，一定要留下评论。</p><p id="1fe1" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">如果你喜欢我的内容，并想支持我的努力，考虑通过<a class="ae pf" href="https://medium.com/@WesleySmits/membership" rel="noopener">我的会员链接</a>成为一个媒体订阅者。这不会花费你任何额外的费用，但Medium会把部分收益给我，让我推荐你。</p><p id="8ebe" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">如果你愿意，你可以在<a class="ae pf" href="https://www.linkedin.com/in/wesley-robert-smits/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或<a class="ae pf" href="https://twitter.com/iamwesleysmits" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上联系我！</p><div class="lo lp gq gs lq pg"><a href="https://medium.com/@WesleySmits/membership" rel="noopener follow" target="_blank"><div class="ph ab fp"><div class="pi ab pj cl cj pk"><h2 class="bd is gz z fq pl fs ft pm fv fx iq bi translated">通过我的推荐链接加入Medium-Wesley Smits</h2><div class="pn l"><h3 class="bd b gz z fq pl fs ft pm fv fx dk translated">阅读韦斯利·斯密特(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="po l"><p class="bd b dl z fq pl fs ft pm fv fx dk translated">medium.com</p></div></div><div class="pp l"><div class="pq l pr ps pt pp pu kq pg"/></div></div></a></div></div><div class="ab cl pv pw hv px" role="separator"><span class="py bw bk pz qa qb"/><span class="py bw bk pz qa qb"/><span class="py bw bk pz qa"/></div><div class="ik il im in io"><p id="73e1" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated"><em class="qc">更多内容请看</em><a class="ae pf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="qc">plain English . io</em></strong></a><em class="qc">。报名参加我们的</em> <a class="ae pf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku is"> <em class="qc">免费周报</em> </strong> </a> <em class="qc">。关注我们关于</em><a class="ae pf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="qc">Twitter</em></strong></a><a class="ae pf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="qc">LinkedIn</em></strong></a><em class="qc"/><a class="ae pf" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="qc">YouTube</em></strong></a><em class="qc"/><a class="ae pf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="qc">不和</em> </strong> </a> <em class="qc">。</em></p></div></div>    
</body>
</html>