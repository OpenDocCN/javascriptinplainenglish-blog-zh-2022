<html>
<head>
<title>A Short Tutorial on How to Use Stripe API with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于如何将Stripe API与JavaScript一起使用的简短教程</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-short-introduction-to-using-stripe-api-with-javascript-9c83f89af1e1?source=collection_archive---------10-----------------------#2022-01-05">https://javascript.plainenglish.io/a-short-introduction-to-using-stripe-api-with-javascript-9c83f89af1e1?source=collection_archive---------10-----------------------#2022-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/555a19e062d60309e69bb76df7761a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RIzNp-TiXtc4-OpvCiU8-w.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@blakeconnally" rel="noopener ugc nofollow" target="_blank">Blake Connally</a></figcaption></figure><div class=""/><div class=""><h2 id="0b11" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">以下是开始的方法。</h2></div><p id="6f9a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Stripe在许多年前开始作为一个面向开发者的不起眼的支付网关，但现在它正在展望未来，为未来的商业构建基础设施。如果您是一名对使用JavaScript开始使用<a class="ae jd" href="https://stripe.com/docs/api" rel="noopener ugc nofollow" target="_blank"> Stripe API </a>感兴趣的开发人员，那么这篇文章就是为您准备的！</p><p id="ba1d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我将一步一步地讨论如何在Stripe测试帐户中创建测试产品，并使用JavaScript请求访问关于这些产品的信息。这将允许您在一个安全而又真实的环境中使用API。</p><p id="0afc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于Stripe API功能强大，可以做很多事情，所以本文只讨论一个用例——即检索企业内部的产品信息。我将在这里介绍的是创建一个Stripe帐户，创建产品，将代码连接到您的帐户，以及获取关于您的产品的信息。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h2 id="c97f" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">创建Stripe帐户—这是免费的！</h2><p id="e039" class="pw-post-body-paragraph kv kw jg kx b ky mr kh la lb ms kk ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">你可以在这里创建一个免费的条纹账户<a class="ae jd" href="https://stripe.com/" rel="noopener ugc nofollow" target="_blank">。一旦完成，您将可以访问在<em class="mw">测试模式</em>下激活的仪表板(您会看到一个被称为“测试模式”的开关被打开，可能在仪表板的右侧)。现在您已经有了这个测试帐户，您可以通过Stripe API来使用它。</a></p><p id="7ccd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来你要做的是为你的账户找到密钥。点击<em class="mw">开发者</em>标签，然后点击<em class="mw"> API密匙</em>来查看你的公开密匙和秘密密匙。请保管好密钥，因为我们稍后将使用它通过您的代码连接到您的帐户！<em class="mw">注意:即使这是一个测试账户，也不要与他人分享你的密钥！</em></p><h2 id="a3ed" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">创造产品</h2><p id="2324" class="pw-post-body-paragraph kv kw jg kx b ky mr kh la lb ms kk ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">在您的仪表板中，单击<em class="mw">产品</em>选项卡将允许您添加新产品。对于本教程，我会添加一到四个产品。您可以给它们起产品名，如<em class="mw">测试产品1 </em>，每个产品的价格为<em class="mw"> $0.00 </em>。如果需要，您可以随时编辑这些信息。</p><h2 id="aa3c" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">编写连接到您的帐户的代码</h2><p id="1260" class="pw-post-body-paragraph kv kw jg kx b ky mr kh la lb ms kk ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">打开您喜欢的代码编辑器，创建一个新的JavaScript文件(例如，名为<em class="mw"> stripe_test.js </em>)。要运行这个文件，我建议安装<a class="ae jd" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>。这样，您可以简单地在命令行中运行node来查看您的JavaScript程序的结果(例如，<em class="mw"> node stripe_test.js </em>)。</p><p id="9635" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在是写代码的时候了。首先，通过在命令行中键入<em class="mw"> npm install stripe </em>来安装您需要的依赖项(或者类似的<em class="mw"> yarn </em>)。然后，作为JavaScript的第一行，要求Stripe像这样:</p><p id="55b6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mx my mz na b">const Stripe = require(“stripe”);</code></p><p id="1519" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，将您的密钥存储在一个变量中。关于这一点，请阅读下面的重要说明！</p><p id="b9a3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mx my mz na b">const SECRET_KEY = ‘sk_test_51K8pTLKS5...........’;</code></p><p id="4859" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">重要提示</strong> —通常，您会希望将任何密钥存储在一个<em class="mw">中。env </em>文件，而不是将它们直接存储在代码中。然而，对于我们这里的目的，我们只是在您的本地机器上用一个测试帐户玩玩。如果您计划与他人共享您的代码，请使用<em class="mw">。env </em>文件进行密钥存储，而不是像我上面所做的那样。为了了解更多关于在应用程序中存储密钥的信息，我在这里写了一篇文章。如果你在任何时候怀疑你的秘密密钥已经泄露给别人而不是你自己，你应该使用“滚动密钥”功能来改变你的密钥。</p><p id="9268" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，选择一个你在你的账户中创建的随机产品，并获取它的ID。你只需点击你账户中的一个产品就可以得到。你会在产品详情下看到它的ID。将ID存储在您的代码中，就在您的密钥下面。当试图获得关于特定产品的信息时，这将很方便:</p><p id="6f9c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mx my mz na b">const PRODUCT_ID = ‘prod_KoWtM......’;</code></p><h2 id="bf42" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">最后，获取产品信息</h2><p id="e185" class="pw-post-body-paragraph kv kw jg kx b ky mr kh la lb ms kk ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">让我们编写一些请求来获取测试帐户中某个特定产品或几个产品的信息。</p><p id="8590" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要获得关于存储在<code class="fe mx my mz na b">PRODUCT_ID</code>中的特定产品的信息，您可以编写这样的请求，使用<em class="mw"> async await </em>来检索数据:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="d0f0" class="ly lz jg na b gy nj nk l nl nm">const getSingleProduct = async (stripe) =&gt; {<br/>    const product = await <strong class="na jh">stripe.products.retrieve(PRODUCT_ID)</strong>;<br/>    console.log(product);<br/>}</span><span id="d488" class="ly lz jg na b gy nn nk l nl nm">getSingleProduct(stripe);</span></pre><p id="e1fc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当您运行您的程序时，您的控制台应该在产品ID下显示一个带有产品信息的对象，包括它的名称、相关图像等等！</p><p id="843b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">既然您已经能够获得特定的产品，以下是您如何获得仪表板中列出的所有产品:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="4802" class="ly lz jg na b gy nj nk l nl nm">const getAllProducts = async (stripe) =&gt; {<br/>    const product = await <strong class="na jh">stripe.products.list()</strong>;<br/>    console.log(product);<br/>}</span><span id="c402" class="ly lz jg na b gy nn nk l nl nm">getAllProducts(stripe);</span></pre><p id="8bf8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">哦，如果你只是想要几个产品(例如，只是你的三个产品)，你可以像下面这样做。如果您正在构建一个展示产品的网站，并希望引入分页或仅展示一些示例产品，这可能会有所帮助:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="f4fd" class="ly lz jg na b gy nj nk l nl nm">const getThreeProducts = async (stripe) =&gt; {<br/>    const product = await <strong class="na jh">stripe.products.list({<br/>        limit: 3<br/>    })</strong>;<br/>    console.log(product);<br/>}</span><span id="0beb" class="ly lz jg na b gy nn nk l nl nm">getThreeProducts(stripe);</span></pre></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="918b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里的目标是介绍如何以简单易懂的方式将Stripe API与JavaScript结合使用。同样，Stripe API可以做的事情比这里展示的要多得多，但我只是想触及皮毛。</p><p id="9389" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望这个教程是有帮助的，感谢阅读！</p><p id="b4ff" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mw">更多内容看</em> <a class="ae jd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mw">说白了. io </em> </a> <em class="mw">。报名参加我们的</em> <a class="ae jd" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mw">免费每周简讯</em> </a> <em class="mw">。在我们的</em> <a class="ae jd" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="mw">社区</em> </a> <em class="mw">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>