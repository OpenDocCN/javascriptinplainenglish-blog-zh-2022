<html>
<head>
<title>You’re Gonna Need a Bigger App: How I Fixed the Access-Control-Allow-Origin Header Error</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你需要一个更大的应用程序:我是如何修复访问控制允许来源标题错误的</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/youre-gonna-need-a-bigger-app-how-i-fixed-access-control-allow-origin-header-error-bb3c3e7c5c03?source=collection_archive---------9-----------------------#2022-04-27">https://javascript.plainenglish.io/youre-gonna-need-a-bigger-app-how-i-fixed-access-control-allow-origin-header-error-bb3c3e7c5c03?source=collection_archive---------9-----------------------#2022-04-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/5c31aaf94272a42af094f3a399f165dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fi9A1y73xp9-0iCVo9iejg.png"/></div></div></figure><p id="6f7c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">说你是我。您决定构建一个迷你项目来显示来自一些免费API的数据。只是为了伸展你的前端肌肉。</p><p id="e080" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你找到了<a class="ae kt" href="https://xkcd.com/json.html" rel="noopener ugc nofollow" target="_blank"> XKCD </a> API。简洁的文档和两个端点。看起来很完美，对吧？您设置了React应用程序，创建了获取请求，并看到了以下内容:</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi ku"><img src="../Images/3ca4c4bfd1368acd42b3e5ab018f0a3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*_jtRW57LYg3ff5xzWLietg.png"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">Rude</figcaption></figure><p id="6862" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">呃，对不起，XKCD API，但你与邮差和浏览器工作得很好。这是什么？</p><p id="3009" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">经过一番搜索，我发现这是因为XKCD API有一个安全措施来防止跨站点请求伪造。</p><p id="e42d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">好吧，没关系。我完全赞成良好的安全性，但是我如何获得我的漫画数据呢？</p><p id="7144" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">嗯，我的搜索把我带到了这个<a class="ae kt" href="https://medium.com/@dtkatz/3-ways-to-fix-the-cors-error-and-how-access-control-allow-origin-works-d97d55946d9" rel="noopener">伟大的博客帖子</a>，关于解决这个错误的方法。这篇文章介绍了几种不同的方法，并很好地解释了错误消息。在这篇文章中，我将回顾我是如何实现文章中的第三个选项的:构建自己的代理。</p><p id="8c36" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">至此，我已经用create-react-app创建了我的应用程序，初始化了git，并设置了我的远程存储库。因此，如果我想用express设置自己的代理，我希望该项目位于我的项目的根目录中。所以我使用下面的命令创建了一个新的“客户机”目录，将我的所有前端文件移动到该目录，并将所有这些更改通知git。</p><pre class="kv kw kx ky gt ld le lf lg aw lh bi"><span id="c03c" class="li lj in le b gy lk ll l lm ln">$ mkdir client<br/>$ git mv &lt;all my frontend files&gt; client</span></pre><p id="3bb9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不要像我一样忘记在你的。gitignore文件。</p><p id="df86" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦你有了自己的前端目录，我们就可以设置我们的快速代理。</p><p id="2fbb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们的根目录中，我们可以运行以下命令来安装express和request。</p><pre class="kv kw kx ky gt ld le lf lg aw lh bi"><span id="1a59" class="li lj in le b gy lk ll l lm ln">$ npm install express<br/>$ npm install request</span></pre><p id="8d83" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦安装了这些文件，就可以在代理项目的根目录下创建一个“index.js”文件。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="5a7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个文件的主要内容在第6-9行。这些行将标题应用于我们的响应。它也与我引用的文章中显示的代码基本相同。我刚刚在第11行和第12行创建了自己的随机漫画端点，并让它运行在端口4000上，因为我的React前端运行在3000上。</p><p id="79be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于一点额外的内容，您可以进入“client/package.json”并添加</p><pre class="kv kw kx ky gt ld le lf lg aw lh bi"><span id="8140" class="li lj in le b gy lk ll l lm ln">"proxy": "http://localhost:4000"</span></pre><p id="c11e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这样，您可以将获取请求写成</p><pre class="kv kw kx ky gt ld le lf lg aw lh bi"><span id="2011" class="li lj in le b gy lk ll l lm ln">fetch('/comics/random')          <br/>  .then(resp =&gt; resp.json())          <br/>  .then(data =&gt; /* do stuff */)</span></pre><p id="48a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">结果就是你用Postman/浏览器测试API时看到的那个漂亮的JSON。完成所有设置后，您可以在根目录下运行“npm run start”来运行代理，打开第二个终端窗口，导航到客户端目录，然后像往常一样使用“npm start”运行React应用程序。然后你可以使用这些数据和<a class="ae kt" href="https://randomuser.me/" rel="noopener ugc nofollow" target="_blank">随机用户生成器</a>来创建卡片来显示所有的数据。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lq"><img src="../Images/6ee67d6ba8598b0d2db2c96a8a5df09b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BnE0sPhrC1euUt9Phflshw.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">Good CSS practice too</figcaption></figure><p id="02f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我对这个迷你项目的回购可以在这里找到<a class="ae kt" href="https://github.com/bidiaz101/doctective" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="b9f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Google-Fu能够知道你在搜索什么，什么资源会有帮助，这是一项有价值的技能，在其他开发者创建资源和编写内容时，这项技能会变得更好。</p><p id="45e6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">总而言之，我是如何解决我的访问控制允许起源头错误的呢？</p><p id="7650" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在很多人的帮助下。</p><p id="e7e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr">更多内容看</em> <a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lr">说白了。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lr">免费周报</em> </strong> </a> <em class="lr">。关注我们关于</em><a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lr">Twitter</em></strong></a><em class="lr">和</em><a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lr">LinkedIn</em></strong></a><em class="lr">。加入我们的</em> <a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lr">社区</em> </strong> </a> <em class="lr">。</em></strong></a></p></div></div>    
</body>
</html>