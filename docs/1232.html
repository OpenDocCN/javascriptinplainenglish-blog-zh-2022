<html>
<head>
<title>A Quick and Clean Way to Parse Strings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种快速而简洁的解析字符串的方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-quick-and-clean-way-to-parse-strings-5015ea909aac?source=collection_archive---------10-----------------------#2022-03-10">https://javascript.plainenglish.io/a-quick-and-clean-way-to-parse-strings-5015ea909aac?source=collection_archive---------10-----------------------#2022-03-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="e97a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">以下是如何快速解析字符串并一次将它们赋给多个变量。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/aff6e865394320accc65bd18f8678195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wSKGRwwoF3jirGDrWEscJg.png"/></div></div></figure><p id="2659" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">假设您有一个字符串需要解析并赋给变量，忽略对您没有意义的数据。以一个日期字符串为例:<code class="fe lk ll lm ln b">09/09/2022</code>。也许你有一个函数，它以字符串的形式接收这个日期，你想把月、日、年分配给不同的变量。</p><p id="996b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我不太了解情况的时候，我会这样处理这个问题:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="d988" class="ls lt in ln b gy lu lv l lw lx">parseDateString(<em class="ly">date</em>: <em class="ly">string</em>) {<br/>    <em class="ly">let </em>day = <em class="ly">date</em>.substr(0, 2);<br/>    <em class="ly">let </em>month = <em class="ly">date</em>.substr(3, 2);<br/>    <em class="ly">let </em>year = <em class="ly">date</em>.substr(6, 4);<br/>    ...<br/>}</span></pre><p id="70ef" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这种方法很简单，但是有几个潜在的问题。首先，看起来和感觉上都像是多余的代码。其次，它假定格式一致。如果该函数接收到的年份只有2位数，该怎么办？显然，有完整的库来处理日期字符串，但这不是本练习的重点。</p><p id="1338" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">利用<a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/destructuring-data-in-javascript-314efe817641">析构</a>的能力，结合regex的多功能性，我们可以做以下事情:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="8b6d" class="ls lt in ln b gy lu lv l lw lx">parseDateString(<em class="ly">date</em>: <em class="ly">string</em>) {<br/>    <em class="ly">const </em>[,day,,month,,year] = <em class="ly">date</em>.match(<br/>        /([0-9]{1,2})(\/)([0-9]{1,2})(\/)([0-9]{2,4})/<br/>    );<br/>    ...<br/>}</span></pre><p id="0cd2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这种方法起初看起来有点混乱，但是一旦你理解了析构，它真的非常优雅。</p><p id="7868" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们有一个正则表达式，在不深入regex主题的情况下，它与<code class="fe lk ll lm ln b">match()</code>函数一起使用，将模式匹配到给定的日期变量。模式本身用括号分成五个捕获组，所以<code class="fe lk ll lm ln b">match()</code>函数将在一个数组中分别返回每一个捕获组。</p><p id="9bcd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在等式的左边，我们使用析构将三个变量赋给从<code class="fe lk ll lm ln b">match()</code>函数接收的值。还要注意，我们通过在逗号之间使用空值来跳过返回数组的某些索引。从<code class="fe lk ll lm ln b">match()</code>返回的第一个元素是匹配的字符串本身，所以我们可以跳过这段。</p><p id="27b8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们也跳过了索引2和4，因为我们不关心斜线。这使得日、月和年成为独立的变量，分别对应于日期字符串的各个部分。</p><p id="79b9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因为我们使用的是正则表达式，所以表达式本身可以根据您的需要进行修改。您可以修改表达式来检查月份名称，而不是数字、星期几等。使用这种方法，您可以通过让您的正则表达式更加努力地工作来避免使用一堆“if”语句来检查边缘情况。</p></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="210f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢您的阅读。如需进一步阅读与本主题相关的主题:</p><div class="mh mi gp gr mj mk"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd io gy z fp mp fr fs mq fu fw im bi translated">string . prototype . match()-JavaScript | MDN</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">方法检索字符串与正则表达式匹配的结果。正则表达式对象。如果…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">developer.mozilla.org</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my km mk"/></div></div></a></div><div class="mh mi gp gr mj mk"><a href="https://regexr.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd io gy z fp mp fr fs mq fu fw im bi translated">学习、构建和测试正则表达式</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">正则表达式测试器，语法高亮，PHP / PCRE &amp; JS支持，上下文帮助，备忘单，参考…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">regexr.com</p></div></div><div class="mt l"><div class="mz l mv mw mx mt my km mk"/></div></div></a></div><div class="mh mi gp gr mj mk"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd io gy z fp mp fr fs mq fu fw im bi translated">析构赋值- JavaScript | MDN</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">析构赋值语法是一个JavaScript表达式，它使得从数组中解包值成为可能，或者…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">developer.mozilla.org</p></div></div><div class="mt l"><div class="na l mv mw mx mt my km mk"/></div></div></a></div><p id="37f0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ly">更多内容请看</em><a class="ae lz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ly">plain English . io</em></strong></a><em class="ly">。报名参加我们的</em> <a class="ae lz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ly">免费周报</em> </strong> </a> <em class="ly">。关注我们关于</em><a class="ae lz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ly">Twitter</em></strong></a><em class="ly">和</em><a class="ae lz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ly">LinkedIn</em></strong></a><em class="ly">。加入我们的</em> <a class="ae lz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ly">社区不和谐</em> </strong> </a> <em class="ly">。</em></p></div></div>    
</body>
</html>