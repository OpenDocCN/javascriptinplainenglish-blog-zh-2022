<html>
<head>
<title>How Hoisting Works in JavaScript — Variables and Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中提升的工作方式——变量和函数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-hoisting-works-in-javascript-variables-and-functions-27a5b931d530?source=collection_archive---------20-----------------------#2022-02-23">https://javascript.plainenglish.io/how-hoisting-works-in-javascript-variables-and-functions-27a5b931d530?source=collection_archive---------20-----------------------#2022-02-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1344" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">提升是JavaScript中由解释器完成的一个非常重要的过程。在执行代码之前，解释器将函数和变量的声明移动到它们作用域的顶部。这个特性在JavaScript中被称为提升。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/a08c2fd045774efb42b971ff19e3a347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R-ESFncRXM0Z_htvvVL1PQ.png"/></div></div></figure><h1 id="bbe0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">可变提升</h1><p id="1e81" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在JavaScript中，我们可以用const、let和var声明变量。我将单独详细解释每个变量声明类型，因为在托管时行为是不一样的。</p><h2 id="85d3" class="ma ky iq bd kz mb mc dn ld md me dp lh jy mf mg ll kc mh mi lp kg mj mk lt ml bi translated">Var托管</h2><p id="df07" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">先说个例子。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="5cb4" class="ma ky iq mn b gy mr ms l mt mu">console.log(myName);</span><span id="c0b5" class="ma ky iq mn b gy mv ms l mt mu">function inlineFunction(){<br/>  console.log("Hello World!");<br/>}</span><span id="2d24" class="ma ky iq mn b gy mv ms l mt mu">var myName="Nissim Zarur";</span></pre><p id="8443" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如你在上面的例子中看到的，我们在声明前调用变量<code class="fe mw mx my mn b">myName</code>，并尝试<code class="fe mw mx my mn b">console.log</code>其中的值。当我们试图运行代码时，奇迹发生了。主机被激活，会发生什么？变量<code class="fe mw mx my mn b">myName</code>被移动到JavaScript文件的顶部。意味着<strong class="jp ir">现在的声明是在</strong>的<code class="fe mw mx my mn b">console.log</code>之前，但是这里要注意，变量<code class="fe mw mx my mn b">myName</code>只是在JavaScript文件的顶部声明的，对“Nissim Zarur”赋值的初始化是<strong class="jp ir">而不是</strong>发生的。</p><p id="5f03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">为什么有帮助？</strong></p><p id="59a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这很有帮助，因为我们不会收到<code class="fe mw mx my mn b">Uncaught ReferenceError: myName is not defined</code>的错误，相反，我们会收到<code class="fe mw mx my mn b">undefined</code>作为返回值。</p><p id="2c84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">有什么区别？</strong></p><p id="865f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们收到错误<code class="fe mw mx my mn b">Uncaught ReferenceError: myName is not defined</code>时，意味着变量<code class="fe mw mx my mn b">myName</code>从未被声明，当我们收到返回值<code class="fe mw mx my mn b">undefined</code>时，意味着变量被声明但没有像代码中某处发生的那样被初始化或赋给值“Nissim zar ur”；相反，提升过程将变量<code class="fe mw mx my mn b">myName</code>初始化为默认值<code class="fe mw mx my mn b">undefined</code>。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="21c4" class="ma ky iq mn b gy mr ms l mt mu">console.log(myName); // Will print to the console "undefined"</span><span id="45d6" class="ma ky iq mn b gy mv ms l mt mu">function inlineFunction(){<br/>  console.log("Hello World!");<br/>}</span><span id="b00b" class="ma ky iq mn b gy mv ms l mt mu">var myName="Nissim Zarur";</span></pre><h2 id="d0e5" class="ma ky iq bd kz mb mc dn ld md me dp lh jy mf mg ll kc mh mi lp kg mj mk lt ml bi translated">Const &amp; Let吊装</h2><p id="a2dd" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">这就是var和const/let提升之间的巨大差异。在幕后，用<em class="mz">声明的变量let </em>和<em class="mz"> const </em>也被吊起，但与<em class="mz"> var </em>不同的是，它们<strong class="jp ir">不</strong>接收默认值<code class="fe mw mx my mn b">undefined</code>。</p><p id="39db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么如果我们在初始化const/let变量之前调用它们会发生什么呢？我们会得到一个错误:<code class="fe mw mx my mn b">Uncaught ReferenceError: can’t access lexical declaration ‘myName’ before initialization</code>。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="8c8e" class="ma ky iq mn b gy mr ms l mt mu">console.log(myName); // Uncaught ReferenceError: can’t access...</span><span id="31f9" class="ma ky iq mn b gy mv ms l mt mu">function inlineFunction(){<br/>  console.log("Hello World!");<br/>}</span><span id="4257" class="ma ky iq mn b gy mv ms l mt mu">const myName="Nissim Zarur";</span></pre><h1 id="a8f7" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">功能托管</h1><p id="6722" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">这种类型的托管非常重要，并且确实使我们的代码更加安全。我们举个例子来说明一下。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="6d90" class="ma ky iq mn b gy mr ms l mt mu">printSomething(); //Will print to the console "Hello World".<br/>function printSomething(){<br/>  console.log("Hello World");<br/>}</span></pre><p id="1806" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我们在上面的例子中所看到的，我们调用了一个还没有声明的函数，但是它仍然可以很好的工作。那是因为涉及到了‘功能托管’。在幕后，函数<code class="fe mw mx my mn b"> printSomething</code>的声明被移动到JavaScript文件的顶部。这意味着，实际上，函数调用是在声明之后而不是之前进行的。</p><p id="f713" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种魔力保护我们的代码免受在函数声明之前可能发生的错误调用。</p><h1 id="670f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">箭头函数托管</h1><p id="868e" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">好吧，那我们先从结论开始。箭头函数和常规函数的宿主行为是不一样的。让我们看看下面的例子:</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="c275" class="ma ky iq mn b gy mr ms l mt mu">printSomething(); //Uncaught TypeError: printSomething is not a function.</span><span id="968b" class="ma ky iq mn b gy mv ms l mt mu">var printSomething =&gt; (){<br/>  console.log("Hello World");<br/>}</span></pre><h2 id="8a45" class="ma ky iq bd kz mb mc dn ld md me dp lh jy mf mg ll kc mh mi lp kg mj mk lt ml bi translated">为什么会这样？</h2><p id="121b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">箭头函数的托管行为就像关键字<code class="fe mw mx my mn b">const</code>、<code class="fe mw mx my mn b">var</code>、<code class="fe mw mx my mn b">let</code>，当我们试图调用<code class="fe mw mx my mn b">printSomething</code>函数时，我们收到错误<code class="fe mw mx my mn b">Uncaught TypeError: printSomething is not a function</code>。让我们想想幕后的步骤:</p><ul class=""><li id="0edb" class="na nb iq jp b jq jr ju jv jy nc kc nd kg ne kk nf ng nh ni bi translated"><code class="fe mw mx my mn b">printSomething</code>是一个<code class="fe mw mx my mn b">var</code>变量，因此，它位于JavaScript文件的顶部。</li><li id="736e" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">变量<code class="fe mw mx my mn b">printSomething</code>收到默认值<code class="fe mw mx my mn b">undefined</code>。</li><li id="d3d7" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">我们尝试调用箭头函数<code class="fe mw mx my mn b">printSomething</code>，但是它仍然是用<code class="fe mw mx my mn b">undefined</code>的值定义的。</li><li id="8df0" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">出现错误<code class="fe mw mx my mn b">Uncaught TypeError: printSomething is not a function</code>。</li></ul></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="3f57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">感谢您迄今为止的阅读，</strong>如果您喜欢这样的内容，并且您想支持我作为一名程序员和作家撰写更多这样的文章，<a class="ae nv" href="https://medium.com/membership/@nissimzarur" rel="noopener"> <strong class="jp ir"> <em class="mz">请使用我的链接注册Medium成为会员(5美元/月订阅)，您将可以无限制地访问Medium上的所有内容。</em> </strong> </a></p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="c289" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是现在，希望你喜欢这篇文章。</p><p id="cb73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关注我，获取更多有趣且有帮助的文章。</p><p id="9d0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mz">更多内容请看</em><a class="ae nv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mz">plain English . io</em></strong></a><em class="mz">。报名参加我们的</em> <a class="ae nv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mz">免费周报</em> </strong> </a> <em class="mz">。关注我们关于</em><a class="ae nv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mz">Twitter</em></strong></a><em class="mz">和</em><a class="ae nv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mz">LinkedIn</em></strong></a><em class="mz">。查看我们的</em> <a class="ae nv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mz">社区不和谐</em> </strong> </a> <em class="mz">加入我们的</em> <a class="ae nv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mz">人才集体</em> </strong> </a> <em class="mz">。</em></p></div></div>    
</body>
</html>