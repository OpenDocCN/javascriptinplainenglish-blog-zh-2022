<html>
<head>
<title>React-Redux Simple Way to Use</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React-Redux简单易用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-redux-simple-way-to-use-fb57cf0983ee?source=collection_archive---------8-----------------------#2022-11-28">https://javascript.plainenglish.io/react-redux-simple-way-to-use-fb57cf0983ee?source=collection_archive---------8-----------------------#2022-11-28</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="1fb8" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">用一个简单的例子说明使用<strong class="ak"> Redux的最简单方法。</strong></h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/90729ba5393417eebdadaf82f7748283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1xIlIzlTjryfBOnL"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@lautaroandreani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5ad6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">大家好，</p><p id="97c7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天我来告诉你使用<strong class="kz is"> Redux </strong>最简单的方法。我没有给出复杂的例子，而是准备了一个简单而恰当的例子。</p><p id="f6cd" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">希望对刚接触<strong class="kz is"> Redux </strong>的人，很久没有重复的人，以及在使用<strong class="kz is"> Redux </strong>的时候<em class="lt">相当迷茫</em>的人有一个说明性的例子。</p><p id="436d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">该实例由两个按钮及其<code class="fe lu lv lw lx b">onClick()</code>事件组成。</p></div><div class="ab cl ly lz hv ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ik il im in io"><h2 id="a6ba" class="mf mg ir bd mh mi mj dn mk ml mm dp mn lg mo mp mq lk mr ms mt lo mu mv mw mx bi translated">那么为什么是Redux呢？</h2><p id="fc54" class="pw-post-body-paragraph kx ky ir kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ik bi translated">你可以在许多文章中找到对此的解释，但我不会详细告诉你。你可以从这些文章中学到“什么是Redux，什么是payload，什么是state……”。</p><p id="0490" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们将使用几种方法在页面之间传输数据。我们可以使用<strong class="kz is">道具</strong>，但是随着子页面的增加，这种方法<em class="lt">会杀死我们</em>。我们可以使用<strong class="kz is">上下文</strong>，但我不知道它们在非常大的项目中会有多有效。这里，Redux来帮助我们了。</p><p id="4c11" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第一步</strong></p><p id="33f5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">按照这些步骤创建react应用程序<a class="ae kw" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"/></p><p id="ebd3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第二步</strong></p><p id="5295" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">安装Redux库</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="b4c3" class="nh mg ir lx b be ni nj l nk nl">npm install @reduxjs/toolkit<br/>npm install react-redux<br/>npm install redux<br/>npm install redux-persist</span></pre><pre class="nm nd lx ne bn nf ng bi"><span id="68c7" class="nh mg ir lx b be ni nj l nk nl">yarn add @redux/toolkit<br/>yarn add react-redux<br/>yarn add redux<br/>yarn add redux-persist</span></pre><p id="1a30" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第三步</strong></p><p id="8a9f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">创建一个<strong class="kz is">存储</strong>目录<code class="fe lu lv lw lx b">./store</code></p><p id="8802" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">创建<code class="fe lu lv lw lx b">index.ts</code>文件。您的索引文件可以是这样的:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nn no l"/></div></figure><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="87cf" class="nh mg ir lx b be ni nj l nk nl">const rootReducer = combineReducers({<br/>  language: LanguageSlice,<br/>});</span></pre><p id="44e1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">rootReducer</code>是捧我们的切片。如果你有不止一个，你可以这样写:</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="b1b3" class="nh mg ir lx b be ni nj l nk nl">const rootReducer = combineReducers({<br/>  language: LanguageSlice,<br/>  users: UserSlice,<br/>  books: BookSlice<br/>  ...<br/>});</span></pre><p id="b97e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第四步</strong></p><p id="7f3f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在商店目录中创建语言目录:<code class="fe lu lv lw lx b">store/language</code></p><p id="acbd" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在语言目录下创建<code class="fe lu lv lw lx b">index.ts</code>文件</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="179a" class="nh mg ir lx b be ni nj l nk nl">import { createSlice, PayloadAction } from '@reduxjs/toolkit';<br/><br/>export type LanguageSlice = { languageCode: string; };<br/><br/>export type LanguagePlayload = { languageCode: string; };<br/><br/>const initialState: LanguageSlice = { languageCode: 'tr', };<br/><br/>const LanguageSlice = createSlice({<br/>  name: 'language',<br/>  initialState,<br/>  reducers: {<br/>    setLanguage: (<br/>      state: LanguageSlice,<br/>      action: PayloadAction&lt;LanguagePlayload&gt;<br/>    ) =&gt; {<br/>      state.languageCode = action.payload.languageCode;<br/>    },<br/>  },<br/>});<br/><br/>export const { setLanguage } = LanguageSlice.actions;<br/>export default LanguageSlice.reducer;</span></pre><p id="5bae" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们的LanguageSLice由一个值组成，这个值就是<code class="fe lu lv lw lx b">languageCode</code>。</p><p id="960d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">有效载荷包含我们将发送的值。所以我们的意思是我要改变它。</p><p id="4607" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">初始状态是切片的默认值。你可以随意定义。</p><p id="6780" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，我们将使用<code class="fe lu lv lw lx b">createSlice()</code>方法创建切片。</p><p id="f881" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们为这个切片写一个特定的名称。</p><p id="3b65" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在reducers: {}中，创建一个用于获取操作的函数。</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="37c0" class="nh mg ir lx b be ni nj l nk nl">setLanguage: (<br/>      state: LanguageSlice,<br/>      action: PayloadAction&lt;LanguagePlayload&gt;<br/>    ) =&gt; {<br/>      state.languageCode = action.payload.languageCode;<br/>    },</span></pre><p id="8e10" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">setLanguage</code>是功能。这个函数的状态将是LanguageSlice，它包含有效负载动作。我们可以将这个函数与arrow函数一起使用。</p><p id="05c2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在函数中，我们将从有效负载中获得的值设置为状态中的值。如果你有一个以上的州；</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="b646" class="nh mg ir lx b be ni nj l nk nl">setLanguage: (<br/>      state: LanguageSlice,<br/>      action: PayloadAction&lt;LanguagePlayload&gt;<br/>    ) =&gt; {<br/>      state.languageCode = action.payload.languageCode;<br/>      state.languageTitle = action.payload.languagetitle;<br/>      state.languageIcon = action.payload.languageIcon<br/>      ...<br/>    },</span></pre><p id="785f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最后，导出减速器。</p><p id="6b66" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">步骤5——在组件中使用</strong></p><p id="1379" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">打开<code class="fe lu lv lw lx b">Index.ts</code>文件，这样写；</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="f302" class="nh mg ir lx b be ni nj l nk nl">  &lt;Provider store={store}&gt;<br/>    &lt;PersistGate persistor={persistedStore}&gt;<br/>      &lt;App /&gt;<br/>    &lt;/PersistGate&gt;<br/>  &lt;/Provider&gt;</span></pre><p id="2ba4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">创建一个组件，或者使用您自己的组件</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="5095" class="nh mg ir lx b be ni nj l nk nl">const dispatch = useDispatch();<br/>const selector = useSelector((state: any) =&gt; state.language);</span></pre><p id="63a8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">dispatch</code>用于创建或更新你的减速器。</p><p id="076f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">selector</code>用于通过切片名称调用您的切片。</p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="9f92" class="nh mg ir lx b be ni nj l nk nl">  const setBlogsLanguage = (code: string) =&gt; {<br/>    dispatch(<br/>      setLanguage({<br/>        languageCode: code,<br/>      })<br/>    );<br/>  };</span></pre><p id="7f1c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">setLanguage</code>是一个函数，它是在减速器中创建的。在这个函数中，我将从<code class="fe lu lv lw lx b">code</code>更新<code class="fe lu lv lw lx b">languageCode</code>。我在<code class="fe lu lv lw lx b">button</code>发送这个值</p><p id="23ab" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，时间就是用途<code class="fe lu lv lw lx b">selector.</code></p><pre class="kh ki kj kk gu nd lx ne bn nf ng bi"><span id="63f8" class="nh mg ir lx b be ni nj l nk nl">&lt;button<br/>          className={`${<br/>            selector.languageCode === 'tr' ? 'activeButtons' : 'buttons'<br/>          }`}<br/>          onClick={() =&gt; {<br/>            setBlogsLanguage('tr');<br/>            setActiveCode('tr');<br/>          }}<br/>        &gt;<br/>          Turkısh (TR)<br/>&lt;/button&gt;<br/>&lt;button<br/>          className={`${<br/>            selector.languageCode === 'en' ? 'activeButtons' : 'buttons'<br/>          }`}<br/>          onClick={() =&gt; {<br/>            setBlogsLanguage('en');<br/>            setActiveCode('en');<br/>          }}<br/>        &gt;<br/>          English (EN)<br/>&lt;/button&gt;</span></pre><p id="8852" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我将检查<code class="fe lu lv lw lx b">selector.languageCode</code>‘tr’或‘en’</p><p id="b249" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">单击TR按钮或EN，我将更新语言片。</p></div><div class="ab cl ly lz hv ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ik il im in io"><p id="f889" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我试着用最基本的方式解释了一下，希望有用。例如，我将链接留到工作版本。您可以从那里更详细地检查代码。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="np no l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Simple React Redux Example</figcaption></figure><p id="1f01" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">谢谢你，</p><p id="60b5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">Bestte..</code></p><p id="025c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">再见。</p></div><div class="ab cl ly lz hv ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ik il im in io"><div class="kh ki kj kk gu nq"><a href="https://bestte.medium.com/membership" rel="noopener follow" target="_blank"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd is gz z fq nv fs ft nw fv fx iq bi translated">用我的推荐链接加入媒体</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">阅读Beste(以及Medium上成千上万的其他作家)的每一个故事。你的会员费直接支持Beste和…</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">bestte.medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kq nq"/></div></div></a></div><div class="of og gq gs oh nq"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-your-recursive-list-with-react-1001dc57b3c0"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd is gz z fq nv fs ft nw fv fx iq bi translated">如何用React创建你的递归列表？</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">如何通过制作递归列表来制作下拉列表？</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nz l"><div class="oi l ob oc od nz oe kq nq"/></div></div></a></div><div class="of og gq gs oh nq"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-marker-and-marker-cluster-with-leaflet-map-95e92216c391"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd is gz z fq nv fs ft nw fv fx iq bi translated">如何使用传单地图创建标记和标记簇</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">在活页地图架构中创建标记和图层，然后对标记进行聚类的方法。</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nz l"><div class="oj l ob oc od nz oe kq nq"/></div></div></a></div><div class="of og gq gs oh nq"><a rel="noopener  ugc nofollow" target="_blank" href="/graphql-services-and-mongodb-connection-b48b86289e93"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd is gz z fq nv fs ft nw fv fx iq bi translated">GraphQL服务和MongoDB连接</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">如何使用GraphQL服务写入MongoDB？</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nz l"><div class="ok l ob oc od nz oe kq nq"/></div></div></a></div><div class="of og gq gs oh nq"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-avoid-runtime-errors-for-frontend-development-d24741df4a52"><div class="nr ab fp"><div class="ns ab nt cl cj nu"><h2 class="bd is gz z fq nv fs ft nw fv fx iq bi translated">如何避免前端开发的运行时错误</h2><div class="nx l"><h3 class="bd b gz z fq nv fs ft nw fv fx dk translated">作为开发人员和测试人员，我们经常会遇到我们没有注意到的运行时错误。我们可以用…来摆脱它们</h3></div><div class="ny l"><p class="bd b dl z fq nv fs ft nw fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="nz l"><div class="ol l ob oc od nz oe kq nq"/></div></div></a></div><p id="341e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="lt">更多内容请看</em><a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lt">plain English . io</em></strong></a><em class="lt">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="lt">免费周报</em> </strong> </a> <em class="lt">。关注我们关于</em><a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lt">Twitter</em></strong></a><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lt">LinkedIn</em></strong></a><em class="lt"/><a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lt">YouTube</em></strong></a><em class="lt"/><a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lt">不和</em> </strong> </a> <em class="lt">。对增长黑客感兴趣？检查</em> <a class="ae kw" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="lt">电路</em> </strong> </a> <em class="lt">。</em></p></div></div>    
</body>
</html>