<html>
<head>
<title>How to Perform Google Login with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React执行Google登录</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-perform-google-authentication-with-react-7d43fb0e4922?source=collection_archive---------2-----------------------#2022-07-06">https://javascript.plainenglish.io/how-to-perform-google-authentication-with-react-7d43fb0e4922?source=collection_archive---------2-----------------------#2022-07-06</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="5fb2" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">使用React实现Google OAuth2</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/44a11b0f334c6a4f666bad1cd8f09828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGHkpxzlnzwfR6yBG1JgWw.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@ikukevk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kevin Ku</a> on <a class="ae kw" href="https://unsplash.com/s/photos/technology?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="db93" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果我们需要与任何Google服务进行交互，或者只是使用Google对用户进行身份验证，我们必须使用Google实现身份验证机制。一些使用案例可能是:</p><ul class=""><li id="aab6" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">使用React将文件上传到Google drive</li><li id="b086" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">从React与YouTube API交互</li><li id="9d03" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">React中与Google sheets的交互</li></ul><p id="4a5c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为了实现这一点，我们已经有了一个很好的库，叫做<a class="ae kw" href="https://www.npmjs.com/package/react-google-login" rel="noopener ugc nofollow" target="_blank">，用谷歌</a>登录。让我们看看如何利用这一点。</p><p id="0941" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">首先，安装依赖项:</p><pre class="kh ki kj kk gu mh mi mj mk aw ml bi"><span id="a705" class="mm mn ir mi b gz mo mp l mq mr">yarn add react-google-login</span></pre><h1 id="1a2f" class="ms mn ir bd mt mu mv mw mx my mz na nb jx nc jy nd ka ne kb nf kd ng ke nh ni bi translated">先决条件</h1><p id="6bde" class="pw-post-body-paragraph kx ky ir kz b la nj js lc ld nk jv lf lg nl li lj lk nm lm ln lo nn lq lr ls ik bi translated">你需要在<a class="ae kw" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云</a>上拥有一个账户。如果您还没有，请先创建一个免费帐户，然后继续。</p><p id="4482" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您还需要一个谷歌云项目，并从凭据仪表板获取CLIENT_ID。我想你已经有了。</p><h1 id="99d6" class="ms mn ir bd mt mu mv mw mx my mz na nb jx nc jy nd ka ne kb nf kd ng ke nh ni bi translated">使用谷歌登录</h1><p id="ba63" class="pw-post-body-paragraph kx ky ir kz b la nj js lc ld nk jv lf lg nl li lj lk nm lm ln lo nn lq lr ls ik bi translated">然后导入GoogleLogin并在代码中使用它。</p><pre class="kh ki kj kk gu mh mi mj mk aw ml bi"><span id="88c9" class="mm mn ir mi b gz mo mp l mq mr">import React from "react";<br/>import { GoogleLogin } from "react-google-login";</span><span id="85f2" class="mm mn ir mi b gz no mp l mq mr">const CLIENT_ID = "YOUR_CLIENT_ID_HERE";</span><span id="a62f" class="mm mn ir mi b gz no mp l mq mr">function Login() {<br/>  const responseGoogle = (response: any) =&gt; {<br/>    console.log(response.accessToken);<br/>  };<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;GoogleLogin<br/>        clientId={CLIENT_ID}<br/>        buttonText="Login"<br/>        onSuccess={responseGoogle}<br/>        onFailure={responseGoogle}<br/>        cookiePolicy={"single_host_origin"}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="2f83" class="mm mn ir mi b gz no mp l mq mr">export default Login;</span></pre><p id="3b07" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果登录成功，您将在响应对象中获得一个<code class="fe np nq nr mi b">accessToken</code>和一个<code class="fe np nq nr mi b">tokenId</code>。将令牌保存在状态变量之类的东西中。您可以使用此accessToken进一步调用其他服务。</p><h1 id="49d8" class="ms mn ir bd mt mu mv mw mx my mz na nb jx nc jy nd ka ne kb nf kd ng ke nh ni bi translated">注销</h1><p id="7c22" class="pw-post-body-paragraph kx ky ir kz b la nj js lc ld nk jv lf lg nl li lj lk nm lm ln lo nn lq lr ls ik bi translated">我们也可以使用这个库实现注销功能。</p><pre class="kh ki kj kk gu mh mi mj mk aw ml bi"><span id="5f8a" class="mm mn ir mi b gz mo mp l mq mr">import { GoogleLogout } from "react-google-login";</span><span id="ed5d" class="mm mn ir mi b gz no mp l mq mr">function Logout() {<br/>  const logoutHandler = () =&gt; {<br/>    console.log('successfully logged out!);<br/>  };<br/>  return (<br/>    &lt;GoogleLogout<br/>      clientId={CLIENT_ID}<br/>      buttonText="Logout"<br/>      onLogoutSuccess={logoutHandler}<br/>    /&gt;<br/>  );<br/>}</span><span id="a9fe" class="mm mn ir mi b gz no mp l mq mr">export default Logout;</span></pre><p id="d63e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在实际应用中，我们希望根据身份验证状态来使用这两种特性。我们可以结合这两个特性来跟踪登录状态并显示适当的组件。</p><p id="c049" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最终的代码看起来会像这样。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ns nt l"/></div></figure><p id="42ce" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你会注意到我们在这里引入了一个名为<code class="fe np nq nr mi b">scope</code>的新变量。为了调用像YouTube API或Google Drive API这样的服务，我们必须在这里定义作用域。</p><p id="9c18" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你可以从<a class="ae kw" href="https://developers.google.com/oauthplayground/" rel="noopener ugc nofollow" target="_blank"> OAuth2游乐场</a>拿到望远镜。</p><h2 id="27c6" class="mm mn ir bd mt nu nv dn mx nw nx dp nb lg ny nz nd lk oa ob nf lo oc od nh oe bi translated">例子</h2><pre class="kh ki kj kk gu mh mi mj mk aw ml bi"><span id="bcd9" class="mm mn ir mi b gz mo mp l mq mr">GOOGLE_DRIVE_SCOPE = "https://www.googleapis.com/auth/drive";<br/>YOUTUBE_DATA_API_V3 = "https://www.googleapis.com/auth/youtube";</span></pre><p id="8b84" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天到此为止！希望你学到了新的东西！</p><pre class="kh ki kj kk gu mh mi mj mk aw ml bi"><span id="c714" class="mm mn ir mi b gz mo mp l mq mr"><strong class="mi is">Want to Connect?</strong></span><span id="e216" class="mm mn ir mi b gz no mp l mq mr">You can reach out to me via <a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="mi is">LinkedIN</strong></a> or my <a class="ae kw" href="https://www.mohammadfaisal.dev/blog" rel="noopener ugc nofollow" target="_blank"><strong class="mi is">Personal Website</strong></a></span></pre><h1 id="7816" class="ms mn ir bd mt mu mv mw mx my mz na nb jx nc jy nd ka ne kb nf kd ng ke nh ni bi translated">Github回购</h1><div class="of og gq gs oh oi"><a href="https://github.com/Mohammad-Faisal/react-google-authentication-demo" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fp"><div class="ok ab ol cl cj om"><h2 class="bd is gz z fq on fs ft oo fv fx iq bi translated">GitHub-Mohammad-fais al/react-google-authentic ation-demo:使用ReactJS的Google认证演示</h2><div class="op l"><h3 class="bd b gz z fq on fs ft oo fv fx dk translated">如果我们需要与任何谷歌服务进行交互，或者只是使用谷歌认证用户，我们必须实现…</h3></div><div class="oq l"><p class="bd b dl z fq on fs ft oo fv fx dk translated">github.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow kq oi"/></div></div></a></div><p id="0e92" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="ox">更多内容请看</em><a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="ox">plain English . io</em></strong></a><em class="ox">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="ox">免费周报</em> </strong> </a> <em class="ox">。关注我们关于</em><a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="ox">Twitter</em></strong></a><em class="ox">和</em><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="ox">LinkedIn</em></strong></a><em class="ox">。查看我们的</em> <a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="ox">社区不和谐</em> </strong> </a> <em class="ox">加入我们的</em> <a class="ae kw" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="ox">人才集体</em> </strong> </a> <em class="ox">。</em></p></div></div>    
</body>
</html>