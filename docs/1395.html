<html>
<head>
<title>Add A WordPress-Style Update Utility To Any Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给任何应用程序添加一个WordPress风格的更新工具</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-a-wordpress-style-update-utility-to-any-application-48bd33d9b3ff?source=collection_archive---------19-----------------------#2022-03-21">https://javascript.plainenglish.io/add-a-wordpress-style-update-utility-to-any-application-48bd33d9b3ff?source=collection_archive---------19-----------------------#2022-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="e323" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">WebTigers的一个收费工具</h2><div class=""/><div class=""><h2 id="6bfd" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用JavaScript、PHP、Composer和GitHub，一键更新您的最终用户应用程序</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d63fd5f68349b416ec74a18cf8b869aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*noT6TSM2B7CLIxsDv9prUA.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Image by GaudiLab via DepositPhotos</figcaption></figure><p id="3781" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您可以将代码推送到GitHub并自动更新您安装的数百万个应用程序，这不是很酷吗？您的用户会得到通知，有新的插件、模块或应用程序更新可供下载和安装——只需点击鼠标！</p><p id="c11f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，您可以使用一个使用JavaScript、PHP、Composer和GitHub的WordPress风格的更新工具，为您的可下载应用程序添加自我更新的优雅。</p><h1 id="8210" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">老虎来了</h1><p id="b4bc" class="pw-post-body-paragraph le lf iq lg b lh ms ka lj lk mt kd lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">自我更新的应用程序并不是一件小事，但是Tiger为您提供了所有必要的构建模块，让您可以立即建立并运行自己的应用程序包管理器！</p><p id="d5f9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">WordPress为他们的插件使用了一个封闭的Subversion库(ewww！).这个回购是用来更新WordPress本身和几万个插件的。但是WordPress repo不做的是管理依赖、冲突或者更新你的应用程序需要的其他库。事实上，WordPress将允许你下载会破坏你的安装的插件，让你手动删除表现不好或互不兼容的插件。</p><p id="0504" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">Tiger的更新功能非常不同。</p><p id="b4ea" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">利用Composer的依赖管理和GitHub，Tiger向您展示了如何轻松地向您的应用程序添加一个全面服务的UI驱动的包管理器。</p><p id="9fff" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这不是Tiger的商业广告，代码是公开的，您可以在自己的应用程序中根据自己的需要使用。如果你想看的话，它正好在Tiger中运行。</p><p id="96ad" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">要查看Tiger的运行情况，您可以<a class="ae mx" href="https://aws.amazon.com/marketplace/pp/prodview-wixkz63qgutes" rel="noopener ugc nofollow" target="_blank">免费启动AWS Tiger实例</a>并导航到包管理器。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/33183d90702c02f3c449cc3784df317c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UpJdkqGFdA9LuVc942vFwg.png"/></div></div></figure><h1 id="f7a9" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">安装</h1><p id="e53e" class="pw-post-body-paragraph le lf iq lg b lh ms ka lj lk mt kd lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">Tiger的包管理器是<a class="ae mx" href="https://WebTigers.com" rel="noopener ugc nofollow" target="_blank"> Tiger平台</a>的一个模块，你可以用它轻松地将你自己的自我更新功能构建到你可下载的应用程序中。</p><p id="b013" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">还是那句话，不一定要用老虎平台。<a class="ae mx" href="https://github.com/WebTigers/Tiger/tree/master/application/modules/package" rel="noopener ugc nofollow" target="_blank"> Tiger的包模块</a>给了你创建自己的更新功能所需的所有类和函数方法。</p><p id="80e3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">唯一真正的依赖是您需要在您的主机上安装并运行is Composer。在共享主机环境中，这会增加一些设置步骤，因为cPanel还没有提供将Composer安装到用户目录中的功能。我发现这篇<a class="ae mx" href="https://www.freecodeblog.com/posts/install-composer-on-shared-hosting-cpanel" rel="noopener ugc nofollow" target="_blank">博客文章</a>对运行在cPanel这样的共享托管环境中的应用程序很有帮助。</p><p id="142e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦PHP通过PHP的<code class="fe mz na nb nc b">shell_exec()</code>函数访问Composer，您就可以自由地使用应用程序的自动更新功能了！</p><h1 id="d037" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">在后台</h1><p id="d8d5" class="pw-post-body-paragraph le lf iq lg b lh ms ka lj lk mt kd lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">Tiger的包管理器充当Composer的GUI包装器，允许您使用简单的HTML表单和MariaDB (MySQL)表来管理应用程序的可更新特性，如:插件、模块或任何您想要更新的代码。</p><p id="fa7f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="nd">“我为什么需要GUI？只需从命令行运行Composer。</em></p><p id="771f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">因为最终用户对命令行一无所知。这就是为什么我们作为工程师必须为他们建立图形用户界面。</p><p id="fedc" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="nd">“哦。”</em></p><p id="c876" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">另一个原因是Composer并没有把它的库文件写到应用程序文件夹结构中你可能需要它们的地方。它可以把它们写到你想写的任何地方，但这可能不是一个最佳实践。我宁愿从我的应用程序中复制或符号链接到这些文件。我们越少干扰作曲家的自然行为，越好。</p><p id="fd1d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这种复制和链接也允许我们<em class="nd">激活</em>和<em class="nd">去激活</em>没有使用的模块和插件，就像WordPress对其插件所做的一样。</p><p id="0284" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">好消息是Tiger的Composer服务处理了所有繁重的工作，比如使用Composer，甚至用兼容Composer的、人类可读的JSON修改应用程序的<code class="fe mz na nb nc b">composer.json</code>文件。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ne"><img src="../Images/61324d98f1cd514cb604afda43e2dd00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xalViMy3NG7Wx4ut9cnOxg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Image by yacobchuk1 via DepositPhotos</figcaption></figure><h1 id="cded" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">创建可安装/可更新的模块或插件</h1><p id="d2e5" class="pw-post-body-paragraph le lf iq lg b lh ms ka lj lk mt kd lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">假设您已经创建了一个类似于Tiger使用的模块化应用程序或插件结构，那么您可以用您的插件或模块代码填充GitHub repo。</p><p id="717d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">请注意，对于您想要为其提供安装和更新功能的每个插件或模块，您将需要一个公共或私有的GitHub repo。</p><p id="79bf" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您的回购是私人的，您将需要提供一个<a class="ae mx" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token" rel="noopener ugc nofollow" target="_blank">个人访问令牌</a>，允许Composer访问您的私人回购进行读取。Tiger的许多模块都是私有的，Tiger使用嵌入在其配置中的个人访问令牌来读取这些私有的回购协议。个人访问令牌的这种特殊使用并不意味着任何形式的绝对安全，它只是为了防止私人回购被盗用或其他版权内容被下载到Tiger之外。当您发布自己的公共或私有代码时，请记住这一点。</p><p id="793b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了使您的模块与Composer兼容，您需要创建一个微小的<code class="fe mz na nb nc b">composer.json</code>文件，作为您的模块或插件代码的一部分。Tiger的包模块的<code class="fe mz na nb nc b">composer.json</code>文件是这样的:</p><pre class="kp kq kr ks gt nf nc ng nh aw ni bi"><span id="b070" class="nj mb iq nc b gy nk nl l nm nn">{<br/>   "name":"webtigers/package",<br/>   "type":"tiger-module",<br/>   "description":"WebTiger's Tiger Platform Package Module",<br/>   "license":"proprietary",<br/>   "minimum-stability":"stable",<br/>   "keywords":[<br/>      "package",<br/>      "tiger",<br/>      "webtigers"<br/>   ],<br/>   "homepage":"https://webtigers.com"<br/>}</span></pre><p id="107e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">非常简单，但是Composer需要这个文件，主要是为了告诉Composer，<em class="nd">“嘿，我是一个VCS控制的存储库，您可以使用它。”</em> VCS是“版本控制系统”。Tiger的包管理器使用这些参数中的一些来通知Tiger这是什么类型的包，在这种情况下，包管理器知道这是一个将要自我更新的<code class="fe mz na nb nc b">tiger-module</code>，因为它是<code class="fe mz na nb nc b">webtigers/package</code>。</p><p id="09a1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，让我们看看如何向Tiger添加一个新模块，或者您可以在自己的应用程序中使用什么:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/c6428a63c02d88a0b4e64ecf801150b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Je7-UKijplX9OgnuXcJ-aQ.png"/></div></div></figure><p id="7972" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">添加一个新的插件或包很简单，只需用一些设置填写表单，这些设置告诉Composer什么包、版本首选项、存储库类型以及下载和安装新代码(在本例中是模块)所需的URL。</p><p id="dd0a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">你也可以为你的应用程序创建一个各种插件和模块的集中数据库，让你像WordPress一样一键安装。Tiger还没有这样的产品，但它肯定会出现在绘图板上。</p><h1 id="a739" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">在GitHub中发布版本</h1><p id="abe0" class="pw-post-body-paragraph le lf iq lg b lh ms ka lj lk mt kd lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">告诉Composer使用哪个版本的插件或模块是由GitHub的发布管理控制的。每次您将新提交的代码推送到GitHub时，您都需要对该提交进行“发布”,并对其进行版本化。然后，GitHub会维护您每个版本的完整版本历史。</p><p id="86b5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">GitHub最喜欢的版本语法是这样的:</p><pre class="kp kq kr ks gt nf nc ng nh aw ni bi"><span id="7afb" class="nj mb iq nc b gy nk nl l nm nn">v2.4.0</span></pre><p id="3539" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">请注意版本号前面的“v”。我不太清楚为什么要这样做，但作曲家也更喜欢这样。</p><p id="fbc1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">使用Composer胜过WordPress的一个很酷的地方是，如果有必要，你可以使用旧版本的软件包。WordPress只允许你升级，不允许降级。</p><h1 id="152a" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">检查更新的软件包</h1><p id="a751" class="pw-post-body-paragraph le lf iq lg b lh ms ka lj lk mt kd lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">Tiger每天检查是否有更新的包，然后用版本中的任何变化更新数据库。这可以通过一个简单的CRON作业在后台完成。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/b83dda53d3362c69b592e00d6ab87e63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x-XF__q9QFPEU2yeb3PhJQ.png"/></div></div></figure><p id="1b73" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您也可以从GUI中手动运行该作业。该作业在每个libraries Composer控件中循环运行，最多需要一分钟左右的时间。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nq"><img src="../Images/4d3851972c274ab217ba3fb853b2b3ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lTBkcNLdWNiisnmraAzuFA.png"/></div></div></figure><p id="478c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果出现问题，Composer通常会超时，或者出现其他错误，不会出现任何问题。您可以多次运行扫描，直到它无错误地完成。</p><h1 id="4c45" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">结论</h1><p id="8215" class="pw-post-body-paragraph le lf iq lg b lh ms ka lj lk mt kd lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">创建可自我更新的应用程序并不困难。</p><p id="42ec" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">使用Tiger作为您的应用程序平台，这项工作已经为您完成了。但是如果你已经有了一个运行的应用程序，你可以随意劫持、借用、复制或者从Tiger的包管理器和Composer服务中获得灵感。GitHub上的公开回购正是为了这个目的。</p><p id="ef08" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是我为Tiger编写的非常酷的代码，它也可以帮助完善您的可下载终端用户应用程序！</p><p id="169d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi">____________________</p><p id="de61" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">Beau Beauchamp是一名web应用程序架构师，拥有20多年在云中开发企业级应用程序的经验；他是<a class="ae mx" href="https://webtigers.com/" rel="noopener ugc nofollow" target="_blank"><em class="nd">WebTigers</em></a><em class="nd">的创始人，也是老虎平台背后的首席开发者。</em></p><p id="39c5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="nd">更多内容看</em> <a class="ae mx" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja"> <em class="nd">说白了。报名参加我们的</em> <a class="ae mx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja"> <em class="nd">免费周报</em> </strong> </a> <em class="nd">。关注我们关于</em><a class="ae mx" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lg ja"><em class="nd">Twitter</em></strong></a><em class="nd">和</em><a class="ae mx" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lg ja"><em class="nd">LinkedIn</em></strong></a><em class="nd">。加入我们的</em> <a class="ae mx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja"> <em class="nd">社区</em> </strong> </a> <em class="nd">。</em></strong></a></p></div></div>    
</body>
</html>