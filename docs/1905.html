<html>
<head>
<title>Puppeteer — Click All Cookie Popups</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">木偶师—单击所有Cookie弹出窗口</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/puppeteer-cookie-popup-click-a027ffe71ef7?source=collection_archive---------6-----------------------#2022-04-28">https://javascript.plainenglish.io/puppeteer-cookie-popup-click-a027ffe71ef7?source=collection_archive---------6-----------------------#2022-04-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="498b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如果你曾经使用过木偶师，你可能会遇到点击cookie弹出窗口部件的问题。我是来帮你的！</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/047eeeb946e975f67a7ab159fff93322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8wfZkYbavjkC623PU3Tyeg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Puppeteer click popup</figcaption></figure><p id="0863" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">关于堆栈溢出，我读到过很多人在自动点击“未知”弹出窗口时遇到问题。您想要自动点击这些弹出窗口可能有各种各样的原因，但总体问题是一样的。</p><p id="5d2f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">任何需要单击cookie同意弹出窗口的人都会出现此问题。这些通常被称为CMP(同意管理平台)。在欧洲大部分地区，如果你想展示广告或以其他方式设置cookies来跟踪你的用户，这些都是法律要求。</p><p id="e829" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">最近，我需要为100多个网站动态点击这些同意弹出窗口，每个网站都可以独立地更改它们的CMP。由于目前没有图书馆可以做到这一点，我决定开始创建自己的图书馆。</p><h2 id="4e80" class="lo lp in bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated"><strong class="ak">简介</strong></h2><p id="acca" class="pw-post-body-paragraph ks kt in ku b kv mh jo kx ky mi jr la lb mj ld le lf mk lh li lj ml ll lm ln ig bi translated">没有点击这些弹出窗口小部件的通用方法，因为有许多不同的实现方式。然而，我们想要点击的东西总是页面上的一些HTML元素。我还没有遇到过技术上不可能通过自动化点击的弹出窗口。</p><p id="fc39" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我以前写过如何让<a class="ae mm" href="https://awstip.com/serverless-puppeteer-on-aws-5162459a4c44" rel="noopener ugc nofollow" target="_blank">木偶师与无服务器</a>一起工作，因为我想自动化这一点，所以木偶师可以自动点击这些，我需要一种方法来指导木偶师如何点击这些。关于图书馆的细节可以进一步要求，我很乐意分享更多的细节。长话短说，我的木偶师“插件”的输出是这样的:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The CMP click result for 5 pages</figcaption></figure><p id="1025" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">为了达到上面的结果，我在这里创建了一个npm包:【https://www.npmjs.com/package/puppeteer-cmp-clicker<a class="ae mm" href="https://www.npmjs.com/package/puppeteer-cmp-clicker" rel="noopener ugc nofollow" target="_blank"/></p><p id="c4d1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我是如何创建这个包的，在这里描述<a class="ae mm" href="https://medium.com/@emilhein1/publish-a-npm-package-in-2022-40dbaaa5b92c" rel="noopener"/>。基本的想法是，我希望人们做出贡献，所以不同的弹出窗口(主要是CMP)和已知的Id和类选择器的“策略”的集合。目前，基本功能如下所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/9594a0b5597d54e1d141c41c3d5544ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*ishtlkZshvXXm_7ti_Dw3A.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Known CMPs + ids and classes</figcaption></figure><p id="8b9c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">目前，该库包含一个已知CMP的小列表，以及如何点击它们的特定策略。这可能是因为他们使用了iframes或其他“复杂”的结构。除此之外，id选择器和类选择器的全局列表包含在包中。当您设置包时，这些列表是可扩展的，但是总的目标是在模块中包含尽可能多的已知策略、id和类。</p><div class="mq mr gp gr ms mt"><a href="https://github.com/emilhein/puppeteer-cmp-clicker" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd io gy z fp my fr fs mz fu fw im bi translated">GitHub-emil hein/puppet eer-cmp-clicker:单击CMP弹出窗口小部件的辅助函数</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">现在我只有一个功能1。</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">github.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh km mt"/></div></div></a></div><p id="82bb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io"> <em class="ni">将会更新。</em>T11】</strong></p><p id="64ae" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="ni">更多内容请看</em><a class="ae mm" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="ni">plain English . io</em></strong></a><em class="ni">。报名参加我们的</em> <a class="ae mm" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="ni">免费周报</em> </strong> </a> <em class="ni">。关注我们关于</em><a class="ae mm" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="ni">Twitter</em></strong></a><em class="ni">和</em><a class="ae mm" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="ni">LinkedIn</em></strong></a><em class="ni">。查看我们的</em> <a class="ae mm" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="ni">社区不和谐</em> </strong> </a> <em class="ni">加入我们的</em> <a class="ae mm" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="ni">人才集体</em> </strong> </a> <em class="ni">。</em></p></div></div>    
</body>
</html>