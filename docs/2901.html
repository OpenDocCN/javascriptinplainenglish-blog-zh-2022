<html>
<head>
<title>JavaScript Hoisting— A Comprehensive Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提升——综合指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-hoisting-a-comprehensive-guide-89211c219d45?source=collection_archive---------13-----------------------#2022-07-13">https://javascript.plainenglish.io/javascript-hoisting-a-comprehensive-guide-89211c219d45?source=collection_archive---------13-----------------------#2022-07-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="cca4" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于JavaScript提升你应该知道的一切。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/c8aac05d13d5af6f7c59b09a8dd9fd32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*RbMacHBAn9q1FVtRz5wBRA.png"/></div></figure><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="2c61" class="kp kq in kl b gy kr ks l kt ku">var name = 'John';</span><span id="b457" class="kp kq in kl b gy kv ks l kt ku">function printName() {<br/>  console.log(name);<br/>  var name = 'Mike';<br/>  console.log(name);<br/>}</span><span id="3027" class="kp kq in kl b gy kv ks l kt ku">printName();</span></pre><p id="6f33" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">你能说出上面代码示例中的<code class="fe ls lt lu kl b">console.log()</code>会打印出什么吗？</p><p id="30c3" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">你能给出正确的答案吗？你能解释你的答案吗？</p><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="c4d6" class="kp kq in kl b gy kr ks l kt ku">printNumber();</span><span id="a65c" class="kp kq in kl b gy kv ks l kt ku">var printNumber;</span><span id="09e4" class="kp kq in kl b gy kv ks l kt ku">function printNumber() {<br/>  console.log(1);<br/>}</span><span id="5444" class="kp kq in kl b gy kv ks l kt ku">printNumber = function () {<br/>  console.log(2);<br/>};</span></pre><p id="1e20" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">上述代码示例的输出会是什么？</p><p id="1820" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">是1还是2？</p><p id="3da6" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">你能解释它是如何发生的吗？</p><p id="4e6d" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">如果我把<code class="fe ls lt lu kl b">printNumber()</code>函数移到代码块的底部会怎么样？</p><p id="cd61" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">如果你对<strong class="ky io"> JavaScript提升</strong>有更好的理解，你就可以对以上问题给出恰当的答案。如果你做不到，不要担心。今天就来了解一下吧…😎</p><p id="1938" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><strong class="ky io">根据</strong> <a class="ae lv" href="https://developer.mozilla.org/en-US/docs/Glossary/Hoisting" rel="noopener ugc nofollow" target="_blank"> <strong class="ky io"> MDN </strong> </a>，<em class="lw"><br/></em><strong class="ky io"><em class="lw"/></strong><em class="lw">JavaScript提升是指在执行代码之前，解释器将函数或变量的声明移动到其作用域的顶部的过程。</em><strong class="ky io"><em class="lw"/></strong></p><p id="5e5a" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">那是什么意思？</p><p id="ef13" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">JavaScript在执行特定代码块之前创建<a class="ae lv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" rel="noopener ugc nofollow" target="_blank">执行上下文</a>。JavaScript将在创建执行上下文时为变量和函数分配内存。</p><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="8818" class="kp kq in kl b gy kr ks l kt ku">console.log(str); <em class="lw">// undefined<br/></em>console.log(fn); <em class="lw">// ƒ fn() { console.log(str) }</em></span><span id="f729" class="kp kq in kl b gy kv ks l kt ku">str = 'John Doe';</span><span id="9d14" class="kp kq in kl b gy kv ks l kt ku">var str;</span><span id="d27f" class="kp kq in kl b gy kv ks l kt ku">function fn() {<br/>  console.log(str)<br/>}</span></pre><p id="5650" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><code class="fe ls lt lu kl b">console.log()</code>上述代码示例中的语句将一些值打印到控制台，尽管<code class="fe ls lt lu kl b">str</code>和<code class="fe ls lt lu kl b">fn</code>既没有声明也没有初始化。在运行脚本之前创建执行上下文的过程中，JavaScript为<code class="fe ls lt lu kl b">str</code>和<code class="fe ls lt lu kl b">fn.</code>分配内存，用<code class="fe ls lt lu kl b">undefined</code>初始化<code class="fe ls lt lu kl b">str</code>，用<code class="fe ls lt lu kl b">fn</code>函数初始化<code class="fe ls lt lu kl b">fn</code>。所以我们可以说上面脚本中的<code class="fe ls lt lu kl b">str</code>变量和<code class="fe ls lt lu kl b">fn</code>函数是<strong class="ky io">吊起来的</strong>。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><p id="29eb" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">我们可以将JS吊装分为以下两大部分。</p><ol class=""><li id="fdb0" class="me mf in ky b kz la lc ld lf mg lj mh ln mi lr mj mk ml mm bi translated">可变提升</li><li id="a250" class="me mf in ky b kz mn lc mo lf mp lj mq ln mr lr mj mk ml mm bi translated">功能提升</li></ol><h2 id="2a5b" class="kp kq in bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated">可变提升</h2><p id="3dc4" class="pw-post-body-paragraph kw kx in ky b kz nj jo lb lc nk jr le lf nl lh li lj nm ll lm ln nn lp lq lr ig bi translated">用<code class="fe ls lt lu kl b">var</code>、<code class="fe ls lt lu kl b">let</code>和<code class="fe ls lt lu kl b">const</code>定义的变量被提升到程序块的顶部。</p><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="21f9" class="kp kq in kl b gy kr ks l kt ku">console.log(str); // undefined<br/>str = 'John Doe';<br/>var str;</span></pre><p id="0d68" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">如果您在浏览器中运行上述代码示例，您将在浏览器控制台中看到<code class="fe ls lt lu kl b">undefined</code>。</p><p id="d9a5" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><strong class="ky io"> <em class="lw"> JavaScript只将变量的声明提升到顶部，而没有将变量的初始化</em> </strong>。</p><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="eae7" class="kp kq in kl b gy kr ks l kt ku">// ReferenceError: Cannot access 'str' before initialization<br/>console.log(str1);</span><span id="1e04" class="kp kq in kl b gy kv ks l kt ku">str1 = 'John Doe';<br/>let str1;</span><span id="56bd" class="kp kq in kl b gy kv ks l kt ku">// SyntaxError: Missing initializer in const declaration<br/>console.log(str2);</span><span id="2559" class="kp kq in kl b gy kv ks l kt ku">str2 = 'John Doe';<br/>const str2;</span></pre><p id="f8b9" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">运行上面的代码示例将给出一个用于在初始化前访问<code class="fe ls lt lu kl b">str1</code>的<code class="fe ls lt lu kl b">ReferenceError</code>，以及一个用于在没有初始化的情况下定义<code class="fe ls lt lu kl b">const</code>的<code class="fe ls lt lu kl b">SyntaxError</code>。原因是代码块知道变量，但是在声明之前不能使用它们。从块的开始到声明，这些变量都在一个<strong class="ky io">时间死区</strong>中。</p><p id="07d0" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">变量提升的结论是:所有用<code class="fe ls lt lu kl b">var</code>、<code class="fe ls lt lu kl b">let</code>、<code class="fe ls lt lu kl b">const</code>定义的变量都是<strong class="ky io">提升</strong>。但是只有用<code class="fe ls lt lu kl b">var</code>定义的变量才会用<code class="fe ls lt lu kl b">undefined</code>初始化。一个JavaScript块中的变量是<strong class="ky io"> <em class="lw">部分提升</em> </strong>。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><h2 id="f008" class="kp kq in bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated">功能提升</h2><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="c089" class="kp kq in kl b gy kr ks l kt ku">console.log(sayHello); <br/>// ƒ sayHello() { console.log('Hello World...!'); }</span><span id="8108" class="kp kq in kl b gy kv ks l kt ku">function sayHello() {<br/>  console.log('Hello World...!');<br/>}</span></pre><p id="a0f4" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">如果您在浏览器中运行上面的代码示例，您将看到完整的<code class="fe ls lt lu kl b">sayHello</code>函数。所以一个JavaScript块中的变量是<strong class="ky io"> <em class="lw">全吊</em> </strong>。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><p id="ae54" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">现在让我们看看在JavaScript面试中你会被问到的一些有趣的问题。</p><h2 id="b19b" class="kp kq in bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated">问题1</h2><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="ab7f" class="kp kq in kl b gy kr ks l kt ku">printNumber();</span><span id="cf0b" class="kp kq in kl b gy kv ks l kt ku">var printNumber;</span><span id="ca0c" class="kp kq in kl b gy kv ks l kt ku">function printNumber() {<br/>  console.log(1);<br/>}</span><span id="e227" class="kp kq in kl b gy kv ks l kt ku">printNumber = function () {<br/>  console.log(2);<br/>};</span></pre><p id="873e" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">它将记录1。现在你知道原因了。</p><p id="dde5" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">如果我们将<code class="fe ls lt lu kl b">printNumber()</code>函数调用移到块的底部会发生什么？现在它将记录2。</p><p id="ac6e" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><code class="fe ls lt lu kl b">printNumber</code>变量在上面脚本的底部被初始化，它代替了<code class="fe ls lt lu kl b">printNumber()</code>函数，并导致log 2到控制台。但是在第一种情况下，<code class="fe ls lt lu kl b">printNumber</code>变量没有用第二个函数初始化。由于用<code class="fe ls lt lu kl b">var</code>定义的变量被部分提升，它们将用<code class="fe ls lt lu kl b">undefined</code>初始化。</p><h2 id="fd3d" class="kp kq in bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated">问题2</h2><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="35bb" class="kp kq in kl b gy kr ks l kt ku">sayHello();</span><span id="6924" class="kp kq in kl b gy kv ks l kt ku">var sayHello = function () {<br/>  console.log('Hello world..!');<br/>};</span></pre><p id="6dfd" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">上述代码示例的输出会是什么？它将给出一个<code class="fe ls lt lu kl b">TypeError</code>，因为<code class="fe ls lt lu kl b">sayHello</code>变量的值是<code class="fe ls lt lu kl b">undefined</code>，直到它被函数初始化。</p><h2 id="e699" class="kp kq in bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated">问题3</h2><pre class="kd ke kf kg gt kk kl km kn aw ko bi"><span id="7119" class="kp kq in kl b gy kr ks l kt ku">var name = 'John';</span><span id="810d" class="kp kq in kl b gy kv ks l kt ku">function printName() {<br/>  console.log(name);<em class="lw"><br/>  </em>var name = 'Mike';<br/>  console.log(name);<em class="lw"><br/></em>}</span><span id="fd80" class="kp kq in kl b gy kv ks l kt ku">printName();</span></pre><p id="3b5c" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">上述代码示例的输出会是什么？</p><p id="738e" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">第一个<code class="fe ls lt lu kl b">console.log()</code>里会是<code class="fe ls lt lu kl b">undefined</code>第二个会记录“Mike”。</p><p id="adc8" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">这是怎么发生的？</p><p id="56f2" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">在创建全局执行上下文时，<code class="fe ls lt lu kl b">name</code>将用“John”初始化。但是，在调用<code class="fe ls lt lu kl b">printName()</code>函数时，JavaScript解释器将为<code class="fe ls lt lu kl b">printName()</code>函数创建另一个执行上下文，并且<code class="fe ls lt lu kl b">name</code>将是<code class="fe ls lt lu kl b">undefined</code>，直到它被“迈克”初始化。这就是在第一个<code class="fe ls lt lu kl b">console.log()</code>中将<code class="fe ls lt lu kl b">name</code>记为<code class="fe ls lt lu kl b">undefined</code>的原因。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><h1 id="6815" class="no kq in bd ms np nq nr mv ns nt nu my jt nv ju nb jw nw jx ne jz nx ka nh ny bi translated">你是JavaScript爱好者吗？</h1><p id="3d8f" class="pw-post-body-paragraph kw kx in ky b kz nj jo lb lc nk jr le lf nl lh li lj nm ll lm ln nn lp lq lr ig bi translated">请阅读下面我写的文章，了解一些关于JavaScript的令人兴奋的事情。</p><ul class=""><li id="8323" class="me mf in ky b kz la lc ld lf mg lj mh ln mi lr nz mk ml mm bi translated"><a class="ae lv" href="https://medium.com/@sudarshanadayananda/what-is-a-closure-in-js-eab2fcb68ccc" rel="noopener"> <em class="lw">什么是JavaScript中的闭包——综合指南</em> </a></li><li id="cb81" class="me mf in ky b kz mn lc mo lf mp lj mq ln mr lr nz mk ml mm bi translated"><a class="ae lv" rel="noopener ugc nofollow" target="_blank" href="/arrow-functions-vs-regular-functions-in-js-fa1a1f235c86"> <em class="lw">箭头函数与JavaScript中的常规函数——综合指南</em> </a></li><li id="e282" class="me mf in ky b kz mn lc mo lf mp lj mq ln mr lr nz mk ml mm bi translated"><a class="ae lv" rel="noopener ugc nofollow" target="_blank" href="/what-is-strict-mode-in-javascript-a-comprehensive-guide-b3fcd9daa220"> <em class="lw">什么是JavaScript中的严格模式—综合指南</em> </a></li><li id="4622" class="me mf in ky b kz mn lc mo lf mp lj mq ln mr lr nz mk ml mm bi translated"><a class="ae lv" rel="noopener ugc nofollow" target="_blank" href="/local-storagevs-session-storage-in-javascript-a-comprehensive-guide-df887398e69"><em class="lw">JavaScript中的本地存储与会话存储—综合指南</em> </a></li></ul><p id="d717" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">感谢阅读。😍</p><p id="26c2" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">希望你从这篇文章中学到一些新东西。以后请跟着我看这类文章。干杯！</p><p id="b830" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><em class="lw">更多内容请看</em><a class="ae lv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky io"><em class="lw">plain English . io</em></strong></a><em class="lw">。报名参加我们的</em> <a class="ae lv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky io"> <em class="lw">免费周报</em> </strong> </a> <em class="lw">。关注我们关于</em><a class="ae lv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky io"><em class="lw">Twitter</em></strong></a><em class="lw">和</em><a class="ae lv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky io"><em class="lw">LinkedIn</em></strong></a><em class="lw">。查看我们的</em> <a class="ae lv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky io"> <em class="lw">社区不和谐</em> </strong> </a> <em class="lw">加入我们的</em> <a class="ae lv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky io"> <em class="lw">人才集体</em> </strong> </a> <em class="lw">。</em></p></div></div>    
</body>
</html>