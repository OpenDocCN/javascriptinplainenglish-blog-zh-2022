<html>
<head>
<title>How to Create a React Native Video Player Using Expo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Expo创建React本地视频播放器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-react-native-video-player-using-expo-downloadable-project-included-feaa78c0db60?source=collection_archive---------4-----------------------#2022-05-03">https://javascript.plainenglish.io/how-to-create-react-native-video-player-using-expo-downloadable-project-included-feaa78c0db60?source=collection_archive---------4-----------------------#2022-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f413" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Expo创建React原生视频播放器所需的一切。</h2></div><p id="82c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将从头开始讲述如何在React原生跨平台上创建一个简单的视频播放器，该播放器将使用Expo在Android和IOS操作系统上播放视频。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/e5f8ecf3b139413f396928fdd300df58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54JOP4acr4ZYGld1OkptIA.png"/></div></div></figure><h1 id="fbf8" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">创建世博项目</h1><p id="a330" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">让我们使用Expo CLI创建一个新项目，方法是在终端中键入下一个命令(首先检查您是否在您想要的当前路径中):<code class="fe mk ml mm mn b"><strong class="kh ir">expo init video-player</strong></code>。该命令将询问您想要什么类型的项目，空白JavaScript还是空白TypeScript，在本文中，我将选择空白TypeScript。现在我们等待几秒钟，我们的Expo项目就可以开始工作了。</p><p id="b45c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装完成后，打开终端，运行下一个命令，用Android/IOS模拟器运行项目。<code class="fe mk ml mm mn b"><strong class="kh ir">expo start</strong></code>命令将向您显示一个带有运行项目选项的菜单，并选择您的模拟器偏好:“a”用于Android，“I”用于IOS。选择之后，模拟器将构建并运行项目。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/e31ba579c333c6bdcc6c53fae4fada15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*-7jV-kqd-XGWZZz23ZSQLA.png"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">Project Done With React Native &amp; Expo</figcaption></figure><h1 id="5b76" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">视频组件安装</h1><p id="9fd0" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">创建项目后，我们现在可以导入视频组件。视频组件是来自<code class="fe mk ml mm mn b"><strong class="kh ir">expo-av</strong></code>的一个组件，它在你的应用程序中显示与其他UI元素一致的视频，所以要使用视频组件，我们应该先安装<code class="fe mk ml mm mn b"><strong class="kh ir">expo-av</strong></code> <strong class="kh ir"> </strong>。在项目根路径中打开终端，键入下一个命令:<code class="fe mk ml mm mn b"><strong class="kh ir">expo install expo-av</strong></code>。这将把库导入到我们的项目依赖项中。</p><h1 id="b001" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">准备</h1><p id="d32a" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">在使用之前，让我们打开App.tsx文件，您应该会看到下面的代码行:</p><pre class="lc ld le lf gt mt mn mu mv aw mw bi"><span id="36d8" class="mx lo iq mn b gy my mz l na nb">export default function App() {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      <strong class="mn ir">&lt;Text&gt;Open up App.tsx to start working on your app!&lt;/Text&gt;<br/>      &lt;StatusBar style="auto" /&gt;</strong><br/>    &lt;/View&gt;<br/>  );<br/>}</span></pre><p id="e705" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在删除选中的粗体代码行。在视图标签中，我们将创建我们的视频播放器。</p><h1 id="ea6d" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用</h1><p id="045e" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">首先，我们从<code class="fe mk ml mm mn b"><strong class="kh ir">expo-av</strong></code>导入视频组件。</p><pre class="lc ld le lf gt mt mn mu mv aw mw bi"><span id="1015" class="mx lo iq mn b gy my mz l na nb">import { Video } from "expo-av";</span></pre><p id="bbef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以在代码中使用视频组件了。我们将在视图标签中定位视频组件，但是在此之前，我们有一些视频组件<strong class="kh ir">需要</strong>提供的道具。</p><h1 id="866d" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated"><strong class="ak">所需道具</strong></h1><h2 id="c7e7" class="mx lo iq bd lp nc nd dn lt ne nf dp lx ko ng nh lz ks ni nj mb kw nk nl md nm bi translated">源道具</h2><p id="af36" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">我们需要提供给视频组件的源是我们想要在播放器中播放的视频的路径。该路径将作为URI放入源代码中，如下所示:</p><pre class="lc ld le lf gt mt mn mu mv aw mw bi"><span id="3203" class="mx lo iq mn b gy my mz l na nb">&lt;Video<br/>  <strong class="mn ir">source</strong>={{<br/>    <strong class="mn ir">uri</strong>: "<a class="ae nn" href="http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4" rel="noopener ugc nofollow" target="_blank">http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4</a>",<br/>  }}<br/>/&gt;</span></pre><h2 id="4174" class="mx lo iq bd lp nc nd dn lt ne nf dp lx ko ng nh lz ks ni nj mb kw nk nl md nm bi translated"><strong class="ak">风格道具</strong></h2><p id="9de8" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">风格道具很重要，因为如果我们不提供它，我们将根本看不到玩家，所以我们需要设置玩家的宽度和高度，并将其居中，如下面的代码所示:</p><pre class="lc ld le lf gt mt mn mu mv aw mw bi"><span id="c403" class="mx lo iq mn b gy my mz l na nb">&lt;Video<br/>  <strong class="mn ir">style={styles.video}</strong><br/>  source={{<br/>    uri: "<a class="ae nn" href="http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4" rel="noopener ugc nofollow" target="_blank">http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4</a>",<br/>  }}<br/>/&gt;</span><span id="3f16" class="mx lo iq mn b gy no mz l na nb"><strong class="mn ir">//STYLE</strong><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    backgroundColor: "#fff",<br/>    alignItems: "center",<br/>    justifyContent: "center",<br/>  },<br/>  video: {<br/>    alignSelf: 'center',<br/>    width: 320,<br/>    height: 200,<br/>  },<br/>});</span></pre><p id="610d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过这些步骤，我们已经可以看到视频播放器并播放我们在URI提供的视频。</p><p id="74ba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是现在，我将继续设置一些可选的道具，在我看来，知道这些道具非常重要。</p><h1 id="bf82" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">可选道具</h1><h2 id="e729" class="mx lo iq bd lp nc nd dn lt ne nf dp lx ko ng nh lz ks ni nj mb kw nk nl md nm bi translated">调整模式道具大小</h2><p id="53e8" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">有了这个属性，我们可以描述视频应该如何缩放以在组件视图边界中显示。必须是下列值之一:</p><ul class=""><li id="b3ef" class="np nq iq kh b ki kj kl km ko nr ks ns kw nt la nu nv nw nx bi translated">包含(contain )-在保持纵横比的同时，在元件边界内进行调整。</li><li id="eb83" class="np nq iq kh b ki ny kl nz ko oa ks ob kw oc la nu nv nw nx bi translated">覆盖(cover )-填充元件边界，同时保持纵横比。</li><li id="64d3" class="np nq iq kh b ki ny kl nz ko oa ks ob kw oc la nu nv nw nx bi translated">拉伸(Stretch )-拉伸以填充元件边界。</li></ul><p id="e9be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我通常在<strong class="kh ir">中使用</strong>模式。</p><pre class="lc ld le lf gt mt mn mu mv aw mw bi"><span id="8531" class="mx lo iq mn b gy my mz l na nb">&lt;Video<br/>  style={styles.video}<br/>  <strong class="mn ir">resizeMode</strong>="contain"<br/>  source={{<br/>    uri: "<a class="ae nn" href="http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4" rel="noopener ugc nofollow" target="_blank">http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4</a>",<br/>  }}<br/>/&gt;</span></pre><h2 id="c798" class="mx lo iq bd lp nc nd dn lt ne nf dp lx ko ng nh lz ks ni nj mb kw nk nl md nm bi translated">使用本地控件属性</h2><p id="5621" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">一个布尔值，如果设置为<code class="fe mk ml mm mn b">true</code>，将在<code class="fe mk ml mm mn b">Video</code>组件中显示本地回放控件(如播放和暂停)。</p><pre class="lc ld le lf gt mt mn mu mv aw mw bi"><span id="2fd2" class="mx lo iq mn b gy my mz l na nb">&lt;Video<br/>  style={styles.video}<br/>  resizeMode="contain"<br/>  source={{<br/>    uri: "<a class="ae nn" href="http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4" rel="noopener ugc nofollow" target="_blank">http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4</a>",<br/>  }}<br/>  <strong class="mn ir">useNativeControls</strong>={true}<br/>/&gt;</span></pre><h2 id="e374" class="mx lo iq bd lp nc nd dn lt ne nf dp lx ko ng nh lz ks ni nj mb kw nk nl md nm bi translated">正在循环道具</h2><p id="94db" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">一个布尔值，描述视频应该播放一次(<code class="fe mk ml mm mn b">false</code>)还是无限循环(<code class="fe mk ml mm mn b">true</code>)。</p><pre class="lc ld le lf gt mt mn mu mv aw mw bi"><span id="0255" class="mx lo iq mn b gy my mz l na nb">&lt;Video<br/>  style={styles.video}<br/>  resizeMode="contain"<br/>  source={{<br/>    uri: "<a class="ae nn" href="http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4" rel="noopener ugc nofollow" target="_blank">http://d23dyxeqlo5psv.cloudfront.net/big_buck_bunny.mp4</a>",<br/>  }}<br/>  useNativeControls={true}<br/>  isLooping={true}<br/>/&gt;</span></pre><h2 id="6d4e" class="mx lo iq bd lp nc nd dn lt ne nf dp lx ko ng nh lz ks ni nj mb kw nk nl md nm bi translated">海报源道具</h2><p id="a657" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">加载视频时，视频组件根本不会显示，直到视频完全加载。您可以在视频加载时显示一个图像，让用户知道他需要等待几秒钟才能完全加载。非常有用。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="0120" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在视频组件中还有更多有用的道具没有在这里介绍，但是您已经有了一个基本的视频播放器，它可以播放来自本地手机存储和网络的视频，还包括一些其他功能。</p><p id="5d89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想了解更多关于视频组件道具的信息，你可以点击这里查看:</p><div class="ok ol gp gr om on"><a href="https://docs.expo.dev/versions/v44.0.0/sdk/video/" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">视频博览会文件</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">中的视频组件将视频与应用程序中的其他UI元素内联显示。许多视频和音频都有…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">docs.expo.dev</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb ll on"/></div></div></a></div><p id="d218" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完整的项目可以从这里下载:<a class="ae nn" href="https://github.com/nissimzarur/video-player.git" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="pc">链接</em> </strong> </a></p><p id="59b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">感谢您的阅读。</strong>请关注我，为所有需要的人鼓掌/评论助推这篇文章。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="504b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">感谢您到目前为止的阅读，如果您喜欢这样的内容，并且您想支持我作为一名程序员和作家撰写更多这样的文章，<a class="ae nn" href="https://medium.com/membership/@nissimzarur" rel="noopener"> <strong class="kh ir"> <em class="pc">请使用我的链接注册Medium成为会员(每月订阅5美元)，您将可以无限制地访问Medium上的所有内容。</em> </strong> </a></strong></p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="dbb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="pc">更多内容请看</em><a class="ae nn" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="pc">plain English . io</em></strong></a><em class="pc">。报名参加我们的</em> <a class="ae nn" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="pc">免费周报</em> </strong> </a> <em class="pc">。关注我们关于</em><a class="ae nn" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="pc">Twitter</em></strong></a><em class="pc">和</em><a class="ae nn" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="pc">LinkedIn</em></strong></a><em class="pc">。加入我们的</em> <a class="ae nn" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="pc">社区不和谐</em> </strong> </a> <em class="pc">。</em></p></div></div>    
</body>
</html>