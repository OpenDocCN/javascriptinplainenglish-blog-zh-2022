<html>
<head>
<title>React Hooks — useEffect() and Its Different Use Cases — Master in 2 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Hooks — useEffect()及其不同的用例—两分钟掌握</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-hooks-useeffect-and-its-different-use-cases-master-in-2-minutes-a71f4af212bb?source=collection_archive---------9-----------------------#2022-05-25">https://javascript.plainenglish.io/react-hooks-useeffect-and-its-different-use-cases-master-in-2-minutes-a71f4af212bb?source=collection_archive---------9-----------------------#2022-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5961" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">2分钟掌握useEffect()钩子。</h2></div><p id="e470" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React挂钩是React 16.8版本中添加的JavaScript函数。React不允许在函数组件的主体内部产生副作用，但是我们可以使用<code class="fe lb lc ld le b">useEffect()</code> hook在我们的组件中执行副作用。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/f82564d31fad20e718cb808468928bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEJ_DDY3G-ozb2GQQABHjg.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk"><a class="ae lv" href="https://pixlr.com/x/#editor" rel="noopener ugc nofollow" target="_blank">Image</a> created on Pixlr by the author</figcaption></figure><h2 id="25bf" class="lw lx iq bd ly lz ma dn mb mc md dp me ko mf mg mh ks mi mj mk kw ml mm mn mo bi translated">useEffect()</h2><p id="77d2" class="pw-post-body-paragraph kf kg iq kh b ki mp jr kk kl mq ju kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">要使用React的任何钩子，我们需要将那个特定的钩子导入到我们的组件中，例如<code class="fe lb lc ld le b">import { useEffect } from ‘react'</code>。<strong class="kh ir"> <em class="mu"> useEffect() </em> </strong>钩子将一个函数作为参数，在每次提交到屏幕后运行，不过你可以使用<strong class="kh ir"> <em class="mu">不同类型的useEffect() </em> </strong>声明来控制这一行为。</p><p id="4c17" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您检查下面陈述的例子，您可以看到在那个组件中使用了五个不同的useEffect()。每个useEffect()的行为是不同的，我根据它的行为在每个useEffect()中有区别地设置了<em class="mu"> effectType </em>状态变量的值。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi mv"><img src="../Images/3e94e21686ff912628f428a7964014a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g2hd85RX5TndhBETHJmgDg.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Img: useEffect()</figcaption></figure><p id="ea32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mu">你可以从</em> </strong> <a class="ae lv" href="https://github.com/yagnikkardani/Medium/blob/main/useeffect.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mu">这里</em> </strong> </a> <strong class="kh ir"> <em class="mu">复制上面的代码。</em>T25】</strong></p><pre class="lg lh li lj gt mw le mx my aw mz bi"><span id="b5ae" class="lw lx iq le b gy na nb l nc nd">useEffect(() =&gt; console.log("On Component Mount"), []);</span><span id="2a0d" class="lw lx iq le b gy ne nb l nc nd">useEffect(() =&gt; console.log("On Component Mount / On Count Update"), [count]);</span><span id="b1db" class="lw lx iq le b gy ne nb l nc nd">useEffect(() =&gt; console.log("On Component Mount / Update anything in this component"));</span><span id="0aae" class="lw lx iq le b gy ne nb l nc nd">useEffect(() =&gt; () =&gt; console.log("On Component Mount / On count update / On component Unmount"), [count]);</span><span id="8104" class="lw lx iq le b gy ne nb l nc nd">useEffect(() =&gt; () =&gt; console.log("On Component Mount / Unmount"), []);</span></pre><h2 id="a457" class="lw lx iq bd ly lz ma dn mb mc md dp me ko mf mg mh ks mi mj mk kw ml mm mn mo bi translated">React组件通常有两种副作用:</h2><ol class=""><li id="ac5d" class="nf ng iq kh b ki mp kl mq ko nh ks ni kw nj la nk nl nm nn bi translated">需要清理的副作用。</li><li id="b195" class="nf ng iq kh b ki no kl np ko nq ks nr kw ns la nk nl nm nn bi translated">不需要清理的副作用。</li></ol><p id="9383" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好吧，不要在这里混淆。“清理”听起来很容易理解。在上面列出的不同声明类型中，有一些包含一些依赖关系(在我们的例子中，它是一个状态变量‘count’)。</p><p id="6716" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的情况很简单，所以你可以考虑第二种情况——“不清理”。然而，在某些情况下，我们的依赖关系是从外部数据源获取的。假设我们使用“user_id”作为属性来获取用户。在获得那个用户之前，我们决定获得另一个用户，而不是这个用户。在这种情况下，<em class="mu"> user_id </em>会在先前的获取请求仍在处理中时进行更新。然后，有必要在新的提取开始之前中止先前的提取，以阻止内存/数据泄漏。</p><p id="abb8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">清理函数只不过是我们的useEffect()钩子中的一个返回函数。如果我们的useEffect()返回一个函数，React将在组件卸载时运行它，并在运行每个下一个效果之前运行它来清理上一个渲染的效果。</p><p id="90b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只要看看下面的代码就能快速理解清理功能。在这个例子中，清除函数在运行下一个副作用之前检查计数。如果它发现计数大于5，它会将其重置为0。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nt"><img src="../Images/27068666ee790ef9df0b735cc8982ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lErLDljYldSXH92uQ-rlJQ.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">useEffect() With Clean-up Function</figcaption></figure><p id="2101" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mu">你可以从</em> </strong> <a class="ae lv" href="https://github.com/yagnikkardani/Medium/blob/main/clean_up_function.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mu">这里</em> </strong> </a> <strong class="kh ir"> <em class="mu">复制上面的代码。</em>T13】</strong></p><h1 id="1d30" class="nu lx iq bd ly nv nw nx mb ny nz oa me jw ob jx mh jz oc ka mk kc od kd mn oe bi translated">结论</h1><p id="f5d4" class="pw-post-body-paragraph kf kg iq kh b ki mp jr kk kl mq ju kn ko mr kq kr ks ms ku kv kw mt ky kz la ij bi translated">本文的目的是快速学习useEffect()钩子及其用法，希望对你有所帮助。请记住，useEffect()挂钩是React组件的副作用，我们可以根据需要以五种不同的方式使用它们。此外，在运行下一个效果之前，清除函数在useEffect()钩子中非常重要，它可以清除不再需要的数据。要了解React的其他重要挂钩，请关注我并保持更新。</p><div class="of og gp gr oh oi"><a href="https://medium.com/@kardaniyagnik/membership" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">通过我的推荐链接加入Medium-Yagnik Kardani</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow lp oi"/></div></div></a></div><div class="of og gp gr oh oi"><a href="https://www.buymeacoffee.com/kardaniyagnik" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">Yagnik Kardani正在创建帮助他人成长的技术学习材料。</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">你好👋，我是一名媒体方面的技术作家。我喜欢学习并帮助他人在软件开发和云计算方面成长…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="or l"><div class="ox l ot ou ov or ow lp oi"/></div></div></a></div><p id="9003" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mu">更多内容看</em> <a class="ae lv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mu">说白了就是</em> </strong> </a> <em class="mu">。报名参加我们的</em> <a class="ae lv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mu">免费周报</em> </strong> </a> <em class="mu">。关注我们</em> <a class="ae lv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mu">推特</em> </strong> </a> <em class="mu">和</em><a class="ae lv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mu">LinkedIn</em></strong></a><em class="mu">。查看我们的</em> <a class="ae lv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mu">社区不和谐</em> </strong> </a> <em class="mu">加入我们的</em> <a class="ae lv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mu">人才集体</em> </strong> </a> <em class="mu">。</em></p></div></div>    
</body>
</html>