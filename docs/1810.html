<html>
<head>
<title>How to Build a Carousel in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中构建一个旋转木马</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-carousel-in-react-native-9ed31d14c9fb?source=collection_archive---------7-----------------------#2022-04-21">https://javascript.plainenglish.io/how-to-build-a-carousel-in-react-native-9ed31d14c9fb?source=collection_archive---------7-----------------------#2022-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e269" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在React Native中从头开始创建一个旋转木马。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2f8db6781c03122afecf01afe869c362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D9zSPA_A4YoIunn4-Pls-w.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://www.pexels.com/photo/bokeh-photography-of-person-holding-turned-on-iphone-1440727/" rel="noopener ugc nofollow" target="_blank">Daria Shevtsova</a> on Pexels</figcaption></figure><p id="04f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这段代码演示了如何用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://medium.com/r?url=https%3A%2F%2Freactnative.dev%2Fdocs%2Fflatlist" rel="noopener">FlatList</a></code>组件创建一个旋转木马。这个转盘将显示一个十六进制代码，并设置相同的十六进制代码作为背景颜色。</p><p id="a221" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">伴随这个作品的演示(在这个Github <a class="ae kv" href="https://github.com/AzizBooker/rn-carosuel" rel="noopener ugc nofollow" target="_blank">链接</a>)将展示每个单独项目的旋转木马抓拍。我们将通过使用FlatList <code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#snaptointerval" rel="noopener ugc nofollow" target="_blank">SnapToInterval</a></code> prop和<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/dimensions" rel="noopener ugc nofollow" target="_blank">Dimensions</a></code> API来实现这一点。</p><p id="29c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的截屏总结了这一过程。请注意，我们还在carousel中呈现了一个页脚。这可以通过使用FlatList <code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/flatlist#listfootercomponent" rel="noopener ugc nofollow" target="_blank">ListFooterComponent</a></code>属性来实现。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/a1639cef9fdd339fc0ef38040ce29f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/1*2bUzvpGzs9e1Ce_qxXTBHg.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Finished Carousel in Action</figcaption></figure></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><p id="e92b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="me">如果你在任何时候迷路了，本文底部提供了完整的代码</em></p><h2 id="b6eb" class="mf mg iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">起始代码</h2><p id="add8" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">下面我附上了一个GitHub要点与代码，你将需要启动这个项目。在此代码中，我们:</p><ol class=""><li id="d692" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">导入包，</li><li id="1e37" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">声明十六进制代码数组</li><li id="5c4f" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">传入RenderItem函数</li><li id="0f6d" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">创造我们的风格</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Code Needed to Start Project</figcaption></figure><h2 id="61da" class="mf mg iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">渲染项目</h2><p id="4da5" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">如果你运行这段代码，你会发现什么也不会出现。这是因为我们的<strong class="ky ir"> renderItem </strong>函数没有返回方法。我们现在将添加一个返回函数。</p><p id="42fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个返回函数中，我们将做两件事</p><ol class=""><li id="03bf" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">将我们的HexCode显示为字符串</li><li id="91bc" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">将我们的Hexcode设置为背景色</li></ol></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><p id="f591" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了将我们的HexCode显示为一个字符串，我们需要将我们的项目道具包装到一个<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/text" rel="noopener ugc nofollow" target="_blank">Text</a></code>组件中。然后我们将把这个<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/text" rel="noopener ugc nofollow" target="_blank">Text</a></code>组件包装在一个<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/view" rel="noopener ugc nofollow" target="_blank">View</a></code>组件中，并对其应用<strong class="ky ir">项目容器</strong>样式。</p><p id="479e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">修改<strong class="ky ir"> renderItem </strong>函数，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="fa04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个<strong class="ky ir"> renderItem </strong>函数中，我们将项目prop设置为显示在<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/text" rel="noopener ugc nofollow" target="_blank">Text</a></code>组件<em class="me">中的字符串，并将</em>设置为背景颜色样式提供的值。您可能还注意到我们正在获取<strong class="ky ir">高度的值。</strong></p><p id="751c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">这就是</strong> <code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/dimensions" rel="noopener ugc nofollow" target="_blank">Dimensions</a></code> <strong class="ky ir"> API发挥作用的地方。</strong></p><p id="9596" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加以下代码行以获取设备的当前高度。这是必需的，以便转盘中的每个项目都可以扩展到设备的最大高度。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Using Dimensions Api to get the Device's Height</figcaption></figure></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><p id="e53d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的截屏总结了我们迄今为止取得的进展。你可能会注意到我们还有一些事情需要改进。第一，我们的项目是<strong class="ky ir">而不是</strong>捕捉到每一个单独的项目。我说的对齐是指一次只能显示一个项目。不像我们在截屏中展示的那样是2的一部分</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/daff56f2753f6f10b5e2b20d48f09658.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/1*s2MeUVSJdwJksYoI7XHhJw.gif"/></div></figure><h2 id="423d" class="mf mg iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">与间隔对齐</h2><p id="0fbd" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">为了让我们的旋转木马捕捉每一个项目，我们将使用4个<code class="fe ls lt lu lv b"><a class="ae kv" href="https://medium.com/r?url=https%3A%2F%2Freactnative.dev%2Fdocs%2Fflatlist" rel="noopener">FlatList</a></code>道具:<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#showsverticalscrollindicator" rel="noopener ugc nofollow" target="_blank">showsVerticalScrollIndicator</a></code>、<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#decelerationrate" rel="noopener ugc nofollow" target="_blank">decelerationRate</a></code>、<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#snaptoalignment-ios" rel="noopener ugc nofollow" target="_blank">snapToAlignment</a></code>和<code class="fe ls lt lu lv b"><a class="ae kv" href="https://medium.com/r?url=https%3A%2F%2Freactnative.dev%2Fdocs%2Fflatlist" rel="noopener">s</a>napToInterval</code>。</p><p id="fa74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#showsverticalscrollindicator" rel="noopener ugc nofollow" target="_blank">showsVerticalScrollIndicator</a></code>、<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#decelerationrate" rel="noopener ugc nofollow" target="_blank">decelerationRate</a> </code>最容易理解。<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#showsverticalscrollindicator" rel="noopener ugc nofollow" target="_blank">showsVerticalScrollIndicator</a></code>将简单地隐藏垂直滚动条。<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#decelerationrate" rel="noopener ugc nofollow" target="_blank">decelerationRate</a></code>确定滚动视图减速的速度。</p><p id="13e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#snaptoalignment-ios" rel="noopener ugc nofollow" target="_blank">snapToAlignmen</a>t</code>和<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#snaptoalignment-ios" rel="noopener ugc nofollow" target="_blank">snapToInterval</a></code>携手并进。根据react-native文档:</p><blockquote class="nu"><p id="f846" class="nv nw iq bd nx ny nz oa ob oc od lr dk translated">置位时，[snapToInterval]使滚动视图在<code class="fe ls lt lu lv b">snapToInterval</code>值的倍数处停止。这可用于对长度小于滚动视图的子视图进行分页。</p></blockquote><p id="825a" class="pw-post-body-paragraph kw kx iq ky b kz oe jr lb lc of ju le lf og lh li lj oh ll lm ln oi lp lq lr ij bi translated">这意味着使用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#snaptoalignment-ios" rel="noopener ugc nofollow" target="_blank">snapToInterval</a></code>并将其设置为在装置的<strong class="ky ir">高度的间隔处咬合。我们正在创建一个一次只能呈现一个项目的情况。</strong></p><p id="01a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#snaptoalignment-ios" rel="noopener ugc nofollow" target="_blank">snapToAlignmen</a>t </code>另一方面，简单地决定了捕捉将在哪里发生。对于我们的用例，我们将设置为<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/scrollview#snaptoalignment-ios" rel="noopener ugc nofollow" target="_blank">snapToAlignmen</a>t</code> <em class="me">【开始】</em></p><p id="bd1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这方面的代码如下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="f21a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个截屏显示了传送带现在如何抓取每个单独的项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/668c9107858d80cec26e91ea62f49993.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/1*zSChPhtOvmGJ_oFfUqlx7Q.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Carousel With Snapping at Intervals of Height</figcaption></figure><h2 id="bced" class="mf mg iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">呈现页脚</h2><p id="a6d7" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">完成carousel的最后一步是添加一个页脚元素。我们将使用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/flatlist#listfootercomponent" rel="noopener ugc nofollow" target="_blank">ListFooterComponent</a> </code>道具来完成这个任务。第一步是创建一个<strong class="ky ir"> renderFooter </strong>函数。下面的代码演示了如何操作。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="8565" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在将把这个函数传递给我们的<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactnative.dev/docs/flatlist#listfootercomponent" rel="noopener ugc nofollow" target="_blank">ListFooterComponent</a> </code> prop。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="ec14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样我们的旋转木马就完成了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/a1639cef9fdd339fc0ef38040ce29f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/1*2bUzvpGzs9e1Ce_qxXTBHg.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Finished Carousel in Action</figcaption></figure><h2 id="abd7" class="mf mg iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">完整代码</h2><p id="acd2" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">如果你迷路了，这里有完整的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Full Code</figcaption></figure><h1 id="7ce1" class="oj mg iq bd mh ok ol om mk on oo op mn jw oq jx mq jz or ka mt kc os kd mw ot bi translated">结论</h1><p id="be19" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">感谢您阅读我关于<strong class="ky ir">“为您的下一个Web开发项目获得灵感的7个地方”</strong>的文章。如果你有任何问题，请随意提问，我会尽快回答。</p><p id="5dd7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你刚接触媒体，你可以点击这里的<a class="ae kv" href="https://bookeraziz.medium.com/membership" rel="noopener">链接</a>加入。</p><h2 id="3c04" class="mf mg iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">我的更多故事</h2><div class="ou ov gp gr ow ox"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-an-image-picker-in-react-native-using-expo-4dd403e706bd"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd ir gy z fp pc fr fs pd fu fw ip bi translated">如何使用Expo在React Native中创建图像拾取器</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">在React Native中上传图像和视频变得简单</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl kp ox"/></div></div></a></div><div class="ou ov gp gr ow ox"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-change-a-devices-screen-orientation-using-expo-in-react-native-af69c10032fb"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd ir gy z fp pc fr fs pd fu fw ip bi translated">如何在React Native中使用Expo更改设备的屏幕方向</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">React Native中处理屏幕方向的初学者指南</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pg l"><div class="pm l pi pj pk pg pl kp ox"/></div></div></a></div><p id="b8c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="me">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="me">说白了就是io </em> </strong> </a> <em class="me">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="me">免费周报</em> </strong> </a> <em class="me">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="me">Twitter</em></strong></a><em class="me">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="me">LinkedIn</em></strong></a><em class="me">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="me">社区不和谐</em> </strong> </a> <em class="me">。</em></p></div></div>    
</body>
</html>