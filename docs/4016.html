<html>
<head>
<title>How to Fix the “Cannot read property ‘addEventListener’ of null” Error in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复JavaScript中的“无法读取null的属性‘addevent listener’”错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-cannot-read-property-addeventlistener-of-null-8e83d1bc74eb?source=collection_archive---------5-----------------------#2022-10-18">https://javascript.plainenglish.io/javascript-cannot-read-property-addeventlistener-of-null-8e83d1bc74eb?source=collection_archive---------5-----------------------#2022-10-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7471" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解JavaScript中的“无法读取null的属性‘addevent listener’”错误以及如何修复它。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3084b472a14606d5d236e363f6998acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K4OjVblkasynB3DWShRkjQ.png"/></div></div></figure><p id="7a60" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当您尝试对在DOM中找不到的元素调用<code class="fe lk ll lm ln b">addEventListener()</code>方法时，JavaScript中会出现“无法读取null的属性‘addevent listener’”错误。发生这种情况有两个主要原因:</p><ol class=""><li id="e668" class="lo lp in kq b kr ks ku kv kx lq lb lr lf ls lj lt lu lv lw bi translated">在DOM中不存在的元素上访问<code class="fe lk ll lm ln b">addEventListener()</code>方法。</li><li id="e564" class="lo lp in kq b kr lx ku ly kx lz lb ma lf mb lj lt lu lv lw bi translated">在HTML中DOM元素声明的上方插入引用JavaScript文件的<code class="fe lk ll lm ln b">script</code>标签。</li></ol><p id="eb9f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我们将学习如何处理这两种情况下的错误。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/3257d9839726c27bc634281bbdcd1434.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/0*aIE5THF7wP_a4cFN.png"/></div></figure><h1 id="8b16" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">原因1:在DOM中不存在的元素上访问<code class="fe lk ll lm ln b">addEventListener()</code></h1><p id="ffe3" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated"><code class="fe lk ll lm ln b">index.js</code></p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="cb53" class="ne me in ln b gy nf ng l nh ni">const btn = document.getElementById('does-not-exist');</span><span id="ad8a" class="ne me in ln b gy nj ng l nh ni">console.log(btn); // null</span><span id="e03b" class="ne me in ln b gy nj ng l nh ni">// ❌ Cannot read property 'addEventListener' of null<br/>btn.addEventListener('click', () =&gt; {<br/>  alert('You clicked the button');<br/>});</span></pre><p id="50f6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当使用类似于<code class="fe lk ll lm ln b">getElementById()</code>或<code class="fe lk ll lm ln b">querySelector()</code>的方法来搜索DOM中不存在的元素时，它会返回<code class="fe lk ll lm ln b">null</code>。试图对一个<code class="fe lk ll lm ln b">null</code>值调用<code class="fe lk ll lm ln b">addEventListener()</code>方法将导致错误。</p><h1 id="1751" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">解决方案:确保正确的选择器</h1><p id="fecd" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">若要修复“无法读取null的属性‘addevent listener’”错误，请确保正确定义了用于访问元素的选择器。确保ID或类名中没有错误，并且使用了正确的符号。</p><h1 id="658c" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">解决方法:检查<code class="fe lk ll lm ln b">null</code></h1><p id="543a" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">要修复“无法读取null的属性‘addevent listener’”错误，请在对其调用<code class="fe lk ll lm ln b">addEventListener()</code>方法之前检查元素是否不是<code class="fe lk ll lm ln b">null</code>。</p><p id="6e83" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们可以用一个<code class="fe lk ll lm ln b">if</code>语句来实现:</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="0332" class="ne me in ln b gy nf ng l nh ni">const btn = document.getElementById('does-not-exist');</span><span id="6673" class="ne me in ln b gy nj ng l nh ni">console.log(btn); // null</span><span id="3406" class="ne me in ln b gy nj ng l nh ni">// ✅ Check if element exists before calling addEventListener()<br/>if (btn) {<br/>  // Not called<br/>  btn.addEventListener('click', () =&gt; {<br/>    alert('You clicked the button');<br/>  });<br/>}</span></pre><p id="98e9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当一个值被放在一个<code class="fe lk ll lm ln b">if</code>语句的括号中时，它在被求值之前被强制转换为<code class="fe lk ll lm ln b">Boolean</code>，即真值变成<code class="fe lk ll lm ln b">true</code>，假值变成<code class="fe lk ll lm ln b">false</code>。<code class="fe lk ll lm ln b">null</code>是一个falsy值，所以它被强制为<code class="fe lk ll lm ln b">false</code>，并且<code class="fe lk ll lm ln b">if</code>语句块中的代码永远不会运行。</p><p id="53d5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注:</strong>在JavaScript中，有六个falsy值:<code class="fe lk ll lm ln b">undefined</code>、<code class="fe lk ll lm ln b">null</code>、<code class="fe lk ll lm ln b">NaN</code>、<code class="fe lk ll lm ln b">0</code>、<code class="fe lk ll lm ln b">''</code>(空字符串)和<code class="fe lk ll lm ln b">false</code>。其他所有的价值都是真实的。</p><p id="8d56" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们也可以使用<a class="ae nk" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank">可选的链接操作符(？。)</a>检查元素是否为<code class="fe lk ll lm ln b">null</code>。</p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="6feb" class="ne me in ln b gy nf ng l nh ni">const btn = document.getElementById('does-not-exist');</span><span id="f01b" class="ne me in ln b gy nj ng l nh ni">console.log(btn); // null</span><span id="2c61" class="ne me in ln b gy nj ng l nh ni">// ✅ Check if element exists before calling addEventListener()</span><span id="906a" class="ne me in ln b gy nj ng l nh ni">// Not called<br/>btn?.addEventListener('click', () =&gt; {<br/>  alert('You clicked the button');<br/>});</span></pre><p id="bb80" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">可选的链接操作符(<code class="fe lk ll lm ln b">?.</code>)是访问属性或调用对象方法的<code class="fe lk ll lm ln b">null-safe</code>方式。如果对象是nullish ( <code class="fe lk ll lm ln b">null</code>或<code class="fe lk ll lm ln b">undefined</code>)，操作符会阻止成员访问并返回<code class="fe lk ll lm ln b">undefined</code>，而不是抛出一个错误。</p><h1 id="88ac" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">原因2:在DOM元素上插入脚本标记</h1><p id="c8a0" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">该错误的另一个常见原因是将引用JavaScript文件的<code class="fe lk ll lm ln b">&lt;script&gt;</code>标记放在声明目标元素的位置上方。</p><p id="4fb8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如，在这个HTML标记中:</p><p id="749f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">index.html</code></p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="bccd" class="ne me in ln b gy nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Coding Beauty Tutorial&lt;/title&gt;<br/>    &lt;!-- ❌ Script is run before button is declared --&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;button id="btn"&gt;Sign up&lt;/button&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="8ae2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">script</code>标签放在<code class="fe lk ll lm ln b">head</code>标签中，在声明<code class="fe lk ll lm ln b">button</code>元素的位置之上，因此<code class="fe lk ll lm ln b">index.js</code>文件将不能访问<code class="fe lk ll lm ln b">button</code>元素。</p><p id="5b0a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">index.js</code></p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="aae1" class="ne me in ln b gy nf ng l nh ni">const btn = document.getElementById('btn');</span><span id="75e8" class="ne me in ln b gy nj ng l nh ni">console.log(btn); // null</span><span id="d5ea" class="ne me in ln b gy nj ng l nh ni">// ❌ TypeError: Cannot read properties of null<br/>btn.addEventListener('click', () =&gt; {<br/>  alert('You clicked the button');<br/>});</span></pre><h1 id="f405" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">解决方案:将<code class="fe lk ll lm ln b">script</code>标签移到主体底部</h1><p id="e0ff" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">要修复这种情况下的错误，在声明了所有HTML元素之后，将<code class="fe lk ll lm ln b">script</code>标签移动到<code class="fe lk ll lm ln b">body</code>的底部。</p><p id="01fc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">index.html</code></p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="1612" class="ne me in ln b gy nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Coding Beauty Tutorial&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;button id="btn"&gt;Sign up&lt;/button&gt;</span><span id="3813" class="ne me in ln b gy nj ng l nh ni">    &lt;!-- ✅ Script is run after button is declared --&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3257" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，<code class="fe lk ll lm ln b">index.js</code>脚本文件将可以访问<code class="fe lk ll lm ln b">button</code>元素和所有其他HTML元素，因为它们在脚本运行时已经被声明了。</p><p id="2829" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">index.js</code></p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="5110" class="ne me in ln b gy nf ng l nh ni">const btn = document.getElementById('btn');</span><span id="6e96" class="ne me in ln b gy nj ng l nh ni">console.log(btn); // HTMLButtonElement object</span><span id="b559" class="ne me in ln b gy nj ng l nh ni">// ✅ Works as expected<br/>btn.addEventListener('click', () =&gt; {<br/>  alert('You clicked the button');<br/>});</span></pre><h1 id="6e2e" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">解决方案:访问<code class="fe lk ll lm ln b">DOMContentLoaded</code>事件监听器中的元素</h1><p id="084d" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">修复JavaScript中“无法读取null的属性‘addevent listener’”错误的另一种方法是在文档中添加一个<code class="fe lk ll lm ln b">DOMContentLoaded</code>事件侦听器，并访问该侦听器中的元素。使用这种方法，我们将脚本放在HTML中的什么位置并不重要。</p><p id="0889" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">index.html</code></p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="43b2" class="ne me in ln b gy nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Coding Beauty Tutorial&lt;/title&gt;</span><span id="e95e" class="ne me in ln b gy nj ng l nh ni">    &lt;!-- Script placed above element accessed --&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;button id="btn"&gt;Sign up&lt;/button&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="64c1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当浏览器已经完全加载了HTML，并且DOM树已经构建，但是像图像和样式表这样的外部资源可能还没有加载时，触发<code class="fe lk ll lm ln b">DOMContentLoaded</code>事件。所以不管我们把脚本放在哪里，只有在所有声明的HTML元素都被添加到DOM之后，监听器中的代码才会被调用。</p><p id="28c8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">index.js</code></p><pre class="kd ke kf kg gt na ln nb nc aw nd bi"><span id="9315" class="ne me in ln b gy nf ng l nh ni">document.addEventListener('DOMContentLoaded', () =&gt; {<br/>  const btn = document.getElementById('btn');</span><span id="259f" class="ne me in ln b gy nj ng l nh ni">  console.log(btn); // HTMLButtonElement object</span><span id="ab41" class="ne me in ln b gy nj ng l nh ni">  // ✅ Works as expected<br/>  btn.addEventListener('click', () =&gt; {<br/>    alert('You clicked the button');<br/>  });<br/>});</span></pre><h1 id="b42e" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">结论</h1><p id="e4ae" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">我们可以修复JavaScript中的“无法读取属性addEventListener' of null”错误，方法是确保定义了正确的选择器，在调用<code class="fe lk ll lm ln b">addEventListener()</code>之前向元素添加null检查，将<code class="fe lk ll lm ln b">script</code>标记移动到主体的底部，或者访问添加到文档的<code class="fe lk ll lm ln b">DOMContentLoaded</code>事件侦听器中的元素。</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><p id="f88f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ns">原载于</em><a class="ae nk" href="https://cbdev.link/ea642e" rel="noopener ugc nofollow" target="_blank"><em class="ns">【codingbeautydev.com】</em></a></p><h1 id="1083" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph ko kp in kq b kr mv jo kt ku mw jr kw kx mx kz la lb my ld le lf mz lh li lj ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nk" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>