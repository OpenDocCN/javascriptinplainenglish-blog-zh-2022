<html>
<head>
<title>How to Create an Amazon Product Search API with Data Collectors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用数据收集器创建亚马逊产品搜索API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-an-amazon-product-search-api-with-data-collectors-7d8b03676a52?source=collection_archive---------10-----------------------#2022-10-21">https://javascript.plainenglish.io/how-to-create-an-amazon-product-search-api-with-data-collectors-7d8b03676a52?source=collection_archive---------10-----------------------#2022-10-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1629" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何利用Bright Data的数据收集器来收集Amazon.com的数据，然后创建一个产品搜索API，你可以将它部署到网络上并从中获利。</h2></div></div><div class="ab cl kc kd hr ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ig ih ii ij ik"><h1 id="095f" class="kj kk in bd kl km kn ko kp kq kr ks kt jt ku ju kv jw kw jx kx jz ky ka kz la bi translated">API简介</h1><p id="7e0a" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">API(应用程序编程接口)是两台或多台计算机之间的一种通信方式，目的是将请求的数据从一台计算机传递到另一台计算机。API可以共享一个文档片段，该文档片段随后可以被发出请求的计算机作出相应的反应。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/b9e769069526f51a8c5d88d2e98d5cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/0*_meK_DR9R7RrZ4yS"/></div></figure><p id="81ea" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">文档可以代表可以从一台计算机安全传输(授权技术)到另一台计算机的私有数据。</p><h2 id="affa" class="mk kk in bd kl ml mm dn kp mn mo dp kt lk mp mq kv lo mr ms kx ls mt mu kz mv bi translated">为什么公司使用API很重要？</h2><p id="dfc8" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">API是创建数据驱动的管理系统的一种很好的方式，因为我们可以创建自己的数据处理系统，它可以在不需要开发人员不断观察的情况下进行自我管理。</p><p id="0632" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">端点的响应可能因请求正文(POST请求)、URL参数或URL查询(如果存在)而异。这意味着在响应对象中有多种方式可以返回数据。</p><p id="22b8" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">API解决了许多公司可能面临的现实问题，其中之一就是数据自动化。开发人员使用数据自动化来创建请求的自动处理，这样就不需要单独的部分或第三方服务来处理请求。</p><h2 id="9956" class="mk kk in bd kl ml mm dn kp mn mo dp kt lk mp mq kv lo mr ms kx ls mt mu kz mv bi translated">谁能从API的存在中获益？</h2><p id="6c1a" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">创建API的好处是可以真正帮助公司和个人项目管理数据。</p><p id="6618" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">我们可以使用API在所有公司的应用程序之间进行数据集成，以便从端点检索的数据在发出请求的任何地方都是实时的。它们为在一个地方检索和管理数据提供了一种清晰的方式，我们可以将最终产品用于一个公司中的多个数据消费平台。</p><p id="379c" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">另一个很棒的特性是开发人员体验，从开发人员的角度来看，实现更改和关注API是很简单的，因为每个特性都有一个相应的地方，在发布之前可以在那里实现和测试更改。</p></div><div class="ab cl kc kd hr ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ig ih ii ij ik"><h1 id="319d" class="kj kk in bd kl km kn ko kp kq kr ks kt jt ku ju kv jw kw jx kx jz ky ka kz la bi translated">刮Amazon.com</h1><p id="7284" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">Web抓取用于从网站的DOM元素值中提取数据。抓取web的抓取者可以获得DOM结构中某些元素的直接路径，并提取元素的值。收集的值可以传递给API的响应。</p><p id="7cfb" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">例如，如果一家公司想在他们的网站上展示受欢迎的产品，我们可以为亚马逊的网站制作一个抓取API。那里的一些产品有一个“畅销”指示标签，一旦我们收集了所有这些产品，我们就可以在一个响应对象中返回它们。</p><h2 id="0ffd" class="mk kk in bd kl ml mm dn kp mn mo dp kt lk mp mq kv lo mr ms kx ls mt mu kz mv bi translated">从哪里可以获得API数据？</h2><p id="c345" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">我们需要一个工具，可以用特定的产品搜索来搜索亚马逊的网站，然后返回所有符合搜索要求的产品以及它们的标题、评论、评级和价格。</p><p id="e7f3" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">网络上有各种各样的选项可以用来抓取网站，但我们将使用Bright Data的<a class="ae mw" href="https://brightdata.grsm.io/data-collector8081" rel="noopener ugc nofollow" target="_blank">数据收集器服务</a>，它可以做得更多。Bright Data使用机器人通过一组我们可以定义的特定指令来抓取web。机器人按顺序遵循这些指令，然后返回一个抓取值的列表。</p><h2 id="5e9d" class="mk kk in bd kl ml mm dn kp mn mo dp kt lk mp mq kv lo mr ms kx ls mt mu kz mv bi translated">数据收集器</h2><p id="b782" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">前往BrightData.com<a class="ae mw" href="https://brightdata.grsm.io/3k8dv4026g8z" rel="noopener ugc nofollow" target="_blank">的</a>，点击<em class="mx">注册</em>按钮，注册一个新账户。注册后，您将被重定向到您的主页，在这里您将选择数据收集器部分下的<em class="mx">立即开始</em>按钮。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/a96f424b87fb42aca00f3653f4beb7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/0*m9nXzkgt0YlQpohZ"/></div></figure><p id="67dc" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">在这里，我们可以管理所有的数据收集器。要创建一个新的，点击<em class="mx">开发一个自我管理的收集器</em>，会出现一个弹出窗口，里面有各种预建的模板。如果我们想要创建一个定制的scraper，单击<em class="mx">从头开始</em>按钮，但是在这种情况下，我们将使用<em class="mx">亚马逊产品搜索</em>模板。有各种各样的社交媒体、酒店和商店模板可供我们使用。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/f948269af54b2d86f0dc6137c172eb72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/0*oumPn1vWmTMlyqN0"/></div></figure></div><div class="ab cl kc kd hr ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ig ih ii ij ik"><h1 id="9e40" class="kj kk in bd kl km kn ko kp kq kr ks kt jt ku ju kv jw kw jx kx jz ky ka kz la bi translated">在Node.js中创建API</h1><p id="6b75" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">在本教程中，我们将使用Node.js(带有Express和Axios包)来创建一个API服务器。该服务器将只有一个带有自定义参数的端点，该参数将指示我们要搜索的产品。</p><h2 id="1734" class="mk kk in bd kl ml mm dn kp mn mo dp kt lk mp mq kv lo mr ms kx ls mt mu kz mv bi translated">创建应用程序</h2><p id="b7a0" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">我们将从一个空目录开始，并在那里打开命令行。假设我们的计算机上安装了Node.js，我们将运行命令<em class="mx"> npm init -y </em>来启动一个新的Node.js项目。</p><pre class="ly lz ma mb gt my mz na nb aw nc bi"><span id="c3a2" class="mk kk in mz b gy nd ne l nf ng">npm init -y</span></pre><p id="5827" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">一旦启动了一个目录，我们需要在其中安装Express和Axios包。Express用于创建带有自定义端点的服务器，Axios用于创建对web的REST请求。</p><pre class="ly lz ma mb gt my mz na nb aw nc bi"><span id="683b" class="mk kk in mz b gy nd ne l nf ng">npm i express express axios</span></pre><p id="2916" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">现在，我们可以创建一个index.js文件来保存服务器信息。首先，我们需要将之前安装的包导入到我们的项目中。</p><pre class="ly lz ma mb gt my mz na nb aw nc bi"><span id="182e" class="mk kk in mz b gy nd ne l nf ng"><em class="mx">const</em> <strong class="mz io">express </strong>= require('express');<br/>const <strong class="mz io">axios </strong>= require('axios').default;</span></pre><p id="184e" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">导入包之后，我们需要建立一个Express server应用程序，方法是将导入的包作为一个函数调用，并在一个自定义端口监听它。</p><pre class="ly lz ma mb gt my mz na nb aw nc bi"><span id="b4e1" class="mk kk in mz b gy nd ne l nf ng">const <strong class="mz io">express </strong>= require(‘express’);<br/>const <strong class="mz io">axios </strong>= require(‘axios’).default;<br/>const <strong class="mz io">app </strong>= express();</span><span id="20ec" class="mk kk in mz b gy nh ne l nf ng">app.<strong class="mz io">listen</strong>(8080, () =&gt; console.log(‘Listening on port 8080.’));</span></pre><p id="41b5" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">现在，我们将最终创建一个带有自定义产品参数的async-await端点。我们需要首先从URL获取参数，然后向Bright Data的服务器数据收集器发出get请求，以启动新的抓取操作。请求需要包含一个产品关键字和一个带有API令牌的授权头。请求完成后，我们得到一个带有<em class="mx"> collection_id </em> entry对象的响应，并将其存储到一个变量中。</p><pre class="ly lz ma mb gt my mz na nb aw nc bi"><span id="5f36" class="mk kk in mz b gy nd ne l nf ng">const <strong class="mz io">express </strong>= require(‘express’);<br/>const <strong class="mz io">axios </strong>= require(‘axios’).default;<br/>const <strong class="mz io">app </strong>= express();</span><span id="346c" class="mk kk in mz b gy nh ne l nf ng">app.<strong class="mz io">get</strong>(‘/:product’, async(req, res) =&gt; {<br/>    const { <strong class="mz io">product </strong>} = req.params;</span><span id="e0cc" class="mk kk in mz b gy nh ne l nf ng">    const <strong class="mz io">collector </strong>= await axios.post(<br/>        ‘https://api.brightdata.com/dca/trigger?collector=ID',<br/>        [{ ‘keyword’: product }],<br/>        { headers: { ‘Authorization’: ‘Bearer API_TOKEN’ }   <br/>    });<br/>});</span><span id="1f38" class="mk kk in mz b gy nh ne l nf ng">app.<strong class="mz io">listen</strong>(8080, () =&gt; console.log(‘Listening on port 8080.’));</span></pre><p id="1498" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">现在，我们可以创建我们的第二个请求，它将是POST类型，并将被定向到保存这个API搜索的数据的特定数据集。从前面的请求中，我们需要提取出<em class="mx"> collection_id </em>条目，并将其传递给第二个请求的URL。这个请求将只包含具有相同API令牌的授权头。</p><pre class="ly lz ma mb gt my mz na nb aw nc bi"><span id="b712" class="mk kk in mz b gy nd ne l nf ng">const <strong class="mz io">express </strong>= require(‘express’);<br/>const <strong class="mz io">axios </strong>= require(‘axios’).default;<br/>const <strong class="mz io">app </strong>= express();</span><span id="3c81" class="mk kk in mz b gy nh ne l nf ng">app.<strong class="mz io">get</strong>(‘/:product’, async(req, res) =&gt; {<br/>    const { product } = req.params;<br/>    <br/>    const <strong class="mz io">collector </strong>= await axios.post(<br/>        ‘https://api.brightdata.com/dca/trigger?collector=ID',<br/>        [{ ‘keyword’: product }],<br/>        { headers: { ‘Authorization’: ‘Bearer API_TOKEN’ }<br/>    });</span><span id="89e1" class="mk kk in mz b gy nh ne l nf ng">    const <strong class="mz io">dataset </strong>= await axios.get(<br/>        `https://api.brightdata.com/dca/dataset?id=<br/>        ${collector.data.collection_id}`,<br/>        { headers: { ‘Authorization’: ‘Bearer API_TOKEN’ }<br/>    });<br/>});</span><span id="32ff" class="mk kk in mz b gy nh ne l nf ng">app.<strong class="mz io">listen</strong>(8080, () =&gt; console.log(‘Listening on port 8080.’));</span></pre><p id="0e44" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">在每个请求的URL的末尾，我们需要用数据收集器的ID替换ID，我们可以在URL的最后一个查询中找到该信息。在授权头中，我们还需要将API_TOKEN替换为您帐户的API令牌，我们可以在API令牌部分下的帐户设置中创建一个。</p><p id="7065" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">现在，我们需要用<em class="mx"> res.json() </em>返回数据收集器从端点的产品搜索中收集的值。</p><pre class="ly lz ma mb gt my mz na nb aw nc bi"><span id="3ed6" class="mk kk in mz b gy nd ne l nf ng">const <strong class="mz io">express </strong>= require(‘express’);<br/>const <strong class="mz io">axios </strong>= require(‘axios’).default;<br/>const <strong class="mz io">app </strong>= express();</span><span id="827c" class="mk kk in mz b gy nh ne l nf ng">app.<strong class="mz io">get</strong>(‘/:product’, async(req, res) =&gt; {<br/>    const { product } = req.params;<br/>    <br/>    const <strong class="mz io">collector </strong>= await axios.post(<br/>        ‘https://api.brightdata.com/dca/trigger?collector=ID',<br/>        [{ ‘keyword’: product }],<br/>        { headers: { ‘Authorization’: ‘Bearer API_TOKEN’ }<br/>    });</span><span id="2026" class="mk kk in mz b gy nh ne l nf ng">    const <strong class="mz io">dataset </strong>= await axios.get(<br/>        `https://api.brightdata.com/dca/dataset?id=<br/>        ${collector.data.collection_id}`,<br/>        { headers: { ‘Authorization’: ‘Bearer API_TOKEN’ }<br/>    });</span><span id="2796" class="mk kk in mz b gy nh ne l nf ng"><em class="mx">    </em>return res.<strong class="mz io">json</strong>(dataset.data);<br/>});</span><span id="3fe0" class="mk kk in mz b gy nh ne l nf ng">app.<strong class="mz io">listen</strong>(8080, () =&gt; console.log(‘Listening on port 8080.’));</span></pre></div><div class="ab cl kc kd hr ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ig ih ii ij ik"><h1 id="432b" class="kj kk in bd kl km kn ko kp kq kr ks kt jt ku ju kv jw kw jx kx jz ky ka kz la bi translated">部署API</h1><p id="9f6b" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">部署API是将数据管理系统上传到互联网的过程。一旦全部上传完毕，您的数据消费平台就可以访问您的API，并最终发出真实的请求。</p><h2 id="e438" class="mk kk in bd kl ml mm dn kp mn mo dp kt lk mp mq kv lo mr ms kx ls mt mu kz mv bi translated">刮网合法吗？</h2><p id="9322" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">你可能想知道从网上抓取信息是否合法，这听起来像“剑桥分析”的情况，但我可以向你保证它不是。根据美国上诉法院的裁决，任何在网络上公开的信息都可以出于不同的目的而被收集。</p><p id="72f0" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">另一方面，当你试图恶意获取任何私人或个人信息时，会给你带来麻烦。</p><h2 id="e916" class="mk kk in bd kl ml mm dn kp mn mo dp kt lk mp mq kv lo mr ms kx ls mt mu kz mv bi translated">在哪里部署和货币化你的API？</h2><p id="0790" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">将API部署到web对于请求应用程序的正确可达性至关重要。一旦它存在于web上，只有这样你的应用程序才能访问并请求你的API(除非有意在本地运行它)。</p><p id="eec4" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">我们可以在Heroku.com的<a class="ae mw" href="http://heroku.com/" rel="noopener ugc nofollow" target="_blank">平台上免费托管我们的API，要在那里创建一个应用程序，你首先需要注册。在您的仪表盘上，点击<em class="mx">新建</em>按钮，并选择<em class="mx">创建新应用</em>选项。填写信息并点击<em class="mx">创建</em>。现在，如果您在GitHub上有API存储库，选择该选项，连接它，并在页面底部选择<em class="mx"> Deploy Branch </em>。</a></p><p id="6771" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">网络上有很多选择来赚钱访问你的API，但是最流行的是RapidAPI.com。在另一次注册之后，您可以转到<em class="mx">我的API</em>选项卡，创建一个新项目，然后按照步骤将其与您的API集成。</p></div><div class="ab cl kc kd hr ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ig ih ii ij ik"><h1 id="f321" class="kj kk in bd kl km kn ko kp kq kr ks kt jt ku ju kv jw kw jx kx jz ky ka kz la bi translated">结论</h1><p id="9110" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">创建具有从web抓取信息能力的API，会使您的业务在传输信息、收集信息和开发人员体验方面变得更加强大。</p><p id="b2ef" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">你应该为你的公司或你自己创建一个API的原因有很多，但是保持简单，一个词——集成。</p><p id="d071" class="pw-post-body-paragraph lb lc in ld b le mf jo lg lh mg jr lj lk mh lm ln lo mi lq lr ls mj lu lv lw ig bi translated">我希望这篇文章对你尝试为自己创建一个API有足够的价值，并且你会从中得到一些建议。</p></div></div>    
</body>
</html>