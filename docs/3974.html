<html>
<head>
<title>How To Upload And Preview Image In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中上传和预览图像</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-upload-and-preview-image-in-react-js-ece15b63f5c0?source=collection_archive---------8-----------------------#2022-10-14">https://javascript.plainenglish.io/how-to-upload-and-preview-image-in-react-js-ece15b63f5c0?source=collection_archive---------8-----------------------#2022-10-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2728" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我们将了解如何在react js中上传和预览图像。您可以学习如何在react js中将图像上传到服务器之前显示图像预览。如果您想在将图像上传到react应用程序之前显示图像预览。因此，我们将创建一个简单的react js应用程序，它将使用HTML文件输入字段以及一些事件来显示图像预览。对于后端，我们将使用一个简单的PHP应用程序，该应用程序公开一个惟一的端点，该端点接受包含文件/图像的POST请求来上传图像。</p><p id="7b8c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以，我们来看看react js图片上传带预览和react js图片上传带预览显示。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="a96a" class="kr ks in kn b gy kt ku l kv kw"><strong class="kn io">Step 1: Create React App</strong></span><span id="aacb" class="kr ks in kn b gy kx ku l kv kw"><strong class="kn io">Step 2: Install Axios and Bootstrap 4</strong></span><span id="e870" class="kr ks in kn b gy kx ku l kv kw"><strong class="kn io">Step 3: Create Simple Image Upload with Preview Component</strong></span><span id="09a1" class="kr ks in kn b gy kx ku l kv kw"><strong class="kn io">Step 4: Add Component in App.js</strong></span><span id="e133" class="kr ks in kn b gy kx ku l kv kw"><strong class="kn io">Step 5: Create PHP File</strong></span></pre><p id="13e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第一步:创建React应用</strong></p><p id="22e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步中，我们将使用以下命令创建一个新的react应用程序。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="9216" class="kr ks in kn b gy kt ku l kv kw">npx create-react-app my-react-app</span></pre><p id="945e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要运行react应用程序，请在您的终端上执行以下命令。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="edc1" class="kr ks in kn b gy kt ku l kv kw">npm start</span></pre></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="7dea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">阅读也:</strong> <a class="ae lf" href="https://websolutionstuff.com/post/how-to-file-upload-in-react-js" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在React JS中上传文件</strong> </a></p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="1fdc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">步骤2:安装Axios和引导程序4 </strong></p><p id="cf34" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步中，我们将把bootstrap 4库安装到react app中。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="a2e3" class="kr ks in kn b gy kt ku l kv kw">npm install bootstrap --save</span><span id="12d3" class="kr ks in kn b gy kx ku l kv kw">npm install axios --save</span></pre><p id="a04d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe lg lh li kn b">src/App.js</code>文件中添加<strong class="jm io"> bootstrap.min.css </strong>文件:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="4caf" class="kr ks in kn b gy kt ku l kv kw">import React from 'react';<br/>import '../node_modules/bootstrap/dist/css/bootstrap.min.css';<br/> <br/>function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h2&gt;How To Upload And Preview Image In React JS - Websolutionstuff&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/> <br/>export default App;</span></pre><p id="e1bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">步骤3:使用预览组件创建简单的图像上传</strong></p><p id="8295" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步，我们将创建<strong class="jm io">imageuploadpreviewcomponent . js</strong>组件。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="01cf" class="kr ks in kn b gy kt ku l kv kw">import React, { Component } from 'react';<br/>import axios from 'axios';<br/> <br/>class ImageUploadPreviewComponent extends Component {<br/> <br/>    constructor(props) {<br/>        super(props)<br/>        this.state = {<br/>            file: null<br/>        }<br/>        this.uploadSingleFile = this.uploadSingleFile.bind(this)<br/>        this.upload = this.upload.bind(this)<br/>    }<br/> <br/>    uploadSingleFile(e) {<br/>        this.setState({<br/>            file: URL.createObjectURL(e.target.files[0])<br/>        })<br/>    }<br/> <br/>    upload(){<br/>        const formData = { image: this.state.file }<br/>         <br/>        let url = "http://localhost:8000/upload.php";<br/>        axios.post(url, formData, { // receive two parameter endpoint url ,form data <br/>        })<br/>        .then(res =&gt; { // then print response status<br/>            console.warn(res.data);<br/>        })<br/> <br/>    }<br/> <br/>    render() {<br/>        let imgPreview;<br/>        if (this.state.file) {<br/>            imgPreview = &lt;img src={this.state.file} alt='' /&gt;;<br/>        }<br/>        return (<br/>            &lt;form&gt;<br/>                &lt;div className="form-group preview"&gt;<br/>                    {imgPreview}<br/>                &lt;/div&gt;<br/> <br/>                &lt;div className="form-group"&gt;<br/>                    &lt;input type="file" className="form-control" onChange={this.uploadSingleFile} /&gt;<br/>                &lt;/div&gt;<br/>                &lt;button type="button" className="btn btn-primary btn-block" onClick={this.upload}&gt;Upload&lt;/button&gt;<br/> <br/>            &lt;/form &gt;<br/>        )<br/>    }<br/>}</span></pre><p id="cac8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要上传文件，您需要一个HTML模板。在此模板中，您将创建一个“文件输入”元素，允许我们选择文件和一个上传文件的按钮。所以，在<strong class="jm io"> render() </strong>方法内部定义了if语句。</p><p id="554b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong>当用户选择一个文件时会调用`<strong class="jm io"> uploadSingleFile </strong>`方法。它将获取所选文件的file对象，并将其存储在`<strong class="jm io"> file </strong>状态。并将使用一个简单的PHP应用程序，该应用程序公开一个惟一的端点，该端点接受包含文件/图像的POST请求，将图像上传到服务器。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="fb89" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">阅读另:</strong> <a class="ae lf" href="https://websolutionstuff.com/post/how-to-get-multiple-checkbox-value-in-react-js" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在React JS </strong> </a>中获取多个复选框值】</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="beff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第四步:在App.js中添加组件</strong></p><p id="dc53" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步，我们将在<code class="fe lg lh li kn b">src/App.js</code>文件中添加<strong class="jm io">imageuploadpreviewcomponent . js</strong>文件。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="f003" class="kr ks in kn b gy kt ku l kv kw">import React from 'react';<br/>import '../node_modules/bootstrap/dist/css/bootstrap.min.css';<br/>import ImageUploadPreviewComponent from './ImageUploadPreviewComponent'<br/> <br/>function App() {  <br/>     <br/>  return (  <br/>    &lt;div className="App"&gt;  <br/>      &lt;ImageUploadPreviewComponent/&gt;  <br/>    &lt;/div&gt;  <br/>  );  <br/>}  <br/> <br/>export default App;</span></pre><p id="f057" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第五步:创建PHP文件</strong></p><p id="b379" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步，我们将创建一个PHP文件，命名为<strong class="jm io">upload.php</strong>。并向其中添加以下代码。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="bb8d" class="kr ks in kn b gy kt ku l kv kw">&lt;?php<br/>     <br/>    header("Access-Control-Allow-Origin: *");<br/>    header("Access-Control-Allow-Methods: PUT, GET, POST");<br/>    header("Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept");<br/>        <br/>    // Folder Path For Ubuntu<br/>    // $folderPath = "/var/www/my-app/uploads";<br/>    // Folder Path For Window<br/>    $folderPath = "uploads/";<br/>    <br/>    $file_tmp = $_FILES['image']['tmp_name'];<br/>    $file_ext = strtolower(end(explode('.',$_FILES['image']['name'])));<br/>    $file = $folderPath . uniqid() . '.'.$file_ext;<br/>    move_uploaded_file($file_tmp, $file);<br/>    <br/>   return json_encode(['status'=&gt;true]);<br/>?&gt;</span></pre></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><ul class=""><li id="310d" class="lj lk in jm b jn jo jr js jv ll jz lm kd ln kh lo lp lq lr bi translated"><strong class="jm io">阅读还:</strong> <a class="ae lf" href="https://websolutionstuff.com/post/how-to-use-array-in-react-js" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在React JS中使用数组</strong> </a></li><li id="158b" class="lj lk in jm b jn ls jr lt jv lu jz lv kd lw kh lo lp lq lr bi translated"><strong class="jm io">阅读也:</strong> <a class="ae lf" href="https://websolutionstuff.com/post/how-to-install-react-js-step-by-step" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何一步步安装React JS</strong></a></li><li id="957f" class="lj lk in jm b jn ls jr lt jv lu jz lv kd lw kh lo lp lq lr bi translated"><strong class="jm io">阅读另:</strong> <a class="ae lf" href="https://websolutionstuff.com/post/how-to-upload-multiple-image-in-laravel-9" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在Laravel 9 </strong> </a>中上传多个图像</li><li id="42a1" class="lj lk in jm b jn ls jr lt jv lu jz lv kd lw kh lo lp lq lr bi translated"><strong class="jm io">阅读还:</strong> <a class="ae lf" href="https://websolutionstuff.com/post/how-to-preview-image-before-upload-in-jquery" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在jQuery </strong> </a>中上传前预览图片</li></ul></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="a41b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果这篇文章有帮助，请点击拍手👏下面的按钮。几次以示支持。⬇⬇</p><p id="6070" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lx">更多内容请看</em><a class="ae lf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lx">plain English . io</em></strong></a><em class="lx">。报名参加我们的</em> <a class="ae lf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lx">免费每周简讯</em> </strong> </a> <em class="lx">。关注我们</em> <a class="ae lf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lx">推特</em> </strong> </a>，<a class="ae lf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lx">LinkedIn</em></strong></a><em class="lx">，</em><a class="ae lf" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lx">YouTube</em></strong></a><em class="lx">，</em> <a class="ae lf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lx">不和</em> </strong> </a> <em class="lx">。对增长黑客感兴趣？检查出</em> <a class="ae lf" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lx">电路</em> </strong> </a> <em class="lx">。</em></p></div></div>    
</body>
</html>