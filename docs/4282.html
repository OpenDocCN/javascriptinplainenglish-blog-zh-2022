<html>
<head>
<title>No one told me Scope and Scope Chain in JavaScript is this easy to understand</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">没人告诉我JavaScript中的作用域和作用域链这么容易理解吗</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/scope-and-scope-chain-in-javascript-a92dbdb1452f?source=collection_archive---------10-----------------------#2022-11-16">https://javascript.plainenglish.io/scope-and-scope-chain-in-javascript-a92dbdb1452f?source=collection_archive---------10-----------------------#2022-11-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b023241375cd734e7a19cb6910e7b736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-YKkXDuSDkDw1h-RP4jAA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">The above image is created by Divyojyoti Ghosh(me) on <a class="ae jz" href="http://www.canva.com/" rel="noopener ugc nofollow" target="_blank">www.canva.com</a> using different elements available for making designs.</figcaption></figure><p id="ae2c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在计算机编程中，作用域处理变量的组织(变量在哪里？)和它们的<strong class="kc io">入口</strong>(从哪里可以访问变量？).</p><p id="2ea8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">JavaScript有<strong class="kc io">词法作用域</strong>，这意味着代码中块和函数的位置控制作用域。</p><h1 id="2720" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">范围</h1><p id="dea7" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在开始范围和范围链之前，我们需要理解在JavaScript中变量的范围和作用域是不同的东西。那么，到底有什么区别呢？<strong class="kc io">范围</strong>是代码中声明了特定变量的空间或环境。相反，变量的<strong class="kc io">范围是代码中可以访问特定变量的区域。</strong></p><p id="c541" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不同范围的知识将帮助我们更好地理解范围本身。有三种类型的示波器—</p><ol class=""><li id="141e" class="mb mc in kc b kd ke kh ki kl md kp me kt mf kx mg mh mi mj bi translated">全球范围</li><li id="4fbb" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">功能范围</li><li id="139e" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">块范围</li></ol><h2 id="db5d" class="mp kz in bd la mq mr dn le ms mt dp li kl mu mv lm kp mw mx lq kt my mz lu na bi translated">全球范围</h2><p id="a4e8" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在任何函数或块之外声明的变量的范围是全局的，即它们可以在代码中的任何地方被访问。</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b5cb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所有三个变量<strong class="kc io"> student_name </strong>、<strong class="kc io"> age </strong>和<strong class="kc io"> minimum_marks </strong>都具有全局范围，可以在代码中的任何地方访问，因为它们都在任何函数或块之外声明。</p><h2 id="3065" class="mp kz in bd la mq mr dn le ms mt dp li kl mu mv lm kp mw mx lq kt my mz lu na bi translated">功能范围</h2><p id="d6ac" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">函数中声明的所有变量都有一个函数作用域，也就是说，它们不能在函数之外的任何地方被访问。函数中定义的所有变量无论是用<strong class="kc io"> var </strong>、<strong class="kc io"> const </strong>还是<strong class="kc io">声明，都让</strong>有函数作用域。</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="38de" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，变量<strong class="kc io"> minimum_marks </strong>、<strong class="kc io"> min_age_of_senior </strong>和<strong class="kc io"> maximum_marks </strong>都有函数作用域，即只能在函数内部访问。</p><h2 id="40d1" class="mp kz in bd la mq mr dn le ms mt dp li kl mu mv lm kp mw mx lq kt my mz lu na bi translated">块范围</h2><p id="b5f7" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在花括号{ }(除了function之外)中使用let或const声明的变量具有块范围，即这些变量不能在块之外访问。花括号内用var声明的变量不能是块范围的，也就是说，它们也可以在块外被访问。</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="3a0b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，在if块中使用var定义的<strong class="kc io"> minimum_marks </strong>可以从代码中的任何地方访问，但是使用let定义的<strong class="kc io"> maximum_marks </strong>是blocked范围的，因此当它在块外被调用时会抛出ReferenceError。</p><p id="2c45" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在严格模式下，在块中用let或const声明的函数也是阻塞范围，甚至命名函数(没有用var、let或const声明)也是阻塞范围。</p><h1 id="d34b" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">范围链</h1><p id="23bc" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在Javascript中，每个作用域都可以访问所有祖先/父作用域的变量和函数。在执行过程中，如果JS引擎遇到一个变量，为了访问该变量及其值，它首先在局部范围内搜索，如果在局部范围内没有找到该变量，它就在它的父范围内搜索该变量。</p><p id="4804" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">搜索从一个范围到其父范围再到其父的父范围，直到找到该变量。从内部作用域到外部作用域定位变量的整个概念被称为作用域链。最后也是最外层的作用域是全局作用域，它是最终的父作用域。</p><p id="c6f3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果在整个作用域链中没有找到某个变量，JS引擎将抛出一个引用错误，并声明该变量未定义。</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="d9f1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，<code class="fe nh ni nj nk b">getGradYear()</code>函数的最后一行抛出了一个引用错误，因为该函数没有访问变量<code class="fe nh ni nj nk b">totalFees</code>的权限。<code class="fe nh ni nj nk b">totalfees</code>变量不在函数的局部范围内，也不在<code class="fe nh ni nj nk b">getGradYear()</code>函数的任何父函数中，该变量是在if块中使用let定义的，因此它的范围是blocked。</p><p id="1980" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe nh ni nj nk b">if </code>块范围和<code class="fe nh ni nj nk b">getGradYear</code>功能范围是<code class="fe nh ni nj nk b">getDetailsOfStudent()</code>功能范围的子范围。<code class="fe nh ni nj nk b">if </code>块和<code class="fe nh ni nj nk b">getGradYear</code>函数都可以访问其父作用域的变量，即<code class="fe nh ni nj nk b">getDetailsOfStudent()</code>函数作用域和全局作用域。</p><figure class="nb nc nd ne gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/c053088c6ff21f4bf449132468449802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*zmJlIpS8cNNtEEf_Wc6Xyg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Understanding Scope Chain</figcaption></figure><h1 id="9899" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">参考</h1><p id="0e80" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated"><a class="ae jz" href="https://www.udemy.com/course/the-complete-javascript-course" rel="noopener ugc nofollow" target="_blank">https://www.udemy.com/course/the-complete-javascript-course</a></p><div class="nm nn gp gr no np"><a href="https://gist.github.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd io gy z fp nu fr fs nv fu fw im bi translated">发现要点</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">使用Kali Linux (PWK)课程和进攻性安全认证专家(OSCP)备忘单进行渗透测试…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">gist.github.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od jt np"/></div></div></a></div><p id="b8ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="oe">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">plain English . io</em></strong></a><em class="oe">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="oe">免费周报</em> </strong> </a> <em class="oe">。关注我们上</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">LinkedIn</em></strong></a><strong class="kc io"><em class="oe"/></strong><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">YouTube</em></strong></a><strong class="kc io"><em class="oe"/></strong><em class="oe">和</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="oe">不和</em> </strong> </a>  <em class="oe">对成长黑客感兴趣？检查</em> <a class="ae jz" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="oe">电路</em> </strong> </a> <strong class="kc io"> <em class="oe">。</em> </strong></p></div></div>    
</body>
</html>