<html>
<head>
<title>How to Implement auth0 Authentication in Nuxt3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Nuxt3中实现auth0认证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nuxt-3-auth0-authentication-70e86a98a3b3?source=collection_archive---------3-----------------------#2022-04-28">https://javascript.plainenglish.io/nuxt-3-auth0-authentication-70e86a98a3b3?source=collection_archive---------3-----------------------#2022-04-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="ce87" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在Nuxt3项目中实现auth0认证的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/00359109603ea92003e92a4960d623d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9jwdDa2wSi1lrYLpljSbrA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@flyd2069?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">FLY:D</a> on <a class="ae ks" href="https://unsplash.com/s/photos/security?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f6fe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我正在为我的新项目试用<a class="ae ks" href="https://v3.nuxtjs.org/" rel="noopener ugc nofollow" target="_blank"> Nuxt3 </a>，并希望将<a class="ae ks" href="https://auth0.com/" rel="noopener ugc nofollow" target="_blank"> auth0 </a>实现为认证即服务。在写这篇博客的时候，我找不到适用于旧版本Nuxt的Nuxt模块。因此，我认为这个小小的变通办法可能对其他人也有帮助，直到他们发布auth0的新Nuxt3模块。</p><p id="8a08" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以先从Nuxt3项目说起。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="ff49" class="lu lv in lq b gy lw lx l ly lz">npx nuxi init nuxt-app</span></pre><p id="d752" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我使用的是auth0 "@auth0/auth0-spa-js "中的JavaScript库。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="c376" class="lu lv in lq b gy lw lx l ly lz">npm i @auth0/auth0-spa-js</span></pre><p id="07d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">从文档来看，似乎是这样的:要创建全局中间件，我们只需要在文件名后面加上后缀“global ”:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/3c67a15adadee323f206f16c73fdd69b.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*pz43tjnh1clb-8rDoJwBbg.png"/></div></figure><p id="e950" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这个文件中，我们将编写在加载每个路由之前运行的逻辑(对于Nuxt，它将是每个页面)。这是我们认证验证所需要的。</p><p id="b976" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面是auth.global.ts的代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="93e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的代码中，您将需要auth client，您可以将它添加到您的商店或其他地方，您也可以将该文件共享到Vue.js组件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="6ae5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们看看我们要实现什么:</p><ol class=""><li id="0427" class="md me in kv b kw kx kz la lc mf lg mg lk mh lo mi mj mk ml bi translated">当有人直接路由到其他页面而不是主页时，我们需要身份验证。</li><li id="d2ad" class="md me in kv b kw mm kz mn lc mo lg mp lk mq lo mi mj mk ml bi translated">当有人点击登录按钮时，我们也需要验证。</li></ol><p id="e427" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面是app.vue文件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="f33f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们创建About.vue(用于About路线)和index.vue(用于home路线):</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/ce9b398e098ecb8402264fb15ce03b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*u83aYIvvahMY6hP-08XGSQ.png"/></div></figure><p id="7848" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们应该能够看到它全部工作。让我们来测试一下。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="93e7" class="lu lv in lq b gy lw lx l ly lz">npm run dev</span></pre><p id="1146" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">小贴士:</p><p id="2e2f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请确保在Auth0平台设置上正确配置了所有重定向URLs例如，我为重定向URI和注销URI配置了“http://localhost:3000 ”,在我的应用程序中也是如此。但是，您可以在您的应用程序中更改注销重定向:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="8697" class="lu lv in lq b gy lw lx l ly lz">await auth.logout({    returnTo: window.location.origin,  });</span></pre><p id="8cae" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以在这里查看<a class="ae ks" href="https://github.com/ashansurkar/nuxt3-auth" rel="noopener ugc nofollow" target="_blank"> Github回购</a>。</p><p id="bfb5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">希望这对你有帮助。请随意给我鼓掌。如果有什么困惑或者有什么建议，请在评论中告诉我。编码快乐！</p><p id="c16f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ms">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ms">plain English . io</em></strong></a><em class="ms">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ms">免费周报</em> </strong> </a> <em class="ms">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ms">Twitter</em></strong></a><em class="ms">和</em><strong class="kv io"><em class="ms"/></strong><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ms">LinkedIn</em></strong></a><em class="ms">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ms">社区不和谐</em> </strong> </a> <em class="ms">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ms">人才集体</em> </strong> </a> <em class="ms">。</em></p></div></div>    
</body>
</html>