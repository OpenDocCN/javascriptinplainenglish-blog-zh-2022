<html>
<head>
<title>Create a Shopping List with React Hook useReducer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React Hook useReducer创建购物清单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-shopping-list-with-react-hook-usereducer-310a3b6578?source=collection_archive---------11-----------------------#2022-09-19">https://javascript.plainenglish.io/a-shopping-list-with-react-hook-usereducer-310a3b6578?source=collection_archive---------11-----------------------#2022-09-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6dcc" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">带有useReducer React挂钩的购物清单——一个让useReducer更容易理解的小练习。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/386d7da08e68039759bca254cd335c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_5Mc43f7d5J1wh_66FOsg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">不学不成，不问不知 — no succeed without learn and ask</figcaption></figure></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="bdf9" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">随着<strong class="lb io"> Redux </strong>作为React的状态管理解决方案的兴起，<strong class="lb io"> Reducer </strong>的概念在JavaScript中流行起来。我对Reducer的理解一直是模棱两可的，既然<a class="ae lv" href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener ugc nofollow" target="_blank"> <em class="lw"> useReducer </em> </a>是React作为高级钩子提供的，我决定用它做一点练习。</p><p id="0f35" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">我见过的大多数reducer例子都与一些计数函数有关，以及增加或减少一个数字等。在本文中，我想一步一步地创建一个简单的购物清单来更好地理解这个钩子，而不是<em class="lw"> useState </em>，我想试试<em class="lw"> useReducer </em>。</p><p id="6da8" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><em class="lw"> *useReducer不同于useEffect、useState、useRef等钩子。没有它，我们可以正常完成需求的开发，但是useReducer可以让我们的代码更具可读性、可维护性和可预测性。</em></p></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="3d54" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">基本上，减速器用于管理应用程序中的<strong class="lb io">状态</strong>。例如，如果用户在HTML输入字段中键入内容，应用程序必须管理这个UI状态(比如一个受控组件)。</p><p id="9f48" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">本质上，reducer是一个函数，它接受两个参数——当前状态<strong class="lb io"/><strong class="lb io"/>和动作<strong class="lb io"/>——并基于这两个参数返回新状态<strong class="lb io"/>。它可以表示为:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="1e13" class="mc md in ly b gy me mf l mg mh">(state, action) =&gt; newState</span></pre><p id="08bb" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">第一个参数:<strong class="lb io">状态📍</strong></p><p id="aa04" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">一个reducer函数是一个没有任何副作用的纯函数，也就是说给定相同的输入(比如状态和动作)，期望输出(比如<strong class="lb io"> newState </strong>)永远是相同的。</p><p id="7470" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">* <em class="lw">减速器处理的</em> <strong class="lb io"> <em class="lw">状态</em> </strong> <em class="lw">对象必须是</em><strong class="lb io"><em class="lw"/></strong><em class="lw">不可变的，这意味着从不直接修改参数中的状态，减速器函数每次都要返回一个新的状态。</em></p><p id="defb" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">第二个参数:<strong class="lb io">动作📍</strong></p><p id="0609" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">动作通常被定义为具有<strong class="lb io">类型</strong>属性的对象，根据动作的类型，reducers可以执行条件状态转换。如果动作类型不匹配任何条件，它将返回初始状态。</p><p id="b4e9" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">🤯文字解释可能会令人头疼，所以为什么不开始做我们的购物清单呢…</p></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="ec37" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">我们的购物清单非常简单，用户可以在输入字段中输入文本，通过单击<strong class="lb io">添加</strong>按钮，每个清单将在下方显示一个<strong class="lb io">删除</strong>按钮，允许用户轻松删除该清单。我们还有一个<strong class="lb io">重置</strong>按钮来清理列表。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/5cbfe37292ffa2775790156a877b8033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*orQXxjBu4zazfe35sMo_Kw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">shopping list result</figcaption></figure><p id="e484" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">为了使结构清晰，我们可以将页面大致分为三个组件:<strong class="lb io"> AddWrapper </strong>包含添加按钮和输入字段，<strong class="lb io"> ListWrapper </strong>显示最终购物清单和移除按钮，reset按钮在<strong class="lb io"> ResetButtonWrapper </strong>内部。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/e880b3b35c0c4ed1d5652eb01eaa2563.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*7FuqScn38hW4XKBcswE10Q.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">components structure</figcaption></figure><p id="6297" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> reducer.js </strong>文件将包含购物清单缩减器和初始购物清单作为初始状态，如下所示:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="da13" class="mc md in ly b gy me mf l mg mh">const initialShoppingList = [ { id:'',content:'' } ]<br/>const shoppinglistReducer = ( state, action ) =&gt; {...}</span><span id="4b88" class="mc md in ly b gy mk mf l mg mh">export { shoppinglistReducer, initialShoppingList }</span></pre><p id="0f0c" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> App </strong>组件:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="08dd" class="mc md in ly b gy me mf l mg mh">export default function App() {<br/>  const inputRef = useRef();<br/>  ...<br/>  return (<br/>     &lt;&gt;<br/>       ...<br/>       &lt;AddWrapper ... /&gt;<br/>       &lt;ListWrapper ... /&gt;<br/>       &lt;ResetButtonWrapper ... /&gt;<br/>     &lt;/&gt;<br/> )}</span></pre><p id="cae4" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> AddWrapper </strong>组件:</p><p id="b40e" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">* <em class="lw">如果你不熟悉</em><strong class="lb io"><em class="lw">forward ref</em></strong><em class="lw">，可以看看</em> <a class="ae lv" href="https://xiaominzhu.medium.com/react-functional-components-using-refs-a5ad1d2817d4" rel="noopener"> <em class="lw">这篇</em> </a> <em class="lw"> :) </em></p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="3e88" class="mc md in ly b gy me mf l mg mh">import { forwardRef } from "react";</span><span id="d56b" class="mc md in ly b gy mk mf l mg mh">const AddWrapper = ({ ... }, <strong class="ly io">ref</strong>) =&gt; (<br/>  &lt;&gt;<br/>    &lt;input type="text" ref={<strong class="ly io">ref</strong>} /&gt;<br/>    &lt;button onClick={...}&gt;add&lt;/button&gt;<br/>  &lt;/&gt;<br/>);</span><span id="805b" class="mc md in ly b gy mk mf l mg mh">export default <strong class="ly io">forwardRef</strong>(AddWrapper);</span></pre><p id="77df" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> ListWrapper </strong>组件:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="0371" class="mc md in ly b gy me mf l mg mh">const ListWrapper = ({ ... }) =&gt; {<br/> return (<br/>   &lt;ul&gt;<br/>    {newList?.filter(...).map(({ ... }) =&gt; {<br/>       return (<br/>         &lt;li key={...}&gt;<br/>           &lt;span&gt;{content}&lt;/span&gt;<br/>           &lt;button onClick={...}&gt;remove&lt;/button&gt;<br/>        &lt;/li&gt;<br/>     )})}<br/>   &lt;/ul&gt;<br/>)};</span><span id="287b" class="mc md in ly b gy mk mf l mg mh">export default ListWrapper;</span></pre><p id="e67f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> ResetButtonWrapper </strong>组件:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="2839" class="mc md in ly b gy me mf l mg mh">const ResetButtonWrapper = ({ ... }) =&gt; <br/>  &lt;button onClick={...}&gt;reset&lt;/button&gt;</span><span id="9c61" class="mc md in ly b gy mk mf l mg mh">export default ResetButtonWrapper;</span></pre></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="e9d0" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">结构清楚了，现在我们从<strong class="lb io">加</strong>逻辑开始。</p><p id="5171" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">要添加一个列表，我们需要一个包含列表对象的初始列表数组，例如文本内容、id等。我们已经在上面的reducer.js文件中创建了它。</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="b9d8" class="mc md in ly b gy me mf l mg mh">const initialShoppingList = [ { id:'',content:'' } ];</span></pre><p id="6edd" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">我们的“添加”逻辑也在reducer文件内部，姑且将其命名为<em class="lw">shoppinglisteducer。</em>由于reducer接收当前状态和触发的动作(如添加、删除……)，它计算并返回新状态(如新购物清单)，我们可以这样理解<strong class="lb io"> u*s*e*R*e*d*u*c*e*r </strong>:</p><p id="d8ee" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> <em class="lw">🦋使用</em> </strong> <em class="lw">一个动作</em> <strong class="lb io"> <em class="lw">键入</em> </strong> <em class="lw">由</em> <strong class="lb io"> <em class="lw">分派</em> </strong> <em class="lw">来触发一个</em> <strong class="lb io"> <em class="lw">动作</em> </strong> <em class="lw">并将</em> <strong class="lb io"> <em class="lw">初始</em> </strong> <em class="lw">状态更新为</em></p><p id="91ff" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">因为我们的初始列表包含<strong class="lb io"> id </strong>和<strong class="lb io">内容</strong>，这意味着我们可以实现添加逻辑:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="f683" class="mc md in ly b gy me mf l mg mh">const shoppinglistReducer = (state, action) =&gt; {<br/>  switch ( <strong class="ly io">action.type</strong> ) {<br/>   case "<strong class="ly io">ADD</strong>":<br/>    return [...<strong class="ly io">state</strong>, {<strong class="ly io">id</strong>: state.length, <strong class="ly io">content</strong>: action.content}];<br/>   case "REMOVE": return...;<br/>   case "RESET": return...;<br/>   default: throw new Error();<br/> }}</span></pre><p id="ce0a" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">使用动作类型“<strong class="lb io"> ADD </strong>”，我们向初始列表添加一个带有id和输入文本的新列表。</p><p id="c263" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">现在我们可以在App组件中使用这个逻辑，并向下传递<strong class="lb io"> props </strong>:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="eafc" class="mc md in ly b gy me mf l mg mh">import { shoppinglistReducer, initialShoppingList } from "./reducer";<br/>import { useReducer, useRef } from "react";</span><span id="eefc" class="mc md in ly b gy mk mf l mg mh">export default function App() {<br/>   const <strong class="ly io">inputRef</strong> = useRef(); <em class="lw">// 👉 create input ref<br/>   </em>const [<strong class="ly io">newList</strong>, dispatch] = <strong class="ly io">useReducer</strong>(shoppinglistReducer, initialShoppingList); // 👉 dispatch action from the reducer, update initial list and return new list<br/>   const <strong class="ly io">addList</strong> = () =&gt; {<br/>      inputRef.current.value &amp;&amp; dispatch({ type: "<strong class="ly io">ADD</strong>", content: inputRef.current.value });<br/>      inputRef.current.value = ""; // reset input value after click<br/>      inputRef.current.focus();<br/>   };</span><span id="796b" class="mc md in ly b gy mk mf l mg mh"> return (<br/>   &lt;<strong class="ly io">AddWrapper</strong> addList={<strong class="ly io">addList</strong>} ref={<strong class="ly io">inputRef</strong>} /&gt;<br/>   &lt;<strong class="ly io">ListWrapper</strong> newList={newList} /&gt;<br/>   ...<br/> )<br/>}</span></pre><p id="5f71" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">更新AddWrapper组件:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/f2ee794511fe22a54b501443562b2408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ENbvq4pis9EuDSlZSic_g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">final AddWrapper component contains add function and ref props</figcaption></figure><p id="2bbc" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">现在，用户可以简单地输入和添加一个列表，新的购物列表数组从reducer返回，来呈现它。<em class="lw">地图()</em>:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="7e7e" class="mc md in ly b gy me mf l mg mh">const ListWrapper = ({ newList, ... }) =&gt; {<br/>  return (<br/>    &lt;ul&gt;<br/>    {<strong class="ly io">newList</strong>?.map(({ id, content }) =&gt; {<br/>      return (<br/>        &lt;li key={<strong class="ly io">id</strong>}&gt;<br/>         &lt;span&gt;{<strong class="ly io">content</strong>}&lt;/span&gt;<br/>         &lt;button onClick={...}&gt;remove&lt;/button&gt; <br/>        &lt;/li&gt;<br/>      );<br/>    })}<br/>   &lt;/ul&gt;<br/> )};</span><span id="1e24" class="mc md in ly b gy mk mf l mg mh">export default ListWrapper;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/9cc96b9e593ed9530ae689fb8a126f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*0aQFetMHPiH_Tt0t2ju6BA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">the added list within console.log(newList)</figcaption></figure></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="59e5" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">下一步，创建<strong class="lb io">删除</strong>逻辑。</p><p id="2169" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">因为我们已经创建了缩减器，所以我们可以添加这个逻辑:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="d0be" class="mc md in ly b gy me mf l mg mh">const shoppinglistReducer = (state, action) =&gt; {<br/>  switch ( <strong class="ly io">action.type</strong> ) {<br/>   case "ADD":... //same<br/>   case "<strong class="ly io">REMOVE</strong>": return state.filter(list =&gt; list.id !== action.id);<br/>   case "RESET": return...;<br/>   default: throw new Error();<br/> }}</span><span id="985a" class="mc md in ly b gy mk mf l mg mh">export default function App() {<br/>  const <strong class="ly io">remove</strong> = (<strong class="ly io">id</strong>) =&gt; dispatch({ type: "<strong class="ly io">REMOVE</strong>", <strong class="ly io">id</strong> });<br/>   return (<br/>     ...<br/>     &lt;ListWrapper newList={newList} remove={<strong class="ly io">remove</strong>} /&gt;<br/> )}</span><span id="cbbd" class="mc md in ly b gy mk mf l mg mh">const ListWrapper = ({ newList, <strong class="ly io">remove</strong> }) =&gt; {<br/>  return (<br/>    &lt;ul&gt;<br/>      ... // same <br/>       &lt;button onClick={() =&gt; <strong class="ly io">remove</strong>(<strong class="ly io">id</strong>)}&gt;remove&lt;/button&gt;<br/>    &lt;/ul&gt;<br/> )};</span></pre><p id="e9aa" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">上面的代码意思是:如果我们要“<strong class="lb io">移除</strong>一个特定的列表，我们使用<strong class="lb io"> ID </strong>并过滤掉匹配的列表，剩下的渲染为“<strong class="lb io"> newList </strong>”。为了在单击按钮时调用这个remove函数，我们使用了新的列表id。</p><p id="c13e" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">现在，用户只需点击一下按钮就可以删除列表。</p></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="98df" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">最后一步:创建<strong class="lb io">复位</strong>逻辑。</p><p id="edd2" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">这很简单，“重置”只是意味着不渲染任何东西，所以我们可以返回一个空数组[ ]:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="aae5" class="mc md in ly b gy me mf l mg mh">const shoppinglistReducer = (state, action) =&gt; {<br/>  switch ( <strong class="ly io">action.type</strong> ) {<br/>   case "ADD": ...; <br/>   case "REMOVE": ...;<br/>   case "<strong class="ly io">RESET</strong>": return<strong class="ly io">[]</strong>;<br/>   ...<br/> }}</span><span id="c92c" class="mc md in ly b gy mk mf l mg mh">export default function App() {<br/>    const handleReset = () =&gt; dispatch({ type: "<strong class="ly io">RESET</strong>" });<br/>    return (<br/>     ...<br/>     &lt;ResetButtonWrapper <strong class="ly io">handleReset</strong>={handleReset} /&gt;<br/>}</span><span id="a328" class="mc md in ly b gy mk mf l mg mh">const ResetButtonWrapper = ({ handleReset }) =&gt; <br/>   &lt;button onClick={() =&gt; <strong class="ly io">handleReset</strong>()}&gt;reset&lt;/button&gt;;</span></pre></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><h1 id="8134" class="mn md in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated"><strong class="ak">结论</strong></h1><blockquote class="ne nf ng"><p id="ff8a" class="kz la lw lb b lc ld jo le lf lg jr lh nh lj lk ll ni ln lo lp nj lr ls lt lu ig bi translated">useReducer是<code class="fe nk nl nm ly b"><a class="ae lv" href="https://reactjs.org/docs/hooks-reference.html#usestate" rel="noopener ugc nofollow" target="_blank">useState</a></code>的替代，当您有涉及多个子值的复杂状态逻辑或者当下一个状态依赖于前一个状态时，它通常更适合使用State，它还允许您优化触发深度更新的组件的性能，因为您可以向下传递<code class="fe nk nl nm ly b">dispatch</code>而不是回调。</p></blockquote><p id="167f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">在以下情况下使用它:</p><ul class=""><li id="015a" class="nn no in lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">你的状态是一个数组或对象</li><li id="039b" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">你的状态变化很复杂</li><li id="000e" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">您希望构建自动化测试用例来确保程序的稳定性</li><li id="6df8" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">您需要修改深层子组件中的某些状态</li><li id="ce7d" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">您有一个相对较大的应用程序，您希望UI和业务可以分开维护</li></ul><p id="00b8" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">就是这样！👐你可以在这里找到完整的代码<a class="ae lv" href="https://codesandbox.io/s/react-usereducer-idckv5?file=/src/App.js:1184-1232" rel="noopener ugc nofollow" target="_blank"/>，玩玩吧:)感谢你的时间！⏰</p><p id="d49f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">如果你也对我的其他文章感兴趣，这里有一些链接:</p><div class="ob oc gp gr od oe"><a href="https://xiaominzhu.medium.com/react-functional-components-using-refs-a5ad1d2817d4" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">使用引用对功能组件进行反应</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">forwardRef和useImperativeHandle的示例</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">xiaominzhu.medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-simple-express-server-node-js-for-react-application-e2b2bd0c7e93"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">为React应用程序创建一个简单的Express服务器(Node.js)</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">关于如何创建一个简单的Express服务器(Node.js)、将其连接到React应用程序以及解决错误的教程…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="on l"><div class="ot l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/use-session-storage-to-persist-state-within-a-react-component-206867ef2269"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">使用会话存储来保持React组件中的状态</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">当页面会话结束时，sessionStorage中的数据将被清除。</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="on l"><div class="ou l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a href="https://enlear.academy/create-responsive-iframe-embed-in-a-react-way-f52075bf3b04" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">创建以反应方式嵌入的响应iframe</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">—令人惊讶的是，YouTube没有相应的嵌入代码🦄，我们来玩css吧…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">enlear .学院</p></div></div><div class="on l"><div class="ov l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-simple-react-custom-hook-fc733d7b977a"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">创建一个简单的React自定义挂钩</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">关于如何创建一个简单的React自定义钩子的教程</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="on l"><div class="ow l op oq or on os km oe"/></div></div></a></div></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="805f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><em class="lw">更多内容请看</em><a class="ae lv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">plain English . io</em></strong></a><em class="lw">。报名参加我们的</em> <a class="ae lv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb io"> <em class="lw">免费周报</em> </strong> </a> <em class="lw">。关注我们关于</em><a class="ae lv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">Twitter</em></strong></a><a class="ae lv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">LinkedIn</em></strong></a><em class="lw"/><a class="ae lv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">YouTube</em></strong></a><em class="lw"/><a class="ae lv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">不和</em> </strong> </a> <em class="lw">。对增长黑客感兴趣？检查</em> <a class="ae lv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb io"> <em class="lw">电路</em> </strong> </a> <em class="lw">。</em></p></div></div>    
</body>
</html>