<html>
<head>
<title>Create a Shopping List with React Hook useReducer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨React Hook useReduceråˆ›å»ºè´­ç‰©æ¸…å•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/a-shopping-list-with-react-hook-usereducer-310a3b6578?source=collection_archive---------11-----------------------#2022-09-19">https://javascript.plainenglish.io/a-shopping-list-with-react-hook-usereducer-310a3b6578?source=collection_archive---------11-----------------------#2022-09-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6dcc" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">å¸¦æœ‰useReducer ReactæŒ‚é’©çš„è´­ç‰©æ¸…å•â€”â€”ä¸€ä¸ªè®©useReduceræ›´å®¹æ˜“ç†è§£çš„å°ç»ƒä¹ ã€‚</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/386d7da08e68039759bca254cd335c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_5Mc43f7d5J1wh_66FOsg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">ä¸å­¦ä¸æˆï¼Œä¸é—®ä¸çŸ¥ â€” no succeed without learn and ask</figcaption></figure></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="bdf9" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">éšç€<strong class="lb io"> Redux </strong>ä½œä¸ºReactçš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆçš„å…´èµ·ï¼Œ<strong class="lb io"> Reducer </strong>çš„æ¦‚å¿µåœ¨JavaScriptä¸­æµè¡Œèµ·æ¥ã€‚æˆ‘å¯¹Reducerçš„ç†è§£ä¸€ç›´æ˜¯æ¨¡æ£±ä¸¤å¯çš„ï¼Œæ—¢ç„¶<a class="ae lv" href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener ugc nofollow" target="_blank"> <em class="lw"> useReducer </em> </a>æ˜¯Reactä½œä¸ºé«˜çº§é’©å­æä¾›çš„ï¼Œæˆ‘å†³å®šç”¨å®ƒåšä¸€ç‚¹ç»ƒä¹ ã€‚</p><p id="0f35" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">æˆ‘è§è¿‡çš„å¤§å¤šæ•°reducerä¾‹å­éƒ½ä¸ä¸€äº›è®¡æ•°å‡½æ•°æœ‰å…³ï¼Œä»¥åŠå¢åŠ æˆ–å‡å°‘ä¸€ä¸ªæ•°å­—ç­‰ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³ä¸€æ­¥ä¸€æ­¥åœ°åˆ›å»ºä¸€ä¸ªç®€å•çš„è´­ç‰©æ¸…å•æ¥æ›´å¥½åœ°ç†è§£è¿™ä¸ªé’©å­ï¼Œè€Œä¸æ˜¯<em class="lw"> useState </em>ï¼Œæˆ‘æƒ³è¯•è¯•<em class="lw"> useReducer </em>ã€‚</p><p id="6da8" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><em class="lw"> *useReducerä¸åŒäºuseEffectã€useStateã€useRefç­‰é’©å­ã€‚æ²¡æœ‰å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ­£å¸¸å®Œæˆéœ€æ±‚çš„å¼€å‘ï¼Œä½†æ˜¯useReducerå¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç æ›´å…·å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯é¢„æµ‹æ€§ã€‚</em></p></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="3d54" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">åŸºæœ¬ä¸Šï¼Œå‡é€Ÿå™¨ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºä¸­çš„<strong class="lb io">çŠ¶æ€</strong>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·åœ¨HTMLè¾“å…¥å­—æ®µä¸­é”®å…¥å†…å®¹ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»ç®¡ç†è¿™ä¸ªUIçŠ¶æ€(æ¯”å¦‚ä¸€ä¸ªå—æ§ç»„ä»¶)ã€‚</p><p id="9f48" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">æœ¬è´¨ä¸Šï¼Œreduceræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°â€”â€”å½“å‰çŠ¶æ€<strong class="lb io"/><strong class="lb io"/>å’ŒåŠ¨ä½œ<strong class="lb io"/>â€”â€”å¹¶åŸºäºè¿™ä¸¤ä¸ªå‚æ•°è¿”å›æ–°çŠ¶æ€<strong class="lb io"/>ã€‚å®ƒå¯ä»¥è¡¨ç¤ºä¸º:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="1e13" class="mc md in ly b gy me mf l mg mh">(state, action) =&gt; newState</span></pre><p id="08bb" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ç¬¬ä¸€ä¸ªå‚æ•°:<strong class="lb io">çŠ¶æ€ğŸ“</strong></p><p id="aa04" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ä¸€ä¸ªreducerå‡½æ•°æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨çš„çº¯å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ç»™å®šç›¸åŒçš„è¾“å…¥(æ¯”å¦‚çŠ¶æ€å’ŒåŠ¨ä½œ)ï¼ŒæœŸæœ›è¾“å‡º(æ¯”å¦‚<strong class="lb io"> newState </strong>)æ°¸è¿œæ˜¯ç›¸åŒçš„ã€‚</p><p id="7470" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">* <em class="lw">å‡é€Ÿå™¨å¤„ç†çš„</em> <strong class="lb io"> <em class="lw">çŠ¶æ€</em> </strong> <em class="lw">å¯¹è±¡å¿…é¡»æ˜¯</em><strong class="lb io"><em class="lw"/></strong><em class="lw">ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä»ä¸ç›´æ¥ä¿®æ”¹å‚æ•°ä¸­çš„çŠ¶æ€ï¼Œå‡é€Ÿå™¨å‡½æ•°æ¯æ¬¡éƒ½è¦è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚</em></p><p id="defb" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ç¬¬äºŒä¸ªå‚æ•°:<strong class="lb io">åŠ¨ä½œğŸ“</strong></p><p id="0609" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">åŠ¨ä½œé€šå¸¸è¢«å®šä¹‰ä¸ºå…·æœ‰<strong class="lb io">ç±»å‹</strong>å±æ€§çš„å¯¹è±¡ï¼Œæ ¹æ®åŠ¨ä½œçš„ç±»å‹ï¼Œreducerså¯ä»¥æ‰§è¡Œæ¡ä»¶çŠ¶æ€è½¬æ¢ã€‚å¦‚æœåŠ¨ä½œç±»å‹ä¸åŒ¹é…ä»»ä½•æ¡ä»¶ï¼Œå®ƒå°†è¿”å›åˆå§‹çŠ¶æ€ã€‚</p><p id="b4e9" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ğŸ¤¯æ–‡å­—è§£é‡Šå¯èƒ½ä¼šä»¤äººå¤´ç–¼ï¼Œæ‰€ä»¥ä¸ºä»€ä¹ˆä¸å¼€å§‹åšæˆ‘ä»¬çš„è´­ç‰©æ¸…å•å‘¢â€¦</p></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="ec37" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">æˆ‘ä»¬çš„è´­ç‰©æ¸…å•éå¸¸ç®€å•ï¼Œç”¨æˆ·å¯ä»¥åœ¨è¾“å…¥å­—æ®µä¸­è¾“å…¥æ–‡æœ¬ï¼Œé€šè¿‡å•å‡»<strong class="lb io">æ·»åŠ </strong>æŒ‰é’®ï¼Œæ¯ä¸ªæ¸…å•å°†åœ¨ä¸‹æ–¹æ˜¾ç¤ºä¸€ä¸ª<strong class="lb io">åˆ é™¤</strong>æŒ‰é’®ï¼Œå…è®¸ç”¨æˆ·è½»æ¾åˆ é™¤è¯¥æ¸…å•ã€‚æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª<strong class="lb io">é‡ç½®</strong>æŒ‰é’®æ¥æ¸…ç†åˆ—è¡¨ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/5cbfe37292ffa2775790156a877b8033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*orQXxjBu4zazfe35sMo_Kw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">shopping list result</figcaption></figure><p id="e484" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ä¸ºäº†ä½¿ç»“æ„æ¸…æ™°ï¼Œæˆ‘ä»¬å¯ä»¥å°†é¡µé¢å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªç»„ä»¶:<strong class="lb io"> AddWrapper </strong>åŒ…å«æ·»åŠ æŒ‰é’®å’Œè¾“å…¥å­—æ®µï¼Œ<strong class="lb io"> ListWrapper </strong>æ˜¾ç¤ºæœ€ç»ˆè´­ç‰©æ¸…å•å’Œç§»é™¤æŒ‰é’®ï¼ŒresetæŒ‰é’®åœ¨<strong class="lb io"> ResetButtonWrapper </strong>å†…éƒ¨ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/e880b3b35c0c4ed1d5652eb01eaa2563.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*7FuqScn38hW4XKBcswE10Q.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">components structure</figcaption></figure><p id="6297" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> reducer.js </strong>æ–‡ä»¶å°†åŒ…å«è´­ç‰©æ¸…å•ç¼©å‡å™¨å’Œåˆå§‹è´­ç‰©æ¸…å•ä½œä¸ºåˆå§‹çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="da13" class="mc md in ly b gy me mf l mg mh">const initialShoppingList = [ { id:'',content:'' } ]<br/>const shoppinglistReducer = ( state, action ) =&gt; {...}</span><span id="4b88" class="mc md in ly b gy mk mf l mg mh">export { shoppinglistReducer, initialShoppingList }</span></pre><p id="0f0c" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> App </strong>ç»„ä»¶:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="08dd" class="mc md in ly b gy me mf l mg mh">export default function App() {<br/>  const inputRef = useRef();<br/>  ...<br/>  return (<br/>     &lt;&gt;<br/>       ...<br/>       &lt;AddWrapper ... /&gt;<br/>       &lt;ListWrapper ... /&gt;<br/>       &lt;ResetButtonWrapper ... /&gt;<br/>     &lt;/&gt;<br/> )}</span></pre><p id="cae4" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> AddWrapper </strong>ç»„ä»¶:</p><p id="b40e" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">* <em class="lw">å¦‚æœä½ ä¸ç†Ÿæ‚‰</em><strong class="lb io"><em class="lw">forward ref</em></strong><em class="lw">ï¼Œå¯ä»¥çœ‹çœ‹</em> <a class="ae lv" href="https://xiaominzhu.medium.com/react-functional-components-using-refs-a5ad1d2817d4" rel="noopener"> <em class="lw">è¿™ç¯‡</em> </a> <em class="lw"> :) </em></p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="3e88" class="mc md in ly b gy me mf l mg mh">import { forwardRef } from "react";</span><span id="d56b" class="mc md in ly b gy mk mf l mg mh">const AddWrapper = ({ ... }, <strong class="ly io">ref</strong>) =&gt; (<br/>  &lt;&gt;<br/>    &lt;input type="text" ref={<strong class="ly io">ref</strong>} /&gt;<br/>    &lt;button onClick={...}&gt;add&lt;/button&gt;<br/>  &lt;/&gt;<br/>);</span><span id="805b" class="mc md in ly b gy mk mf l mg mh">export default <strong class="ly io">forwardRef</strong>(AddWrapper);</span></pre><p id="77df" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> ListWrapper </strong>ç»„ä»¶:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="0371" class="mc md in ly b gy me mf l mg mh">const ListWrapper = ({ ... }) =&gt; {<br/> return (<br/>   &lt;ul&gt;<br/>    {newList?.filter(...).map(({ ... }) =&gt; {<br/>       return (<br/>         &lt;li key={...}&gt;<br/>           &lt;span&gt;{content}&lt;/span&gt;<br/>           &lt;button onClick={...}&gt;remove&lt;/button&gt;<br/>        &lt;/li&gt;<br/>     )})}<br/>   &lt;/ul&gt;<br/>)};</span><span id="287b" class="mc md in ly b gy mk mf l mg mh">export default ListWrapper;</span></pre><p id="e67f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> ResetButtonWrapper </strong>ç»„ä»¶:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="2839" class="mc md in ly b gy me mf l mg mh">const ResetButtonWrapper = ({ ... }) =&gt; <br/>  &lt;button onClick={...}&gt;reset&lt;/button&gt;</span><span id="9c61" class="mc md in ly b gy mk mf l mg mh">export default ResetButtonWrapper;</span></pre></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="e9d0" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ç»“æ„æ¸…æ¥šäº†ï¼Œç°åœ¨æˆ‘ä»¬ä»<strong class="lb io">åŠ </strong>é€»è¾‘å¼€å§‹ã€‚</p><p id="5171" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">è¦æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŒ…å«åˆ—è¡¨å¯¹è±¡çš„åˆå§‹åˆ—è¡¨æ•°ç»„ï¼Œä¾‹å¦‚æ–‡æœ¬å†…å®¹ã€idç­‰ã€‚æˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢çš„reducer.jsæ–‡ä»¶ä¸­åˆ›å»ºäº†å®ƒã€‚</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="b9d8" class="mc md in ly b gy me mf l mg mh">const initialShoppingList = [ { id:'',content:'' } ];</span></pre><p id="6edd" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">æˆ‘ä»¬çš„â€œæ·»åŠ â€é€»è¾‘ä¹Ÿåœ¨reduceræ–‡ä»¶å†…éƒ¨ï¼Œå§‘ä¸”å°†å…¶å‘½åä¸º<em class="lw">shoppinglisteducerã€‚</em>ç”±äºreduceræ¥æ”¶å½“å‰çŠ¶æ€å’Œè§¦å‘çš„åŠ¨ä½œ(å¦‚æ·»åŠ ã€åˆ é™¤â€¦â€¦)ï¼Œå®ƒè®¡ç®—å¹¶è¿”å›æ–°çŠ¶æ€(å¦‚æ–°è´­ç‰©æ¸…å•)ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£<strong class="lb io"> u*s*e*R*e*d*u*c*e*r </strong>:</p><p id="d8ee" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><strong class="lb io"> <em class="lw">ğŸ¦‹ä½¿ç”¨</em> </strong> <em class="lw">ä¸€ä¸ªåŠ¨ä½œ</em> <strong class="lb io"> <em class="lw">é”®å…¥</em> </strong> <em class="lw">ç”±</em> <strong class="lb io"> <em class="lw">åˆ†æ´¾</em> </strong> <em class="lw">æ¥è§¦å‘ä¸€ä¸ª</em> <strong class="lb io"> <em class="lw">åŠ¨ä½œ</em> </strong> <em class="lw">å¹¶å°†</em> <strong class="lb io"> <em class="lw">åˆå§‹</em> </strong> <em class="lw">çŠ¶æ€æ›´æ–°ä¸º</em></p><p id="91ff" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">å› ä¸ºæˆ‘ä»¬çš„åˆå§‹åˆ—è¡¨åŒ…å«<strong class="lb io"> id </strong>å’Œ<strong class="lb io">å†…å®¹</strong>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®ç°æ·»åŠ é€»è¾‘:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="f683" class="mc md in ly b gy me mf l mg mh">const shoppinglistReducer = (state, action) =&gt; {<br/>  switch ( <strong class="ly io">action.type</strong> ) {<br/>   case "<strong class="ly io">ADD</strong>":<br/>    return [...<strong class="ly io">state</strong>, {<strong class="ly io">id</strong>: state.length, <strong class="ly io">content</strong>: action.content}];<br/>   case "REMOVE": return...;<br/>   case "RESET": return...;<br/>   default: throw new Error();<br/> }}</span></pre><p id="ce0a" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ä½¿ç”¨åŠ¨ä½œç±»å‹â€œ<strong class="lb io"> ADD </strong>â€ï¼Œæˆ‘ä»¬å‘åˆå§‹åˆ—è¡¨æ·»åŠ ä¸€ä¸ªå¸¦æœ‰idå’Œè¾“å…¥æ–‡æœ¬çš„æ–°åˆ—è¡¨ã€‚</p><p id="c263" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨Appç»„ä»¶ä¸­ä½¿ç”¨è¿™ä¸ªé€»è¾‘ï¼Œå¹¶å‘ä¸‹ä¼ é€’<strong class="lb io"> props </strong>:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="eafc" class="mc md in ly b gy me mf l mg mh">import { shoppinglistReducer, initialShoppingList } from "./reducer";<br/>import { useReducer, useRef } from "react";</span><span id="eefc" class="mc md in ly b gy mk mf l mg mh">export default function App() {<br/>   const <strong class="ly io">inputRef</strong> = useRef(); <em class="lw">// ğŸ‘‰ create input ref<br/>   </em>const [<strong class="ly io">newList</strong>, dispatch] = <strong class="ly io">useReducer</strong>(shoppinglistReducer, initialShoppingList); // ğŸ‘‰ dispatch action from the reducer, update initial list and return new list<br/>   const <strong class="ly io">addList</strong> = () =&gt; {<br/>      inputRef.current.value &amp;&amp; dispatch({ type: "<strong class="ly io">ADD</strong>", content: inputRef.current.value });<br/>      inputRef.current.value = ""; // reset input value after click<br/>      inputRef.current.focus();<br/>   };</span><span id="796b" class="mc md in ly b gy mk mf l mg mh"> return (<br/>   &lt;<strong class="ly io">AddWrapper</strong> addList={<strong class="ly io">addList</strong>} ref={<strong class="ly io">inputRef</strong>} /&gt;<br/>   &lt;<strong class="ly io">ListWrapper</strong> newList={newList} /&gt;<br/>   ...<br/> )<br/>}</span></pre><p id="5f71" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">æ›´æ–°AddWrapperç»„ä»¶:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/f2ee794511fe22a54b501443562b2408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ENbvq4pis9EuDSlZSic_g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">final AddWrapper component contains add function and ref props</figcaption></figure><p id="2bbc" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ç°åœ¨ï¼Œç”¨æˆ·å¯ä»¥ç®€å•åœ°è¾“å…¥å’Œæ·»åŠ ä¸€ä¸ªåˆ—è¡¨ï¼Œæ–°çš„è´­ç‰©åˆ—è¡¨æ•°ç»„ä»reducerè¿”å›ï¼Œæ¥å‘ˆç°å®ƒã€‚<em class="lw">åœ°å›¾()</em>:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="7e7e" class="mc md in ly b gy me mf l mg mh">const ListWrapper = ({ newList, ... }) =&gt; {<br/>  return (<br/>    &lt;ul&gt;<br/>    {<strong class="ly io">newList</strong>?.map(({ id, content }) =&gt; {<br/>      return (<br/>        &lt;li key={<strong class="ly io">id</strong>}&gt;<br/>         &lt;span&gt;{<strong class="ly io">content</strong>}&lt;/span&gt;<br/>         &lt;button onClick={...}&gt;remove&lt;/button&gt; <br/>        &lt;/li&gt;<br/>      );<br/>    })}<br/>   &lt;/ul&gt;<br/> )};</span><span id="1e24" class="mc md in ly b gy mk mf l mg mh">export default ListWrapper;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/9cc96b9e593ed9530ae689fb8a126f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*0aQFetMHPiH_Tt0t2ju6BA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">the added list within console.log(newList)</figcaption></figure></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="59e5" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ä¸‹ä¸€æ­¥ï¼Œåˆ›å»º<strong class="lb io">åˆ é™¤</strong>é€»è¾‘ã€‚</p><p id="2169" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">å› ä¸ºæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ç¼©å‡å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ·»åŠ è¿™ä¸ªé€»è¾‘:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="d0be" class="mc md in ly b gy me mf l mg mh">const shoppinglistReducer = (state, action) =&gt; {<br/>  switch ( <strong class="ly io">action.type</strong> ) {<br/>   case "ADD":... //same<br/>   case "<strong class="ly io">REMOVE</strong>": return state.filter(list =&gt; list.id !== action.id);<br/>   case "RESET": return...;<br/>   default: throw new Error();<br/> }}</span><span id="985a" class="mc md in ly b gy mk mf l mg mh">export default function App() {<br/>  const <strong class="ly io">remove</strong> = (<strong class="ly io">id</strong>) =&gt; dispatch({ type: "<strong class="ly io">REMOVE</strong>", <strong class="ly io">id</strong> });<br/>   return (<br/>     ...<br/>     &lt;ListWrapper newList={newList} remove={<strong class="ly io">remove</strong>} /&gt;<br/> )}</span><span id="cbbd" class="mc md in ly b gy mk mf l mg mh">const ListWrapper = ({ newList, <strong class="ly io">remove</strong> }) =&gt; {<br/>  return (<br/>    &lt;ul&gt;<br/>      ... // same <br/>       &lt;button onClick={() =&gt; <strong class="ly io">remove</strong>(<strong class="ly io">id</strong>)}&gt;remove&lt;/button&gt;<br/>    &lt;/ul&gt;<br/> )};</span></pre><p id="e9aa" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ä¸Šé¢çš„ä»£ç æ„æ€æ˜¯:å¦‚æœæˆ‘ä»¬è¦â€œ<strong class="lb io">ç§»é™¤</strong>ä¸€ä¸ªç‰¹å®šçš„åˆ—è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨<strong class="lb io"> ID </strong>å¹¶è¿‡æ»¤æ‰åŒ¹é…çš„åˆ—è¡¨ï¼Œå‰©ä¸‹çš„æ¸²æŸ“ä¸ºâ€œ<strong class="lb io"> newList </strong>â€ã€‚ä¸ºäº†åœ¨å•å‡»æŒ‰é’®æ—¶è°ƒç”¨è¿™ä¸ªremoveå‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ–°çš„åˆ—è¡¨idã€‚</p><p id="c13e" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">ç°åœ¨ï¼Œç”¨æˆ·åªéœ€ç‚¹å‡»ä¸€ä¸‹æŒ‰é’®å°±å¯ä»¥åˆ é™¤åˆ—è¡¨ã€‚</p></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="98df" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">æœ€åä¸€æ­¥:åˆ›å»º<strong class="lb io">å¤ä½</strong>é€»è¾‘ã€‚</p><p id="edd2" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">è¿™å¾ˆç®€å•ï¼Œâ€œé‡ç½®â€åªæ˜¯æ„å‘³ç€ä¸æ¸²æŸ“ä»»ä½•ä¸œè¥¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿”å›ä¸€ä¸ªç©ºæ•°ç»„[ ]:</p><pre class="kd ke kf kg gt lx ly lz ma aw mb bi"><span id="aae5" class="mc md in ly b gy me mf l mg mh">const shoppinglistReducer = (state, action) =&gt; {<br/>  switch ( <strong class="ly io">action.type</strong> ) {<br/>   case "ADD": ...; <br/>   case "REMOVE": ...;<br/>   case "<strong class="ly io">RESET</strong>": return<strong class="ly io">[]</strong>;<br/>   ...<br/> }}</span><span id="c92c" class="mc md in ly b gy mk mf l mg mh">export default function App() {<br/>    const handleReset = () =&gt; dispatch({ type: "<strong class="ly io">RESET</strong>" });<br/>    return (<br/>     ...<br/>     &lt;ResetButtonWrapper <strong class="ly io">handleReset</strong>={handleReset} /&gt;<br/>}</span><span id="a328" class="mc md in ly b gy mk mf l mg mh">const ResetButtonWrapper = ({ handleReset }) =&gt; <br/>   &lt;button onClick={() =&gt; <strong class="ly io">handleReset</strong>()}&gt;reset&lt;/button&gt;;</span></pre></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><h1 id="8134" class="mn md in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated"><strong class="ak">ç»“è®º</strong></h1><blockquote class="ne nf ng"><p id="ff8a" class="kz la lw lb b lc ld jo le lf lg jr lh nh lj lk ll ni ln lo lp nj lr ls lt lu ig bi translated">useReduceræ˜¯<code class="fe nk nl nm ly b"><a class="ae lv" href="https://reactjs.org/docs/hooks-reference.html#usestate" rel="noopener ugc nofollow" target="_blank">useState</a></code>çš„æ›¿ä»£ï¼Œå½“æ‚¨æœ‰æ¶‰åŠå¤šä¸ªå­å€¼çš„å¤æ‚çŠ¶æ€é€»è¾‘æˆ–è€…å½“ä¸‹ä¸€ä¸ªçŠ¶æ€ä¾èµ–äºå‰ä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œå®ƒé€šå¸¸æ›´é€‚åˆä½¿ç”¨Stateï¼Œå®ƒè¿˜å…è®¸æ‚¨ä¼˜åŒ–è§¦å‘æ·±åº¦æ›´æ–°çš„ç»„ä»¶çš„æ€§èƒ½ï¼Œå› ä¸ºæ‚¨å¯ä»¥å‘ä¸‹ä¼ é€’<code class="fe nk nl nm ly b">dispatch</code>è€Œä¸æ˜¯å›è°ƒã€‚</p></blockquote><p id="167f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨å®ƒ:</p><ul class=""><li id="015a" class="nn no in lb b lc ld lf lg li np lm nq lq nr lu ns nt nu nv bi translated">ä½ çš„çŠ¶æ€æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡</li><li id="039b" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">ä½ çš„çŠ¶æ€å˜åŒ–å¾ˆå¤æ‚</li><li id="000e" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">æ‚¨å¸Œæœ›æ„å»ºè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹æ¥ç¡®ä¿ç¨‹åºçš„ç¨³å®šæ€§</li><li id="6df8" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">æ‚¨éœ€è¦ä¿®æ”¹æ·±å±‚å­ç»„ä»¶ä¸­çš„æŸäº›çŠ¶æ€</li><li id="ce7d" class="nn no in lb b lc nw lf nx li ny lm nz lq oa lu ns nt nu nv bi translated">æ‚¨æœ‰ä¸€ä¸ªç›¸å¯¹è¾ƒå¤§çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¸Œæœ›UIå’Œä¸šåŠ¡å¯ä»¥åˆ†å¼€ç»´æŠ¤</li></ul><p id="00b8" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">å°±æ˜¯è¿™æ ·ï¼ğŸ‘ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„ä»£ç <a class="ae lv" href="https://codesandbox.io/s/react-usereducer-idckv5?file=/src/App.js:1184-1232" rel="noopener ugc nofollow" target="_blank"/>ï¼Œç©ç©å§:)æ„Ÿè°¢ä½ çš„æ—¶é—´ï¼â°</p><p id="d49f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">å¦‚æœä½ ä¹Ÿå¯¹æˆ‘çš„å…¶ä»–æ–‡ç« æ„Ÿå…´è¶£ï¼Œè¿™é‡Œæœ‰ä¸€äº›é“¾æ¥:</p><div class="ob oc gp gr od oe"><a href="https://xiaominzhu.medium.com/react-functional-components-using-refs-a5ad1d2817d4" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">ä½¿ç”¨å¼•ç”¨å¯¹åŠŸèƒ½ç»„ä»¶è¿›è¡Œååº”</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">forwardRefå’ŒuseImperativeHandleçš„ç¤ºä¾‹</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">xiaominzhu.medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-simple-express-server-node-js-for-react-application-e2b2bd0c7e93"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">ä¸ºReactåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªç®€å•çš„ExpressæœåŠ¡å™¨(Node.js)</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">å…³äºå¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„ExpressæœåŠ¡å™¨(Node.js)ã€å°†å…¶è¿æ¥åˆ°Reactåº”ç”¨ç¨‹åºä»¥åŠè§£å†³é”™è¯¯çš„æ•™ç¨‹â€¦</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="on l"><div class="ot l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/use-session-storage-to-persist-state-within-a-react-component-206867ef2269"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">ä½¿ç”¨ä¼šè¯å­˜å‚¨æ¥ä¿æŒReactç»„ä»¶ä¸­çš„çŠ¶æ€</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">å½“é¡µé¢ä¼šè¯ç»“æŸæ—¶ï¼ŒsessionStorageä¸­çš„æ•°æ®å°†è¢«æ¸…é™¤ã€‚</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="on l"><div class="ou l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a href="https://enlear.academy/create-responsive-iframe-embed-in-a-react-way-f52075bf3b04" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">åˆ›å»ºä»¥ååº”æ–¹å¼åµŒå…¥çš„å“åº”iframe</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">â€”ä»¤äººæƒŠè®¶çš„æ˜¯ï¼ŒYouTubeæ²¡æœ‰ç›¸åº”çš„åµŒå…¥ä»£ç ğŸ¦„ï¼Œæˆ‘ä»¬æ¥ç©csså§â€¦</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">enlear .å­¦é™¢</p></div></div><div class="on l"><div class="ov l op oq or on os km oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-simple-react-custom-hook-fc733d7b977a"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">åˆ›å»ºä¸€ä¸ªç®€å•çš„Reactè‡ªå®šä¹‰æŒ‚é’©</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">å…³äºå¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„Reactè‡ªå®šä¹‰é’©å­çš„æ•™ç¨‹</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="on l"><div class="ow l op oq or on os km oe"/></div></div></a></div></div><div class="ab cl ks kt hr ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ig ih ii ij ik"><p id="805f" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated"><em class="lw">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae lv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">plain English . io</em></strong></a><em class="lw">ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae lv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb io"> <em class="lw">å…è´¹å‘¨æŠ¥</em> </strong> </a> <em class="lw">ã€‚å…³æ³¨æˆ‘ä»¬å…³äº</em><a class="ae lv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">Twitter</em></strong></a><a class="ae lv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">LinkedIn</em></strong></a><em class="lw"/><a class="ae lv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">YouTube</em></strong></a><em class="lw"/><a class="ae lv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="lb io"><em class="lw">ä¸å’Œ</em> </strong> </a> <em class="lw">ã€‚å¯¹å¢é•¿é»‘å®¢æ„Ÿå…´è¶£ï¼Ÿæ£€æŸ¥</em> <a class="ae lv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb io"> <em class="lw">ç”µè·¯</em> </strong> </a> <em class="lw">ã€‚</em></p></div></div>    
</body>
</html>