<html>
<head>
<title>JavaScript Promises: What They Are and How to Use Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript承诺:它们是什么以及如何使用它们</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-promises-what-they-are-and-how-to-use-them-fe5b55496271?source=collection_archive---------8-----------------------#2022-06-06">https://javascript.plainenglish.io/javascript-promises-what-they-are-and-how-to-use-them-fe5b55496271?source=collection_archive---------8-----------------------#2022-06-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fdfd87987c009fcfcca7439888ba7607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*voT3G6gIp6-LW3AP"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@goshua13?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joshua Aragon</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6eac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">promises——2015年加入JavaScript的新特性。它们旨在使异步编程更容易、更可靠。在这篇博文中，我们将讨论JavaScript承诺是什么，以及如何在自己的代码中使用它们。</p><h2 id="b90c" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">什么是JavaScript承诺？</h2><p id="d7fc" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">JavaScript Promise是一个表示未来值的对象。异步编程中使用承诺来处理需要时间才能完成的操作的结果。例如，当您发出网络请求时，请求需要一些时间才能完成。JavaScript Promise对象允许您编写将在请求完成时执行的代码。</p><p id="4a45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">承诺有三种状态:待定、履行和拒绝。首次创建承诺时，它处于待定状态。这意味着操作尚未完成。一旦操作完成，承诺要么被履行，要么被拒绝。完成的承诺意味着操作成功，承诺的value属性将包含操作的结果。被拒绝的承诺意味着操作失败，承诺的value属性将包含一条错误消息。</p><h2 id="78a5" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">为什么要创建JavaScript承诺？</h2><p id="6923" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">JavaScript的出现是为了让异步编程变得更容易。在承诺之前，开发人员必须使用回调函数来处理异步操作的结果。回调函数很难调试，可能会导致代码难以阅读。对异步代码使用回调函数也会导致回调地狱。回调地狱是指开发人员不得不将回调函数嵌套在彼此内部。当需要依次执行多个异步操作时，就会发生这种情况。JavaScript承诺提供一种更直接的方式来编写异步代码。</p><h2 id="46ed" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">如何用then()处理兑现的承诺</h2><p id="e00c" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">一旦实现了JavaScript承诺，就会执行承诺的then()方法中的代码。then()方法有两个参数:一个用于成功操作的回调函数和一个用于失败操作的回调函数。这些回调函数被称为履行处理程序和拒绝处理程序。履行承诺时调用履行处理程序，拒绝承诺时调用拒绝处理程序。在大多数情况下，您只需要提供一个实现处理程序，因为您可以使用catch()方法来处理被拒绝的承诺。</p><p id="350b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下示例显示了如何处理已履行的承诺:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="4a7a" class="lb lc iq me b gy mi mj l mk ml">let promise = makeAsyncRequest();</span><span id="173b" class="lb lc iq me b gy mm mj l mk ml">promise.then(function(result) {</span><span id="90a1" class="lb lc iq me b gy mm mj l mk ml">  // Handle successful result</span><span id="af5a" class="lb lc iq me b gy mm mj l mk ml">}, function(error) {</span><span id="fc5f" class="lb lc iq me b gy mm mj l mk ml">  // Handle error</span><span id="e490" class="lb lc iq me b gy mm mj l mk ml">});</span></pre><p id="d6c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的例子中，makeAsyncRequest()函数发出一个异步请求并返回一个承诺。当请求完成时，执行then()方法中的代码。如果请求成功，操作的结果被传递给第一个回调函数。如果请求失败，错误消息将被传递给第二个回调函数。</p><p id="5ea4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">需要注意的是，承诺总是异步的。这意味着在Promise的then()方法中编写的代码不会立即执行。为了异步执行代码，它必须放在回调函数内部。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/86ab380a50701138f426e3252b1fd72f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3MAFEwnAgmpbExpY"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/es/@frantic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alex Kotliarskyi</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="1123" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">如何用catch()处理被拒绝的承诺:</h2><p id="80b9" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果JavaScript承诺被拒绝，将执行catch()方法中的代码。catch()方法有一个参数:失败操作的回调函数。这个回调函数被称为拒绝处理程序。当承诺被拒绝时，将调用拒绝处理程序。</p><p id="3b35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下示例显示了如何处理被拒绝的承诺:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="a225" class="lb lc iq me b gy mi mj l mk ml">let promise = makeAsyncRequest();</span><span id="e71b" class="lb lc iq me b gy mm mj l mk ml">promise.then(function(result) {</span><span id="ca58" class="lb lc iq me b gy mm mj l mk ml">  // Handle successful result</span><span id="7ac2" class="lb lc iq me b gy mm mj l mk ml">}).catch(function(error) {</span><span id="51eb" class="lb lc iq me b gy mm mj l mk ml">  // Handle error</span><span id="06da" class="lb lc iq me b gy mm mj l mk ml">});</span></pre><p id="4d86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的例子中，makeAsyncRequest()函数发出一个异步请求并返回一个承诺。当请求完成时，执行then()方法中的代码。如果请求成功，操作的结果被传递给回调函数。如果请求失败，将向catch()方法传递一条错误消息。</p><h2 id="c9fb" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">JavaScript承诺摘要</h2><p id="76e3" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">以下是我们所学内容的总结:</p><ul class=""><li id="0d37" class="mo mp iq kf b kg kh kk kl ko mq ks mr kw ms la mt mu mv mw bi translated">承诺可以是三种状态之一:待定、履行或拒绝。</li><li id="ce20" class="mo mp iq kf b kg mx kk my ko mz ks na kw nb la mt mu mv mw bi translated">待定承诺意味着操作尚未完成。</li><li id="8392" class="mo mp iq kf b kg mx kk my ko mz ks na kw nb la mt mu mv mw bi translated">实现的承诺意味着操作成功，并且承诺的value属性包含操作的结果。</li><li id="0fb1" class="mo mp iq kf b kg mx kk my ko mz ks na kw nb la mt mu mv mw bi translated">被拒绝的承诺意味着操作失败，并且承诺的reason属性包含错误消息。</li><li id="826a" class="mo mp iq kf b kg mx kk my ko mz ks na kw nb la mt mu mv mw bi translated">您可以使用then()方法处理履行的承诺，使用catch()方法处理拒绝的承诺。</li><li id="49a1" class="mo mp iq kf b kg mx kk my ko mz ks na kw nb la mt mu mv mw bi translated">在Promise的then()或catch()方法中编写的代码不会立即执行。为了异步执行代码，它必须放在回调函数内部。</li></ul><p id="b224" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以使用JavaScript编写更简单、更可靠的异步代码。我希望你从这篇文章中学到了一些东西，祝你的编码面试好运！</p><p id="9251" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nc">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="nc">plain English . io</em></strong></a><em class="nc">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="nc">免费周报</em> </strong> </a> <em class="nc">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="nc">Twitter</em></strong></a><em class="nc">和</em><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="nc">LinkedIn</em></strong></a><em class="nc">。查看我们的</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="nc">社区不和谐</em> </strong> </a> <em class="nc">加入我们的</em> <a class="ae kc" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="nc">人才集体</em> </strong> </a> <em class="nc">。</em></p></div></div>    
</body>
</html>