<html>
<head>
<title>Back to Vue 2 to Quickly Master Vue 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">回到Vue 2快速掌握Vue 3</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/back-to-vue-2-to-quickly-master-vue-3-a2644da8efbc?source=collection_archive---------7-----------------------#2022-04-28">https://javascript.plainenglish.io/back-to-vue-2-to-quickly-master-vue-3-a2644da8efbc?source=collection_archive---------7-----------------------#2022-04-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="410b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">通过与Vue 2的比较，很好地掌握Vue 3的特性。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b4121ad5ce67f1ab21f0fab46713fc0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TZ7h80QWSLHcz6A2"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@hi_i_am_rovshan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Rovshan Allahverdiyev</a> on <a class="ae ks" href="https://unsplash.com/s/photos/classic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b308" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">很久没有和Vue.js合作过真正的工作项目了。最近，我在空闲时间为Vue 3做了更多的研究。我从Vue 3上发现了很多有趣的东西。我认为，当我们开始使用任何框架的新版本时，我们都会有一个问题。这个问题是“如何做…就像我使用这个框架的旧版本时一样？”我还意识到，我们有一个更快学习新知识的好方法，那就是把我们带回到旧版本，并应用新知识。这也是为什么我会用Vue 2和Vue 3列举和对比一些案例。我觉得会帮助我们快速学习Vue 3。</p><h1 id="0d98" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">选项API和组合API</h1><p id="877c" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">Composition API是Vue 3为我们提供的最好的特性之一。复合API有许多有趣的特性。这也是我们选择Vue 3组合API和Vue 2选项API来开始这篇文章的原因。首先，我将展示一个带有组合API和选项API的Vue.js组件的基本示例:</p><p id="604e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用可选API的Vue 2基本组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="4f96" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Vue 3中带有组合API的基本组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1b6c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想在Vue 3中写得更短，可以用<code class="fe mo mp mq mr b">setup script</code>试试:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="7e7f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面，我展示了用一个设置脚本在Vue 2、Vue 3和Vue 3中创建一个包含数据、方法、已安装和已卸载事件的基本Vue.js组件的三种方法。我想你可以看到它们之间的一些不同之处，我现在就来谈谈它们。</p><p id="866a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">状态</strong></p><p id="ce91" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">状态或另一个名称—数据是Vue中的重要功能之一，它支持我们使用自己的反应数据进行工作。让我们看看如何在Vue 2和Vue 3中处理状态。</p><p id="4b13" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 2中，状态在<code class="fe mo mp mq mr b">data</code>中被定义为一个函数返回，一个对象包含我们的状态。这里有一个例子:</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="c90e" class="mw lq in mr b gy mx my l mz na">data(){<br/>  return {<br/>    name: 'Tasy'<br/>  }<br/>}</span></pre><p id="aadd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，状态将由<code class="fe mo mp mq mr b">ref</code>和<code class="fe mo mp mq mr b">reactive</code>在<code class="fe mo mp mq mr b">setup</code>中定义。这里有一个例子:</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="8145" class="mw lq in mr b gy mx my l mz na">const name = ref('Tasy');<br/>const user = reactive({name: 'Tasy'});</span></pre><p id="f9b4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">与Vue 2或选项API不同，使用组合API，我们有两个函数来生成反应数据，分别是<code class="fe mo mp mq mr b">ref</code>和<code class="fe mo mp mq mr b">reactive</code>。</p><p id="e6bb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">生命周期</strong></p><p id="8c8e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 2中，我们有许多生命周期挂钩，它们在主对象中被定义为属性。使用Vue 3，我们可以在<code class="fe mo mp mq mr b">setup</code>内部将它们定义为函数调用。在上面，我展示了一个例子，如何用onMounted和onUnmounted定义一个Vue 3生命周期钩子。对于其余的挂钩，我将在这里向您展示选项API和组合API中的生命周期挂钩表:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="9c5b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如您所见，选项API中的生命周期挂钩几乎与组合API中的生命周期挂钩相同。除了名字和使用它们的方式，我们还有一些其他不同的东西。在Vue 2中，我们有两个生命周期挂钩，分别是<code class="fe mo mp mq mr b">created</code>和<code class="fe mo mp mq mr b">beforeCreate</code>。它们在Vue 3中被移除了，我们可以把我们的逻辑移到<code class="fe mo mp mq mr b">setup</code>中。另一件不同的事情是，在Vue 2中，我们只把所有代码放在每个钩子的一个地方。在Vue 3中，我们可以在<code class="fe mo mp mq mr b">setup</code>的很多地方这样定义它:</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="c7f5" class="mw lq in mr b gy mx my l mz na">setup(){<br/>  onMounted(() =&gt; {<br/>    // mounted 1<br/>  })<br/>  onMounted(() =&gt; {<br/>    // mounted 2<br/>  })<br/>}</span></pre><p id="4245" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">计算出的</strong></p><p id="5da0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mo mp mq mr b">computed</code>是格式化或处理输出数据并在Vue.js组件中修改它的好方法之一。在Vue 2中，我们可以使用<code class="fe mo mp mq mr b">computed</code>作为组件属性计算的函数，如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="6b77" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，Composition API为我们提供了一个函数<code class="fe mo mp mq mr b">computed</code>来定义我们在<code class="fe mo mp mq mr b">setup</code>内部的计算。我们可以看到下面的例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="eb11" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">手表</strong></p><p id="43d3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Vue.js的另一个重要特性是<code class="fe mo mp mq mr b">watch</code>，它帮助我们在数据改变时调用我的回调。在Vue 2中，<code class="fe mo mp mq mr b">watch</code>被定义为与<code class="fe mo mp mq mr b">computed</code>几乎相同，是Vue.js组件中的一个对象。属性名是状态或属性的名称，值可以是函数，数组或字符串。这是经典腕表的一个简单组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="59f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">除了上面的方法，在Vue 2中我们还有很多其他的方法来处理<code class="fe mo mp mq mr b">watch</code>。在Vue 3中，<code class="fe mo mp mq mr b">watch</code>与<code class="fe mo mp mq mr b">computed</code>也几乎相同。用source、callback、option(可选)等三个参数在<code class="fe mo mp mq mr b">setup</code>内部调用即可。如果要为数据定义多个处理程序，只需多次调用<code class="fe mo mp mq mr b">watch</code>即可。下面是Vue 3中手表的一个简单例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="b929" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">用起来这么简单，我真的很喜欢这个。除此之外，Vue 3提供了一个有用的特性，即<code class="fe mo mp mq mr b">watchEffect</code>，它可以帮助我们在依赖关系改变时运行回调。你可以在这里看到一个例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="0ea0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">组件</strong></p><p id="6435" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">说到组件，Vue 2和Vue 3没有太多区别。只需将我们想要使用的组件推入对象组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="6784" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，我们有了一种新的方法来用<code class="fe mo mp mq mr b">setup script</code>导入更短的组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="a1f0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">方法</strong></p><p id="3790" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Vue 2中的方法与<code class="fe mo mp mq mr b">computed</code>和<code class="fe mo mp mq mr b">watch</code>相同，它们在属性方法中被定义为包含我们函数的对象。它看起来会像这样:</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="f975" class="mw lq in mr b gy mx my l mz na">export default {<br/>  methods: {<br/>    sayHi() {<br/>      console.log('Hi guys');<br/>    }<br/>  }<br/>}</span></pre><p id="69a2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，我们只需要在<code class="fe mo mp mq mr b">setup</code>内部创建一个函数来制作一个方法。太简单了:</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="85ff" class="mw lq in mr b gy mx my l mz na">export default {<br/>  setup() {<br/>    function sayHi() {<br/>      console.log('Hi guys');<br/>    }<br/>  }<br/>}</span></pre><p id="5f8b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">选项API和组合API之间有一些基本的区别。</p><h1 id="4a2d" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">组件通信</h1><p id="738a" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我认为每个应用程序也有许多组件，它们需要一起通信来运行我们的应用程序。非常重要！所以Vue.js在两个Vue.js版本中为我们提供了很多方法。现在，让我们回到Vue 2中的通信，并学习如何在Vue 3中做同样的事情。</p><p id="a73c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">道具和发射</strong></p><p id="38db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Vue.js中父组件与子组件之间最基本的通信方式。父组件使用<code class="fe mo mp mq mr b">props</code>将值传递给子组件，子组件通过<code class="fe mo mp mq mr b">emit</code>触发父组件中的某个事件。在Vue 2中，我们可以为属性<strong class="kv io"> props </strong>中的组件定义一个props列表，并使用来自<strong class="kv io"> this </strong>的数据。关于<code class="fe mo mp mq mr b">emit</code>，Vue 2给我们提供了方法<strong class="kv io">这个。$emit('eventName '，value) </strong>用值向父组件发出事件(可选)。下面是一个有道具<strong class="kv io">号</strong> <em class="nb"> </em>并能发出事件“更新”的组件的例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="3b3d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，我们有很多方法可以使用<code class="fe mo mp mq mr b">props</code>。如果想保留属性道具为Vue 2，可以用<code class="fe mo mp mq mr b">setup</code>函数的第一个参数得到。然后通过函数<code class="fe mo mp mq mr b">toRefs</code>或<code class="fe mo mp mq mr b">reRef</code>访问其值。关于<code class="fe mo mp mq mr b">emit</code>，我们可以从<code class="fe mo mp mq mr b">setup</code>(上下文)的第二个参数调用它来做那个工作，而不是<strong class="kv io">这个。$emit() </strong>。这里有一个例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="46be" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">除此之外，Vue 3为我们提供了有用的方法<code class="fe mo mp mq mr b">defineProps</code>，它支持我们使用<code class="fe mo mp mq mr b">props</code>设置脚本的工作。用Vue 2中与<code class="fe mo mp mq mr b">props</code>相同的对象调用<code class="fe mo mp mq mr b">defineProps</code>，返回一个prop实例。然后我们可以使用<code class="fe mo mp mq mr b">toRefs</code>和<code class="fe mo mp mq mr b">toRef</code>来访问来自<code class="fe mo mp mq mr b">defineProps</code>的结果。关于<code class="fe mo mp mq mr b">emit</code>，Vue 3给了我们一个新的功能<code class="fe mo mp mq mr b">defineEmits</code>来配合emit。这个函数将返回一个实例来帮助我们触发之前定义的事件。下面是这种方式的一个例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="7690" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在我看来，我真的很喜欢用<code class="fe mo mp mq mr b">setup script</code>的第二种方式。请注意<code class="fe mo mp mq mr b">definneProps</code>和<code class="fe mo mp mq mr b">defineEmit</code>只在设置脚本中使用，不需要从Vue.js导入。</p><p id="0d20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">提供并注入</strong></p><p id="046b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如我在上面所说的，在我们有许多组件的真实项目中，我们将有一个大的组件树。这就产生了<a class="ae ks" href="https://vuejs.org/guide/components/provide-inject.html#prop-drilling" rel="noopener ugc nofollow" target="_blank">钻柱</a>的问题。为了帮助我们处理这个问题，Vue.js提供了一个名为Provide and Inject的功能。它允许我们向组件的后代提供数据。这是一个例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="042f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在根组件中，只需要将provide property(对于数据几乎是一样的)定义为一个返回对象的函数。在组件的后代中，我们只需要用一个数组的值来定义inject属性，该数组的名称是我们想从根组件中使用的。如果你想让<code class="fe mo mp mq mr b">provide</code>和<code class="fe mo mp mq mr b">inject</code>变成反应数据，我想我们可以应用<code class="fe mo mp mq mr b">computed</code>来做这项工作:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="6a92" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，我们可以使用设置功能中的功能<code class="fe mo mp mq mr b">provide</code>和<code class="fe mo mp mq mr b">inject</code>。它简单易用:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="fa6d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">插槽</strong></p><p id="0085" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是一种将父视图放在另一个组件视图中的方法。对于插槽，两个版本基本相同。以下是两个版本的示例:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="acd4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们只是在他们之间有一点点变化，这是属性<code class="fe mo mp mq mr b">$slots</code>。在Vue 2中，该属性返回的对象的键是槽名，值是VNode数组。在Vue 3中，这个属性返回相同的对象，键作为槽的名称，但是值是一个返回VNode数组的函数。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="5147" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另外，<strong class="kv io"> $scopedSlots </strong>将在Vue 3中被移除。</p><h1 id="554b" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">代码可重用性</strong></h1><p id="4d5c" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在Vue中，我们有很多方法来重用我们的代码(全局属性、插件、扩展、混合等等)。).Vue 3也涵盖了那些方法，并对它们做了一些优化。</p><p id="0d18" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">全局属性</strong></p><p id="b25f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 2中，如果我们想创建一些全局属性，我们可以像这样访问Vue.js的属性<code class="fe mo mp mq mr b">prototype</code>:</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="d889" class="mw lq in mr b gy mx my l mz na">Vue.prototype.$axios = axios({});</span></pre><p id="e209" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面这种方式在Vue 3中是不允许的。如果我们想创建一个全局属性，Vue 3为我们提供了另一种从Vue.js应用实例的属性<code class="fe mo mp mq mr b">config</code>到属性<code class="fe mo mp mq mr b">globalProperties</code>的方法。让我们看一个简单的例子:</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="6763" class="mw lq in mr b gy mx my l mz na">const app = <!-- -->createApp({});<br/>app.config.globalProperties.$axios = axios({})</span></pre><p id="84af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">混音和定制挂钩</strong></p><p id="285d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mo mp mq mr b">Mixins</code>是一种灵活的方式，当我们想要为许多组件重用我们的代码、逻辑时，它可以为我们提供支持。它为我们提供了一个工具，可以在我们想要的每个组件中应用我们的数据、方法或一些逻辑。这里有一个<code class="fe mo mp mq mr b">mixins</code>的例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="9482" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这个例子中，我们用一个数字的数据和一个增加这个数字的值的方法创建了mixins。如果我们想要实现这个逻辑，我们只需要将这些mixin添加到组件的mixin数组中。之后，您的组件将拥有该数据和方法。我知道这是一种在Vue.js中重用代码的有用方法，我在许多项目中都应用了这种方法。但是如果mixins被滥用或大量使用，我们可能会在数据、方法等方面遇到一些问题。</p><p id="2b6d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，我们有另一种更清晰的方式来完成这项工作。这是定制挂钩。在定制钩子中，我们可以打包我们的逻辑，只导出我们想要的。下面是一个自定义钩子的例子，它的工作与上面的例子相同:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1d69" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我真的很喜欢这种方式，我认为它将是我们在Vue 3项目中的好朋友。顺便说一下，我这里有一篇关于“如何编写10个有用的Vue.js自定义钩子”的文章:</p><div class="nc nd gp gr ne nf"><a rel="noopener  ugc nofollow" target="_blank" href="/10-useful-custom-hooks-with-vue-js-37f0fd42ce0d"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd io gy z fp nk fr fs nl fu fw im bi translated">Vue.js的10个有用的自定义挂钩</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">Vue.js是我使用的第一个JavaScript框架。我可以说Vue.js是我打开进入的第一扇门之一…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="no l"><div class="np l nq nr ns no nt km nf"/></div></div></a></div><h1 id="e5ec" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">模型</h1><p id="41c4" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated"><code class="fe mo mp mq mr b">Model</code>是一个很棒的Vue.js特性，它帮助我们处理双向数据绑定。在这一部分，我会讲HTML输入元素的<code class="fe mo mp mq mr b">model</code>和自定义组件的<code class="fe mo mp mq mr b">model</code>。我们走吧。</p><p id="a250" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> HTML输入元素</strong></p><p id="20ef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于input组件，如果要将一个状态与input元素绑定，只需要使用<code class="fe mo mp mq mr b">v-model</code> with value作为这个状态的名称即可。两个版本是一样的。</p><p id="b21c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Vue 2:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="88d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Vue 3:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="453e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">自定义组件</strong></p><p id="3c35" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于自定义组件，我们在Vue 3中有许多更新，使这个功能更加灵活。在谈论这个之前，我们将回到Vue 2来了解如何为一个自定义组件制作一个<code class="fe mo mp mq mr b">model</code>。为此，我们需要将<code class="fe mo mp mq mr b">props</code>和<code class="fe mo mp mq mr b">model</code>混合一点。以下是我的例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="7571" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我将解释一下这个例子。在自定义输入组件中，我将带有值的属性<code class="fe mo mp mq mr b">model</code>定义为具有两个属性<code class="fe mo mp mq mr b">prop</code>和<code class="fe mo mp mq mr b">event</code>的对象。<code class="fe mo mp mq mr b">prop</code>是您想要v-model绑定的属性名(该属性的缺省值是“value”)。<code class="fe mo mp mq mr b">event</code>是您需要向数据已经更改的父组件发出的事件名称(该属性的默认值是“input”)。为您的模型定义属性名称是很重要的(如果您想要使用默认的模型值，请使用“value”)。</p><p id="b72c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Vue 3中，除了绑定一个模型，我们还可以为每个定制组件绑定多个模型。基本上，到的方式与Vue 2几乎相同，只是有一些变化。首先，<code class="fe mo mp mq mr b">v-model</code>的默认属性名从“值”变为“模型值”。其次，将使用规则<code class="fe mo mp mq mr b">update:&lt;model name&gt;</code>设置发射事件名称(例如:<code class="fe mo mp mq mr b">update:title</code>)。为了绑定到组件的子模型，我们将使用此规则<code class="fe mo mp mq mr b">v-model:&lt;name&gt;</code>进行键入。下面是一个关于有文本框和复选框的组件的例子，<code class="fe mo mp mq mr b">v-model</code>表示文本框数据，<code class="fe mo mp mq mr b">v-model:checked</code>表示复选框的选中状态:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="962c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我认为没有必要对这个例子做更多的解释，因为它和Vue 2的例子几乎是同一个概念。只要改变一点语法，按照我上面说的规则名称。然后，我们有一个自定义组件，它可以与多个模型一起工作。对于那些喜欢使用<code class="fe mo mp mq mr b">setup script</code>的人来说，这里有一个我们构建上述组件的例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1ced" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以上是在Vue 3中使用<code class="fe mo mp mq mr b">model</code>的两个例子。</p><h1 id="2f29" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="9c42" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在这篇文章中，我通过回顾Vue 2分享了一些关于Vue 3的新特性。我个人非常喜欢这种学习新功能的方式。我有一些理由:</p><ul class=""><li id="c607" class="nu nv in kv b kw kx kz la lc nw lg nx lk ny lo nz oa ob oc bi translated">带自己回到旧版本可以确保我们不会错过旧版本的任何东西。我呢，是在写这篇文章的时候在Vue.js里面了解到<code class="fe mo mp mq mr b">v-model</code>的。我以前没用过这个功能。</li><li id="eadb" class="nu nv in kv b kw od kz oe lc of lg og lk oh lo nz oa ob oc bi translated">了解新版本有哪些改进的最好方法之一是回到旧版本。</li><li id="8bd1" class="nu nv in kv b kw od kz oe lc of lg og lk oh lo nz oa ob oc bi translated">对比新旧版本中的代码可以帮助我们更快地理解它。个人认为新版本的语法往往比老版本短。所以新版本中的一些代码行可能是旧版本中的许多行(步骤)。阅读旧版本的代码可以让我们知道新版本的代码是做什么的。</li></ul><p id="a758" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这些就是我今天想要分享的东西。希望这篇文章对你有帮助。阅读Vue 3和Vue 2文档中的更多信息:</p><div class="nc nd gp gr ne nf"><a href="https://vuejs.org/guide/introduction.html" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd io gy z fp nk fr fs nl fu fw im bi translated">简介| Vue.js</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">您正在阅读Vue 3的文档！Vue是一个JavaScript框架，用于构建…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">vuejs.org</p></div></div><div class="no l"><div class="oi l nq nr ns no nt km nf"/></div></div></a></div><div class="nc nd gp gr ne nf"><a href="https://v2.vuejs.org/v2/guide/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd io gy z fp nk fr fs nl fu fw im bi translated">简介- Vue.js</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">vue . js——渐进式JavaScript框架</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">v2.vuejs.org</p></div></div><div class="no l"><div class="oj l nq nr ns no nt km nf"/></div></div></a></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/9bb0437e8fe71ea96db04bf6f110b01c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*onc2mazO8jrk4v0F"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@johnn21?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Thái An</a> on <a class="ae ks" href="https://unsplash.com/s/photos/saigon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fcef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢您的阅读。</p><p id="da2c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通过<a class="ae ks" href="https://www.linkedin.com/in/thaisangnguyen3894/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>或<a class="ae ks" href="https://twitter.com/tasyit" rel="noopener ugc nofollow" target="_blank"> Twitter </a>与我联系。</p></div><div class="ab cl ok ol hr om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ig ih ii ij ik"><p id="7790" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nb">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nb">说白了就是</em> </strong> </a> <em class="nb">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nb">免费周报</em> </strong> </a> <em class="nb">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nb">Twitter</em></strong></a><em class="nb">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nb">LinkedIn</em></strong></a><em class="nb">。加入我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nb">社区</em> </strong> </a> <em class="nb">。</em></p></div></div>    
</body>
</html>