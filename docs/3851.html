<html>
<head>
<title>React Context API: Introduction and How to Use in the Functional Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React上下文API:功能组件简介及使用方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-context-api-introduction-and-how-to-use-in-the-functional-component-e01dcd8388a1?source=collection_archive---------1-----------------------#2022-10-02">https://javascript.plainenglish.io/react-context-api-introduction-and-how-to-use-in-the-functional-component-e01dcd8388a1?source=collection_archive---------1-----------------------#2022-10-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="db40" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">上下文API解决了什么问题？<strong class="ak">React中的上下文API是什么？我们如何在功能组件中使用上下文？</strong></h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/802d0cc93c06e1091e96874bd5432ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ntK7GShxFURK_d7E"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@maltehelmhold?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Malte Helmhold</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6ba4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个博客分为多个部分。首先，我们将看到背景，并理解<strong class="kv io">上下文解决什么问题。</strong>然后其次，我们将看到<strong class="kv io">React中的上下文API是什么。</strong>最后，<strong class="kv io">我们如何在功能组件中使用上下文。</strong></p><h1 id="5244" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">道具和组件之间的通信:</h1><p id="196e" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我们都知道，我们使用props将数据从父组件传递到子组件，这也被称为<strong class="kv io">单向数据流</strong>。</p><p id="dc29" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但是，如果我们有多个嵌套组件，从父组件到最后一个子组件可能需要数据，而中间的其他组件不需要数据，那么传递属性就会变得冗长和不方便。我们仍然需要将道具从顶级父组件传递到所有中间组件，并最终到达最后一个子组件。</p><p id="3c37" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们通过下面的例子来看看这一点:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="7026" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的代码片段中，我们有一个顶级的"<strong class="kv io"> App </strong>"组件，其中的"<strong class="kv io"> products </strong>"数据作为<strong class="kv io"> prop </strong>传递给"<strong class="kv io"> ProductLayout </strong>"组件，并进一步向下传递给"<strong class="kv io"> Product </strong>"和"<strong class="kv io"> Card </strong>"组件。</p><p id="d7de" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">“<strong class="kv io"> ProductLayout </strong>组件真的需要<strong class="kv io">产品</strong>数据作为<strong class="kv io">道具</strong>吗？</p><p id="c4b2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">答案是一个大大的不！</p><p id="95dc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">只有“<strong class="kv io"> Product </strong>”组件需要这些数据，但是由于我们有一个嵌套组件，react允许您将数据作为道具从父组件传递到子组件。所以我们就遇到了这种情况。</p><h1 id="46ec" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">什么是道具打钻，道具有问题？</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mo"><img src="../Images/8e59b1e08740611d08d7ef8a63ebbd1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mHVgv57v0FeTKtiT"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@smudgern6?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daniel Smyth</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ef40" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">虽然，props是通过UI树向使用它的组件传递数据的一种很好的方式，但是当你的react应用程序有深度嵌套的组件，并且许多组件之间(像上面例子中的<ProductLayout/>)不需要传递props，但我们仍然传递它，这很快就会变得不方便和复杂。这种情况称为支柱钻孔。</p><h1 id="6d97" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">什么是上下文API？</h1><p id="d068" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated"><strong class="kv io">上下文api允许您将数据从父组件传递到使用它的子组件，而无需通过props将数据显式传递到中间的每个子组件。这就是如何通过避免钻牛角尖来编写更干净的代码。这也被认为是一种较轻的状态管理方法。</strong></p><h1 id="aefa" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">react中的useContext是什么？</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mp"><img src="../Images/624e3c8943901024a2abcee88a6e4f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RdVyihbQaRhmC2wR"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@souvenirpixels?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">James Wheeler</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0e0b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">useContext是一个React钩子，让你在功能组件中使用上下文api。</p><h2 id="34c3" class="mq lq in bd lr mr ms dn lv mt mu dp lz lc mv mw mb lg mx my md lk mz na mf nb bi translated"><strong class="ak">在应用中使用上下文有三个步骤:</strong></h2><ol class=""><li id="0ae8" class="nc nd in kv b kw mh kz mi lc ne lg nf lk ng lo nh ni nj nk bi translated"><em class="nl">在父组件中创建上下文。</em></li><li id="10ab" class="nc nd in kv b kw nm kz nn lc no lg np lk nq lo nh ni nj nk bi translated"><em class="nl">使用您创建的上下文进行包装，并将数据传递给需要它的子组件。</em></li><li id="3725" class="nc nd in kv b kw nm kz nn lc no lg np lk nq lo nh ni nj nk bi translated"><em class="nl">消费子组件中的数据。</em></li></ol><h2 id="cd82" class="mq lq in bd lr mr ms dn lv mt mu dp lz lc mv mw mb lg mx my md lk mz na mf nb bi translated">让我们在上面的代码片段中使用上下文</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="4276" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，与之前的prop drilling(没有上下文)相比，在上下文的帮助下，代码片段更加干净和可维护。</p><h1 id="8481" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论:</h1><ol class=""><li id="b43d" class="nc nd in kv b kw mh kz mi lc ne lg nf lk ng lo nh ni nj nk bi translated">React上下文API可以帮助您避免钻取错误，并使您代码更加整洁。</li><li id="c637" class="nc nd in kv b kw nm kz nn lc no lg np lk nq lo nh ni nj nk bi translated">上下文为您的web应用程序提供了一种更简单的状态管理方法。</li></ol><p id="88e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">注意:</strong>不代表context API可以代替Redux。这只是一种较轻的方法。在管理大型web应用程序时，Redux有自己的用例。</p><p id="fe1f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想要更多这样的内容，请在媒体上关注我，并订阅我的YouTube频道。</p><p id="a221" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你也可以在推特上找到我。</p><p id="4f2a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nl">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nl">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nl">免费周报</em> </strong> </a> <em class="nl">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nl">Twitter</em></strong></a>，<a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nl">LinkedIn</em></strong></a><em class="nl">，</em><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nl">YouTube</em></strong></a><em class="nl">，以及</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nl">不和</em> </strong> </a> <em class="nl">。对增长黑客感兴趣？检查出</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nl">电路</em> </strong> </a> <em class="nl">。</em></strong></a></p></div></div>    
</body>
</html>