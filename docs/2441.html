<html>
<head>
<title>React Hooks — useMemo() — Clarification with an Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Hooks — useMemo() —通过示例进行说明</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/quickly-learn-usememo-hook-2fb59fd99b62?source=collection_archive---------5-----------------------#2022-06-08">https://javascript.plainenglish.io/quickly-learn-usememo-hook-2fb59fd99b62?source=collection_archive---------5-----------------------#2022-06-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b8f3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">什么是useMemo()？我们应该什么时候使用它？怎么用？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f82564d31fad20e718cb808468928bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEJ_DDY3G-ozb2GQQABHjg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image created by Author on <a class="ae kv" href="https://pixlr.com/x/" rel="noopener ugc nofollow" target="_blank">Pixlr</a></figcaption></figure><h2 id="1dcf" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">什么是useMemo()？</h2><p id="7021" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated"><em class="ml"> useMemo() </em>钩子与useCallback()非常相似。它将一个函数和一组依赖项作为参数，并返回一个记忆值，只有当其中一个依赖项发生变化时，该值才会重新计算。如果没有提供数组，每次渲染都会计算一个新值。参见下面的声明:</p><pre class="kg kh ki kj gt mm mn mo mp aw mq bi"><span id="d9aa" class="kw kx iq mn b gy mr ms l mt mu">const result = useMemo(() =&gt; computeExpensiveValue(counter1), [counter1]);</span></pre><h2 id="51cb" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">我们应该什么时候使用它？</h2><p id="394c" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">useMemo()钩子的目的是停止一些昂贵函数的不必要的运行。简单地说，只有当其中一个依赖项(作为useMemo的第二个参数传递)发生变化时，由useMemo()钩子包装的函数才会运行。</p><p id="5ef0" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">考虑两个计数器(<em class="ml">计数器1 </em>和<em class="ml">计数器2 </em>)和一个具有一些昂贵(即耗时)计算的函数的简单例子。我们的函数(<code class="fe na nb nc mn b"><em class="ml">computeExpensiveValue(counter1)</em></code>)使用<em class="ml"> counter1 </em>的值来生成昂贵的值。因此，我们的函数在<em class="ml"> counter1，</em>改变时重新计算昂贵的值，这是正常的。但是，它也会根据<em class="ml">计数器2、</em>的变化重新运行，这是完全不必要的。我们称之为应用程序的低性能。因此，无论何时您在应用程序中遇到任何类似的问题，您都应该考虑将您的函数包装在<em class="ml"> useMemo() </em>钩子中。</p><p id="a53b" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated">让我们用两个不同的例子来理解它，不用useMemo和用useMemo。我还添加了两种情况下的输出，因此您可以看到它们之间的区别。</p><h2 id="0998" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">案例1:没有使用备忘录()</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h2 id="82e0" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">输出:</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Output Video created by Author</figcaption></figure><h2 id="76b8" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">案例2:使用useMemo()</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h2 id="4506" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">输出:</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nf ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Output Video created by Author</figcaption></figure><h1 id="831f" class="ng kx iq bd ky nh ni nj lb nk nl nm le jw nn jx li jz no ka lm kc np kd lq nq bi translated">结论</h1><p id="93a2" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">本文的目的是理解React的useMemo()钩子。我已经用一个简单的反例解释了钩子的用例。每个案例所附的视频旨在展示它们之间的差异。我希望这篇文章能帮助你理清useMemo()钩子的概念。但是，如果你有任何疑问，请在评论中写下来，我会尽力帮助你。感谢阅读我的文章，如果你喜欢我的文章，请关注我，保持更新。</p><div class="nr ns gp gr nt nu"><a href="https://medium.com/@kardaniyagnik/membership" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">通过我的推荐链接加入Medium-Yagnik Kardani</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kp nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a href="https://www.buymeacoffee.com/kardaniyagnik" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">Yagnik Kardani正在创建帮助他人成长的技术学习材料。</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">你好👋，我是一名媒体方面的技术作家。我喜欢学习并帮助他人在软件开发和云计算方面成长…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="od l"><div class="oj l of og oh od oi kp nu"/></div></div></a></div><p id="4389" class="pw-post-body-paragraph ls lt iq lu b lv mv jr lx ly mw ju ma lf mx mc md lj my mf mg ln mz mi mj mk ij bi translated"><em class="ml">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lu ir"><em class="ml">plain English . io</em></strong></a><em class="ml">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lu ir"> <em class="ml">免费周报</em> </strong> </a> <em class="ml">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lu ir"><em class="ml">Twitter</em></strong></a><em class="ml">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lu ir"><em class="ml">LinkedIn</em></strong></a><em class="ml">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lu ir"> <em class="ml">社区不和谐</em> </strong> </a> <em class="ml">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="lu ir"> <em class="ml">人才集体</em> </strong> </a> <em class="ml">。</em></p></div></div>    
</body>
</html>