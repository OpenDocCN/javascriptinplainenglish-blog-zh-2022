<html>
<head>
<title>Why does JavaScript’s parseInt(0.0000005) print “5”?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript的parseInt(0.0000005)为什么打印“5”？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-is-javascripts-parseint-0-0000005-5-eb9e2432f1b0?source=collection_archive---------1-----------------------#2022-03-21">https://javascript.plainenglish.io/why-is-javascripts-parseint-0-0000005-5-eb9e2432f1b0?source=collection_archive---------1-----------------------#2022-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0bb8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript中parseInt(0.0000005)为什么打印5？一个很神奇的问题！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/04ea54b52638cb5476f1ae4736f040e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2sUIivcSbMWrsvQDV9kojw.png"/></div></div></figure><h1 id="7499" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">前言</h1><p id="f829" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">最近我在开发一个项目的时候遇到了一个奇怪的问题，<code class="fe mf mg mh mi b">parseInt (0.0000005) === 5</code>😱。正常情况下，输出0是正确的，但为什么是5呢？让我们一起来探讨这个问题。</p><h1 id="7f04" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">1.什么时候使用parseInt？</h1><p id="ca5f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">首先，你一般什么时候用<code class="fe mf mg mh mi b">parseInt</code>？大多数时候，我们用它来解析一个<strong class="ll ir">字符串</strong>并返回它的<strong class="ll ir">整数部分</strong>。带着这个问题，我们来看看parseInt方法。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="3b99" class="kr ks iq bd kt ku mq kw kx ky mr la lb jw ms jx ld jz mt ka lf kc mu kd lh li bi translated">2.关于parseInt的一些事情</h1><p id="e578" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">根据MDN <a class="ae mv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt" rel="noopener ugc nofollow" target="_blank">文档</a>，<em class="mw">“parse int(string，radix)函数解析一个字符串参数并返回一个指定基数(数学数系中的基数)的整数。”</em></p><p id="51ef" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><strong class="ll ir">语法</strong></p><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="ed5e" class="ng ks iq mi b gy nh ni l nj nk">parseInt(string)<br/>parseInt(string, radix)</span></pre><p id="64b0" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><strong class="ll ir">示例</strong></p><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="add5" class="ng ks iq mi b gy nh ni l nj nk">parseInt('0.5') <em class="mw">// 0</em><br/>parseInt('0.5') <em class="mw">// 0</em><br/>parseInt('0.05') <em class="mw">// 0</em><br/>parseInt('0.005') <em class="mw">// 0</em><br/>parseInt('0.0005') <em class="mw">// 0</em><br/>parseInt('0.00005') <em class="mw">// 0</em><br/>parseInt('0.000005') <em class="mw">// 0</em><br/>parseInt('015') <em class="mw">// 15</em><br/>parseInt('015', 8) <em class="mw">// 13</em><br/>parseInt('15px', 10) <em class="mw">// 15</em></span></pre><h1 id="9f22" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">3.parseInt如何转换数字？</h1><p id="cf97" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">当parseInt的第一个参数是一个数字时，如何解析？</p><p id="53e8" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><code class="fe mf mg mh mi b">parseInt(0.0000005) === 5</code>的真相也在这里...</p><h1 id="4fda" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">3.1.第一步？将数字转换为字符串。</h1><p id="3bdc" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">让我们使用字符串函数检查基于字符串的值，看看每个值的输出是什么:</p><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="24a7" class="ng ks iq mi b gy nh ni l nj nk">String(0.5);      <em class="mw">// =&gt; '0.5'</em><br/>String(0.05);     <em class="mw">// =&gt; '0.05'</em><br/>String(0.005);    <em class="mw">// =&gt; '0.005'</em><br/>String(0.0005);   <em class="mw">// =&gt; '0.0005' </em><br/>String(0.00005);  <em class="mw">// =&gt; '0.00005'</em><br/>String(0.000005); <em class="mw">// =&gt; '0.000005'<br/></em>String(0.0000005); <em class="mw">// =&gt; '5e-7' pay attention here</em></span></pre><h1 id="6ccc" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">3.2.第二步，做舍入运算。</h1><p id="5728" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">正如用户<a class="ae mv" href="https://stackoverflow.com/users/12666332/seyyedkhandon" rel="noopener ugc nofollow" target="_blank"> SeyyedKhandon </a>在他的堆栈溢出<a class="ae mv" href="https://stackoverflow.com/questions/69613606/why-does-javascripts-parseint0-0000005-print-5" rel="noopener ugc nofollow" target="_blank">回答</a>中解释的:</p><p id="885c" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">“当我们使用<code class="fe mf mg mh mi b">parseInt(0.0000005)</code>时，它等于<code class="fe mf mg mh mi b">parseInt('5e-7')</code>，根据定义:</p><blockquote class="nl nm nn"><p id="40e4" class="lj lk mw ll b lm mx jr lo lp my ju lr no mz lu lv np na ly lz nq nb mc md me ij bi translated">parseInt可能只将字符串的前导部分解释为整数值；它忽略任何不能被解释为整数符号的一部分的代码单元，并且没有给出任何这样的代码单元被忽略的指示。</p></blockquote><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="66aa" class="ng ks iq mi b gy nh ni l nj nk">parseInt(0.0000005)</span><span id="496f" class="ng ks iq mi b gy nr ni l nj nk">parseInt('5e-7') <em class="mw">// 5</em></span></pre><p id="9bf9" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><strong class="ll ir">最后，答案将只返回5，因为它是在非字符e之前唯一的数字字符，所以它的其余部分e-7将被丢弃。”</strong></p><h1 id="b08b" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">4.如何安全获取浮点数的整数部分？</h1><p id="7ae7" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">建议使用以下Math.floor()函数:</p><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="123e" class="ng ks iq mi b gy nh ni l nj nk">Math.floor(0.5);      <em class="mw">// =&gt; 0</em><br/>Math.floor(0.05);     <em class="mw">// =&gt; 0</em><br/>Math.floor(0.005);    <em class="mw">// =&gt; 0</em><br/>Math.floor(0.0005);   <em class="mw">// =&gt; 0</em><br/>Math.floor(0.00005);  <em class="mw">// =&gt; 0</em><br/>Math.floor(0.000005); <em class="mw">// =&gt; 0<br/></em>Math.floor(0.0000005); <em class="mw">// =&gt; 0</em></span></pre><h1 id="5ce6" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">5.类比学习</h1><p id="5c95" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">现在，你能解释为什么<code class="fe mf mg mh mi b">parseInt(99999999999999999999999999)</code>等于1吗？</p><p id="5629" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><strong class="ll ir">感谢您的阅读。</strong></p><p id="bc14" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><em class="mw">更多内容请看</em><a class="ae mv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mw">plain English . io</em></strong></a><em class="mw">。报名参加我们的</em> <a class="ae mv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="mw">免费周报</em> </strong> </a> <em class="mw">。关注我们关于</em><a class="ae mv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mw">Twitter</em></strong></a><em class="mw">和</em><a class="ae mv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mw">LinkedIn</em></strong></a><em class="mw">。加入我们的</em> <a class="ae mv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="mw">社区不和谐</em> </strong> </a> <em class="mw">。</em></p></div></div>    
</body>
</html>