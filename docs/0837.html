<html>
<head>
<title>How to Run a Function When a Page has Fully Loaded?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当一个页面已经完全加载时，如何运行一个函数？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-run-a-function-when-a-page-has-fully-loaded-498555b30c4a?source=collection_archive---------10-----------------------#2022-02-16">https://javascript.plainenglish.io/how-to-run-a-function-when-a-page-has-fully-loaded-498555b30c4a?source=collection_archive---------10-----------------------#2022-02-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b68842605080dbc9f6c025e2c9f3ee98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_Oe7QrjCpGpHqclp"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@vixenly?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kym MacKinnon</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2d11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们希望在网页满载时运行一些代码。</p><p id="7789" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何在页面完全加载JavaScript时运行一个函数。</p><h1 id="f310" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">侦听加载事件</h1><p id="f5e5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当页面完全加载时，触发<code class="fe me mf mg mh b">load</code>事件。</p><p id="d88c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以通过给它附加一个事件处理函数来监听<code class="fe me mf mg mh b">load</code>事件，以便在页面完全加载时运行代码。</p><p id="7057" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="93b6" class="mq lc iq mh b gy mr ms l mt mu">window.addEventListener('load', () =&gt; {<br/>  console.log("page is loaded")<br/>})</span></pre><p id="b45c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">window.addEventListener</code>来监听页面上触发的<code class="fe me mf mg mh b">load</code>事件。</p><p id="e8d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第二个参数中，我们传入一个回调函数，该函数在<code class="fe me mf mg mh b">load</code>事件被触发时运行。</p><p id="129d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当网页被加载时，我们应该看到<code class="fe me mf mg mh b">'page is loaded'</code>被记录。</p><h1 id="6599" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">侦听DOMContentLoaded事件</h1><p id="1cd7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">同样，我们可以监听页面完全加载时触发的<code class="fe me mf mg mh b">DOMContentLoaded</code>事件。</p><p id="7d81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以像处理<code class="fe me mf mg mh b">load</code>事件一样，给它附加一个事件处理程序。</p><p id="a076" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="37b8" class="mq lc iq mh b gy mr ms l mt mu">window.addEventListener('DOMContentLoaded', () =&gt; {<br/>  console.log("page is loaded")<br/>})</span></pre><p id="6ff1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当页面完全加载时，在第二个参数中运行回调。</p><p id="09f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当网页被加载时，我们应该看到记录的<code class="fe me mf mg mh b">'page is loaded'</code>。</p><h1 id="1d17" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">设置window.onload方法</h1><p id="f386" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将<code class="fe me mf mg mh b">window.onload</code>方法设置为我们希望在页面完全加载时运行代码的函数。</p><p id="a982" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为<code class="fe me mf mg mh b">window.onload</code>在页面完全加载时运行。</p><p id="dc2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ad81" class="mq lc iq mh b gy mr ms l mt mu">window.onload = () =&gt; {<br/>  console.log("page is loaded")<br/>}</span></pre><p id="bc7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是将<code class="fe me mf mg mh b">onload</code>属性设置为一个我们希望在页面加载时运行的函数。</p><p id="02f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们应该看到在加载网页时记录的<code class="fe me mf mg mh b">'page is loaded'</code>。</p><h1 id="20af" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="db77" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当网页完全加载了JavaScript时，我们可以使用几种方法来运行函数。</p><p id="1d84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mv">更多内容请看</em> <a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">说白了。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">免费周报</em> </strong> </a> <em class="mv">。在我们的</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">社区不和谐</em> </strong> </a> <em class="mv">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>