# 如何创建可靠和可伸缩的前端应用程序

> 原文：<https://javascript.plainenglish.io/frontend-application-architecture-javascript-typescript-3813f92537ad?source=collection_archive---------12----------------------->

## 前端应用程序架构(JavaScript、TypeScript)

![](img/63947ffd6abd492c925a57084ff3c83c.png)

Photo by [Marc-Olivier Jodoin](https://unsplash.com/@marcojodoin?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## 介绍

软件工程师的日常工作通常集中在某个特定的应用程序甚至是软件的一部分。当一个长时间的开发者只做一个程序时，他可能会遇到困难，因为他需要开始一个新的项目。

在这篇文章中，我想分享我的发现，这些发现来自我近年来构建的前端应用程序。

## **概述**

首先，当计划一个新的应用程序时，必须决定它的主要目的是什么。

基于 web 的应用程序有两个主要方向:

*   一个有**公开内容的网站**
*   **Web/Native** **应用**

对于内容网站，强烈建议使用 Next 等服务器端渲染。Js，Angular SSR，Gatsby，或者类似的。这些技术将提供更好的性能以及更好的搜索引擎优化。

另一方面，当需要高水平的应用内交互时，使用网络或本地应用。

此外，必须定义应用程序是否具有离线模式或功能。在这种情况下，该应用程序被认为是一个渐进的 Web 应用程序，将需要服务人员的使用。

## **建议技术清单**

*   状态-还原
*   反应，反应-路由器
*   UI — MUI 或引导程序
*   林挺——哈士奇，埃斯林特，更漂亮
*   测试— Jest
*   CI/CD — Gitlab

## **文件夹结构**

以下文件夹结构可用于中型和小型应用程序:

*   组件—所有组件。每个都可以有输入/输出
*   容器—定义特定布局的组件
*   页面—页面将使用其中一个容器并包含组件。
*   路由—包含路由声明
*   配置—常量
*   服务
*   Api 特定文件
*   批准
*   一般服务—如跟踪/日志、系统通知等
*   Store — Redux 的存储文件。例如减速器
*   根文件夹将包含 package.json、ESLint 等。
*   。ENV —特定于环境的常数

对于大型和多应用程序项目，可以考虑阅读文章[“用 Nx 对文件夹进行语义分组”](https://dev.to/this-is-learning/semantic-grouping-folders-with-nx-3467)。

## **一般基本特征**

*   日志记录，跟踪
*   授权:发送凭证->接收令牌。所有对敏感数据的操作都应通过[授权头](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication)进行。
*   集中式系统通知
*   常规弹出窗口:确认弹出窗口
*   用户活动统计:后端应该保存每个用户的行动/请求，以供进一步分析或外部服务可以使用。

## **代码模块化**

模块化是通过将功能分成**个组件**来实现的。他们每个人都应该有一个责任。组件将有输入/输出数据。

## **国家管理**

[**Redux**](https://redux.js.org/tutorials/fundamentals/part-1-overview) 是状态管理的建议选项之一。react app 中的状态流**单向**和**不可变**。不变性允许稳定性和调试特性，比如状态历史。在那里可以“回到过去”分析所有的状态变化。

有两种类型的组件:

*   **无状态** —具有 I/O 数据，但不管理状态
*   **有状态** —管理状态并传输到组件中。也在划分何时将状态转移到常规组件，以减少组件的重新呈现

## **性能**

*   浏览器中的 APi 调用**缓存** —很少更新的数据应该存储在浏览器的缓存中。这是通过为 HTTP 响应设置缓存[头来实现的。](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)
*   应用程序文件缓存—图像、字体、js 包应该缓存在浏览器中。
*   通过限制状态流减少组件**重新渲染**。
*   **惰性加载** —应用程序将只加载必要的包文件。通过[代码分割](https://reactjs.org/docs/code-splitting.html)技术实现。

## **代码质量**

一般来说，代码必须遵循行业最佳实践。代码必须易于阅读，由小组件/方法/类组成，每个组件/方法/类都有一个关注的责任。

然而，每个开发人员可能都有自己的代码风格偏好。因此，强烈建议强制实施特定于项目的代码标准。使用 **ESLint** 库可以实现与代码标准的一致。**预提交钩子**将确保没有非标准代码到达 Git 仓库。

此外，代码格式化可以由**更漂亮的**来完成。这个操作也可以附加到预提交钩子上。

借助 **CodeMetrics、SonarLint、sonar cube**vs code 插件、或类似工具，可以实现代码的可读性。该工具将分析代码的**认知复杂性**，并提出改进建议。一般来说，函数/方法应该简短，避免多级嵌套循环或条件。

类型声明是前端开发中的另一个要点。静态类型定义提供了更高的可靠性和可读性。申请应写在 [**打字稿**](https://www.typescriptlang.org/) 上，有广泛的支持和社区。

## **单元测试**

每个组件必须至少覆盖 70%的测试。 [**Jest**](https://jestjs.io/) 是一个支持良好的库。

## **版本控制**

Git 是版本控制的最佳选择。

每次提交都必须遵守提交消息标准。[这个链接](https://www.conventionalcommits.org/en/v1.0.0/)很好的解释了。遵循该标准将为应用程序开发历史提供良好的可读性。

## **部署**

Gitlab 可用于管理部署和持续集成。存储库更新必须作为新的分支进行推送。每次提交时，Gitlab 都会运行单元测试。在代码审查和管道通过之后，可以创建一个合并请求。在 MR 被批准后，提交将成为主/主要分支的一部分，而原始分支将被清除。

应用程序应该有多个部署环境，如阶段、开发、生产。舞台会有最新的母版版本。通过质量保证测试后，它可以被提升到生产。

## **无障碍**

该应用程序必须能够被具有各种能力的人访问。它必须支持屏幕阅读器、配色方案和字体大小的适应性。

Chrome Lighthouse dev 工具可以用来分析一个应用程序覆盖的可访问性级别。

## **用户界面**

*   使用支持良好的 UI 框架之一，如 [**Mui**](https://mui.com/) 或 [**Bootstrap**](https://getbootstrap.com/)
*   多主题支持。至少两种:亮暗模式应该是
*   快速响应—移动优先的方法。保证应用程序在所有设备上都不会缺少功能。

## **安全**

创建前端应用程序时，至少应考虑以下几点。

前端:

*   用户生成的数据**卫生。**天生支持环卫反应和棱角。
*   HttpOnly only cookies 中的 Auth **令牌安全存储**。参考 OWASP 页面上的[说明](https://owasp.org/www-community/HttpOnly)。

后端:

*   为了避免 DDOS 攻击，限制每个用户的 **HTTP 请求**的数量
*   限制**登录尝试**
*   [**OWASP**](https://owasp.org/) 规则

## 移民

**样式分离** —创建自定义样式时，分离一组包含所有常用样式的 SCSS 文件。在迁移到另一个 SPA 库的情况下，可以重用样式。

迁移大型代码库总是很困难的。例如，Angular 应用程序迁移以做出反应。在大多数情况下，每个 SPA 库都有自己的体系结构，不可能复制组件。

然而，像 [NX](https://nx.dev/) 或 [Module Federation](https://www.npmjs.com/package/@angular-architects/module-federation) 这样的工具可以管理微前端，并允许从一个 SPA 库逐渐迁移到另一个。

## 结论

本文讨论了在规划新的前端应用程序时应该考虑的主要最佳实践。所有提到的技术可能看起来有点夸张。尽管它们都增加了应用程序的可维护性和可靠性。

让我们回顾一下我们学到的内容:

*   定义项目的类型，是基于内容还是应用程序
*   表演
*   模块性
*   状态管理
*   代码质量:打字稿，林挺
*   稳定性:单元测试
*   版本控制:Git
*   部署:GitLab
*   UI: MUI，引导
*   易接近
*   安全性
*   移民

*更多内容请看* [***说白了就是***](http://plainenglish.io/) *。报名参加我们的* [***免费每周简讯***](http://newsletter.plainenglish.io/) *。在我们的* [***社区不和谐***](https://discord.gg/GtDtUAvyhW) *获得独家获取写作机会和建议。*