<html>
<head>
<title>4 Killer Ways to Write TypeScript With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React编写打字稿的4种黑仔方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/4-killer-ways-to-write-typescript-with-react-6a66b32764f1?source=collection_archive---------0-----------------------#2022-04-12">https://javascript.plainenglish.io/4-killer-ways-to-write-typescript-with-react-6a66b32764f1?source=collection_archive---------0-----------------------#2022-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d675" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">4个黑仔打字稿，带反馈提示+ 1个额外提示</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b430c3a145329e9be2c4f8caa5ed8345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*08SGzl74Jx3-inKCI8gKAA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author and Unsplash by <a class="ae kv" href="https://unsplash.com/photos/K4mSJ7kc0As" rel="noopener ugc nofollow" target="_blank">Charles</a></figcaption></figure><p id="1194" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">通过在</strong><a class="ae kv" href="https://twitter.com/antondevv" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">【https://twitter.com/antondevv】</strong></a><strong class="ky ir">的Twitter上关注我，保持反应和打字的前沿。</strong></p><p id="31ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">享受中等？点击<a class="ae kv" href="https://medium.com/@anton.franzen/membership" rel="noopener"> <strong class="ky ir">此处</strong> </a>获得<a class="ae kv" href="https://medium.com/@anton.franzen/membership" rel="noopener"> <strong class="ky ir">对介质的完全访问权限</strong> </a></p><p id="0ea6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用React的TypeScript在业界达到了新的高度，但新手很难学习如何使用React，即使是有经验的开发人员也有问题。</p><p id="d334" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将介绍每个开发人员都应该知道的用React编写TypeScript的4种杀手级方法。</p><h2 id="66f4" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 1。为传递给组件的属性创建类型别名</strong></h2><p id="70be" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们为道具创建类型，因为如果我们不这样做的话，用许多开发人员一起工作来构建大型应用程序将是一场噩梦。</p><p id="55a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果没有它，您必须猜测您想要访问的props的数据类型，或者在文档中查找或询问它们。创建类型别名使得传递属性更容易、开发速度快10倍，并减少了意外错误等。</p><p id="b102" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，有多种方法可以实现这一点，例如，您可以从一个<code class="fe mq mr ms mt b">.d.ts</code>文件定义并导出一个全局用户类型，在这种情况下，您可以导入它并将其用作组件的props类型。</p><p id="82ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二种方法是在self中定义组件中的类型，就在编写组件代码的上方，所以这是您如何做的:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="e1eb" class="ls lt iq mt b gy my mz l na nb">type Props = {name: string;}<br/>const App = ({name}: Props) =&gt; {<br/>return &lt;h1&gt;{props.name}&lt;/h1&gt;<br/>}</span></pre><p id="8581" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你也可以这样做:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="e9d6" class="ls lt iq mt b gy my mz l na nb">type Props = {name: string;}<br/>const<em class="nc"> App </em>=<em class="nc"> </em>(<em class="nc">props</em>:<em class="nc"> Props</em>)<em class="nc"> </em>=&gt;<em class="nc"> </em>{<br/><em class="nc">return </em>&lt;h1&gt;{<em class="nc">props.name</em>}&lt;/h1&gt;;<br/>};</span></pre><h2 id="6b19" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">2.为钩子创建类型</h2><p id="e63a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated"><strong class="ky ir">类型为</strong> <code class="fe mq mr ms mt b"><strong class="ky ir">useState:</strong></code></p><p id="78ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TypeScript + React的另一个令人难以置信的事情是，你可以为<code class="fe mq mr ms mt b">useState</code>创建一个泛型，当你试图用某个值设置状态时，它会告诉你你试图设置的数据类型是否不正确。</p><p id="4bd7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果我们有一个大对象，并为它创建一个类型，然后将类型设置为状态，我们将能够在每次使用状态值时看到状态中有哪些类型，如果我们试图用新值设置状态，它将告诉我们它接受什么类型，并告诉我们在设置状态时是否出错，例如，如果我们使用字符串而不是数字作为ID，TypeScript将在编译之前为我们捕捉它。</p><p id="4014" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">所以我们完成它的方法是这样做的:</strong></p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="2168" class="ls lt iq mt b gy my mz l na nb">const App = () =&gt; {<br/>const [number, setNumber] = useState&lt;number&gt;(10)</span><span id="2274" class="ls lt iq mt b gy nd mz l na nb">}</span></pre><p id="5924" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们在这里做的是将状态设置为一个通用数字；它可以接受任何数字，但不能接受其他数字，如果我们试图将状态设置为其他数字，它会告诉我们问题出在哪里。</p><p id="ca95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您甚至可以为任何想要的状态创建自己的类型或接口，例如为具有大量属性的对象定义类型别名。</p><p id="fe23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">类型为</strong> <code class="fe mq mr ms mt b"><strong class="ky ir">useEffect:</strong></code></p><p id="4c09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于<code class="fe mq mr ms mt b">useEffect</code>，我从来没有为它设置过类型，因为它不返回任何东西，我们也不能改变任何东西。</p><p id="4d4f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">类型为</strong> <code class="fe mq mr ms mt b"><strong class="ky ir">useMemmo:</strong></code></p><p id="405b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于<code class="fe mq mr ms mt b">useMemmo</code>，我们可以为它设置一个类型，告诉我们它将返回什么值，在这个例子中，它将返回一个字符串。</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="3192" class="ls lt iq mt b gy my mz l na nb">const memmo = useMemo&lt;string&gt;(() =&gt; {<br/>}, [state])</span></pre><h2 id="d0da" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">3.HTML事件和表单的类型</h2><p id="ade2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">显然，您不必为每个事件指定一个类型。说实话，onClick会自己推断，因为TypeScript大部分时候会替你推断。TypeScript默认包含MouseEvent，因此无需手动添加。</p><p id="4ebb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果您的表单有一个<code class="fe mq mr ms mt b">onSubmit</code>，您将需要指定React事件，所以这里有一个带有<code class="fe mq mr ms mt b">onSubmit</code>的表单的例子。</p><p id="47a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> onSubmit: </strong></p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="4100" class="ls lt iq mt b gy my mz l na nb">const FormContainer = () =&gt; {<br/>  const [name, setName] = useState&lt;string&gt;("")<br/>const submitHandler = <strong class="mt ir">(e: React.FormEvent)</strong> =&gt; {<br/>    e.preventDefault()<br/>    console.log("Should submit")</span><span id="e5bb" class="ls lt iq mt b gy nd mz l na nb">}<br/>return (<br/>    &lt;form onSubmit={submitHandler}&gt;<br/>          &lt;input<br/>            type="text"<br/>            value={name}<br/>            onChange={<strong class="mt ir">(e) =&gt; setName(e.target.value)</strong>}<br/>            <strong class="mt ir">// inferred as React.ChangeEvent by default<br/></strong>          /&gt;<br/>        &lt;input type="Submit" value="Submit" /&gt;<br/>    &lt;/form&gt;<br/>  )<br/>}</span></pre><p id="a684" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">顺便说一句，如果你不太关心事件的类型，你可以使用<code class="fe mq mr ms mt b">React.SyntheticEvent </code>，这应该在你不确定事件类型时使用，所以最好的做法是如果你知道类型，就使用它！</p><h2 id="fa0b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">4.为来自API响应的数据创建类型</h2><p id="065f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是极其有用的！</p><p id="ac70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想象一下，遍历我们从一个api获得的房地产列表数组，每个列表有20个属性；现在想象用普通的JavaScript做这件事，与其他开发人员合作，并将清单传递给各种组件；这将是一件痛苦的事，最终可能会导致意想不到的错误，例如:</p><p id="bbb7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在容器中，mount -&gt;获取房地产列表，发出API请求-&gt;将数据作为道具传递给Card组件-&gt;道具从card组件传递给HeaderCard组件。</p><p id="dc36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果没有这里指定的类型，就很难确定房地产数据的数据类型，而且随着项目的增长，晚上也很难入睡。</p><p id="3b72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您只需在TypeScript中为房地产数据指定一个类型，然后在接受它有props的组件中向用户类型声明prop类型。当你在你的组件中做<code class="fe mq mr ms mt b">data.someProperty</code>时，你可以马上看到它是什么数据类型。</p><p id="2666" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么我们如何做到这一点呢？实际上非常简单，我们为数据创建一个类型，如下所示:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="c282" class="ls lt iq mt b gy my mz l na nb">export type DataResponse = {<br/>name: string;<br/>location: string;<br/>cost: number;<br/>isForSale: boolean;<br/>...<br/>}</span></pre><p id="9255" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">在组件中，我们这样做:</strong></p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="7383" class="ls lt iq mt b gy my mz l na nb">// imports<br/>const Listing = ({listing}: DataResponse) =&gt; {<br/>return (<br/>&lt;&gt;<br/>&lt;h1&gt;{listing.name}&lt;/h1&gt; // would tell us it is a string<br/>...<br/>&lt;/&gt;</span><span id="db1e" class="ls lt iq mt b gy nd mz l na nb">)}</span></pre><p id="a2e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">顺便说一句，你应该创建一个共享类型文件，在那里你可以创建和导出你在应用程序中使用的类型/接口。</p><h2 id="41cf" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">额外提示:</h2><p id="e02e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated"><strong class="ky ir">React应用中应该用</strong> <code class="fe mq mr ms mt b"><strong class="ky ir">type</strong></code> <strong class="ky ir">还是</strong> <code class="fe mq mr ms mt b"><strong class="ky ir">interface</strong></code> <strong class="ky ir">？</strong></p><p id="3ab7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我认为在React应用程序中使用<code class="fe mq mr ms mt b">type</code>是为了一致性和约束性。但这是一个偏好，使用其中任何一个都可以，但选择1，你可以在这里阅读更多信息<a class="ae kv" href="https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/basic_type_example#types-or-interfaces" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a6ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是两者的对比表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/4124df59deaeea91e78b8ca097ea6d69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9mxFjv1qJopB4lWv4O0N2A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by<a class="ae kv" href="https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/basic_type_example#types-or-interfaces" rel="noopener ugc nofollow" target="_blank"> typescript sheet sheet</a></figcaption></figure><p id="2f4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nc">你好，如果你想体验灵媒，请考虑支持我和所有其他作家，注册成为</em> <a class="ae kv" href="https://medium.com/@anton.franzen/membership" rel="noopener"> <strong class="ky ir"> <em class="nc">会员</em> </strong> </a> <em class="nc">每月5美元，以保持独立写作，在这里注册</em><a class="ae kv" href="https://medium.com/@anton.franzen/membership" rel="noopener"><strong class="ky ir"><em class="nc">；)</em> </strong> </a></p><p id="2d3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了支持他人，Medium还可以通过写作和在这里找到家的强大、积极参与的社区来支持你。</p><h2 id="dbda" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">如果你喜欢这件作品，我希望你也会喜欢:</h2><div class="nf ng gp gr nh ni"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-learning-from-react-tutorials-that-suck-5e2031d9bdc7"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">停止从糟糕的React教程中学习</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">不受欢迎的观点</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><div class="nf ng gp gr nh ni"><a rel="noopener  ugc nofollow" target="_blank" href="/3-micro-lessons-about-npm-47759d85f18c"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">关于国家预防机制的3节微课</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">你会喜欢第三条。</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nr l"><div class="nx l nt nu nv nr nw kp ni"/></div></div></a></div><div class="nf ng gp gr nh ni"><a href="https://betterprogramming.pub/callbacks-vs-promises-vs-async-await-a-step-by-step-guide-f93d13447604" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">回调vs .承诺vs .异步Await:逐步指南</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">引擎盖下也有点。</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">better编程. pub</p></div></div><div class="nr l"><div class="ny l nt nu nv nr nw kp ni"/></div></div></a></div><p id="797e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nc">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nc">plain English . io</em></strong></a><em class="nc">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nc">免费每周简讯</em> </strong> </a> <em class="nc">。关注我们</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nc">Twitter</em></strong></a><em class="nc">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nc">LinkedIn</em></strong></a><em class="nc">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nc">社区不和谐</em> </strong> </a> <em class="nc">。</em></p></div></div>    
</body>
</html>