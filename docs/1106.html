<html>
<head>
<title>React Crash Course — Text-Based Utility Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React速成班—基于文本的实用函数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-crash-course-text-based-utility-functions-8fa0026fc455?source=collection_archive---------19-----------------------#2022-03-03">https://javascript.plainenglish.io/react-crash-course-text-based-utility-functions-8fa0026fc455?source=collection_archive---------19-----------------------#2022-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5afa" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第11部分:使用定制实用函数格式化React组件中的内容</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/26a1ca9296b83c659db0e6779f8114a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKcpy_AQVd4HmC7J0GRGfA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae kv" href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2c76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls"> Live dev笔记由</em><a class="ae kv" href="https://www.youtube.com/channel/UCTZRcDjjkVajGL6wd76UnGg" rel="noopener ugc nofollow" target="_blank"><em class="ls">Dennis Ivy</em></a><em class="ls">——</em><a class="ae kv" href="https://www.youtube.com/watch?v=6fM3ueN9nYM" rel="noopener ugc nofollow" target="_blank"><em class="ls">React JS速成班</em> </a></p><blockquote class="lt"><p id="4836" class="lu lv iq bd lw lx ly lz ma mb mc lr dk translated">在第11部分中，我们将在ListItem和NotesListPage组件中创建一些基于文本的实用函数来返回注释的标题。我们还将添加一些有用的细节，比如格式良好的日期，以及笔记标题和内容的预览。</p></blockquote></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="357f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你也可以参考我的Github repo:</p><div class="mk ml gp gr mm mn"><a href="https://github.com/emilyyleung/notesapp/tree/Part-11/Utility-Functions" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd ir gy z fp ms fr fs mt fu fw ip bi translated">GitHub-Emily leung/notes app at Part-11/实用程序-功能</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">在GitHub上创建一个帐户，为Emily leung/notes app的开发做出贡献。</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">github.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb kp mn"/></div></div></a></div></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="f05c" class="nc nd iq bd ne nf ng nh ni nj nk nl nm jw nn jx no jz np ka nq kc nr kd ns nt bi translated">提取笔记的标题</h1><p id="d4c1" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">到目前为止，我们一直在弹奏非常简单、简短的音符。但是当我们开始写非常长的段落和列表时会发生什么呢？</p><p id="706b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这只是一个只有3个音符的例子…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/f89d797f912fe9fe7489c83f13a7084d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eSwpzfShW1TWwAEr"/></div></div></figure><p id="00cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了保持设计简单，我们将假设注释正文的第一行将被视为注释的标题。这意味着我们需要创建一个返回标题的实用函数和另一个返回正文内容的实用函数。</p><p id="931d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将从在我们的<code class="fe oa ob oc od b">ListItem</code>中创建<code class="fe oa ob oc od b">getTitle</code>实用函数开始，它将从注释对象中提取<code class="fe oa ob oc od b">body</code>属性，并按每一个新行分割内容。第一行将减少到最多45个字符，以保持显示时的一致性。</p><p id="d1f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们将调用<code class="fe oa ob oc od b">&lt;h3&gt;</code>标签中的<code class="fe oa ob oc od b">getTitle</code>函数，并给它我们的note对象来返回我们的新标题。</p><pre class="kg kh ki kj gt oe od of og aw oh bi"><span id="c5e3" class="oi nd iq od b gy oj ok l ol om">// notesapp &gt; src &gt; components &gt; ListItem.js</span><span id="b6d9" class="oi nd iq od b gy on ok l ol om">import { Link } from 'react-router-dom'</span><span id="6f1f" class="oi nd iq od b gy on ok l ol om"><strong class="od ir">let getTitle = (note) =&gt; {<br/>    const title = note.body.split('\n')[0]</strong></span><span id="ca00" class="oi nd iq od b gy on ok l ol om"><strong class="od ir">    if (title.length &gt; 45) {<br/>        return title.slice(0,45)<br/>    }</strong></span><span id="f419" class="oi nd iq od b gy on ok l ol om"><strong class="od ir">    return title<br/>}</strong></span><span id="54c4" class="oi nd iq od b gy on ok l ol om">const ListItem = ({note}) =&gt; {<br/>    return (<br/>        &lt;Link to={`/note/${note.id}`}&gt;<br/>            &lt;div className='notes-list-item'&gt;<br/>                <strong class="od ir">&lt;h3&gt;{getTitle(note)}&lt;/h3&gt;</strong><br/>            &lt;/div&gt;<br/>        &lt;/Link&gt;<br/>    )<br/>}</span><span id="158a" class="oi nd iq od b gy on ok l ol om">export default ListItem</span></pre><blockquote class="oo op oq"><p id="ee75" class="kw kx ls ky b kz la jr lb lc ld ju le or lg lh li os lk ll lm ot lo lp lq lr ij bi translated">注意，我们的<code class="fe oa ob oc od b">getTitle</code>函数不是写在组件内部的。这是因为，与我们到目前为止编写的所有其他函数不同，它不需要任何上下文属性或函数(比如<code class="fe oa ob oc od b">setNote</code>函数)。</p></blockquote><h1 id="5788" class="nc nd iq bd ne nf ou nh ni nj ov nl nm jw ow jx no jz ox ka nq kc oy kd ns nt bi translated">提取笔记的日期</h1><p id="13cd" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">类似于<code class="fe oa ob oc od b">getTitle</code>，我们将创建另一个实用函数来提取笔记的日期，并将其重新格式化，以便于人们阅读。在这种情况下，就像应用<code class="fe oa ob oc od b">toLocaleDateString</code>方法一样简单——该方法用于根据用户的位置返回简化的日期。</p><pre class="kg kh ki kj gt oe od of og aw oh bi"><span id="281d" class="oi nd iq od b gy oj ok l ol om">// notesapp &gt; src &gt; components &gt; ListItem.js</span><span id="6293" class="oi nd iq od b gy on ok l ol om">let getDate = (note) =&gt; {<br/>    return new Date(note.updated).toLocaleDateString()<br/>}</span></pre><blockquote class="oo op oq"><p id="9ed6" class="kw kx ls ky b kz la jr lb lc ld ju le or lg lh li os lk ll lm ot lo lp lq lr ij bi translated">注意，我们已经提供了注释的<code class="fe oa ob oc od b">updated</code>值作为一个新的Date对象的参数。这是因为，默认情况下，该属性存储在数据库中时会转换为字符串。因此，要应用<strong class="ky ir"> toLocaleDateString </strong>方法，我们必须将它重新构造成一个日期对象。</p></blockquote><p id="5e2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着<code class="fe oa ob oc od b">getDate</code>函数的创建，我们将把它添加到我们的JSX中。</p><pre class="kg kh ki kj gt oe od of og aw oh bi"><span id="97db" class="oi nd iq od b gy oj ok l ol om">// notesapp &gt; src &gt; components &gt; ListItem.js</span><span id="0330" class="oi nd iq od b gy on ok l ol om">return (<br/>    &lt;Link to={`/note/${note.id}`}&gt;<br/>        &lt;div className='notes-list-item'&gt;<br/>            &lt;h3&gt;{getTitle(note)}&lt;/h3&gt;<br/>            <strong class="od ir">&lt;p&gt;&lt;span&gt;{getDate(note)}&lt;/span&gt;&lt;/p&gt;</strong><br/>        &lt;/div&gt;<br/>    &lt;/Link&gt;<br/>)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/2e3985a36e23f21d399258669506a066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9wFueH_v9QKnCp95"/></div></div></figure><h1 id="7cf4" class="nc nd iq bd ne nf ou nh ni nj ov nl nm jw ow jx no jz ox ka nq kc oy kd ns nt bi translated">提取笔记的内容预览</h1><p id="bec8" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">我们将创建的最后一个细节是<code class="fe oa ob oc od b">getContent</code>函数，它将获取我们的note对象的<code class="fe oa ob oc od b">body</code>属性，并返回除标题之外的所有内容。</p><p id="0fe5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将首先通过新的行字符分割<code class="fe oa ob oc od b">body</code>(确保删除第一行，因为它被认为是标题)。接下来，我们将把剩余的内容连接成一个，用空格替换新的行字符，并测试长度是否大于45——如果是，只返回前45个字符。</p><pre class="kg kh ki kj gt oe od of og aw oh bi"><span id="1022" class="oi nd iq od b gy oj ok l ol om">// notesapp &gt; src &gt; components &gt; ListItem.js</span><span id="f0cb" class="oi nd iq od b gy on ok l ol om">let getContent = (note) =&gt; {<br/>    let content = note.body.split('\n')<br/>    content.shift()<br/>    content = content.join('\n')<br/>    content = content.replaceAll('\n', ' ')</span><span id="bdbb" class="oi nd iq od b gy on ok l ol om">    if (content.length &gt; 45) {<br/>        return content.slice(0,45)<br/>    }</span><span id="2c3e" class="oi nd iq od b gy on ok l ol om">    return content</span><span id="73d9" class="oi nd iq od b gy on ok l ol om">}</span></pre><p id="d53e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将在简化的日期旁边添加<code class="fe oa ob oc od b">getContent</code>函数。</p><pre class="kg kh ki kj gt oe od of og aw oh bi"><span id="34d9" class="oi nd iq od b gy oj ok l ol om">// notesapp &gt; src &gt; components &gt; ListItem.js</span><span id="1196" class="oi nd iq od b gy on ok l ol om">return (<br/>    &lt;Link to={`/note/${note.id}`}&gt;<br/>        &lt;div className='notes-list-item'&gt;<br/>            &lt;h3&gt;{getTitle(note)}&lt;/h3&gt;<br/>            &lt;p&gt;&lt;span&gt;{getDate(note)}&lt;/span&gt;<strong class="od ir">{getContent(note)}</strong>&lt;/p&gt;<br/>        &lt;/div&gt;<br/>    &lt;/Link&gt;<br/>)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/5914319537457ae83e20b640137685eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LSuYtxb02eSwgvcP"/></div></div></figure><p id="a186" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成这些后，我们就可以在Netlify上部署应用程序了！</p><p id="bd2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。</p><p id="97ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">Twitter</em></strong></a><em class="ls">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">LinkedIn</em></strong></a><em class="ls">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">社区</em> </strong> </a> <em class="ls">。</em></strong></a></p></div></div>    
</body>
</html>