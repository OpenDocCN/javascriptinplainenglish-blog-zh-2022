<html>
<head>
<title>NPM vs NPX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NPM对NPX</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/npm-vs-npx-6444aad0e892?source=collection_archive---------8-----------------------#2022-10-17">https://javascript.plainenglish.io/npm-vs-npx-6444aad0e892?source=collection_archive---------8-----------------------#2022-10-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7275" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">npm和npx的关键区别是什么？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/307c3e3585a58d8871d027bd542773f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EpjcMXSyH-njs4628Lak5Q.png"/></div></div></figure><p id="5961" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">任何时候你使用Javascript，不管是前端还是后端，我相信你都会使用外部包。从像<strong class="kq io"> Moment </strong>或<strong class="kq io"> Lodash </strong>这样的实用程序库到像<strong class="kq io"> Express </strong>或<strong class="kq io"> Angular </strong>这样的成熟框架，你需要外部帮助来创造一些资源丰富的东西。我们使用这些外部库的方式是通过npm。Npm 是一个在线注册表，在这里你可以用不同的工具浏览不同的包。它还有一个命令行工具，可以让您在项目中安装这些包。我真的没有必要继续谈论npm，因为它几乎就像是Javascript社区中管理项目依赖关系的一个标准。</p><p id="3f24" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你也可能遇到过一个类似的工具，叫做<strong class="kq io"> npx </strong>，特别是如果你曾经使用<strong class="kq io"> create-react-app </strong>使用React。因此，当npm管理你的nodeJS包时，npx用于执行这些包。让我们看一个例子。</p><p id="c11d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Youtube上有这篇博文的视频版本。  </p><h2 id="4d1b" class="lm ln in bd lo lp lq dn lr ls lt dp lu kx lv lw lx lb ly lz ma lf mb mc md me bi translated">使用npm安装软件包</h2><p id="7c19" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx mh kz la lb mi ld le lf mj lh li lj ig bi translated">通过键入<code class="fe mk ml mm mn b">npm init -y</code>创建一个示例NodeJS应用程序。要安装一个包并在这个项目中使用它，我们通常要做的是键入<code class="fe mk ml mm mn b">npm install</code>，后跟包的名称。让我们安装一个叫做<strong class="kq io"> cowsay </strong>的虚拟包。这个包将简单地回显您发送的消息。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/58a55e552e83d7792b5e33d5be785b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*plPynq18laZ5arnvoP6K1g.png"/></div></figure><p id="da0b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以如果你运行<code class="fe mk ml mm mn b">cowsay "Hello"</code>，你会得到一个错误信息</p><blockquote class="mp"><p id="ba9a" class="mq mr in bd ms mt mu mv mw mx my lj dk translated"><strong class="ak">“术语cowsay不被识别为cmdlet、函数、脚本或可操作的程序”</strong>。</p></blockquote><p id="db37" class="pw-post-body-paragraph ko kp in kq b kr mz jo kt ku na jr kw kx nb kz la lb nc ld le lf nd lh li lj ig bi translated">这意味着无论何时你从npm注册表安装一个包，它可以像<strong class="kq io"> cowsay </strong>或<strong class="kq io"> nodemon </strong>一样被执行，为了运行这个包，你需要这个包的可执行文件的确切路径。如果你没有正确的路径，它就不会运行。默认情况下，无论何时安装可执行文件，Npm都会创建指向它们的链接。因此，每当你在本地安装一个包时，指向它的可执行文件的链接就会在<strong class="kq io">中创建。/node_modules/。bin/ </strong>文件夹。因此，如果您运行相同的命令，但使用类似于<code class="fe mk ml mm mn b">./node_modules/.bin/cowsay "Hello"</code>的完整路径，这应该可以工作。</p><h2 id="fedd" class="lm ln in bd lo lp lq dn lr ls lt dp lu kx lv lw lx lb ly lz ma lf mb mc md me bi translated">全局安装包如何工作</h2><p id="912d" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx mh kz la lb mi ld le lf mj lh li lj ig bi translated">现在，当您全局安装软件包时，您的系统中也有一个bin目录，至少对于基于Linux的系统是这样。对于Windows，它通常位于AppData文件夹中(大部分情况下)。因此，每当您没有向命令传递任何路径时，您的操作系统会认为您正在运行一个全局安装包。它试图在你的系统中的bin(全局文件夹)中寻找可执行文件。如果有可用的全局安装，它将运行它，否则您将得到与我们在示例中看到的相同的错误消息。</p><p id="df47" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们实际上可以通过添加脚本来模拟本地安装的这种行为。因此，在package.json文件内的脚本对象中，让我们为cowsay命令添加一个脚本。</p><pre class="kd ke kf kg gt ne mn nf ng aw nh bi"><span id="02fd" class="lm ln in mn b gy ni nj l nk nl">//package.json<br/>...<br/>"scripts": {<br/>   "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",<br/>   <strong class="mn io">"cowsay": "./node_modules/.bin/cowsay"</strong><br/>}<br/>...</span></pre><p id="4664" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，您可以通过键入<code class="fe mk ml mm mn b">npm run cowsay “Hello”</code>来简单地执行此操作。</p><p id="e24c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">虽然这看起来是比以前更好的解决方案，但是您仍然需要为本地安装的每个可执行包做额外的工作。这就是npx的用武之地。</p><h2 id="5767" class="lm ln in bd lo lp lq dn lr ls lt dp lu kx lv lw lx lb ly lz ma lf mb mc md me bi translated">使用NPX</h2><p id="2572" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx mh kz la lb mi ld le lf mj lh li lj ig bi translated">Npx是npm附带的CLI工具(从npm v5.2.0开始)。它让你执行你的包没有任何花招。Npx检查该命令是否存在于路径变量和本地二进制文件中。因为我们在本地安装了cowsay包，所以它能够毫无问题地找到并执行它。因此，如果您尝试在您的终端中运行<code class="fe mk ml mm mn b">npx cowsay “Hello"</code>，您将得到预期的结果。</p><p id="0a1d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是现在最精彩的部分来了。继续从您的项目中卸载cowsay库=&gt; <code class="fe mk ml mm mn b">npm uninstall cowsay</code>。现在尝试再次运行该包，看看它是否工作(剧透警告，它会工作)。</p><p id="cd6c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这样做的原因是npx不是安装软件包并占用永久空间，而是创建一个<strong class="kq io">临时缓存</strong>并将软件包二进制文件存储在该缓存中。一旦执行完成，它将从系统中清除缓存的二进制文件。这可以节省磁盘空间并保持全局文件的整洁。如果您想在将包添加到项目之前测试它们，npx是一个好方法。不仅如此，它还可以运行GitHub上的代码。理想情况下，你不应该执行来自未知库/gist的随机脚本，但是如果你知道你在做什么，并且有一个只能通过使用GitHub上的脚本来解决的特定解决方案，那么你可以尝试一下。</p><h2 id="0ab1" class="lm ln in bd lo lp lq dn lr ls lt dp lu kx lv lw lx lb ly lz ma lf mb mc md me bi translated">结论</h2><p id="4ab7" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx mh kz la lb mi ld le lf mj lh li lj ig bi translated">这就是npm和npx的主要区别。我相信你一定遇到过的一个完美的用例是使用create react app来设置你的React项目。如果这个库在我们的开发生命周期中只会被使用几次，那么安装它就没有意义。所以还是用npx比较好。</p><p id="15f5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lk" href="https://youtu.be/GklQWcRauW4" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ll">Youtube上有这篇博文的视频版本。</em> </strong> </a></p><p id="816b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你有任何疑问或建议，你可以在评论中提出，或者通过我的任何一个社交网站与我联系。干杯！</p><p id="7fe2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lk" href="https://www.youtube.com/channel/UCaktnqx_IENyT5T2lJ3F09w" rel="noopener ugc nofollow" target="_blank">YouTube</a><br/><a class="ae lk" href="https://www.linkedin.com/in/akilesh-rao-610357137/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a><br/><a class="ae lk" href="https://twitter.com/themangalorian" rel="noopener ugc nofollow" target="_blank">Twitter</a><br/><a class="ae lk" href="https://github.com/AkileshRao" rel="noopener ugc nofollow" target="_blank">GitHub</a></p></div><div class="ab cl nm nn hr no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ig ih ii ij ik"><p id="28f6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ll">更多内容看</em> <a class="ae lk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ll">说白了就是</em> </strong> </a> <em class="ll">。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ll">免费每周简讯</em> </strong> </a> <em class="ll">。关注我们</em> <a class="ae lk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ll">推特</em> </strong> </a>，<a class="ae lk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ll">领英</em> </strong> </a> <em class="ll">，</em><a class="ae lk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ll">YouTube</em></strong></a><em class="ll">，</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ll">不和</em> </strong> </a> <em class="ll">。对增长黑客感兴趣？检查出</em> <a class="ae lk" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ll">电路</em> </strong> </a> <em class="ll">。</em></p></div></div>    
</body>
</html>