<html>
<head>
<title>How to Convert a Video Clip to a GIF File with Client-side JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨å®¢æˆ·ç«¯JavaScriptå°†è§†é¢‘å‰ªè¾‘è½¬æ¢ä¸ºGIFæ–‡ä»¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/how-to-convert-a-video-clip-to-a-gif-file-with-client-side-javascript-56575d093191?source=collection_archive---------0-----------------------#2022-02-12">https://javascript.plainenglish.io/how-to-convert-a-video-clip-to-a-gif-file-with-client-side-javascript-56575d093191?source=collection_archive---------0-----------------------#2022-02-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2acf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åŸºäºæµè§ˆå™¨çš„ç¦»çº¿å®ç°ã€‚åŒ…å«å®Œæ•´ä»£ç çš„é“¾æ¥ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/53d0c302ff84e692049c35115563bcc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*taLQG9Rfdwc2MpKaArxskg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Illustration by Author | Showcases the conversion process which involves a video file split into multiple frames and merged into a single GIF file</figcaption></figure><p id="9638" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½œä¸ºä¸€ä¸ªæ²‰è¿·äºæŠ€æœ¯å†™ä½œçš„äººï¼Œæˆ‘ä¸ªäººè®¤ä¸º<em class="lb">ä¸è¯»è€…æœ‰æ•ˆæ²Ÿé€š</em>æ˜¯ä»»ä½•æŠ€æœ¯å†™ä½œä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†ã€‚</p><p id="53a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”±äºä¸€ç¯‡æŠ€æœ¯æ–‡ç« çš„è´¨é‡å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå…¶å†…å®¹çš„å¯æ¶ˆåŒ–æ€§ï¼Œæˆ‘å€¾å‘äºåˆ©ç”¨ä»¥<a class="ae lc" href="https://docs.fileformat.com/image/gif/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">ã€GIFã€‘</strong>æ ¼å¼</a>ç¼–ç çš„å±å¹•æˆªå›¾ï¼Œåœ¨é€‚å½“çš„æ—¶å€™å°½é‡å‡å°‘é¢å¤–çš„æ–‡æœ¬æè¿°ã€‚ä¾‹å¦‚ï¼Œåœ¨æ›´å€¾å‘äº<a class="ae lc" href="https://geek-cc.medium.com/list/webrelated-content-86503714f3ff" rel="noopener"> Webå¼€å‘å†…å®¹</a>çš„æ–‡ç« ä¸­ï¼Œæ¯”å¦‚:</p><div class="ld le gp gr lf lg"><a href="https://medium.com/weekly-webtips/enable-line-numbering-to-any-html-textarea-35e15ea320e2" rel="noopener follow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd ir gy z fp ll fr fs lm fu fw ip bi translated">å¯¹ä»»ä½•HTMLæ–‡æœ¬åŒºåŸŸå¯ç”¨è¡Œç¼–å·</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">æ²¡æœ‰ä»£ç ç¼–è¾‘å™¨æ’ä»¶çš„è½»é‡çº§è§£å†³æ–¹æ¡ˆ</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">medium.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu kv lg"/></div></div></a></div><p id="4ff7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æ€»æ˜¯å‘ç°åµŒå…¥åŠ¨ç”»GIFæ¥æ¼”ç¤ºæˆ‘åˆ›å»ºçš„å¼€æºå·¥å…·çš„ä»»ä½•ç”¨æ³•æ˜¯æœ‰ç›Šçš„:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/fcdd5614b87fba4a26282e98b1a41b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*A9caECegtLxKD4F0vSjhyw.gif"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Illustration by Author | The above is a short animated clip file to communicate the use-case of an open-sourced utility created | Animated clips are .GIF files commonly embedded in web pages</figcaption></figure><p id="51ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é‰´äº<a class="ae lc" href="https://support.microsoft.com/en-us/office/record-your-screen-in-powerpoint-0b4c3f65-534c-4cf1-9c59-402b6e9d79d0" rel="noopener ugc nofollow" target="_blank"> Microsoft Powerpointçš„å†…ç½®å±å¹•å½•åˆ¶</a>åŠŸèƒ½æ˜“äºè®¿é—®ï¼Œè™½ç„¶å¯ä»¥è½»æ¾å®Œæˆè‡ªå·±çš„å±å¹•å½•åˆ¶ä»¥è¾“å‡ºå±å¹•æˆªå›¾ï¼Œä½†æˆ‘è§‰å¾—æ›´æœ‰ç›Šçš„æ¢ç´¢é¢†åŸŸåº”è¯¥æ˜¯â€” <strong class="jp ir">è½¬æ¢è§†é¢‘å±å¹•æˆªå›¾(. mp4ï¼Œ..aviç­‰ã€‚)åˆ°ã€‚GIFå›¾åƒæ–‡ä»¶ã€‚</strong></p><p id="c02b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> â€” <em class="lb">æ³¨æ„:</em> </strong> <em class="lb">æŒ‰ç…§æƒ¯ä¾‹ï¼Œå¦‚æœç›®çš„æ˜¯æ¸²æŸ“ä¸€ä¸ªçŸ­çš„åŠ¨ç”»å‰ªè¾‘(â‰¤ 30ç§’)ï¼ŒGIFæ–‡ä»¶æ›´åˆé€‚</em></p><h1 id="1889" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">ä½¿ç”¨GIFEncoder.jsæ„å»ºè§†é¢‘åˆ°GIF Maker</h1><p id="fbfd" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">ä¸ºäº†æ„å»ºæµè§ˆå™¨å®ç”¨ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/b8a03d2d81d97cfe75f1a7c63932918b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*L0B8O8kG3-j9ZaRw0gWz1Q.gif"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Illustration by Author | A simple demo of the GIF browser tool implemented in JavaScript</figcaption></figure><h2 id="eee1" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">è¿™3ä¸ªJavaScriptæ’ä»¶æ˜¯å¿…è¦çš„:</h2><ul class=""><li id="3b38" class="nl nm iq jp b jq mu ju mv jy nn kc no kg np kk nq nr ns nt bi translated"><a class="ae lc" href="https://raw.githubusercontent.com/incubated-geek-cc/video-to-GIF/main/js/GIFEncoder.js" rel="noopener ugc nofollow" target="_blank"> GIFEncoder.js </a></li><li id="c738" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated">LZWEncoder.js </li><li id="b6da" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated"><a class="ae lc" href="https://github.com/incubated-geek-cc/video-to-GIF/blob/main/js/NeuQuant.js" rel="noopener ugc nofollow" target="_blank"> NeuQuant.js </a></li></ul><p id="48aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">å‚è€ƒæ¶ˆæ¯:</strong>è¿™äº›æ’ä»¶æœ€åˆæ˜¯ç”±GitHubç”¨æˆ·<a class="ae lc" href="https://github.com/antimatter15" rel="noopener ugc nofollow" target="_blank"> Kevin Kwok </a>(åˆ›å»ºè€…)ä»GitHub repo <a class="ae lc" href="https://github.com/antimatter15/jsgif" rel="noopener ugc nofollow" target="_blank"> jsgif </a>ä¸­æ£€ç´¢å‡ºæ¥çš„ã€‚</p><h1 id="b03a" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">è§†é¢‘åˆ°GIFè½¬æ¢æ¦‚è¿°</h1><h2 id="76aa" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">å…ˆå†³æ¡ä»¶:åŒ…å«åœ¨ä»¥ä¸Š3ä¸ªæ–‡ä»¶ä¸­+ <a class="ae lc" href="https://raw.githubusercontent.com/antimatter15/jsgif/master/b64.js" rel="noopener ugc nofollow" target="_blank"> b64.js </a>å¦‚ä¸‹:</h2><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="db86" class="oe lx iq oa b be of og l oh oi">&lt;script type="text/javascript" src="LZWEncoder.js"&gt;&lt;/script&gt;<br/>&lt;script type="text/javascript" src="NeuQuant.js"&gt;&lt;/script&gt;<br/>&lt;script type="text/javascript" src="GIFEncoder.js"&gt;&lt;/script&gt;<br/><br/>&lt;script type="text/javascript" src="b64.js"&gt;&lt;/script&gt;</span></pre><h2 id="f6d6" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">æŠ€æœ¯å®æ–½â€”æ€»å…±4ä¸ªæ­¥éª¤</h2><h2 id="351c" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated"><strong class="ak">æ­¥éª¤(1)</strong>ä¸Šä¼ ä¸€æ®µè§†é¢‘ç‰‡æ®µ(<em class="oj"> â‰¤ 30ç§’)</em></h2><p id="8af8" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">å› æ­¤ï¼Œåœ¨HTMLä»£ç ä¸­ï¼ŒåŒ…å«ä¸€ä¸ªç®€å•çš„ç”¨æˆ·è¾“å…¥ç•Œé¢:</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="d82b" class="oe lx iq oa b be of og l oh oi">&lt;input id='inputVideoClipFile' type='file' multiple='false' accept='.mp4,.webm,.avi,.mpeg,.flv,.mov,.3gp' /&gt;</span></pre><p id="880c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ä¸Šé¢æ ‡è®°ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åº(onchange ),å¹¶ç»§ç»­ç”¨JavaScriptåˆå§‹åŒ–ä¸€ä¸ª<a class="ae lc" href="https://developer.mozilla.org/en-US/docs/Web/API/FileReader" rel="noopener ugc nofollow" target="_blank"> FileReader </a>å®ä¾‹:</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="b422" class="oe lx iq oa b be of og l oh oi">inputVideoClipFile.onchange = function(uploadFle) {<br/>  let file = inputVideoClipFile.files[0];<br/>let fileName=file.name;<br/>  let fileSize=(file.size/1024).toFixed(2);<br/>  let fileType=file.type;<br/>let fileredr = new FileReader();<br/>fileredr.onload = function (fle) {<br/>    var b64Str=fle.target.result;<br/>}; // end file-reader onload<br/>  fileredr.readAsDataURL(file);<br/>};</span></pre><ul class=""><li id="616d" class="nl nm iq jp b jq jr ju jv jy ok kc ol kg om kk nq nr ns nt bi translated">æ³¨æ„ï¼Œ<code class="fe on oo op oa b">new FileReader()</code>å®ä¾‹è°ƒç”¨<code class="fe on oo op oa b">readAsDataURL</code>ï¼Œå› æ­¤åˆ†é…ç»™<code class="fe on oo op oa b">b64Str</code>çš„è§†é¢‘æ–‡ä»¶å†…å®¹è¢«è¯»å–ä¸ºä¸€ä¸ª<a class="ae lc" href="https://developer.mozilla.org/en-US/docs/Glossary/Base64" rel="noopener ugc nofollow" target="_blank"> Base64 </a>å­—ç¬¦ä¸²</li><li id="a457" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated">ä»<code class="fe on oo op oa b">file</code>å¯¹è±¡ä¸­æ£€ç´¢è§†é¢‘æ–‡ä»¶çš„ä¿¡æ¯ï¼Œä»¥ä¾¿ç¨åæ˜¾ç¤º</li></ul><h2 id="5a7b" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">æ­¥éª¤(2):å¤„ç†è§†é¢‘äºŒè¿›åˆ¶æ•°æ®å¹¶æå–å¸§ã€‚æœ‰ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†éœ€è¦è€ƒè™‘â€”</h2><p id="054a" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated"><strong class="jp ir">ç¬¬ä¸€éƒ¨åˆ†</strong>é€šè¿‡åˆ›å»ºä¸€ä¸ª<code class="fe on oo op oa b">&lt;video&gt;&lt;/video&gt;</code> DOMå…ƒç´ å¹¶åœ¨JavaScriptä¸­åˆ†é…å„è‡ªçš„å±æ€§æ¥é¢„è§ˆæ˜¾ç¤ºçš„è§†é¢‘å†…å®¹</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="10a0" class="oe lx iq oa b be of og l oh oi">// rendered as &lt;video&gt;&lt;/video&gt; in HTML code<br/>var videoObj = document.createElement('video');<br/>var displayedHeight=500;<br/>if(videoObj.canPlayType(fileType)) {<br/>  videoObj.setAttribute('id','inputVideo');<br/>  videoObj.setAttribute('src', b64Str);<br/>  videoObj.setAttribute('height', displayedHeight);<br/>}</span></pre><ul class=""><li id="6a75" class="nl nm iq jp b jq jr ju jv jy ok kc ol kg om kk nq nr ns nt bi translated">æ³¨æ„<code class="fe on oo op oa b">b64Str</code>æ˜¯å‰é¢æ­¥éª¤ä¸­<code class="fe on oo op oa b">FileReader()</code>è¯»å–çš„è§†é¢‘æ–‡ä»¶æ•°æ®ã€‚</li></ul><p id="1ea6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¬¬äºŒéƒ¨åˆ†ã€‚å¸§æå–â€” æ¯ä¸ªè§†é¢‘å¸§æŒ‡çš„æ˜¯åœ¨å”¯ä¸€æ—¶é—´æˆ³çš„å‰ªè¾‘çš„å›¾åƒå¿«ç…§ã€‚</p><blockquote class="oq"><p id="1e47" class="or os iq bd ot ou ov ow ox oy oz kk dk translated">ç”±äºGIFæ–‡ä»¶æ˜¯é€šè¿‡åˆå¹¶ä¸€ç»„è¿ç»­å›¾åƒè€Œåˆ›å»ºçš„ï¼Œå› æ­¤å¯¹äºè§†é¢‘çš„æ¯æ¬¡æŒ‰æ—¶é—´é¡ºåºçš„å›¾å½¢æ›´æ–°ï¼Œåº”æå–ä¸€å¸§åµŒå…¥çš„å›¾åƒæ•°æ®ï¼Œç”¨äºåç»­çš„GIFåˆ›å»ºè¿‡ç¨‹ã€‚</p></blockquote><p id="6d12" class="pw-post-body-paragraph jn jo iq jp b jq pa js jt ju pb jw jx jy pc ka kb kc pd ke kf kg pe ki kj kk ij bi translated">è™½ç„¶ä¸èƒ½ä»DOMå…ƒç´ <code class="fe on oo op oa b">&lt;video&gt;&lt;/video&gt;</code>ä¸­ç›´æ¥æå–æ¯ä¸ªè§†é¢‘å¸§<strong class="jp ir">æ‰€éœ€çš„å›¾åƒæ•°æ®ï¼Œä½†æ˜¯å¯ä»¥å°†<code class="fe on oo op oa b">&lt;video&gt;&lt;/video&gt;</code>ä¸­é¢„è§ˆçš„å†…å®¹<strong class="jp ir">æ¸²æŸ“åˆ°</strong> <code class="fe on oo op oa b">&lt;canvas&gt;&lt;/canvas&gt;</code> <strong class="jp ir">å…ƒç´ </strong>ä¸Šä»¥æå–å¸§å›¾åƒæ•°æ®ã€‚</strong></p><p id="43ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¥ä¸‹æ¥ï¼Œåœ¨JavaScriptä¸­åˆ›å»ºä¸€ä¸ª<code class="fe on oo op oa b">&lt;canvas&gt;&lt;/canvas&gt;</code>å…ƒç´ å¹¶ä¸ºå…¶åˆ†é…ç›¸åº”çš„å±æ€§(ç±»ä¼¼äº<code class="fe on oo op oa b">&lt;video&gt;&lt;/video&gt;</code>):</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="f305" class="oe lx iq oa b be of og l oh oi">var vidHeight=videoObj.videoHeight;<br/>var vidWidth=videoObj.videoWidth;<br/>var bitmap = document.createElement('canvas');<br/><br/>bitmap.setAttribute('id', 'bitmap');<br/>bitmap.setAttribute('width', vidWidth);<br/>bitmap.setAttribute('height', vidHeight);</span></pre><ul class=""><li id="561e" class="nl nm iq jp b jq jr ju jv jy ok kc ol kg om kk nq nr ns nt bi translated">æ³¨æ„<code class="fe on oo op oa b">vidWidth</code> &amp; <code class="fe on oo op oa b">vidHeight</code>æ˜¯ä»<code class="fe on oo op oa b">&lt;video&gt;&lt;/video&gt;</code>ä¸­æ£€ç´¢å‡ºæ¥çš„ã€‚<em class="lb">(è¿™äº›æ˜¯å¤¹å­çš„åŸå§‹å°ºå¯¸ã€‚)</em></li></ul><p id="2c6f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¥ä¸‹æ¥çš„å‡ è¡Œä»£ç æ ¹æ®æ ‡è®°ç»™æ¯ä¸ªå…ƒç´ çš„<code class="fe on oo op oa b">'id'</code>å±æ€§æ¥å¼•ç”¨<code class="fe on oo op oa b">&lt;video&gt;&lt;/video&gt;</code>å’Œ<code class="fe on oo op oa b">&lt;canvas&gt;&lt;/canvas&gt;</code>:</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="340b" class="oe lx iq oa b be of og l oh oi">const inputVideo=document.getElementById('inputVideo');<br/>const bitmapCanvas=document.getElementById('bitmap');<br/>const bitmapCtx = bitmapCanvas.getContext('2d');<br/><br/>inputVideo.muted = true;<br/>inputVideo.loop = false;<br/>inputVideo.autoplay=true;<br/><br/>const background = () =&gt; {<br/>  bitmapCtx.fillStyle = '#FFFFFF';<br/>  bitmapCtx.fillRect(0, 0, vidWidth, vidHeight);<br/>};</span></pre><ul class=""><li id="49a5" class="nl nm iq jp b jq jr ju jv jy ok kc ol kg om kk nq nr ns nt bi translated">ç”±äºvideoè¢«è®¾ç½®ä¸º<code class="fe on oo op oa b">autoplay</code>ï¼Œå½“<code class="fe on oo op oa b">play</code>äº‹ä»¶è¢«å‘å‡ºæ—¶ï¼Œè¿™è§¦å‘äº†<code class="fe on oo op oa b">background()</code>çš„æ‰§è¡Œï¼Œå®ƒä¸ä»…å°†GIFèƒŒæ™¯å¡«å……ä¸ºç™½è‰²ï¼Œè¿˜è®¾ç½®äº†ç»˜åˆ¶åˆ°canvaså…ƒç´ ä¸Šçš„æ¯ä¸€å¸§çš„å°ºå¯¸:</li></ul><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="ef73" class="oe lx iq oa b be of og l oh oi">const step = async() =&gt; {<br/>  let bgStatus=await background();<br/>  await new Promise(resolve =&gt; {<br/>    bitmapCtx.drawImage(inputVideo, 0, 0, vidWidth, vidHeight);<br/>    frameB64Str = bitmapCanvas.toDataURL();<br/>    resolve();<br/>  });<br/>  window.requestAnimationFrame(step);<br/>};<br/>inputVideo.addEventListener('play', () =&gt; {<br/>  step();<br/>  window.requestAnimationFrame(step);<br/>});</span></pre><ul class=""><li id="83b9" class="nl nm iq jp b jq jr ju jv jy ok kc ol kg om kk nq nr ns nt bi translated"><code class="fe on oo op oa b">window.requestAnimationFrame(step)</code>å–ä¸€ä¸ªå›è°ƒå‡½æ•°(å³<code class="fe on oo op oa b">step()</code>)æ¥å¤„ç†æ¯ä¸€å¸§çš„å›¾åƒæ•°æ®</li><li id="41bf" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated"><code class="fe on oo op oa b">bitmapCtx.drawImage()</code>ç»§ç»­å°†æ¯ä¸ªå›¾åƒå¿«ç…§æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šï¼Œä»¥ä¾¿<code class="fe on oo op oa b">bitmapCanvas.toDataURL()</code>è¿”å›æ¯ä¸ªå¿«ç…§çš„base64ç¼–ç å›¾åƒ</li></ul><h2 id="8546" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">æ­¥éª¤(3):é¡ºåºåˆå¹¶æ‰€æœ‰å›¾åƒå¿«ç…§</h2><p id="67e8" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">æœ€åå®ç°äº†JSæ’ä»¶<strong class="jp ir"> GIFEncoder.js </strong>ã€‚ä½¿ç”¨ä¸ä¸Šé¢ç›¸åŒçš„ä»£ç ç‰‡æ®µï¼Œä¸‹é¢åŠ ç²—çš„ä»£ç è¡Œå¼•ç”¨äº†å½“<strong class="jp ir"> GIFEncoder </strong> <code class="fe on oo op oa b">encoder</code>æ•è·åµŒå…¥åœ¨<code class="fe on oo op oa b">&lt;canvas&gt;&lt;/canvas&gt;</code>ä¸­çš„æ¯ä¸ªæ•°æ®å¸§æ—¶çš„å®ä¾‹ã€‚</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="691a" class="oe lx iq oa b be of og l oh oi">const encoder = new GIFEncoder(vidWidth, vidHeight);<br/>encoder.setRepeat(0);<br/>encoder.setDelay(500);<br/><br/>const step = async() =&gt; {<br/>  let bgStatus=await background();<br/>  await new Promise(resolve =&gt; {<br/>    bitmapCtx.drawImage(inputVideo, 0, 0, vidWidth, vidHeight);<br/>    frameB64Str = bitmapCanvas.toDataURL();<br/>    encoder.addFrame(bitmapCtx);<br/>    resolve();<br/>  });<br/>  window.requestAnimationFrame(step);<br/>};<br/><br/>inputVideo.addEventListener('play', () =&gt; {<br/>  encoder.start();<br/>  step();<br/>  window.requestAnimationFrame(step);<br/>});</span></pre><p id="e945" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“ä¸Šä¼ çš„è§†é¢‘æœ€ç»ˆè¿è¡Œåˆ°å…¶æœ€å¤§æŒç»­æ—¶é—´é•¿åº¦æ—¶ï¼Œäº‹ä»¶<code class="fe on oo op oa b">ended</code>å°†åœ¨<code class="fe on oo op oa b">GIFEncoder</code>è°ƒç”¨æ–¹æ³•<code class="fe on oo op oa b">finish()</code>æ—¶å‘å‡º:</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="b313" class="oe lx iq oa b be of og l oh oi">inputVideo.addEventListener('ended', () =&gt; {<br/>  encoder.finish();<br/>});</span></pre><h2 id="0dbf" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">æ­¥éª¤(4):é€šè¿‡GIFEncoderåˆ›å»ºGIF</h2><p id="7b9b" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">ä¸ºäº†ä»<code class="fe on oo op oa b">encoder</code>ä¸­æå–å‡ºæ‰€æœ‰å¸§<em class="lb">(å³GIFè¾“å‡º)</em>çš„åˆå¹¶ç‰ˆæœ¬ï¼Œéœ€è¦å®ç°ä»¥ä¸‹JavaScriptä»£ç ç‰‡æ®µ:</p><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="c242" class="oe lx iq oa b be of og l oh oi">var fileType='image/gif';<br/>var readableStream=encoder.stream();<br/>var binary_gif=readableStream.getData();<br/>var b64Str='data:'+fileType+';base64,'+encode64(binary_gif);</span></pre><ul class=""><li id="d4d5" class="nl nm iq jp b jq jr ju jv jy ok kc ol kg om kk nq nr ns nt bi translated"><code class="fe on oo op oa b">encode64()</code>æ˜¯<a class="ae lc" href="https://raw.githubusercontent.com/antimatter15/jsgif/master/b64.js" rel="noopener ugc nofollow" target="_blank"> b64.js </a>ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå°†<code class="fe on oo op oa b">GIFEncoder</code>æ•è·çš„æµæ•°æ®è½¬æ¢ä¸ºBase64æ ¼å¼ã€‚</li><li id="f795" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated"><code class="fe on oo op oa b">b64Str</code>æŒ‡çš„æ˜¯é€šè¿‡åˆå¹¶<code class="fe on oo op oa b">GIFEncoder</code>ä¸­å‡ºç°çš„æ‰€æœ‰å¸§ä¸ºGIFæ–‡ä»¶ç¼–ç çš„æ•°æ®ã€‚å› æ­¤ï¼Œåœ¨HTMLä»£ç ä¸­ï¼Œç»§ç»­åŒ…å«:<code class="fe on oo op oa b">&lt;img id='outputGif' src=â€™${b64Str}â€™ alt=â€™${fileName}â€™ /&gt;</code>ä»¥é¢„è§ˆè¾“å‡ºçš„GIFæ–‡ä»¶ã€‚</li></ul><h2 id="c8ff" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">æœ€åï¼ŒGIFæ–‡ä»¶çš„ä¸‹è½½é“¾æ¥åˆ›å»ºå¦‚ä¸‹:</h2><pre class="km kn ko kp gt nz oa ob bn oc od bi"><span id="6cc9" class="oe lx iq oa b be of og l oh oi">let dwnlnk = document.createElement('a');<br/>dwnlnk.download = fileName;<br/>dwnlnk.innerHTML = `ğŸ’¾ &lt;small&gt;Save&lt;/small&gt;`;<br/>dwnlnk.className = 'btn btn-outline-dark';<br/>dwnlnk.href = b64Str;</span></pre><h2 id="c959" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">ä»…ä¾›å‚è€ƒ:å®Œæ•´çš„ä»£ç å®ç°åœ¨æˆ‘çš„GitHub: <a class="ae lc" href="https://github.com/incubated-geek-cc/video-to-GIF" rel="noopener ugc nofollow" target="_blank"> video-to-GIF </a>(éšæ„â˜…å®ƒæˆ–ğŸ”±å‰èµ·æ¥ï¼)æˆ–è€…åœ¨<a class="ae lc" href="https://incubated-geek-cc.github.io/video-to-GIF/" rel="noopener ugc nofollow" target="_blank">è¯•ç©</a>è¯•è¯•çœ‹ï¼</h2></div><div class="ab cl pf pg hu ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="ij ik il im in"><h2 id="b83a" class="mz lx iq bd ly na nb dn mc nc nd dp mg jy ne nf mk kc ng nh mo kg ni nj ms nk bi translated">ä¸ªäººè¯„è®º</h2><ul class=""><li id="9422" class="nl nm iq jp b jq mu ju mv jy nn kc no kg np kk nq nr ns nt bi translated">è™½ç„¶åœ¨<a class="ae lc" href="https://raw.githubusercontent.com/incubated-geek-cc/video-to-GIF/main/js/GIFEncoder.js" rel="noopener ugc nofollow" target="_blank"> GIFEncoder.js </a>ä¸­è¿˜æœ‰è¿›ä¸€æ­¥æ¢ç´¢è¾“å‡ºGIFæ–‡ä»¶çš„å¯å®šåˆ¶è°ƒæ•´çš„ç©ºé—´ï¼Œä½†è¿™ç¯‡æ–‡ç« æ—¨åœ¨å¯¹ä¸€ç§æ½œåœ¨çš„è½»é‡çº§æ–¹æ³•è¿›è¡ŒåŸºæœ¬ä»‹ç»ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥å®Œå…¨åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨çº¯å®¢æˆ·ç«¯JavaScriptå°†è§†é¢‘å‰ªè¾‘è½¬æ¢ä¸ºGIFæ–‡ä»¶</li><li id="28c8" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated"><strong class="jp ir">å»ºè®®æ³¨æ„:</strong>ä¸Šä¼ çš„è§†é¢‘ä¸åº”è¶…è¿‡30ç§’ï¼Œå› ä¸ºGIFæ–‡ä»¶æ—¨åœ¨å‘ˆç°ç®€çŸ­çš„åŠ¨ç”»å‰ªè¾‘ã€‚</li></ul></div><div class="ab cl pf pg hu ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="ij ik il im in"><p id="3bb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ä½ çŸ¥é“äº†ï¼éå¸¸æ„Ÿè°¢ä½ åšæŒåˆ°è¿™ç¯‡æ–‡ç« çš„ç»“å°¾ï¼â¤å¸Œæœ›ä½ è§‰å¾—è¿™ä¸ªæŒ‡å—æœ‰ç”¨ï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šGISã€æ•°æ®åˆ†æ&amp; Webåº”ç”¨ç›¸å…³çš„å†…å®¹ï¼Œè¯·éšæ—¶<a class="ae lc" href="https://medium.com/@geek-cc" rel="noopener">å…³æ³¨æˆ‘çš„Medium </a>ã€‚ä¼šéå¸¸æ„Ÿæ¿€â€”ğŸ˜€</p><p id="4e8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">â€” ğŸŒ®è¯·ç»™æˆ‘ä¹°ä¸ªç‰ç±³å·ğŸ€Ë¶â›â—¡â›)</p><div class="ld le gp gr lf lg"><a href="https://geek-cc.medium.com/membership" rel="noopener follow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd ir gy z fp ll fr fs lm fu fw ip bi translated">é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥çµåª’â€”â€”ææ€æ¬£Â·å´”</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">è·å¾—ææ€æ¬£Â·å´”å’Œå…¶ä»–ä½œå®¶åœ¨åª’ä½“ä¸Šçš„æ‰€æœ‰å¸–å­ï¼ğŸ˜ƒæ‚¨çš„ä¼šå‘˜è´¹ç›´æ¥â€¦</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">geek-cc.medium.com</p></div></div><div class="lp l"><div class="pm l lr ls lt lp lu kv lg"/></div></div></a></div><p id="2086" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lb">æ›´å¤šå†…å®¹çœ‹</em> <a class="ae lc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="lb">è¯´ç™½äº†ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae lc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="lb">å…è´¹å‘¨æŠ¥</em> </strong> </a> <em class="lb">ã€‚åœ¨æˆ‘ä»¬çš„</em> <a class="ae lc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="lb">ç¤¾åŒºä¸å’Œè°</em> </strong> </a> <em class="lb">è·å¾—ç‹¬å®¶è·å–å†™ä½œæœºä¼šå’Œå»ºè®®ã€‚</em></strong></a></p></div></div>    
</body>
</html>