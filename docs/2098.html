<html>
<head>
<title>Double Bang (!!) and JavaScript Type Coercion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">双爆炸(！！)和JavaScript类型强制</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/double-bang-and-javascript-type-coercion-a554a44c5652?source=collection_archive---------5-----------------------#2022-05-13">https://javascript.plainenglish.io/double-bang-and-javascript-type-coercion-a554a44c5652?source=collection_archive---------5-----------------------#2022-05-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="b990" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">深潜双爆炸(！！)和JavaScript中的类型强制。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b6d474f5a321ca97d1fc062a7117d371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TS0VuWInVcnQPQ4d"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b841" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">第一次看到两个bang算符写在一起，觉得很荒谬，多余。研究表明，在很大程度上，我是对的。双爆炸看起来几乎像是过去的开发人员留下的古老符号，用来表示变量何时应该是布尔值。让我们深入探讨一下。</p><p id="049a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在继续之前，我们应该消除一些人可能有的误解:double bang，written <code class="fe lp lq lr ls b">!!</code>不是运算符。它只是两个单个的<code class="fe lp lq lr ls b">!</code> bang运算符依次使用。此外，我们应该理解类型<em class="lt">强制</em>和类型<em class="lt">转换之间的区别。</em></p><h2 id="a823" class="lu lv in bd lw lx ly dn lz ma mb dp mc lc md me mf lg mg mh mi lk mj mk ml mm bi translated">类型强制</h2><p id="fdc4" class="pw-post-body-paragraph kt ku in kv b kw mn jo ky kz mo jr lb lc mp le lf lg mq li lj lk mr lm ln lo ig bi translated">类型强制是类型转换的子集。转换是一种数据类型与另一种数据类型之间的转换，例如将数字转换为字符串，将字符串转换为浮点数等。有两种类型的转换—显式和隐式。当使用函数将变量从一种数据类型显式转换为另一种数据类型时，会发生显式类型转换。一个例子是</p><pre class="kd ke kf kg gt ms ls mt mu aw mv bi"><span id="cc4b" class="lu lv in ls b gy mw mx l my mz">var pointNum = Number(text);</span></pre><p id="ce93" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其中<code class="fe lp lq lr ls b">text</code>是一个被转换成数字的字符串。</p><p id="170d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">隐式类型转换也称为类型强制。当变量被视为另一种数据类型时，即使没有发生转换过程，也会出现这种情况。一个例子是</p><pre class="kd ke kf kg gt ms ls mt mu aw mv bi"><span id="0c59" class="lu lv in ls b gy mw mx l my mz">const stringNum = '6';<br/>const realNum = 7;<br/>var sum = value1 + value2; // Sum is '67'</span></pre><p id="d302" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其中数字<code class="fe lp lq lr ls b">7</code>被添加到字符串<code class="fe lp lq lr ls b">'6'</code>中。由于数字不能以有意义的方式添加到字符串中，JavaScript将数字转换为字符串并追加，使<code class="fe lp lq lr ls b">sum</code>等于<code class="fe lp lq lr ls b">'67'</code>而不是13。如果您没有意识到它的含义，类型强制可能会导致问题，但它也可以是简化代码的工具。</p><h2 id="bb33" class="lu lv in bd lw lx ly dn lz ma mb dp mc lc md me mf lg mg mh mi lk mj mk ml mm bi translated">双爆炸</h2><p id="760d" class="pw-post-body-paragraph kt ku in kv b kw mn jo ky kz mo jr lb lc mp le lf lg mq li lj lk mr lm ln lo ig bi translated">这就是“双重爆炸”的由来。考虑以下代码:</p><pre class="kd ke kf kg gt ms ls mt mu aw mv bi"><span id="80ff" class="lu lv in ls b gy mw mx l my mz">const name = '';<br/>var bangName = !name;</span></pre><p id="03c9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你知道<code class="fe lp lq lr ls b">bangName</code>会评价到什么吗？在我们回答这个问题之前，让我们再绕一小段路来讨论真假价值观。</p><p id="3045" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果在强制进入布尔上下文时，一个值的计算结果为true，则该值被视为“真”。同样，如果计算结果为false，则为“falsy”。虚假值的一些例子是:</p><pre class="kd ke kf kg gt ms ls mt mu aw mv bi"><span id="1c08" class="lu lv in ls b gy mw mx l my mz">false (boolean)<br/>0 (number)<br/>'' (empty string)<br/>null<br/>undefined</span></pre><p id="41e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，像<code class="fe lp lq lr ls b">if ('')</code>这样的东西不会执行它的内部代码，因为它的计算结果不是true。</p><p id="0b20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的例子中，<code class="fe lp lq lr ls b">bangName</code>将等于<code class="fe lp lq lr ls b">true</code>，因为空字符串是falsy，而我们的bang操作取相反的结果，即<code class="fe lp lq lr ls b">true</code>。现在让我们加上第二次爆炸:</p><pre class="kd ke kf kg gt ms ls mt mu aw mv bi"><span id="5929" class="lu lv in ls b gy mw mx l my mz">const name = '';<br/>var doubleBangName = !!name;</span></pre><p id="5865" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">显然，由于单次爆炸的计算结果为<code class="fe lp lq lr ls b">true</code>，添加第二次爆炸将使其计算结果为<code class="fe lp lq lr ls b">false</code>。那么这有什么用呢？</p><p id="a885" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">实际上，通常不会。双爆炸带来的价值是清晰的，即使如此也很少。很少有这样的情况，它在功能上给代码增加了一些东西。然而，双击可以用来向其他开发人员或您未来的自己表明，一个语句的计算结果应该是布尔值。当需要将变量转换为布尔值时，也可以使用它，例如在函数返回中:</p><pre class="kd ke kf kg gt ms ls mt mu aw mv bi"><span id="92bb" class="lu lv in ls b gy mw mx l my mz">return items.length &gt; 0;</span></pre><p id="8bef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">可以简化为:</p><pre class="kd ke kf kg gt ms ls mt mu aw mv bi"><span id="3a87" class="lu lv in ls b gy mw mx l my mz">return !!items;</span></pre><p id="8af8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">刚发现的时候，开始频繁使用双刘海。后来，我了解了更多关于真假价值观的知识，意识到自己一事无成。这取决于你是否相信使用它会提高代码的清晰性或完成任何有用的事情。和所有事情一样，它只是你工具箱中的另一个工具。</p><p id="c278" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢阅读。欲了解更多信息:</p><div class="na nb gp gr nc nd"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Truthy" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd io gy z fp ni fr fs nj fu fw im bi translated">Truthy - MDN网络文档词汇表:网络相关术语的定义| MDN</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">在JavaScript中，真值是在布尔上下文中遇到时被认为是真的值。所有值都是…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">developer.mozilla.org</p></div></div><div class="nm l"><div class="nn l no np nq nm nr km nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd io gy z fp ni fr fs nj fu fw im bi translated">Falsy - MDN网络文档词汇表:网络相关术语的定义</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">falsy(有时写为false)值是在布尔上下文中遇到时被视为false的值。</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">developer.mozilla.org</p></div></div><div class="nm l"><div class="ns l no np nq nm nr km nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Type_Conversion" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd io gy z fp ni fr fs nj fu fw im bi translated">类型转换- MDN Web文档词汇表:Web相关术语的定义| MDN</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">类型转换(或类型转换)意味着将数据从一种数据类型转换为另一种数据类型。隐式转换发生在…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">developer.mozilla.org</p></div></div><div class="nm l"><div class="nt l no np nq nm nr km nd"/></div></div></a></div><p id="b32f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lt">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lt">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lt">免费周报</em> </strong> </a> <em class="lt">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="lt">Twitter</em></strong></a><em class="lt">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="lt">LinkedIn</em></strong></a><em class="lt">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lt">社区不和谐</em> </strong> </a> <em class="lt">，加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lt">人才集体</em> </strong> </a> <em class="lt">。</em></strong></a></p></div></div>    
</body>
</html>