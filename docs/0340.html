<html>
<head>
<title>5 Things You Should Know About React Router Version 6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于React路由器版本6你应该知道的5件事</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-things-you-should-know-about-react-router-version-6-bbf3d617c73e?source=collection_archive---------6-----------------------#2022-01-20">https://javascript.plainenglish.io/5-things-you-should-know-about-react-router-version-6-bbf3d617c73e?source=collection_archive---------6-----------------------#2022-01-20</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="89e9" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">了解这个最常用和最重要的React包的最新版本中的重大变化。</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/c3e049238d565529a95b4f128f133a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ccqwQFnVAEsKju9M"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@5tep5?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexander Popov</a> on <a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="83fd" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">React路由器版本6已于近日发布。这是一个非常大的变化。因为很多React项目都用React路由器。让我们看看版本6有什么变化。</p></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><p id="0f3b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">将</strong> <code class="fe ma mb mc md b"><strong class="kz is">&lt;Switch&gt;</strong></code> <strong class="kz is">元素升级为</strong> <code class="fe ma mb mc md b"><strong class="kz is">&lt;Routes&gt;</strong></code></p><p id="e289" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">React路由器版本5，在使用wrap路由时支持<code class="fe ma mb mc md b">&lt;Switch&gt;</code>组件。</p><p id="a99c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">与React路由器版本6 <code class="fe ma mb mc md b">&lt;Switch&gt;</code>不再支持。这是唯一的办法，那就是把<code class="fe ma mb mc md b">&lt;Switch&gt;</code>替换成<code class="fe ma mb mc md b">&lt;Routes&gt;</code></p><p id="6e51" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe ma mb mc md b">&lt;Routes&gt;</code>比<code class="fe ma mb mc md b">&lt;Switch&gt;</code>更强大</p><p id="335b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><a class="ae kw" href="https://reactrouter.com/docs/en/v6/upgrading/v5#upgrade-all-switch-elements-to-routes" rel="noopener ugc nofollow" target="_blank">了解更多信息</a></p><p id="c12a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">用</strong> <code class="fe ma mb mc md b"><strong class="kz is">useNavigate()</strong></code> <strong class="kz is">代替</strong> <code class="fe ma mb mc md b"><strong class="kz is">useHistory()</strong></code></p><p id="38b0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本5，当使用<code class="fe ma mb mc md b">useHistory()</code>时</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="034a" class="mi mj ir md b gz mk ml l mm mn">const history = useHistory();</span><span id="b6cf" class="mi mj ir md b gz mo ml l mm mn">We use for doing redirect, replace;</span><span id="13e3" class="mi mj ir md b gz mo ml l mm mn">history.push() or history.replace()</span></pre><p id="effa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本6，我们不再使用<code class="fe ma mb mc md b">useHistory()</code>。我们用<code class="fe ma mb mc md b">useNavigate()</code>钩子代替<code class="fe ma mb mc md b">useHistory()</code>。</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="6a7f" class="mi mj ir md b gz mk ml l mm mn">const navigate = useNavigate();</span><span id="aab6" class="mi mj ir md b gz mo ml l mm mn">We use for doing redirect, replace;</span><span id="6fc4" class="mi mj ir md b gz mo ml l mm mn">navigate('/user');<br/>navigate(-1); --&gt; go abck previous page</span></pre><p id="778b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果您需要替换当前位置，而不是将新位置推送到历史堆栈上，请使用<code class="fe ma mb mc md b">navigate('/user', { replace: true })</code></p><p id="e031" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><a class="ae kw" href="https://reactrouter.com/docs/en/v6/upgrading/v5#use-usenavigate-instead-of-usehistory" rel="noopener ugc nofollow" target="_blank">了解更多信息</a></p><p id="d7b8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">相对路线</strong></p><p id="46da" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于React路由器版本5；</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="afc5" class="mi mj ir md b gz mk ml l mm mn">&lt;Switch&gt;<br/>    &lt;Route path='/'&gt;<br/>       &lt;WelcomePage /&gt;<br/>    &lt;/Route&gt;<br/>    &lt;Route path='/user'&gt;<br/>       &lt;UserPage /&gt;<br/>    &lt;/Route&gt;<br/>&lt;/Switch&gt;</span></pre><p id="8806" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这一变化是关于我们如何定义我们的路线。对于版本5，路线有一个类似于孩子的<code class="fe ma mb mc md b">&lt;WelcomePage /&gt;</code>或<code class="fe ma mb mc md b"> &lt;UserPage /&gt;</code>。</p><p id="2f32" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本6，<code class="fe ma mb mc md b">&lt;WelcomePage /&gt;</code>或<code class="fe ma mb mc md b"> &lt;UserPage /&gt;</code>不会成为路由的子代。我们有了一个新的“元素”道具，而不是孩子。</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="69a0" class="mi mj ir md b gz mk ml l mm mn">&lt;Routes&gt;<br/>   &lt;Route path='/' element={&lt;WelcomePage /&gt;} /&gt;<br/>   &lt;Route path="/users" element={&lt;UserPage /&gt;} /&gt;<br/>&lt;/Routes&gt;</span></pre><p id="ce21" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">元素内部的值应该是JSX格式。</p><p id="c2b9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> CSS类名</strong></p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="fe31" class="mi mj ir md b gz mk ml l mm mn">&lt;NavLink activeClassName={active} to='/person'&gt;</span></pre><p id="de00" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于第5版，一旦链接被激活，您可以使用该属性将一些CSS类自动应用到链接上。</p><p id="1c61" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本6，该道具被移除。如果想要应用一个激活的特定类，你必须手动查找这个链接是否激活。</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="94e2" class="mi mj ir md b gz mk ml l mm mn">&lt;NavLink className={(data) =&gt; data.isActive ? active: ''} to='/person'&gt;</span></pre><p id="7f5d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">移除精确的</strong></p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="8129" class="mi mj ir md b gz mk ml l mm mn">&lt;Route path='/user' exact element={&lt;UserPage /&gt;}&gt;&lt;/Route&gt;</span></pre><p id="5fbf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本5，我们需要在这里添加exact，因为，如果没有exact，这将匹配以/user开头的路径。</p><p id="fcf0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本6，确切的道具不见了，它总是寻找一个确切的匹配，如果你定义你的路径。</p><p id="a3d9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果你想要只匹配路径开头的旧行为，你仍然可以通过在你的路径后添加<strong class="kz is"> /* </strong>来实现，当你添加时，如果URL路径以<strong class="kz is">/用户</strong>开头，即使你这样做的原因是版本6内部有一个更好的算法来选择要加载的最佳路径。</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="3c2e" class="mi mj ir md b gz mk ml l mm mn">&lt;Route path='/user/userid' exact element={&lt;Test/&gt;}&gt;&lt;/Route&gt;<br/>&lt;Route path='/user/selected' exact element={&lt;Test/&gt;}&gt;&lt;/Route&gt;</span></pre><p id="737f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本5，</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="d128" class="mi mj ir md b gz mk ml l mm mn">&lt;Route path='/test/testid' exact element={&lt;Test/&gt;}&gt;&lt;/Route&gt;</span></pre><p id="14a4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">路线总是赢</p><p id="3d2c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在版本6中，这种情况发生了变化，它在内部变得更加智能。您可以定义这两条路由，并访问选定的react-router查找。这里的最后一条路线是这条特定路径的最佳匹配。</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="963e" class="mi mj ir md b gz mk ml l mm mn">&lt;Route path='/user/userid' element={&lt;Test/&gt;}&gt;&lt;/Route&gt;<br/>&lt;Route path='/user/selected' element={&lt;Test/&gt;}&gt;&lt;/Route&gt;</span></pre><p id="74aa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于版本6，如果转到/选中，此；</p><pre class="kh ki kj kk gu me md mf mg aw mh bi"><span id="b7ed" class="mi mj ir md b gz mk ml l mm mn">&lt;Route path='/user/selected' element={&lt;Test/&gt;}&gt;&lt;/Route&gt;</span></pre><p id="17f7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">该路由将通过路由器6建立。</p></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><div class="kh ki kj kk gu mp"><a href="https://bestte.medium.com/membership" rel="noopener follow" target="_blank"><div class="mq ab fp"><div class="mr ab ms cl cj mt"><h2 class="bd is gz z fq mu fs ft mv fv fx iq bi translated">通过我的推荐链接加入Medium—Beste</h2><div class="mw l"><h3 class="bd b gz z fq mu fs ft mv fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mx l"><p class="bd b dl z fq mu fs ft mv fv fx dk translated">bestte.medium.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd kq mp"/></div></div></a></div><div class="ne nf gq gs ng mp"><a rel="noopener  ugc nofollow" target="_blank" href="/5-top-rated-q-a-for-angular-on-stack-overflow-bed610bf1c50"><div class="mq ab fp"><div class="mr ab ms cl cj mt"><h2 class="bd is gz z fq mu fs ft mv fv fx iq bi translated">5堆栈上角溢出的顶级问答</h2><div class="mw l"><h3 class="bd b gz z fq mu fs ft mv fv fx dk translated">“这个项目从堆栈溢出开始”是开发人员如何开始她的故事。</h3></div><div class="mx l"><p class="bd b dl z fq mu fs ft mv fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="my l"><div class="nh l na nb nc my nd kq mp"/></div></div></a></div><div class="ne nf gq gs ng mp"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-work-with-the-angular-nebular-ui-library-and-use-a-simple-splash-screen-3dd0d1790478"><div class="mq ab fp"><div class="mr ab ms cl cj mt"><h2 class="bd is gz z fq mu fs ft mv fv fx iq bi translated">如何使用Angular Nebular UI库并使用简单的闪屏</h2><div class="mw l"><h3 class="bd b gz z fq mu fs ft mv fv fx dk translated">闪屏在某些情况下是必要的，所以我想用一种非常简单的方式来展示它，我将谈谈…</h3></div><div class="mx l"><p class="bd b dl z fq mu fs ft mv fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="my l"><div class="ni l na nb nc my nd kq mp"/></div></div></a></div><div class="ne nf gq gs ng mp"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-sass-and-enjoy-css-with-dynamic-structure-900ea2adddf7"><div class="mq ab fp"><div class="mr ab ms cl cj mt"><h2 class="bd is gz z fq mu fs ft mv fv fx iq bi translated">如何使用Sass，享受动态结构的CSS</h2><div class="mw l"><h3 class="bd b gz z fq mu fs ft mv fv fx dk translated">由于CSS是一个静态结构，我们必须不断重复代码。我们给CSS代码带来了动态结构…</h3></div><div class="mx l"><p class="bd b dl z fq mu fs ft mv fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="my l"><div class="nj l na nb nc my nd kq mp"/></div></div></a></div><div class="ne nf gq gs ng mp"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-the-composition-api-to-get-data-from-service-with-vue-js-4da1eca19ad6"><div class="mq ab fp"><div class="mr ab ms cl cj mt"><h2 class="bd is gz z fq mu fs ft mv fv fx iq bi translated">如何使用组合API通过Vue.js从服务中获取数据</h2><div class="mw l"><h3 class="bd b gz z fq mu fs ft mv fv fx dk translated">通过使用组合API而不是选项API，可以使服务结构更加可用。</h3></div><div class="mx l"><p class="bd b dl z fq mu fs ft mv fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="my l"><div class="nk l na nb nc my nd kq mp"/></div></div></a></div><p id="a85b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="nl">更多内容看</em> <a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">说白了就是io </em> </strong> </a> <em class="nl">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">免费周报</em> </strong> </a> <em class="nl">。在我们的</em> <a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="nl">。</em></p></div></div>    
</body>
</html>