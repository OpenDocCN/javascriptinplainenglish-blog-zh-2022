<html>
<head>
<title>How To Interact With Google Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何与谷歌图表互动</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-interact-with-google-chart-316942d1533a?source=collection_archive---------15-----------------------#2022-02-10">https://javascript.plainenglish.io/how-to-interact-with-google-chart-316942d1533a?source=collection_archive---------15-----------------------#2022-02-10</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/8e0879b30f548ff0601f1a022b12ccb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*suifCcvGt-vKQ1tYRonS2A.jpeg"/></div></div></figure><p id="d31a" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">几天前<a class="ae kx" href="https://github.com/thompcd" rel="noopener ugc nofollow" target="_blank"> Corey Thompson </a>在我之前的教程中添加了事件。我承认我故意跑题了。然而，我利用这个问题更深入地研究了如何使各种图表更有趣。</p><p id="1e3f" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">首先，这是我想要达到的目标:</p><figure class="kz la lb lc gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj ky"><img src="../Images/aba5ad7403ea36930b1f8f627a4f1d55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tg8jiYRIz6LeEJaN.gif"/></div></div></figure><p id="e89d" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">总而言之，这是两种不同的行动。第一个允许您使用两个滑块来更改散点图的缩放。第二个事件允许您检索所选项目的数据并显示一些附加信息。但是在你这样做之前，你需要清理代码。</p></div><div class="ab cl ld le hv lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ik il im in io"><h1 id="9536" class="lk ll ir bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">清理代码</h1><p id="3630" class="pw-post-body-paragraph jz ka ir kb b kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks mm ku kv kw ik bi translated">在这篇文章中，我继续几周前的教程:</p><div class="mn mo gq gs mp mq"><a href="https://betterprogramming.pub/visualize-your-medium-stats-with-svelte-and-javascript-eb1ef7c71a63" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fp"><div class="ms ab mt cl cj mu"><h2 class="bd is gz z fq mv fs ft mw fv fx iq bi translated">用苗条和JavaScript形象化你的中等统计</h2><div class="mx l"><h3 class="bd b gz z fq mv fs ft mw fv fx dk translated">构建5个图表示例来分析你的媒体写作</h3></div><div class="my l"><p class="bd b dl z fq mv fs ft mw fv fx dk translated">better编程. pub</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jx mq"/></div></div></a></div><p id="6605" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">本教程和之前教程中的所有代码都可以在资源库中找到</p><div class="mn mo gq gs mp mq"><a href="https://github.com/el3um4s/medium-stats" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fp"><div class="ms ab mt cl cj mu"><h2 class="bd is gz z fq mv fs ft mw fv fx iq bi translated">GitHub - el3um4s/medium-stats:如何用JavaScript和Svelte获得中等统计</h2><div class="mx l"><h3 class="bd b gz z fq mv fs ft mw fv fx dk translated">现场直播:el3um4s.github.io/medium-stats/，我关于如何获得更好的中等统计数据的实验。我写博客是关于…</h3></div><div class="my l"><p class="bd b dl z fq mv fs ft mw fv fx dk translated">github.com</p></div></div><div class="mz l"><div class="nf l nb nc nd mz ne jx mq"/></div></div></a></div><p id="29e4" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">与第一部分相比，我改变了项目的结构以简化。</p><p id="1856" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">首先，我决定不通过<code class="fe ng nh ni nj b">props</code>传递数据，而是使用一个<a class="ae kx" href="https://svelte.dev/docs#run-time-svelte-store" rel="noopener ugc nofollow" target="_blank">瘦存储</a>。通过这种方式，我可以更合理地对所有方法进行分组，简化它们的修改并消除重复。</p><p id="eaff" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我创建了<code class="fe ng nh ni nj b">StorePartnerProgram.ts</code>文件，并开始导入我需要的TS类型，以及<code class="fe ng nh ni nj b">writable</code>模块:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="85af" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我创建了商店，并准备将其导出:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="4d6d" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">因此，我将我已经谈到的各种方法组合到新文件中，并导入它们:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="cef8" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">最后，我将各种方法添加到存储中:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="4c1e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">在合并了<code class="fe ng nh ni nj b">partnerProgram</code>中的各种方法后，我可以从各种组件中直接调用它们。</p><p id="8eae" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">例如，我可以通过简单地写下以下内容来获得每月文章列表:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure></div><div class="ab cl ld le hv lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ik il im in io"><h1 id="7877" class="lk ll ir bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">更改散点图的缩放比例</h1><p id="b6f7" class="pw-post-body-paragraph jz ka ir kb b kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks mm ku kv kw ik bi translated">清理完代码后，我可以开始思考如何改进各种图形。我需要的第一件事是更详细地了解各种帖子的长度与其产量之间的关系。我认为最好的解决方案可能是添加两个滑块，一个水平，另一个垂直。</p><figure class="kz la lb lc gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nm"><img src="../Images/8ff895458bc763daf27ff6f94ab1d835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NEUIC6x3NLUfOJi8.gif"/></div></div></figure><p id="f730" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">首先要理解如何创建两个滑块。我们可以从零开始创造它们，或者依靠现成的东西。目前我选择了简单的方法。在网上，你可以找到几个有趣的组件。我决定使用西蒙·格尔纳的范围滑块。</p><p id="9078" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我在我的项目中安装组件，使用:</p><pre class="kz la lb lc gu nn nj no np aw nq bi"><span id="6ae5" class="nr ll ir nj b gz ns nt l nu nv">npm install svelte-range-slider-pips --save-dev</span></pre><p id="8424" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">然后我将组件导入到<code class="fe ng nh ni nj b">GoogleChartScatter.svelte</code>:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="ca46" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我可以很容易地使用它:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="3474" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">有几点需要了解。我需要设置数字的范围。最好立即计算它们，以便稍后可以返回到原始视图:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="1a89" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">第二点涉及如何截取两个输入。为此，我创建了一个只有两个元素的数组。第一个表示较小的值，第二个表示较大的值:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="6c7f" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">然后，我只需将这些部分连接起来，使用<a class="ae kx" href="https://svelte.dev/docs#template-syntax-element-directives-bind-property" rel="noopener ugc nofollow" target="_blank"> bind:property </a>指令来…绑定这些值:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="0bea" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">这是给滑块的。我还必须稍微修改一下图表。或者，更好的方法是，将<code class="fe ng nh ni nj b">hAxis</code>和<code class="fe ng nh ni nj b">vAxis</code>属性绑定到滑块的值。</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure></div><div class="ab cl ld le hv lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ik il im in io"><h1 id="844b" class="lk ll ir bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">当我们在图表中选择一个值时添加事件</h1><p id="a819" class="pw-post-body-paragraph jz ka ir kb b kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks mm ku kv kw ik bi translated">第二个事件允许我在选择图表中的元素时看到一些附加信息。所以我切换到<code class="fe ng nh ni nj b">GoogleChartPie.svelte</code>图表，并开始修改它，得到这个:</p><figure class="kz la lb lc gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nw"><img src="../Images/2090ee2b8ab26f56ae9aba3821e7bc2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uk7TCn-1mu7_H84r.gif"/></div></div></figure><p id="0fc9" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">为了在一个瘦组件中生成事件，我使用了<a class="ae kx" href="https://svelte.dev/docs#run-time-svelte-createeventdispatcher" rel="noopener ugc nofollow" target="_blank"> createEventDispatcher </a>:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="6450" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我可以创建一个链接到元素选择的事件，使用:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="8b4d" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我使用Google Chart <a class="ae kx" href="https://developers.google.com/chart/interactive/docs/events#the-select-event" rel="noopener ugc nofollow" target="_blank"> select事件</a>来检索要从组件中传递出去的值。</p><p id="6d6c" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">在继续之前，先说明一下Google Charts的事件。(几乎)任何图表都可以调用3个事件:</p><ul class=""><li id="0eb0" class="nx ny ir kb b kc kd kg kh kk nz ko oa ks ob kw oc od oe of bi translated"><code class="fe ng nh ni nj b">select</code></li><li id="e361" class="nx ny ir kb b kc og kg oh kk oi ko oj ks ok kw oc od oe of bi translated"><code class="fe ng nh ni nj b">error</code></li><li id="01bb" class="nx ny ir kb b kc og kg oh kk oi ko oj ks ok kw oc od oe of bi translated"><code class="fe ng nh ni nj b">ready</code></li></ul><p id="bf46" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">但是如果我们想使用其他事件，我们必须注册它们。例如监听<code class="fe ng nh ni nj b">on mouse over</code>事件:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="ae4e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">还是那个<code class="fe ng nh ni nj b">onmouseout</code>事件:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure></div><div class="ab cl ld le hv lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ik il im in io"><h1 id="533b" class="lk ll ir bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">展示故事的预览</h1><p id="3b10" class="pw-post-body-paragraph jz ka ir kb b kc mi ke kf kg mj ki kj kk mk km kn ko ml kq kr ks mm ku kv kw ik bi translated">我想得到的是一个快速的方法来找出一个数据指的是哪个故事。为此，我还将故事的ID传递给图形:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="a4bc" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">然后我可以编辑<code class="fe ng nh ni nj b">MonthlyAmounts.svelte</code>文件中的组件</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="9f8e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">为了从ID开始获取文章数据，我使用了<code class="fe ng nh ni nj b">getStoryById</code>函数:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="1a2d" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">为了预览，我创建了一个<code class="fe ng nh ni nj b">CardStory.svelte</code>组件:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="d627" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我可以在各种页面上使用该组件，只需将历史数据传递给它即可显示:</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="f8f6" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">好了，今天就到这里。</p><p id="55f7" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl ld le hv lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ik il im in io"><p id="9ef0" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated"><strong class="kb is"> <em class="ol">不要错过我的下一篇文章—报名我的</em> </strong> <a class="ae kx" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="kb is"> <em class="ol">中邮箱列表</em> </strong> </a></p><div class="mn mo gq gs mp mq"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="mr ab fp"><div class="ms ab mt cl cj mu"><h2 class="bd is gz z fq mv fs ft mw fv fx iq bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="mx l"><h3 class="bd b gz z fq mv fs ft mw fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="my l"><p class="bd b dl z fq mv fs ft mw fv fx dk translated">el3um4s.medium.com</p></div></div><div class="mz l"><div class="om l nb nc nd mz ne jx mq"/></div></div></a></div></div><div class="ab cl ld le hv lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ik il im in io"><p id="7d24" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated"><em class="ol">原载于2022年2月10日https://blog.stranianelli.com</em><a class="ae kx" href="https://blog.stranianelli.com/how-to-interact-with-google-chart/" rel="noopener ugc nofollow" target="_blank"><em class="ol"/></a><em class="ol">。</em></p><p id="4f87" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated"><em class="ol">更多内容请看</em> <a class="ae kx" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb is"> <em class="ol">说白了就是</em> </strong> </a> <em class="ol">。报名参加我们的</em> <a class="ae kx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb is"> <em class="ol">免费每周简讯</em> </strong> </a> <em class="ol">。在我们的</em> <a class="ae kx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kb is"> <em class="ol">社区</em> </strong> </a> <em class="ol">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>