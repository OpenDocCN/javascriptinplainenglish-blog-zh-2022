<html>
<head>
<title>How to Detect a Browser or Tab Close Event with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript检测浏览器或标签关闭事件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-detect-browser-tab-close-840a44c82d17?source=collection_archive---------2-----------------------#2022-10-06">https://javascript.plainenglish.io/javascript-detect-browser-tab-close-840a44c82d17?source=collection_archive---------2-----------------------#2022-10-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f351" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何使用JavaScript轻松检测浏览器或标签关闭事件</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/adf2825d15c86ae3863bd94d5c858839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4FSUgDgmJUAqoLKya5DIEQ.png"/></div></div></figure><p id="bf69" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在JavaScript中检测浏览器或标签关闭事件:</p><ol class=""><li id="2dcc" class="lk ll in kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">向全局<code class="fe lt lu lv lw b">window</code>对象添加一个<code class="fe lt lu lv lw b">beforeunload</code>事件监听器。</li><li id="9a6b" class="lk ll in kq b kr lx ku ly kx lz lb ma lf mb lj lp lq lr ls bi translated">在这个监听器中，调用传递给它的<code class="fe lt lu lv lw b">Event</code>对象上的<code class="fe lt lu lv lw b">preventDefault()</code>方法。</li><li id="2c2a" class="lk ll in kq b kr lx ku ly kx lz lb ma lf mb lj lp lq lr ls bi translated">将这个<code class="fe lt lu lv lw b">Event</code>对象的<code class="fe lt lu lv lw b">returnValue</code>属性设置为空字符串(<code class="fe lt lu lv lw b">''</code>)。</li></ol><p id="7796" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lt lu lv lw b">JavaScript</code></p><pre class="kd ke kf kg gt mc lw md me aw mf bi"><span id="9211" class="mg mh in lw b gy mi mj l mk ml">window.addEventListener('beforeunload', (event) =&gt; {<br/>  event.preventDefault();<br/>  event.returnValue = '';<br/>});</span></pre><p id="30ad" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们需要检测浏览器或标签关闭的事件，以提醒用户网页上任何未保存的更改。</p><p id="6af9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们使用<code class="fe lt lu lv lw b">addEventListener()</code>方法将事件处理程序附加到任何DOM对象，比如HTML元素、HTML <code class="fe lt lu lv lw b">document</code>或<code class="fe lt lu lv lw b">window</code>对象。</p><p id="82bb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在即将卸载窗口、文档及其资源之前，触发了<code class="fe lt lu lv lw b">beforeunload</code>事件。此时，文档仍然可见，事件仍然可以取消。</p><p id="5b6d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们必须在处理程序接收的<code class="fe lt lu lv lw b">Event</code>对象上调用<code class="fe lt lu lv lw b">preventDefault()</code>来在浏览器中显示确认对话框。<code class="fe lt lu lv lw b">preventDefault()</code>方法防止事件的默认动作。对于<code class="fe lt lu lv lw b">beforeunload</code>事件，<code class="fe lt lu lv lw b">preventDefault()</code>停止卸载资源、窗口和文档。</p><p id="e0a3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当用户试图关闭浏览器或选项卡时，这段JavaScript代码将导致显示一个确认对话框。这里有一些使用JavaScript的HTML示例。</p><p id="58db" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lt lu lv lw b">HTML</code></p><pre class="kd ke kf kg gt mc lw md me aw mf bi"><span id="e570" class="mg mh in lw b gy mi mj l mk ml">&lt;a href="codingbeautydev.com"&gt;Coding Beauty&lt;/a&gt;<br/>&lt;br /&gt;<br/>Try to close the tab or browser</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/cafce70b2a9ddb99ebba81b5c724ff77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/0*XF2iWazSRtLsnaSR.gif"/></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk">A confirmation dialog is shown when the user tries to close the tab.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/7b1310af85687f48b2c1457034ba4472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/0*_d3xcldpORcQ-JBL.gif"/></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk">A confirmation dialog is shown when the user tries to close the browser.</figcaption></figure><p id="1410" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">注意，<code class="fe lt lu lv lw b">beforeunload</code>事件不仅在浏览器或选项卡关闭时被触发，而且在单击链接、提交表单、按下后退/前进按钮或刷新页面时也被触发。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/c6e679fbe16dc9a6a475f54d6b4b432f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/0*p_QMjitBzZ2fkIUa.gif"/></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk">A confirmation dialog is shown when a link is clicked on the page.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/0da5eb18de5cd29e86189a73722efdf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/0*q3Kl5-l4P4kcHoEw.gif"/></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk">A confirmation dialog is shown when the user tries to refresh the page.</figcaption></figure></div><div class="ab cl ms mt hr mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ig ih ii ij ik"><p id="5c33" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="mz">原载于</em>【codingbeautydev.com】<em class="mz"/></p><h1 id="4ce3" class="nb mh in bd nc nd ne nf ng nh ni nj nk jt nl ju nm jw nn jx no jz np ka nq nr bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph ko kp in kq b kr ns jo kt ku nt jr kw kx nu kz la lb nv ld le lf nw lh li lj ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae na" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>