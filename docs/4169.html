<html>
<head>
<title>How to Split a String at Every Nth Character in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中每隔n个字符拆分一个字符串</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-split-string-every-n-characters-138915fd2265?source=collection_archive---------4-----------------------#2022-11-02">https://javascript.plainenglish.io/javascript-split-string-every-n-characters-138915fd2265?source=collection_archive---------4-----------------------#2022-11-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1080" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何在JavaScript中轻松地将一个字符串分割成N个字符长的子字符串。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/bdfed68deca34033ef3bc3377d7e9dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q8sxsVe2Z9yS6MoFFejsVg.png"/></div></div></figure><p id="b852" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在JavaScript中每N个字符分割一个字符串，调用字符串上的<code class="fe lk ll lm ln b">match()</code>方法，将这个正则表达式:<code class="fe lk ll lm ln b">/.{1, N}g/</code>作为参数传递。<code class="fe lk ll lm ln b">match()</code>方法将返回一个包含子字符串的数组，每个子字符串有N个字符。</p><p id="4473" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="ef8b" class="ls lt in ln b gy lu lv l lw lx">const str = 'codingbeauty';</span><span id="c259" class="ls lt in ln b gy ly lv l lw lx">const result = str.match(/.{1,4}/g) ?? [];</span><span id="38e3" class="ls lt in ln b gy ly lv l lw lx">console.log(result); // [ 'codi', 'ngbe', 'auty' ];</span></pre><p id="5111" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">String</code> <code class="fe lk ll lm ln b"><a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match" rel="noopener ugc nofollow" target="_blank">match()</a></code>方法将一个字符串与一个正则表达式进行匹配，并返回所有匹配的数组。</p><p id="1b62" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">正斜杠<code class="fe lk ll lm ln b">/ /</code>表示正则表达式的开始和结束。</p><p id="ac1d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">.</code>(点)元字符匹配字符串中的任何单个字符。</p><p id="ddbf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">形式为<code class="fe lk ll lm ln b">{min, max}</code>的大括号至少匹配其前面模式的<code class="fe lk ll lm ln b">min</code>个字符，最多匹配其前面模式的<code class="fe lk ll lm ln b">max</code>个字符。在我们的例子中，该模式是<code class="fe lk ll lm ln b">.</code>字符，<code class="fe lk ll lm ln b">min</code>是<code class="fe lk ll lm ln b">1</code>，max是<code class="fe lk ll lm ln b">4</code>，这意味着<code class="fe lk ll lm ln b">.{1, 4}</code>匹配字符串中的1到4个字符。</p><p id="8a45" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们使用<code class="fe lk ll lm ln b">g</code>(全局)标志来匹配字符串中模式的每一次出现。它让正则表达式一直将字符串分割成N个字符，直到它到达末尾。</p><p id="0516" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果没有<code class="fe lk ll lm ln b">g</code>标志，将只匹配模式的第一个实例。</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="f513" class="ls lt in ln b gy lu lv l lw lx">const str = 'codingbeauty';</span><span id="f289" class="ls lt in ln b gy ly lv l lw lx">// "g" flag not specified<br/>const result = str.match(/.{1,4}/) ?? [];</span><span id="16a6" class="ls lt in ln b gy ly lv l lw lx">// [ 'codi' ... ] (single-item array)<br/>console.log(result);</span></pre><p id="8ffe" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">关于正则表达式语法的全面指南，请查看MDN文档中的这个<a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Cheatsheet" rel="noopener ugc nofollow" target="_blank">备忘单</a>。</p><p id="d8f8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果字符串中没有匹配的正则表达式，<code class="fe lk ll lm ln b">match()</code>返回<code class="fe lk ll lm ln b">null</code>。这就是为什么我们在这种情况下使用<a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing" rel="noopener ugc nofollow" target="_blank">空合并操作符</a> ( <code class="fe lk ll lm ln b">??</code>)返回一个空数组(<code class="fe lk ll lm ln b">[]</code>)。</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="61b1" class="ls lt in ln b gy lu lv l lw lx">const str = '';</span><span id="a3ee" class="ls lt in ln b gy ly lv l lw lx">const result = str.match(/.{1,4}/g) || [];</span><span id="e75b" class="ls lt in ln b gy ly lv l lw lx">console.log(result); // []</span></pre><p id="f2f3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果是<code class="fe lk ll lm ln b">null</code>或<code class="fe lk ll lm ln b">undefined</code>，则<code class="fe lk ll lm ln b">??</code>运算符返回其左侧的值。否则，它将返回其右侧的值。</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="032e" class="ls lt in ln b gy lu lv l lw lx">console.log(null ?? 5); // 5</span><span id="4354" class="ls lt in ln b gy ly lv l lw lx">console.log(2 ?? 5); // 2</span><span id="b202" class="ls lt in ln b gy ly lv l lw lx">console.log(undefined ?? 10); // 10</span><span id="64b0" class="ls lt in ln b gy ly lv l lw lx">console.log('' ?? 10); // '' (empty string)</span></pre><p id="042c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果字符串的长度不是N的倍数，数组中的最后一个元素将小于N。</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="39f3" class="ls lt in ln b gy lu lv l lw lx">const str = 'codingbeautydev';</span><span id="16b5" class="ls lt in ln b gy ly lv l lw lx">const result = str.match(/.{1,4}/g) ?? [];</span><span id="bda6" class="ls lt in ln b gy ly lv l lw lx">// 👇 Last item is less than 4 characters long<br/>console.log(result); // [ 'codi', 'ngbe', 'auty', 'dev' ];</span></pre><h1 id="a27c" class="ma lt in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">用<code class="fe lk ll lm ln b">for</code>循环每N个字符分割一个字符串</h1><p id="990f" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">或者，我们可以使用一个<code class="fe lk ll lm ln b">for</code>循环每N个字符分割一个字符串。</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="86f0" class="ls lt in ln b gy lu lv l lw lx">function splitString(str, N) {<br/>  const arr = [];</span><span id="144a" class="ls lt in ln b gy ly lv l lw lx">  for (let i = 0; i &lt; str.length; i += N) {<br/>    arr.push(str.substring(i, i + N));<br/>  }</span><span id="e76f" class="ls lt in ln b gy ly lv l lw lx">  return arr;<br/>}</span><span id="761c" class="ls lt in ln b gy ly lv l lw lx">// [ 'codi', 'ngbe', 'auty' ]<br/>console.log(splitString('codingbeauty', 4));</span><span id="9b28" class="ls lt in ln b gy ly lv l lw lx">// [ 'codi', 'ngbe', 'auty', 'dev' ]<br/>console.log(splitString('codingbeautydev', 4));</span></pre><p id="b089" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们的<code class="fe lk ll lm ln b">splitString()</code>函数将字符串和每个子字符串的长度作为参数。</p><p id="39c7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们使用<code class="fe lk ll lm ln b">for</code>循环以n为增量迭代字符串。在每次迭代中，我们调用<code class="fe lk ll lm ln b">String</code> <code class="fe lk ll lm ln b"><a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring" rel="noopener ugc nofollow" target="_blank">substring()</a></code>方法来获取字符串中索引<code class="fe lk ll lm ln b">i</code>和索引<code class="fe lk ll lm ln b">i + N</code> exclusive之间的子字符串，并将子字符串添加到结果数组中。</p><h1 id="4faa" class="ma lt in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">用<code class="fe lk ll lm ln b">reduce()</code>方法每N个字符分割一个字符串</h1><p id="e264" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">每当你看到一个<code class="fe lk ll lm ln b">for</code>循环被用来处理输入以获得输出，这是一个信号，表明代码可以被重构，使用一个或多个<code class="fe lk ll lm ln b">Array</code>方法变得更具功能性和声明性。</p><p id="8226" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看看这个每N个字符分割一个字符串的方法，这里我们使用了<code class="fe lk ll lm ln b"><a class="ae lz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="noopener ugc nofollow" target="_blank">reduce()</a></code>方法来创建一些漂亮的函数魔术:</p><pre class="kd ke kf kg gt lo ln lp lq aw lr bi"><span id="389f" class="ls lt in ln b gy lu lv l lw lx">const splitString = (str, N) =&gt;<br/>  [...str]<br/>    .reduce(<br/>      (substrings, ch) =&gt;<br/>        (substrings.at(-1)?.length ?? N) &lt; N<br/>          ? [...substrings.slice(0, -1), substrings.at(-1) + ch]<br/>          : [...substrings, ch],<br/>      []<br/>    );</span><span id="66c5" class="ls lt in ln b gy ly lv l lw lx">// [ 'codi', 'ngbe', 'auty' ]<br/>console.log(splitString('codingbeauty', 4));</span><span id="f1fe" class="ls lt in ln b gy ly lv l lw lx">// [ 'codi', 'ngbe', 'auty', 'dev' ]<br/>console.log(splitString('codingbeautydev', 4));</span></pre><p id="ea83" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是我不推荐这样做；就性能而言，它明显比以前的方法慢(30倍以上)，并且可能更难理解。我把它包括进来是因为它是一个优雅的<a class="ae lz" href="https://codingbeautydev.com/blog/javascript-one-liners/" rel="noopener ugc nofollow" target="_blank">一行程序</a>解决方案。</p></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="2940" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nd">最初发表于</em><a class="ae lz" href="https://cbdev.link/e162f3" rel="noopener ugc nofollow" target="_blank"><em class="nd">codingbeautydev.com</em></a></p><h1 id="573e" class="ma lt in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lz" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">注册</strong> </a>即可免费领取一份。</p></div></div>    
</body>
</html>