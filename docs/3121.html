<html>
<head>
<title>How to Read and Write (Asynchronously) in a File Using FS (File System) Module in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Node.js中使用FS(文件系统)模块读写(异步)文件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-read-and-write-asynchronously-in-a-file-using-fs-file-system-module-in-node-js-551351aa1842?source=collection_archive---------7-----------------------#2022-08-02">https://javascript.plainenglish.io/how-to-read-and-write-asynchronously-in-a-file-using-fs-file-system-module-in-node-js-551351aa1842?source=collection_archive---------7-----------------------#2022-08-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3587" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这比你想象的要简单</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5df687501c532f24adfb234bf9a170b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qpSGfM3laeKmR9Qt"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@benearlweber?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben Weber</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="037d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">网上关于Node.js和文件系统(fs)的文章足够多吗？</p><p id="02e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还是因为编程语言不断频繁进化，编程中的一些概念在互联网上变得很难找到？</p><p id="08d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近，我想在我的Windows电脑上运行一个Linux环境。我很难在网上找到解决的方法。如果你正面临同样的挑战，这是我写的一篇文章。</p><p id="3e09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，对于Node.js中的文件系统(fs)，我搜索了互联网，注意到关于如何在Node.js中使用fs读写文件的文章没有区分这些方法——readFile()和readFileSync()、writeFile()和writeFileSync()。</p><p id="3847" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，这篇文章。</p><p id="dd95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将学习如何异步读写文件，以及如何使用readFile()、readFileSync()、writeFile()和writeFileSync()方法，包括它们之间的差异。</p><h2 id="5f01" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">readFile()和readFileSync()的区别；writeFile()和writeFileSync()</h2><p id="17b1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在Node.js中，readFile()和readFileSync()是fs方法，可用于在不打开文件的情况下读取文件内容。然而，这两个Node.js fs方法之间存在差异。</p><p id="c476" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您希望运行同步操作并希望所有其他操作在完成之前都被阻止时，可以使用readFileSync()方法。方法意味着一次只能读取一个文件，并且在读取完文件之前，不能同时读取和写入文件。</p><p id="1688" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着您不能同时异步执行多个操作。<br/>readFile()fs方法不同。您使用fs方法异步执行操作。用这种方法，可以一次读取一个文件和写入一个文件。</p><p id="4dda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">writeFile()和writeFileSync() Node.js fs方法也会发生同样的情况。</p><p id="67c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">writeFile()方法允许您写入文件，在写入文件的同时，您还可以运行readFile() fs方法来读取文件的内容或一次做一些其他事情——异步地。</p><p id="91f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Node.js作为一个运行时环境，从浏览器中脱颖而出的一个原因是它能够执行异步操作。</p><p id="61cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看一些样本代码。</p><p id="e0fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在开始之前，如果您还没有安装Node.js，请在您的机器上安装它。每次你想运行一个代码时，先保存代码，然后用Node运行你的JavaScript文件，如下所示:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="adb9" class="ls lt iq mr b gy mv mw l mx my">node index.js</span></pre><h2 id="69dd" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">如何使用writeFileSync() Node.js fs方法写入文件</h2><p id="5a34" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，打开您的VS代码(或者您选择的其他IDE)并创建一个文件夹。将文件夹命名为文本。在文件夹中，创建两个文件。将第一个文件命名为index.js，将第二个文件命名为text.txt。</p><p id="f34a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在index.js中编写JavaScript代码，第二个文件将是您使用Node.js writeFileSync()方法编写文本的位置。</p><p id="1ada" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它是这样工作的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="5a52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用Node.js写入文件，请在代码的第一行使用缩写为fs的文件系统模块。为了让fs工作，需要包含require关键字。</p><p id="d909" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您可以访问文件系统中的所有方法。</p><p id="32f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，将fs存储在一个变量中。这里我用了fs(作为变量)— const fs。它会将文件系统模块中的所有方法存储在fs变量中。</p><p id="a547" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，除了fs之外，您还可以为变量指定一个不同的名称。第三行代码使用了writeFileSync()方法。然后从根文件夹中跟踪要写入的text.txt文件的位置。/text/text.txt .圆点表示文件夹text folder和text.txt文件在同一个目录下。</p><p id="c88a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来是你想在text.txt文件中写什么——你要不断尝试，直到你成功。</p><p id="8781" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，您可以将想要写入的内容存储在一个变量中，然后在writeFileSync中传递该变量，而不是像上面那样对text.txt文件中的内容进行硬编码，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="6db6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">utf-8有助于确保您的文本转换成英文字符，即使这些字符是英文字母。</p><h2 id="ec1d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">如何使用readFileSync() Node.js fs方法读取文件</h2><p id="b53a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">下面是如何使用readFileSync() Node.js fs方法读取文件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="a0ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">readFileSync()遵循与writeFileSync()方法相同的代码模式。</p><h2 id="26fc" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">如何异步读取一个文件并写入另一个文件</h2><p id="e5fe" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">使用Node.js fs模块，您可以读取一个文件的内容，并写入另一个文件，而不会互相阻塞。</p><p id="dfb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建另一个。txt文件，并将其命名为input.txt。</p><p id="e0ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在input.txt文件中，写入—浏览。这是我对年轻时的自己反复说的话。</p><p id="d6dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在运行代码来读取input.txt文件中的内容，同时在text.txt文件中写入内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="50f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当计算机试图读写输入和文本文件时，您将首先看到显示在终端上的最后一行代码。然后，您将看到text.txt文件被读取，input.txt文件被写入。</p><p id="7324" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码遵循JavaScript中的函数模式。它还使用了if/else语句。如果您不知道JavaScript语法，我建议您在深入学习Node.js之前先学习JS。</p><p id="15db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，当您希望代码异步运行时，不能使用readFileSync()或writeFileSync() fs方法。</p><p id="dbb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">附言</strong> <em class="nb">作家面临的挑战可能会让他们终生无法写作……久坐导致的慢性背痛、长时间盯着屏幕导致的眼睛问题、写作时手指窒息等等。如果你想继续得到这种类型的文章，你可以通过成为</em> <a class="ae kv" href="https://sabitololade.medium.com/subscribe" rel="noopener"> <em class="nb">媒体订户来支持我。每月5美元。你的一部分订阅费归我</em> </a> <em class="nb">。</em></p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><p id="2ac2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nb">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nb">plain English . io</em></strong></a><em class="nb">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nb">免费周报</em> </strong> </a> <em class="nb">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nb">Twitter</em></strong></a><em class="nb">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nb">LinkedIn</em></strong></a><em class="nb">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nb">社区不和谐</em> </strong> </a> <em class="nb">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nb">人才集体</em> </strong> </a> <em class="nb">。</em></p></div></div>    
</body>
</html>