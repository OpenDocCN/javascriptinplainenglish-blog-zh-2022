<html>
<head>
<title>My First Unit Test in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的第一个TypeScript单元测试</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/my-first-unit-test-in-typescript-40a1e62d5a61?source=collection_archive---------10-----------------------#2022-04-19">https://javascript.plainenglish.io/my-first-unit-test-in-typescript-40a1e62d5a61?source=collection_archive---------10-----------------------#2022-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ac23" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用摩卡和柴。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/424484ba5fc2f55db1f990645dc4e098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qrz09Hg9x0mjOvsdorwu5w.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@wanderlustphotography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Elizabeth Gottwald</a> on <a class="ae kv" href="https://unsplash.com/s/photos/uyuni?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6ba9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大家好，我希望你们今天都过得愉快。这是系列文章<a class="ae kv" href="https://medium.com/geekculture/why-typescript-and-php-are-good-friends-964360fb75f6" rel="noopener">为什么TypeScript和PHP是好朋友</a>的第一篇，我们将从头开始把复杂的静态类型、面向对象的代码库从PHP转录到TypeScript。</p><p id="6229" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天，我们将学习:</p><ul class=""><li id="103e" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">如何在GitHub上建立一个类型脚本代码库</li><li id="bcf5" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">用TypeScript编写一个简单的类</li><li id="f960" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">与<a class="ae kv" href="https://mochajs.org/" rel="noopener ugc nofollow" target="_blank">摩卡</a>和<a class="ae kv" href="https://www.chaijs.com/" rel="noopener ugc nofollow" target="_blank">柴</a>一起做一些测试驱动开发TDD</li></ul><p id="3b99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快乐编码和学习！但是首先，让我说几句开场白。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="0aa7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">距离我上次使用TypeScript已经有很长时间了——大约四年前。在这段时间里，我主要关注的是不同的web开发堆栈，但感觉好像我处于一个很好的位置，可以将我的编程技能从一个堆栈转移到另一个堆栈。</p><p id="2275" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想这一系列的帖子将有助于我在旅途中恢复记忆。这是一个将你的PHP技能转移到TypeScript的好机会，反之亦然！</p><p id="35ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你是一个完全的新手，刚刚开始学习TypeScript，那么可以考虑的一个好方法就是阅读教程和观看视频，以及从容易到困难地解决问题。</p><p id="e77f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一次迈出一步非常有效，尤其是在你成为软件开发人员的职业道路的开始阶段。</p><p id="6adc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，如果你有多年的经验，或者只是对不同的学习方式感到好奇，你可能会想使用一种基于同化的学习方式——也就是说主要基于观察和思考。</p><div class="mn mo gp gr mp mq"><a href="https://medium.com/geekculture/a-react-chessboard-with-redux-and-hooks-in-few-lines-6009cb724bb" rel="noopener follow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">一种反作用棋盘</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">React在2021年非常酷，并且随着时间的推移会越来越好</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">medium.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne kp mq"/></div></div></a></div><p id="aba8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我假设你熟悉编程的基础，并且从通才的角度探索一门新的语言感觉很舒服。如果这听起来像是您没有错过在GitHub上浏览趋势类型脚本库的机会，同时注意编码约定、目录结构等等。</p><div class="mn mo gp gr mp mq"><a href="https://github.com/trending/typescript" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">一起打造更好的软件</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">GitHub是人们构建软件的地方。超过7300万人使用GitHub来发现、分享和贡献超过…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">github.com</p></div></div><div class="mz l"><div class="nf l nb nc nd mz ne kp mq"/></div></div></a></div><p id="5de5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">说了这么多，让我们切入正题。</p><h1 id="6b8b" class="ng nh iq bd ni nj nk nl nm nn no np nq jw nr jx ns jz nt ka nu kc nv kd nw nx bi translated">第一次提交</h1><p id="9b99" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">让我们看看第一次提交。</p><p id="14b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/chesslablab/ts-chess/commit/29e681dec04fb23ddfaa52585a18ab2e9302e3cd" rel="noopener ugc nofollow" target="_blank">第一次提交</a>到<a class="ae kv" href="https://github.com/chesslablab/ts-chess" rel="noopener ugc nofollow" target="_blank">chess lab/ts-chess</a>repo包括成功运行这个项目的第一个单元测试所需的所有东西。</p><p id="23d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，代码库是在两个配置文件的帮助下建立的:<code class="fe od oe of og b">package.json</code>和<code class="fe od oe of og b">tsconfig.json</code>。我们将使用Mocha和Chai来编写单元测试。</p><p id="a70c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请克隆回购。</p><pre class="kg kh ki kj gt oh og oi oj aw ok bi"><span id="3e85" class="ol nh iq og b gy om on l oo op">$ git clone <a class="ae kv" href="mailto:git@github.com" rel="noopener ugc nofollow" target="_blank">git@github.com</a>:chesslablab/ts-chess.git</span></pre><p id="bc11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后检查提交日志以查看更早的提交。</p><pre class="kg kh ki kj gt oh og oi oj aw ok bi"><span id="3ec1" class="ol nh iq og b gy om on l oo op">$ git log --oneline<br/>29e681d (HEAD -&gt; master, origin/master, origin/HEAD) Implemented the Square class</span></pre><p id="c109" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后结帐到第一个。</p><pre class="kg kh ki kj gt oh og oi oj aw ok bi"><span id="076c" class="ol nh iq og b gy om on l oo op">$ git checkout 29e681d<br/>HEAD is now at 29e681d Implemented the Square class</span></pre><p id="c282" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要忘记安装npm依赖项。</p><pre class="kg kh ki kj gt oh og oi oj aw ok bi"><span id="0d05" class="ol nh iq og b gy om on l oo op">$ npm install</span></pre><p id="b67c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您已经准备好在本地运行单元测试了。</p><pre class="kg kh ki kj gt oh og oi oj aw ok bi"><span id="2eeb" class="ol nh iq og b gy om on l oo op">$ npm test</span><span id="1b51" class="ol nh iq og b gy oq on l oo op">&gt; test<br/>&gt; mocha -r ts-node/register tests/**/*.test.ts</span><span id="4457" class="ol nh iq og b gy oq on l oo op">Square.validate()<br/>    ✔ foo is not valid<br/>    ✔ e4 is valid</span><span id="e8db" class="ol nh iq og b gy oq on l oo op">2 passing (6ms)</span></pre><p id="428f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你可能想喝一口水。</p><h1 id="edc8" class="ng nh iq bd ni nj nk nl nm nn no np nq jw nr jx ns jz nt ka nu kc nv kd nw nx bi translated">TypeScript vs PHP</h1><p id="2838" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated"><code class="fe od oe of og b">Square.test.ts</code>的产量看起来很大，但实际上是什么呢？</p><p id="6cb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">答案就在这两个文件中:</p><ul class=""><li id="1788" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="https://github.com/chesslablab/ts-chess/blob/29e681dec04fb23ddfaa52585a18ab2e9302e3cd/src/PGN/AN/Square.ts" rel="noopener ugc nofollow" target="_blank">src/PGN/安/Square.ts </a></li><li id="c2de" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://github.com/chesslablab/ts-chess/blob/29e681dec04fb23ddfaa52585a18ab2e9302e3cd/tests/unit/PGN/AN/Square.test.ts" rel="noopener ugc nofollow" target="_blank">测试/单位/PGN/安/平方</a></li></ul><p id="2490" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我刚刚开始将源存储库的目录结构复制到目标存储库。我从这两个开始，因为他们简单，我想。</p><p id="61d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe od oe of og b">Square.ts</code>是PGN <a class="ae kv" href="https://en.wikipedia.org/wiki/Algebraic_notation_(chess)" rel="noopener ugc nofollow" target="_blank">代数符号(AN) </a>的一种构建模块，它允许确定一个特定的字符串值是否可以标识棋盘方格。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/d3e39e962e510b414c92b2b00d0faf53.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*tiK0KDIfvIaY6YDNleBakg.jpeg"/></div></figure><p id="9039" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它是一个静态类，这意味着它不能被实例化，但是可以通过单元测试中显示的类名直接访问。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi os"><img src="../Images/377cdbba486bbb7c7aa3142510599830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*B49tlteb82amRC97idTKpA.jpeg"/></div></figure><p id="1557" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们通过比较上面的两个文件来看看PHP和TypeScript有多么相似或不同。换句话说，他们会在这种场合成为好朋友吗？</p><p id="f5c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是PHP对应部分的样子。</p><ul class=""><li id="75fa" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="https://github.com/chesslablab/php-chess/blob/master/src/PGN/AN/Square.php" rel="noopener ugc nofollow" target="_blank">src/PGN/安/Square.php </a></li><li id="6d68" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://github.com/chesslablab/php-chess/blob/master/tests/unit/PGN/AN/SquareTest.php" rel="noopener ugc nofollow" target="_blank">测试/单元/PGN/安/平方测试. php </a></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/c147887401105e7b4ba88abd2ed27a3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*FypH_xORu_6mvPg3kOollw.jpeg"/></div></figure><p id="d375" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而这是用<a class="ae kv" href="https://phpunit.de/" rel="noopener ugc nofollow" target="_blank"> PHPUnit </a>写的对应单元测试。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/a827e8d4355db288d697bd30d7d11daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*cjIDFXC2sRctaxjjHY7q8Q.jpeg"/></div></figure><p id="40a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止一切顺利，我们正在接近目标。</p><h1 id="c96d" class="ng nh iq bd ni nj nk nl nm nn no np nq jw nr jx ns jz nt ka nu kc nv kd nw nx bi translated">他们看起来很相似，不是吗？</h1><p id="5692" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">这是使PHP类似于TypeScript的第一次良好尝试，反之亦然，但是乍一看，上面描述的例子之间似乎仍然存在显著的差异。</p><p id="acde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，<code class="fe od oe of og b">Square.php</code>实现了<code class="fe od oe of og b">ValidationInterface</code>并扩展了<code class="fe od oe of og b">AbstractNotation</code>类，而<code class="fe od oe of og b">Square.ts</code>没有。另外，如果正则表达式不匹配，那么<code class="fe od oe of og b">Square::validate('foo')</code>抛出一个定制的PHP异常，而它的TypeScript副本<code class="fe od oe of og b">Square.validate('foo')</code>只是返回一个布尔值。</p><p id="264d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">别担心，TypeScript和PHP是最好的朋友，我们将在接下来的文章中解决这两个问题。</p><p id="8e4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一步一个脚印，一点一点来。</p><p id="9dbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">敬请期待！</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="b680" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是“为什么TypeScript和PHP是好朋友”系列的更多帖子。</p><div class="mn mo gp gr mp mq"><a href="https://medium.com/codex/static-methods-not-supported-in-typescript-interfaces-54a01e1e46ea" rel="noopener follow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">TypeScript接口中不支持静态方法</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">暂时</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">medium.com</p></div></div><div class="mz l"><div class="ov l nb nc nd mz ne kp mq"/></div></div></a></div><div class="mn mo gp gr mp mq"><a href="https://programarivm.medium.com/i-threw-a-custom-error-in-typescript-756fdd1d569c" rel="noopener follow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">我在TypeScript中抛出了一个自定义错误</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">也就是说PHP中的一个异常</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">programarivm.medium.com</p></div></div><div class="mz l"><div class="ow l nb nc nd mz ne kp mq"/></div></div></a></div><p id="7b2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ox">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ox">说白了就是io </em> </strong> </a> <em class="ox">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ox">免费周报</em> </strong> </a> <em class="ox">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ox">Twitter</em></strong></a><em class="ox">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ox">LinkedIn</em></strong></a><em class="ox">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ox">社区</em> </strong> </a> <em class="ox">。</em></p></div></div>    
</body>
</html>