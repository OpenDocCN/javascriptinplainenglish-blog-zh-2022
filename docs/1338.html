<html>
<head>
<title>Create an RxJS Observable with Interval</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个有间隔的RxJS可观察值</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-an-rxjs-observable-with-interval-669f1ef48b26?source=collection_archive---------3-----------------------#2022-03-17">https://javascript.plainenglish.io/create-an-rxjs-observable-with-interval-669f1ef48b26?source=collection_archive---------3-----------------------#2022-03-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><h2 id="c44f" class="il im in bd b dl io ip iq ir is it dk iu translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/@lorenzozar/list/rxjs-39bc4f4110ec" rel="noopener"> RxJS </a></h2><div class=""/><p id="7a3f" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">在另一篇文章中，我们<a class="ae kr" rel="noopener ugc nofollow" target="_blank" href="/create-an-rxjs-observable-98b90ecfda8e">创建了一个简单的可观察对象</a>。但是，建议使用内置的创建函数。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/3eff48432120a56f96cbc414176c7c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wX5E5_Yf-D5m_FBWWFA8lw.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">Create an RxJS Observable using interval</figcaption></figure><p id="d303" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">如<a class="ae kr" href="https://rxjs.dev/guide/observable#creating-observables" rel="noopener ugc nofollow" target="_blank">文档</a>中所述，“最常见的是，使用创建函数来创建可观察值，如of、from、interval等”。</p><p id="177f" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">按照这个建议，我们将使用RxJS <code class="fe lj lk ll lm b">interval</code>函数通过使用内置的创建函数来创建一个可观察对象。还是那句话，用Angular之类的框架还是React之类的库都无所谓。RxJS是独立的。</p><h1 id="2a9c" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">创造一个可观察的</h1><p id="130f" class="pw-post-body-paragraph jt ju in jv b jw ml jy jz ka mm kc kd ke mn kg kh ki mo kk kl km mp ko kp kq ig bi translated">同样，创建可观察值的过程相当简单。</p><p id="5840" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">首先我们需要从RxJS导入<code class="fe lj lk ll lm b">interval</code>。</p><p id="29f2" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated"><code class="fe lj lk ll lm b">interval</code>内置函数是一个简单的函数，它“<em class="li">创建一个观察对象，该观察对象每隔指定的时间间隔</em>”，<a class="ae kr" href="https://rxjs.dev/api/index/function/interval" rel="noopener ugc nofollow" target="_blank"> rxjs.dev </a>。</p><p id="375d" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">换句话说，多亏了<code class="fe lj lk ll lm b">interval</code>，我们将获得一系列(可观察到的)上升数字。可观测的将发射整数，“T21”，在这些发射之间有你选择的恒定时间间隔。</p><p id="035f" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">在下面这段代码中，我们创建了一个每秒(1000毫秒)发出一个序列号的可观察对象。</p><pre class="kt ku kv kw gt mq lm mr ms aw mt bi"><span id="3b65" class="mu lo in lm b gy mv mw l mx my">import { interval } from 'rxjs';</span><span id="f004" class="mu lo in lm b gy mz mw l mx my">const myObservable = interval(1000);</span></pre><p id="d9fa" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">事实上，什么都不会发生，因为我们需要订阅一个可观察对象来消费它的值。</p><h1 id="9b36" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">订阅可观察的</h1><p id="6a83" class="pw-post-body-paragraph jt ju in jv b jw ml jy jz ka mm kc kd ke mn kg kh ki mo kk kl km mp ko kp kq ig bi translated">第一步需要我们创造一个可观察的。现在，我们希望将来自这个可观察对象的值记录到控制台。</p><pre class="kt ku kv kw gt mq lm mr ms aw mt bi"><span id="e25a" class="mu lo in lm b gy mv mw l mx my">import { interval } from 'rxjs';</span><span id="e9b6" class="mu lo in lm b gy mz mw l mx my">const myObservable = interval(1000);</span><span id="aeb6" class="mu lo in lm b gy mz mw l mx my">myObservable.subscribe((integer) =&gt; {<br/>  console.log(integer);<br/>});</span></pre><p id="d4bd" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">就这么简单。myObservable现在每秒发出一个整数流，你可以在控制台中看到。</p><p id="fc91" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">即使我们没有使用任何可观察通知(<code class="fe lj lk ll lm b">next</code>、<code class="fe lj lk ll lm b">error</code>和<code class="fe lj lk ll lm b">complete</code>)，可观察对象也在隐式使用<code class="fe lj lk ll lm b">next</code>发送数据。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi na"><img src="../Images/cc3f1da61cc8c1503ace7b2143fa9fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/0*VGE5oV0795BovUWy.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">Create an Observable using RxJS interval</figcaption></figure><h1 id="e7ef" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">RxJS区间优势</h1><p id="1a18" class="pw-post-body-paragraph jt ju in jv b jw ml jy jz ka mm kc kd ke mn kg kh ki mo kk kl km mp ko kp kq ig bi translated">像<code class="fe lj lk ll lm b">interval</code>这样的内置观测器比定制观测器有几个优点。</p><p id="d57b" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">如上所述，它们是现成的，易于使用。除了这些优势之外，一些内置的Observables在完成后会自动取消订阅。</p><p id="f0c7" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">请记住，为了避免内存泄漏，我们应该在结束时停止可观察到的内容。因为myObservable永远不会完成，所以想办法完成或者取消订阅那个可观察对象。</p><p id="f451" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">另一方面，一些内置的创建功能，如<code class="fe lj lk ll lm b">of</code>和<code class="fe lj lk ll lm b">from</code>会自行完成。在<a class="ae kr" href="https://www.vitainbeta.org/2022/02/06/rxjs-primer/" rel="noopener ugc nofollow" target="_blank"> RxJS Primer </a>上查看更多信息，或者在<a class="ae kr" href="https://twitter.com/lorenzozar" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上联系我。</p><p id="3124" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated">接下来:<a class="ae kr" href="https://betterprogramming.pub/rxjs-declarative-pattern-in-angular-cafba3983d21" rel="noopener ugc nofollow" target="_blank"> RxJS角度声明模式</a></p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><p id="6081" class="pw-post-body-paragraph jt ju in jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ig bi translated"><em class="li">更多内容看</em> <a class="ae kr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jv ix"> <em class="li">说白了。报名参加我们的</em> <a class="ae kr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jv ix"> <em class="li">免费周报</em> </strong> </a> <em class="li">。关注我们关于</em><a class="ae kr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jv ix"><em class="li">Twitter</em></strong></a><em class="li">和</em><a class="ae kr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jv ix"><em class="li">LinkedIn</em></strong></a><em class="li">。加入我们的</em> <a class="ae kr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jv ix"> <em class="li">社区</em> </strong> </a> <em class="li">。</em></strong></a></p></div></div>    
</body>
</html>