<html>
<head>
<title>How to Sanitize Data in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何整理React中的数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-sanitize-data-in-react-b5111e227978?source=collection_archive---------4-----------------------#2022-10-18">https://javascript.plainenglish.io/how-to-sanitize-data-in-react-b5111e227978?source=collection_archive---------4-----------------------#2022-10-18</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="c658" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">关于如何利用TypeScript在React应用程序中整理数据的教程</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/837d4e2d64a04621843a9514abee62f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*syAhROtQp8wdW3BF1anWBA.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@tofi?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Tobias Fischer</a> on <a class="ae kw" href="https://unsplash.com/s/photos/clean-data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e367" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">每个现代ReactJS应用程序都以某种方式处理数据。我们获取数据，并让人们在整个应用程序中与之交互。</p><p id="7989" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是，如果我们不小心什么数据进入我们的网站，它可能会导致我们的应用程序失败。</p><blockquote class="lt lu lv"><p id="97b4" class="kx ky lw kz b la lb js lc ld le jv lf lx lh li lj ly ll lm ln lz lp lq lr ls ik bi translated">应用程序在运行时崩溃的主要原因之一是坏数据。</p></blockquote><p id="eec7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我们将看到一种在React应用程序中净化数据的方法。</p><h1 id="6d36" class="ma mb ir bd mc md me mf mg mh mi mj mk jx ml jy mm ka mn kb mo kd mp ke mq mr bi translated">问题是</h1><p id="b110" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated">你不应该相信任何人。也许您希望远程API返回如下所示的数据。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mx my l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">userData.ts</figcaption></figure><p id="2502" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您有一个组件，它以下面的方式显示这两段数据。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mx my l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">SomeComponent.tsx</figcaption></figure><p id="d24c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在出于某种原因，后端的开发人员想，好吧，让我们稍微改变一下数据的结构，使其更加扁平，并将其改为</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mx my l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">changeUserData.ts</figcaption></figure><p id="fd22" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，一旦他们这么做了，你的应用程序就会在运行时失败，因为它不知道结构已经被改变了。</p><p id="78fa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您将返回到桌面并解决问题，但是您的用户将会看到一个崩溃的应用程序。</p><pre class="kh ki kj kk gu mz na nb nc aw nd bi"><span id="7f2e" class="ne mb ir na b gz nf ng l nh ni">Error: Cant't read name of undefined</span></pre><p id="80c3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">避免这种事故的一个方法是</p><pre class="kh ki kj kk gu mz na nb nc aw nd bi"><span id="a294" class="ne mb ir na b gz nf ng l nh ni">&lt;div&gt; {user?.basicInfo?.name} &lt;/div&gt;</span></pre><p id="8b93" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是你必须把这些标志放在不干净的地方，对吗？</p><h1 id="3247" class="ma mb ir bd mc md me mf mg mh mi mj mk jx ml jy mm ka mn kb mo kd mp ke mq mr bi translated">利用Typescript。</h1><p id="b505" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated">现在让我们像下面这样定义我们的用户模型</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mx my l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">UserInterface.ts</figcaption></figure><p id="08fa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以这个<code class="fe nj nk nl na b"><strong class="kz is">initUser</strong></code>方法可以用来创建一个用户实例，并且如果我们需要的话，<code class="fe nj nk nl na b">options</code>参数使得传递参数变得很容易。</p><p id="553c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果我们不传递任何东西，我们会用默认值取回对象。</p><p id="1372" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因此，在将数据推入组件之前，您将通过<code class="fe nj nk nl na b">initUser</code>方法传递数据并保持冷静。</p><p id="690e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">或者你可以用钩子。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mx my l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">useCleanUserData.ts</figcaption></figure><p id="cbe8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这样，我们就不需要担心API数据是否干净了。</p><p id="9652" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您也可以对redux使用相同的方法。利用<code class="fe nj nk nl na b">selectors</code>，以便数据在进入组件之前被清理。</p></div><div class="ab cl nm nn hv no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ik il im in io"><p id="5359" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="lw">更多内容请看</em><a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lw">plain English . io</em></strong></a><em class="lw">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="lw">免费周报</em> </strong> </a> <em class="lw">。关注我们关于</em><a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lw">Twitter</em></strong></a><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lw">LinkedIn</em></strong></a><strong class="kz is"><em class="lw"/></strong><a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lw">YouTube</em></strong></a><strong class="kz is"><em class="lw">，以及</em></strong><em class="lw"/><a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="lw">不和</em> </strong> </a>  <em class="lw">对成长黑客感兴趣？检查</em> <a class="ae kw" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="lw">电路</em> </strong> </a> <strong class="kz is"> <em class="lw">。</em> </strong></p></div></div>    
</body>
</html>