<html>
<head>
<title>How to Customize the Angular Material Button</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何自定义有角度的材质按钮</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/indepth-guide-for-customizing-angular-material-button-3cf27bf5aeee?source=collection_archive---------5-----------------------#2022-06-11">https://javascript.plainenglish.io/indepth-guide-for-customizing-angular-material-button-3cf27bf5aeee?source=collection_archive---------5-----------------------#2022-06-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="37a4" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于自定义角度材质按钮的深入指导。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d7fe73cea814f66691b91de66d856688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9np-F4QeR6b-fJu0VCiAvg.jpeg"/></div></div></figure><h2 id="0fc8" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">介绍</h2><p id="3f2d" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">几乎所有应用程序都需要修改第三方库提供的组件。这些修改通常是为了:</p><ol class=""><li id="e19a" class="md me in lm b ln mf lq mg kx mh lb mi lf mj mc mk ml mm mn bi translated">改变风格</li><li id="bea3" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">添加缺失的特征</li></ol><p id="5837" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">对于这样的库来说，提供容易实现这些修改的方法是非常重要的。</p><p id="c975" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">在本教程的第一部分，我们将学习如何修改样式，以便我们的更改不会与Angular Material library的未来更新相冲突。作为奖励，我将提供一份你在改变风格时应该遵循的经验法则清单。</p><p id="b2ef" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">在本教程的第二部分，我们将学习所有自定义有角度的材质按钮的方法，并决定哪种更好。</p><p id="82c0" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">在本文结束时，您将对以下主题有所了解:</p><ol class=""><li id="0854" class="md me in lm b ln mf lq mg kx mh lb mi lf mj mc mk ml mm mn bi translated">如何创建属性指令</li><li id="d04c" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">如何创建动态组件</li><li id="7253" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">何时创建组件，何时创建指令</li><li id="cd0c" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">如何有效地修改任何第三方库的组件，以添加功能和更改样式</li></ol><h2 id="a943" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">角形材料按钮</h2><p id="1e01" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">Angular Material的按钮已经通过材料设计和油墨波纹得到了增强，并且它们也有一系列的展示选项。</p><p id="28be" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">您可以通过针对不同的情况和需求使用不同的属性指令来更改按钮的外观和感觉。例如，<code class="fe mw mx my mz b">mat-button</code>是一个带有文本内容的矩形按钮，<code class="fe mw mx my mz b">mat-raised-button</code>与<code class="fe mw mx my mz b">mat-button</code>相同，但带有仰角，而<code class="fe mw mx my mz b">mat-icon-button</code>是圆形的，它意味着包含一个图标。你可以在<a class="ae na" href="https://material.angular.io/components/button/overview" rel="noopener ugc nofollow" target="_blank">官方网站</a>上查看所有变种。</p><p id="f658" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">并且有3种主题颜色提供给所有变体:<code class="fe mw mx my mz b">primary</code>、<code class="fe mw mx my mz b">accent</code>和<code class="fe mw mx my mz b">warn</code>。</p><p id="b56a" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，即使有这么多的变体和选项，我们可能需要修改默认的角形材料按钮来实现一个功能或风格的改变。让我们看看并学习如何有效地进行这两种改变。</p><h2 id="8d0c" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">如何改变风格</h2><p id="25a4" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">在讨论如何改变样式之前，让我们先了解一些规则，以避免任何冲突性的改变。这些规则整合自<a class="ae na" href="https://material.angular.io/guide/customizing-component-styles" rel="noopener ugc nofollow" target="_blank">定制组件样式指南</a>。</p><h2 id="44b8" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">经验法则</h2><p id="93aa" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">每当您想要更改任何有角度的材料组件的样式时，请记住以下规则。</p><ol class=""><li id="0eec" class="md me in lm b ln mf lq mg kx mh lb mi lf mj mc mk ml mm mn bi translated">为组件的宿主元素定义自定义样式</li><li id="c74f" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">改变影响组件<code class="fe mw mx my mz b">margin</code>、<code class="fe mw mx my mz b">position</code>、<code class="fe mw mx my mz b">top</code>、<code class="fe mw mx my mz b">left</code>、<code class="fe mw mx my mz b">transform</code>、<code class="fe mw mx my mz b">z-index</code>等位置或布局的样式。</li><li id="d2c1" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">通过定义一个自定义CSS类并将其应用于组件的宿主元素来应用上述样式修改</li><li id="2239" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">不要改变影响组件<code class="fe mw mx my mz b">padding</code>、<code class="fe mw mx my mz b">height</code>、<code class="fe mw mx my mz b">width</code>或<code class="fe mw mx my mz b">overflow</code>的尺寸或内部布局的样式</li><li id="5153" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">不要更改或覆盖角形材料组件的内部元素的样式，如在角形材料按钮中，有一些内部组件会产生涟漪效应，我们应该避免修改此类组件的样式</li><li id="b0d9" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">为叠加组件提供自定义样式，如<code class="fe mw mx my mz b">MatDialog</code>、<code class="fe mw mx my mz b">MatMenu</code>等。通过<code class="fe mw mx my mz b">panelClass</code>属性。在包含主题混合之后，将该类添加到全局样式表中。</li></ol><p id="b9da" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">通过遵循上述规则，不仅仅是角形材料组件，而是任何组件库，我们可以安全地实现所需的修改，并避免导致破坏样式。</p><p id="6fb6" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，记住上面的规则，我们将尝试改变有棱角的材料按钮的样式。在本教程中，我们将重点介绍以下两种风格的变化:</p><ol class=""><li id="cc30" class="md me in lm b ln mf lq mg kx mh lb mi lf mj mc mk ml mm mn bi translated">颜色</li><li id="2ba4" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">形状</li></ol><p id="d08a" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">在这一节的最后，我们还将简要介绍一下尺寸和排版。</p><h2 id="e7d3" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">颜色</h2><p id="edfc" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">我们可能需要对按钮的<code class="fe mw mx my mz b">font-color</code>和<code class="fe mw mx my mz b">background-color</code>进行非常基本的修改。不同的状态也是如此，如<code class="fe mw mx my mz b">:hover</code>、<code class="fe mw mx my mz b">:focus</code>和<code class="fe mw mx my mz b">:active</code>。</p><p id="ecf9" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">不久前，我写了一篇关于“角度材质主题化系统:完整指南”的文章，其中我写了一个标题为“<a class="ae na" href="https://indepth.dev/tutorials/angular/angular-material-theming-system-complete-guide#customizing-angular-material-component-styles" rel="noopener ugc nofollow" target="_blank">定制角度材质组件样式</a>”的部分。在那一节中，我已经解释了如何修改角度材质按钮的颜色。</p><p id="b1fc" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">但是，这种方法很复杂，难以阅读，难以调试，而且未来也不安全。背后的原因是我重新创建了许多SASS函数和mixins，它们应该只由按钮的内部元素使用，并使用它们来实现所需的更改。现在，如果Angular Material团队计划更改任何内部样式，这些修改将会中断。</p><p id="5366" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">因此，让我们来看看一个更容易和推荐的方法来实现颜色修改。</p><p id="bdcf" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">让我们假设你已经在你的项目中添加了<a class="ae na" href="https://material.angular.io/guide/getting-started" rel="noopener ugc nofollow" target="_blank">角度材质</a>，并且选择了一个预建的主题来使用。</p><p id="6a42" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">这时，你的<code class="fe mw mx my mz b">style.scss</code>如下图所示:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="c4e5" class="ko kp in mz b gy nf ng l nh ni">// styles.scss<br/>html,<br/>body {<br/>  height: 100%;<br/>}<br/>body {<br/>  margin: 0;<br/>  font-family: Roboto, "Helvetica Neue", sans-serif;<br/>}</span></pre><p id="53a4" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">我们将创建一个自定义主题，只有当它在<code class="fe mw mx my mz b">.custom-theme</code>类中时才会被应用。</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="eb80" class="ko kp in mz b gy nf ng l nh ni">@use "@angular/material" as mat;<br/><br/>$custom-primary: mat.define-palette(mat.$pink-palette, 700, 500, 900);<br/>$custom-accent: mat.define-palette(mat.$blue-grey-palette, A200, A100, A400);<br/><br/>$custom-theme: mat.define-dark-theme(<br/>  (<br/>    color: (<br/>      primary: $custom-primary,<br/>      accent: $custom-accent,<br/>    ),<br/>  )<br/>);<br/><br/>.custom-theme {<br/>  @include mat.button-theme($custom-theme);<br/>  @include mat.progress-spinner-theme($custom-theme);<br/>}</span></pre><p id="8901" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">请注意，我们只包括了<code class="fe mw mx my mz b">button-theme</code>和<code class="fe mw mx my mz b">progress-spinner-theme</code>，因为在我们的演示中，我们只使用这两个组件。你也可以使用<code class="fe mw mx my mz b">all-component-theme</code> mixin来添加所有组件的主题，但是这会增加最终输出样式的大小。如需更详细的了解，请参考文章“<a class="ae na" href="https://indepth.dev/tutorials/angular/angular-material-theming-system-complete-guide" rel="noopener ugc nofollow" target="_blank">角度材质主题化系统:完整指南</a>”。</p><p id="2f47" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">所以，现在有了上面的代码，如果在HTML代码中，我们简单地用<code class="fe mw mx my mz b">custom-theme</code>类包装主容器，它将应用一个自定义主题到里面的组件。让我们看看输出:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/09794c23601c5270481949ee82ded556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Xiw1G4ltu5TU-nSe.gif"/></div></div></figure><h2 id="95b4" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">形状</h2><p id="becf" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">接下来，让我们改变形状。我们想添加一个形状的变化，使按钮有圆形边框。</p><p id="b142" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，根据前面讨论的经验法则，我们可以更改影响组件本身布局的主机元素的样式。因此，为了实现形状的改变，我们可以简单地添加一个需要改变的类，并将其安全地应用到有角度的材料按钮:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="f47f" class="ko kp in mz b gy nf ng l nh ni">.button-rounded {<br/>  border-radius: 25% / 50%;<br/>}</span></pre><p id="fd5c" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，如果你应用了类<code class="fe mw mx my mz b">button-rounded</code>，你将看不到变化。背后的原因是，所有不同的角形材质按钮都有自己的<code class="fe mw mx my mz b">border-radius</code>，如下所示:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="42b0" class="ko kp in mz b gy nf ng l nh ni">.mat-raised-button {<br/>    // rest<br/>    border-radius: 4px;<br/>}</span></pre><p id="a5c1" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">因此，考虑到<a class="ae na" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity" rel="noopener ugc nofollow" target="_blank">选择器的特殊性</a>，我们必须修改我们的代码，如下所示:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="a510" class="ko kp in mz b gy nf ng l nh ni">.button-rounded {<br/>  &amp;.mat-button,<br/>  &amp;.mat-raised-button,<br/>  &amp;.mat-flat-button {<br/>    border-radius: 25% / 50%;<br/>  }<br/>}</span></pre><p id="9fd7" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，它在输出中将看起来很完美:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/c1171fa709ba0f10f8a22f8fe8d73f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0MwFHvnJj7WG8VJQ.gif"/></div></div></figure><h2 id="df2a" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">其他样式更改</h2><p id="66c9" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">除了颜色和大小，还可以有更多的变化需要。下面简单看一些，如何修改。</p><h2 id="e875" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">大小</h2><p id="f849" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">不建议修改尺寸，因为这违反了我们的经验法则。大小自定义可能会导致未来更新的重大更改。</p><p id="d9e2" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">并且棱角材质团队已经按照<a class="ae na" href="https://material.io/design/layout/spacing-methods.html" rel="noopener ugc nofollow" target="_blank">材质指引</a>做了尺寸，我们不应该改变。</p><h2 id="9e71" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">排印</h2><p id="1a89" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">这可以很容易地改变使用标准的角度材料主题混合。</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="42f8" class="ko kp in mz b gy nf ng l nh ni">$custom-theme: mat.define-light-theme((<br/>   color: (<br/>     primary: $custom-primary,<br/>     accent: $custom-accent,<br/>   ),<br/>   typography: $custom-typography,<br/>  ));</span></pre><p id="93ac" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">更多详情，请参见“<a class="ae na" href="https://indepth.dev/tutorials/angular/angular-material-theming-system-complete-guide#modify-typography" rel="noopener ugc nofollow" target="_blank">修改排版</a>”。</p><p id="93dc" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">接下来，我们将研究如何添加一个微调按钮。</p><h2 id="8c26" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">如何添加<code class="fe mw mx my mz b">MatProgressSpinner</code></h2><p id="fb84" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">正如标题中所提到的，当<code class="fe mw mx my mz b">loading</code>被设置了角状材料的按钮时，我们将显示一个<code class="fe mw mx my mz b">MatProgressSpinner</code>。</p><p id="3efd" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，有三种方法可以实现。下面我们来看看它们，以及各自的利弊。</p><ol class=""><li id="9522" class="md me in lm b ln mf lq mg kx mh lb mi lf mj mc mk ml mm mn bi translated">模板插值</li><li id="0625" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">包装组件</li><li id="6db1" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">指示的</li></ol><h2 id="92c5" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">模板插值</h2><p id="c731" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">对于模板插值，您的代码可能如下所示:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="4033" class="ko kp in mz b gy nf ng l nh ni">&lt;button mat-button [disabled]="isLoading"&gt;<br/>    &lt;mat-spinner *ngIf="isLoading"&gt;&lt;/mat-spinner&gt;<br/>    Action<br/>&lt;/button&gt;</span></pre><h2 id="1207" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">赞成的意见</h2><ol class=""><li id="f2de" class="md me in lm b ln lo lq lr kx nl lb nm lf nn mc mk ml mm mn bi translated">以上代码的主要优点是快速、易读，并且在需要时易于定制。</li></ol><h2 id="18b0" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">骗局</h2><ol class=""><li id="18a1" class="md me in lm b ln lo lq lr kx nl lb nm lf nn mc mk ml mm mn bi translated"><strong class="lm io">重复:</strong>上面的代码很好，但是你必须在所有你想在按钮中显示<code class="fe mw mx my mz b">MatProgressSpinner</code>的地方重复相同的行和条件。</li><li id="6bdb" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">所有地方的改变:</strong>如果你想改变某个东西，比如<code class="fe mw mx my mz b">MatProgressSpinner</code>的大小，你就必须找出所有这样的实例并进行改变。</li></ol><h2 id="6363" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">包装组件</h2><p id="8668" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">另一种方法是克服模板插值所面临的挑战，我们可以考虑创建一个带有所需输入的包装组件，如下所示:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="0ebf" class="ko kp in mz b gy nf ng l nh ni">@Component({<br/>    selector: 'app-button',<br/>    template: `<br/>        &lt;button mat-button&gt;<br/>            &lt;mat-spinner *ngIf="loading"&gt;&lt;/mat-spinner&gt;<br/>            &lt;ng-content&gt;&lt;/ng-content&gt;<br/>        &lt;/button&gt;<br/>    `<br/>})<br/>export class AppButtonComponent {<br/>    @Input() loading: boolean;<br/>}</span></pre><h2 id="41ce" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">赞成的意见</h2><ol class=""><li id="6e38" class="md me in lm b ln lo lq lr kx nl lb nm lf nn mc mk ml mm mn bi translated"><strong class="lm io">各处改动:</strong>有了以上，现在你可以在各处使用<code class="fe mw mx my mz b">app-button</code>得到与<code class="fe mw mx my mz b">mat-spinner</code>相同的按钮。</li><li id="fada" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">复用性:</strong>如果你想改变什么，你只需要改变这个组件，它就会在各个地方体现出来。</li><li id="a6e1" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">定制:</strong>由于我们使用组件，我们可以很容易地定制模板。</li></ol><h2 id="c1f6" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">骗局</h2><ol class=""><li id="07cd" class="md me in lm b ln lo lq lr kx nl lb nm lf nn mc mk ml mm mn bi translated"><strong class="lm io">原生组件属性:</strong>我们假设在不同的地方，我们要使用不同的有角材质按钮的变体。现在，对于颜色，您可以简单地再添加一个输入，并获得颜色的所有变体。但是如果你想使用不同的表达方式，比如<code class="fe mw mx my mz b">mat-flat-button</code>或<code class="fe mw mx my mz b">mat-icon-button</code>，事情会变得更加复杂。</li><li id="9909" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">事件:</strong>除了变量，你还必须处理事件，就像<code class="fe mw mx my mz b">(click)</code>一样。您必须使用<code class="fe mw mx my mz b">@Output()</code>将点击事件传播到它的父组件。</li><li id="3250" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">其他指令支持:</strong>角料按钮支持自带的<code class="fe mw mx my mz b">MatTooltip</code>和<code class="fe mw mx my mz b">MatBadge</code>指令开箱。在包装组件中实现对上述所有内容的支持不仅困难，而且复杂且难以维护。</li></ol><h2 id="a6d7" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">指示的</h2><p id="b3b3" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">根据该指令，我们将首先从<code class="fe mw mx my mz b">loading</code>状态的<code class="fe mw mx my mz b">input</code>开始，它将显示/隐藏<code class="fe mw mx my mz b">MatProgressSpinner</code>并禁用/启用<code class="fe mw mx my mz b">MatButton</code>。让我们从基本代码开始:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="61f0" class="ko kp in mz b gy nf ng l nh ni">@Directive({<br/>  selector: `button`,<br/>})<br/>export class ButtonDirective implements OnChanges {<br/>  @Input() loading = false;<br/><br/>  constructor() {}<br/><br/>  ngOnChanges(changes: SimpleChanges): void {<br/>    if (!changes['loading']) {<br/>      return;<br/>    }<br/><br/>    // Create/destroy spinner<br/>  }<br/><br/>  private createSpinner(): void {}<br/><br/>  private destroySpinner(): void {}<br/>}</span></pre><p id="bbc4" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">在上面的代码中，我们创建了一个带有标签选择器的指令，这样它就可以与所有的<code class="fe mw mx my mz b">&amp;lt;button&gt;</code>一起工作。我们添加了一个名为<code class="fe mw mx my mz b">loading</code>的<code class="fe mw mx my mz b">@Input()</code>，它将显示/隐藏按钮内部的微调器。</p><p id="f3a3" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，为了显示微调器，我们将创建MatProgressSpinner <code class="fe mw mx my mz b">component dynamically and will place it inside the</code>按钮<code class="fe mw mx my mz b">when</code> loading `设置为true。</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="46eb" class="ko kp in mz b gy nf ng l nh ni">@Directive({<br/>  selector: `button`,<br/>})<br/>export class ButtonDirective implements OnChanges {<br/><br/>  private spinner!: ComponentRef&lt;MatProgressSpinner&gt; | null;<br/><br/>  ngOnChanges(changes: SimpleChanges): void {<br/>    if (!changes['loading']) {<br/>      return;<br/>    }<br/><br/>    if (changes['loading'].currentValue) {<br/>        // disable the `MatButton`<br/>        this.createSpinner();<br/>      } else if (!changes['loading'].firstChange) {<br/>        // enable the `MatButton`<br/>        this.destroySpinner();<br/>      }<br/>  }<br/>}</span></pre><p id="0c68" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">上面的代码很简单，我们基于<code class="fe mw mx my mz b">loading</code>的当前值创建和销毁spinner。</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="6dac" class="ko kp in mz b gy nf ng l nh ni">@Directive({<br/>  selector: `button`,<br/>})<br/>export class ButtonDirective implements OnChanges {<br/><br/>  @Input() color: ThemePalette;<br/><br/>  constructor(<br/>    private matButton: MatButton,<br/>    private viewContainerRef: ViewContainerRef,<br/>    private renderer: Renderer2<br/>  ) {}<br/><br/>  private createSpinner(): void {<br/>    if (!this.spinner) {<br/>      this.spinner = this.viewContainerRef.createComponent(MatProgressSpinner);<br/>      this.spinner.instance.color = this.color;<br/>      this.spinner.instance.diameter = 20;<br/>      this.spinner.instance.mode = 'indeterminate';<br/>      this.renderer.appendChild(<br/>        this.matButton._elementRef.nativeElement,<br/>        this.spinner.instance._elementRef.nativeElement<br/>      );<br/>    }<br/>  }<br/><br/>  private destroySpinner(): void {<br/>    if (this.spinner) {<br/>      this.spinner.destroy();<br/>      this.spinner = null;<br/>    }<br/>  }<br/>}</span></pre><p id="277a" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">在上面的代码中，首先，我们添加了一个<code class="fe mw mx my mz b">@Input()</code>来读取当前的<code class="fe mw mx my mz b">color</code>。我们将使用这个属性来设置微调器的颜色。</p><p id="9d04" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">然后，我们在构造函数中提供了<code class="fe mw mx my mz b">MatButton</code>、<code class="fe mw mx my mz b">ViewContainerRef</code>和<code class="fe mw mx my mz b">Renderer2</code>类。</p><p id="bdd6" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">在<code class="fe mw mx my mz b">createSpinner</code>方法中，我们简单地动态创建<code class="fe mw mx my mz b">MatProgressSpinner</code>并将它的引用存储在<code class="fe mw mx my mz b">spinner</code>中，这样我们可以在以后销毁它。请注意我们是如何动态创建它的:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="d99c" class="ko kp in mz b gy nf ng l nh ni">this.spinner = this.viewContainerRef.createComponent(MatProgressSpinner);</span></pre><p id="d5b7" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">创建之后，我们在<code class="fe mw mx my mz b">Renderer2</code>的帮助下，将它添加到<code class="fe mw mx my mz b">MatButton</code>的HTML元素中:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="c6cc" class="ko kp in mz b gy nf ng l nh ni">this.renderer.appendChild(<br/>        this.matButton._elementRef.nativeElement,<br/>        this.spinner.instance._elementRef.nativeElement<br/>      );</span></pre><p id="7c77" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">最后，在<code class="fe mw mx my mz b">destroySpinner</code>方法中，我们通过赋值<code class="fe mw mx my mz b">null</code>来销毁<code class="fe mw mx my mz b">spinner</code>组件并清理它。</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="c871" class="ko kp in mz b gy nf ng l nh ni">@Directive({<br/>  selector: `button`,<br/>})<br/>export class ButtonDirective implements OnChanges {<br/><br/>  @Input() disabled = false;<br/><br/>  ngOnChanges(changes: SimpleChanges): void {<br/><br/>  // ...<br/><br/>  if (changes['loading'].currentValue) {<br/>      this.matButton._elementRef.nativeElement.classList.add('button-loading');<br/>      this.matButton.disabled = true;<br/>      this.createSpinner();<br/>    } else if (!changes['loading'].firstChange) {<br/>      this.matButton._elementRef.nativeElement.classList.remove(<br/>        'button-loading'<br/>      );<br/>      this.matButton.disabled = this.disabled;<br/>      this.destroySpinner();<br/>    }<br/>  }<br/>}</span></pre><p id="8ba4" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">最后一部分是当<code class="fe mw mx my mz b">loading</code>为<code class="fe mw mx my mz b">true</code>时使<code class="fe mw mx my mz b">MatButtton</code>失效。除了禁用它，我们还用它切换了一个类<code class="fe mw mx my mz b">button-loading</code>来实现想要的样式。</p><p id="1204" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">下面是<code class="fe mw mx my mz b">button-loading</code>类的样式代码:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="4d45" class="ko kp in mz b gy nf ng l nh ni">.button-loading {<br/>  .mat-button-wrapper {<br/>    visibility: hidden;<br/>  }<br/><br/>  .mat-progress-spinner {<br/>    position: absolute;<br/>    top: calc(50% - 10px);<br/>    left: calc(50% - 10px);<br/>  }<br/>}</span></pre><p id="51d8" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">该指令的最终代码如下所示:</p><pre class="kd ke kf kg gt nb mz nc nd aw ne bi"><span id="bd50" class="ko kp in mz b gy nf ng l nh ni">@Directive({<br/>  selector: `button`,<br/>})<br/>export class ButtonDirective implements OnChanges {<br/>  private spinner!: ComponentRef&lt;MatProgressSpinner&gt; | null;<br/><br/>  @Input() loading = false;<br/>  @Input() disabled = false;<br/>  @Input() color: ThemePalette;<br/><br/>  constructor(<br/>    private matButton: MatButton,<br/>    private viewContainerRef: ViewContainerRef,<br/>    private renderer: Renderer2<br/>  ) {}<br/><br/>  ngOnChanges(changes: SimpleChanges): void {<br/>    if (!changes['loading']) {<br/>      return;<br/>    }<br/><br/>    if (changes['loading'].currentValue) {<br/>      this.matButton._elementRef.nativeElement.classList.add('button-loading');<br/>      this.matButton.disabled = true;<br/>      this.createSpinner();<br/>    } else if (!changes['loading'].firstChange) {<br/>      this.matButton._elementRef.nativeElement.classList.remove(<br/>        'button-loading'<br/>      );<br/>      this.matButton.disabled = this.disabled;<br/>      this.destroySpinner();<br/>    }<br/>  }<br/><br/>  private createSpinner(): void {<br/>    if (!this.spinner) {<br/>      this.spinner = this.viewContainerRef.createComponent(MatProgressSpinner);<br/>      this.spinner.instance.color = this.color;<br/>      this.spinner.instance.diameter = 20;<br/>      this.spinner.instance.mode = 'indeterminate';<br/>      this.renderer.appendChild(<br/>        this.matButton._elementRef.nativeElement,<br/>        this.spinner.instance._elementRef.nativeElement<br/>      );<br/>    }<br/>  }<br/><br/>  private destroySpinner(): void {<br/>    if (this.spinner) {<br/>      this.spinner.destroy();<br/>      this.spinner = null;<br/>    }<br/>  }<br/>}</span></pre><p id="6a8b" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated"><em class="no">以上代码引用自</em><a class="ae na" href="https://ng-matero.github.io/extensions/components/button/overview" rel="noopener ugc nofollow" target="_blank"><em class="no">Button | Angular matero . github . io)</em></a></p><p id="0a02" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">现在，有了有角度的材质按钮，你只需要设置<code class="fe mw mx my mz b">loading</code>来显示它里面的一个旋转器。让我们来看看输出:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi np"><img src="../Images/b6a979ed56358628525732acf0e6f2e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*2_NeKmrADScB75iI.gif"/></div></figure><p id="50ff" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">让我们来看看上述方法的利弊。</p><h2 id="bac7" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">赞成的意见</h2><ol class=""><li id="133d" class="md me in lm b ln lo lq lr kx nl lb nm lf nn mc mk ml mm mn bi translated"><strong class="lm io">本地组件属性:</strong>正如您在输出中看到的，该指令适用于<code class="fe mw mx my mz b">MatButton</code>的所有变体。</li><li id="adc0" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">事件:</strong>同样，不需要编写额外的代码来处理事件。</li><li id="42d8" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">其他指令的支持:</strong>由于我们使用了指令，其他库指令的支持，如<code class="fe mw mx my mz b">MatBadge</code>、<code class="fe mw mx my mz b">MatTooltip</code>仍然存在。</li></ol><h2 id="74f6" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">骗局</h2><ol class=""><li id="88a5" class="md me in lm b ln lo lq lr kx nl lb nm lf nn mc mk ml mm mn bi translated"><strong class="lm io">无模板控制:</strong>与包装组件和内联模板插值相比，这种方法没有模板控制。</li><li id="397e" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated"><strong class="lm io">更多的DOM操作:</strong>由于我们没有模板控制，我们必须通过DOM操作来做每一个模板更改。</li></ol><p id="ec56" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">因此，与模板内插和包装组件相比，不丢失默认特性的可重用性是这种方法的主要和最大的优点。这就是为什么人们应该尝试使用指令来实现这种定制。</p><h2 id="4db3" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">结论</h2><p id="d7f5" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">我们从了解使用任何第三方UI组件库时为什么需要定制以及需要哪些定制开始。然后我们了解了Angular Material components库特别为按钮提供了什么。</p><p id="5460" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">接下来，我们比较了下面提到的在有角度的材质按钮中添加微调器的所有方法:</p><ol class=""><li id="1511" class="md me in lm b ln mf lq mg kx mh lb mi lf mj mc mk ml mm mn bi translated">模板插值—快速且易于理解，但缺少可重用性。</li><li id="3782" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">包装组件——实现了可重用性，但是需要更复杂的代码和设置来保持对默认功能的支持。</li><li id="985f" class="md me in lm b ln mo lq mp kx mq lb mr lf ms mc mk ml mm mn bi translated">指令——支持默认功能和可重用性，这两者都是在对模板控制较少的情况下实现的。</li></ol><p id="e5a6" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">然后，我们理解了一些防止我们的定制样式被重大更新破坏的经验法则。接下来，我们学习了如何有效地修改颜色、大小和字体。以及为什么我们不应该修改有角材质按钮的大小。</p><p id="d2b4" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated">我已经在<a class="ae na" href="https://github.com/shhdharmen/indepth-customizing-angular-material-button" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上传了代码，你也可以在<a class="ae na" href="https://stackblitz.com/github/shhdharmen/indepth-customizing-angular-material-button" rel="noopener ugc nofollow" target="_blank"> stackblitz </a>上看看。</p></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><p id="026c" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated"><em class="no">最初发表于</em><a class="ae na" href="https://indepth.dev/tutorials/angular/indepth-guide-for-customizing-angular-material-button" rel="noopener ugc nofollow" target="_blank"><em class="no"/></a><em class="no">。</em></p><p id="2fc5" class="pw-post-body-paragraph lk ll in lm b ln mf jo lp lq mg jr ls kx mt lu lv lb mu lx ly lf mv ma mb mc ig bi translated"><em class="no">更多内容看</em> <a class="ae na" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="no">说白了。报名参加我们的</em> <a class="ae na" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="no">免费周报</em> </strong> </a> <em class="no">。关注我们关于</em><a class="ae na" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lm io"><em class="no">Twitter</em></strong></a><em class="no">和</em><a class="ae na" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lm io"><em class="no">LinkedIn</em></strong></a><em class="no">。查看我们的</em> <a class="ae na" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="no">社区不和谐</em> </strong> </a> <em class="no">加入我们的</em> <a class="ae na" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="no">人才集体</em> </strong> </a> <em class="no">。</em></strong></a></p></div></div>    
</body>
</html>