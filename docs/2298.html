<html>
<head>
<title>How to Convert a Map to an Array in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中将地图转换成数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-convert-map-to-array-9c93fe20e647?source=collection_archive---------2-----------------------#2022-05-28">https://javascript.plainenglish.io/javascript-convert-map-to-array-9c93fe20e647?source=collection_archive---------2-----------------------#2022-05-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7875" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解在JavaScript中将地图对象轻松转换为对象数组的多种方法。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7aba84c8877e453b9eb03c2cdc3d458e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvroW-UPRhzHdE9BhHN06w.png"/></div></div></figure><p id="84b4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我们将学习在JavaScript中将一个<code class="fe lk ll lm ln b">Map</code>对象转换成一个对象数组的不同方法。</p><h1 id="c6c3" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">1.数组from()方法</h1><p id="d917" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">要将映射转换为数组，我们可以使用静态的<code class="fe lk ll lm ln b">Array.from()</code>方法，将<code class="fe lk ll lm ln b">Map</code>作为第一个参数传递，并将映射函数转换<code class="fe lk ll lm ln b">Map</code>条目作为第二个参数。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="e9ad" class="mp lp in ln b gy mq mr l ms mt">const map = new Map();<br/>map.set('user1', 'John');<br/>map.set('user2', 'Kate');<br/>map.set('user3', 'Peter');</span><span id="cd04" class="mp lp in ln b gy mu mr l ms mt">const arr = Array.from(map, function (entry) {<br/>  return { key: entry[0], value: entry[1] };<br/>});</span><span id="7932" class="mp lp in ln b gy mu mr l ms mt">/**<br/>  [<br/>    { key: 'user1', value: 'John' },<br/>    { key: 'user2', value: 'Kate' },<br/>    { key: 'user3', value: 'Peter' }<br/>  ]<br/>*/<br/>console.log(arr);</span></pre><p id="9424" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意</strong>:我们可以使用数组析构和箭头函数来缩短上面的代码:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="2e8a" class="mp lp in ln b gy mq mr l ms mt">const arr = Array.from(map, ([key, value]) =&gt; ({<br/>  key,<br/>  value,<br/>}));</span></pre><p id="cfbe" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意</strong>:要将<code class="fe lk ll lm ln b">Map</code>转换成一个键值对象数组:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="1aea" class="mp lp in ln b gy mq mr l ms mt">const arr = Array.from(map, ([key, value]) =&gt; ({<br/>  [key]: value,<br/>}));</span><span id="d757" class="mp lp in ln b gy mu mr l ms mt">// [ { user1: 'John' }, { user2: 'Kate' }, { user3: 'Peter' } ]<br/>console.log(arr);</span></pre><p id="1ac1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意</strong>:如果我们不将map函数作为参数传递，<code class="fe lk ll lm ln b">Array.from()</code>将返回一个键值对数组，每个键值对对应一个<code class="fe lk ll lm ln b">Map</code>条目。例如:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="bb5f" class="mp lp in ln b gy mq mr l ms mt">const map = new Map();<br/>map.set('user1', 'John');<br/>map.set('user2', 'Kate');<br/>map.set('user3', 'Peter');</span><span id="1408" class="mp lp in ln b gy mu mr l ms mt">const arr = Array.from(map);</span><span id="bfd1" class="mp lp in ln b gy mu mr l ms mt">// [ [ 'user1', 'John' ], [ 'user2', 'Kate' ], [ 'user3', 'Peter' ] ]<br/>console.log(arr);</span></pre><p id="a641" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这意味着我们可以使用Array <code class="fe lk ll lm ln b">map()</code>方法将这个数组转换成一个对象数组:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="4dbb" class="mp lp in ln b gy mq mr l ms mt">const map = new Map();<br/>map.set('user1', 'John');<br/>map.set('user2', 'Kate');<br/>map.set('user3', 'Peter');</span><span id="5f71" class="mp lp in ln b gy mu mr l ms mt">const arr = Array.from(map).map(([key, value]) =&gt; ({<br/>  key,<br/>  value,<br/>}));</span><span id="c80b" class="mp lp in ln b gy mu mr l ms mt">/**<br/>  [<br/>    { key: 'user1', value: 'John' },<br/>    { key: 'user2', value: 'Kate' },<br/>    { key: 'user3', value: 'Peter' }<br/>  ]<br/>*/<br/>console.log(arr);</span></pre><h1 id="7abc" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">2.展开运算符和数组映射()</h1><p id="7d33" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">在<code class="fe lk ll lm ln b">Map</code>上使用JavaScript spread操作符(<code class="fe lk ll lm ln b">...</code>)会将其条目解包到一个键值对数组中，就像<code class="fe lk ll lm ln b">Array.from()</code>没有收到回调时一样。例如:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="2330" class="mp lp in ln b gy mq mr l ms mt">const map = new Map();<br/>map.set('user1', 'John');<br/>map.set('user2', 'Kate');<br/>map.set('user3', 'Peter');</span><span id="6b02" class="mp lp in ln b gy mu mr l ms mt">const arr = [...map];</span><span id="bfbb" class="mp lp in ln b gy mu mr l ms mt">// [ [ 'user1', 'John' ], [ 'user2', 'Kate' ], [ 'user3', 'Peter' ] ]<br/>console.log(arr);</span></pre><p id="e2f9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这意味着我们也可以通过将spread操作符与Array <code class="fe lk ll lm ln b">map()</code>方法结合起来，将一个<code class="fe lk ll lm ln b">Map</code>转换成一个对象数组:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="9d18" class="mp lp in ln b gy mq mr l ms mt">const map = new Map();<br/>map.set('user1', 'John');<br/>map.set('user2', 'Kate');<br/>map.set('user3', 'Peter');</span><span id="065b" class="mp lp in ln b gy mu mr l ms mt">const arr = [...map].map(([key, value]) =&gt; ({<br/>  key,<br/>  value,<br/>}));</span><span id="b7da" class="mp lp in ln b gy mu mr l ms mt">/**<br/>  [<br/>    { key: 'user1', value: 'John' },<br/>    { key: 'user2', value: 'Kate' },<br/>    { key: 'user3', value: 'Peter' }<br/>  ]<br/>*/<br/>console.log(arr);</span></pre><h1 id="d2c3" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">3.迭代映射并将元素添加到数组</h1><p id="aa99" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">将<code class="fe lk ll lm ln b">Map</code>转换为数组的另一种方法是迭代每个<code class="fe lk ll lm ln b">Map</code>条目，用条目创建一个对象，并将该对象添加到结果数组中。比如我们可以用<code class="fe lk ll lm ln b">Map</code> <code class="fe lk ll lm ln b">forEach()</code>方法迭代<code class="fe lk ll lm ln b">Map</code>，用<code class="fe lk ll lm ln b">Array</code> <code class="fe lk ll lm ln b">push()</code>方法添加数组元素。</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="c26b" class="mp lp in ln b gy mq mr l ms mt">const map = new Map();<br/>map.set('user1', 'John');<br/>map.set('user2', 'Kate');<br/>map.set('user3', 'Peter');</span><span id="56be" class="mp lp in ln b gy mu mr l ms mt">const arr = [];<br/>map.forEach((value, key) =&gt; arr.push({ key, value }));</span><span id="1f53" class="mp lp in ln b gy mu mr l ms mt">/**<br/>  [<br/>    { key: 'user1', value: 'John' },<br/>    { key: 'user2', value: 'Kate' },<br/>    { key: 'user3', value: 'Peter' }<br/>  ]<br/>*/<br/>console.log(arr);</span></pre><p id="a81f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">或者，我们可以使用<code class="fe lk ll lm ln b">for...of</code>循环来迭代地图:</p><pre class="kd ke kf kg gt ml ln mm mn aw mo bi"><span id="16eb" class="mp lp in ln b gy mq mr l ms mt">const map = new Map();<br/>map.set('user1', 'John');<br/>map.set('user2', 'Kate');<br/>map.set('user3', 'Peter');</span><span id="a86c" class="mp lp in ln b gy mu mr l ms mt">const arr = [];<br/>for (const [key, value] of map) {<br/>  arr.push({ key, value });<br/>}</span><span id="ea93" class="mp lp in ln b gy mu mr l ms mt">/**<br/>  [<br/>    { key: 'user1', value: 'John' },<br/>    { key: 'user2', value: 'Kate' },<br/>    { key: 'user3', value: 'Peter' }<br/>  ]<br/>*/<br/>console.log(arr);</span></pre></div><div class="ab cl mv mw hr mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ig ih ii ij ik"><p id="ea21" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nc">更新于:</em><a class="ae nd" href="https://codingbeautydev.com/blog/javascript-convert-map-to-array/" rel="noopener ugc nofollow" target="_blank"><em class="nc">codingbeautydev.com</em></a></p><p id="71ce" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">每周获取新的web开发技巧和教程。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/b8db4799ac3fa2b55b41c7ca714bdf64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KLG9Wxq6Sqt3jxTaL00Tnw.png"/></div></div></figure><p id="6572" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nd" href="https://codingbeautydev.com/newsletter" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">订阅</strong> </a></p></div></div>    
</body>
</html>