<html>
<head>
<title>How to Use URL Query Params in Nuxt 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Nuxt 3中使用URL查询参数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-url-query-params-in-nuxt-3-eaa930419fa5?source=collection_archive---------6-----------------------#2022-02-15">https://javascript.plainenglish.io/using-url-query-params-in-nuxt-3-eaa930419fa5?source=collection_archive---------6-----------------------#2022-02-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/75d932bceca6eb389961a2f88e3e0b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8jSa1ywRFGwsDrqW1EEbFw.png"/></div></div></figure><blockquote class="jv jw jx"><p id="fd46" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是我之前关于如何在Nuxt 3中设置查询参数的<a class="ae kx" href="https://codybontecou.com/silently-update-url-nuxt-3.html" rel="noopener ugc nofollow" target="_blank">帖子</a>的延续。我们将继续编写那里的代码，所以请务必检查它。</p></blockquote><h2 id="050c" class="ky kz in bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们正在解决的问题</h2><p id="04ea" class="pw-post-body-paragraph jy jz in kb b kc lu ke kf kg lv ki kj lh lw km kn ll lx kq kr lp ly ku kv kw ig bi translated">我们停止了我们的URL看起来像<code class="fe lz ma mb mc b">localhost:3000/test?streamer=faker</code>。这很好，但包含了一些不太理想的情况。</p><p id="a414" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">因为URL参数是使用我们输入的v-model更新的，如果页面被刷新，我们将丢失本地状态和存储在<code class="fe lz ma mb mc b">twitchStreamer</code>中的值。</p><h2 id="e69c" class="ky kz in bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">在Nuxt中使用useRoute</h2><p id="3f4b" class="pw-post-body-paragraph jy jz in kb b kc lu ke kf kg lv ki kj lh lw km kn ll lx kq kr lp ly ku kv kw ig bi translated">Nuxt.js依赖于<a class="ae kx" href="https://router.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> vue-router </a>的大部分路由逻辑。</p><p id="6a5c" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">在我们的例子中，我们使用的是组合API，这是Nuxt 3内置的新特性之一。</p><p id="8bdf" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">为了得到我们的路线，我们用把<code class="fe lz ma mb mc b">useRoute()</code>带进我们的<code class="fe lz ma mb mc b">setup()</code>。Nuxt 3自动导入<code class="fe lz ma mb mc b">useRoute()</code>，所以我们可以选择显式或隐式。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="f12f" class="ky kz in mc b gy ml mm l mn mo">setup() {<br/>  const route = useRoute()<br/>}</span></pre><p id="fc5e" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">拥有我们的路线可以解锁<code class="fe lz ma mb mc b">vue-router</code>的所有好处，包括访问我们的查询参数！</p><h2 id="a65d" class="ky kz in bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使查询参数持久化</h2><p id="c35b" class="pw-post-body-paragraph jy jz in kb b kc lu ke kf kg lv ki kj lh lw km kn ll lx kq kr lp ly ku kv kw ig bi translated">通过访问我们的路线，我们可以使用<code class="fe lz ma mb mc b">route.query.streamer</code>检查查询变量(在<code class="fe lz ma mb mc b">streamer=</code>中的=之后是什么)。</p><p id="6a04" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">轻松点。</p><p id="5ec0" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">我现在将这个逻辑与一个带有<code class="fe lz ma mb mc b">twitchStreamer</code>变量的<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener ugc nofollow" target="_blank">三元运算符</a>一起使用。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="edbc" class="ky kz in mc b gy ml mm l mn mo">const twitchStreamer = ref(route.query.streamer ? route.query.streamer : '')</span></pre><p id="b7b5" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">现在，每次页面被导航或刷新时，我们的<code class="fe lz ma mb mc b">twitchStreamer</code>将检查我们的<code class="fe lz ma mb mc b">route</code>是否有一个streamer查询参数。</p><p id="fda1" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated">如果是，我们的<code class="fe lz ma mb mc b">twitchStreamer</code>将包含参数的值。否则，它将是一个空字符串。</p><h2 id="761f" class="ky kz in bd la lb lc dn ld le lf dp lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">最终代码片段</h2><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="b88e" class="ky kz in mc b gy ml mm l mn mo">&lt;!-- pages/example.vue --&gt;<br/>&lt;template&gt;<br/>  &lt;input v-model="twitchStreamer" /&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>  setup() {<br/>    const route = useRoute()<br/>    const router = useRouter()<br/>    const twitchStreamer = ref(route.query.streamer ? route.query.streamer : '')<br/><br/>    watch(twitchStreamer, (twitchStreamer, previous) =&gt; {<br/>      router.push({<br/>        path: '/test',<br/>        query: { streamer: twitchStreamer },<br/>      })<br/>    })<br/><br/>    return { twitchStreamer }<br/>&lt;/script&gt;</span></pre><p id="ea2e" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lh kl km kn ll kp kq kr lp kt ku kv kw ig bi translated"><em class="ka">更多内容请看</em><a class="ae kx" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="ka">plain English . io</em></strong></a><em class="ka">。报名参加我们的</em> <a class="ae kx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ka">免费周报</em> </strong> </a> <em class="ka">。关注我们关于</em><a class="ae kx" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="ka">Twitter</em></strong></a><em class="ka">和</em><a class="ae kx" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="ka">LinkedIn</em></strong></a><em class="ka">。加入我们的</em> <a class="ae kx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ka">社区不和谐</em> </strong> </a> <em class="ka">。</em></p></div></div>    
</body>
</html>