<html>
<head>
<title>How to Toggle a Boolean State in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中切换布尔状态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-toggle-boolean-state-639f488403f5?source=collection_archive---------19-----------------------#2022-12-27">https://javascript.plainenglish.io/react-toggle-boolean-state-639f488403f5?source=collection_archive---------19-----------------------#2022-12-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4b4cd40105354012cb134984ec3fa0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G9nd5XUdW-fGlUCJp9NNKQ.png"/></div></div></figure><p id="70ef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要在React中切换布尔状态:</p><ol class=""><li id="3ca5" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">使用<code class="fe lc ld le lf b">useState</code>钩子创建布尔状态(如果你还没有创建)。</li><li id="4242" class="kt ku in jx b jy lg kc lh kg li kk lj ko lk ks ky kz la lb bi translated">将回调传递给状态更新函数(<code class="fe lc ld le lf b">setState</code>)。</li><li id="7b02" class="kt ku in jx b jy lg kc lh kg li kk lj ko lk ks ky kz la lb bi translated">从回调中返回布尔变量的反值。</li></ol><p id="9bf2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如:</p><p id="f1dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lc ld le lf b">JavaScript</code></p><pre class="ll lm ln lo gt lp lf lq bn lr ls bi"><span id="de2d" class="lt lu in lf b be lv lw l lx ly">import { useState } from 'react';<br/><br/>export default function App() {<br/>  const [visible, setVisible] = useState(false);<br/><br/>  const handleToggle = () =&gt; {<br/>    setVisible((current) =&gt; !current);<br/>  };<br/><br/>  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={handleToggle}&gt;Show name&lt;/button&gt;<br/>      {visible &amp;&amp; &lt;p&gt;Coding Beauty&lt;/p&gt;}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/4938baf92ed02ce95b84ecd1cc063a02.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/0*dIKgzHCWupxLyI1_.gif"/></div><figcaption class="ma mb gj gh gi mc md bd b be z dk">The text’s visibility is toggled on button click.</figcaption></figure><p id="2503" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们用<code class="fe lc ld le lf b">useState</code>钩子创建布尔状态。<code class="fe lc ld le lf b"><a class="ae me" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">useState</a></code>返回一个由两个值组成的数组，第一个是状态值，第二个是被调用时更新状态的函数。</p><p id="3665" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将回调函数传递给<code class="fe lc ld le lf b">setVisible</code>，因为回调总是传递最新的<code class="fe lc ld le lf b">visible</code>状态。</p><p id="064c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">提示:</strong>当从当前状态数据计算出新的状态时，总是传递一个函数给<code class="fe lc ld le lf b">setState</code>。</p><p id="c90c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们的例子中，回调简单地否定布尔值，并返回否定状态的结果。</p><p id="69d3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae me" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_NOT" rel="noopener ugc nofollow" target="_blank">逻辑不</a>(！)运算符将真值转换为<code class="fe lc ld le lf b">false</code>，将假值转换为<code class="fe lc ld le lf b">true</code>。</p><p id="665b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lc ld le lf b">JavaScript</code></p><pre class="ll lm ln lo gt lp lf lq bn lr ls bi"><span id="2689" class="lt lu in lf b be lv lw l lx ly">console.log(!true); // false<br/><br/>console.log(!false); // true<br/><br/>console.log(!5); // false<br/><br/>console.log(!undefined); // true</span></pre><p id="b68a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:JavaScript中只有6个falsy值:<code class="fe lc ld le lf b">undefined</code>、<code class="fe lc ld le lf b">null</code>、<code class="fe lc ld le lf b">''</code>(空字符串)、<code class="fe lc ld le lf b">NaN</code>、<code class="fe lc ld le lf b">0</code>、<code class="fe lc ld le lf b">false</code>。所有其他值都是真的，并且当被求反时将产生<code class="fe lc ld le lf b">false</code>。</p><h1 id="ed10" class="mf lu in bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">对布尔状态切换执行操作</h1><p id="e320" class="pw-post-body-paragraph jv jw in jx b jy nc ka kb kc nd ke kf kg ne ki kj kk nf km kn ko ng kq kr ks ig bi translated">当组件中的布尔状态发生变化时，有时您希望执行重新渲染之外的操作，例如网络请求。要执行这样的操作，将代码放在<code class="fe lc ld le lf b"><a class="ae me" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">useEffect</a></code>钩子中，并将布尔状态变量包含在<code class="fe lc ld le lf b">useEffect</code>的dependencies数组中。</p><p id="1f31" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lc ld le lf b">JavaScript</code></p><pre class="ll lm ln lo gt lp lf lq bn lr ls bi"><span id="2e4d" class="lt lu in lf b be lv lw l lx ly">import { useEffect, useState } from 'react';<br/>import axios from 'axios';<br/><br/>export default function App() {<br/>  const [visible, setVisible] = useState(false);<br/><br/>  const handleToggle = () =&gt; {<br/>    setVisible((current) =&gt; !current);<br/>  };<br/><br/>  useEffect(() =&gt; {<br/>    if (visible) {<br/>      axios.post('https://example.com/stats/name/views').then(() =&gt; {<br/>        console.log('Updated stats successfully.')<br/>      });<br/>    }<br/>  }, [visible]);<br/><br/>  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={handleToggle}&gt;Show name&lt;/button&gt;<br/>      {visible &amp;&amp; &lt;p style={{ color: 'blue' }}&gt;Coding Beauty&lt;/p&gt;}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="b1ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lc ld le lf b"><a class="ae me" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">useEffect</a></code>钩子中的代码在组件挂载或从<code class="fe lc ld le lf b">visible</code>状态的变化中更新后运行。这里，状态控制元素的可见性，所以在钩子中，我们检查元素是否可见，如果可见，我们向服务器发出网络请求，更新与元素相关的视图统计信息。</p><h1 id="ed11" class="mf lu in bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">对布尔状态更改执行操作，但跳过第一次渲染</h1><p id="15d4" class="pw-post-body-paragraph jv jw in jx b jy nc ka kb kc nd ke kf kg ne ki kj kk nf km kn ko ng kq kr ks ig bi translated">根据您的情况，您可能希望该操作在组件从状态更改更新时运行，而不是在组件首次挂载时运行。</p><p id="6e24" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以通过在第一次渲染中创建一个初始值为<code class="fe lc ld le lf b">false</code>的ref标志变量，并在所有后续渲染中将其值更改为<code class="fe lc ld le lf b">true</code>来实现这一点。</p><p id="effa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lc ld le lf b">JavaScript</code></p><pre class="ll lm ln lo gt lp lf lq bn lr ls bi"><span id="a1c1" class="lt lu in lf b be lv lw l lx ly">import { useEffect, useRef, useState } from 'react';<br/>import axios from 'axios';<br/><br/>export default function App() {<br/>  const afterFirstRender = useRef(false);<br/>  const [visible, setVisible] = useState(false);<br/><br/>  const handleToggle = () =&gt; {<br/>    setVisible((current) =&gt; !current);<br/>  };<br/><br/>  useEffect(() =&gt; {<br/>    if (!afterFirstRender.current) {<br/>      afterFirstRender.current = true;<br/>      return;<br/>    }<br/><br/>    if (visible) {<br/>      axios.post('https://example.com/stats/name/show').then(() =&gt; {<br/>        console.log('Stats updated successfully')<br/>      });<br/>    }<br/>  }, [visible]);<br/><br/>  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={handleToggle}&gt;Show name&lt;/button&gt;<br/>      {visible &amp;&amp; &lt;p style={{ color: 'blue' }}&gt;Coding Beauty&lt;/p&gt;}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="246d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lc ld le lf b">useRef</code>返回一个可变的ref对象，当组件更新时，该对象的值不变。此外，修改该对象的<code class="fe lc ld le lf b">current</code>属性值不会导致重新渲染。这与从<code class="fe lc ld le lf b">useState</code>返回的<code class="fe lc ld le lf b">setState</code>更新功能相反。</p><p id="70c8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果ref的值是<code class="fe lc ld le lf b">false</code>，我们防止动作在<code class="fe lc ld le lf b"><a class="ae me" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">useEffect</a></code>中发生，并将值更改为<code class="fe lc ld le lf b">true</code>用于后续渲染。否则，我们执行动作。</p></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><p id="964a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="no">最初发表于</em><a class="ae me" href="https://cbdev.link/e32fa9" rel="noopener ugc nofollow" target="_blank"><em class="no">codingbeautydev.com</em></a></p><h1 id="4c7e" class="mf lu in bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph jv jw in jx b jy nc ka kb kc nd ke kf kg ne ki kj kk nf km kn ko ng kq kr ks ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div class="gh gi np"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae me" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">报名</strong> </a>立即免费领取一份。</p><h2 id="b9db" class="nq lu in bd mg nr ns dn mk nt nu dp mo kg nv nw ms kk nx ny mw ko nz oa na ob bi translated">更多内容请访问<a class="ae me" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> PlainEnglish.io </a>。</h2><p id="3aa9" class="pw-post-body-paragraph jv jw in jx b jy nc ka kb kc nd ke kf kg ne ki kj kk nf km kn ko ng kq kr ks ig bi translated"><em class="no">报名参加我们的</em> <a class="ae me" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="no">免费周报</em> </strong> </a> <em class="no">。关注我们上</em> <a class="ae me" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="no">推特</em> </strong> </a>，<a class="ae me" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="no">领英</em> </strong> </a> <strong class="jx io"> <em class="no">，</em></strong><a class="ae me" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="no">YouTube</em></strong></a><strong class="jx io"><em class="no">，以及</em></strong><em class="no"/><a class="ae me" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="no">不和</em> </strong> </a>T47】</p><h2 id="a759" class="nq lu in bd mg nr ns dn mk nt nu dp mo kg nv nw ms kk nx ny mw ko nz oa na ob bi translated">希望扩大你的科技创业公司的知名度和采用率吗？检查<a class="ae me" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank">电路</a>。</h2></div></div>    
</body>
</html>