<html>
<head>
<title>How to HandleVariables in Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Cypress中处理变量</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-handlevariables-in-cypress-8a6ed9a5a2f2?source=collection_archive---------2-----------------------#2022-10-26">https://javascript.plainenglish.io/how-to-handlevariables-in-cypress-8a6ed9a5a2f2?source=collection_archive---------2-----------------------#2022-10-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="77ba" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于如何在Cypress中处理变量的教程。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/56e1e73dabd4b0c2b81fffa2bfc74222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IG8ZHZWqvvP7HUqwPZsBmA.png"/></div></div></figure><p id="4cc7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本教程中，我们将学习如何在Cypress中处理变量。由于Cypress处理承诺的方式，在Cypress中处理变量并不像看起来那么简单。让我们来看看——</p><h1 id="5aa9" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">理解问题</h1><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="246e" class="mh ll in md b gy mi mj l mk ml">it("gets the text of the heading and assert the value", () =&gt; {<br/>    // get the text<br/>    cy.get("h1.elementor-heading-title").then(($heading) =&gt; {<br/>      expect($heading.text()).to.eq("Think different. Make different.");<br/>    })<br/>  });</span></pre><p id="ba8d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在上面的例子中，我们试图获取元素的文本，然后对其进行断言。如果你想在<code class="fe mm mn mo md b">cy.get</code>块之外使用标题文本，该怎么做呢？简单地说，创建这样的变量是行不通的</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="e43f" class="mh ll in md b gy mi mj l mk ml">it("gets the text of the heading and assert the value", () =&gt; {<br/>    let headingText = '';<br/>    // get the text<br/>    cy.get("h1.elementor-heading-title").then(($heading) =&gt; {<br/>      headingText = $heading.text()<br/>      expect($heading.text()).to.eq("Think different. Make different.");<br/>    })<br/>    // X - would print just an empty string<br/>    console.log(headingText); <br/>  });</span></pre><p id="0879" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因为<code class="fe mm mn mo md b">cy.get</code>是一个<code class="fe mm mn mo md b">async</code>命令，所以<code class="fe mm mn mo md b">console.log</code>不会打印任何东西是因为它甚至会在<code class="fe mm mn mo md b">cy.get</code>命令被执行之前被打印。因此，我们需要一种方法，先等待<code class="fe mm mn mo md b">cy.get</code>命令完成，然后打印出我们的文本。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="7271" class="lk ll in bd lm ln mw lp lq lr mx lt lu jt my ju lw jw mz jx ly jz na ka ma mb bi translated">在Cypress中处理变量</h1><p id="5f36" class="pw-post-body-paragraph ko kp in kq b kr nb jo kt ku nc jr kw kx nd kz la lb ne ld le lf nf lh li lj ig bi translated">在Cypress中有两种方法可以处理测试块中的变量。</p><ul class=""><li id="ea33" class="ng nh in kq b kr ks ku kv kx ni lb nj lf nk lj nl nm nn no bi translated"><strong class="kq io">访问同一块内的变量</strong></li></ul><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="eda1" class="mh ll in md b gy mi mj l mk ml">it("gets the text of the heading and assert the value", () =&gt; {<br/>    // get the text<br/>    cy.get("h1.elementor-heading-title").then(($heading) =&gt; {<br/>      let headingText = $heading.text()<br/>      expect($heading.text()).to.eq("Think different. Make different.");<br/>      // Use the heading text value here<br/>      console.log(headingText);   <br/>    })<br/>  });</span></pre><p id="f700" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这个非常简单，因为只要需要访问上下文或变量，就可以在同一个块中继续创建嵌套块。</p><ul class=""><li id="c22c" class="ng nh in kq b kr ks ku kv kx ni lb nj lf nk lj nl nm nn no bi translated"><strong class="kq io">访问块外变量</strong></li></ul><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="a5cb" class="mh ll in md b gy mi mj l mk ml">it("gets the text of the heading and assert the value", () =&gt; {<br/>    // get the text<br/>    cy.get("h1.elementor-heading-title").then(($heading) =&gt; {<br/>      let headingText = $heading.text();<br/>      expect($heading.text()).to.eq("Think different. Make different.");</span><span id="7387" class="mh ll in md b gy np mj l mk ml">      // return the text so it can be used in .then as a parameter<br/>      return headingText; <br/>    }).then(hText =&gt; {<br/>      // hText param holds the value of the above returned text<br/>      console.log(hText);<br/>    })<br/>  });</span></pre><p id="fd88" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用<code class="fe mm mn mo md b">.then</code>块，您可以访问先前返回的值，然后将其作为参数传递给<code class="fe mm mn mo md b">.then</code>块。这样，如果在同一个上下文中，就可以将多个方法链接在一起。<br/>这里需要注意的重要一点是，它只适用于<code class="fe mm mn mo md b">.then</code>模块，不适用于<code class="fe mm mn mo md b">.should</code>。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="8c63" class="lk ll in bd lm ln mw lp lq lr mx lt lu jt my ju lw jw mz jx ly jz na ka ma mb bi translated">要了解更多信息，请查看下面的视频——</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="d8b4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">👩🏻‍💻是时候加入SDET大学学院，开始你的SDET之旅了👇🏻<br/> <a class="ae ns" href="https://bit.ly/3Vcqv69" rel="noopener ugc nofollow" target="_blank">加入学院</a></p><p id="7dfb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">📧订阅我的<a class="ae ns" href="https://automationbro.com/mailing-list" rel="noopener ugc nofollow" target="_blank">邮件列表</a>以获取更多类似的内容，并成为令人惊叹的免费赠品的一部分。</p><p id="c944" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">👍你也可以在这里关注我的内容</p><ul class=""><li id="b5b7" class="ng nh in kq b kr ks ku kv kx ni lb nj lf nk lj nl nm nn no bi translated"><a class="ae ns" href="https://twitter.com/automationbro" rel="noopener ugc nofollow" target="_blank">推特</a></li><li id="55b3" class="ng nh in kq b kr nt ku nu kx nv lb nw lf nx lj nl nm nn no bi translated"><a class="ae ns" href="https://www.linkedin.com/company/automation-bro" rel="noopener ugc nofollow" target="_blank">领英</a></li></ul><p id="baf2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢阅读！</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="9d50" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ny">更多内容请看</em><a class="ae ns" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ny">plain English . io</em></strong></a><em class="ny">。报名参加我们的</em> <a class="ae ns" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ny">免费周报</em> </strong> </a> <em class="ny">。关注我们关于</em><a class="ae ns" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ny">Twitter</em></strong></a><a class="ae ns" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ny">LinkedIn</em></strong></a><em class="ny"/><a class="ae ns" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ny">YouTube</em></strong></a><em class="ny"/><a class="ae ns" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ny">不和</em> </strong> </a> <em class="ny">。对增长黑客感兴趣？检查</em> <a class="ae ns" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ny">电路</em> </strong> </a> <em class="ny">。</em></p></div></div>    
</body>
</html>