<html>
<head>
<title>A Quick Start to TypeScript in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js中的TypeScript快速入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-quick-start-to-typescript-in-node-f6d171909238?source=collection_archive---------9-----------------------#2022-03-17">https://javascript.plainenglish.io/a-quick-start-to-typescript-in-node-f6d171909238?source=collection_archive---------9-----------------------#2022-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de81" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用TypeScript编写你的第一个程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/01e99cc6fd7c5d5ebbd05cd6230e209b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pMbmfbYTAAAGuIZu"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@cdr6934?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Ried</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0c35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">近年来，TypeScript越来越受欢迎。根据2021年StackOverflow开发者调查，它是开发者最想使用的三种编程语言之一。</p><p id="cf3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TypeScript是微软在2012年10月开发的一种免费、开源、面向对象的编程语言。它提供了有助于类型安全和代码可读性的类型注释。TypeScript是JavaScript的超集，因此任何有效的JavaScript语法也是有效的TypeScript。TypeScript编译器将编写的TypeScript编译成等效的JavaScript。</p><p id="cc21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将在每个人最喜欢的运行时Node.js中动手编写和测试我们的TypeScript代码。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1e75" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">安装依赖项</h1><h2 id="ad25" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated"><strong class="ak">创建项目结构</strong></h2><p id="7815" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">让我们首先创建一个新文件夹:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="e34c" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ mkdir tsdemo<br/>$ cd tsdemo</strong></span></pre><p id="d119" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在初始化新项目。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="6362" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ npm init -y</strong><br/>Wrote to /home/umang/WORK_REPO/tsdemo/package.json:</span><span id="f5c7" class="mr ma iq nj b gy nr no l np nq">{<br/>  "name": "tsdemo",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC"<br/>}</span></pre><p id="d897" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，<code class="fe ns nt nu nj b">-y</code>将对所有问题填充答案默认值。</p><h2 id="5ef2" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">安装TypeScript编译器</h2><p id="e42a" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">使用以下命令在当前目录中安装TypeScript。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="3fdd" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ npm install --save-dev typescript</strong></span></pre><p id="f7dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要检查typescript是否正常工作:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="eaaf" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ tsc -v</strong><br/>Version 4.6.2</span></pre><p id="c331" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TypeScript使用<code class="fe ns nt nu nj b">tsconfig.json</code>在当前项目中配置编译器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Refer <a class="ae kv" href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" rel="noopener ugc nofollow" target="_blank">TypeScript Documentation</a> to go over the keys in the above JSON snippet.</figcaption></figure><p id="afbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将把TypeScript文件编译成JavaScript，放在<code class="fe ns nt nu nj b">dist</code>文件夹中。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="43d4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">打字稿中的Hello World</h1><p id="29c6" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">创建一个文件<code class="fe ns nt nu nj b">app.js</code>。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="5827" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ touch src/app.js</strong></span></pre><p id="2881" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将下面的代码添加到<code class="fe ns nt nu nj b">app.js</code>中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="03dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<code class="fe ns nt nu nj b">tsc</code>命令传输代码。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="626f" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ npx tsc</strong></span></pre><p id="b078" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编译后的代码可以在<code class="fe ns nt nu nj b">dist/app.js</code>中访问。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="74b5" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ cat dist/app.js</strong><br/>const greeting = "Hello, World!";<br/>console.log(greeting);<br/>//# sourceMappingURL=app.js.map</span></pre><p id="0a3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用node运行编译后的代码。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="5f4b" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ node dist/app.js</strong><br/>Hello, World!</span></pre><h2 id="21d6" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">数据类型</h2><p id="10c3" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">下面给出了typescript的一些数据类型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/29a6981ac1c628c790ea1b00e03886f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*RdXFD_FbMP_ERcyZdNDdfw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Refer <a class="ae kv" href="https://www.typescriptlang.org/docs/handbook/basic-types.html" rel="noopener ugc nofollow" target="_blank">Typescript handbook</a> for more information</figcaption></figure><p id="8e3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TypeScript的主要优点是静态类型检查。如果我们把一个无效的类型传递给一个给定的变量，编译器会让我们立刻意识到。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="1190" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ npx tsc</strong><br/>src/app.ts:1:7 - error TS2322: Type 'string' is not assignable to type 'number'.</span><span id="9371" class="mr ma iq nj b gy nr no l np nq">1 const greeting: number = "Hello, World";<br/>        ~~~~~~~~</span><span id="8276" class="mr ma iq nj b gy nr no l np nq">Found 1 error in src/app.ts:1</span></pre><h2 id="b9e6" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">例子</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="26ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有一个二分搜索法，它返回目标在数组中的第一个位置。代码的时间复杂度为<code class="fe ns nt nu nj b">O(log(n))</code>。该函数有两个参数:<code class="fe ns nt nu nj b">dataArr</code>和<code class="fe ns nt nu nj b">target</code>，它们分别是类型<code class="fe ns nt nu nj b">number[]</code>和<code class="fe ns nt nu nj b">number</code>。Typescript还能够隐式推断数据类型。在上面的例子中，变量start、end、result和mid都是数字。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7cc4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">编写单元测试用例</h1><p id="03f1" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">使用任何语言的任何开发人员都必须编写单元测试用例。在本教程中，我们将使用Jest作为我们的测试框架。它很容易学习，不需要设置。</p><h2 id="239f" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">安装Jest</h2><p id="8404" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">转到项目的根目录，运行以下命令。我们将Jest作为包依赖项安装。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="c635" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ npm install jest --save-dev</strong></span></pre><p id="7f66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<code class="fe ns nt nu nj b">ts-jest</code>来映射Typescript和Jest。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="a96d" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ npm install ts-jest --save-dev</strong></span></pre><p id="d704" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们将为Jest安装类型定义。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="1687" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ npm install @types/jest --save-dev</strong></span></pre><p id="15f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将以下配置添加到<code class="fe ns nt nu nj b">jsconfig</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Refer <a class="ae kv" href="https://jestjs.io/docs/configuration" rel="noopener ugc nofollow" target="_blank">Jest Configuration</a> for more information</figcaption></figure><h2 id="04ff" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">添加测试用例</h2><p id="7841" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">让我们为二分搜索法写一个基本的测试用例。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="3035" class="mr ma iq nj b gy nn no l np nq">$ touch src/app.test.ts</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="9ce9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行测试用例:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="39c9" class="mr ma iq nj b gy nn no l np nq"><strong class="nj ir">$ jest</strong><br/> PASS src/app.test.ts<br/> Testing Binary Search<br/> ✓ verify the the target returns output. (3 ms)<br/> ✓ verify -1 is returned if target is not found. (1 ms)<br/> ✓ verify -1 is returned for empty array. (1 ms)<br/> ✓ verify the first position is returned for duplicate elements. (1 ms)</span><span id="a4a8" class="mr ma iq nj b gy nr no l np nq">Test Suites: 1 passed, 1 total<br/>Tests: 4 passed, 4 total<br/>Snapshots: 0 total<br/>Time: 2.483 s, estimated 3 s<br/>Ran all test suites.</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="f621" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">更新package.json</h2><p id="77cf" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">记住每个项目和库的命令是没有用的。最好将命令集成到npm脚本中。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="b47f" class="mr ma iq nj b gy nn no l np nq">{<br/>   "name": "tsdemo",<br/>   "version": "1.0.0",<br/>   "main": "dist/app.js",<br/>   "scripts": {<br/><strong class="nj ir">       "start": "npx tsc &amp;&amp; node  dist/app.js",<br/>       "test": "jest"</strong><br/>   },<br/>   "keywords": [],<br/>   "author": "",<br/>   "license": "ISC",<br/>   "devDependencies": {<br/>       "@types/express": "^4.17.1",<br/>       "@types/jest": "^27.4.1",<br/>       "jest": "^27.5.1",<br/>       "ts-jest": "^27.1.3",<br/>       "typescript": "^4.6.2"<br/>   },<br/>   "dependencies": {<br/>       "express": "^4.17.1"<br/>   },<br/>   "description": ""<br/>}</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="0345" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">至此，我们对如何使用TypeScript有了基本的了解。希望这篇文章对你有用。</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="0279" class="mr ma iq nj b gy nn no l np nq">"express": "^4.17.1"</span><span id="1129" class="mr ma iq nj b gy nr no l np nq">},</span><span id="06b5" class="mr ma iq nj b gy nr no l np nq">"description": ""</span><span id="95e4" class="mr ma iq nj b gy nr no l np nq">}</span></pre><p id="fea8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ny">更多内容尽在</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">说白了. io </em> </strong> </a> <em class="ny">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">免费周报</em> </strong> </a> <em class="ny">。关注我们关于</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">推特</em> </strong> </a> <em class="ny">和</em><strong class="ky ir"/><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ny">LinkedIn</em></strong></a><em class="ny">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ny">社区不和谐</em> </strong> </a> <em class="ny">。</em></p></div></div>    
</body>
</html>