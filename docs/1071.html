<html>
<head>
<title>Does Promise.all Execute in Parallel? How Promise.all Works in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Promise.all并行执行吗？Promise.all如何在JavaScript中工作</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/does-promise-all-execute-in-parallel-how-promise-all-works-in-javascript-fffc2e8d455d?source=collection_archive---------3-----------------------#2022-03-02">https://javascript.plainenglish.io/does-promise-all-execute-in-parallel-how-promise-all-works-in-javascript-fffc2e8d455d?source=collection_archive---------3-----------------------#2022-03-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6b8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在网上看到一些人称赞<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" rel="noopener ugc nofollow" target="_blank"> Promise.all </a>允许你的承诺并行运行。虽然这个技巧的精神是正确的，但是在Promise.all中可能会加速多个承诺的执行，从技术上来说“并行”这个词是不正确的。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/5662c28ea7650ff9c391185e57d234d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WTv3-t9v9jO5LNS0HlvNBQ.png"/></div></div></figure><p id="88f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将尽可能简单地解释Promise.all是如何工作的，以及为什么它不能并行运行。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ky kz l"/></div></figure><h2 id="a80f" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">顺序与并发与并行</h2><p id="d159" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">为了理解JavaScript的Promise.all是如何工作的，我们首先需要理解三种不同的执行范例，顺序、并发和并行。</p><p id="eb8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了说明这些范例，我将使用以下两个承诺。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ly kz l"/></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lz"><img src="../Images/a31b684f7fc9b88efdcadcd5e0f399d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BV3ycr3ZprDUH7njMNYMDA.png"/></div></div></figure><p id="91b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺序执行意味着执行并解决一个承诺，然后执行并解决下一个承诺，直到程序结束。下面的代码执行顺序性。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ly kz l"/></div></figure><p id="d0d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">睡眠功能一执行并解决，然后睡眠功能二执行并解决，最后程序退出。</p><p id="9981" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一方面，并发执行意味着一个承诺将被执行，而不需要等待它解决，下一个承诺将被执行，最后，当所有承诺都被解决时，程序将退出。以下代码同时执行。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ly kz l"/></div></figure><p id="3152" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">睡眠功能一将执行，并且不等待它解决，睡眠功能二将执行。当两个承诺都完成时，程序退出。</p><p id="c1e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如你所见，Promise.all并发执行代码，但什么是并行执行呢？</p><p id="564e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">JavaScript是单线程的，一次只能执行一个工作块，所以并行执行对于JavaScript来说是不可能的，除了一些情况，比如<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" rel="noopener ugc nofollow" target="_blank"> web workers </a>。</p><p id="b3e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并行执行意味着多个代码单元可以同时执行。在上面的例子中，这意味着睡眠功能一和睡眠功能二在完全相同的时间执行，而实际情况并非如此。</p><h2 id="a431" class="la lb iq bd lc ld le dn lf lg lh dp li jy lj lk ll kc lm ln lo kg lp lq lr ls bi translated">那么，为什么要用Promise.all呢？</h2><p id="e9b0" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ij bi translated">Promise.all非常强大，尤其是在执行I/O操作时，在Promise执行之后，应用程序不需要做任何工作，比如网络或数据库请求。允许一次发送多个请求意味着应用程序在等待网络请求响应时不会被阻塞。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="d7a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🌎请跟随我:</p><p id="7e15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">YouTube:【https://www.youtube.com/TomDoesTech T4】</p><p id="338f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不和:<a class="ae kl" href="https://discord.gg/4ae2Esm6P7" rel="noopener ugc nofollow" target="_blank">https://discord.gg/4ae2Esm6P7</a>推特:<a class="ae kl" href="https://twitter.com/tomdoes_tech" rel="noopener ugc nofollow" target="_blank">https://twitter.com/tomdoes_tech</a>脸书:https://www.facebook.com/tomdoestech insta gram:https://www.instagram.com/tomdoestech☕给我买杯咖啡:<a class="ae kl" href="https://www.buymeacoffee.com/tomn" rel="noopener ugc nofollow" target="_blank">https://www.buymeacoffee.com/tomn</a></p><p id="5636" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mh">更多内容看</em> <a class="ae kl" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mh">说白了就是io </em> </strong> </a> <em class="mh">。报名参加我们的</em> <a class="ae kl" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mh">免费周报</em> </strong> </a> <em class="mh">。关注我们关于</em><a class="ae kl" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mh">Twitter</em></strong></a><em class="mh">和</em><a class="ae kl" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mh">LinkedIn</em></strong></a><em class="mh">。加入我们的</em> <a class="ae kl" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mh">社区</em> </strong> </a> <em class="mh">。</em></p></div></div>    
</body>
</html>