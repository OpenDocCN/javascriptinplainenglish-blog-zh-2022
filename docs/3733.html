<html>
<head>
<title>How to Handle New Tabs in Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Cypress中处理新标签</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-handle-new-tabs-in-cypress-fe768d13f357?source=collection_archive---------2-----------------------#2022-09-21">https://javascript.plainenglish.io/how-to-handle-new-tabs-in-cypress-fe768d13f357?source=collection_archive---------2-----------------------#2022-09-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="66fe" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Cypress不支持新标签的解决方法。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b226343aa15b534434aa5b7d0c246f5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bHCuJ_Qnic0GYDEiChR7xw.png"/></div></div></figure><p id="4cf9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本帖中，我们将学习如何在Cypress中处理新标签。默认情况下，Cypress不支持新的选项卡，我们将研究一个变通方法来解决这个问题。</p><h1 id="6a57" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">为什么Cypress不支持第二个tab？</h1><p id="67c9" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">Cypress测试在浏览器中运行，因此它将测试注入到第一个窗口/标签中；选项卡之外的任何内容，Cypress都无法访问。</p><p id="984f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是Cypress团队的设计决定，即使在将来，他们也不会支持多标签。</p></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><h1 id="d6a7" class="lk ll in bd lm ln mo lp lq lr mp lt lu jt mq ju lw jw mr jx ly jz ms ka ma mb bi translated">如何在Cypress中处理新标签页？</h1><p id="a639" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">好的，我们知道Cypress不支持新标签页，但是如果你的应用程序在新标签页中打开链接，你会怎么处理这种情况呢？嗯，我们将需要做一些变通办法来让这个工作。</p><p id="a0ae" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，理解网站如何打开第二个标签页是很重要的。这是两种常见的方式:</p><ul class=""><li id="33dc" class="mt mu in kq b kr ks ku kv kx mv lb mw lf mx lj my mz na nb bi translated">使用<code class="fe nc nd ne nf b">target="_blank"</code>属性<em class="ng">(最常见)</em></li><li id="6936" class="mt mu in kq b kr nh ku ni kx nj lb nk lf nl lj my mz na nb bi translated">使用JavaScript重定向</li></ul></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><h1 id="b9d2" class="lk ll in bd lm ln mo lp lq lr mp lt lu jt mq ju lw jw mr jx ly jz ms ka ma mb bi translated">处理<code class="fe nc nd ne nf b">target</code>属性</h1><pre class="kd ke kf kg gt nm nf nn no aw np bi"><span id="56e8" class="nq ll in nf b gy nr ns l nt nu">&lt;a href="/contact" target="_blank" role="button" id="contact-us"&gt;</span></pre><p id="d4b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当浏览器在一个链接上看到<code class="fe nc nd ne nf b">target="_blank"</code>时，它会自动知道在一个新标签中打开这个链接。我们可以利用这一点，从链接中删除<code class="fe nc nd ne nf b">target</code>属性，然后浏览器将在同一个选项卡中打开链接。</p><pre class="kd ke kf kg gt nm nf nn no aw np bi"><span id="5057" class="nq ll in nf b gy nr ns l nt nu">it('Handling new tab', () =&gt; {<br/>    cy<br/>      .get('#contact-us')<br/>      .invoke("removeAttr", "target")<br/>      .click() // will open the contact page in a new tab<br/>    cy.get("h1").should("have.text", "Contact");<br/>  })</span></pre><p id="b6f2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们使用<code class="fe nc nd ne nf b">invoke</code>方法从链接元素中移除<code class="fe nc nd ne nf b">target</code>属性，该属性触发浏览器在同一个选项卡中打开链接。</p></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><h1 id="4aee" class="lk ll in bd lm ln mo lp lq lr mp lt lu jt mq ju lw jw mr jx ly jz ms ka ma mb bi translated">处理JavaScript重定向</h1><p id="9150" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">对于JavaScript重定向，您需要理解重定向是如何完成的，并在此基础上实现一个解决方案。这是一个很好的<a class="ae nv" href="https://glebbahmutov.com/blog/cypress-second-tab/" rel="noopener ugc nofollow" target="_blank">链接</a>供Gleb Bahmutov参考，它提供了处理这种情况的各种解决方案。</p></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="c16d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">要了解更多关于如何在Cypress中处理新标签页的信息，请观看下面的视频:</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="070d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">📧订阅我的<a class="ae nv" href="https://automationbro.com/mailing-list" rel="noopener ugc nofollow" target="_blank">邮件列表</a>以获取更多类似的内容，并成为令人惊叹的免费赠品的一部分。</p><p id="6b52" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">👍你也可以在这里关注我的内容</p><ul class=""><li id="3246" class="mt mu in kq b kr ks ku kv kx mv lb mw lf mx lj my mz na nb bi translated"><a class="ae nv" href="https://twitter.com/automationbro" rel="noopener ugc nofollow" target="_blank">推特</a></li><li id="3d90" class="mt mu in kq b kr nh ku ni kx nj lb nk lf nl lj my mz na nb bi translated"><a class="ae nv" href="https://www.linkedin.com/company/automation-bro" rel="noopener ugc nofollow" target="_blank">领英</a></li></ul></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="6cc7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ng">更多内容请看</em><a class="ae nv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ng">plain English . io</em></strong></a><em class="ng">。报名参加我们的</em> <a class="ae nv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ng">免费周报</em> </strong> </a> <em class="ng">。关注我们关于</em><a class="ae nv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ng">Twitter</em></strong></a><a class="ae nv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ng">LinkedIn</em></strong></a><em class="ng"/><a class="ae nv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ng">YouTube</em></strong></a><em class="ng"/><a class="ae nv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="ng">不和</em> </strong> </a> <em class="ng">。对增长黑客感兴趣？检查</em> <a class="ae nv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="ng">电路</em> </strong> </a> <em class="ng">。</em></p></div></div>    
</body>
</html>