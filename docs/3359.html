<html>
<head>
<title>6 Unexpected JavaScript Problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个意想不到的JavaScript问题</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6-unexpected-javascript-problems-50d7dc6493e7?source=collection_archive---------12-----------------------#2022-08-22">https://javascript.plainenglish.io/6-unexpected-javascript-problems-50d7dc6493e7?source=collection_archive---------12-----------------------#2022-08-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="61d7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于前端你应该知道的6个问题。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/47c5e3861cf68ce670962c91f8f06001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8TzW5_qz2YlKEfGn"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@sickle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sergey Pesterev</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ac04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为前端开发工程师，JavaScript是我们主要的开发语言。它有相对简单的语法和完善的生态系统，在社区中越来越有影响力。在使用的过程中，我们经常会遇到各种奇怪的问题，这些问题经常让我们困惑。所以我列出了6个常见而有趣的问题。</p><h2 id="3d7b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">1.奇怪的尝试…捕捉行为</h2><p id="11bc" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">问题:下面的代码执行时会返回什么，2还是3？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="3dcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">答案是3。这是为什么呢？这是因为在try…catch…finally语句中，无论是否引发异常，finally子句都会执行。此外，如果引发异常，即使没有处理异常的catch子句，finally子句中的语句也会执行。</p><div class="ms mt gp gr mu mv"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">try…catch — JavaScript | MDN</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">try…catch语句由try块和/或catch块、finally块组成。中的代码…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">developer.mozilla.org</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj kp mv"/></div></div></a></div><h2 id="ca94" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">2.[]和null都是对象</h2><p id="e924" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">下面3行代码的结果是什么？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="5502" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">返回的结果是这样的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="c98e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">typeof运算符返回一个字符串，并且必须符合表37: typeof运算符返回值。它为空、普通对象、标准特定对象和不实现[[Call]]的非标准特定对象返回字符串“object”。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="e84d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，您可以使用toString方法来检查对象的类型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><div class="ms mt gp gr mu mv"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">类型of — JavaScript | MDN</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">typeof非常有用，但它并不像所要求的那样通用。例如，typeof []，是' object '，以及…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">developer.mozilla.org</p></div></div><div class="ne l"><div class="nk l ng nh ni ne nj kp mv"/></div></div></a></div><h2 id="59b2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">3.arrow函数返回undefined</h2><p id="ebc1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">为什么函数f2执行后返回undefined？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="632d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的第一印象应该是返回{}，但是它返回undefined，本质上是因为arrow函数返回{}是arrow函数语法的一部分，{}不返回，所以默认返回undefined。我们可以写一个测试用例来看看。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="eb01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以上面的f2函数返回undefined，尽管如果需要，只需将返回值括在括号中，就可以返回一个{}对象。</p><pre class="kg kh ki kj gt nl nm nn no aw np bi"><span id="bee6" class="ls lt iq nm b gy nq nr l ns nt">let f2 = () =&gt; ({});<br/>f2(); <em class="nu">// -&gt; {}</em></span></pre><h2 id="aec7" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">4.我们也可以使用反引号来执行函数吗？</h2><p id="77dc" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">除了下面的方法，还有其他方法调用函数吗？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="db00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，我们可以使用“反报价”调用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="6791" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这看起来很神奇，但它实际上使用了一个模板字符串。这是模板字符串的高级形式，带有标签的模板字符串。在上面的示例代码中，f函数是模板文字标签。标签可用于解析函数模板字符串。tag函数的第一个参数包含一个字符串值数组。其余参数与表达式相关。</p><div class="ms mt gp gr mu mv"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">模板文字(模板字符串)— JavaScript | MDN</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">在普通模板文本中，允许使用以下转义序列:以\u开头的Unicode转义，例如…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">developer.mozilla.org</p></div></div><div class="ne l"><div class="nv l ng nh ni ne nj kp mv"/></div></div></a></div><h2 id="07f9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">5.JavaScript里有标签？</h2><p id="4b44" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">下面这种写法会不会有问题？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="f27d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">答案是否定的，它会返回Hello字符串。这是因为foo被识别为标签然后执行，后面跟着console . log(“Hello”)然后break foo中断执行。我们经常使用带标签的语句和break/continue语句来结束或继续循环。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><div class="ms mt gp gr mu mv"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">标签— JavaScript | MDN</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">您可以使用标签来标识循环，然后使用break或continue语句来指示程序是否…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">developer.mozilla.org</p></div></div><div class="ne l"><div class="nw l ng nh ni ne nj kp mv"/></div></div></a></div><h2 id="8078" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">6.{}{}未定义</h2><p id="4409" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们可以在控制台中测试以下代码。像这样的结构将返回最后定义的对象的值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="345c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">解析到{}时，返回undefined，解析到{foo: 'bar'}{}时，表达式{foo: 'bar'}返回' bar '。</p><p id="4c70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里的{}有两个意思:表示“对象”或者表示“代码块”。</p><p id="bf42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如()=&gt; {}中的{}表示“代码块”。所以我们要加上括号:()=&gt; ({})才能让它正确返回一个对象。</p><p id="b1fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，如果我们现在使用{foo: 'bar'}作为一个“块”，我们可以在终端中写这个。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="8453" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">啊哈，结果一样！所以{foo: 'bar'}{}中的括号表示“代码块”。</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="17e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="nu">欢迎关注我上</em></strong><a class="ae kv" href="https://twitter.com/yanghui0324" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">Twitter</em></strong></a><strong class="ky ir"><em class="nu"/></strong><a class="ae kv" href="https://www.linkedin.com/in/hui-yang-075076245/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">LinkedIn</em></strong></a><strong class="ky ir"><em class="nu">，以及</em></strong><a class="ae kv" href="https://github.com/guchen-yh" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">GitHub</em></strong><strong class="ky ir"><em class="nu">！</em> </strong></a></p><p id="bb40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">写作一直是我的激情所在，它给了我帮助和激励他人的快乐。如果您有任何问题，请随时联系我们！ </p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="58c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nu">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">plain English . io</em></strong></a><em class="nu">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">免费周报</em> </strong> </a> <em class="nu">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">LinkedIn</em></strong></a><em class="nu"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">YouTube</em></strong></a><em class="nu"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">不和</em> </strong> </a> <em class="nu">。</em></p></div></div>    
</body>
</html>