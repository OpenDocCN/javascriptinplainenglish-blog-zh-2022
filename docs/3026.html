<html>
<head>
<title>Integrate Braintree Payment Gateway SDK in Node.js and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js中集成Braintree支付网关SDK和React</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/integration-of-the-braintree-payment-gateway-sdk-in-node-js-and-react-js-ba64bd48177f?source=collection_archive---------0-----------------------#2022-07-24">https://javascript.plainenglish.io/integration-of-the-braintree-payment-gateway-sdk-in-node-js-and-react-js-ba64bd48177f?source=collection_archive---------0-----------------------#2022-07-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1cae" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在基于Typescript的应用程序中集成Braintree支付网关的入门指南(Node.js &amp; React)</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ef89ad0995801b1f0a8cb27ced111564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K3UMb_Ducq4ZL5DhFfYJ-g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Source — <a class="ae ks" href="https://www.braintreepayments.com/features" rel="noopener ugc nofollow" target="_blank">https://www.braintreepayments.com/features</a></figcaption></figure><h1 id="d35e" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated"><strong class="ak">简介</strong></h1><p id="26fe" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">在本文中，我们将集成Braintree API Gateway SDK以及Typescript Node.js和Express，然后我们将使用React和Typescript创建一个前端应用程序。</p><p id="8c07" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">在本文的帮助下，您可以使用Braintree Direct的插件用户界面和Braintree节点模块在沙盒中设置一个接受信用卡/借记卡支付的集成。</p><ul class=""><li id="bda9" class="mm mn in ln b lo mh lr mi lu mo ly mp mc mq mg mr ms mt mu bi translated"><code class="fe mv mw mx my b"><a class="ae ks" href="https://www.npmjs.com/package/braintree-web-drop-in" rel="noopener ugc nofollow" target="_blank">braintree-web-drop-in</a></code></li><li id="f626" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated"><code class="fe mv mw mx my b"><a class="ae ks" href="https://www.npmjs.com/package/braintree" rel="noopener ugc nofollow" target="_blank">braintree</a></code></li></ul><h1 id="f190" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">它是如何工作的？</h1><p id="802f" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">下图显示了您的客户端、服务器和Braintree的交互方式:</p><ul class=""><li id="f107" class="mm mn in ln b lo mh lr mi lu mo ly mp mc mq mg mr ms mt mu bi translated">步骤1:从服务器请求Braintree客户端令牌。</li><li id="33b1" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">步骤2:使用Braintree客户端令牌初始化客户端SDK。</li><li id="7102" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">步骤3:客户端提交详细信息，以使用客户端SDK从Braintree获取支付方法nonce。</li><li id="3180" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">步骤4:交易请求(通过在交易请求中添加支付方法nonce，请求服务器使用交易请求进行交易)。</li><li id="407f" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">步骤5:通过传递事务请求，使用服务器端SDK在服务器上进行事务。</li><li id="1d8f" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">第6步:处理事务响应，并使用必需的字段将其发送回服务器。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/5276e33e2ae5405158325ff64d0602e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N1TWakihnjSZ9NJzYlJwhg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Braintree — How It works</figcaption></figure><h2 id="7aea" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">重要的关键词和定义</h2><ul class=""><li id="85d5" class="mm mn in ln b lo lp lr ls lu nr ly ns mc nt mg mr ms mt mu bi translated">布伦特里令牌</li><li id="8cfc" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">付款方式现时</li><li id="2f29" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">交易请求</li><li id="fb83" class="mm mn in ln b lo mz lr na lu nb ly nc mc nd mg mr ms mt mu bi translated">交易响应</li></ul><pre class="kd ke kf kg gt nu my nv nw aw nx bi"><span id="497e" class="nf ku in my b gy ny nz l oa ob">interface IBraintreeToken {     <br/>    token: string; <br/>}</span><span id="ece1" class="nf ku in my b gy oc nz l oa ob">paymentMethodNonce: string;</span><span id="c9b1" class="nf ku in my b gy oc nz l oa ob">interface ITransactionRequest {     <br/>  amount: string;     <br/>  paymentMethodNonce?: string | undefined;     <br/>  deviceData?: string | undefined; <br/>}</span><span id="25f8" class="nf ku in my b gy oc nz l oa ob">interface ITransactionResponse {     <br/>   id: string;    <br/>   status: string;     <br/>   type: string;     <br/>   currencyIsoCode: string;     <br/>   amount: string;     <br/>   merchantAccountId: string;     <br/>   orderId: string;     <br/>   createdAt: string;     <br/>   updatedAt: string; <br/>}</span></pre><h2 id="456d" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">设置基于JS、Express JS和Typescript的服务器节点</h2><p id="725d" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">对于本文，我们将使用已经使用TypeScript和Express创建的<a class="ae ks" href="https://github.com/santoshshinde2012/node-boilerplate" rel="noopener ugc nofollow" target="_blank"> Node.js样板</a>代码。</p><div class="od oe gp gr of og"><a href="https://github.com/santoshshinde2012/node-boilerplate" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">GitHub-Santosh shinde 2012/Node-Boilerplate:用于微服务的节点类型脚本样板…</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">微服务的节点类型脚本样板。用TypeScript编写的Node.js应用程序的框架(带有安装说明…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">github.com</p></div></div><div class="op l"><div class="oq l or os ot op ou km og"/></div></div></a></div><pre class="kd ke kf kg gt nu my nv nw aw nx bi"><span id="e1bb" class="nf ku in my b gy ny nz l oa ob">// clone the application<br/>git clone https://github.com/santoshshinde2012/node-boilerplate.git<br/><br/>// change to the new directory<br/>cd node-boilerplate<br/><br/>// install the all modules<br/>npm install<br/><br/>// start the application<br/>npm start</span></pre><h2 id="307d" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤1-安装NPM模块并设置Braintree沙盒</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ov"><img src="../Images/5305a84e6fcca4ce6b1a3f1fcb0c1c10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aiu23LjiBWOnxBFf9dpEzw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Setup Environment for backend</figcaption></figure><pre class="kd ke kf kg gt nu my nv nw aw nx bi"><span id="8657" class="nf ku in my b gy ny nz l oa ob">npm install braintree --save</span><span id="5a22" class="nf ku in my b gy oc nz l oa ob">npm install @types/braintree --save-dev</span></pre><h2 id="b9d0" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤2—创建布伦特里包装器</h2><p id="21b1" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">使用环境和API凭据配置Braintree网关。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ow"><img src="../Images/068810c343eb49d5871ad672156cb34f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-sidLHv0V4bgqhq111jdQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Braintree Wrapper</figcaption></figure><h2 id="b40e" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤3-设置支付控制器</h2><p id="5c5a" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">设置支付控制器，以处理客户通过Braintree网关生成令牌和进行交易的请求。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ox"><img src="../Images/9065e6a43644bbede309893fab75d6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3QrrUlRk9MOH_xq7g871Rg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Setup Payment Controller</figcaption></figure><p id="05c2" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">下面是指向包含Node.js Braintree网关处理程序源代码的存储库的链接。</p><div class="od oe gp gr of og"><a href="https://github.com/santoshshinde2012/node-braintree-integration" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">GitHub-Santosh shinde 2012/Node-brain tree-Integration:Node-Typescript-brain tree-Integration</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">节点类型脚本Braintree集成克隆应用程序git克隆…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">github.com</p></div></div><div class="op l"><div class="oy l or os ot op ou km og"/></div></div></a></div><h2 id="0f0e" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">设置基于React和TypeScript的客户端</h2><p id="457b" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">Braintree JavaScript SDK为您提供了几种收集客户付款信息的方法。启动和运行的最简单方式是通过嵌入式UI。其他集成请参见<a class="ae ks" href="https://developer.paypal.com/braintree/docs/guides/client-sdk/setup/javascript/v3" rel="noopener ugc nofollow" target="_blank"> JS SDK概述</a>。</p><pre class="kd ke kf kg gt nu my nv nw aw nx bi"><span id="9abd" class="nf ku in my b gy ny nz l oa ob">// clone the application<br/>git clone <a class="ae ks" href="https://github.com/santoshshinde2012/braintree-react-typescript.git" rel="noopener ugc nofollow" target="_blank">https://github.com/santoshshinde2012/braintree-react-typescript.git</a><br/><br/>// change to the new directory<br/>cd node-boilerplate<br/><br/>// install the all modules<br/>npm install<br/><br/>// start the application<br/>npm start</span></pre><h2 id="663e" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤1 —安装NPM模块</h2><pre class="kd ke kf kg gt nu my nv nw aw nx bi"><span id="acf6" class="nf ku in my b gy ny nz l oa ob">npm install braintree-web-drop-in --save</span><span id="bff2" class="nf ku in my b gy oc nz l oa ob">npm install @types/braintree-web-drop-in --save-dev</span></pre><h2 id="9a66" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤2-创建决策树组件</h2><p id="454c" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">这里，我们将创建Braintree组件，它将初始化Braintree web客户端SDK并获取支付方式nonce。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oz"><img src="../Images/e0991fccdd3b3f13505619ed93eeb841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hnzlCth2r_B-UrXSW2dhlQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Create Braintree Component</figcaption></figure><h2 id="c7a0" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤3-创建支付HTTP客户端服务</h2><p id="a3ab" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">为了使用Axios HTTP客户端处理我们的服务器API调用，我们将创建支付HTTP客户端服务。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pa"><img src="../Images/f12f5d151c5c4db5c9b7530674603f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vg4jza7IJ0gr-e2pNXdErg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Payment HTTP Client Service</figcaption></figure><h2 id="6b2b" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤4-创建付款处理程序页面组件</h2><p id="eec0" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">基本上，这个页面组件负责处理付款，我们必须使用Braintree web组件包装器。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pb"><img src="../Images/737c691a0faf420d7f72ca5d92ca2460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zo9bwCMuGtpLo5oQDxHxUA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Payment Handler Page Component</figcaption></figure><h2 id="2904" class="nf ku in bd kv ng nh dn kz ni nj dp ld lu nk nl lf ly nm nn lh mc no np lj nq bi translated">步骤5—运行应用程序</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pc"><img src="../Images/e79b4159e022781abab55bd423be1d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MZ0lzYPpNvSNr8XBUyWrg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Web Application Interface</figcaption></figure><p id="4283" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">这里是React brain tree gateway web handler源代码的存储库链接。</p><div class="od oe gp gr of og"><a href="https://github.com/santoshshinde2012/braintree-react-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">GitHub-Santosh shinde 2012/brain tree-react-typescript:brain tree-react-typescript</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">github.com</p></div></div><div class="op l"><div class="pd l or os ot op ou km og"/></div></div></a></div><p id="75a7" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">感谢阅读。如果这个博客为你的学习增加了价值，请分享你的评论并鼓掌。</p></div><div class="ab cl pe pf hr pg" role="separator"><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj"/></div><div class="ig ih ii ij ik"><p id="22ae" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><em class="pl">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="pl">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="pl">免费周报</em> </strong> </a> <em class="pl">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="pl">Twitter</em></strong></a><em class="pl">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="pl">LinkedIn</em></strong></a><em class="pl">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="pl">社区不和谐</em> </strong> </a> <em class="pl">，加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="pl">人才集体</em> </strong> </a> <em class="pl">。</em></strong></a></p></div></div>    
</body>
</html>