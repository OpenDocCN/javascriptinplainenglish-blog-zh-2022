<html>
<head>
<title>What are ‘Compose’ and ‘Pipe’ in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的‘Compose’和‘Pipe’是什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-compose-and-pipe-in-javascript-142e11c4cf2b?source=collection_archive---------11-----------------------#2022-07-13">https://javascript.plainenglish.io/what-is-compose-and-pipe-in-javascript-142e11c4cf2b?source=collection_archive---------11-----------------------#2022-07-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="db15" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">为初学者简化JavaScript中“组合”和“管道”的概念。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/cd98511e46bf4e9faeb76b648d931f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*hXe1e70v6M5T0UMk3FxLaA.jpeg"/></div></figure><p id="367c" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在使用函数式编程时，您是否听说过两个术语，compose和pipe？理解起来复杂吗？对我来说，一开始很复杂。在本文中，我将为您简化这些概念。</p><h2 id="c957" class="lg lh in bd li lj lk dn ll lm ln dp lo kt lp lq lr kx ls lt lu lb lv lw lx ly bi translated">构成</h2><p id="3510" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">函数组合是一种将多个函数链接起来创建新函数的方法。这是一种通过将问题分解成更小的解决方案来解决问题的方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi me"><img src="../Images/308521c7049b30a56773eecbd570eb14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*q6IH_ugixvsZBsVIx0_Qvw.png"/></div></figure><p id="279d" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这里，函数<em class="mf"> f </em>被应用于函数<em class="mf"> g </em>的结果。正如我们看到的，函数组合是从右向左进行的。</p><p id="3806" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">假设我们想从网上商店购买一件商品。我们的第一步将是向购物车添加一个项目。然后，如果有折扣，它将被计算。第三步，我们将购买该项目。那我们的推车就空了。</p><p id="9a57" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">因此，我们的第一个功能是将商品添加到购物车中。让我们创建这个函数:</p><pre class="kd ke kf kg gt mg mh mi mj aw mk bi"><span id="4403" class="lg lh in mh b gy ml mm l mn mo">const addItemToCart = (cart, item) =&gt; cart.concat([item]);</span></pre><p id="4fb9" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我们的第二个函数将计算折扣并将其应用于商品。</p><pre class="kd ke kf kg gt mg mh mi mj aw mk bi"><span id="c452" class="lg lh in mh b gy ml mm l mn mo">const calculateDiscount = (cart) =&gt; {<br/>  const updatedCart = cart.map((item) =&gt; {<br/>    const discount = (item.price * 20) / 100;<br/>    return {<br/>      item: item.name,<br/>      price: (item.price - discount).toFixed(2),<br/>    }<br/>  })</span><span id="5094" class="lg lh in mh b gy mp mm l mn mo">return updatedCart;<br/>}</span></pre><p id="92db" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">现在，跳过<code class="fe mq mr ms mh b">buyItem</code>功能。让我们创建我们的<code class="fe mq mr ms mh b">compose</code>函数。</p><pre class="kd ke kf kg gt mg mh mi mj aw mk bi"><span id="8856" class="lg lh in mh b gy ml mm l mn mo">const compose = (f, g) =&gt; (cart, item) =&gt; f(g(cart, item));</span></pre><p id="3f5f" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这是最终的代码。</p><pre class="kd ke kf kg gt mg mh mi mj aw mk bi"><span id="2101" class="lg lh in mh b gy ml mm l mn mo">const useCart = [];</span><span id="40ee" class="lg lh in mh b gy mp mm l mn mo">const compose = (f, g) =&gt; (cart, item) =&gt; f(g(cart, item));</span><span id="b38a" class="lg lh in mh b gy mp mm l mn mo">const addItemToCart = (cart, item) =&gt; cart.concat([item]);</span><span id="cc89" class="lg lh in mh b gy mp mm l mn mo">const calculateDiscount = (cart) =&gt; {<br/>  const updatedCart = cart.map((item) =&gt; {<br/>    const discount = (item.price * 20) / 100;<br/>    return {<br/>      item: item.name,<br/>      price: (item.price - discount).toFixed(2),<br/>    }<br/>  })</span><span id="ca38" class="lg lh in mh b gy mp mm l mn mo">return updatedCart;<br/>}</span><span id="0783" class="lg lh in mh b gy mp mm l mn mo">const item = { name: 'Laptop', price: 1100.00 };<br/>const purchaseItem = compose(calculateDiscount, addItemToCart);</span><span id="eb4c" class="lg lh in mh b gy mp mm l mn mo">purchaseItem(useCart, item); // result [ { item: 'Laptop', price: 880.00 } ]</span></pre><p id="deb0" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我已经跳过了需要清空购物车来演示前两个功能的部分。现在让我们制作<code class="fe mq mr ms mh b">buyItem</code>函数，并对我们的<code class="fe mq mr ms mh b">compose</code>函数做一些修改。</p><pre class="kd ke kf kg gt mg mh mi mj aw mk bi"><span id="9b16" class="lg lh in mh b gy ml mm l mn mo">const compose = (f, g, h) =&gt; (cart, item) =&gt; f(g(h(cart, item)));</span><span id="3de3" class="lg lh in mh b gy mp mm l mn mo">const buyItem = (cart) =&gt; {<br/>  cart = [];<br/>  return cart;<br/>}</span></pre><p id="30bf" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这是最终的代码。</p><pre class="kd ke kf kg gt mg mh mi mj aw mk bi"><span id="cc5e" class="lg lh in mh b gy ml mm l mn mo">const useCart = [];</span><span id="610b" class="lg lh in mh b gy mp mm l mn mo">const compose = (f, g, h) =&gt; (cart, item) =&gt; f(g(h(cart, item)));</span><span id="1822" class="lg lh in mh b gy mp mm l mn mo">const addItemToCart = (cart, item) =&gt; cart.concat([item]);</span><span id="a894" class="lg lh in mh b gy mp mm l mn mo">const calculateDiscount = (cart) =&gt; {<br/>  const updatedCart = cart.map((item) =&gt; {<br/>    const discount = (item.price * 20) / 100;<br/>    return {<br/>      item: item.name,<br/>      price: (item.price - discount).toFixed(2),<br/>    }<br/>  })</span><span id="255c" class="lg lh in mh b gy mp mm l mn mo">return updatedCart;<br/>}</span><span id="3eea" class="lg lh in mh b gy mp mm l mn mo">const buyItem = (cart) =&gt; {<br/>  cart = [];<br/>  return cart;<br/>}</span><span id="5c7f" class="lg lh in mh b gy mp mm l mn mo">const item = { name: 'Laptop', price: 1100.00 };<br/>const purchaseItem = compose(buyItem, calculateDiscount, addItemToCart);</span><span id="0bbd" class="lg lh in mh b gy mp mm l mn mo">purchaseItem(useCart, item); // result []</span></pre><p id="c1a8" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">酷吧？</p><h2 id="52a7" class="lg lh in bd li lj lk dn ll lm ln dp lo kt lp lq lr kx ls lt lu lb lv lw lx ly bi translated">管</h2><p id="c2d3" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated"><em class="mf">管</em>完全是<em class="mf">组成</em>，除了一件事，它从左到右<strong class="km io">工作</strong>。让我们把我们的<em class="mf">作曲</em>改成一个<em class="mf">管道</em>。</p><pre class="kd ke kf kg gt mg mh mi mj aw mk bi"><span id="ed68" class="lg lh in mh b gy ml mm l mn mo">const pipe = (f, g, h) =&gt; (cart, item) =&gt; h(g(f(cart, item)));</span><span id="fe7e" class="lg lh in mh b gy mp mm l mn mo">const purchaseItem = pipe(addItemToCart, calculateDiscount, buyItem);<br/><br/>purchaseItem(useCart, item); // result []</span></pre><p id="ea3a" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">就这样，简单吧？</p><p id="76aa" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这只是改变了函数执行的顺序，我们可以获得相同的结果。</p><h2 id="6c7a" class="lg lh in bd li lj lk dn ll lm ln dp lo kt lp lq lr kx ls lt lu lb lv lw lx ly bi translated">结论</h2><p id="4ca0" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">现在，您可以设计接收数据并像制造传送带一样运行的函数，通过这些函数传递数据，直到数据到达输出。</p></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><p id="de4d" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><em class="mf">更多内容请看</em><a class="ae na" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="km io"><em class="mf">plain English . io</em></strong></a><em class="mf">。报名参加我们的</em><strong class="km io"><em class="mf"/></strong><a class="ae na" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="km io"><em class="mf">免费周报</em> </strong> </a> <em class="mf">。关注我们关于</em> <a class="ae na" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="km io"> <em class="mf">推特</em> </strong> </a>，<a class="ae na" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="km io"> <em class="mf">领英</em> </strong> </a> <em class="mf">，以及</em> <a class="ae na" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="km io"> <em class="mf">不和</em> </strong> </a> <em class="mf">。</em></p></div></div>    
</body>
</html>