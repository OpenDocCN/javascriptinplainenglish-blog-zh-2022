<html>
<head>
<title>How to Build an Azure Serverless Function and How It Works</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建Azure无服务器功能及其工作原理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-an-azure-serverless-function-and-how-it-works-fa10c28fc5a9?source=collection_archive---------6-----------------------#2022-08-11">https://javascript.plainenglish.io/how-to-build-an-azure-serverless-function-and-how-it-works-fa10c28fc5a9?source=collection_archive---------6-----------------------#2022-08-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="47fc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们经常构建系统来对一系列关键事件做出反应。无论是构建web API、响应数据库变化、处理物联网数据流，甚至是管理消息队列，每个应用程序都需要一种方法在这些事件发生时运行一些代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/b5e319e0ae672fc006d6d5f23ae02de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/1*C0OH0wGTXjEwuNZzgiPaTQ.gif"/></div></figure><p id="b59d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我打算向您展示Azure函数是如何工作的，以及我们需要什么来构建一个好的Node.js HTTP函数。</p><p id="1ebd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，我们将了解以下主题:</p><ul class=""><li id="ba53" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated"><strong class="jm io"><em class="kz">Azure函数的概念</em> </strong></li><li id="9e9d" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">支持绑定</em> </strong></li><li id="1da8" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">先决条件</em> </strong></li><li id="0121" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"><em class="kz">Azure功能中支持的语言</em> </strong></li><li id="dd07" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">功能App </em> </strong></li><li id="2589" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">文件夹结构</em> </strong></li><li id="f4b6" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">第一个函数App用Node.js </em> </strong></li><li id="7004" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">创建你的本地函数</em> </strong></li><li id="1695" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">了解一下文件夹结构提供</em> </strong></li><li id="efee" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">改进我们的局部功能</em> </strong></li><li id="40a7" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io">添加测试到我们的函数</strong></li><li id="8277" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">部署到Azure功能App </em> </strong></li><li id="6d50" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">演示</em> </strong></li><li id="f0f1" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">监控API </em> </strong></li><li id="1ef9" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">总结</em> </strong></li><li id="dc1b" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io"> <em class="kz">结论</em> </strong></li></ul><h1 id="19e5" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak"><em class="md">Azure函数的概念</em> </strong></h1><p id="6f08" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">首先，当您使用无服务器功能时，您将能够将系统的逻辑实现到容易获得的代码块中。这些代码块被称为“函数”。许多功能可以在您需要响应关键事件的任何时候运行。</p><p id="a659" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">其次，随着请求的增加，Azure Functions会根据需要提供尽可能多的资源和函数实例来满足需求——但只是在需要的时候。随着请求的减少，任何额外的资源和应用程序实例都会自动减少。</p></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><h1 id="ff0e" class="lf lg in bd lh li mq lk ll lm mr lo lp lq ms ls lt lu mt lw lx ly mu ma mb mc bi translated">我们能够创建哪种受支持的绑定？</h1><p id="7689" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">下表显示了Azure Functions运行时的主要版本中支持的绑定:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/cddcf432b2af80937693b0558d4eb91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*03vGwllwpqMvJobVIQQEqA.png"/></div><figcaption class="mw mx gj gh gi my mz bd b be z dk"><a class="ae na" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings?tabs=javascript#supported-bindings" rel="noopener ugc nofollow" target="_blank">https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings?tabs=javascript#supported-bindings</a></figcaption></figure><h1 id="e9e0" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">先决条件</h1><p id="e089" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">首先，你需要理清你的思路，这是一个新概念，它与无服务器工作有关，你需要知道的关于Azure功能的一切都可以在官方文档上搜索到，你需要创建一个微软Azure帐户。</p><ul class=""><li id="f83e" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated"><a class="ae na" href="https://azure.microsoft.com/en-us/" rel="noopener ugc nofollow" target="_blank">微软Azure账户</a></li><li id="8e2f" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><a class="ae na" href="https://azure.microsoft.com/en-us/services/functions/#overview" rel="noopener ugc nofollow" target="_blank">微软Azure功能</a></li></ul><p id="07d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">假设您已经了解Node.js REST API应用程序，那么您需要熟悉Node.js和JavaScript。您需要在本地机器上安装Node.js。</p><ul class=""><li id="0c4e" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated"><a class="ae na" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> Node.js </a></li><li id="9300" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">Java Script语言</li><li id="2aaf" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><a class="ae na" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VSCode </a></li></ul><p id="e791" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所有的API代码都是用Node.js Azure函数编写的。您需要熟悉以下内容。</p><ul class=""><li id="7938" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated"><a class="ae na" href="https://azure.microsoft.com/en-us/services/functions/" rel="noopener ugc nofollow" target="_blank"> Azure函数</a></li><li id="a7f4" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><a class="ae na" href="https://github.com/Azure/azure-functions-core-tools" rel="noopener ugc nofollow" target="_blank"> Azure功能核心工具</a></li><li id="e9bc" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">用于Visual Studio代码的Azure函数扩展<a class="ae na" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions" rel="noopener ugc nofollow" target="_blank"/></li></ul><h1 id="ff6c" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">Azure函数中支持的语言</h1><p id="16d2" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">下表显示了函数支持的哪些语言可以在Linux或Windows上运行。它还表明您的语言是否支持在Azure门户中编辑。该语言基于你在Azure门户<a class="ae na" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-create-function-app-portal#create-a-function-app" rel="noopener ugc nofollow" target="_blank">中创建函数应用</a>时选择的运行时堆栈选项。这与在Azure Functions核心工具中使用<code class="fe nb nc nd ne b">func init</code>命令时的<code class="fe nb nc nd ne b">--worker-runtime</code>选项相同。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/2df436dc80063e617cbc13caac906fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*H7YKH9lhGGwbjm0fKh_dkg.png"/></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">Generally available (GA) — Fully supported and approved for production use. Preview — Not yet supported, but expected to reach GA status in the future.</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ea71c899dd03bc9e47c2cc34f8a70510.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Lt6FegQHx1EkrVnABluKow.png"/></div></figure><h1 id="4143" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">功能应用</h1><p id="4e63" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">一个函数app在Azure中提供了一个执行<em class="kz">上下文</em>，你的函数在其中运行。因此，它是您的功能的部署和管理单元。一个功能应用程序由一个或多个单独的功能组成，这些功能被一起管理、部署和扩展。</p><p id="8f50" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">功能应用中的所有功能共享相同的定价方案、部署方法和运行时版本。将功能应用程序视为组织和集中管理您的功能的一种方式。</p><h1 id="2c20" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">文件夹结构</h1><p id="872b" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">特定函数应用程序中所有函数的代码位于包含主机配置文件的根项目文件夹中。<a class="ae na" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-host-json" rel="noopener ugc nofollow" target="_blank"> host.json </a>文件包含运行时特定的配置，位于function app的根文件夹中。一个<em class="kz"> bin </em>文件夹包含功能应用程序需要的包和其他库文件。功能应用程序所需的特定文件夹结构取决于语言。</p><h2 id="8ce3" class="nh lg in bd lh ni nj dn ll nk nl dp lp jv nm nn lt jz no np lx kd nq nr mb ns bi translated">JavaScript的文件夹结构</h2><p id="6e83" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">默认情况下，JavaScript函数从<code class="fe nb nc nd ne b">index.js</code>开始执行，这个文件与其对应的<code class="fe nb nc nd ne b">function.json</code>共享同一个父目录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/d71163cdbf2b3e5a9b2d5b0008ff8150.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*S_aj7g2iJ2hLtz9Xb7VjJw.png"/></div></figure><h1 id="1efa" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">Node.js的第一个函数应用</h1><p id="ed34" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">有两种方法可以创建Azure函数，你可以使用Azure门户直接创建它，另一种方法是通过VSCode创建它。所以，我通常用VSCode创建一个函数。</p><p id="fdfb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你应该做的第一件事是使用你的Azure帐户进行身份验证，并通过登录Azure选择合适的订阅。除此之外，你还需要安装<a class="ae na" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions" rel="noopener ugc nofollow" target="_blank"> Azure功能扩展</a>。一旦安装了Visual Studio代码的Azure Functions扩展，就可以从VSCode本身创建整个项目。</p><p id="7648" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了在本地机器上创建/测试任何函数，你需要安装的最后一个工具是<a class="ae na" href="https://github.com/Azure/azure-functions-core-tools" rel="noopener ugc nofollow" target="_blank"> Azure Functions Core Tools </a>，它包括一个支持Azure Functions运行时的相同运行时版本，你可以在本地开发计算机上运行。</p><h1 id="1acc" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">创建您的本地函数</h1><p id="935f" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">在本节中，我们将使用javascript创建一个新的本地Azure函数。稍后我们将把这段代码发布到Azure。</p><ol class=""><li id="1729" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh nu kw kx ky bi translated">选择活动栏上的Azure图标，然后点击<strong class="jm io">工作区本地选项卡，</strong>点击<strong class="jm io"> + </strong>创建一个新的本地函数。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi nv"><img src="../Images/e5f9b8954f6edde9065f1c4a1ec77087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q5CM9sJ6Lk5dlo3k8Bq8Kw.png"/></div></div></figure><p id="5c19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.选择将创建此本地函数的位置，请不要选择已经是工作区一部分的文件夹。</p><p id="f5fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.设置本地功能提示:</p><p id="0047" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.1为您的功能选择一种语言:选择<em class="kz"> JavaScript </em>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oa"><img src="../Images/e9b23a5a4f846c1ef90b9b99ca520275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H39XEhlciXWaUMJCN6XCEw.png"/></div></div></figure><p id="7dee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.2为项目的第一个函数选择一个模板:选择<em class="kz"> HTTP触发器</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ob"><img src="../Images/82d68dc42ab5f38694e1e893bfcedb21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HOlvSDH4foNxvrZxF_NlEw.png"/></div></div></figure><p id="7cf5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.3提供一个函数名:Type <em class="kz"> HttpFirstFunction </em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ob"><img src="../Images/4dccfecc37108ab19bbf40652a9dc4a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*skbiCWOhX9azjp8l-aZ32Q.png"/></div></div></figure><p id="a1bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.4选择访问级别:选择<em class="kz">匿名</em>，使得任何人都可以调用该功能，要了解更多关于授权级别的信息，请看这里</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oc"><img src="../Images/9dc0c51142cb3cd698e33c0d85f23033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A63qX7qfkM0jBuI8a6aBAg.png"/></div></div></figure><p id="878e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用这些信息，Visual Studio代码生成一个带有HTTP触发器的Azure Functions项目。您可以在浏览器中查看本地项目文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi od"><img src="../Images/612d672712cef46423b3e92bf6e2fc9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZmWakwlvIkzzjzCHI2mInw.png"/></div></div></figure><h1 id="221c" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">如何执行本地功能</h1><p id="1e4e" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">创建该函数后，您将能够单击F5或在调试模式下在Visual Studio代码的调试资源管理器中运行该函数。</p><p id="9283" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本地功能运行:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oe"><img src="../Images/c544748939c61164aae6d152fa0ac7c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDM5o-nqoC3DZIqLuDBbIw.png"/></div></div></figure><p id="eb5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此函数做一个GET:<br/><a class="ae na" href="http://localhost:7071/api/HttpFirstFunction" rel="noopener ugc nofollow" target="_blank">http://localhost:7071/API/HttpFirstFunction</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi of"><img src="../Images/e9147f82aa62c6de545df9f26b044d91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1fOQyfXDpAXch8NwnX5hmA.png"/></div></div></figure><p id="b1cb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae na" href="http://localhost:7071/api/HttpFirstFunction?name=Deivison" rel="noopener ugc nofollow" target="_blank">http://localhost:7071/API/HttpFirstFunction？name = dei vision</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi og"><img src="../Images/9c5fb692dac749cf086b009708d4a16a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XfoBg-Seum9vu8Jq-vEhSA.png"/></div></div></figure><h1 id="1321" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">更多地了解所提供的文件夹结构。</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/6e65310e8b2a21245e46b9df87419045.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*w-Ygk2JVrADKquwuDPwuOA.png"/></div></figure><p id="d0af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在项目的根目录下，有一个共享的<a class="ae na" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-host-json" rel="noopener ugc nofollow" target="_blank"> host.json </a>文件，可以用来配置函数app。每个函数都有一个文件夹，其中有自己的代码文件(。js)和绑定配置文件(function.json)。<code class="fe nb nc nd ne b">function.json</code>的父目录名总是你的函数名。</p><h1 id="c2a7" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">导出函数</h1><p id="943b" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">JavaScript函数必须通过<code class="fe nb nc nd ne b"><a class="ae na" href="https://nodejs.org/api/modules.html#modules_module_exports" rel="noopener ugc nofollow" target="_blank">module.exports</a></code>(或<code class="fe nb nc nd ne b"><a class="ae na" href="https://nodejs.org/api/modules.html#modules_exports" rel="noopener ugc nofollow" target="_blank">exports</a></code>)导出。您导出的函数应该是一个JavaScript函数，在被触发时执行。</p><p id="e620" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">默认情况下，函数运行时在<code class="fe nb nc nd ne b">index.js</code>中查找您的函数，其中<code class="fe nb nc nd ne b">index.js</code>与其对应的<code class="fe nb nc nd ne b">function.json</code>共享相同的父目录。在默认情况下，您的导出函数应该是从它的文件中导出的唯一的导出，或者是名为<code class="fe nb nc nd ne b">run</code>或<code class="fe nb nc nd ne b">index</code>的导出。</p><h1 id="481b" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">从函数返回</h1><blockquote class="oi oj ok"><p id="b62a" class="jk jl kz jm b jn jo jp jq jr js jt ju ol jw jx jy om ka kb kc on ke kf kg kh ig bi translated">如果你愿意，你可以返回object而不是context.res{…}来响应函数。要使用<code class="fe nb nc nd ne b">return</code>分配输出，将<code class="fe nb nc nd ne b">function.json</code>中的<code class="fe nb nc nd ne b">name</code>属性更改为<code class="fe nb nc nd ne b">$return</code>。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi oo"><img src="../Images/bd345e24b499cf0e11fa14870206caf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7fp4l6_OD-F7HivsljhohQ.png"/></div></div></figure><blockquote class="oi oj ok"><p id="e0b4" class="jk jl kz jm b jn jo jp jq jr js jt ju ol jw jx jy om ka kb kc on ke kf kg kh ig bi translated">在这种情况下，您的函数应该如下例所示:</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi op"><img src="../Images/13a283e92bd36fd5e6f8cb43bccfcfe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9KXt4hUrYHuDnh-We3ZU-A.png"/></div></div></figure><h1 id="b469" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">粘合剂</h1><p id="7da1" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">在JavaScript中，<a class="ae na" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings" rel="noopener ugc nofollow" target="_blank">绑定</a>是在函数的function.json中配置和定义的。</p><blockquote class="oq"><p id="9e71" class="or os in bd ot ou ov ow ox oy oz kh dk translated">输入</p><p id="b715" class="or os in bd ot ou ov ow ox oy oz kh dk translated">Azure函数中的输入分为两类:一类是触发输入，另一类是附加输入。触发器和其他输入绑定(<code class="fe nb nc nd ne b">direction === "in"</code>的绑定)可以通过三种方式被函数读取:</p><p id="7383" class="or os in bd ot ou ov ow ox oy oz kh dk translated">输出</p><p id="fe50" class="or os in bd ot ou ov ow ox oy oz kh dk translated">函数可以通过多种方式写入输出(绑定<code class="fe nb nc nd ne b">direction === "out"</code>)。在所有情况下，在<em class="md"> function.json </em>中定义的绑定的<code class="fe nb nc nd ne b">name</code>属性对应于函数中写入的对象成员的名称。</p></blockquote><h1 id="b46f" class="lf lg in bd lh li lj lk ll lm ln lo lp lq pa ls lt lu pb lw lx ly pc ma mb mc bi translated">上下文对象</h1><p id="fb53" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">运行时使用一个<code class="fe nb nc nd ne b">context</code>对象在函数和运行时之间传递数据。用于从绑定中读取和设置数据以及写入日志，<code class="fe nb nc nd ne b">context</code>对象总是传递给函数的第一个参数。</p><h1 id="3266" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">HTTP触发器和绑定</h1><p id="1d15" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">HTTP和webhook触发器以及HTTP输出绑定使用请求和响应对象来表示HTTP消息传递。</p><h1 id="d5fe" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">请求对象</h1><p id="00bd" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated"><code class="fe nb nc nd ne b">context.req</code>(请求)对象具有以下属性:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pd"><img src="../Images/e8ba08e059fb5f27ea2704a9d843ecfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*syaNaOdC465gxvLR749ZHg.png"/></div></div></figure><h1 id="4c67" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">响应对象</h1><p id="a9b0" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated"><code class="fe nb nc nd ne b">context.res</code>(响应)对象具有以下属性:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pe"><img src="../Images/1b18b57b9a5dda44fc6d66f9ef606478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyNRf-8_dcSLA05jy9-tFg.png"/></div></div></figure><h1 id="2c2d" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">改善我们的本地功能</h1><p id="5017" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">首先，我们将创建一个HTTP GET函数，因此我们需要从<code class="fe nb nc nd ne b"><em class="kz">function.json</em></code>中删除“POST”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pf"><img src="../Images/4741e0f9d795bd921247f804088ad314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9eaXChkHRqQHhUCqQdnvDQ.png"/></div></div></figure><p id="3431" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此GET添加自定义<code class="fe nb nc nd ne b"><em class="kz">router</em></code> <em class="kz"> </em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pg"><img src="../Images/095388634ffb1f58d0b415b05c282d28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lAwg6600qVJbQeIG1gQqFQ.png"/></div></div></figure><h1 id="5364" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">向我们的函数添加测试</h1><p id="fc4b" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">测试您的功能包括:</p><ul class=""><li id="a516" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated"><strong class="jm io"> HTTP端到端</strong>:要从HTTP端点测试一个函数，您可以使用任何能够发出HTTP请求的工具，比如cURL、Postman或JavaScript的fetch方法。</li><li id="510d" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io">集成测试</strong>:集成测试包括功能app层。这种测试意味着您需要控制函数的参数，包括请求和上下文。</li><li id="c411" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated"><strong class="jm io">单元测试:</strong>单元测试在功能app内进行。你可以使用任何可以测试JavaScript的工具，比如Jest或者Mocha。</li></ul><h1 id="bd08" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">单元测试:</h1><p id="c779" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">我已经用Jest测试了我们的功能，也就是一个简单的单元测试:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ph"><img src="../Images/6fe72a6f4351ceaa5967057ec7e8b9c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5gkn2EG6aIQJ_uuUm8MQg.png"/></div></div></figure><h1 id="94c0" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">E2E测试:</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pi"><img src="../Images/50a2af29d7b7067b68ff9c68b36ceedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FTw-CNbJyE3dC465ISj7gA.png"/></div></div></figure><blockquote class="oq"><p id="f43f" class="or os in bd ot ou pj pk pl pm pn kh dk translated">了解更多关于集成测试和用实验性GitHub repo模仿上下文层的信息，<a class="ae na" href="https://github.com/anthonychu/azure-functions-test-utils" rel="noopener ugc nofollow" target="_blank">https://github.com/anthonychu/azure-functions-test-utils</a></p></blockquote><h1 id="4931" class="lf lg in bd lh li lj lk ll lm ln lo lp lq pa ls lt lu pb lw lx ly pc ma mb mc bi translated">部署到Azure功能</h1><h2 id="0e2b" class="nh lg in bd lh ni nj dn ll nk nl dp lp jv nm nn lt jz no np lx kd nq nr mb ns bi translated">登录Azure</h2><p id="00b2" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">您必须先登录Azure，然后才能发布您的应用。</p><p id="f435" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您尚未登录，请选择活动栏中的Azure图标。然后在资源区域，选择登录Azure…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi po"><img src="../Images/781368c8d999fe612d925de4f115f39e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KsLfpM-bStRtLY1OZiVgw.png"/></div></div></figure><ol class=""><li id="42d5" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh nu kw kx ky bi translated">如果您已经登录并且可以看到您现有的订阅，请转到下一部分。如果您还没有Azure帐户，请选择创建和Azure帐户…学生可以选择创建和Azure for Students帐户…</li><li id="6191" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh nu kw kx ky bi translated">当浏览器中出现提示时，选择您的Azure帐户并使用您的Azure帐户凭据登录。如果您创建了新帐户，您可以在创建帐户后登录。</li><li id="c3d5" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh nu kw kx ky bi translated">成功登录后，您可以关闭新的浏览器窗口。属于你的Azure帐户的订阅显示在侧栏中。</li></ol><h2 id="de34" class="nh lg in bd lh ni nj dn ll nk nl dp lp jv nm nn lt jz no np lx kd nq nr mb ns bi translated">在Azure中创建功能应用</h2><p id="d27a" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">在本节中，您将在Azure订阅中创建一个功能应用和相关资源。</p><ol class=""><li id="4280" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh nu kw kx ky bi translated">在活动栏中选择Azure图标。然后在Resources区域，选择+图标，选择Create Function App in Azure选项。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pp"><img src="../Images/5e9616b6124dc7d39c91f602cda57c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8m_fFV9Fvoaco4UPiZv2Ew.png"/></div></div></figure><p id="27d4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">根据提示提供以下信息:</p><p id="3085" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">选择订阅-&gt;选择要使用的订阅。当您在<strong class="jm io">资源</strong>下只有一个可见的订阅时，您不会看到此提示。</p><p id="c5e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输入函数app -&gt;的全局唯一名称，键入在URL路径中有效的名称。你输入的名字会被验证以确保它在Azure函数中是唯一的<strong class="jm io">。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pq"><img src="../Images/25b896a91b3ba1b03a02bb587c85f234.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CfFlKFvJ1ZUUU7uhZIwj9Q.png"/></div></div></figure><p id="30cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">选择一个运行时栈-&gt;选择你在本地运行的语言版本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pq"><img src="../Images/04af0923414b046dcfe384bfba53a5b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_BTp63oourJZSujGxTfNXA.png"/></div></div></figure><p id="33cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">选择新资源的位置-&gt;为了获得更好的性能，请选择您附近的<a class="ae na" href="https://azure.microsoft.com/regions/" rel="noopener ugc nofollow" target="_blank">地区</a> <strong class="jm io">。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pr"><img src="../Images/22f74aa509cb0ad3d758c1e87027a088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GVuKE6VYSAIqLTUoIQB9Bg.png"/></div></div></figure><p id="7ddb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该扩展在Azure: Activity Log面板中显示了各个资源在Azure中创建时的状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi ps"><img src="../Images/62c04de90058d3ef6f6c1a4e6c9fd1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rjYMD7gFHzUg7zbmZpWIYA.png"/></div></div></figure><p id="6d96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建完成后，将在您的订阅中创建以下Azure资源。资源根据您的功能应用程序名称命名:</p><ul class=""><li id="74f2" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated">一个<a class="ae na" href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/overview" rel="noopener ugc nofollow" target="_blank">资源组</a>，它是相关资源的逻辑容器。</li><li id="360a" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">一个标准的<a class="ae na" href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-create" rel="noopener ugc nofollow" target="_blank"> Azure存储帐户</a>，它维护你的项目的状态和其他信息。</li><li id="4188" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">一个函数应用程序，它提供了执行函数代码的环境。功能应用程序允许您将功能分组为一个逻辑单元，以便在同一个托管计划中更轻松地管理、部署和共享资源。</li><li id="899d" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">应用服务计划，为您的功能应用定义底层主机。</li><li id="cca2" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">连接到功能应用程序的应用洞察实例，可跟踪应用程序中功能的使用情况。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pt"><img src="../Images/6abd318465c1d91f05bb2f3995e4a7c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7j_8q8rTkqWfiZx4gtEtdw.png"/></div></div></figure><h2 id="24bf" class="nh lg in bd lh ni nj dn ll nk nl dp lp jv nm nn lt jz no np lx kd nq nr mb ns bi translated">部署到Azure</h2><blockquote class="oi oj ok"><p id="566d" class="jk jl kz jm b jn jo jp jq jr js jt ju ol jw jx jy om ka kb kc on ke kf kg kh ig bi translated"><strong class="jm io">重要提示:</strong>部署到现有的功能应用程序总是会覆盖Azure中该应用程序的内容。</p></blockquote><p id="4efb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在活动栏中选择Azure图标，然后在工作区中，选择您的项目文件夹并选择Deploy…按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/b3b8e81e65dc4b39b4712cf524985e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*Rbbho-q7s9DXKa8WOxJ0fg.png"/></div></figure><p id="7ebb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">选择<strong class="jm io">部署到功能应用</strong> …，选择您刚刚创建的功能应用，然后选择部署。</p><p id="19de" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">部署完成后，选择<strong class="jm io">查看输出</strong>来查看创建和部署结果，包括您创建的Azure资源。如果您错过了通知，请选择右下角的铃声图标再次查看。</p><p id="343f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">功能已发布</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pv"><img src="../Images/654554cdd92c20e367618df4975423b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vVwnE9PkKYWUkFyN-MgnKg.png"/></div></div></figure><p id="6765" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">功能按预期运行</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pw"><img src="../Images/f2e3c3f08b0702f3b968c33f2ba1ff18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLwKO5PWxXLhXxeWordRAA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi px"><img src="../Images/a846d8f597a63e63f9a90f936a68d604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SbVef6NXm_v2ausxqC3eng.png"/></div></div></figure><h1 id="d2bf" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">监控API</h1><p id="fc1b" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">你可以在Azure门户上访问日志。当您点击任何功能并点击监视器时，您可以检查日志。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi py"><img src="../Images/b5493d2fecd5d519a1f0886d8fd00b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySw0iXShcl2vg65YUwgLEw.png"/></div></div></figure><h1 id="4fe2" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">摘要</h1><ul class=""><li id="2fda" class="kq kr in jm b jn me jr mf jv pz jz qa kd qb kh kv kw kx ky bi translated">Azure Functions是一个无服务器的应用程序，它允许你托管无需提供基础设施就能执行的业务逻辑。</li><li id="f25c" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">您可以用一些语言编写函数，如C#、java、JavaScript、TypeScript、Python等。</li><li id="9df7" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">您需要安装Azure Functions扩展。一旦安装了Azure Functions extension for Visual Studio代码，就可以从VSCode本身创建整个项目。</li><li id="8118" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">每个功能app都要关联一个存储账号。创建功能应用程序时，它必须链接到存储帐户。</li><li id="d145" class="kq kr in jm b jn la jr lb jv lc jz ld kd le kh kv kw kx ky bi translated">您可以通过访问Azure门户上每个函数的monitor部分来监控API的日志。</li></ul><h1 id="5189" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="e47e" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">Azure Function为我们提供了最简单的方法来构建一个无服务器的应用平台，在这个平台上你可以编写无状态的逻辑，并且它是事件驱动的，使用这种方法你不需要关心基础设施。</p><p id="f46e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kz">更多内容请看</em><a class="ae na" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="kz">plain English . io</em></strong></a><em class="kz">。报名参加我们的</em> <a class="ae na" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="kz">免费周报</em> </strong> </a> <em class="kz">。关注我们关于</em> <a class="ae na" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="kz">推特</em></strong></a><a class="ae na" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="kz">领英</em></strong></a><strong class="jm io"><em class="kz"/></strong><em class="kz">和</em> <a class="ae na" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="kz">不和</em> </strong> </a> <strong class="jm io"> <em class="kz">。</em>T45】</strong></p></div></div>    
</body>
</html>