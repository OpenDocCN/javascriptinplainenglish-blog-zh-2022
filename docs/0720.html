<html>
<head>
<title>Creating a Read Progress Bar in React and TailwindCSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React和TailwindCSS中创建读取进度条</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-read-progress-bar-in-react-and-tailwindcss-34f84435ab79?source=collection_archive---------6-----------------------#2022-02-09">https://javascript.plainenglish.io/creating-a-read-progress-bar-in-react-and-tailwindcss-34f84435ab79?source=collection_archive---------6-----------------------#2022-02-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/45a97fef864499c0f628e79f2173738c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9lmAIyLE602VZyVE.png"/></div></div></figure><p id="995a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最近，我在他的网站上读了一篇我最喜欢的作者的文章。我意识到他在顶部有一个阅读进度条，这有助于衡量还有多少文章需要阅读。</p><p id="5168" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我认为这带来了良好的用户体验，我也应该把它添加到我个人网站上的文章中。所以，我就去做了。</p><h1 id="7365" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">故障</h1><ol class=""><li id="e49d" class="lr ls in jx b jy lt kc lu kg lv kk lw ko lx ks ly lz ma mb bi translated">找出用户<strong class="jx io">在这个页面上可以向下滚动</strong>多少。</li><li id="c58e" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks ly lz ma mb bi translated">找出用户<strong class="jx io">在页面上向下滚动了</strong>多少。</li><li id="1452" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks ly lz ma mb bi translated">用后者除以前者得到比率。</li></ol><p id="6257" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">瞧，这就是我们的滚动百分比，也就是“阅读进度”。</p><h2 id="8baa" class="mh ku in bd kv mi mj dn kz mk ml dp ld kg mm mn lh kk mo mp ll ko mq mr lp ms bi translated">密码</h2><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="bfaf" class="mh ku in my b gy nc nd l ne nf">import { useEffect, useState } from "react";<br/><br/>/**<br/> * React Hook to get the scroll percentage from the page, returns value from 0 to 100<br/> */<br/>export function useReadingProgress() {<br/>  const [completion, setCompletion] = useState(0);<br/>  useEffect(() =&gt; {<br/>    function updateScrollCompletion() {<br/>      // see how much we have scrolled<br/>      const currentProgress = window.scrollY;<br/>      // see how much total scroll is available<br/>      let scrollHeight = document.body.scrollHeight - window.innerHeight;<br/>      if (scrollHeight) {<br/>        setCompletion(<br/>          Number((currentProgress / scrollHeight).toFixed(2)) * 100<br/>        );<br/>      }<br/>    }<br/>    // add scroll event listener<br/>    window.addEventListener("scroll", updateScrollCompletion);<br/><br/>    // remove scroll event listener on umount<br/>    return () =&gt; {<br/>      window.removeEventListener("scroll", updateScrollCompletion);<br/>    };<br/>  }, []);<br/>  return completion;<br/>}</span></pre><p id="5704" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">剩下的工作就是在UI上显示这些信息，为此，我在顶部的导航栏上显示一个进度条。</p><h2 id="c4ca" class="mh ku in bd kv mi mj dn kz mk ml dp ld kg mm mn lh kk mo mp ll ko mq mr lp ms bi translated">式样</h2><p id="b9ff" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg ng ki kj kk nh km kn ko ni kq kr ks ig bi translated">我在我的网站上使用TailwindCSS，用它制作进度条非常容易</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="d276" class="mh ku in my b gy nc nd l ne nf">export default function NavBar() {<br/>  const completion = useReadingProgress();<br/>  return (<br/>    &lt;nav className="sticky z-50 top-0 backdrop-blur-3xl py-2"&gt;<br/>      &lt;span<br/>        id="progress-bar"<br/>        style={{<br/>          transform: `translateX(${completion - 100}%)`,<br/>        }}<br/>        className={`absolute bottom-0 w-full transition-transform duration-150 h-1 bg-yellow-400`}<br/>      /&gt;<br/>      {/* Rest of the NavBar */}<br/>    &lt;/nav&gt;<br/>  );<br/>}</span></pre><p id="7c56" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们使用<code class="fe nj nk nl my b">transform</code>和<code class="fe nj nk nl my b">translate</code> CSS属性来制作进度条的UI。</p><p id="13d5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">默认情况下，<code class="fe nj nk nl my b">#progress-bar</code>位于<code class="fe nj nk nl my b">NavBar</code>的底部，但是通过使用<code class="fe nj nk nl my b">translateX</code>，我们可以将它移动到X轴上。</p><p id="19a4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为我们做<code class="fe nj nk nl my b">translateX(${completion - 100}%)</code></p><ul class=""><li id="1459" class="lr ls in jx b jy jz kc kd kg nm kk nn ko no ks np lz ma mb bi translated">进度为0%时，它在X轴上平移-100%，使其<em class="nq">消失</em></li><li id="0b23" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks np lz ma mb bi translated">进度为100%时，它在X轴上平移0%,完全显示<em class="nq"/></li></ul><p id="1aa6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">暂时就这样了。希望这篇文章对你有帮助！如果您有任何反馈或问题，请随时在下面的评论中提出，我很乐意听到并解决它们。</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/08b7472ac66bc0e297c65d07070cf4c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/0*Bl35XF_xtw5Ykbk9.gif"/></div></figure></div><div class="ab cl ns nt hr nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ig ih ii ij ik"><p id="8791" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nq">原载于2022年2月9日</em><a class="ae nz" href="https://theanshuman.dev/articles/creating-a-read-progress-bar-in-react-and-tailwindcss-g1n" rel="noopener ugc nofollow" target="_blank"><em class="nq">https://theanshuman . dev</em></a><em class="nq">。</em></p><p id="49bb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nq">更多内容看</em> <a class="ae nz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nq">说白了就是</em> </strong> </a> <em class="nq">。报名参加我们的</em> <a class="ae nz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nq">免费每周简讯</em> </strong> </a> <em class="nq">。在我们的</em> <a class="ae nz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nq">社区</em> </strong> </a> <em class="nq">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>