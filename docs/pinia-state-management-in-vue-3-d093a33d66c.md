# ä½¿ç”¨ Pinia åœ¨ Vue 3 ä¸­è½»æ¾ç®¡ç†çŠ¶æ€

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/pinia-state-management-in-vue-3-d093a33d66c?source=collection_archive---------3----------------------->

![](img/b2736507e11c575fafcafe85c4818777.png)

Image by [Pexels](https://pixabay.com/users/pexels-2286921/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1245817) from [Pixabay](https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=1245817)

å½“ä½¿ç”¨ Vue 3 æ—¶ï¼Œæœ‰å¸¸è§çš„æ–¹æ³•å°†æ•°æ®ä»**çˆ¶**ç»„ä»¶å‘é€åˆ°**å­**ç»„ä»¶ï¼Œåä¹‹äº¦ç„¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ`props`ç”¨äºå°†æ•°æ®ä»**çˆ¶**å‘é€åˆ°**å­**ï¼Œäº‹ä»¶`$emits`ç”¨äºå°†æ•°æ®ä»å­å‘é€åˆ°çˆ¶ã€‚`provide`å’Œ`inject`å¯ç”¨äºä»ç¥–çˆ¶æ¯å‘å­™å­å¥³å‘é€æ•°æ®ã€‚

å¯¹äºè·¯ç”±å™¨å’ŒåŠŸèƒ½éƒ½å¾ˆå°‘çš„ç®€å• app æ¥è¯´ï¼Œè¿™å¯èƒ½å°±è¶³å¤Ÿäº†ã€‚ç„¶è€Œï¼Œå¯¹äºä¸€ä¸ªå¤§å‹å¤æ‚çš„é¡¹ç›®ï¼ŒçŠ¶æ€ç®¡ç†å¯èƒ½å˜å¾—è‡³å…³é‡è¦ã€‚

# ğŸçš®å°¼äºšæ¥æ•‘æ´äº†ã€‚

**Pinia** æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨[ç»„åˆ API](https://vuejs.org/api/composition-api-setup.html) ä¸Šçš„çŠ¶æ€ç®¡ç†åº“ã€‚é€šè¿‡ Piniaï¼Œå˜é‡å¯ä»¥åœ¨å•ä¸ªå¯¹è±¡ä¸­å£°æ˜ï¼Œå¹¶åœ¨æ‰€æœ‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚åœ¨ Pinia ä¹‹å‰ï¼Œ **Vuex** æ˜¯å¸¸ç”¨çš„ï¼Œå¯ä»¥ä½œä¸ºæ›¿ä»£ã€‚

Pinia çš„ç»„æˆå¦‚ä¸‹:

*   **çŠ¶æ€**:åº—é“ºçš„ä¸­å¿ƒéƒ¨åˆ†
*   **åŠ¨ä½œ**:ç±»ä¼¼äºæ–¹æ³•ï¼Œç”¨äºä¸ºçŠ¶æ€å®šä¹‰ä¸šåŠ¡é€»è¾‘
*   **Getter** :ç›¸å½“äºçŠ¶æ€çš„è®¡ç®—å€¼

# æˆ‘ä»¬æ¥è¯•è¯•å§ï¼

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨åº”ç”¨ç¨‹åºæ¥å°è¯•ä½¿ç”¨ Piniaã€‚æ³¨æ„æ¯ä¸ªç»„ä»¶(**çŠ¶æ€**ã€**åŠ¨ä½œ**ã€**è·å–**)æ˜¯å¦‚ä½•è¢«ä½¿ç”¨å’Œè°ƒç”¨çš„ã€‚

è¦ä½¿ç”¨ Piniaï¼Œé¦–å…ˆä½¿ç”¨`npm install pinia`å°†å…¶å®‰è£…åˆ°æˆ‘ä»¬çš„ Vue é¡¹ç›®ä¸­ã€‚

ç„¶åï¼Œåœ¨ main.js æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯¼å…¥`createPinia`æ–¹æ³•å¹¶ä½¿ç”¨`app.use`è°ƒç”¨è¯¥æ–¹æ³•ã€‚

![](img/fac728c492b4319c0b3dfbd48f5a9dc5.png)

ç°åœ¨æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåä¸º`stores`çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶åä¸º`counter.js`æ¥å­˜å‚¨æˆ‘ä»¬çš„æ•°æ®ã€‚ä»æ–‡ä»¶å¤¹çš„åç§°å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¯èƒ½æœ‰å¤šä¸ªä½¿ç”¨ Pinia çš„å•†åº—ã€‚

## æ„æˆéƒ¨åˆ† 1:å›½å®¶

çŠ¶æ€åŒ…å«æˆ‘ä»¬å¸Œæœ›åœ¨ç»„ä»¶ä¹‹é—´åˆ†å‘çš„æ•°æ®ã€‚æˆ‘ä»¬ä½¿ç”¨ Pinia çš„`defineStore`æ–¹æ³•å°†çŠ¶æ€å¯¹è±¡å®šä¹‰åˆ°å˜é‡`**useStore**`ä¸­ã€‚`state()`ä¸­çš„å¯¹è±¡åŒ…å«æˆ‘ä»¬å¯ä»¥æ“ä½œçš„`count`æ•°æ®ã€‚

![](img/f94763ec567216af04ee9b2868cab5d1.png)

## æ„æˆéƒ¨åˆ† 2:è¡ŒåŠ¨

åŠ¨ä½œæ˜¯è°ƒç”¨çŠ¶æ€å¯¹è±¡çªå˜çš„æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨`actions`å†…éƒ¨åˆ›å»ºä¸€ä¸ª`*addOne()*`æ–¹æ³•ï¼Œå½“åœ¨å¤–éƒ¨è°ƒç”¨æ—¶ï¼Œå°†ä¸€ä¸ªæ–¹æ³•æ·»åŠ åˆ°æˆ‘ä»¬çš„`count`æ•°æ®ä¸­ã€‚

![](img/8bdf7d698e7549748a3e4b19dd413516.png)

## ç»„ä»¶ 3:å¸æ°”å‰‚

Getters çš„ä½œç”¨ç±»ä¼¼äºè®¡ç®—ç»„ä»¶ï¼Œå½“çŠ¶æ€æ”¹å˜æ—¶ä¼šé‡æ–°è®¡ç®—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨`state`ä½œä¸ºå‚æ•°æ¥è°ƒç”¨ getterã€‚æ–¹æ³•`*tripleCount(state)*`å°†è¿”å›ä¸‰å€çš„ç”µæµ`count`ã€‚

![](img/63324bb2aa2c9f1f06d040bdbff98521.png)

## å°†æ•°æ®è¿æ¥åˆ°ç”¨æˆ·ç•Œé¢

è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åˆ›å»ºä¸€ä¸ª Vue æ–‡ä»¶æ¥è¯»å–æˆ‘ä»¬å•†åº—ä¸­çš„æ•°æ®ã€‚è®©æˆ‘ä»¬åœ¨`App.vue`ä¸­åšè¿™ä»¶äº‹ã€‚

æˆ‘ä»¬ç§°ä¹‹ä¸ºä½¿ç”¨ import ç›´æ¥å¯¼å…¥æˆ‘ä»¬çš„æ•°æ®ã€‚ç„¶åï¼Œæˆ‘ä»¬åœ¨`setup()`å†…è°ƒç”¨å®ƒï¼Œåˆ©ç”¨ç»„åˆ API ( `data()`ä¹Ÿå¯ä»¥)ã€‚å¯¹äºæˆ‘ä»¬çš„è¾“å‡ºï¼Œæˆ‘ä»¬åˆ†åˆ«ä¸º`count` state å’Œ`tripleCount` getter åˆ›å»ºä¸€ä¸ªå¤´ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œä½¿ç”¨`addOne()`åŠ¨ä½œå°†æˆ‘ä»¬çš„è®¡æ•°å¢åŠ  1ã€‚

![](img/700c1ae010f52c690d28a6b36203e38d.png)

åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸åŒçš„æ•°æ®åˆ›å»ºæ›´å¤šçš„å­˜å‚¨ï¼Œå¹¶åˆ›å»ºæ›´å¤šçš„ç»„ä»¶æ¥è¯»å–æˆ‘ä»¬çš„ååº”æ•°æ®ã€‚ä¸€ä¸ªé¢å¤–çš„å¥½å¤„æ˜¯ Pinia æ—¢è½»ä¾¿åˆèƒ½æ”¯æŒ Typescriptã€‚

è¿™æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆè¾“å‡ºã€‚

![](img/a4ee225638c24027d7acee2898742b7d.png)

å¥½æ¶ˆæ¯æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Chrome çš„ [**Vue å¼€å‘å·¥å…·**](https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd/related?hl=en) åœ¨ Pinia ä¸­äº¤äº’è·Ÿè¸ªæˆ‘ä»¬çš„`state`å’Œ`getters`ã€‚

## å°±æ˜¯è¿™æ ·ï¼

ä½¿ç”¨ Vue çŠ¶æ€ç®¡ç†è¿˜æœ‰å¾ˆå¤šæ–¹é¢ï¼Œè¿˜æœ‰ Pinia çš„ç”¨ä¾‹ã€‚è¿™åªæ˜¯å†°å±±ä¸€è§’ã€‚æˆ‘å¸Œæœ›è¿™è¶³å¤Ÿå¸å¼•ä½ å»è®¢å©šã€‚

ç‚¹å‡»æ­¤å¤„äº†è§£æ›´å¤šä¿¡æ¯ï¼

*   [https://pinia.vuejs.org/](https://pinia.vuejs.org/)
*   [https://vuex.vuejs.org/#what-is-a-state-management-pattern](https://vuex.vuejs.org/#what-is-a-state-management-pattern)

ç°åœ¨æˆ‘ä»¬æœ‰äº†ã€‚æˆ‘å¸Œæœ›ä½ å·²ç»å‘ç°è¿™æ˜¯æœ‰ç”¨çš„ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼

*æ›´å¤šå†…å®¹è¯·çœ‹*[***plain English . io***](https://plainenglish.io/)*ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„* [***å…è´¹å‘¨æŠ¥***](http://newsletter.plainenglish.io/) *ã€‚å…³æ³¨æˆ‘ä»¬å…³äº*[***Twitter***](https://twitter.com/inPlainEngHQ)[***LinkedIn***](https://www.linkedin.com/company/inplainenglish/)*[***YouTube***](https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw)*[***ä¸å’Œ***](https://discord.gg/GtDtUAvyhW) ***ã€‚*****

*****å¯¹ç¼©æ”¾æ‚¨çš„è½¯ä»¶å¯åŠ¨æ„Ÿå…´è¶£*** *ï¼Ÿæ£€æŸ¥* [***ç”µè·¯***](https://circuit.ooo?utm=publication-post-cta) *ã€‚***