<html>
<head>
<title>React Hooks: The Ultimate Guide (useRef)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Hooks:终极指南(useRef)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-hooks-the-ultimate-guide-useref-c89fd26574b2?source=collection_archive---------9-----------------------#2022-01-28">https://javascript.plainenglish.io/react-hooks-the-ultimate-guide-useref-c89fd26574b2?source=collection_archive---------9-----------------------#2022-01-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a4524c44ba66fe986aa1550386bef870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E0u2sDAgwbbN3Ml6"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@steve_j?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Steve Johnson</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6bb6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">访问DOM元素有时很麻烦，但是自从react钩子出现以来，我们有了一种简单的方法。<code class="fe ky kz la lb b"><a class="ae jz" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank">useRef</a></code>有不同的用例，但最常用的是轻松访问元素的DOM。</p><p id="7891" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是首先…</p><h2 id="2a79" class="lc ld in bd le lf lg dn lh li lj dp lk kl ll lm ln kp lo lp lq kt lr ls lt lu bi translated">什么是<code class="fe ky kz la lb b">useRef?</code></h2><blockquote class="lv lw lx"><p id="ca00" class="ka kb ly kc b kd ke kf kg kh ki kj kk lz km kn ko ma kq kr ks mb ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">useRef</code>返回一个可变的ref对象，其<code class="fe ky kz la lb b">.current</code>属性被初始化为传递的参数(<code class="fe ky kz la lb b">initialValue</code>)。返回的对象将在组件的整个生存期内保持不变。</p></blockquote><p id="1115" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">useRef</code>作为一个函数工作，它将返回给我们一个<a class="ae jz" href="https://pt-br.reactjs.org/docs/refs-and-the-dom.html" rel="noopener ugc nofollow" target="_blank"> ref </a>对象，并将接收一个值，该值将是这个ref的初始值。ref中的属性<code class="fe ky kz la lb b">current</code>将发送初始值。</p><h2 id="429d" class="lc ld in bd le lf lg dn lh li lj dp lk kl ll lm ln kp lo lp lq kt lr ls lt lu bi translated">什么时候用？</h2><p id="6e45" class="pw-post-body-paragraph ka kb in kc b kd mc kf kg kh md kj kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">相应地，在React的文档中，有三个很好的<code class="fe ky kz la lb b">useRef</code>用例</p><ul class=""><li id="772e" class="mh mi in kc b kd ke kh ki kl mj kp mk kt ml kx mm mn mo mp bi translated">管理焦点、文本选择或媒体播放。</li><li id="b4d1" class="mh mi in kc b kd mq kh mr kl ms kp mt kt mu kx mm mn mo mp bi translated">触发命令式动画。</li><li id="245c" class="mh mi in kc b kd mq kh mr kl ms kp mt kt mu kx mm mn mo mp bi translated">与第三方DOM库集成。</li></ul><p id="bebc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我想再补充两点:</p><ul class=""><li id="7ced" class="mh mi in kc b kd ke kh ki kl mj kp mk kt ml kx mm mn mo mp bi translated">用于保存一个可变变量，但我们不希望它在DOM中被更新以供用户查看。</li><li id="dffc" class="mh mi in kc b kd mq kh mr kl ms kp mt kt mu kx mm mn mo mp bi translated">另一个场景是保存状态的先前值</li></ul><h2 id="6b92" class="lc ld in bd le lf lg dn lh li lj dp lk kl ll lm ln kp lo lp lq kt lr ls lt lu bi translated">访问DOM</h2><p id="9b6d" class="pw-post-body-paragraph ka kb in kc b kd mc kf kg kh md kj kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">假设我们有一个输入，我们希望这个输入集中在一个按钮的点击上。我们可以这样做:</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="902f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这段代码中，我们使用<code class="fe ky kz la lb b">useRef.current.focus</code>来访问通过ref传递的输入的<code class="fe ky kz la lb b">focus</code>。</p><h2 id="969b" class="lc ld in bd le lf lg dn lh li lj dp lk kl ll lm ln kp lo lp lq kt lr ls lt lu bi translated">保持可变变量</h2><p id="147e" class="pw-post-body-paragraph ka kb in kc b kd mc kf kg kh md kj kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">可变变量意味着我们希望能够更新变量的值。但是假设我们不想在屏幕中更新这个值。在这种情况下，我们可以这样做:</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="73e0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这段代码中，我们在每次输入改变时更新<code class="fe ky kz la lb b">ref</code>,但是当它发生时，屏幕上不会显示出来(正如我们在控制台中看到的，它在<code class="fe ky kz la lb b">ref</code>的值中被更新)。一旦我们单击该按钮，该值将被发送到<code class="fe ky kz la lb b">useState</code>，它将为我们显示该值，即使“useRef Value”仍然为空。</p><h2 id="0d0b" class="lc ld in bd le lf lg dn lh li lj dp lk kl ll lm ln kp lo lp lq kt lr ls lt lu bi translated">访问以前的值</h2><p id="68c2" class="pw-post-body-paragraph ka kb in kc b kd mc kf kg kh md kj kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">现在为了表示这个例子，让我们假设我们想要创建一个组件，当用户点击一个按钮时，我们给一个计数器值加1，但是我们也想要保存旧的值。</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="ae97" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个例子中，每次我们改变<code class="fe ky kz la lb b">useState</code>值，都会触发重新渲染和<code class="fe ky kz la lb b">useEffect</code>。这样，我们可以将旧值保存在ref中，将实际值保存在<code class="fe ky kz la lb b">useState</code>中。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><p id="878a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">嗯，这涵盖了我倾向于使用<code class="fe ky kz la lb b">useRef</code>的大多数用例，我希望这能帮助你更好地理解它。</p><p id="8018" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">干杯！</p><p id="5b35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ly">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ly">说白了就是</em> </strong> </a> <em class="ly">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ly">免费周报</em> </strong> </a> <em class="ly">。在我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ly">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="ly">。</em></p></div></div>    
</body>
</html>