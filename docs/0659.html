<html>
<head>
<title>How to Push or Append an Element to a State Array with React Hooks?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React钩子向状态数组推送或追加元素？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-push-or-append-an-element-to-a-state-array-with-react-hooks-32e75c090040?source=collection_archive---------3-----------------------#2022-02-05">https://javascript.plainenglish.io/how-to-push-or-append-an-element-to-a-state-array-with-react-hooks-32e75c090040?source=collection_archive---------3-----------------------#2022-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d44f700a12afc64827b9ac5439fd4de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D-d1qah4Ex83x9a6"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@bamin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pierre Bamin</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="85b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在许多情况下，我们可能有数组形式的状态。</p><p id="b877" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能希望将项目推到数组的末尾。</p><p id="04ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对我们来说，做这件事的方法可能不会马上显而易见。</p><p id="4789" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用React钩子将元素推入或追加到状态数组中。</p><h1 id="3e40" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">传入一个回调函数，该回调函数向状态设置器函数返回一个新数组</h1><p id="82d0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了在状态数组的末尾添加一个新元素来更新状态数组，我们可以传入一个回调函数，该函数返回一个新的数组，数组的末尾添加了新的元素。</p><p id="ea1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3037" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState } from "react";</span><span id="cff5" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [arr, setArr] = useState(["foo"]);<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;button onClick={() =&gt; setArr((oldArray) =&gt; [...oldArray, "foo"])}&gt;<br/>        add<br/>      &lt;/button&gt;<br/>      &lt;div&gt;<br/>        {arr.map((a, i) =&gt; (<br/>          &lt;p key={i}&gt;{a}&lt;/p&gt;<br/>        ))}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="2771" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">useState</code>钩子定义了<code class="fe mt mu mv mj b">setArr</code>状态设置函数。</p><p id="8e0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">arr</code>状态的初始值是一个数组，就像我们在<code class="fe mt mu mv mj b">useState</code>的自变量中一样。</p><p id="9e3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe mt mu mv mj b">onClick</code>处理程序，它用一个接受<code class="fe mt mu mv mj b">oldArray</code>参数的回调函数调用<code class="fe mt mu mv mj b">setArr</code>函数，这个参数是<code class="fe mt mu mv mj b">arr</code>状态的旧值。</p><p id="2e98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们返回一个数组，其中包含从<code class="fe mt mu mv mj b">oldArray</code>展开的现有项目和数组末尾的新项目。</p><p id="f221" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在某些情况下，比如点击添加条目，我们也可以将新的数组值直接传递给state setter函数。</p><p id="6cb6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们也可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a0d4" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState } from "react";</span><span id="0e47" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [arr, setArr] = useState(["foo"]);</span><span id="f448" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;button onClick={() =&gt; setArr([...arr, "foo"])}&gt;add&lt;/button&gt;<br/>      &lt;div&gt;<br/>        {arr.map((a, i) =&gt; (<br/>          &lt;p key={i}&gt;{a}&lt;/p&gt;<br/>        ))}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5be1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们想点击添加一个新的数组条目时。</p><p id="c950" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以使用<code class="fe mt mu mv mj b">concat</code>方法返回一个数组，在它的末尾有一个新值。</p><p id="58e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ec6d" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState } from "react";</span><span id="6aa5" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [arr, setArr] = useState(["foo"]);</span><span id="7687" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;button onClick={() =&gt; setArr((oldArray) =&gt; oldArray.concat("foo"))}&gt;<br/>        add<br/>      &lt;/button&gt;<br/>      &lt;div&gt;<br/>        {arr.map((a, i) =&gt; (<br/>          &lt;p key={i}&gt;{a}&lt;/p&gt;<br/>        ))}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="9db1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe mt mu mv mj b">oldArray</code>上调用<code class="fe mt mu mv mj b">concat</code>，参数是我们想要添加的新项目。</p><p id="6c94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们得到了和以前一样的结果。</p><h1 id="aecf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="db9c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要在React组件状态数组的末尾添加一个新项，我们可以向state setter函数传递一个回调，该函数获取旧的数组值并返回新的数组值。</p><p id="efd2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em> <a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">说白了。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">免费周报</em> </strong> </a> <em class="mw">。在我们的</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">社区不和谐</em> </strong> </a> <em class="mw">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>