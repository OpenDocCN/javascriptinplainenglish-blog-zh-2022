<html>
<head>
<title>Error Handling in Node.js Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样处理Node.js中的错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/error-handling-in-node-js-like-a-pro-ed210baa0600?source=collection_archive---------2-----------------------#2022-07-19">https://javascript.plainenglish.io/error-handling-in-node-js-like-a-pro-ed210baa0600?source=collection_archive---------2-----------------------#2022-07-19</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="7be2" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">你需要知道的一切。</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/574b68e0ee885c8fb01f06829369ca7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAoLdEGSmcSwDtQGsNmLnQ.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@thisisengineering?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">ThisisEngineering RAEng</a> on <a class="ae kw" href="https://unsplash.com/s/photos/technology-error?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f723" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">处理错误是任何生产级应用程序最重要的方面之一。任何人都可以为成功案例编写代码。只有真正的专业人士会处理错误案例。</p><p id="830a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天我们将学到这一点。让我们开始吧。</p><p id="87eb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">首先，我们必须明白，并非所有的错误都是一样的。让我们看看在一个应用程序中会出现多少种错误。</p><ul class=""><li id="d432" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">用户产生的错误</li><li id="ed28" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">硬件故障</li><li id="afe0" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">运行时错误</li><li id="5fc8" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">数据库错误</li></ul><p id="745e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们将看到如何轻松处理这些不同类型的错误。</p><h2 id="736b" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated">在我们开始之前…</h2><p id="3c5a" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">我用ExpressJS和Typescript 创建了一个<a class="ae kw" href="https://github.com/Mohammad-Faisal/professional-express-sequelize-docker-boilerplate" rel="noopener ugc nofollow" target="_blank">专业样板。本文是这个系列的一部分。你可以在下面找到所有的文章。</a></p><pre class="kh ki kj kk gu nf ng nh bn ni nj bi"><span id="7fd0" class="nk mi ir ng b be nl nm l nn no"><strong class="ng is">* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/create-an-express-boilerplate-with-typescript-810eb6c29196"><strong class="ng is">Creating a ExpressJS + Typescript Boilerplate</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/how-to-set-up-linter-formatter-for-node-js-d6b34c0c8be5"><strong class="ng is">How to setup Linter and Formatter for NodeJS</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" href="https://blog.devgenius.io/how-to-handle-multiple-environments-in-nodejs-7391d2db2abe" rel="noopener ugc nofollow" target="_blank"><strong class="ng is">How to handle multiple environments in NodeJS</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/error-handling-in-node-js-like-a-pro-ed210baa0600"><strong class="ng is">Error Handling in NodeJS</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" href="https://medium.com/p/c69f2494cf18" rel="noopener"><strong class="ng is">Request Validation in NodeJS</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" href="https://levelup.gitconnected.com/use-docker-with-nodejs-projects-like-a-pro-a9e7504e1308" rel="noopener ugc nofollow" target="_blank"><strong class="ng is">Using Docker Professionally with NodeJS</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/node-js-database-with-docker-for-local-development-285212c5162f"><strong class="ng is">Using Docker for Local Development in NodeJS</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/node-js-logging-for-professionals-6be07c003e7f"><strong class="ng is">Logging in NodeJS</strong></a><strong class="ng is"><br/><br/>* </strong><a class="ae kw" href="https://levelup.gitconnected.com/kubernetes-deployment-with-nodejs-made-easy-eaeec32b62e3" rel="noopener ugc nofollow" target="_blank"><strong class="ng is">Kubernetes with NodeJS</strong></a></span></pre><p id="1d9f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们开始吧！</p><h1 id="173d" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">获取基本的快速应用程序。</h1><p id="1948" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">运行以下命令以获得用typescript构建的基本express应用程序。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="53e7" class="mh mi ir ng b gz od oe l nn no">git clone <a class="ae kw" href="https://github.com/Mohammad-Faisal/express-typescript-skeleton.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Mohammad-Faisal/express-typescript-skeleton.git</a></span></pre><h1 id="f8dd" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">处理找不到URL错误</h1><p id="64fa" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">如何检测在您的express应用程序中点击的URL是否处于非活动状态？你有一个类似于<code class="fe of og oh ng b">/users,</code>的URL，但是有人点击了<code class="fe of og oh ng b">/user.</code>，我们需要通知他们，他们试图访问的URL不存在。</p><p id="9563" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这在ExpressJS中很容易做到。定义所有路由后，添加以下代码来捕获所有不匹配的路由，并发送回正确的错误响应。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">main.ts</figcaption></figure><p id="e337" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这里我们使用<code class="fe of og oh ng b">“*”</code>作为通配符来捕捉所有没有通过我们的应用程序的路由。</p><h1 id="5744" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">用特殊的中间件处理所有错误</h1><p id="fcc2" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">现在我们在Express中有一个特殊的中间件来处理我们所有的错误。我们必须将它包含在所有路由的末尾，并从顶层向下传递所有错误，以便这个中间件可以为我们处理它们。</p><p id="f570" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最重要的事情是把这个中间件放在所有其他中间件和路由定义之后，因为否则，一些错误会溜走。</p><p id="0d0c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们将它添加到索引文件中。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">errormiddleware.ts</figcaption></figure><p id="9ebc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">看看中间件签名。与其他中间件不同，这个特殊的中间件有一个名为<code class="fe of og oh ng b">err</code>的额外参数，它属于<code class="fe of og oh ng b">Error</code>类型。这是第一个参数。</p><p id="82a4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并修改我们之前的代码，如下所示传递错误。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="269d" class="mh mi ir ng b gz od oe l nn no">app.use("*", (req: Request, res: Response, next: NextFunction) =&gt; {<br/>  const err = Error(`Requested path ${req.path} not found`);<br/>  next(err);<br/>});</span></pre><p id="ffaf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，如果我们点击一个随机的URL，比如，<code class="fe of og oh ng b">http://localhost:3001/posta</code>，那么我们将得到一个正确的错误响应。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="ca84" class="mh mi ir ng b gz od oe l nn no">{<br/>  "success": false,<br/>  "message": "Requested path ${req.path} not found",<br/>   "stack": "Error: Requested path / not found\n    at  <br/>             /Users/mohammadfaisal/Documents/learning/express-  <br/>             typescript-skeleton/src/index.ts:23:15\n"<br/>}</span></pre><h1 id="f9eb" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">自定义错误对象</h1><p id="864e" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">让我们仔细看看Node.js提供的默认错误对象。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="ddad" class="mh mi ir ng b gz od oe l nn no">interface Error {<br/>  name: string;<br/>  message: string;<br/>  stack?: string;<br/>}</span></pre><p id="6a6d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以当你抛出如下错误时。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="1515" class="mh mi ir ng b gz od oe l nn no">throw new Error("Some message");</span></pre><p id="e518" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">那么你只能得到名字和可选的<code class="fe of og oh ng b">stack</code>属性。这个堆栈为我们提供了错误产生的确切位置的信息。我们不想将它包含在生产中。我们稍后将看到如何做到这一点。</p><p id="4156" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们可能希望向错误对象本身添加更多的信息。</p><p id="fc03" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">此外，我们可能希望区分不同的错误对象。</p><p id="3201" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们为我们的应用程序设计一个基本的自定义错误类。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">ApiError.ts</figcaption></figure><p id="40ea" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">请注意下面一行。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="e42d" class="mh mi ir ng b gz od oe l nn no">Error.captureStackTrace(this, this.constructor);</span></pre><p id="fb97" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">它有助于从应用程序的任何地方捕获错误的堆栈跟踪。</p><p id="048d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在这个简单的类中，我们也可以添加<code class="fe of og oh ng b">statusCode</code>。让我们像下面这样修改我们以前的代码。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">err.ts</figcaption></figure><p id="1d9b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并利用错误处理程序中间件中新的<code class="fe of og oh ng b">statusCode</code>属性</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">err.ts</figcaption></figure><p id="e930" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">自定义的错误类使您的API对最终用户来说是可预测的。大多数新手都错过了这一部分。</p><h1 id="3ef8" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">让我们来处理应用程序错误。</h1><p id="88a3" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">现在让我们也从我们的路由内部抛出一个自定义错误。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">=ManualError.ts</figcaption></figure><p id="d0db" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是人为制造的情况，我们需要抛出一个错误。在现实生活中，我们可能有很多情况需要使用这种try/catch块来捕捉错误。</p><p id="ac66" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果我们点击下面的URL，<code class="fe of og oh ng b">http://localhost:3001/protected</code>，我们将得到下面的响应。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="32da" class="mh mi ir ng b gz od oe l nn no">{<br/>  "success": false,<br/>  "message": "You are not authorized to access this!",<br/>  "stack": "Some details"<br/>}</span></pre><p id="92a0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以我们的错误响应工作正常！</p><h1 id="3f00" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">让我们改进这一点！</h1><p id="565e" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">所以我们现在可以在应用程序的任何地方处理我们的自定义错误。但是它到处都需要一个try-catch块，并且需要用error对象调用<code class="fe of og oh ng b">next</code>函数。</p><p id="9a07" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这并不理想。它会立刻让我们的代码看起来很糟糕。</p><p id="7cf1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们创建一个定制的包装函数，它将捕获所有的错误，并从一个中心位置调用下一个函数。</p><p id="2483" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们为此创建一个包装器实用程序！</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">asyncWrapper.ts</figcaption></figure><p id="e953" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并在我们的路由器中使用它。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">wrapper.ts</figcaption></figure><p id="c9e8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">运行代码，看看我们有相同的结果。这有助于我们消除所有的try/catch块，并到处调用下一个函数！</p><h1 id="3a05" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">自定义错误的示例</h1><p id="fa09" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">我们可以根据需要微调我们的错误。让我们为未找到的路径创建一个新的错误类。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">NotFoundError.ts</figcaption></figure><p id="5c93" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并简化我们的坏路由处理器。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="13da" class="mh mi ir ng b gz od oe l nn no">app.use((req: Request, res: Response, next: NextFunction) =&gt; next(new NotFoundError(req.path)));</span></pre><p id="6763" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">有多干净？</p><p id="6411" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在让我们安装一个小的软件包来避免我们自己编写状态代码。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="8713" class="mh mi ir ng b gz od oe l nn no">yarn add http-status-codes</span></pre><p id="c0ac" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并以有意义的方式添加状态代码。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">NotFoundError.ts</figcaption></figure><p id="9653" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">像这样在我们的路线里。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Error.ts</figcaption></figure><p id="110f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这让我们的代码变得更好。</p><h1 id="aca3" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">处理程序员错误。</h1><p id="66d7" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">处理程序员错误的最好方法是优雅地重启。将下面一行代码放在应用程序的末尾。如果在错误中间件中没有捕捉到什么，它将被调用。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">uncaughtException.ts</figcaption></figure><h1 id="4d56" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">处理未处理的承诺拒绝。</h1><p id="39f4" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">我们可以记录拒绝承诺的原因。这些错误永远不会到达我们的快速错误处理程序。例如，如果我们想用错误的密码访问数据库。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">unhandledRejection.ts</figcaption></figure><h1 id="572b" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">进一步改进</h1><p id="380a" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">让我们创建一个新的ErrorHandler类来集中处理错误。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oi oj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">ErrorHandler.ts</figcaption></figure><p id="e6a1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这只是一个简单的错误处理器中间件。您可以在此添加您的自定义逻辑。并在我们的索引文件中使用它。</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="c81c" class="mh mi ir ng b gz od oe l nn no">app.use(ErrorHandler.handle());</span></pre><p id="0cd0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这就是我们如何通过尊重SOLID的单一责任原则来分离关注点。</p><p id="f7a4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你可以在这里  <strong class="kz is">找到这篇文章的所有<a class="ae kw" href="https://github.com/Mohammad-Faisal/nodejs-expressjs-error-handling" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is">代码。</strong></a></strong></p><p id="7e0d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我希望你今天学到了新东西。祝你今天休息愉快！</p><pre class="kh ki kj kk gu nf ng oa ob aw oc bi"><span id="4158" class="mh mi ir ng b gz od oe l nn no"><strong class="ng is">Want to Connect?</strong></span><span id="e216" class="mh mi ir ng b gz ok oe l nn no">You can reach out to me via <a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="ng is">LinkedIN</strong></a> or my <a class="ae kw" href="https://www.mohammadfaisal.dev/blog" rel="noopener ugc nofollow" target="_blank"><strong class="ng is">Personal Website</strong></a></span></pre><h1 id="b627" class="np mi ir bd mj nq nr ns mm nt nu nv mp jx nw jy ms ka nx kb mv kd ny ke my nz bi translated">其他节点文章</h1><div class="ol om gq gs on oo"><a rel="noopener  ugc nofollow" target="_blank" href="/node-js-logging-for-professionals-6be07c003e7f"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd is gz z fq ot fs ft ou fv fx iq bi translated">专业人员的Node.js日志记录</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">发挥温斯顿和摩根的全部潜力</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kq oo"/></div></div></a></div><div class="ol om gq gs on oo"><a href="https://blog.devgenius.io/how-to-handle-multiple-environments-in-nodejs-7391d2db2abe" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd is gz z fq ot fs ft ou fv fx iq bi translated">如何在NodeJS中处理多种环境</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">如何建立一个专业的节点工程</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">blog.devgenius.io</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc kq oo"/></div></div></a></div><div class="ol om gq gs on oo"><a href="https://levelup.gitconnected.com/use-docker-with-nodejs-projects-like-a-pro-a9e7504e1308" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd is gz z fq ot fs ft ou fv fx iq bi translated">像专业人士一样使用Docker和NodeJS项目！</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">在开发和生产中利用Docker的力量</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">levelup.gitconnected.com</p></div></div><div class="ox l"><div class="pe l oz pa pb ox pc kq oo"/></div></div></a></div><div class="ol om gq gs on oo"><a rel="noopener  ugc nofollow" target="_blank" href="/node-js-database-with-docker-for-local-development-285212c5162f"><div class="op ab fp"><div class="oq ab or cl cj os"><h2 class="bd is gz z fq ot fs ft ou fv fx iq bi translated">Node.js +带有Docker的数据库，用于本地开发</h2><div class="ov l"><h3 class="bd b gz z fq ot fs ft ou fv fx dk translated">各种数据库的一站式解决方案。</h3></div><div class="ow l"><p class="bd b dl z fq ot fs ft ou fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="ox l"><div class="pf l oz pa pb ox pc kq oo"/></div></div></a></div><p id="ae3c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="pg">更多内容看</em> <a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="pg">说白了就是io </em> </strong> </a> <em class="pg">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="pg">免费周报</em> </strong> </a> <em class="pg">。关注我们关于</em><a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="pg">Twitter</em></strong></a><em class="pg">和</em><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="pg">LinkedIn</em></strong></a><em class="pg">。查看我们的</em> <a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="pg">社区不和谐</em> </strong> </a> <em class="pg">加入我们的</em> <a class="ae kw" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="pg">人才集体</em> </strong> </a> <em class="pg">。</em></p></div></div>    
</body>
</html>