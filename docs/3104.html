<html>
<head>
<title>What Everyone Is Getting Wrong About React Native Modals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">每个人对反应母语情态动词的误解</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/you-have-been-using-react-native-modals-wrong-9b8c17de2f96?source=collection_archive---------1-----------------------#2022-08-01">https://javascript.plainenglish.io/you-have-been-using-react-native-modals-wrong-9b8c17de2f96?source=collection_archive---------1-----------------------#2022-08-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5dc3" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何掌握反应原生模态复合流的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/654d479d97ffb569d8b91c173a07c7a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Horr4Dnmjp29Up1ATm1tjw.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="https://gifs.com/gif/this-is-fine-qj5Dv2" rel="noopener ugc nofollow" target="_blank">https://gifs.com/gif/this-is-fine-qj5Dv2</a></figcaption></figure><p id="3091" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您是否发现在React Native中使用情态动词有点麻烦？你并不孤单！试图保持对其开放状态的控制并在任何你想使用它的地方重复代码可能是相当乏味的。</p><p id="7596" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当您试图创建复杂的流时，问题只会变得更糟。一旦你通过了两个模态，你的主要部分就是一团乱麻，状态无处不在。</p><p id="f7f1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我在许多大公司都亲身经历过，比如<strong class="kv io"> Zé Delivery </strong>(由AB-InBev公司生产)、<strong class="kv io"> Alfred Delivery </strong>，现在在<strong class="kv io"> X-Team </strong>。</p><p id="bea3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但不要绝望！大多数人认为这是唯一的方法。尽管如此，在本文中，我将解释问题是如何开始的，以及如何优雅地处理它们，同时提高您的开发经验。它甚至会帮助你使用内外反应成分的情态动词(例如在<a class="ae ks" href="https://redux-saga.js.org/" rel="noopener ugc nofollow" target="_blank">实录</a>中)！)</p><p id="cb12" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">本文的教导已封装在此库中:</em></p><div class="lq lr gp gr ls lt"><a href="https://github.com/GSTJ/react-native-magic-modal" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd io gy z fp ly fr fs lz fu fw im bi translated">反应自然魔法模式🦄</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">一个可以在任何地方被强制调用的模态库！</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">https://github.com/GSTJ/react-native-magic-modal</p></div></div><div class="mc l"><div class="md l me mf mg mc mh km lt"/></div></div></a></div><h1 id="8c32" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">“简单流程”的挑战</h1><p id="0a76" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">想象一下。您在脸书工作，产品团队要求“简单流程”:</p><blockquote class="nf ng nh"><p id="14b8" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated">作为一家公司，我想展示一种模式，要求用户在第一次喜欢一篇帖子后，对该应用进行0-5星级的评分。</p><p id="26d4" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated">a.<strong class="kv io">如果用户给它的评分少于四颗星，则</strong>显示另一种模式，询问如何改进。</p><p id="8f08" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated">b.<strong class="kv io">否则，</strong>会显示一个快乐的模式，要求用户在应用商店给我们打分。</p><p id="4b3c" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated"><strong class="kv io">最后</strong>展示一个“谢谢”的模式，感谢用户的支持。</p></blockquote><p id="4d85" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这不是很牵强，对吧？</p><p id="f41a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">四种模式，它从开发者的角度提出了很多问题。这个逻辑应该放在哪里？我们应该如何处理最后一个模态的输出？我们如何保持清洁？</p><p id="c1e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你能认出密码是什么吗？您是否看到自己在编写复杂的逻辑来处理模态的顺序，确保每个模态都已经转变为不可见，并且有大量的<em class="lp"> useStates </em>在适当的位置？</p><h2 id="f019" class="nl mj in bd mk nm nn dn mo no np dp ms lc nq nr mu lg ns nt mw lk nu nv my nw bi translated">问题的发展</h2><p id="5f2a" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">想象你最终做到了，你完成了流程，产品团队喜欢这个结果！他们现在想扩展这一流程，使其在用户第一次喜欢任何东西时只出现一次，无论是帖子、评论还是产品。您会如何处理？</p><p id="2c02" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你必须在每一个可能喜欢的屏幕上复制粘贴这四种模式。也许您甚至可以将所有这些都集成到一个组件中。即便如此，仍然需要将这个包装组件添加到每个屏幕上。</p><p id="4d99" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">几个月过去了，开发团队现在看到了在每个屏幕上不同地处理likes的复杂性，并希望将这一责任移交给可以在任何地方调用的<a class="ae ks" href="https://redux-saga.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux Saga </a>。如何在<a class="ae ks" href="https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers" rel="noopener ugc nofollow" target="_blank">传奇的动作</a>开火时才显示模态？<a class="ae ks" href="https://redux-saga.js.org/" rel="noopener ugc nofollow" target="_blank"> Sagas </a>运行外React组件。</p><p id="c45d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我可以自信地说，我经历过那些场景的发生。在食品配送行业工作，我们一直要求用户对应用程序、配送和他们的购买进行评级。</p><h1 id="be87" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">如何避免？</h1><p id="f141" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">让我们从解决国家问题开始。管理它是使用模态时最重要的事情之一。</p><h2 id="cd6f" class="nl mj in bd mk nm nn dn mo no np dp ms lc nq nr mu lg ns nt mw lk nu nv my nw bi translated">用"<em class="nx"> useImperativeHandle" </em>公开内部属性</h2><p id="9fd3" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">简而言之，<a class="ae ks" href="https://reactjs.org/docs/hooks-reference.html#useimperativehandle" rel="noopener ugc nofollow" target="_blank"><em class="lp">useImperativeHandle</em></a>允许你通过Ref公开内部属性。如果你有一个模态组件，你可以使用<a class="ae ks" href="https://reactjs.org/docs/hooks-reference.html#useimperativehandle" rel="noopener ugc nofollow" target="_blank"><em class="lp">useImperativeHandle</em></a>来公开它们的“<em class="lp"> show </em>”和“<em class="lp"> hide </em>”函数。意思是它可以管理自己的状态，而不用委托给它的父组件，例如用<a class="ae ks" href="https://reactnative.dev/docs/props" rel="noopener ugc nofollow" target="_blank"> <em class="lp">道具</em> </a>。</p><p id="41fa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当你想让你的代码更清晰并避免传递许多道具时，这是很有帮助的。让我们试一试:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ny nz l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">That’s the transition to a better place.</figcaption></figure><p id="9182" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">虽然这是朝着正确方向迈出的一步，但它本身并不能解决我们所有的问题。即:</p><ul class=""><li id="b7c4" class="oa ob in kv b kw kx kz la lc oc lg od lk oe lo of og oh oi bi translated">要使用它，我们需要从一个<a class="ae ks" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank"> <em class="lp"> useRef </em> </a>钩子传递一个<em class="lp">‘ref’</em>prop，这意味着我们不能在React组件之外调用‘show’。</li><li id="b499" class="oa ob in kv b kw oj kz ok lc ol lg om lk on lo of og oh oi bi translated">我们仍然需要在每个屏幕上实例化组件。如果不重复使用<em class="lp">示例模式</em>，就无法在多个屏幕上使用它。</li></ul><h2 id="e1ca" class="nl mj in bd mk nm nn dn mo no np dp ms lc nq nr mu lg ns nt mw lk nu nv my nw bi translated">向外公开组件的引用</h2><p id="159f" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">大多数人不知道这一点，但是React有一个<a class="ae ks" href="http://reactjs.org/docs/refs-and-the-dom.html#creating-refs" rel="noopener ugc nofollow" target="_blank"> <em class="lp"> createRef </em> </a>方法，可以在React组件之外使用。事实上，它甚至出现在针对边缘情况的React-Navigation文档中。</p><p id="b879" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://reactnavigation.org/docs/navigating-without-navigation-prop/" rel="noopener ugc nofollow" target="_blank"><em class="lp">https://react navigation . org/docs/navigation-with-navigation-prop/</em></a></p><p id="dd55" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在实践中，它带来的灵活性可以在这里看到:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="1bfe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在<em class="lp">祈使句</em>可以导入到任何地方使用，只要<em class="lp">智能示例</em>在根目录下。我们可以使用<em class="lp">显示</em>和<em class="lp">隐藏</em>来隐藏每个组件、功能或<a class="ae ks" href="https://redux-saga.js.org/" rel="noopener ugc nofollow" target="_blank">传奇</a>。</p><p id="9649" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这解决了我们的大多数问题，但是还有一个问题:很难管理一个有很多模态引用和模态的项目。</p><p id="b672" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在那里，您可以通过抽象进行创作，使<em class="lp">智能示例</em>呈现您想要的任何模式！一种方法是让<em class="lp"> show </em>函数接收一个组件并渲染它。</p><h1 id="3fc8" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">走得更远</h1><p id="8fe9" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">我没有让你们重新发明轮子，而是基于<a class="ae ks" href="https://github.com/react-native-modal/react-native-modal" rel="noopener ugc nofollow" target="_blank"><em class="lp">react-native-modal</em></a>创建了一个开源库，该库封装了所有这些概念以及更多概念，并提供了完整的TypeScript支持。</p><p id="091a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以下是如何使用它的基本想法:</p><blockquote class="nf ng nh"><p id="cca8" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated">“说话便宜。<strong class="kv io">给我看看代码</strong>。― <strong class="kv io"> Linus Torvalds </strong>。</p></blockquote><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ny nz l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Example using react-native-magic-modal</figcaption></figure><p id="5961" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如您所看到的，通过简单地抽象我们已经经历过的概念，它给了您很多以前无法想象的灵活性。</p><p id="87b8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，确认流程<em class="lp"> </em>可以从<em class="lp"> </em>任意位置调用<strong class="kv io"> <em class="lp"> </em> </strong>。内部或外部反应部件。</p><p id="107c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">此外，它还自动处理关于情态动词的常见问题。</p><blockquote class="nf ng nh"><p id="1156" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated"><strong class="kv io">你知道在《自然反应》中，不能同时出现两种情态动词吗？</strong></p><p id="5fe6" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated">即使您试图一个接一个地显示一个模态，也可能会失败，因为最后一个模态仍然处于“关闭”状态。幸运的是，我们这边已经解决了这个问题。</p><p id="02fd" class="kt ku lp kv b kw kx jo ky kz la jr lb ni ld le lf nj lh li lj nk ll lm ln lo ig bi translated"><a class="ae ks" href="https://github.com/react-native-modal/react-native-modal/issues/30" rel="noopener ugc nofollow" target="_blank">https://git hub . com/react-native-modal/react-native-modal/issues/30</a></p></blockquote><p id="2ba5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">React Native Magic Modal文档很容易理解，会让您有一个开始。您可以在这里了解更多信息:</p><div class="lq lr gp gr ls lt"><a href="https://github.com/GSTJ/react-native-magic-modal" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd io gy z fp ly fr fs lz fu fw im bi translated">反应自然魔法模式🦄</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">一个可以在任何地方强制使用的模态组件！</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">github.com/GSTJ/react-native-magic-modal</p></div></div><div class="mc l"><div class="oo l me mf mg mc mh km lt"/></div></div></a></div><p id="d2a8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">同样的逻辑已经在我工作过的大公司中经受了考验，比如<strong class="kv io"> Zé Delivery </strong>(由AB-InBev生产)、<strong class="kv io"> Alfred Delivery </strong>、以及<strong class="kv io"> X-Team </strong>。</p><p id="71cc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接受捐款！</p><p id="02de" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">感谢阅读。如果你喜欢这篇文章，请关注我的</em> <a class="ae ks" href="https://www.linkedin.com/in/gabrieltaveira/" rel="noopener ugc nofollow" target="_blank"> <em class="lp"> Linkedin </em> </a> <em class="lp">和</em><a class="ae ks" href="https://github.com/GSTJ" rel="noopener ugc nofollow" target="_blank"><em class="lp">Github</em></a><em class="lp">。</em></p></div><div class="ab cl op oq hr or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ig ih ii ij ik"><p id="9b2e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">说白了就是</em> </strong> </a> <em class="lp">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">免费周报</em> </strong> </a> <em class="lp">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">推特</em> </strong> </a>，<a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">领英</em> </strong> </a> <em class="lp">和</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">不和</em> </strong> </a> <strong class="kv io"> <em class="lp">。</em>T55】</strong></p></div></div>    
</body>
</html>