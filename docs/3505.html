<html>
<head>
<title>The Most Frequently-Seen Bugs in JavaScript Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript项目中最常见的错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-most-frequently-seen-bugs-in-javascript-projects-1a65db2757d9?source=collection_archive---------6-----------------------#2022-09-02">https://javascript.plainenglish.io/the-most-frequently-seen-bugs-in-javascript-projects-1a65db2757d9?source=collection_archive---------6-----------------------#2022-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4582" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我有机会观察到。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0f0f6986d668feb987750d819179c63d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r14MGP2S1oBsR2eP"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@elisa_ventur?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Elisa Ventur</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1eb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想今天我会分享我有机会观察到的JS项目中最常见的5个高度主观的错误。我通常在前端看到这些，但我也在JS后端看到这些。无论如何，这些技巧，经过适当的修改，将适用于许多其他编程语言。</p><p id="2941" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们开始吧。</p><h1 id="7676" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 1。将秘密扔进仓库</strong></h1><p id="86d2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我看到的最常见的错误之一是将所有非公开信息上传到Git存储库中。存储不公开不是坏事，公开了就是自讨苦吃。</p><h2 id="13d3" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">为什么？</h2><p id="c6dc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">API访问令牌之类的东西应该与密码同等对待。相反，我们不希望任何未经授权的人代表我们在API上做事情，特别是如果它是我们Firebase应用程序的基础。</p><p id="2e40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，一些令牌可能会赋予太多权力，例如，在AWS上，我们可以生成一个收据，让管理员访问我们云中的所有服务。不用说，如果它落入坏人之手，可能会引起麻烦。</p><h2 id="8aaa" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">如何预防？</h2><p id="76ea" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">最简单的方法是使用环境变量。我们定义一个Dotenv文件，在其中保存秘密值，将它们添加到。gitignore，然后通过process . env .[变量名]引用该值。</p><p id="b392" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要从文件中读取环境变量，我们可以:</p><ul class=""><li id="1839" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">在前端，使用Webpack中的DotenvPlugin，它将从。env文件添加到process.env对象</li><li id="5b1a" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">在后端，使用dotenv库，它读取。调用dotenv.config()后将env文件放入process.env</li><li id="2895" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">如果项目是从任何项目生成器(例如，Create React App，Nx)创建的，它们通常具有对。环境文件。例如，唯一值得注意的是。env文件被提交到CRA的存储库中，未提交的文件被命名为. env.local。另外，在CRA的例子中，我们有一个强制变量命名方案。</li></ul><h1 id="f223" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 2。在生产构建中使用npm / yarn安装</strong></h1><p id="72e6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">还记得开发人员发布了一个损坏的库版本的colors.js丑闻吗？还是在NPM发现恶意软件的无数丑闻？这个问题可能会影响到我们，但是我们可以把风险降到最低。</p><p id="6a0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们可以在package.json中设置不带通配符的包的特定版本，但即使这样也不能100%保护我们，因为外部依赖项通常已经有了这些通配符。</p><p id="e0b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">那么我们还能做些什么呢？</strong></p><p id="c4c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">依赖包锁。NPM和Yarn都生成了一个锁文件，其中包含了将包添加到项目中时所下载的库的版本信息。</p><p id="ad49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于这一点，我们应该确保我们始终安装一个经过验证的库版本。但是，有一个问题npm安装和yarn安装都不遵守这一点。那么怎么逼呢？</p><p id="8b69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">非常简单:</p><ul class=""><li id="d378" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">在NPM:高于海平面</li><li id="907c" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">纱线中:纱线安装—冻结锁文件</li></ul><p id="a599" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我们在生产构建中应该使用它的方式</p><h1 id="2df1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 3。JS应用程序Dockerfile中的操作顺序错误</strong></h1><p id="b53f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这有点像DevOps的主题，但是值得一提，因为它涉及到JS项目。如果你在项目中使用Docker(这在招聘时总是一大优势)，你应该知道如何避免Dockerfile错误。为什么？嗯，这样，不考虑变化:</p><ul class=""><li id="f294" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">我们总是会用NPM重新加载包，这通常很长——Docker有一个缓存，可以让我们跳过这一步。</li><li id="abca" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">容器由层组成(Dockerfile中的每一行，除了少数例外，都是一个新层)。如果具有不同标签的几个容器具有相同的层，则它们不会在集线器上复制，而是被重用。得益于此，我们节省了空间。</li><li id="65ee" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">继续上面的观点-如果我们已经在磁盘上有一个层，它不会被再次下载，所以docker pull花费的时间更少。</li></ul><h1 id="4ada" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 4。不使用ESLint / Prettiera / editorconfig等。</strong></h1><p id="e611" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在检查招聘代码时，让我远离存储库的一个原因是存储库的格式一致性没有反应。附加我在标题中提到的任何工具都需要一段时间，感谢它们，我们将保持代码风格的一致性。</p><p id="fe70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于他们的更多信息:</p><ul class=""><li id="db82" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">Editorconfig提供了最基本的功能，如间距大小和行尾类型。另外，你可以将它应用于任何文件格式，所以它是一个通用的工具。与代码编辑器集成，以便在创建代码时自动应用准则。</li><li id="3e01" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">ESLint是一个工具，它检查我们的代码是否按照我们的规则编写。在将JS / TS代码推送到存储库之前，用它检查一下是值得的。</li><li id="b137" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">另一方面，更漂亮地允许代码被自动格式化成预定的模式。通常，对于室内项目来说，越漂亮越好。你只需要记得运行它。</li><li id="a442" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">Stylelint是样式的ESLint等价物。它支持许多不同的风格语言(CSS，SCSS，等等)，但它也可以用于，例如，样式组件。</li><li id="7b86" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">hadolint——严格来说它已经不是JS了，但是如果你使用Docker，你应该了解这个工具。它允许您在编写Dockerfile文件时发现许多常见错误。</li></ul><h1 id="1ae8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak"> 5。没有架构约定(或后果)</strong></h1><p id="713f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这一点尤其适用于用Express写的React和backends，但如果有人有能力，在Angular和Nest.js中也能收支平衡。</p><p id="d4d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在创建任何一个编程项目的时候，你都应该把重点放在把代码分割成更小的部分，并把这些更小的部分合理地安排在项目中。</p><p id="d4e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于如何最好地在你的框架中共享代码并遵守约定，这是值得一读的。以下是一些极端的错误示例:</p><ul class=""><li id="67ec" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">把所有东西都放在一个文件里。我们有从那里开始的构建过程，把我们都带入一个JS。</li><li id="5dec" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">将多个组件保存在一个文件中。这对于Angular和Vue爱好者来说相当熟悉，但是在React中，您经常会发现多个组件的文件和容器。</li><li id="2cba" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">保持应用程序的全局状态。我们可以在每个框架中定义一个组件呈现状态是有原因的。从整个应用程序的角度来看，诸如输入的当前值或元素的可见性之类的东西并不重要。我们应该只对许多不同的、独立的组件共享的东西使用全局状态，例如，它可能是来自应用程序工作的API的数据。</li><li id="b2b9" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">没有架构一致性。如果您正在提取组件的文件夹，请将组件保存在那里。如果你有一个文件夹在州立商店，不要把它放在其他地方。如果你使用样式组件，不要无缘无故地用纯CSS编写部分样式。</li></ul><p id="0f75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，值得一读的是其他人如何处理项目中的架构问题(React，Express)或者框架强加了什么架构(Angular，Nest.js)。</p><p id="1f95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，如果你没有发现任何令人满意的东西，那么就去看看它的来源——例如，学习清洁建筑，或者阅读罗伯特·马丁。他写的是一般的代码架构，而不是专注于特定的技术。</p><p id="4941" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望上面的列表能帮助你创建更好的项目，避免一些简单的错误。这个清单可能会更长，但这些通常最吸引我的注意力，也可能吸引其他人的注意力。</p><p id="9c6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="np">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="np">plain English . io</em></strong></a><em class="np">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="np">免费周报</em> </strong> </a> <em class="np">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="np">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="np">LinkedIn</em></strong></a><em class="np"/><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="np">YouTube</em></strong></a><em class="np"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="np">不和</em> </strong> </a> <em class="np">。</em></p></div></div>    
</body>
</html>