# æ¯ä¸ªäººå¯¹ååº”æ¯è¯­æƒ…æ€åŠ¨è¯çš„è¯¯è§£

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/you-have-been-using-react-native-modals-wrong-9b8c17de2f96?source=collection_archive---------1----------------------->

## å¦‚ä½•æŒæ¡ååº”åŸç”Ÿæ¨¡æ€å¤åˆæµçš„æŒ‡å—ã€‚

![](img/654d479d97ffb569d8b91c173a07c7a5.png)

[https://gifs.com/gif/this-is-fine-qj5Dv2](https://gifs.com/gif/this-is-fine-qj5Dv2)

æ‚¨æ˜¯å¦å‘ç°åœ¨ React Native ä¸­ä½¿ç”¨æƒ…æ€åŠ¨è¯æœ‰ç‚¹éº»çƒ¦ï¼Ÿä½ å¹¶ä¸å­¤å•ï¼è¯•å›¾ä¿æŒå¯¹å…¶å¼€æ”¾çŠ¶æ€çš„æ§åˆ¶å¹¶åœ¨ä»»ä½•ä½ æƒ³ä½¿ç”¨å®ƒçš„åœ°æ–¹é‡å¤ä»£ç å¯èƒ½æ˜¯ç›¸å½“ä¹å‘³çš„ã€‚

å½“æ‚¨è¯•å›¾åˆ›å»ºå¤æ‚çš„æµæ—¶ï¼Œé—®é¢˜åªä¼šå˜å¾—æ›´ç³Ÿã€‚ä¸€æ—¦ä½ é€šè¿‡äº†ä¸¤ä¸ªæ¨¡æ€ï¼Œä½ çš„ä¸»è¦éƒ¨åˆ†å°±æ˜¯ä¸€å›¢ä¹±éº»ï¼ŒçŠ¶æ€æ— å¤„ä¸åœ¨ã€‚

æˆ‘åœ¨è®¸å¤šå¤§å…¬å¸éƒ½äº²èº«ç»å†è¿‡ï¼Œæ¯”å¦‚ **ZÃ© Delivery** (ç”± AB-InBev å…¬å¸ç”Ÿäº§)ã€ **Alfred Delivery** ï¼Œç°åœ¨åœ¨ **X-Team** ã€‚

ä½†ä¸è¦ç»æœ›ï¼å¤§å¤šæ•°äººè®¤ä¸ºè¿™æ˜¯å”¯ä¸€çš„æ–¹æ³•ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è§£é‡Šé—®é¢˜æ˜¯å¦‚ä½•å¼€å§‹çš„ï¼Œä»¥åŠå¦‚ä½•ä¼˜é›…åœ°å¤„ç†å®ƒä»¬ï¼ŒåŒæ—¶æé«˜æ‚¨çš„å¼€å‘ç»éªŒã€‚å®ƒç”šè‡³ä¼šå¸®åŠ©ä½ ä½¿ç”¨å†…å¤–ååº”æˆåˆ†çš„æƒ…æ€åŠ¨è¯(ä¾‹å¦‚åœ¨[å®å½•](https://redux-saga.js.org/)ä¸­)ï¼)

*æœ¬æ–‡çš„æ•™å¯¼å·²å°è£…åœ¨æ­¤åº“ä¸­:*

[](https://github.com/GSTJ/react-native-magic-modal) [## ååº”è‡ªç„¶é­”æ³•æ¨¡å¼ğŸ¦„

### ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«å¼ºåˆ¶è°ƒç”¨çš„æ¨¡æ€åº“ï¼

https://github.com/GSTJ/react-native-magic-modal](https://github.com/GSTJ/react-native-magic-modal) 

# â€œç®€å•æµç¨‹â€çš„æŒ‘æˆ˜

æƒ³è±¡ä¸€ä¸‹ã€‚æ‚¨åœ¨è„¸ä¹¦å·¥ä½œï¼Œäº§å“å›¢é˜Ÿè¦æ±‚â€œç®€å•æµç¨‹â€:

> ä½œä¸ºä¸€å®¶å…¬å¸ï¼Œæˆ‘æƒ³å±•ç¤ºä¸€ç§æ¨¡å¼ï¼Œè¦æ±‚ç”¨æˆ·åœ¨ç¬¬ä¸€æ¬¡å–œæ¬¢ä¸€ç¯‡å¸–å­åï¼Œå¯¹è¯¥åº”ç”¨è¿›è¡Œ 0-5 æ˜Ÿçº§çš„è¯„åˆ†ã€‚
> 
> a.**å¦‚æœç”¨æˆ·ç»™å®ƒçš„è¯„åˆ†å°‘äºå››é¢—æ˜Ÿï¼Œåˆ™**æ˜¾ç¤ºå¦ä¸€ç§æ¨¡å¼ï¼Œè¯¢é—®å¦‚ä½•æ”¹è¿›ã€‚
> 
> b.**å¦åˆ™ï¼Œ**ä¼šæ˜¾ç¤ºä¸€ä¸ªå¿«ä¹çš„æ¨¡å¼ï¼Œè¦æ±‚ç”¨æˆ·åœ¨åº”ç”¨å•†åº—ç»™æˆ‘ä»¬æ‰“åˆ†ã€‚
> 
> **æœ€å**å±•ç¤ºä¸€ä¸ªâ€œè°¢è°¢â€çš„æ¨¡å¼ï¼Œæ„Ÿè°¢ç”¨æˆ·çš„æ”¯æŒã€‚

è¿™ä¸æ˜¯å¾ˆç‰µå¼ºï¼Œå¯¹å§ï¼Ÿ

å››ç§æ¨¡å¼ï¼Œå®ƒä»å¼€å‘è€…çš„è§’åº¦æå‡ºäº†å¾ˆå¤šé—®é¢˜ã€‚è¿™ä¸ªé€»è¾‘åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿæˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç†æœ€åä¸€ä¸ªæ¨¡æ€çš„è¾“å‡ºï¼Ÿæˆ‘ä»¬å¦‚ä½•ä¿æŒæ¸…æ´ï¼Ÿ

ä½ èƒ½è®¤å‡ºå¯†ç æ˜¯ä»€ä¹ˆå—ï¼Ÿæ‚¨æ˜¯å¦çœ‹åˆ°è‡ªå·±åœ¨ç¼–å†™å¤æ‚çš„é€»è¾‘æ¥å¤„ç†æ¨¡æ€çš„é¡ºåºï¼Œç¡®ä¿æ¯ä¸ªæ¨¡æ€éƒ½å·²ç»è½¬å˜ä¸ºä¸å¯è§ï¼Œå¹¶ä¸”æœ‰å¤§é‡çš„ *useStates* åœ¨é€‚å½“çš„ä½ç½®ï¼Ÿ

## é—®é¢˜çš„å‘å±•

æƒ³è±¡ä½ æœ€ç»ˆåšåˆ°äº†ï¼Œä½ å®Œæˆäº†æµç¨‹ï¼Œäº§å“å›¢é˜Ÿå–œæ¬¢è¿™ä¸ªç»“æœï¼ä»–ä»¬ç°åœ¨æƒ³æ‰©å±•è¿™ä¸€æµç¨‹ï¼Œä½¿å…¶åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡å–œæ¬¢ä»»ä½•ä¸œè¥¿æ—¶åªå‡ºç°ä¸€æ¬¡ï¼Œæ— è®ºæ˜¯å¸–å­ã€è¯„è®ºè¿˜æ˜¯äº§å“ã€‚æ‚¨ä¼šå¦‚ä½•å¤„ç†ï¼Ÿ

ä½ å¿…é¡»åœ¨æ¯ä¸€ä¸ªå¯èƒ½å–œæ¬¢çš„å±å¹•ä¸Šå¤åˆ¶ç²˜è´´è¿™å››ç§æ¨¡å¼ã€‚ä¹Ÿè®¸æ‚¨ç”šè‡³å¯ä»¥å°†æ‰€æœ‰è¿™äº›éƒ½é›†æˆåˆ°ä¸€ä¸ªç»„ä»¶ä¸­ã€‚å³ä¾¿å¦‚æ­¤ï¼Œä»ç„¶éœ€è¦å°†è¿™ä¸ªåŒ…è£…ç»„ä»¶æ·»åŠ åˆ°æ¯ä¸ªå±å¹•ä¸Šã€‚

å‡ ä¸ªæœˆè¿‡å»äº†ï¼Œå¼€å‘å›¢é˜Ÿç°åœ¨çœ‹åˆ°äº†åœ¨æ¯ä¸ªå±å¹•ä¸Šä¸åŒåœ°å¤„ç† likes çš„å¤æ‚æ€§ï¼Œå¹¶å¸Œæœ›å°†è¿™ä¸€è´£ä»»ç§»äº¤ç»™å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨çš„ [Redux Saga](https://redux-saga.js.org/) ã€‚å¦‚ä½•åœ¨[ä¼ å¥‡çš„åŠ¨ä½œ](https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers)å¼€ç«æ—¶æ‰æ˜¾ç¤ºæ¨¡æ€ï¼Ÿ [Sagas](https://redux-saga.js.org/) è¿è¡Œå¤– React ç»„ä»¶ã€‚

æˆ‘å¯ä»¥è‡ªä¿¡åœ°è¯´ï¼Œæˆ‘ç»å†è¿‡é‚£äº›åœºæ™¯çš„å‘ç”Ÿã€‚åœ¨é£Ÿå“é…é€è¡Œä¸šå·¥ä½œï¼Œæˆ‘ä»¬ä¸€ç›´è¦æ±‚ç”¨æˆ·å¯¹åº”ç”¨ç¨‹åºã€é…é€å’Œä»–ä»¬çš„è´­ä¹°è¿›è¡Œè¯„çº§ã€‚

# å¦‚ä½•é¿å…ï¼Ÿ

è®©æˆ‘ä»¬ä»è§£å†³å›½å®¶é—®é¢˜å¼€å§‹ã€‚ç®¡ç†å®ƒæ˜¯ä½¿ç”¨æ¨¡æ€æ—¶æœ€é‡è¦çš„äº‹æƒ…ä¹‹ä¸€ã€‚

## ç”¨" *useImperativeHandle"* å…¬å¼€å†…éƒ¨å±æ€§

ç®€è€Œè¨€ä¹‹ï¼Œ[*useImperativeHandle*](https://reactjs.org/docs/hooks-reference.html#useimperativehandle)å…è®¸ä½ é€šè¿‡ Ref å…¬å¼€å†…éƒ¨å±æ€§ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªæ¨¡æ€ç»„ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨[*useImperativeHandle*](https://reactjs.org/docs/hooks-reference.html#useimperativehandle)æ¥å…¬å¼€å®ƒä»¬çš„â€œ *show* â€å’Œâ€œ *hide* â€å‡½æ•°ã€‚æ„æ€æ˜¯å®ƒå¯ä»¥ç®¡ç†è‡ªå·±çš„çŠ¶æ€ï¼Œè€Œä¸ç”¨å§”æ‰˜ç»™å®ƒçš„çˆ¶ç»„ä»¶ï¼Œä¾‹å¦‚ç”¨ [*é“å…·*](https://reactnative.dev/docs/props) ã€‚

å½“ä½ æƒ³è®©ä½ çš„ä»£ç æ›´æ¸…æ™°å¹¶é¿å…ä¼ é€’è®¸å¤šé“å…·æ—¶ï¼Œè¿™æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚è®©æˆ‘ä»¬è¯•ä¸€è¯•:

Thatâ€™s the transition to a better place.

è™½ç„¶è¿™æ˜¯æœç€æ­£ç¡®æ–¹å‘è¿ˆå‡ºçš„ä¸€æ­¥ï¼Œä½†å®ƒæœ¬èº«å¹¶ä¸èƒ½è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„é—®é¢˜ã€‚å³:

*   è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸€ä¸ª [*useRef*](https://reactjs.org/docs/hooks-reference.html#useref) é’©å­ä¼ é€’ä¸€ä¸ª*â€˜refâ€™*propï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åœ¨ React ç»„ä»¶ä¹‹å¤–è°ƒç”¨â€˜showâ€™ã€‚
*   æˆ‘ä»¬ä»ç„¶éœ€è¦åœ¨æ¯ä¸ªå±å¹•ä¸Šå®ä¾‹åŒ–ç»„ä»¶ã€‚å¦‚æœä¸é‡å¤ä½¿ç”¨*ç¤ºä¾‹æ¨¡å¼*ï¼Œå°±æ— æ³•åœ¨å¤šä¸ªå±å¹•ä¸Šä½¿ç”¨å®ƒã€‚

## å‘å¤–å…¬å¼€ç»„ä»¶çš„å¼•ç”¨

å¤§å¤šæ•°äººä¸çŸ¥é“è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯ React æœ‰ä¸€ä¸ª [*createRef*](http://reactjs.org/docs/refs-and-the-dom.html#creating-refs) æ–¹æ³•ï¼Œå¯ä»¥åœ¨ React ç»„ä»¶ä¹‹å¤–ä½¿ç”¨ã€‚äº‹å®ä¸Šï¼Œå®ƒç”šè‡³å‡ºç°åœ¨é’ˆå¯¹è¾¹ç¼˜æƒ…å†µçš„ React-Navigation æ–‡æ¡£ä¸­ã€‚

[*https://react navigation . org/docs/navigation-with-navigation-prop/*](https://reactnavigation.org/docs/navigating-without-navigation-prop/)

åœ¨å®è·µä¸­ï¼Œå®ƒå¸¦æ¥çš„çµæ´»æ€§å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°:

ç°åœ¨*ç¥ˆä½¿å¥*å¯ä»¥å¯¼å…¥åˆ°ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œåªè¦*æ™ºèƒ½ç¤ºä¾‹*åœ¨æ ¹ç›®å½•ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨*æ˜¾ç¤º*å’Œ*éšè—*æ¥éšè—æ¯ä¸ªç»„ä»¶ã€åŠŸèƒ½æˆ–[ä¼ å¥‡](https://redux-saga.js.org/)ã€‚

è¿™è§£å†³äº†æˆ‘ä»¬çš„å¤§å¤šæ•°é—®é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜:å¾ˆéš¾ç®¡ç†ä¸€ä¸ªæœ‰å¾ˆå¤šæ¨¡æ€å¼•ç”¨å’Œæ¨¡æ€çš„é¡¹ç›®ã€‚

åœ¨é‚£é‡Œï¼Œæ‚¨å¯ä»¥é€šè¿‡æŠ½è±¡è¿›è¡Œåˆ›ä½œï¼Œä½¿*æ™ºèƒ½ç¤ºä¾‹*å‘ˆç°æ‚¨æƒ³è¦çš„ä»»ä½•æ¨¡å¼ï¼ä¸€ç§æ–¹æ³•æ˜¯è®© *show* å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶å¹¶æ¸²æŸ“å®ƒã€‚

# èµ°å¾—æ›´è¿œ

æˆ‘æ²¡æœ‰è®©ä½ ä»¬é‡æ–°å‘æ˜è½®å­ï¼Œè€Œæ˜¯åŸºäº[*react-native-modal*](https://github.com/react-native-modal/react-native-modal)åˆ›å»ºäº†ä¸€ä¸ªå¼€æºåº“ï¼Œè¯¥åº“å°è£…äº†æ‰€æœ‰è¿™äº›æ¦‚å¿µä»¥åŠæ›´å¤šæ¦‚å¿µï¼Œå¹¶æä¾›äº†å®Œæ•´çš„ TypeScript æ”¯æŒã€‚

ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨å®ƒçš„åŸºæœ¬æƒ³æ³•:

> â€œè¯´è¯ä¾¿å®œã€‚**ç»™æˆ‘çœ‹çœ‹ä»£ç **ã€‚â€• **Linus Torvalds** ã€‚

Example using react-native-magic-modal

æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œé€šè¿‡ç®€å•åœ°æŠ½è±¡æˆ‘ä»¬å·²ç»ç»å†è¿‡çš„æ¦‚å¿µï¼Œå®ƒç»™äº†æ‚¨å¾ˆå¤šä»¥å‰æ— æ³•æƒ³è±¡çš„çµæ´»æ€§ã€‚

ç°åœ¨ï¼Œç¡®è®¤æµç¨‹å¯ä»¥ä»ä»»æ„ä½ç½®è°ƒç”¨ã€‚å†…éƒ¨æˆ–å¤–éƒ¨ååº”éƒ¨ä»¶ã€‚

æ­¤å¤–ï¼Œå®ƒè¿˜è‡ªåŠ¨å¤„ç†å…³äºæƒ…æ€åŠ¨è¯çš„å¸¸è§é—®é¢˜ã€‚

> **ä½ çŸ¥é“åœ¨ã€Šè‡ªç„¶ååº”ã€‹ä¸­ï¼Œä¸èƒ½åŒæ—¶å‡ºç°ä¸¤ç§æƒ…æ€åŠ¨è¯å—ï¼Ÿ**
> 
> å³ä½¿æ‚¨è¯•å›¾ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ˜¾ç¤ºä¸€ä¸ªæ¨¡æ€ï¼Œä¹Ÿå¯èƒ½ä¼šå¤±è´¥ï¼Œå› ä¸ºæœ€åä¸€ä¸ªæ¨¡æ€ä»ç„¶å¤„äºâ€œå…³é—­â€çŠ¶æ€ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬è¿™è¾¹å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚
> 
> [https://git hub . com/react-native-modal/react-native-modal/issues/30](https://github.com/react-native-modal/react-native-modal/issues/30)

React Native Magic Modal æ–‡æ¡£å¾ˆå®¹æ˜“ç†è§£ï¼Œä¼šè®©æ‚¨æœ‰ä¸€ä¸ªå¼€å§‹ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œäº†è§£æ›´å¤šä¿¡æ¯:

[](https://github.com/GSTJ/react-native-magic-modal) [## ååº”è‡ªç„¶é­”æ³•æ¨¡å¼ğŸ¦„

### ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¼ºåˆ¶ä½¿ç”¨çš„æ¨¡æ€ç»„ä»¶ï¼

github.com/GSTJ/react-native-magic-modal](https://github.com/GSTJ/react-native-magic-modal) 

åŒæ ·çš„é€»è¾‘å·²ç»åœ¨æˆ‘å·¥ä½œè¿‡çš„å¤§å…¬å¸ä¸­ç»å—äº†è€ƒéªŒï¼Œæ¯”å¦‚ **ZÃ© Delivery** (ç”± AB-InBev ç”Ÿäº§)ã€ **Alfred Delivery** ã€ä»¥åŠ **X-Team** ã€‚

æ¥å—ææ¬¾ï¼

*æ„Ÿè°¢é˜…è¯»ã€‚å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·å…³æ³¨æˆ‘çš„* [*Linkedin*](https://www.linkedin.com/in/gabrieltaveira/) *å’Œ*[*Github*](https://github.com/GSTJ)*ã€‚*

*æ›´å¤šå†…å®¹çœ‹* [***è¯´ç™½äº†å°±æ˜¯***](https://plainenglish.io/) *ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„* [***å…è´¹å‘¨æŠ¥***](http://newsletter.plainenglish.io/) *ã€‚å…³æ³¨æˆ‘ä»¬å…³äº* [***æ¨ç‰¹***](https://twitter.com/inPlainEngHQ) ï¼Œ [***é¢†è‹±***](https://www.linkedin.com/company/inplainenglish/) *å’Œ* [***ä¸å’Œ***](https://discord.gg/GtDtUAvyhW) ***ã€‚***