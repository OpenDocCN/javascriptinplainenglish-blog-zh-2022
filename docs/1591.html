<html>
<head>
<title>Introducing XdoX — Start Challenges, Log your Progress and Show them off to the World</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍XdoX —开始挑战，记录你的进步，并向全世界展示它们</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introducing-xdox-start-challenges-log-your-progress-and-show-them-off-to-the-world-9500eb3639a0?source=collection_archive---------19-----------------------#2022-04-04">https://javascript.plainenglish.io/introducing-xdox-start-challenges-log-your-progress-and-show-them-off-to-the-world-9500eb3639a0?source=collection_archive---------19-----------------------#2022-04-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/d337dbd65c5403ed98f77e44af80d402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*41wwNJlp9Mgy5LFQi2FtIw.png"/></div></div></figure><div class=""/><h1 id="00fd" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">🤔XdoX是什么？</h1><p id="7139" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">XdoX是一个网络应用程序，让你开始挑战，并记录你每天的进展。您还可以通过您独特的个人资料页面向世界展示您的进步。这些挑战可以是从100天的代码到30天的信任，甚至60天的烹饪！</p><p id="f15a" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这也是我提交给<a class="ae lw" href="https://townhall.hashnode.com/hasura-hackathon" rel="noopener ugc nofollow" target="_blank"> Hasura x Hashnode Hackathon </a>的。</p><p id="1795" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><a class="ae lw" href="https://xdox.me/" rel="noopener ugc nofollow" target="_blank">现场演示</a> / <a class="ae lw" href="https://github.com/AnishDe12020/xdox" rel="noopener ugc nofollow" target="_blank"> GitHub资源库</a></p><h1 id="608a" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">❓什么是哈苏拉？</h1><p id="acab" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">GraphQL是一种带有模式的API查询语言。它具有多种功能，如查询特定字段、分页、聚合查询等。</p><p id="df9d" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">然而，制作一个GraphQL后端比制作一个简单的REST后端更复杂，这就是Hasura的用武之地。Hasura 为我们提供了一种简单的方法来创建一个连接数据库和应用程序的GraphQL后端，而无需编写任何代码！</p><p id="7255" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">Hasura也有一个不错的免费层的云产品，这样我们就可以开始托管我们的GaphQL后端，而不需要担心成本。它是开源的，也是自托管的。</p><h1 id="ded4" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">📚技术堆栈</h1><p id="628c" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我对XdoX使用了哪些技术？</p><p id="4067" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">首先，我使用<a class="ae lw" href="https://hasura.io/" rel="noopener ugc nofollow" target="_blank"> Hasura </a>作为应用程序的后端。</p><p id="2c25" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">除此之外，我还使用了以下服务-</p><ul class=""><li id="1437" class="lx ly iy kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated"><a class="ae lw" href="https://clerk.dev/" rel="noopener ugc nofollow" target="_blank"> Clerk </a>向我的应用程序添加认证。它还与Hasura很好地集成在一起，并且我能够通过使用JWT认证来保护我的后端(在本文后面会有更多的介绍)</li><li id="85d8" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">我的数据库。它还与Hasura很好地集成在一起</li><li id="04bb" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">托管我的前端</li></ul><p id="9e4a" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这是我在应用程序中使用的库和框架</p><ul class=""><li id="fc33" class="lx ly iy kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated">我的应用程序前端的<a class="ae lw" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a></li><li id="0c55" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">用于设计我的前端</li><li id="d21d" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><a class="ae lw" href="https://www.radix-ui.com/" rel="noopener ugc nofollow" target="_blank"> Radix UI </a>用于非风格化的UI组件，如模态和弹出框</li><li id="fffe" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><a class="ae lw" href="https://headlessui.dev/" rel="noopener ugc nofollow" target="_blank">无头用户界面</a>用于过渡</li><li id="a1bf" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><a class="ae lw" href="https://www.apollographql.com/docs/react/" rel="noopener ugc nofollow" target="_blank"> Apollo React客户端</a>从我的前端发出GraphQL请求。它还负责缓存。</li><li id="e16e" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><a class="ae lw" href="https://tiptap.dev/" rel="noopener ugc nofollow" target="_blank"> Tiptap </a>用于支持markdown的富文本编辑器，用于记录进度</li></ul><h1 id="e10d" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">xdox是如何工作的？</h1><p id="e720" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">这是一个简单的三步过程。一个人使用谷歌或电子邮件注册一个帐户，然后开始挑战(例如100DaysOfCode)。然后一个人每天记录他们的进步。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ml"><img src="../Images/0f15f876f3a452b8fdc4dd56f483e1d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zp0SdzQLfyrxL_fw"/></div></div></figure><p id="833d" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">接下来，人们可以分享他们独特的个人资料页面，向世界展示他们的进步。</p><p id="affc" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">同样，没有必要每天记录你的进步。该应用程序的构建方式让您可以灵活应对挑战。去度假了？没问题，XdoX不会因为没有记录你的进度而出错。</p><h1 id="b4f2" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">保护后端</h1><p id="bbda" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">后端可以直接访问数据库，保护它们被认为是一种最佳实践。我需要从我的前端使用GraphQL API，因此它必须是一个公共API。但是，我必须确保它的安全，以便只能发出有限的未授权请求和授权请求。</p><p id="0133" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">当我使用Clerk进行用户认证时，我没有花很长时间就实现了这一点。职员使用JWT模板与Hasura集成。这里是解释如何实现这个的<a class="ae lw" href="https://docs.clerk.dev/integrations/hasura" rel="noopener ugc nofollow" target="_blank">文档。</a></p><p id="3b86" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在这里，我们从职员仪表板创建一个JWT模板。这是我的样子:</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mq"><img src="../Images/19d03ac186c8c168dd193e3bcd30357c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PwFNoWZj771fCN3t"/></div></div></figure><p id="d667" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">当向API发出请求时，我们传入一个名为<code class="fe mr ms mt mu b">Authorization</code>的头，以一个不记名令牌作为值。这是由Hasura使用签名密钥验证的(这是在Hasura中通过环境变量设置的)。</p><p id="99a2" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这是前端中的代码，它负责在发出请求时传递不记名令牌:</p><figure class="mm mn mo mp gt ip"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="4e96" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">我们简单地通过使用职员React SDK提供给我们的<code class="fe mr ms mt mu b">getToken</code>函数得到一个不记名令牌，并在<code class="fe mr ms mt mu b">Authorization</code>头中传递它。</p><p id="0f44" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">现在，如果承载令牌是有效的，<code class="fe mr ms mt mu b">X-Hasura-User-Id</code>报头被添加到请求中，其中包含发出请求的用户的用户id。<code class="fe mr ms mt mu b">user</code>角色的头也被传入。请注意，这是由Hasura一方负责的。</p><p id="4532" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">我还使用<code class="fe mr ms mt mu b">viewer</code>角色发出了一些未经验证的请求。这在我的Hasura实例中被设置为未授权角色，并在公共用户配置文件页面中使用。下面是处理未经身份验证的请求的代码:</p><figure class="mm mn mo mp gt ip"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="2ff5" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">为数据设置行级权限</h1><p id="0921" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">尽管API现在是安全的，但默认情况下没有数据是可访问的。我们需要设置权限，这也将让我们限制一个人可以访问的数据。例如，我们将让用户仅访问他们自己的用户数据，并且仅访问他们创建的私人质询。</p><p id="42df" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">令人欣慰的是，Hasura又一次让这项工作变得非常容易。让我们看一个例子:</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ml"><img src="../Images/6fa00db2dcd3169db34e590d04fc11cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FLiu4o8EBgQ6EyQb"/></div></div></figure><p id="3862" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在这里，我已经为<code class="fe mr ms mt mu b">user</code>角色设置了插入权限，这样，只有当<code class="fe mr ms mt mu b">user_id</code>列等于发出请求的用户的用户id时，才能插入行(这是作为标题传入的)。</p><p id="2d16" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">我也允许<code class="fe mr ms mt mu b">user</code>只更新特定的栏目。这里，<code class="fe mr ms mt mu b">id</code>列是用<code class="fe mr ms mt mu b">gen_random_uuid()</code> PostgreSQL函数自动生成的。<code class="fe mr ms mt mu b">created_at</code>和<code class="fe mr ms mt mu b">updated_at</code>字段也由后端处理。</p><p id="8fee" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">我还为<code class="fe mr ms mt mu b">user_id</code>列添加了一个列预设，它将等于<code class="fe mr ms mt mu b">X-Hasura-User-Id</code>标题。现在，这是疯狂的强大！</p><p id="670c" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">类似地，我为<code class="fe mr ms mt mu b">user</code>角色设置了更新、选择和删除权限，在这里我检查了<code class="fe mr ms mt mu b">user_id</code>列是否与<code class="fe mr ms mt mu b">X-Hasura-User-Id</code>标题匹配。</p><p id="e693" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">对于<code class="fe mr ms mt mu b">viewer</code>角色，我是这样设置的:</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/61afda93cd6f09f395fbb23677319d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5zGCqoMUQMoue2K4"/></div></div></figure><p id="82cd" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这里，查看器只能从数据库中选择行(也就是说，只能读取数据)。我另外添加了一个检查来确保挑战是公开的。</p><h1 id="0d9c" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">👓我从这次黑客马拉松中学到的是</h1><p id="bf1a" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">虽然我过去使用过GraphQL，但我的经验相当有限。此外，我从未构建过GraphQL后端，我只是使用公共的GraphQL APIs。我以前也从未使用过Hasura，也从未在任何生产项目中使用过SQL数据库。</p><p id="cb1c" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这次黑客马拉松让我有机会通过Hasura探索GraphQL的后端，并理解更深层次的概念。我还在使用PostgreSQL数据库和学习更多关系数据方面度过了一段美好的时光。这是疯狂的强大！</p><h1 id="a091" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">✨结论</h1><p id="6184" class="pw-post-body-paragraph kt ku iy kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在过去的一个月里，我一直在做XdoX，并且一直在探索和学习很多新的东西。我很兴奋看到XdoX在现实世界中的表现！</p><p id="6169" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">再见，祝你愉快！😁🤞</p><h1 id="0b98" class="jv jw iy bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">🔗重要链接</h1><ul class=""><li id="c407" class="lx ly iy kv b kw kx la lb le my li mz lm na lq mc md me mf bi translated"><a class="ae lw" href="https://www.xdox.me/" rel="noopener ugc nofollow" target="_blank"> XdoX </a></li><li id="6f42" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><a class="ae lw" href="https://github.com/AnishDe12020/xdox" rel="noopener ugc nofollow" target="_blank"> XdoX GitHub库</a></li><li id="39be" class="lx ly iy kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><a class="ae lw" href="https://www.xdox.me/@anishde12020" rel="noopener ugc nofollow" target="_blank">我在XdoX上的个人资料</a></li></ul></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><p id="bb65" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="ni">原发布于</em><a class="ae lw" href="https://blog.anishde.dev/introducing-xdox-start-challenges-log-your-progress-and-show-them-off-to-the-world" rel="noopener ugc nofollow" target="_blank"><em class="ni">https://blog . anishde . dev</em></a><em class="ni">。</em></p><p id="dd27" class="pw-post-body-paragraph kt ku iy kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="ni">更多内容看</em> <a class="ae lw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv iz"> <em class="ni">说白了。报名参加我们的</em> <a class="ae lw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv iz"> <em class="ni">免费周报</em> </strong> </a> <em class="ni">。关注我们关于</em><a class="ae lw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv iz"><em class="ni">Twitter</em></strong></a><em class="ni">和</em><a class="ae lw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv iz"><em class="ni">LinkedIn</em></strong></a><em class="ni">。加入我们的</em> <a class="ae lw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv iz"> <em class="ni">社区</em> </strong> </a> <em class="ni">。</em></strong></a></p></div></div>    
</body>
</html>