<html>
<head>
<title>Everything You Need to Know About JavaScript Closure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于JavaScript闭包你需要知道的一切</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-closure-explained-f3de8b69ccb1?source=collection_archive---------5-----------------------#2022-04-20">https://javascript.plainenglish.io/javascript-closure-explained-f3de8b69ccb1?source=collection_archive---------5-----------------------#2022-04-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4c06" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">深入探究JavaScript中的闭包概念。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/14f6a15eb97caf252a8370283725d6ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6bUcXnSDHzA6u--LryMhtA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">JavaScript Closure Explained</figcaption></figure><p id="a314" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在本文中，我将介绍与JavaScript闭包相关的所有内容。到本文结束时，您将对闭包有一个很好的理解。</p><h1 id="2573" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">什么是终结？</h1><p id="e008" class="pw-post-body-paragraph ks kt in ku b kv mg jo kx ky mh jr la lb mi ld le lf mj lh li lj mk ll lm ln ig bi translated">对于任何编程语言来说，闭包是一种使函数能够捕获定义它的环境的特性，或者我们可以说闭包是函数和定义该函数的词法环境的组合。</p><p id="595f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="ml">基本上，闭包让你可以从内部函数访问外部函数的范围。</em></p><p id="2e8b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">为了更好地理解它，让我们举一个例子——1:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/631685b9834f757b458f64c0c467dbdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMpVsJ8YvtVz92vsizuYaQ.png"/></div></div></figure><p id="8a21" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在上面的例子中，内部函数可以像msg一样访问外部函数的作用域及其变量。当我们调用外部函数<strong class="ku io"> greet </strong>时，它将返回一个匿名函数，我们可以稍后调用，或者像<strong class="ku io"> greet("Hello ")()。</strong></p><p id="1603" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">实施例2:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/fc33adde6cc12002a4faf73e6591d41f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2t8CeJvt-c5oSmh7qAd1Tw.png"/></div></div></figure><p id="ff9b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在这个例子中，当我们调用外部函数<strong class="ku io"> greet </strong>时，它将返回一个匿名函数，我们可以将它存储在一个变量<strong class="ku io">比如说</strong>中，我们可以在<strong class="ku io">比如说</strong>变量和传递参数RaviS的帮助下调用内部函数。所以它会如期返回<strong class="ku io"> Hello RaviS </strong>。</p><p id="7503" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io">我们来理解一下给定代码的执行:</strong></p><p id="b086" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当代码开始执行时，我们有我们的全局执行上下文，其中我们有两个执行上下文<strong class="ku io"> greet() </strong>和<strong class="ku io"> anonymous() </strong>函数。</p><p id="35de" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="ml">执行上下文是JavaScript代码执行的环境。对于每个函数调用，都会创建一个单独的执行上下文，并将其推入执行堆栈。一旦函数执行完成，它将从堆栈中弹出。</em></p><p id="672e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">每个执行上下文在内存中都有一个存储变量和函数的空间，一旦函数从执行堆栈中弹出，JavaScript垃圾收集器就会清除所有这些东西。</p><p id="b5d7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当我们击中:</p><pre class="kd ke kf kg gt mo mp mq mr aw ms bi"><span id="a71f" class="mt lp in mp b gy mu mv l mw mx">let say = greet('Hello');</span></pre><p id="3fff" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">它调用<strong class="ku io"> greet </strong>函数，创建一个greet执行上下文，传递给它的<strong class="ku io"> msg </strong>变量存储在其变量环境中，并返回一个新的匿名函数。在return语句之后，greet执行上下文从执行堆栈中弹出。</p><p id="7235" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io">但是，</strong></p><p id="679e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io">一个问题</strong>:曾经greet()函数从堆栈弹出的<strong class="ku io"> msg </strong>怎么了？</p><p id="eb07" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io">回答</strong> : <em class="ml">在JavaScript中，任何东西只有在没有对它的引用时才会被垃圾收集。</em></p><p id="8fd5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">然而，当垃圾收集器看到我们的<strong class="ku io"> msg </strong>变量时，它说:“哦！这里有一个闭包，我不能清理它，因为有东西在引用msg，”然后，JavaScript引擎把它放在特殊的闭包框中！</p><p id="ddeb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在上面的例子中，匿名执行上下文仍然有一个对其外部环境的内存空间的变量的引用。即使greet()已经完成。(它可以访问<strong class="ku io">消息</strong>变量并在console.log( <strong class="ku io">消息</strong>，name)内部使用)。</p><h1 id="112a" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">闭包是什么时候创建的？</h1><p id="499b" class="pw-post-body-paragraph ks kt in ku b kv mg jo kx ky mh jr la lb mi ld le lf mj lh li lj mk ll lm ln ig bi translated">要记住的一件重要的事情是，你不是在制造任何结束。当你说，我创建了一个闭包，那么这是错误的，JavaScript引擎为你创建了闭包，你只是在利用它。</p><p id="f75a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">所以，在JavaScript中，<strong class="ku io">每当在创建函数时创建一个函数，或者在另一个函数中定义一个函数时，就会创建闭包。</strong></p><h1 id="9215" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated"><strong class="ak">闭包的用例</strong></h1><ol class=""><li id="97b4" class="my mz in ku b kv mg ky mh lb na lf nb lj nc ln nd ne nf ng bi translated">如果你用过或听说过诸如映射、过滤、减少之类的功能，它们都使用闭包来使事情成为可能。</li><li id="9e2d" class="my mz in ku b kv nh ky ni lb nj lf nk lj nl ln nd ne nf ng bi translated">正是因为闭包，我们可以做高阶函数的事情，如currying、memoization、pipe、compose等。</li><li id="5af7" class="my mz in ku b kv nh ky ni lb nj lf nk lj nl ln nd ne nf ng bi translated">在JavaScript中，闭包是用于实现数据隐私的主要机制。当您使用闭包来保护数据隐私时，包含的变量只在包含函数的范围内。</li></ol><h1 id="9750" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">基于闭包的问题</h1><p id="97d5" class="pw-post-body-paragraph ks kt in ku b kv mg jo kx ky mh jr la lb mi ld le lf mj lh li lj mk ll lm ln ig bi translated">您可以访问这篇文章了解与闭包相关的问题。我已经分享了许多解决方案的例子。</p><div class="nm nn gp gr no np"><a href="https://blog.bitsrc.io/collection-of-closure-problems-in-javascript-fcd38ac1c765" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd io gy z fp nu fr fs nv fu fw im bi translated">JavaScript中常见的闭包问题</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">在这篇文章中，我分享了一些基于JavaScript闭包的最常见和最复杂的问题。</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">blog.bitsrc.io</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od km np"/></div></div></a></div><p id="9a7a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">希望你喜欢这篇文章。关注我即将发布的文章。</p><p id="c604" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">快乐学习！</p><p id="d342" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="ml">更多内容看</em> <a class="ae oe" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="ml">说白了。报名参加我们的</em> <a class="ae oe" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="ml">免费周报</em> </strong> </a> <em class="ml">。关注我们关于</em><a class="ae oe" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="ml">Twitter</em></strong></a><em class="ml">和</em><a class="ae oe" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="ml">LinkedIn</em></strong></a><em class="ml">。加入我们的</em> <a class="ae oe" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="ml">社区不和谐</em> </strong> </a> <em class="ml">。</em></strong></a></p></div></div>    
</body>
</html>