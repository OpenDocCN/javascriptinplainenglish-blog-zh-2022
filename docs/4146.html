<html>
<head>
<title>Which Loop Traversal Is the Fastest in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中哪个循环遍历最快？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/which-loop-traversal-is-the-fastest-in-javascript-c196311337d6?source=collection_archive---------3-----------------------#2022-10-31">https://javascript.plainenglish.io/which-loop-traversal-is-the-fastest-in-javascript-c196311337d6?source=collection_archive---------3-----------------------#2022-10-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="190d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript数组遍历方法的比较</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/344a35f964dd6cfb23a326c413a109f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F4P7fHCcyHWjtMoGb8onRw.png"/></div></div></figure><h1 id="67ae" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">介绍</h1><p id="9078" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">到目前为止，JavaScript已经开发了多种数组循环遍历方法。在这些场景中使用不同的循环方法。今天他们将被比较。</p><h1 id="02fe" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">for语句</h1><p id="5231" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">代码:</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="3aed" class="mh kp in md b gy mi mj l mk ml">var arr = [1,2,4,6]<br/>for(var i = 0, len = arr.length; i &lt; len; i++){<br/> console.log(arr[i])<br/>}</span></pre><p id="e99f" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">这是循环的标准，也是最传统的说法。也支持字符串。定义一个变量<code class="fe mr ms mt md b">i</code>作为索引来跟踪访问的位置。<code class="fe mr ms mt md b">len</code>是数组的长度，条件是<code class="fe mr ms mt md b">i</code>不能超过<code class="fe mr ms mt md b">len</code>。</p><h1 id="49a5" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">forEach语句</h1><p id="2f2b" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated"><code class="fe mr ms mt md b">forEach</code>为数组的每个元素执行一次回调函数。<code class="fe mr ms mt md b">forEach</code>是一个数组方法，可以用来对数组中的每个元素应用一个函数。<code class="fe mr ms mt md b">forEach</code>仅对数组执行每个数组元素的回调函数。遍历数组，让数组中的每个元素做一件事。已删除的项目(使用删除方法等。)或未初始化的会被跳过(但不包括那些值未定义的)(比如上面稀疏数组中)；与map()或reduce()不同，它总是返回undefined，并且不能被链接。一个典型的用例是在一个链的末端执行副作用。</p><p id="5116" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">代码:</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="53a1" class="mh kp in md b gy mi mj l mk ml">var arr = [1,5,8,9]<br/>arr.forEach(function(item) {<br/> console.log(item);<br/>})</span></pre><h1 id="831f" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">for-in语句</h1><p id="d975" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">一般用<code class="fe mr ms mt md b">for-in</code>来遍历对象的属性，但是属性需要可枚举才可以读取。</p><p id="b7b2" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated"><code class="fe mr ms mt md b">for-in </code>循环只遍历可枚举的属性。一般用来遍历对象，包括非整数类型的名字，原型链上继承的属性也可以遍历。</p><p id="0fbf" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">代码:</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="ecea" class="mh kp in md b gy mi mj l mk ml">var obj = {<br/> name: ‘test’,<br/> color: ‘red’,<br/> day: ‘sunday’,<br/> number: 5<br/>}<br/>for (var key in obj) {<br/> console.log(obj[key])<br/>}</span></pre><h1 id="380a" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">for-of语句(ES 6)</h1><p id="657d" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated"><code class="fe mr ms mt md b">for-of</code>在可迭代对象(包括数组、映射、集合、字符串、类型数组、参数对象等)上创建迭代循环。)，调用自定义迭代挂钩，并针对每个不同属性的值执行该语句。只要是可迭代对象，就可以用<code class="fe mr ms mt md b">for-of</code>迭代。</p><h2 id="112a" class="mh kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated">代码:</h2><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="21f1" class="mh kp in md b gy mi mj l mk ml">var arr = [{name:’bb’},5,’test’]<br/>for (item of arr) {<br/> console.log(item)<br/>}</span></pre><h1 id="2767" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">for-of和for-in的区别</h1><p id="6f3a" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated"><code class="fe mr ms mt md b">for-in</code>按照原始插入顺序遍历对象的可枚举属性。<code class="fe mr ms mt md b">for-in</code>将遍历继承链的对象属性，因此将花费更多时间。</p><p id="344e" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated"><code class="fe mr ms mt md b">for-</code>只是迭代iterable对象的数据。</p><h1 id="719e" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">比较遍历速度</h1><p id="c846" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">我用了<code class="fe mr ms mt md b">jsPerf</code>来对比。</p><p id="b99a" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">我创建了两个数组进行比较，不同类型的数组在javascript内存中存储的地址格式不同，编辑器在遍历时会根据数组元素的类型和长度进行计算，比如数组全是数字，会比包含数字、字符串、对象混合类型的数组快，所以创建了两个数组，一个是全未定义数组，一个是混合类型数组。</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="8582" class="mh kp in md b gy mi mj l mk ml">// an empty array<br/>var nullarr = new Array(10000) // [undefined,undefined,…undefined]</span><span id="084b" class="mh kp in md b gy nf mj l mk ml">// different type in array<br/>var dataarr = []<br/>for(var i = 0; i &lt; 10000; i++){<br/> if (i % 2 ===0) {<br/> dataarr[i] = i.toString()<br/> } else {<br/> dataarr[i = i<br/> }<br/>}<br/>dataarr // [1,’2',3…,10000]</span></pre><p id="c5f0" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">测试后发现有点奇怪，直接检索空数组还是比数据数组慢。这有什么奇怪的？为了比较循环的一致性，我只选择有数据的数组<code class="fe mr ms mt md b">dataarr</code>进行测试。</p><p id="2648" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">然后我们比较一下<code class="fe mr ms mt md b">for</code> <code class="fe mr ms mt md b">for len</code> <code class="fe mr ms mt md b">forEach</code> <code class="fe mr ms mt md b">for-in</code> <code class="fe mr ms mt md b">for-of</code>的速度</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/762c37abb29229f866cf752d602a7aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yePTDKq0f8a6gvloPy2-xA@2x.png"/></div></div></figure><p id="7431" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">可以看出<code class="fe mr ms mt md b">for</code>循环的速度最快，是最老的循环，也是优化最好的，其次是<code class="fe mr ms mt md b">for-of</code>，这是es6中的新循环。非常好用，最慢的是for-in。我们可以按速度排序</p><p id="f3e9" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated"><code class="fe mr ms mt md b">for</code>&gt;<code class="fe mr ms mt md b"> for-of</code>&gt;<code class="fe mr ms mt md b">forEach</code>&gt;<code class="fe mr ms mt md b">filter</code>&gt;<code class="fe mr ms mt md b">for-in</code></p><p id="6ba0" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated">这显然是处理大量循环数据时使用古<code class="fe mr ms mt md b">for</code>循环的最佳效率，但并不是说不使用<code class="fe mr ms mt md b">for-in</code>。其实很多情况下，根据实际场景，<code class="fe mr ms mt md b">for-in</code>更多的是用于遍历对象属性，<code class="fe mr ms mt md b">for-in</code>在遍历过程中也会遍历继承链，所以这也是它比较慢的原因，比如map在性能上比较慢，但是处理在ES6中非常容易使用实现数组功能，很容易影射新数组的创建。或者比如用迭代器属性也可以，这样每个循环都有用武之地。</p><h1 id="036c" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">最后</h1><p id="ac2c" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated"><strong class="li io">感谢阅读。</strong>期待<strong class="li io"> </strong>期待您的关注和阅读更多高质量的文章。</p><div class="nh ni gp gr nj nk"><a href="https://levelup.gitconnected.com/the-story-of-clip-path-and-endangered-animals-in-css-8af987927fc6" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">CSS中剪辑路径和濒危动物的故事</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">使用CSS剪辑路径创建奇妙的动画</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny km nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/regexp-is-hard-to-write-easy-to-use-2cd94236e48d"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">正则表达式很难写，很容易使用</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">10个有用的正则表达式。</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny km nk"/></div></div></a></div><p id="eba1" class="pw-post-body-paragraph lg lh in li b lj mm jo ll lm mn jr lo lp mo lr ls lt mp lv lw lx mq lz ma mb ig bi translated"><em class="oa">更多内容请看</em><a class="ae ob" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="li io"><em class="oa">plain English . io</em></strong></a><em class="oa">。报名参加我们的</em> <a class="ae ob" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="oa">免费周报</em> </strong> </a> <em class="oa">。关注我们关于</em><a class="ae ob" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="li io"><em class="oa">Twitter</em></strong></a><em class="oa">和</em><a class="ae ob" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="li io"><em class="oa">LinkedIn</em></strong></a><em class="oa">。查看我们的</em> <a class="ae ob" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="oa">社区不和谐</em> </strong> </a> <em class="oa">加入我们的</em> <a class="ae ob" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="oa">人才集体</em> </strong> </a> <em class="oa">。</em></p></div></div>    
</body>
</html>