<html>
<head>
<title>HeadlessUI: Popover</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HeadlessUI: Popover</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/headlessui-popover-part-3-closing-popover-manually-b1a2658a20cc?source=collection_archive---------0-----------------------#2022-10-09">https://javascript.plainenglish.io/headlessui-popover-part-3-closing-popover-manually-b1a2658a20cc?source=collection_archive---------0-----------------------#2022-10-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="975b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第3部分:手动关闭弹出窗口</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0d184808fc618c610ad5008ac1a3d456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kjbBKwEsAbCrniMj"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ricaros?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Danial Igdery</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="71c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一部分，我们将向您展示如何为弹出面板创建一个自定义按钮。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="a9ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，在components文件夹下，创建MyLink.js</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="83de" class="lz ma iq lv b gy mb mc l md me">import React from 'react'</span><span id="877a" class="lz ma iq lv b gy mf mc l md me">const MyLink = React.forwardRef(({ onClick, href }, ref) =&gt; {</span><span id="5df2" class="lz ma iq lv b gy mf mc l md me">return (</span><span id="d65c" class="lz ma iq lv b gy mf mc l md me">&lt;a href={href} onClick={onClick} ref={ref}&gt;&lt;div className="bg-red-500 hover:bg-green-500"&gt;My Link&lt;/div&gt; &lt;/a&gt;</span><span id="c584" class="lz ma iq lv b gy mf mc l md me">)</span><span id="d09f" class="lz ma iq lv b gy mf mc l md me">})</span><span id="fd3b" class="lz ma iq lv b gy mf mc l md me">export default MyLink</span></pre><p id="7460" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在pages文件夹下，创建insights.js</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="5997" class="lz ma iq lv b gy mb mc l md me">import React from 'react'</span><span id="74fe" class="lz ma iq lv b gy mf mc l md me">const insights = () =&gt; {</span><span id="0717" class="lz ma iq lv b gy mf mc l md me">return (</span><span id="e738" class="lz ma iq lv b gy mf mc l md me">&lt;div&gt;insights&lt;/div&gt;</span><span id="2c1b" class="lz ma iq lv b gy mf mc l md me">)</span><span id="8b1d" class="lz ma iq lv b gy mf mc l md me">}</span><span id="d262" class="lz ma iq lv b gy mf mc l md me">export default insights</span></pre><p id="85a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<popover.panel>下，添加<popover.button/></popover.panel></p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="6ca5" class="lz ma iq lv b gy mb mc l md me">&lt;Popover.Panel className="absolute z-10 mt-3"&gt;</span><span id="3ec5" class="lz ma iq lv b gy mf mc l md me">&lt;div className="overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5"&gt;</span><span id="d498" class="lz ma iq lv b gy mf mc l md me">&lt;div className="relative grid gap-8 bg-white p-7 "&gt;</span><span id="f73d" class="lz ma iq lv b gy mf mc l md me">&lt;Popover.Button as={MyLink} href="/insights"&gt;</span><span id="b974" class="lz ma iq lv b gy mf mc l md me">Insights</span><span id="70ae" class="lz ma iq lv b gy mf mc l md me">&lt;/Popover.Button&gt;</span><span id="5fe1" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/analytics"&gt;Analytics&lt;/a&gt;</span><span id="a93b" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/engagement"&gt;Engagement&lt;/a&gt;</span><span id="6215" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/security"&gt;Security&lt;/a&gt;</span><span id="7174" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/integrations"&gt;Integrations&lt;/a&gt;</span><span id="8128" class="lz ma iq lv b gy mf mc l md me">&lt;/div&gt;</span><span id="278c" class="lz ma iq lv b gy mf mc l md me">&lt;/div&gt;</span><span id="158f" class="lz ma iq lv b gy mf mc l md me">&lt;/Popover.Panel&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/973ce65b51ff07ed9a26a30d335016cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/1*xMyYUPZ1iU3A5D-Bj9zfSg.gif"/></div></figure><h2 id="a9be" class="lz ma iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">强制关闭面板</h2><p id="356d" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我们可以通过暴露<code class="fe nd ne nf lv b">close()</code>渲染道具来强制关闭面板。创建状态<code class="fe nd ne nf lv b">todos</code>，我们将使用jsonplaceholder获取todos。</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="e44b" class="lz ma iq lv b gy mb mc l md me">const MyPopover = () =&gt; {</span><span id="878f" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">const [todos, setTodos] = useState([])</strong></span><span id="5bc9" class="lz ma iq lv b gy mf mc l md me">return (</span><span id="577b" class="lz ma iq lv b gy mf mc l md me">&lt;div className="fixed top-16 w-full max-w-sm px-4"&gt;</span><span id="5e95" class="lz ma iq lv b gy mf mc l md me">&lt;Popover className="relative"&gt;</span><span id="a00c" class="lz ma iq lv b gy mf mc l md me">{({ open, close }) =&gt; (</span><span id="c7e2" class="lz ma iq lv b gy mf mc l md me">&lt;&gt;</span><span id="4c34" class="lz ma iq lv b gy mf mc l md me">&lt;Popover.Button</span><span id="538f" class="lz ma iq lv b gy mf mc l md me">className="group inline-flex items-center rounded-md bg-orange-700 px-3 py-2 text-base font-medium text-white hover:text-opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"</span><span id="2332" class="lz ma iq lv b gy mf mc l md me">&gt;</span><span id="cc53" class="lz ma iq lv b gy mf mc l md me">&lt;span&gt;Solutions&lt;/span&gt;</span><span id="41cf" class="lz ma iq lv b gy mf mc l md me">&lt;ChevronRightIcon</span><span id="9617" class="lz ma iq lv b gy mf mc l md me">className={`${open ? 'rotate-90 transform' : ''}</span><span id="3ab9" class="lz ma iq lv b gy mf mc l md me">ml-2 h-5 w-5 text-orange-300 transition duration-150 ease-in-out group-hover:text-opacity-80</span><span id="5d6f" class="lz ma iq lv b gy mf mc l md me">`}</span><span id="41d3" class="lz ma iq lv b gy mf mc l md me">/&gt;</span><span id="5d10" class="lz ma iq lv b gy mf mc l md me">&lt;/Popover.Button&gt;</span><span id="872f" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">&lt;button</strong></span><span id="4d9d" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">onClick={async () =&gt; {</strong></span><span id="92bc" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">const data = await fetch('https://jsonplaceholder.typicode.com/todos')</strong></span><span id="7dca" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">const todos = await data.json()</strong></span><span id="009d" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">setTodos(todos)</strong></span><span id="9b61" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">close()</strong></span><span id="70f8" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">}}</strong></span><span id="8069" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">&gt;</strong></span><span id="f02f" class="lz ma iq lv b gy mf mc l md me">Read and accept</span><span id="2f3d" class="lz ma iq lv b gy mf mc l md me">&lt;/button&gt;</span><span id="3369" class="lz ma iq lv b gy mf mc l md me">&lt;Popover.Panel className="absolute z-10 mt-3"&gt;</span><span id="5bc8" class="lz ma iq lv b gy mf mc l md me">&lt;div className="overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5"&gt;</span><span id="db56" class="lz ma iq lv b gy mf mc l md me">&lt;div className="relative grid gap-8 bg-white p-7 "&gt;</span><span id="87bc" class="lz ma iq lv b gy mf mc l md me">&lt;Popover.Button as={MyLink} href="/insights"&gt;</span><span id="65b0" class="lz ma iq lv b gy mf mc l md me">Insights</span><span id="6b07" class="lz ma iq lv b gy mf mc l md me">&lt;/Popover.Button&gt;</span><span id="cc4c" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/analytics"&gt;Analytics&lt;/a&gt;</span><span id="fb2c" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/engagement"&gt;Engagement&lt;/a&gt;</span><span id="6c0b" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/security"&gt;Security&lt;/a&gt;</span><span id="d771" class="lz ma iq lv b gy mf mc l md me">&lt;a href="/integrations"&gt;Integrations&lt;/a&gt;</span><span id="2c16" class="lz ma iq lv b gy mf mc l md me">&lt;/div&gt;</span><span id="fb06" class="lz ma iq lv b gy mf mc l md me">&lt;/div&gt;</span><span id="7311" class="lz ma iq lv b gy mf mc l md me">&lt;/Popover.Panel&gt;</span><span id="c589" class="lz ma iq lv b gy mf mc l md me">&lt;/&gt;</span><span id="4682" class="lz ma iq lv b gy mf mc l md me">)}</span><span id="4d96" class="lz ma iq lv b gy mf mc l md me">&lt;/Popover&gt;</span><span id="dc6c" class="lz ma iq lv b gy mf mc l md me"><strong class="lv ir">{todos.length&gt;0 &amp;&amp; todos.map(todo=&gt;&lt;li key={todo.id}&gt;{todo.title}&lt;/li&gt;)}</strong></span><span id="6a33" class="lz ma iq lv b gy mf mc l md me">&lt;/div&gt;</span><span id="373c" class="lz ma iq lv b gy mf mc l md me">)</span><span id="b2d7" class="lz ma iq lv b gy mf mc l md me">}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/1c9bf20a7d42ca24cd147aeafd4859cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tj0CxZoGixJIi0Atrlo4_Q.png"/></div></div></figure><p id="e5d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它将获取数据并关闭面板，todos显示在解决方案按钮下方。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="6807" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这个故事，你可能也喜欢中等会员。一个月才5美元(一杯咖啡的价格！)但是它会在支持你最喜欢的作家的同时，给你无限的接触故事的机会。如果你注册使用<a class="ae kv" href="https://ckmobile.medium.com/membership" rel="noopener">这个链接</a>，我会赚一小笔佣金。谢谢！</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="96c9" class="no ma iq bd mh np nq nr mk ns nt nu mn jw nv jx mq jz nw ka mt kc nx kd mw ny bi translated">关注我们:<a class="ae kv" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae kv" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae kv" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae kv" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae kv" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae kv" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae kv" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad </a>，<a class="ae kv" href="https://ckmobile.quora.com/" rel="noopener ugc nofollow" target="_blank"> Quora </a>，<a class="ae kv" href="https://t.me/ckmobi" rel="noopener ugc nofollow" target="_blank"> Telegram </a></h1><p id="5be6" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><em class="nz">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nz">plain English . io</em></strong></a><em class="nz">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nz">免费周报</em> </strong> </a> <em class="nz">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nz">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nz">LinkedIn</em></strong></a><strong class="ky ir"><em class="nz"/></strong><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nz">YouTube</em></strong></a><strong class="ky ir"><em class="nz">，以及</em></strong><em class="nz"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nz">不和</em> </strong> </a>  <em class="nz">对成长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nz">电路</em> </strong> </a> <strong class="ky ir"> <em class="nz">。</em> </strong></p></div></div>    
</body>
</html>