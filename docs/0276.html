<html>
<head>
<title>Write Better Code with these 5 JavaScript Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用这5个JavaScript特性编写更好的代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/write-better-code-with-these-5-javascript-features-cf405b25a78e?source=collection_archive---------6-----------------------#2022-01-17">https://javascript.plainenglish.io/write-better-code-with-these-5-javascript-features-cf405b25a78e?source=collection_archive---------6-----------------------#2022-01-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3e83" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在运算符、三元和可选链接中使用零化合并</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e27da529bf488b97938b9a99c3b0ccb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1CTCp_vIb0vq8gXxdw945Q.jpeg"/></div></div></figure><p id="184e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">JavaScript是有史以来最流行的计算机语言之一，原因之一是JavaScript的语法非常直观。这还不是最好的部分，最好的部分是大量的新特性被定期添加到语言中。</p><p id="2dc9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">今天，我们将看到一些新特性帮助我们编写更直观的代码。</p><h1 id="460f" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">零化合并算子(？？)</h1><p id="7f8c" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">零化合并算子(？？)是逻辑运算符，当其左侧操作数为<code class="fe mh mi mj mk b">null</code>或<code class="fe mh mi mj mk b">undefined</code>时，返回其右侧操作数，否则返回其左侧操作数。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="9346" class="mp ll in mk b gy mq mr l ms mt">false || '@sun_anshuman' // returns '@sun_anshuman'<br/><br/>false ?? '@sun_anshuman' // returns false<br/><br/>0 || '@sun_anshuman' // returns '@sun_anshuman'<br/><br/>null || '@sun_anshuman' // returns '@sun_anshuman'<br/><br/>null ?? '@sun_anshuman' // returns '@sun_anshuman'<br/><br/>undefined ?? '@sun_anshuman' // returns '@sun_anshuman'</span></pre><p id="5883" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe mh mi mj mk b">||</code>的问题在于它是一个布尔运算符，所以在求值之前，它会将左边的操作数强制转换为布尔，从而使0和“”都成为<code class="fe mh mi mj mk b">false</code>。</p><h1 id="c888" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">用例示例</h1><p id="e746" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">让我们假设你正在构建一个最低分数为0的游戏，你认为-1是一个无效分数。</p><p id="560c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，在您更新用户的分数之前，您需要确保它被设置为有效值或定义的无效分数。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="734c" class="mp ll in mk b gy mq mr l ms mt">// the server returns 0<br/>let score = fetchScoreFromServer(); <br/><br/>// we only want the score to be -1 only if the score<br/>// is undefined or null because 0 is a valid value<br/><br/>const finalScore = score || -1; <br/>// but this will give us the invalid value even if,<br/>// the first operand (0) is a valid value, leading to a bug</span></pre><p id="2515" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你问，这怎么解决？<em class="mu">(我知道你现在已经知道了，哈哈)</em></p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="62aa" class="mp ll in mk b gy mq mr l ms mt">let score = fetchScoreFromServer(); // returns 0 again<br/><br/>const finalScore = score ?? -1;<br/>// finalScore stays score (0 in this case), <br/>// unless the server returned null or undefined</span></pre><h1 id="7532" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">逻辑零赋值(？？=)</h1><p id="abab" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">逻辑零赋值(x？？= y)运算符仅在x为空时赋值(<code class="fe mh mi mj mk b">null</code>或<code class="fe mh mi mj mk b">undefined</code>)。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="4208" class="mp ll in mk b gy mq mr l ms mt">let user = { name: "anshuman_bhardwaj" };<br/>user.twitter_name ??= "@sun_anshuman"; // assigns '@sun_anshuman'<br/>console.log(user); // {name: "anshuman_bhardwaj", twitter_name: "@sun_anshuman"}</span></pre><p id="2275" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这基本上是一个基于<code class="fe mh mi mj mk b">??</code>操作符的赋值操作。</p><h1 id="548a" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">用例示例</h1><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="d8fc" class="mp ll in mk b gy mq mr l ms mt">// the above example can be rewritten like this<br/>let finalScore = fetchScoreFromServer(); // returns 0 again<br/><br/>finalScore ??= -1;<br/>// keeps value of 0</span></pre><p id="9c19" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">另一个使用<code class="fe mh mi mj mk b">??</code>的好地方是引用对象属性和使用默认值。在这种情况下，我们可以使用逻辑空赋值<code class="fe mh mi mj mk b">??=</code>为<code class="fe mh mi mj mk b">undefined</code>属性赋予默认值。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="3d93" class="mp ll in mk b gy mq mr l ms mt">const user = { email: 'anshuman_bhardwaj@dev.to', company: '' }<br/><br/>// assign user.name to email username if it's undefined<br/>user.name ??= email.split("@")[0]<br/><br/>// make company Canoo if company not available on user<br/>user.company ??= 'Canoo'<br/>// this time company stays empty string</span></pre><h1 id="a076" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">in运算符</h1><p id="bcb2" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">如果指定的属性位于指定的对象或其原型链中，则in运算符返回true。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="71c8" class="mp ll in mk b gy mq mr l ms mt">const user = { email: 'anshuman@gmail.com' } <br/><br/>'email' in user // return true<br/><br/>'name' in user // return false</span></pre><p id="5e56" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您还记得使用<code class="fe mh mi mj mk b">undefined</code>值的时候，因为引用的键在Object中丢失了。</p><p id="47e8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">值得注意的是，</p><blockquote class="mv mw mx"><p id="ba41" class="ko kp mu kq b kr ks jo kt ku kv jr kw my ky kz la mz lc ld le na lg lh li lj ig bi translated"><em class="in">如果您将一个属性设置为未定义，但没有删除它，则in运算符将为该属性返回true。</em></p></blockquote><h1 id="35b8" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">用例示例</h1><p id="9ec6" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">一个很好的用例是在对对象的属性运行操作之前运行健全性检查，以避免进行未定义的检查和错误。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="6f22" class="mp ll in mk b gy mq mr l ms mt">// we have an user object<br/>let user = { email: "anshuman_bhardwaj@dev.to" };<br/><br/>// now we want to assign it a name if its not available<br/><br/>// checks if user has email<br/>if ("email" in user) {<br/>  // checks if user has name<br/>  if (!("name" in user)) {<br/>    user["name"] = user.email.split("@")[0];<br/>  } else {<br/>   console.log("Welcome user: " + user.name);<br/>  }<br/>} else {<br/>  console.error("User does not have required property: email");<br/>}</span></pre><p id="2bea" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在数组上使用in检查给定的索引是否为空槽</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="8d27" class="mp ll in mk b gy mq mr l ms mt">const emptyList = new Array(5)<br/><br/>empties[2]    // returns undefined<br/>2 in empties  // returns false<br/><br/>empties[2] = 'anshuman_bhardwaj'<br/>2 in empties  // returns true</span></pre><h1 id="f501" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">可选链接(？。)</h1><p id="e0e4" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated"><code class="fe mh mi mj mk b">?.</code>操作符类似于。链接运算符，不同之处在于，如果引用为(null或undefined ),表达式将短路，返回值为undefined，而不是导致错误。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="df98" class="mp ll in mk b gy mq mr l ms mt">let user = { name: 'anshuman' }<br/><br/>user.address.zipcode // TypeError<br/><br/>user.addess?.zipcode // returns undefined</span></pre><p id="86f4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">值得注意的是，</p><ol class=""><li id="bf15" class="nb nc in kq b kr ks ku kv kx nd lb ne lf nf lj ng nh ni nj bi translated">当用于函数调用时，如果给定的函数不存在，则返回undefined。</li><li id="8039" class="nb nc in kq b kr nk ku nl kx nm lb nn lf no lj ng nh ni nj bi translated">可选链接不能用于未声明的根对象，但可以用于未定义的根对象。</li></ol><h1 id="09bd" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">通过示例使用案例</h1><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="70e4" class="mp ll in mk b gy mq mr l ms mt">// user can be null or an Object containing email<br/>const user = getUserFromDev() <br/><br/>// if we do this it will run fine when user is an Object <br/>// but when user is null this will give a TypeError<br/>console.log(user.email)<br/><br/>// we can fix this by using optional chaining<br/><br/>console.log(user?.email)<br/>// logs the actual user email when user is an Object<br/>// logs undefined if user is null but doesn't crash</span></pre><h1 id="e11f" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">条件三元运算符(？)</h1><p id="75ef" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">三元运算符检查指定的条件是否为真，如果为真则返回第一个表达式，否则返回第二个表达式。</p><p id="8f4c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe mh mi mj mk b">x ? y : z</code>，表示如果x为真则返回y，否则返回z。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="90f2" class="mp ll in mk b gy mq mr l ms mt">let user = { age: 22 }<br/><br/>user['status'] = user.age &gt; 18 ? 'adult' : 'minor'<br/>// user.status is 'adult'</span></pre><p id="02a0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这个操作符不是JavaScript特有的，我第一次在C++中使用它。</p><h1 id="9516" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">用例示例</h1><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="b3d9" class="mp ll in mk b gy mq mr l ms mt">let user = { email: "anshuman_bhardwaj@dev.to" };<br/><br/>// lets consider this code, simple enough?<br/>if ("email" in user) {<br/>  user["name"] = user.email.split("@")[0];<br/>} else {<br/>  user["name"] = "Anonymous";<br/>}<br/><br/>// we can make it even simpler by using ternary<br/>user["name"] = "email" in user ? user.email.split("@")[0] : "Anonymous";</span></pre><blockquote class="mv mw mx"><p id="b162" class="ko kp mu kq b kr ks jo kt ku kv jr kw my ky kz la mz lc ld le na lg lh li lj ig bi translated"><em class="in">使用三元是个人偏好，它适合做行内表达式，否则一切都可以放在if-else </em></p></blockquote><h1 id="8131" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">奖金</h1><p id="e6fb" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">这里有一些混合搭配上述特征的例子，让我们看看谁能在评论中回答正确。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="cbde" class="mp ll in mk b gy mq mr l ms mt">// consider the examples independent of each other<br/><br/>const user = { email: 'anshuman_b@dev.to', lastName: undefined }<br/><br/>// 1<br/>user["firstName"] = "email" in user <br/>                            ? user.email.split("_")[0] <br/>                            : "Anonymous";<br/><br/>// 2<br/>user["familyName"] ??= 'Bhardwaj'<br/><br/>// 3<br/>console.log('lastName' in user)<br/><br/>// 4 <br/>console.log('' ?? '@sun_anshuman')</span></pre><h1 id="5016" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">了解更多信息</h1><p id="060a" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">你也可以看这个<a class="ae np" href="https://youtu.be/pk50LBGru_Q" rel="noopener ugc nofollow" target="_blank"> YouTube视频</a>，在那里我解释了这些例子。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">Write better JavaScript code</figcaption></figure><p id="81bc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你也可以派生出<a class="ae np" href="https://codesandbox.io/s/operators-by-anshuman-51q7y?file=/src/index.js" rel="noopener ugc nofollow" target="_blank"> CodeSandBox </a>来测试例子。</p></div><div class="ab cl nw nx hr ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ig ih ii ij ik"><p id="6ac9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我希望这篇文章对你有帮助。如果您有任何反馈或问题，请随时在下面的评论中提出。我很想听听他们的想法并为之努力。</p><p id="fbf6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">更多此类内容，请关注我</p><ul class=""><li id="36e6" class="nb nc in kq b kr ks ku kv kx nd lb ne lf nf lj od nh ni nj bi translated"><a class="ae np" href="https://twitter.com/sun_anshuman" rel="noopener ugc nofollow" target="_blank">推特</a></li><li id="e791" class="nb nc in kq b kr nk ku nl kx nm lb nn lf no lj od nh ni nj bi translated"><a class="ae np" href="https://www.youtube.com/AnshumanBhardwaj" rel="noopener ugc nofollow" target="_blank"> YouTube </a></li><li id="cd5f" class="nb nc in kq b kr nk ku nl kx nm lb nn lf no lj od nh ni nj bi translated"><a class="ae np" href="https://anshuman-bhardwaj.medium.com/" rel="noopener">中等</a></li></ul><blockquote class="mv mw mx"><p id="c16c" class="ko kp mu kq b kr ks jo kt ku kv jr kw my ky kz la mz lc ld le na lg lh li lj ig bi translated"><em class="in">直到下一次</em></p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="ab gu cl oe"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure></div><div class="ab cl nw nx hr ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ig ih ii ij ik"><h1 id="0a9d" class="lk ll in bd lm ln of lp lq lr og lt lu jt oh ju lw jw oi jx ly jz oj ka ma mb bi translated">资源</h1><p id="d2ef" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated"><a class="ae np" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></div><div class="ab cl nw nx hr ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ig ih ii ij ik"><p id="7944" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="mu">原载于2022年1月17日</em><a class="ae np" href="https://theanshuman.dev/articles/write-better-code-with-these-5-javascript-features-22km" rel="noopener ugc nofollow" target="_blank"><em class="mu">https://theanshuman . dev</em></a><em class="mu">。</em></p><p id="3203" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="mu">更多内容请看</em><a class="ae np" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mu">plain English . io</em></strong></a><em class="mu">。报名参加我们的</em> <a class="ae np" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mu">免费每周简讯</em> </strong> </a> <em class="mu">。在我们的</em> <a class="ae np" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mu">社区【不和谐】</em> </strong> </a> <em class="mu">获取独家写作机会和建议。</em></p></div></div>    
</body>
</html>