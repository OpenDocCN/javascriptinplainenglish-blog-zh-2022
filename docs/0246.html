<html>
<head>
<title>Get Object Position in a Three.js Scene Dynamically</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动态获取Three.js场景中的对象位置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/get-object-position-in-a-three-js-scene-dynamically-fcc355edfbad?source=collection_archive---------11-----------------------#2022-01-14">https://javascript.plainenglish.io/get-object-position-in-a-three-js-scene-dynamically-fcc355edfbad?source=collection_archive---------11-----------------------#2022-01-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6195" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何在一个Three.js场景中动态获取物体位置的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/af24949cc516f38ef7b59e4227799a31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MwlR-sPqEs7Gc1QohICyA.jpeg"/></div></div></figure><p id="8f31" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我是新来的<a class="ae lk" href="https://threejs.org/" rel="noopener ugc nofollow" target="_blank"> Three.js </a>。</p><p id="6ab6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我有一个场景，其中有一个对象，我们可以使用<a class="ae lk" href="https://github.com/mrdoob/three.js/blob/master/examples/js/controls/TransformControls.js" rel="noopener ugc nofollow" target="_blank"> TransformControls.js </a>在场景的所有X、Y和Z轴上移动。</p><p id="c276" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当我使用鼠标点击并拖动任一轴(即X、Y和Z)在场景内平移/移动对象时。我想获得场景中特定对象的更新后的X、Y和Z位置坐标。</p><p id="676b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在渲染场景之前，我使用<code class="fe ll lm ln lo b">mesh.position.set( 0, 0, 0 );</code>来设置对象的位置，但是我不知道如何在场景中获得对象的动态位置。</p><p id="efc5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，我希望在转换操作后保存更新的位置坐标，并在用户返回页面或进行页面刷新时，使用更新的位置坐标重新呈现对象所在的场景。</p><p id="8746" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">任何指点都会很有帮助。</p><h2 id="e7d2" class="lp lq in bd lr ls lt dn lu lv lw dp lx kx ly lz ma lb mb mc md lf me mf mg mh bi translated"><strong class="ak">解决方案</strong></h2><p id="efe3" class="pw-post-body-paragraph ko kp in kq b kr mi jo kt ku mj jr kw kx mk kz la lb ml ld le lf mm lh li lj ig bi translated"><code class="fe ll lm ln lo b">THREE.TransformControls</code>需要几步才能使用。</p><ol class=""><li id="f023" class="mn mo in kq b kr ks ku kv kx mp lb mq lf mr lj ms mt mu mv bi translated">创造你的三个。TransformControls对象</li><li id="6aad" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated">将其添加到您的场景中</li><li id="8752" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated">将其附加到要操纵的对象上</li></ol><pre class="kd ke kf kg gt nb lo nc nd aw ne bi"><span id="4ded" class="lp lq in lo b gy nf ng l nh ni">var xformControl = new THREE.TransformControls(camera, renderer.domElement);<br/>scene.add(xformControls);<br/>// assuming you add "myObj" to your scene...<br/>xformControl.attach(myObj);<br/>// and then later...<br/>xformControl.detatch();</span></pre><p id="69a4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">将控件附加到对象会将操纵“gizmo”插入到场景中。拖动gizmo的各个部分将执行不同类型的变换。当你用小控件变换完零件后，检查<code class="fe ll lm ln lo b">mesh.position</code>应该会反映出新的位置。</p><h2 id="6d5f" class="lp lq in bd lr ls lt dn lu lv lw dp lx kx ly lz ma lb mb mc md lf me mf mg mh bi translated"><strong class="ak">为清晰起见，附加信息:</strong></h2><p id="fdc0" class="pw-post-body-paragraph ko kp in kq b kr mi jo kt ku mj jr kw kx mk kz la lb ml ld le lf mm lh li lj ig bi translated">对象的位置将不会更新，直到您使用“gizmo”来移动它。举个例子，</p><ol class=""><li id="e6b2" class="mn mo in kq b kr ks ku kv kx mp lb mq lf mr lj ms mt mu mv bi translated">您的对象位于场景中的(10，10，10)</li><li id="826a" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated"><code class="fe ll lm ln lo b">xformControl.attach(yourObject)</code></li><li id="b6cb" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated">“gizmo”在(10，10，10)处创建</li><li id="68d2" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated">你的对象保持在(10，10，10)</li><li id="a70e" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated">使用“gizmo”在+Y方向平移对象</li><li id="fea0" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated">您的对象现在将有一个更新的位置</li><li id="f86d" class="mn mo in kq b kr mw ku mx kx my lb mz lf na lj ms mt mu mv bi translated"><code class="fe ll lm ln lo b">console.log(yourObject.position.y &gt; 10); // true</code></li></ol><p id="fed5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在你知道了。感谢您的阅读。</p><p id="4fc8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nj">更多内容请看</em><a class="ae lk" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nj">plain English . io</em></strong></a><em class="nj">。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nj">免费周报</em> </strong> </a> <em class="nj">。在我们的</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nj">社区</em> </strong> </a> <em class="nj">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>