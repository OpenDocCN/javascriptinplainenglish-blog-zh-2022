<html>
<head>
<title>How to ‘Git’ Good at Rebasing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何“变得”善于改变基础</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-git-good-at-rebasing-42cba815ded5?source=collection_archive---------13-----------------------#2022-05-16">https://javascript.plainenglish.io/how-to-git-good-at-rebasing-42cba815ded5?source=collection_archive---------13-----------------------#2022-05-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="628e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用这些Git脚本，每天节省几个小时</h2></div><p id="1fc6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Git同时是每个开发人员最好的朋友和最坏的敌人。令人惊讶的是，当我们每天都在使用Git时，却有如此多的开发人员在为它而苦恼。Git不容易掌握；因此，这就是为什么像<a class="ae ky" href="https://desktop.github.com/" rel="noopener ugc nofollow" target="_blank"> Github Desktop </a>、<a class="ae ky" href="https://www.gitkraken.com/lp/e1?utm_feeditemid=&amp;utm_device=c&amp;utm_term=best%20git%20tools&amp;utm_campaign=GK+Git+GUI+-+Search+(US)&amp;utm_source=google&amp;utm_medium=ppc&amp;hsa_acc=1130375851&amp;hsa_cam=16449602314&amp;hsa_grp=136834049231&amp;hsa_ad=585374020000&amp;hsa_src=g&amp;hsa_tgt=kwd-156967579504&amp;hsa_kw=best%20git%20tools&amp;hsa_mt=e&amp;hsa_net=adwords&amp;hsa_ver=3" rel="noopener ugc nofollow" target="_blank"> GitKraken </a>和其他产品有助于可视化源代码管理。但即使这样，我们中的一些人仍然与rebase斗争。在这里，我将向您展示如何在您最喜欢的IDE中轻松地使用Git CLI重新构建基础并解决合并冲突。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/6c32ec120edb17afc1d3b31301978b9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z998tVsWLotuIRFn"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yancy Min</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="46ea" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">什么是rebase？</h1><p id="eb00" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">我相信你已经了解了什么是rebase以及rebase和merge之间的区别。我没有复杂的图给你看(因为我觉得没必要)。所以你需要知道的是:</p><p id="572a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">rebase和merge命令都是一种将您的工作和其他人的工作(或您另一个时代的工作)结合起来的方法。不同之处在于，当您将您的特性分支与一个“开发”或者“主”分支合并时，您是将来自共享分支的所有变更合并到您的特性分支中。虽然rebase会将您的工作放在一边，用共享分支中的最新变更来更新您的分支，然后将您的工作添加回来，但是如果在相同的文件中有变更，两者都会引入冲突。这是大多数人感到困惑的地方。让我向您展示如何在不破坏代码的情况下有效地解决合并冲突。<strong class="ke io">提示:您不需要保留您工作的副本，也不需要手动将您的更改添加到新的分支😉</strong></p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="bc02" class="lp lq in bd lr ls mt lu lv lw mu ly lz jt mv ju mb jw mw jx md jz mx ka mf mg bi translated">1.设置遥控器</h1><p id="7e51" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">当与多个开发人员一起处理一个项目时。最好是派生存储库，而不是在同一个远程上工作。这是为了防止分支名称冲突和意外地将您的开发代码推入共享分支。我通常将<code class="fe my mz na nb b">origin</code>遥控器作为我的分支，将<code class="fe my mz na nb b">upstream</code>作为共享遥控器。</p><pre class="la lb lc ld gt nc nb nd ne aw nf bi"><span id="7a8d" class="ng lq in nb b gy nh ni l nj nk">git remote add origin [personal_fork_url]<br/>git remote add upstream [shared_remote_url]</span></pre><h1 id="60ec" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">2.配置git合并工具</h1><p id="9d90" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated"><code class="fe my mz na nb b">git mergetool</code>是一个CLI工具，帮助我们解决终端中的合并冲突。当存在冲突时，运行此命令将打开需要在代码编辑器中解决的文件。默认情况下，它使用<code class="fe my mz na nb b">vim</code>，但我们比它更复杂。让我们配置它使用我们最喜欢的IDE，VS代码。</p><p id="0764" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开git配置文件</p><pre class="la lb lc ld gt nc nb nd ne aw nf bi"><span id="0941" class="ng lq in nb b gy nh ni l nj nk">git config --global --edit</span></pre><p id="aead" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">添加VS代码作为合并工具编辑器</p><pre class="la lb lc ld gt nc nb nd ne aw nf bi"><span id="9bde" class="ng lq in nb b gy nh ni l nj nk">[merge]<br/>  tool = vscode<br/>[mergetool "vscode"]<br/>  cmd = code --wait $MERGED</span></pre><h1 id="2263" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">3.Git重新同步</h1><p id="afcb" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">在使用共享分支重新建立基础之前，您应该首先从该分支获得最新的变更。姑且称这个共享分支<code class="fe my mz na nb b">develop</code>。有些人喜欢打电话给<code class="fe my mz na nb b">git pull</code>，但我喜欢打电话给<code class="fe my mz na nb b">git reset</code>以获得最新的变化。通过对上游分支进行重置，我们将放弃所有的本地更改，并更新本地分支，使其具有与上游分支相同的代码。这将有助于我们避免任何潜在的合并冲突，以及在需要时合并代码的额外提交。为此，我编写了下面的<code class="fe my mz na nb b">git resync</code>脚本。该脚本将从<code class="fe my mz na nb b">origin</code>和<code class="fe my mz na nb b">upstream</code>遥控器获取最新的更改，并用<code class="fe my mz na nb b">upstream</code>分支重置您所在的分支。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="582a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们将这个脚本存储在一个公共位置，例如<code class="fe my mz na nb b">~/git-custom-commands</code>。然后，我们需要给这个脚本权限，让它作为bash脚本执行。</p><pre class="la lb lc ld gt nc nb nd ne aw nf bi"><span id="cc48" class="ng lq in nb b gy nh ni l nj nk">cd ~/git-custom-commands<br/>chmod 777 git-resync</span></pre><p id="7842" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了将它作为git命令运行，我们需要将文件夹添加到<code class="fe my mz na nb b">PATH</code>，我们可以通过将这一行添加到您的<code class="fe my mz na nb b">.zshrc</code>或<code class="fe my mz na nb b">.bashrc</code>文件来完成。</p><pre class="la lb lc ld gt nc nb nd ne aw nf bi"><span id="b1ce" class="ng lq in nb b gy nh ni l nj nk">export PATH=$PATH:/Users/[your_username]/Helpers/git-custom-commands</span></pre><p id="91aa" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此时，您应该能够转到git项目并运行<code class="fe my mz na nb b">git resync</code>。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi nn"><img src="../Images/6d619d88af76adeb7fa567fadb7f657d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7nQTykQhApPcQByROrxjaQ.png"/></div></div></figure><h1 id="128b" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">4.把它们放在一起</h1><p id="8161" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">请敲鼓吧…这是我们期待已久的时刻！(Sike！)</p><p id="671c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们开始之前，让我们回顾一下到目前为止我们已经设置的内容:</p><ul class=""><li id="ff5a" class="no np in ke b kf kg ki kj kl nq kp nr kt ns kx nt nu nv nw bi translated">设置git远程起点(个人分叉)和上游(共享分叉)</li><li id="d14d" class="no np in ke b kf nx ki ny kl nz kp oa kt ob kx nt nu nv nw bi translated">配置<code class="fe my mz na nb b">git mergetool</code>使用VS代码作为我们的文本编辑器</li><li id="5370" class="no np in ke b kf nx ki ny kl nz kp oa kt ob kx nt nu nv nw bi translated">设置<code class="fe my mz na nb b">git resync</code>脚本</li></ul><p id="347e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们使用我们的工具。以下是将最新的共享分支(<code class="fe my mz na nb b">develop</code>)重置为特性分支(<code class="fe my mz na nb b">feat/medium</code>)的步骤:</p><ol class=""><li id="ea8c" class="no np in ke b kf kg ki kj kl nq kp nr kt ns kx oc nu nv nw bi translated"><code class="fe my mz na nb b">git checkout develop</code></li><li id="8658" class="no np in ke b kf nx ki ny kl nz kp oa kt ob kx oc nu nv nw bi translated"><code class="fe my mz na nb b">git resync</code></li><li id="2ec5" class="no np in ke b kf nx ki ny kl nz kp oa kt ob kx oc nu nv nw bi translated"><code class="fe my mz na nb b">git checkout feat/medium</code></li><li id="ac24" class="no np in ke b kf nx ki ny kl nz kp oa kt ob kx oc nu nv nw bi translated"><code class="fe my mz na nb b">git rebase develop</code></li><li id="8ee9" class="no np in ke b kf nx ki ny kl nz kp oa kt ob kx oc nu nv nw bi translated">搞定了。(如果没有合并冲突)</li></ol><p id="bb35" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果有合并冲突，那么您将运行<code class="fe my mz na nb b">git mergetool</code>，这将打开VS代码和包含冲突的文件。您将解决VS代码中的冲突，保存并关闭文件。如果有多个文件有冲突，<code class="fe my mz na nb b">git mergetool</code>会一个接一个地打开它们，直到你解决了所有的冲突。</p><h1 id="6054" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">5.推送基于代码</h1><p id="2720" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">一旦您完成了代码的重新基础化，您需要使用<code class="fe my mz na nb b">-f</code>标志将您的代码强制推送到远程分支。</p><pre class="la lb lc ld gt nc nb nd ne aw nf bi"><span id="9ce7" class="ng lq in nb b gy nh ni l nj nk">git push origin feat/medium -f</span></pre><p id="88e0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是因为<code class="fe my mz na nb b">git rebase</code>实际上改变了git历史，因此来自特性分支的提交将位于来自共享分支的新提交之上。这也将按照时间顺序组织您的提交和其他开发人员的变更。</p><h1 id="936e" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="0349" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">我原以为这篇文章只有一半的长度，但是它提醒了我Git实际上有多复杂。我希望上面的技巧可以帮助你克服对Git rebase和Git的恐惧。如果您有任何问题，请随时联系我们！</p><p id="8ab5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不要忘记。去吧。🚀</p><p id="e31c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="od">更多内容尽在</em> <a class="ae ky" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="od">说白了. io </em> </strong> </a> <em class="od">。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="od">免费周报</em> </strong> </a> <em class="od">。关注我们关于</em> <a class="ae ky" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="od">推特</em> </strong> </a> <em class="od">和</em><a class="ae ky" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="od">LinkedIn</em></strong></a><em class="od">。查看我们的</em> <a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="od">社区不和谐</em> </strong> </a> <em class="od">加入我们的</em> <a class="ae ky" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="od">人才集体</em> </strong> </a> <em class="od">。</em></p></div></div>    
</body>
</html>