<html>
<head>
<title>How to Set Up Multiple Environments with Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Webpack设置多个环境</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-multiple-environments-with-webpack-90082c3b28ea?source=collection_archive---------6-----------------------#2022-01-18">https://javascript.plainenglish.io/how-to-set-up-multiple-environments-with-webpack-90082c3b28ea?source=collection_archive---------6-----------------------#2022-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/44ad31cd3b13e034092a2fcdab0ba424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QYh5GbjwtGAvVPIsqQ546A.jpeg"/></div></div></figure><p id="ebde" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用Webpack设置多个环境是每个人都应该利用的一个重要特性。</p><p id="5886" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就Webpack提供的粒度级别而言，很难找到您确切需要的说明。</p><p id="3794" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我将展示如何配置我的环境。我的例子包括实现环境，而不是通常的开发和生产环境。</p><p id="4f50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将给出4个环境的例子:本地、Cypress、开发、生产。我的确认位于webpack.config.js文件中。</p><p id="a8f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我创建一个公共对象，其中包含所有环境使用的任何配置:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="7fb5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，我为我想要支持的每个环境添加了一个新的Webpack配置对象。使用spread运算符，我可以轻松地包含common中的所有值:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="d658" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我可以定制这些对象来支持我所需要的。</p><p id="1679" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我的例子中，本地和cypress环境都运行webpack-dev-server，但是cypress不需要本地的所有配置。类似地，我的开发和生产环境使用不同的index.html文件，这个配置允许我适应它。</p><p id="743c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦我的对象配置好了，我需要在文件的末尾添加一个return语句。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="c46f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是完整的文件示例:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="bed4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后一步是当我从脚本中调用某个命令时设置NODE_ENV:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="d80e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在大多数示例中，NODE_ENV被设置为开发或生产，但是没有什么可以阻止您将其设置为您想要的任何值。</p><p id="bb02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望我的例子能给你一些关于如何设置你自己的Webpack配置的想法。我敢肯定，你甚至可以用我的方法来重构它，使它更加有效。</p><p id="cbd5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lc">更多内容请看</em><a class="ae ld" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="lc">plain English . io</em></strong></a><em class="lc">。报名参加我们的</em> <a class="ae ld" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lc">免费周报</em> </strong> </a> <em class="lc">。在我们的</em> <a class="ae ld" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lc">社区</em> </strong> </a> <em class="lc">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>