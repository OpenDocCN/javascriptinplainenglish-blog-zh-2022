<html>
<head>
<title>How to Convert a JavaScript Object Array to a Hash Map Indexed by a Property Value of the Object?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将JavaScript对象数组转换成对象的属性值索引的哈希映射？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-convert-a-javascript-object-array-to-a-hash-map-indexed-by-a-property-value-of-the-object-4e1365bf6d4f?source=collection_archive---------9-----------------------#2022-02-02">https://javascript.plainenglish.io/how-to-convert-a-javascript-object-array-to-a-hash-map-indexed-by-a-property-value-of-the-object-4e1365bf6d4f?source=collection_archive---------9-----------------------#2022-02-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9da9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何将JavaScript对象数组转换成hash map对象的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/362e47c8063a6845540b8b824d4db83c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TY8jbe1qsslAiiQB"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@insungyoon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">insung yoon</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b85f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时，我们可能希望将JavaScript objects数组转换成hash map对象，其中每个条目的键都是对象的属性值。</p><p id="b396" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将研究如何将JavaScript对象数组转换成hash map对象。</p><h1 id="041f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">array . protocol . reduce</h1><p id="23f5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">JavaScript数组的<code class="fe mp mq mr ms b">reduce</code>方法让我们可以轻松地将对象数组转换成对象。</p><p id="4660" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以写:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="3828" class="mx lt iq ms b gy my mz l na nb">const arr = [{<br/>    key: 'foo',<br/>    val: 'bar'<br/>  },<br/>  {<br/>    key: 'hello',<br/>    val: 'world'<br/>  }<br/>];</span><span id="17c9" class="mx lt iq ms b gy nc mz l na nb">const result = arr.reduce((map, obj) =&gt; {<br/>  map[obj.key] = obj.val;<br/>  return map;<br/>}, {});</span><span id="5bb3" class="mx lt iq ms b gy nc mz l na nb">console.log(result)</span></pre><p id="5648" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进行转换。</p><p id="fc47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有一个<code class="fe mp mq mr ms b">arr</code>对象数组。</p><p id="8517" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们调用<code class="fe mp mq mr ms b">reduce</code>将数组中的对象，也就是<code class="fe mp mq mr ms b">obj</code>组合成我们返回的对象，也就是<code class="fe mp mq mr ms b">map</code>。</p><p id="46bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们得到了<code class="fe mp mq mr ms b">obj.key</code>，并将它设置为<code class="fe mp mq mr ms b">map</code>的属性名。</p><p id="5efc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而我们用<code class="fe mp mq mr ms b">obj.val</code>作为<code class="fe mp mq mr ms b">obj.key</code>的值。</p><p id="5492" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二个参数是一个空对象，它是归约结果的初始值。</p><p id="7b15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，<code class="fe mp mq mr ms b">result</code>的值为:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="a37d" class="mx lt iq ms b gy my mz l na nb">{foo: "bar", hello: "world"}</span></pre><h1 id="739f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使用映射构造函数将对象数组转换为哈希映射</h1><p id="cd99" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以用<code class="fe mp mq mr ms b">Map</code>构造函数将对象数组转换成散列图。</p><p id="ac47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以写:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="2468" class="mx lt iq ms b gy my mz l na nb">const arr = [{<br/>    key: 'foo',<br/>    val: 'bar'<br/>  },<br/>  {<br/>    key: 'hello',<br/>    val: 'world'<br/>  }<br/>];</span><span id="f2a6" class="mx lt iq ms b gy nc mz l na nb">const result = new Map(arr.map(({<br/>  key,<br/>  val<br/>}) =&gt; ([<br/>  key,<br/>  val<br/>])));<br/>console.log(result)</span></pre><p id="ce95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mp mq mr ms b">map</code>方法中，我们从回调的参数对象中析构了<code class="fe mp mq mr ms b">key</code>和<code class="fe mp mq mr ms b">val</code>属性。</p><p id="ebc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们返回一个内部有<code class="fe mp mq mr ms b">key</code>和<code class="fe mp mq mr ms b">val</code>的数组。</p><p id="9bda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们将它传递给<code class="fe mp mq mr ms b">Map</code>构造函数，从中创建一个hash map对象。</p><p id="09f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">于是，<code class="fe mp mq mr ms b">result</code>就是:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="24cf" class="mx lt iq ms b gy my mz l na nb">Map(2) {"foo" =&gt; "bar", "hello" =&gt; "world"}</span></pre><p id="181c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据控制台日志。</p><h1 id="1eb4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mp mq mr ms b">Lodash keyBy Method</code></h1><p id="5a0c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们也可以使用Lodash <code class="fe mp mq mr ms b">keyBy</code>方法在第一个例子中创建相同的对象。</p><p id="7aa4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以写:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="cf11" class="mx lt iq ms b gy my mz l na nb">const arr = [{<br/>    key: 'foo',<br/>    val: 'bar'<br/>  },<br/>  {<br/>    key: 'hello',<br/>    val: 'world'<br/>  }<br/>];</span><span id="3349" class="mx lt iq ms b gy nc mz l na nb">const result = _.keyBy(arr, o =&gt; o.key);<br/>console.log(result)</span></pre><p id="4311" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们只是传入一个回调函数来返回返回对象的属性。</p><p id="89f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据<code class="fe mp mq mr ms b">key</code>属性的值，<code class="fe mp mq mr ms b">arr</code>的条目将被设置为键值。</p><p id="26ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以我们得到:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="eb5f" class="mx lt iq ms b gy my mz l na nb">{<br/>  "foo": {<br/>    "key": "foo",<br/>    "val": "bar"<br/>  },<br/>  "hello": {<br/>    "key": "hello",<br/>    "val": "world"<br/>  }<br/>}</span></pre><p id="fe67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为<code class="fe mp mq mr ms b">result</code>的值。</p><h1 id="5616" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">对象. fromEntries</h1><p id="38aa" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">从对象数组创建JavaScript对象的另一种方法是使用<code class="fe mp mq mr ms b">Object.fromEntries</code>方法。</p><p id="f2f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以写:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="9ae0" class="mx lt iq ms b gy my mz l na nb">const arr = [{<br/>    key: 'foo',<br/>    val: 'bar'<br/>  },<br/>  {<br/>    key: 'hello',<br/>    val: 'world'<br/>  }<br/>];</span><span id="9f1c" class="mx lt iq ms b gy nc mz l na nb">const result = Object.fromEntries(<br/>  arr.map(({<br/>    key,<br/>    val<br/>  }) =&gt; ([<br/>    key,<br/>    val<br/>  ]))<br/>)<br/>console.log(result)</span></pre><p id="9a11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们传入一个键-值对数组的数组，就像我们试图从该数组创建一个<code class="fe mp mq mr ms b">Map</code>实例时所做的那样。</p><p id="405e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，对于<code class="fe mp mq mr ms b">result</code>的值，我们得到了与第一个例子相同的结果。</p><h1 id="a7b3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="557e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以使用Lodash的JavaScript标准库的数组和对象方法来创建对象的JavaScript对象数组。</p><p id="68ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nd">更多内容尽在</em> <a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nd">说白了. io </em> </strong> </a> <em class="nd">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nd">免费周报</em> </strong> </a> <em class="nd">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nd">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="nd">。</em></p></div></div>    
</body>
</html>