<html>
<head>
<title>How to Create Zip files with Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Node.js创建Zip文件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-zip-files-with-node-js-505e720ceee1?source=collection_archive---------0-----------------------#2022-01-05">https://javascript.plainenglish.io/how-to-create-zip-files-with-node-js-505e720ceee1?source=collection_archive---------0-----------------------#2022-01-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/16a3b636611837b7049588a5ae801117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0uwZGiC2HRNWzeg5ADZCw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@viktortalashuk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Viktor Talashuk</a> on <a class="ae jz" href="https://unsplash.com/s/photos/files?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6686" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我们来看看如何使用<a class="ae jz" href="https://www.npmjs.com/package/jszip" rel="noopener ugc nofollow" target="_blank"> JSZIP </a>库用Node.js创建zip文件。</p><h2 id="8105" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">创建项目</h2><ul class=""><li id="3754" class="lr ls in kc b kd lt kh lu kl lv kp lw kt lx kx ly lz ma mb bi translated">创建一个新文件夹，并在其中打开命令终端。</li><li id="5d17" class="lr ls in kc b kd mc kh md kl me kp mf kt mg kx ly lz ma mb bi translated">键入<code class="fe mh mi mj mk b"><strong class="kc io">npm init -y</strong></code> <strong class="kc io"> <em class="ml"> </em> </strong>来初始化项目<strong class="kc io"> <em class="ml">。</em>T11】</strong></li><li id="c575" class="lr ls in kc b kd mc kh md kl me kp mf kt mg kx ly lz ma mb bi translated">用<code class="fe mh mi mj mk b"><strong class="kc io">npm i jszip</strong></code> <strong class="kc io"> <em class="ml"> </em> </strong>命令安装包。</li><li id="ac72" class="lr ls in kc b kd mc kh md kl me kp mf kt mg kx ly lz ma mb bi translated">在项目文件夹中创建app.js文件。</li></ul><p id="b275" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我创建的示例项目。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/6e37191542bbee51874f7281a3fae346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z6WJ5o-Iy3b_Q1V3f2VR3g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Project structure</figcaption></figure><p id="100d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我们有一个PDF文件“sample.pdf”和两个图像(“coding-science.jpg”和“programming-languages.jpg”)。我们的目标是创建一个zip文件，它由一个包含两张图片的文件夹、一个PDF和生成的文本文件组成。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/31e0010883702aa3cf2436633115d1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*D6mzLleg0N5bJFVc-VBGVg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Zip folder structure</figcaption></figure><h2 id="22f2" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">履行</h2><p id="0844" class="pw-post-body-paragraph ka kb in kc b kd lt kf kg kh lu kj kk kl ms kn ko kp mt kr ks kt mu kv kw kx ig bi translated">我们可以用几行代码做到这一点。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><ul class=""><li id="360b" class="lr ls in kc b kd ke kh ki kl mx kp my kt mz kx ly lz ma mb bi translated">首先，我们使用readFileSync方法读取本地PDF并将其添加到zip文件中。</li><li id="de93" class="lr ls in kc b kd mc kh md kl me kp mf kt mg kx ly lz ma mb bi translated">接下来，我们用下面的代码生成一个包含一些文本的样本文本文件。</li></ul><pre class="mn mo mp mq gt na mk nb nc aw nd bi"><span id="e736" class="ky kz in mk b gy ne nf l ng nh">zip.file("Textfile.txt", "Hello NodeJS\n");</span></pre><ul class=""><li id="2e6e" class="lr ls in kc b kd ke kh ki kl mx kp my kt mz kx ly lz ma mb bi translated">然后我们用下面一行创建一个文件夹“images”。</li></ul><pre class="mn mo mp mq gt na mk nb nc aw nd bi"><span id="172b" class="ky kz in mk b gy ne nf l ng nh">const img = zip.folder("images");</span></pre><ul class=""><li id="7225" class="lr ls in kc b kd ke kh ki kl mx kp my kt mz kx ly lz ma mb bi translated">我们可以使用一个循环将两张图片添加到文件夹中，如下所示。</li></ul><pre class="mn mo mp mq gt na mk nb nc aw nd bi"><span id="ce53" class="ky kz in mk b gy ne nf l ng nh">for (const image of images) {<br/>    const imageData = fs.readFileSync(image);<br/>    img.file(image, imageData);<br/>}</span></pre><ul class=""><li id="cd94" class="lr ls in kc b kd ke kh ki kl mx kp my kt mz kx ly lz ma mb bi translated">最后，我们可以生成并输出创建的zip文件夹。</li></ul><p id="4073" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们运行并验证代码。键入以下内容运行该程序。</p><pre class="mn mo mp mq gt na mk nb nc aw nd bi"><span id="e5f0" class="ky kz in mk b gy ne nf l ng nh"><strong class="mk io">node app.js</strong></span></pre><p id="d947" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，您将看到sample.zip文件已经在您的项目文件夹中创建，如下所示。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/2d9b2f8fafba7aa43afd460565f4e0a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*liBOyaaFYbJgmz4nRclBhA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Project folder after zip file generation</figcaption></figure><p id="16d7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是压缩文件夹。里面有图像文件夹、PDF文件和文本文件。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/40f78e98ec5a69d42553984afe14fc3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XNs9YI3ec0Z287v_j6j9Vg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Zip folder</figcaption></figure><p id="7461" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">图像文件夹包含两个图像。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/e4d01dc86e9c677c73e8fdc449a4eaae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OOxUMgTMr3dN0LyuWNe7gQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">images folder</figcaption></figure><p id="a535" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就是这样。注意，JSZIP不仅仅适用于Node.js，它也可以和Angular这样的前端框架一起使用。</p><p id="d37c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以在这里找到工作示例。</p><div class="nl nm gp gr nn no"><a href="https://github.com/Kanchana46/nodejs-zip.git" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">GitHub - Kanchana46/nodejs-zip</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.co</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc jt no"/></div></div></a></div><p id="d042" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望你喜欢这个。编码快乐！。</p><p id="fb78" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ml">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ml">说白了. io </em> </a> <em class="ml">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ml">免费每周简讯</em> </a> <em class="ml">。在我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="ml">社区不和谐</em> </a> <em class="ml">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>