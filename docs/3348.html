<html>
<head>
<title>Master the TypeScript Keyof Type Operator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握Type运算符的TypeScript键</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/master-the-typescript-keyof-type-operator-bf7f18865a8b?source=collection_archive---------1-----------------------#2022-08-22">https://javascript.plainenglish.io/master-the-typescript-keyof-type-operator-bf7f18865a8b?source=collection_archive---------1-----------------------#2022-08-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/91430c9de336234717bc8f7a1d449fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4X0aA9iFQoDsjhMgkn1AdA.jpeg"/></div></div></figure><p id="dce2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎来到<strong class="ka ir">掌握打字稿</strong>系列。本系列将以动画的形式介绍TypeScript的核心知识和技术。让我们一起学习吧！以前的文章如下:</p><ul class=""><li id="1de8" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><a class="ae lf" href="https://medium.com/frontend-canteen/what-are-k-t-and-v-in-typescript-generics-9fabe1d0f0f3" rel="noopener"><strong class="ka ir">TypeScript泛型中的K、T、V是什么？</strong> </a></li><li id="456b" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/using-typescript-mapped-types-like-a-pro-be10aef5511a"> <strong class="ka ir">使用TypeScript像Pro一样映射类型</strong> </a></li><li id="3b5a" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/use-typescript-conditional-types-like-a-pro-7baea0ad05c5"> <strong class="ka ir">使用TypeScript条件类型像亲</strong> </a></li><li id="c005" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/using-typescript-intersection-types-like-a-pro-a55da6a6a5f7"> <strong class="ka ir">使用TypeScript交集类型像亲</strong> </a></li><li id="6434" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated"><a class="ae lf" href="https://levelup.gitconnected.com/using-typescript-infer-like-a-pro-f30ab8ab41c7" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">使用打字稿推断像亲</strong> </a></li><li id="4d4a" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated"><a class="ae lf" href="https://medium.com/javascript-in-plain-english/how-to-use-typescript-template-literal-types-like-a-pro-2e02a7db0bac" rel="noopener"> <strong class="ka ir">使用TypeScript模板字面类型像亲</strong> </a></li><li id="f23a" class="kw kx iq ka b kb lg kf lh kj li kn lj kr lk kv lb lc ld le bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/15-utility-types-that-every-typescript-developer-should-know-6cf121d4047c"> <strong class="ka ir">可视化打字稿:15种最常用的实用类型</strong> </a></li></ul><p id="f997" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您在TypeScript中使用过<strong class="ka ir"> Partial、Required、Pick和Record </strong>实用程序类型吗？</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/87180be7c6721dc01fdb2e2291bb2204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7KTf2Gi8Zno2YYto_UR7Xw.jpeg"/></div></div></figure><p id="1580" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这些实用程序类型中使用了<code class="fe lp lq lr ls b">keyof</code>类型操作符，那么这个操作符做什么呢？如果不清楚，看完这篇文章，也许你就明白了。</p><p id="2018" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在JavaScript中，我们可以通过<code class="fe lp lq lr ls b">Object.keys</code>方法获取对象中的键，该方法返回一个键数组。</p><pre class="ll lm ln lo gt lt ls lu lv aw lw bi"><span id="80fc" class="lx ly iq ls b gy lz ma l mb mc">const user = {<br/>  id: 666,<br/>  name: "bytefer",<br/>}</span><span id="fbdc" class="lx ly iq ls b gy md ma l mb mc">const keys = Object.keys(user); // ["id", "name"]</span></pre><p id="41b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在TypeScript中，我们处理的是类型。如果你想得到对象类型中的键，你需要使用<code class="fe lp lq lr ls b">keyof</code>类型操作符。在TypeScript 2.1中引入的该运算符用于获取一个类型中的所有键，其返回类型是联合类型。</p><pre class="ll lm ln lo gt lt ls lu lv aw lw bi"><span id="7444" class="lx ly iq ls b gy lz ma l mb mc">type User = {<br/>  id: number;<br/>  name: string;<br/>}</span><span id="9e23" class="lx ly iq ls b gy md ma l mb mc">type UserKeys = keyof User; // "id" | "name"</span></pre><p id="82dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获得对象类型的键后，我们可以通过使用类似于属性访问的语法来访问对应于该键的值的类型。</p><pre class="ll lm ln lo gt lt ls lu lv aw lw bi"><span id="e78b" class="lx ly iq ls b gy lz ma l mb mc">type U1 = User["id"] // number<br/>type U2 = User["id" | "name"] // string | number<br/>type U3 = User[keyof User] // string | number</span></pre><p id="1523" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于上面的代码，我们使用一个<a class="ae lf" href="https://www.typescriptlang.org/docs/handbook/2/indexed-access-types.html#handbook-content" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">索引访问类型</strong> </a>来查找<code class="fe lp lq lr ls b">User</code>类型上的特定属性。索引类型本身就是一种类型，所以我们可以完全使用unions、<code class="fe lp lq lr ls b">keyof</code>或其他类型。</p><p id="f6d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么keyof运算符在实际中有哪些用途呢？这里我们举个例子。</p><pre class="ll lm ln lo gt lt ls lu lv aw lw bi"><span id="4df5" class="lx ly iq ls b gy lz ma l mb mc">function getProperty(obj, key) {<br/>  return obj[key];<br/>}</span><span id="3817" class="lx ly iq ls b gy md ma l mb mc">const user = {<br/>  id: 666,<br/>  name: "bytefer",<br/>}</span><span id="fa5f" class="lx ly iq ls b gy md ma l mb mc">const userName = getProperty(user, "name");</span></pre><p id="5c13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个简单的<code class="fe lp lq lr ls b">getProperty</code>函数，它接收两个参数obj和key，用于获取<code class="fe lp lq lr ls b">obj</code>对象上参数key对应的属性值。</p><p id="93d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么如何在TypeScript中定义上面的getProperty函数呢？这里我们将函数直接放入TypeScript项目中。对于上述代码，TypeScript编译器将提示以下错误信息:</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1ab3e18de55a91c5e9ef5dcc5b3ebf13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2bAfZUiyZv1-ezdIeYfQVQ.jpeg"/></div></div></figure><p id="7863" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个信息告诉我们，参数obj和key隐式地具有“any”类型。为了解决这个问题，我们可以显式定义参数obj和key的类型。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ab00e740fb70e70316d17b177e46258d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hLl8_hvWuJxMEMaJmaGNDA.jpeg"/></div></div></figure><pre class="ll lm ln lo gt lt ls lu lv aw lw bi"><span id="ddaf" class="lx ly iq ls b gy lz ma l mb mc">Element implicitly has an 'any' type because expression of type 'string' can't be used to index type '{}'.<br/>  No index signature with a parameter of type 'string' was found on type '{}'.ts(7053)</span></pre><p id="0ff4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">显式指定类型后，参数上的错误信息消失，但函数体中会出现新的错误信息。那么如何解决上述问题呢？这里我们可以使用TypeScript泛型和keyof运算符:</p><pre class="ll lm ln lo gt lt ls lu lv aw lw bi"><span id="aea1" class="lx ly iq ls b gy lz ma l mb mc">function getProperty&lt;T extends object, K extends keyof T&gt;(<br/>  obj: T, key: K<br/>) {<br/>  return obj[key];<br/>}</span></pre><p id="6320" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的代码中，我们定义了两个类型参数:<code class="fe lp lq lr ls b">T</code>和<code class="fe lp lq lr ls b">K</code>。对于类型参数T，<code class="fe lp lq lr ls b">extends</code>用于将类型参数的实际类型约束为对象类型的子类型。类型参数K还使用<code class="fe lp lq lr ls b">extends</code>将类型参数的实际类型约束为对象类型的所有键的联合类型的子类型。</p><p id="5a08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您不熟悉类型参数，我建议您阅读以下文章:</p><div class="me mf gp gr mg mh"><a href="https://medium.com/frontend-canteen/what-are-k-t-and-v-in-typescript-generics-9fabe1d0f0f3" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">TypeScript泛型中的K，T，V是什么？</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">用动画讲解，让你轻松掌握TypeScript泛型类型参数。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv jw mh"/></div></div></a></div><p id="5e33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，使用<code class="fe lp lq lr ls b">getProperty</code>函数，我们可以获得一个对象的指定属性的值。当该键对应的属性不存在时，TypeScript会提示相应的错误信息。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5c8a6ad6196b96178082e80a5d832a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8QAjjTJwkqeEfKdLUngzKw.jpeg"/></div></div></figure><p id="48de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lp lq lr ls b">keyof</code>类型操作符不仅可以应用于对象类型，还可以应用于<strong class="ka ir">原始数据类型、任何类型、类和枚举类型</strong>。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6cf26127aabf78feb42e03bcebc183bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vvuhpkNEQ2Da5qg6BON-oA.jpeg"/></div></div></figure><p id="fc73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">前面提到的TypeScript内置实用程序类型如<strong class="ka ir"> Partial、Required、Pick和Record </strong>都在内部使用了<code class="fe lp lq lr ls b">keyof</code>类型操作符和映射类型。如果您想了解更多关于TypeScript映射类型的信息，我们建议您阅读本文。</p><div class="me mf gp gr mg mh"><a rel="noopener  ugc nofollow" target="_blank" href="/using-typescript-mapped-types-like-a-pro-be10aef5511a"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">像专业人员一样使用TypeScript映射类型</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">映射类型—用动画解释。掌握TypeScript映射类型并理解TypeScript的内置…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv jw mh"/></div></div></a></div><p id="1833" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了让大家更好的理解<code class="fe lp lq lr ls b">keyof</code>类型操作符的作用，我将以分部效用类型为例来演示其工作流程:</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/005b7833486b83443817d637bb618466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ga_D3VCLdvHhSZJ3-JRBNw.jpeg"/></div></div></figure><pre class="ll lm ln lo gt lt ls lu lv aw lw bi"><span id="2500" class="lx ly iq ls b gy lz ma l mb mc">/**<br/> * Make all properties in T optional. <br/> * typescript/lib/lib.es5.d.ts<br/> */<br/>type Partial&lt;T&gt; = {<br/>    [P in keyof T]?: T[P];<br/>};</span></pre><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/347fe06d9b9ad67a8c833e509daa74a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qhvW4fB-g-RXVGvhYakabg.gif"/></div></div></figure><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/de8cae7ce4a866862a8df50e1296a18d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mCJWHhUzde3qE4v6rYS_Dw.jpeg"/></div></div></figure><p id="0e6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">至此，我相信您已经知道了<code class="fe lp lq lr ls b">keyof</code>类型操作符在TypeScript的内置实用程序类型中的作用。如果你想学习打字，那么不要错过<strong class="ka ir">掌握打字</strong>系列。</p><p id="5bc7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<a class="ae lf" href="https://medium.com/@bytefer" rel="noopener"> Medium </a>或<a class="ae lf" href="https://twitter.com/Tbytefer" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，阅读更多关于TS和JS的内容！</p><div class="me mf gp gr mg"><div role="button" tabindex="0" class="ab bv gv cb fp my mz bn na jw ex"><div class="nb l"><div class="ab q"><div class="l di"><img alt="Bytefer" class="l de bw nc nd fe" src="../Images/238cf2afd3c689b50719951ba2fd880d.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*krjVh9VFhDEcMUif4Ewt-A.png"/><div class="fb bw l nc nd fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://medium.com/@bytefer?source=post_page-----bf7f18865a8b--------------------------------" rel="noopener follow" target="_top"> Bytefer </a></p></div></div><div class="ng nh gw l"><h2 class="bd ir tn kw fp to fr fs mn fu fw ip bi translated">掌握打字稿系列</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi tp au tq tr ts py tt an eh ei tu tv tw el em eo de bk ep" href="https://medium.com/@bytefer/list/mastering-typescript-series-688ee7c12807?source=post_page-----bf7f18865a8b--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="tx l fo"><span class="bd b dl z dk">47 stories</span></div></div></div><div class="nt dh nu fp ab nv fo di"><div class="di nl bv nm nn"><div class="dh l"><img alt="" class="dh" src="../Images/8fba4cad7ae795f6abed5234e33e0356.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*l87u8lL_MzD5n4z_"/></div></div><div class="di nl bv no np nq"><div class="dh l"><img alt="" class="dh" src="../Images/373c978fed504a3c38f0fdb5b617fedb.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*94uN4q2Of_fg3WaQ"/></div></div><div class="di bv nr ns nq"><div class="dh l"><img alt="" class="dh" src="../Images/a8ea3e3ecad1c2d2697107f3ce466e42.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*tGza_iE2o--HjQwD"/></div></div></div></div></div><h1 id="73b7" class="nz ly iq bd oa ob oc od oe of og oh oi oj ok ol om on oo op oq or os ot ou ov bi translated">资源</h1><div class="me mf gp gr mg mh"><a href="https://www.typescriptlang.org/docs/handbook/2/keyof-types.html" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">文献工作-键入运算符</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">keyof操作符接受一个对象类型，并生成其键的字符串或数字文字并集。以下类型…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">www.typescriptlang.org</p></div></div><div class="mq l"><div class="ow l ms mt mu mq mv jw mh"/></div></div></a></div><p id="0fc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ox">更多内容看</em> <a class="ae lf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ox">说白了。报名参加我们的</em> <a class="ae lf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ox">免费周报</em> </strong> </a> <em class="ox">。关注我们关于</em> <a class="ae lf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ox">推特</em> </strong> </a>，<a class="ae lf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ox">LinkedIn</em></strong></a><em class="ox">，</em><a class="ae lf" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ox">YouTube</em></strong></a><em class="ox">，以及</em> <a class="ae lf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ox">不和</em> </strong> </a> <em class="ox">。</em></strong></a></p></div></div>    
</body>
</html>