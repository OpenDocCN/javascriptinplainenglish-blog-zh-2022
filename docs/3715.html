<html>
<head>
<title>How to Upload Images in Node.js the Easy Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何简单地在Node.js中上传图片</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/upload-images-in-nodejs-and-mongodb-2e435ffd960a?source=collection_archive---------0-----------------------#2022-09-20">https://javascript.plainenglish.io/upload-images-in-nodejs-and-mongodb-2e435ffd960a?source=collection_archive---------0-----------------------#2022-09-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c428" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">为了获得更好的用户体验，学习如何使用Node.js和MongoDB将图像上传到云中。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/aa20a93f88c2c78a10bd9b4bf7afc8dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VL2QNO-JnX8uHv5P16uELg.jpeg"/></div></div></figure><h1 id="7cf5" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">概述</h1><p id="6f3b" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">⭐为图片上传设置了一个Multer。</p><p id="5230" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">⭐上传图片到云端。</p><p id="f4f6" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">⭐把图像和MongoDB数据库连接起来。</p><p id="04ca" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">最近，为了改进我的水果店网站的功能，我决定构建自己的REST API。</p><p id="8518" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">经过很多努力，我能够为网站构建自己的REST API。在本地，一切都很完美，包括图形和产品数据。然而，当我把我的API放到Heroku上时，事情开始变糟了。</p><p id="147f" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">我的意思是，让我解释一下👇</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mh"><img src="../Images/70eb5dafe6b771cdc9d5d09dd84072b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvIv_GPZub508jlsxMCnZw.jpeg"/></div></div></figure><ul class=""><li id="69c4" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">正如您在上面的图片中看到的，当我从服务器获取数据时，它返回了所有产品及其图片链接。</li><li id="d17b" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">然而，当我点击图片链接时，我得到的不是图片，而是一个错误。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/2127e8d460a7664cbf14adcc3ca2992f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*2jXUUWxh9UaHOQT9fYUoEg.jpeg"/></div></figure><p id="ed6b" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">正如您在错误消息中看到的，它表示该路线当前不可用。显然，这不是我想要的，所以我试图自己解决它。</p><p id="c47c" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">最后，经过大量的研究，我想出了一个解决方案，我相信对你也会有用。</p><p id="d479" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">这就是你将在本文中学到的关于上传图片到<em class="mx">云</em>并使用<strong class="li io"> Node.js </strong>和<strong class="li io"> MongoDB </strong>将它们链接到<em class="mx">数据库</em>的内容。</p><h2 id="aa17" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">让我们开始吧</h2><p id="1bd1" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">作为了解实际工作的一种方式，您的任务是创建一个包含用户姓名、电子邮件和照片的用户配置文件。</p><h2 id="e6bd" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">先决条件</h2><ul class=""><li id="d03d" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb mn mo mp mq bi translated">用于API测试的迅雷客户端或Postman。</li><li id="eb9b" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">代码编辑器。</li><li id="2ade" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">如果您能够理解starter文件中的代码，就可以开始了。</li></ul><h2 id="e2cb" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">让我们看看怎么做</h2><ul class=""><li id="47cf" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb mn mo mp mq bi translated">获取启动文件。</li></ul><div class="nn no gp gr np nq"><a href="https://github.com/fk00750/upload-image-cloud" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd io gy z fp nv fr fs nw fu fw im bi translated">GitHub-fk 00750/上传-图片-云</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">github.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe km nq"/></div></div></a></div><ul class=""><li id="fb81" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">打开您的终端并安装所有需要的软件包。</li></ul><p id="2fc0" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">✍️ <strong class="li io">注</strong> <strong class="li io"> — </strong>该项目遵循REST API架构。</p><ul class=""><li id="2924" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">为了开始，你只需要创建一个环境文件并添加两个变量，MONGO_URI和端口。</li><li id="8291" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">将您的MongoDB连接字符串粘贴到MONGO_URI。</li><li id="0e07" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">让我们运行服务器。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/81e1a4d33de07a13dcc2f3f16ab44c15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2l8mvFY6O7IRige5B0TRuw.png"/></div></div></figure><p id="fb58" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">理想情况下，您应该会得到类似于上图的结果。</p><ul class=""><li id="453a" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">现在让我们检查一下route文件夹中的一些路线，并对它们进行测试。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/9297a9bc4935bb1cc49b9aa3c3e361ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YYJbs_BaxmfwkHrszrahDA.png"/></div></div></figure></div><div class="ab cl og oh hr oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ig ih ii ij ik"><ul class=""><li id="5e90" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">好了，现在让我们创建用户配置文件。</li><li id="077f" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">第一步是将<em class="mx"> multer </em>导入到多部分数据的主文件中。</li><li id="e47d" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">首先为用户配置文件图像创建存储。</li></ul><h2 id="c576" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">密码</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi on"><img src="../Images/caef420fad4525b030d55a6f82796937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wMEdtrddweOYn6XaYtdNVw.png"/></div></div></figure><h2 id="9c7b" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">代码解释</h2><ul class=""><li id="1969" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb mn mo mp mq bi translated">首先分配存储用户图像的文件夹。</li><li id="395a" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">通过将当前日期与一个随机生成的高达十亿的数字和原始文件扩展名连接起来，您可以轻松地创建一个唯一的文件名，如下所示:</li></ul><p id="47c7" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">"文件名":" 1663478472266–946908179 . jpg "</p></div><div class="ab cl og oh hr oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ig ih ii ij ik"><h2 id="fc8e" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">创建多部分数据的处理程序</h2><ol class=""><li id="74f8" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb oo mo mp mq bi translated">创建一个函数<strong class="li io"> handleMultipartData </strong></li><li id="fd12" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb oo mo mp mq bi translated">对它使用multer方法。</li><li id="f936" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb oo mo mp mq bi translated">Multer接受几个选项，但是在您的情况下，您需要传递您之前创建的存储配置和文件限制。</li><li id="b97f" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb oo mo mp mq bi translated">并提供单个(“图像”)</li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi op"><img src="../Images/ee7d9c9eaa001f6bf4175eb31092e10e.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*HSIoXSmQwPKSynYgbHolOA.png"/></div></figure><ul class=""><li id="fc99" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">在main.js路由文件中使用handleMultipartData</li></ul><h2 id="8bc5" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">完全码</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oq or l"/></div></figure><p id="84b4" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">是时候测试你的设置了。</p><p id="1102" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">在迅雷客户端中，打开创建用户路径，输入用户名和电子邮件以及配置文件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi os"><img src="../Images/95d776e17767a668ec0d446885de7b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f9jI_85dX0hr-IQOoKRj8A.png"/></div></div></figure><ul class=""><li id="f444" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">此外，您将在上传文件夹中找不到任何文件。</li><li id="77d3" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">让我们发送请求，并希望一切顺利。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/332b4e74b4bd8f07d8c5df46b51555dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*72J8GeIXonDDv5FihjTFWw.jpeg"/></div></div></figure><ul class=""><li id="14f0" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">服务器用<strong class="li io">用户</strong>和<strong class="li io">文件</strong>数据响应。</li><li id="e34b" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">您还可以注意到uploads文件夹不再是空的。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/f8b1f966ea481e726dbe01032369b5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ahIT__847A9Bk1QhX6LryA.jpeg"/></div></div></figure><ul class=""><li id="3e5b" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">一切正常。</li><li id="96a1" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">现在你可以上传<strong class="li io">用户</strong>的图片到服务器。</li></ul><h2 id="e195" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">将图像上传到云</h2><ul class=""><li id="8d90" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb mn mo mp mq bi translated">让我们进入第二步，将您的映像上传到云中。</li><li id="e7a2" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">对于这样的项目，我推荐使用Cloudinary，这是一个免费的基于云的服务，效果相当好。</li></ul><div class="nn no gp gr np nq"><a href="https://cloudinary.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd io gy z fp nv fr fs nw fu fw im bi translated">图像和视频上传、存储、优化和CDN</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">转换图像和视频以加快加载速度而不降低视觉效果，自动生成图像和视频变体…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">cloudinary.com</p></div></div><div class="nz l"><div class="ot l ob oc od nz oe km nq"/></div></div></a></div><h2 id="64a5" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">以下是您需要遵循的步骤</h2><ul class=""><li id="04d4" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb mn mo mp mq bi translated">创建一个云账户。</li><li id="2017" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">创建帐户后，现在是配置web应用程序的时候了。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ou"><img src="../Images/89dd8906a70f2f4b95a964c4a1acb9d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gSYh7VKo_9tWMx9GX4Axqg.png"/></div></div></figure><ul class=""><li id="13eb" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">点击配置您的SDK。</li><li id="0170" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">选择Node.js选项。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/6bd024c67ee05e8e0b3221fea90742d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*NzM-RDQT1zBQX9kxIoSkYQ.png"/></div></figure><ul class=""><li id="e943" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">复制钥匙。</li><li id="b0f5" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">转到<strong class="li io"> main.js </strong>文件中的创建用户路径。</li><li id="4179" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">我强烈建议您将这些键值存储在您的环境文件中。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/2b290bed886718a7b3ae0fd3a06d88d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*3QI0ArTXha2lJ9_BhuM-3Q.png"/></div></figure><p id="c7b3" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">好吧，让我们写一些代码，然后我们将启动。</p><h2 id="17b3" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">密码</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/78fdb36d35dafe821c7f455888a6a7f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*iUW8CkM13sT1WSNA6I6xaw.png"/></div></figure><p id="0158" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><strong class="li io">代码解释</strong></p><ol class=""><li id="aaa3" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb oo mo mp mq bi translated">如果文件路径未定义，代码将直接返回。</li><li id="7e63" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb oo mo mp mq bi translated">将filePath提供给cloudinary.v2.uploader.upload方法。</li></ol><p id="ad8c" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">让我们看看您的文件是否已成功上传到云中。</p><ul class=""><li id="c435" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">太好了，我们有结果了。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/727d45462c8883ab53318f569d191325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s7o9px9EXHhqkiIgaQJLuw.jpeg"/></div></div></figure><ul class=""><li id="757b" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">在上图中，你可以看到你上传的文件链接和用户数据。</li><li id="3d5c" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">现在点击图片链接打开图片。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ou"><img src="../Images/4718890efab3f2b519c929f4deeb4e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbonRRmvHqsvtUbdL_OHIQ.png"/></div></div></figure><ul class=""><li id="a048" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">太好了，图像已经成功上传到云中。</li></ul><h2 id="fb3e" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">完全码</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oq or l"/></div></figure><h2 id="b25f" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">将图像与数据库链接</h2><ul class=""><li id="0cbc" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb mn mo mp mq bi translated">打开models文件夹中的<strong class="li io"> user.js </strong>并检查用户模式。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/b8c5b5e2aa4e6d6e9ce41234be0edfad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*ow453pQcktLmDALV67tBaw.png"/></div></figure><ul class=""><li id="5b96" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">如您所见，已经创建了用户模式。欢迎大家根据自己的要求定制。</li></ul><h2 id="2f14" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">创建用户文档</h2><ul class=""><li id="bc5d" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb mn mo mp mq bi translated">去创建一个新的数据库。</li><li id="2ff6" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">在main.js文件中导入user.js文件。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oq or l"/></div></figure><h2 id="f984" class="my kp in bd kq mz na dn ku nb nc dp ky lp nd ne la lt nf ng lc lx nh ni le nj bi translated">代码解释</h2><ol class=""><li id="63df" class="mi mj in li b lj lk lm ln lp nk lt nl lx nm mb oo mo mp mq bi translated">第57行—解构了req中的姓名和电子邮件。身体。</li><li id="6e04" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb oo mo mp mq bi translated">第61行—等待并使用User.create()方法创建用户。</li><li id="8a1d" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb oo mo mp mq bi translated">第62 &amp; 63行—将名称和电子邮件对象传递给create方法。</li><li id="5667" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb oo mo mp mq bi translated">第64行—为image选项分配云映像的安全URL。</li></ol><p id="1235" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">⌛把用户数据上传到数据库的时候到了。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oz"><img src="../Images/9dcd03cb005b74ecfada4f611075b2ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Omif8EAoWvirea9l4dLM-g.jpeg"/></div></div></figure><ul class=""><li id="be3b" class="mi mj in li b lj mc lm md lp mk lt ml lx mm mb mn mo mp mq bi translated">上面，你可以看到你的云镜像和数据库已经成功链接。</li><li id="3bd2" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">你可以通过点击图片链接来验证，它已经可以访问了。</li><li id="b298" class="mi mj in li b lj mr lm ms lp mt lt mu lx mv mb mn mo mp mq bi translated">你也可以检查你的数据库。</li></ul><h1 id="48d0" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">结论</h1><p id="fefb" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">有了这个新特性，您可以毫不费力地将图像从您的计算机上传到云中，从而使您的Node.js应用程序比以前运行得更快、更高效。</p><p id="a337" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如有任何疑问和建议，请随时通过我的<a class="ae pa" href="https://twitter.com/Fk00750" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> Twitter </strong> </a> ✌联系我🏻</p></div><div class="ab cl og oh hr oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ig ih ii ij ik"><p id="f8c0" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><em class="mx">更多内容看</em> <a class="ae pa" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mx">说白了就是</em> </strong> </a> <em class="mx">。报名参加我们的</em> <a class="ae pa" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mx">免费周报</em> </strong> </a> <em class="mx">。关注我们关于</em> <a class="ae pa" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mx">推特</em> </strong> </a>，<a class="ae pa" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mx">领英</em> </strong> </a> <em class="mx">，</em><a class="ae pa" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="li io"><em class="mx">YouTube</em></strong></a><em class="mx">，以及</em> <a class="ae pa" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mx">不和</em> </strong> </a> <em class="mx">。对增长黑客感兴趣？检查</em> <a class="ae pa" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mx">电路</em> </strong> </a> <em class="mx">。</em></p></div></div>    
</body>
</html>