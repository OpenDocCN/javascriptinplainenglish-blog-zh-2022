<html>
<head>
<title>How to Use Git to Travel Through Time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Git穿越时间</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-git-to-travel-through-time-a9981582b31c?source=collection_archive---------11-----------------------#2022-07-18">https://javascript.plainenglish.io/how-to-use-git-to-travel-through-time-a9981582b31c?source=collection_archive---------11-----------------------#2022-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1402b485de26f2963f05901c45a14977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKNIJHFYH4sKRK696134Mg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by RealToughCandy.com: <a class="ae kc" href="https://www.pexels.com/photo/man-love-people-woman-11035539/" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/man-love-people-woman-11035539/</a></figcaption></figure><p id="9ea1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章将教你如何获得食物…看到我做了什么吗？不过说真的，Git对于软件开发人员来说是一个非常有价值的工具，可以跟踪他们的代码和状态。Git有很多不同的命令，其中很多，我们大多数人可能因为很多不同的原因而不使用，比如我们不知道它们是做什么的，我们从来没有听说过它们，或者它们只是很可怕。</p><p id="8e4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在这里向您展示几个git命令，当有人不可避免地在主分支上搞砸了git历史、删除了commit以及您可能想到的任何其他灾难性情况时，这些命令可以帮助您挽救您的工程团队。所以系好安全带，我们出发吧。</p><p id="794d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"><em class="lb">* * *注:</em> </strong> <em class="lb">我将向您展示一些命令的基本用法，让您了解它们在日常工作中的实际应用。但是，我将链接每个命令的官方文档，以便您可以看到调用命令的所有不同方式！</em></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="7fce" class="lj lk iq bd ll lm ln dn lo lp lq dp lr ko ls lt lu ks lv lw lx kw ly lz ma mb bi translated">git日志</h2><div class="mc md gp gr me mf"><a href="https://git-scm.com/docs/git-log" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">Git - git-log文档</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">p -u - patch生成修补程序(请参见生成修补程序一节)。-s -无补丁…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">git-scm.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt jw mf"/></div></div></a></div><p id="8fbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<strong class="kf ir"> git log </strong>最简单的方法就是在repo中的任何分支上键入<strong class="kf ir"> git log </strong>。它将按照从最近到最早提交的顺序，向您显示已经被推送到该分支的提交的历史。</p><p id="7133" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该命令的输出如下所示:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="7edc" class="lj lk iq mz b gy nd ne l nf ng">$ git log<br/>commit ca82a6dff817ec66f44342007202690a93763949<br/>Author: John Doe &lt;jdoe-mail.com&gt;<br/>Date:   Mon Mar 17 21:52:11 2008 -0700<br/><br/>    Change version number<br/><br/>commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7<br/>Author: John Doe &lt;jdoe-mail.com&gt;<br/>Date:   Sat Mar 15 16:40:33 2008 -0700<br/><br/>    Remove unnecessary test<br/><br/>commit a11bef06a3f659402fe7563abf99ad00de2209e6<br/>Author: John Doe &lt;jdoe-mail.com&gt;<br/>Date:   Sat Mar 15 10:31:28 2008 -0700<br/><br/>    Initial commit</span></pre><p id="a7b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里需要注意的重要事项是，您可以看到每次提交的提交消息和提交SHA，我们稍后将把它们与<strong class="kf ir"> git checkout </strong>结合起来，以实现时间旅行🕒。</p><h2 id="8113" class="lj lk iq bd ll lm ln dn lo lp lq dp lr ko ls lt lu ks lv lw lx kw ly lz ma mb bi translated">git检验</h2><div class="mc md gp gr me mf"><a href="https://git-scm.com/docs/git-checkout" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">git-git-签出文档</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">安静安静，抑制反馈信息。- progress - no-progress在标准错误上报告进度状态…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">git-scm.com</p></div></div><div class="mo l"><div class="nh l mq mr ms mo mt jw mf"/></div></div></a></div><p id="086b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<strong class="kf ir"> git checkout </strong>最常用于创建新分支或切换到现有分支。但是git checkout还有一个较少使用的选项，那就是…</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="b721" class="lj lk iq mz b gy nd ne l nf ng">git checkout &lt;commit-sha&gt;</span></pre><p id="93bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此命令允许您签出分支历史中的任何提交。为什么这很酷？以下面的例子为例。</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="89c4" class="lj lk iq mz b gy nd ne l nf ng">Branch A</span><span id="c028" class="lj lk iq mz b gy ni ne l nf ng">abc1 -- abc2 -- abc3</span><span id="7582" class="lj lk iq mz b gy ni ne l nf ng">git checkout abc2</span></pre><p id="b223" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以，你有一个分支A，你意识到可能有一个更有效的方法在代码中写一个昂贵的函数，但是你还不想提交它。所以你决定要回到分支的旧状态，你做了一个<strong class="kf ir"> git checkout abc2 </strong>来返回提交<strong class="kf ir"> abc2。</strong>此时，git会告诉你，你处于一个分离的head状态，这只是一种奇特的说法，说明你已经在你签出的提交中创建了你的分支的沙盒环境。现在，您可以尝试重写这个昂贵的函数，而不用担心弄乱分支的实际历史，除非您认为这样做是值得的。</p><p id="492c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您不确定如何找到能够使用该命令的提交sha，请参考我的<strong class="kf ir"> git日志</strong>部分。使用log命令时会打印提交sha！</p><h2 id="2e69" class="lj lk iq bd ll lm ln dn lo lp lq dp lr ko ls lt lu ks lv lw lx kw ly lz ma mb bi translated">git参考日志</h2><div class="mc md gp gr me mf"><a href="https://git-scm.com/docs/git-reflog" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">Git - git-reflog文档</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">该命令采用各种子命令，以及取决于子命令的不同选项:git reflog [show] [ ] [ ]git…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">git-scm.com</p></div></div><div class="mo l"><div class="nj l mq mr ms mo mt jw mf"/></div></div></a></div><p id="3f03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我看来，<strong class="kf ir"> reflog </strong>是<strong class="kf ir"> git log </strong>更强大的版本。<strong class="kf ir"> reflog </strong>是<strong class="kf ir"> HEAD </strong>指向的提交列表。在Git世界中，这是你能找到的最接近摆脱困境的方法。命令输出如下所示…</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="1bb4" class="lj lk iq mz b gy nd ne l nf ng">git reflog<br/>e1bec01 HEAD@{1}: commit: Set up ui for progress bar<br/>f390e95 HEAD@{2}: commit: Updated README <br/>7a8682a HEAD@{3}: commit: Hooked up Express Server</span></pre><p id="f0bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数字串再次成为我们已经学过的提交SHA，它对于用其他命令遍历git历史是至关重要的。Reflog会告诉你何时切换到其他分支，何时开始和完成rebases，以及许多其他事情。比方说，你弄乱了一个rebase，因为有大量的代码冲突。你可以使用一个reflog来重置你的头回到提交权之前，你开始你的rebase，并再次尝试！</p><h2 id="dad9" class="lj lk iq bd ll lm ln dn lo lp lq dp lr ko ls lt lu ks lv lw lx kw ly lz ma mb bi translated">git重置</h2><div class="mc md gp gr me mf"><a href="https://git-scm.com/docs/git-reset" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">Git - git重置文档</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">在前三种形式中，将条目从复制到索引。在最后一个表单中，将当前分支头(head)设置为…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">git-scm.com</p></div></div><div class="mo l"><div class="nk l mq mr ms mo mt jw mf"/></div></div></a></div><p id="3e50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">许多开发人员害怕reset命令，因为在它的一些变体中，它确实会删除工作分支中的更改，而删除代码会让一些人害怕。我在这里说，git reset是你的朋友而不是你的敌人。有大量的选项可以使用它，但对于如何使用的一些基本示例，请考虑以下内容。</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="5cfb" class="lj lk iq mz b gy nd ne l nf ng">1. git reset --HARD<br/>2. git reset --soft ^HEAD</span></pre><ol class=""><li id="f42c" class="nl nm iq kf b kg kh kk kl ko nn ks no kw np la nq nr ns nt bi translated">假设您尝试从远程获取分支上的最新更改，这会导致大量冲突，您只想清理本地分支并将其恢复到运行git pull之前的状态。git reset——hard将重置您的本地工作更改，并将您的分支尖端指向头部。</li><li id="4e6f" class="nl nm iq kf b kg nu kk nv ko nw ks nx kw ny la nq nr ns nt bi translated">当您想要撤销或修复刚刚在分支上进行的提交时，第二个命令非常有用。它将撤销之前在分支上所做的提交，但是将更改保留为本地工作更改，以便您可以重做提交消息，对代码进行更多的更改，等等。</li></ol><h2 id="3c16" class="lj lk iq bd ll lm ln dn lo lp lq dp lr ko ls lt lu ks lv lw lx kw ly lz ma mb bi translated">git还原</h2><div class="mc md gp gr me mf"><a href="https://git-scm.com/docs/git-revert" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">Git - git-revert文档</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">git-revert上次更新于2.37.1 git-revert - Revert一些现有的提交git revert [ - [no-]edit] [-n] [-m…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">git-scm.com</p></div></div><div class="mo l"><div class="nz l mq mr ms mo mt jw mf"/></div></div></a></div><p id="0f85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个命令非常简单，对于撤销错误的提交非常有用。</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="0f0f" class="lj lk iq mz b gy nd ne l nf ng">git revert &lt;commit-sha&gt;</span></pre><p id="55b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设commit-123引入了一个bug，它完全破坏了生产应用程序中的一整页。</p><p id="65c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe oa ob oc mz b">git revert commit-123</code>将撤销该提交中所做的所有更改，并允许您提交回复到分支中，以完成“撤销”。许多公司都将revert命令作为“修复生产工作流程”的一部分。</p><h2 id="b561" class="lj lk iq bd ll lm ln dn lo lp lq dp lr ko ls lt lu ks lv lw lx kw ly lz ma mb bi translated">结论</h2><p id="c5fd" class="pw-post-body-paragraph kd ke iq kf b kg od ki kj kk oe km kn ko of kq kr ks og ku kv kw oh ky kz la ij bi translated">当然，还有更多的git命令可以用来浏览您的git历史时间线，但这是我最常用的几个命令，而且很容易学会。希望这能帮助你成为你的团队需要的英雄，下次有人搞乱项目的git历史，需要Git专家的时候。或者至少，它将帮助您撤销难看的提交并重写它们的消息😜。</p><p id="e4d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="lb">plain English . io</em></strong></a><em class="lb">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="lb">免费周报</em> </strong> </a> <em class="lb">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="lb">Twitter</em></strong></a><em class="lb">和</em><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="lb">LinkedIn</em></strong></a><em class="lb">。查看我们的</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="lb">社区不和谐</em> </strong> </a> <em class="lb">加入我们的</em> <a class="ae kc" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="lb">人才集体</em> </strong> </a> <em class="lb">。</em></p></div></div>    
</body>
</html>