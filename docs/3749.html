<html>
<head>
<title>ES6 Adds the ‘let’ Property Instead of the Function Closure to Solve the Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ES6增加了“let”属性而不是函数闭包来解决这个问题</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/es6-adds-the-let-property-instead-of-the-function-closure-to-solve-the-problem-b887af954039?source=collection_archive---------7-----------------------#2022-09-22">https://javascript.plainenglish.io/es6-adds-the-let-property-instead-of-the-function-closure-to-solve-the-problem-b887af954039?source=collection_archive---------7-----------------------#2022-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8955cb8c57ed9312079390a073237af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aARr64n6CLY6i8hqzMbOlg.png"/></div></div></figure><p id="15a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，了解ES6的let关键字和var的区别。</p><p id="46fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">let和var的区别:</p><ol class=""><li id="ddf6" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">var没有块作用域，而let有块作用域。</li><li id="8acb" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">在JavaScript中，只有函数有自己独立的作用域。</li></ol><p id="8206" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你理解有困难，这里有一个例子:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="dbad" class="lt lu iq lp b gy lv lw l lx ly">{var a=10}<br/>console.log(a);</span></pre><ol class=""><li id="590d" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">网页运行时，可以直接打印。</li><li id="7344" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果用字母代替var。</li></ol><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="1acc" class="lt lu iq lp b gy lv lw l lx ly">{let a=10}<br/>console.log(a);</span></pre><figure class="lk ll lm ln gt jr gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/af1ce3aeefd0672cb710ab6a567fa81a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/0*sqEzm4r2EEgrbRvC.png"/></div></figure><p id="bc30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1.控制台显示a未定义。<br/> 2。这说明let有自己独立的作用域。<br/> 3。既然有独立的作用域，let可以代替函数解决函数闭包问题。</p><p id="a721" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如:<br/>我们使用一个For循环来绑定和监听5个按钮的事件。单击每个按钮打印相应的数字。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="a731" class="lt lu iq lp b gy lv lw l lx ly">&lt;body&gt;<br/> &lt;button&gt;1&lt;/button&gt;<br/> &lt;button&gt;2&lt;/button&gt;<br/> &lt;button&gt;3&lt;/button&gt;<br/> &lt;button&gt;4&lt;/button&gt;<br/> &lt;button&gt;5&lt;/button&gt;<br/>&lt;/body&gt;</span><span id="108a" class="lt lu iq lp b gy ma lw l lx ly">&lt;script&gt;<br/>    var btn=document.getElementsByTagName("button");//Get a list of all buttons<br/>    for(var i=0;i&lt;btn.length;i++){<br/>        btn[i].onclick=function(){console.log(i+1);}<br/>    }</span></pre><p id="a227" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1.这样，无论我们点击哪个控制台，都只会打印最后一个数字5。</p><p id="f71b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.前面1234条已被覆盖，点击按钮打印5条。</p><p id="cb6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.说明for的{ }没有块级范围。</p><h2 id="afe2" class="lt lu iq bd mb mc md dn me mf mg dp mh kj mi mj mk kn ml mm mn kr mo mp mq mr bi translated">以前的解决方案(函数闭包)</h2><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="2bed" class="lt lu iq lp b gy lv lw l lx ly">for(var i=0;i&lt;btn.length;i++){<br/>     (function a(i){<br/>            btn[i].onclick=function(){console.log(i+1);} <br/>     })(i);   <br/>    }</span></pre><p id="2ce1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用一个即时函数包装它，并传入I的值(不推荐)</p><h2 id="87c3" class="lt lu iq bd mb mc md dn me mf mg dp mh kj mi mj mk kn ml mm mn kr mo mp mq mr bi translated">当前解决方案(ES6的let: var的升级版本)</h2><p id="ca34" class="pw-post-body-paragraph jy jz iq ka b kb ms kd ke kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv ij bi translated">只需将var替换为let:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="d20f" class="lt lu iq lp b gy lv lw l lx ly">for(let i=0;i&lt;btn.length;i++){<br/>            btn[i].onclick=function(){console.log(i+1);} <br/>    }</span></pre><p id="296d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">直接、简单、方便地解决问题(<strong class="ka ir">推荐</strong>)。</p><p id="72a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在正在学习JavaScript的同学可以养成写let的习惯，这也是var的完美版本！</p><p id="c3d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">恭喜你，你已经看完了这篇文章。如果你认为这篇文章写得好，请给我打个👋！</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="1d44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ne">更多内容看</em> <a class="ae nf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ne">说白了就是io </em> </strong> </a> <em class="ne">。报名参加我们的</em> <a class="ae nf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ne">免费周报</em> </strong> </a> <em class="ne">。关注我们关于</em><a class="ae nf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ne">Twitter</em></strong></a>，<a class="ae nf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ne">LinkedIn</em></strong></a><em class="ne">，</em><a class="ae nf" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ne">YouTube</em></strong></a><em class="ne">，</em> <a class="ae nf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ne">不和</em> </strong> </a> <em class="ne">。对增长黑客感兴趣？检查</em> <a class="ae nf" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ne">电路</em> </strong> </a> <em class="ne">。</em></p></div></div>    
</body>
</html>