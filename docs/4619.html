<html>
<head>
<title>How to Use ChatGPT as an Educational Chatbot in a Next.js Frontend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨Next.jså‰ç«¯ä½¿ç”¨ChatGPTä½œä¸ºæ•™è‚²èŠå¤©æœºå™¨äºº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/how-to-use-chatgpt-as-an-educational-chatbot-in-a-next-js-frontend-6f9689ba85e9?source=collection_archive---------1-----------------------#2022-12-19">https://javascript.plainenglish.io/how-to-use-chatgpt-as-an-educational-chatbot-in-a-next-js-frontend-6f9689ba85e9?source=collection_archive---------1-----------------------#2022-12-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3a17" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ä½ å¯ä»¥åœ¨ä½ çš„ç½‘ç«™ä¸Šä½¿ç”¨OpenAIçš„GPT-3.5ä½œä¸ºèŠå¤©åŠ©æ‰‹å—ï¼Ÿä½ æ‰“èµŒã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ExpressæœåŠ¡å™¨ã€ä½œä¸ºBFFçš„WunderGraphå’ŒGraphQLæ¥å®Œæˆçš„ã€‚</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/9b66fb547886021edfed19e66545d2b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AYJD7v7T2mkRBjYO"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/es/@lunarts?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Volodymyr Hryshchenko</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="kt ku kv"><p id="4660" class="kw kx ky kz b la lb jo lc ld le jr lf lg lh li lj lk ll lm ln lo lp lq lr ls ig bi translated">ä¸‰åˆ°å…«å¹´å†…ï¼Œæˆ‘ä»¬å°†æ‹¥æœ‰ä¸€å°å…·æœ‰æ™®é€šäººä¸€èˆ¬æ™ºåŠ›çš„æœºå™¨â€¦â€¦å¦‚æœæˆ‘ä»¬å¹¸è¿çš„è¯ï¼Œä»–ä»¬å¯èƒ½ä¼šå†³å®šæŠŠæˆ‘ä»¬å½“å® ç‰©å…»ã€‚â€â€”â€”<strong class="kz io"><em class="in">é©¬æ–‡Â·æ˜æ–¯åŸºï¼Œ1970å¹´</em> </strong> <em class="in">ã€‚éº»çœç†å·¥å­¦é™¢äººå·¥æ™ºèƒ½å®éªŒå®¤çš„åˆ›å§‹äººï¼Œå›¾çµå¥–è·å¾—è€…ï¼Œæ–¯å¦åˆ©Â·åº“å¸ƒé‡Œå…‹2001å¤ªç©ºæ¼«æ¸¸çš„é¡¾é—®ã€‚</em></p></blockquote><p id="14cd" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä»è¿™å¥è¯å¼€å§‹ï¼Œ53å¹´è¿‡å»äº†ï¼Œæˆ‘è¦è¯´æˆ‘ä»¬åœ¨é¿å…æœºå™¨äººèµ·ä¹‰æ–¹é¢åšå¾—å¾ˆå¥½ã€‚</p><p id="f09d" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ç„¶è€Œï¼Œæˆ‘ä»¬<em class="ky">å·²ç»</em>åˆ°äº†å¯ä»¥æ•™æœºå™¨<em class="ky">å­¦ä¹ </em>çš„åœ°æ­¥ï¼Œå¹¶æ ¹æ®å®ƒä»¬æ‰€å­¦ç”Ÿæˆæ–‡æœ¬å’Œå›¾åƒã€‚å½“ç„¶ï¼Œè®°å¿†ç»Ÿè®¡æ¨¡å¼ä¸æ˜¯æ™ºåŠ›ï¼Œä½†æ˜¯éšç€å¤§å‹è¯­è¨€æ¨¡å‹çš„å‡ºç°ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨äººå·¥æ™ºèƒ½æ¥å¸®åŠ©äººç±»ç†è§£è¯­è¨€æ¦‚å¿µã€‚</p><p id="8d6b" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æƒ³æƒ³èŠå¤©æœºå™¨äºº/åŠ©æ‰‹ä¸éœ€è¦å‘Šè¯‰ä½ "<em class="ky">å¦‚æœä½ åœ¨è¿æ¥åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨æ—¶é‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰3 "</em>ï¼Œä½†æ˜¯å½“ä½ å‘Šè¯‰å®ƒ"<em class="ky">æˆ‘çš„æ¸¸æˆåœ¨ç™»å½•å±å¹•ä¸Šæ­»æœºæ—¶ï¼Œ<em class="ky">æ˜ç™½</em>ä½ æƒ³è¦è§£å†³è¿æ¥é—®é¢˜ï¼è¯·å¸®å¿™ï¼ï¼1" </em></p><p id="a7a9" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›LLMâ€”â€”ä»¥â€œé—®ä¸€ä¸ªé—®é¢˜ï¼Œå¾—åˆ°ä¸€ä¸ªç­”æ¡ˆâ€çš„èƒ½åŠ›â€”â€”ä¸ºå­¦ç”Ÿæä¾›ä¸ªæ€§åŒ–çš„ã€å¯è®¿é—®çš„ã€æŒ‰éœ€çš„å¸®åŠ©ï¼Œå¸®åŠ©ä»–ä»¬æŒ‰ç…§è‡ªå·±çš„é€Ÿåº¦ã€æ ¹æ®è‡ªå·±çš„éœ€è¦å’Œèƒ½åŠ›è¿›è¡Œå­¦ä¹ ã€‚å¯¹äºç”µå­å­¦ä¹ æ¥è¯´ï¼Œè¿™ç§å³æ—¶åé¦ˆå’Œæ”¯æŒä¸éœ€è¦æ‰“æ–­å½“å‰çš„è®²åº§(äº‹å®ä¸Šï¼Œç”šè‡³ä¸éœ€è¦åªåœ¨å¸¸è§„è¯¾æ—¶å†…æé—®)ï¼Œåªéœ€è¦è¡¥å……ä¸€é—¨è¯¾ç¨‹ï¼Œä½¿å…¶å¯¹å­¦ç”Ÿæ¥è¯´æ›´å®¹æ˜“è·å¾—å’Œæ›´æœ‰å¸å¼•åŠ›ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/994b640c3a0f4a3e09dfd0f495e53895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*lW7Q7e6wkPjb84Zr7tnJIA.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Hereâ€™s the app in action. Love Jack, but his video is only being used as an example here. ğŸ˜… Not affiliated in any way.</figcaption></figure><p id="bd87" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä½†æ˜¯è¿™äº›æ€æƒ³å®éªŒå·²ç»å¤Ÿäº†ã€‚è®©æˆ‘ä»¬å°è¯•æ„å»ºè¿™æ ·ä¸€ä¸ªå‰ç«¯é›†æˆâ€”â€”ä¸€ä¸ªèŠå¤©åŠ©æ‰‹ï¼Œå®ƒå¯ä»¥ä½¿ç”¨OpenAIæ¥å›ç­”æ½œåœ¨å­¦ç”Ÿçš„é—®é¢˜ï¼Œè€Œæ— éœ€ä»–ä»¬é€€å‡ºè¯¾ç¨‹ï¼</p><h1 id="9d81" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">æŠ€æœ¯å †æ ˆä¼šæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</h1><p id="8587" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">ç±»ä¼¼è¿™æ ·çš„ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/758be837c38b5cfde47ab32a7cc306e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ozDV4gkfWCBIxcjR"/></div></div></figure><ul class=""><li id="409a" class="mv mw in kz b la lb ld le lt mx lu my lv mz ls na nb nc nd bi translated">ä¸€ä¸ªNext.jså‰ç«¯ï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªç”µå­å­¦ä¹ å¹³å°ï¼Œå¸¦æœ‰ä¸€ä¸ªèŠå¤©åŠ©æ‰‹/åŠ©æ‰‹/èŠå¤©æœºå™¨äºº/éšä¾¿ä½ æƒ³å«å®ƒä»€ä¹ˆçš„ç»„ä»¶ï¼Œå­¦ç”Ÿå¯ä»¥åœ¨å…¶ä¸­è¾“å…¥é—®é¢˜ï¼Œå¹¶ä»é‚£é‡Œæ¥æ”¶ç­”æ¡ˆã€‚</li><li id="d2e7" class="mv mw in kz b la ne ld nf lt ng lu nh lv ni ls na nb nc nd bi translated">ä¸€ä¸ªNode.js/Express APIï¼Œå®ƒä»å‰ç«¯æ¥æ”¶é—®é¢˜ï¼Œå°†å®ƒä»¬ä»£ç†åˆ°OpenAI ChatGPTæœåŠ¡å™¨ä¸Šï¼Œå¹¶åœ¨å“åº”ä¸­æä¾›ç­”æ¡ˆã€‚ChatGPT APIè¿˜æ²¡æœ‰å…¬å¼€ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éå®˜æ–¹çš„<code class="fe nj nk nl nm b"><a class="ae ks" href="https://www.npmjs.com/package/chatgpt" rel="noopener ugc nofollow" target="_blank">chatgpt</a></code>åŒ…æ¥å®ç°æˆ‘ä»¬çš„ç›®çš„ã€‚</li><li id="8ef4" class="mv mw in kz b la ne ld nf lt ng lu nh lv ni ls na nb nc nd bi translated">ä½¿ç”¨<a class="ae ks" href="https://wundergraph.com/" rel="noopener ugc nofollow" target="_blank"> WunderGraph </a>çš„åç«¯å¯¹å‰ç«¯(BFF)ï¼Œè¿™æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºå¼€å‘å·¥å…·ï¼Œä»…åœ¨æ„å»ºæ—¶ä½¿ç”¨GraphQLï¼Œé€šè¿‡å®‰å…¨çš„JSON-over-RPCæä¾›æ•°æ®ã€‚WunderGraphæœåŠ¡å™¨å°†æ˜¯ä¸€ä¸ªæœåŠ¡å±‚ï¼Œæˆ–è€…APIç½‘å…³ï¼Œä¸ç®¡ä½ æƒ³å«å®ƒä»€ä¹ˆï¼Œå®ƒæ˜¯ä½ çš„å‰ç«¯å¯ä»¥çœ‹åˆ°çš„å”¯ä¸€çš„â€œåç«¯â€ã€‚</li></ul><h1 id="bf8f" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">ä¸ºä»€ä¹ˆæ˜¯WunderGraphï¼Ÿ</h1><p id="7de8" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">ä¸ºä»€ä¹ˆé¦–å…ˆè¦ä½¿ç”¨BFFæ¨¡å¼ï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ä»å‰ç«¯å¤„ç†å¯¹APIçš„GET/POSTè°ƒç”¨å‘¢ï¼Ÿå¥½å§ï¼Œè®©æˆ‘ä»¬å…ˆå‡è®¾ä¸€ä¸‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨çš„æ¶æ„å¯èƒ½æ˜¯è¿™æ ·çš„ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/1ab1d8e48c503b900d9d745bd6907057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IF_29cpK7yMCfOus"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Whatâ€™s wrong with this picture?</figcaption></figure><p id="cf0e" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ‚¨çš„å‰ç«¯ç°åœ¨ä¸åç«¯ç´§å¯†è€¦åˆã€‚æ‚¨å°†ä¸å¾—ä¸æäº¤æ•°ç™¾è¡Œä»£ç åˆ°æ‚¨çš„å‰ç«¯repoï¼Œä»…ä»…æ˜¯ä¸ºäº†åè°ƒæ‚¨çš„å‰ç«¯å’Œæ‚¨çš„åº”ç”¨ç¨‹åºä½¿ç”¨çš„è®¸å¤šå¾®æœåŠ¡å’ŒAPIä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚å¦‚æœå®ƒä»¬ä¸­çš„ä»»ä½•ä¸€ä¸ªæ˜¯æ–°ç”Ÿçš„æˆ–ä¸ç¨³å®šçš„æŠ€æœ¯â€”â€”chat GPTå°±æ˜¯æœ€å¥½çš„ä¾‹å­â€”â€”é‚£ä¹ˆæ‚¨å°†ç»å¸¸ä¸€å¤´æ‰è¿›æ‚¨çš„å‰ç«¯ä»£ç ï¼Œå¯¹åº•å±‚çº¿è·¯è¿›è¡Œå¿…è¦çš„ä¿®æ”¹ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡æ­£å¸¸å·¥ä½œã€‚ä¸ç†æƒ³ã€‚</p><p id="a33f" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä½¿ç”¨WunderGraphä½œä¸ºåç«¯å¯¹å‰ç«¯ï¼Œå°†å‰ç«¯(å¯¹äºä»»ä½•ä¸€ç»„å®¢æˆ·ç«¯)ä»åç«¯è§£è€¦ï¼Œç®€åŒ–äº†ç»´æŠ¤ä»¥åŠä¸¤è€…ä¹‹é—´çš„åŒå‘é€šä¿¡ï¼Œæ–¹æ³•æ˜¯<strong class="kz io">ä»…åœ¨æ„å»ºæ—¶ä½¿ç”¨graph QL</strong>å°†æ•´ä¸ªæ“ä½œè½¬å˜ä¸ºç®€å•çš„æŸ¥è¯¢å’Œå˜åŒ–ï¼Œå…·æœ‰å®Œå…¨çš„ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ï¼Œå¹¶ä¸”æ¥è‡ªæ‰€æœ‰æ•°æ®æºçš„æ•°æ®æ•´åˆåˆ°ä¸€ä¸ªå•ä¸€çš„ã€ç»Ÿä¸€çš„è™šæ‹Ÿå›¾ä¸­ï¼Œå³JSON-over-RPCã€‚</p><p id="18f8" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥å¹¶è¡ŒåŒ–æ‰€æœ‰å¾®æœåŠ¡/APIè°ƒç”¨ï¼Œä¸€æ¬¡æ€§è·å–æ¯ä¸ªå®¢æˆ·ç«¯æ‰€éœ€çš„å‡†ç¡®æ•°æ®ï¼Œå‡å°‘åµŒå¥—æ•°æ®çš„ç€‘å¸ƒï¼Œå¹¶è‡ªåŠ¨å®Œæˆæ‰€æœ‰æ•°æ®è·å–â€¦æ‰€æœ‰è¿™äº›éƒ½æ²¡æœ‰GraphQLçš„å…¸å‹ç—›ç‚¹ï¼Œå³å¤§å‹å®¢æˆ·ç«¯æ†ç»‘åŒ…å’Œç¼“å­˜/å®‰å…¨é—®é¢˜ã€‚</p><p id="7df3" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä½ çš„åº”ç”¨ç”šè‡³ä¸éœ€è¦æä¾›GraphQLç«¯ç‚¹ï¼›ä½ åªæ˜¯åˆ©ç”¨å®ƒçš„åŠ›é‡æ¥è·å¾—å·¨å¤§çš„DXèƒœåˆ©ã€‚</p><h1 id="fa4c" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">ä»£ç </h1><blockquote class="kt ku kv"><p id="a204" class="kw kx ky kz b la lb jo lc ld le jr lf lg lh li lj lk ll lm ln lo lp lq lr ls ig bi translated"><em class="in"> âš  </em>ç„¶è€Œï¼ŒOpenAIçš„ChatGPTå’ŒTravis Fischerçš„<a class="ae ks" href="https://www.npmjs.com/package/chatgpt" rel="noopener ugc nofollow" target="_blank"> chatgptåº“</a>éƒ½åœ¨ä¸æ–­å˜åŒ–ï¼Œçªç ´æ€§çš„å˜åŒ–å°†ä¸å¯é¿å…(ä½†æ‚¨çš„å‰ç«¯åŸºæœ¬ä¿æŒä¸å˜â€”â€”ä½¿ç”¨BFFæ¨¡å‹çš„é¢å¤–å¥½å¤„ï¼).å¦‚æœæ‚¨å‘ç°ä»£ç ä¸å†å·¥ä½œï¼Œè¯·åœ¨è¿™é‡Œå‹¾é€‰<a class="ae ks" href="https://github.com/transitive-bullshit/chatgpt-api" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p></blockquote><h1 id="8fd4" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">ç¬¬1éƒ¨åˆ†:Expresså’ŒChatGPTåº“</h1><h2 id="74e1" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ç¬¬0æ­¥:ä¾èµ–é¡¹</h2><p id="9a44" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œä¸ºæ‚¨çš„API()åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚/åç«¯å·¥ä½œæ­£å¸¸)ï¼Œå…‰ç›˜åˆ°å…¶ä¸­ï¼Œç„¶åé”®å…¥è¿™äº›ã€‚</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="1c59" class="oe ly in nm b be of og l oh oi">npm install express dotenv<br/>npm install chatgpt</span></pre><p id="8aaa" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">å¯é€‰åœ°â€¦</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="2ca3" class="oe ly in nm b be of og l oh oi">npm install puppeteer</span></pre><p id="dc0b" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æˆ‘ä»¬å¯¹APIä½¿ç”¨<a class="ae ks" href="https://www.npmjs.com/package/express" rel="noopener ugc nofollow" target="_blank"> Express </a>ã€å¯¹ç¯å¢ƒå˜é‡ä½¿ç”¨<a class="ae ks" href="https://www.npmjs.com/package/dotenv" rel="noopener ugc nofollow" target="_blank"> dotenv </a>ã€å¯¹éå®˜æ–¹çš„ChatGPT APIä½¿ç”¨(ç›´åˆ°OpenAPIå‘å¸ƒå®˜æ–¹çš„å…¬å…±API)ã€‚</p><p id="ed05" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">OpenAPIæœ€è¿‘ä¸ºChatGPTå¢åŠ äº†CloudFlareä¿æŠ¤ï¼Œä½¿å¾—ä½¿ç”¨éå®˜æ–¹APIå˜å¾—æ›´åŠ å›°éš¾ã€‚è¯¥åº“(å¯é€‰)åœ¨å¼•æ“ç›–ä¸‹ä½¿ç”¨<a class="ae ks" href="https://www.npmjs.com/package/puppeteer" rel="noopener ugc nofollow" target="_blank">æœ¨å¶å¸ˆ</a>è‡ªåŠ¨ç»•è¿‡è¿™äº›ä¿æŠ¤â€”æ‚¨éœ€è¦åšçš„å°±æ˜¯åœ¨ä¸€ä¸ªã€‚ç¯å¢ƒæ–‡ä»¶ã€‚</p><h2 id="ba3c" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ç¬¬1æ­¥:æœåŠ¡å™¨</h2><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="32f2" class="oe ly in nm b be of og l oh oi">import { ChatGPTAPI, getOpenAIAuth } from "chatgpt";<br/>import * as dotenv from "dotenv";<br/>dotenv.config();<br/>import express from "express";<br/><br/>const app = express();<br/>app.use(express.json());<br/>const port = 3001;<br/><br/>async function getAnswer(question) {<br/>  // use puppeteer to bypass cloudflare (headful because of captchas)<br/>  const openAIAuth = await getOpenAIAuth({<br/>    email: process.env.OPENAI_EMAIL,<br/>    password: process.env.OPENAI_PASSWORD<br/>    // isGoogleLogin: true // uncomment this if using google auth<br/>  })<br/><br/>  const api = new ChatGPTAPI({ ...openAIAuth })<br/>  await api.initSession()<br/><br/>  // send a message and wait for the response<br/>  const response = await api.sendMessage(question);<br/><br/>  // response is a markdown-formatted string<br/>  return response; <br/>}<br/><br/>// GET<br/>app.get("/api", async (req, res) =&gt; {<br/>  res.send({<br/>    question: "What is the answer to life, the universe, and everything?",<br/>    answer: "42!",<br/>  });<br/>});<br/><br/>// POST<br/>app.post("/api", async (req, res) =&gt; {<br/>  // Get the body from the request<br/>  const { body } = req;<br/>  console.log(body.question); // debug<br/>  res.send({<br/>    question: body.question,<br/>    answer: await getAnswer(body.question),<br/>  });<br/>});<br/><br/>app.listen(port, () =&gt; {<br/>  console.log(`Example app listening on port ${port}`);<br/>});</span></pre><p id="6dea" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">åº”ç”¨ç¼–ç¨‹æ¥å£æœåŠ¡å™¨ä»£ç æœ¬èº«æ˜¯éå¸¸è‡ªæ˜çš„ã€‚å®ƒæ¥æ”¶è¯·æ±‚æ­£æ–‡ä¸­çš„ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ChatGPTå°†å…¶å‘é€åˆ°OpenAIæœåŠ¡å™¨ï¼Œç­‰å¾…ç­”æ¡ˆï¼Œå¹¶ä»¥è¿™ç§å“åº”æ ¼å¼ä¸ºä¸¤è€…æä¾›æœåŠ¡:</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="f374" class="oe ly in nm b be of og l oh oi">{<br/>    "question": "what is the first letter of the alphabet?",<br/>    "answer": {<br/>        "conversationId": someId,<br/>        "messageId": someOtherId,<br/>        "response": "The first letter of the alphabet is \"A.\""<br/>    }<br/>}</span></pre><h2 id="e0d5" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ç¬¬2æ­¥:OpenAPIè§„èŒƒ</h2><p id="9054" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">WunderGraphçš„å·¥ä½œæ–¹å¼æ˜¯å¯¹æ•°æ®æºè¿›è¡Œå†…çœï¼Œå¹¶å°†å®ƒä»¬æ•´åˆåˆ°ä¸€ä¸ªç»Ÿä¸€çš„è™šæ‹Ÿå›¾å½¢ä¸­ï¼Œç„¶åæ‚¨å¯ä»¥åœ¨è¯¥å›¾å½¢ä¸Šå®šä¹‰æ“ä½œï¼Œå¹¶é€šè¿‡JSON-over-RPCæ¥æä¾›ç»“æœã€‚ä¸ºäº†è®©è¿™ç§å†…çœåœ¨REST APIä¸Šå‘æŒ¥ä½œç”¨ï¼Œæ‚¨å°†éœ€è¦OpenAPI(æ‚¨ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºswag)è§„èŒƒã€‚</p><p id="aeab" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">OpenAPI/swagè§„èŒƒæ˜¯RESTful APIçš„å¯è¯»æè¿°ã€‚è¿™åªæ˜¯ä¸€ä¸ªJSONæˆ–YAMLæ–‡ä»¶ï¼Œæè¿°äº†APIä½¿ç”¨çš„æœåŠ¡å™¨ã€å®ƒçš„èº«ä»½éªŒè¯æ–¹æ³•ã€æ¯ä¸ªç«¯ç‚¹çš„åŠŸèƒ½ã€æ¯ä¸ªç«¯ç‚¹éœ€è¦çš„å‚æ•°/è¯·æ±‚ä½“çš„æ ¼å¼ä»¥åŠæ¯ä¸ªç«¯ç‚¹è¿”å›çš„å“åº”æ¨¡å¼ã€‚</p><p id="a027" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">å¹¸è¿çš„æ˜¯ï¼Œä¸€æ—¦ä½ çŸ¥é“è¯¥åšä»€ä¹ˆï¼Œå†™è¿™ä¸ªå¹¶ä¸å¤ªéš¾ï¼Œæœ‰å‡ ä¸ªåº“å¯ä»¥ä½¿å®ƒè‡ªåŠ¨åŒ–ã€‚</p><p id="060a" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">è¿™æ˜¯æˆ‘ä»¬APIçš„OpenAPI V3è§„èŒƒï¼Œåœ¨JSONä¸­ã€‚</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="c2ba" class="oe ly in nm b be of og l oh oi">{<br/>  "openapi": "3.0.0",<br/>  "info": {<br/>    "title": "express-api-for-chatgpt",<br/>    "version": "1.0.0",<br/>    "license": {<br/>      "name": "ISC"<br/>    },<br/>    "description": "Specification JSONs: [v2](/api-spec/v2), [v3](/api-spec/v3)."<br/>  },<br/>  "servers": [<br/>    {<br/>      "url": "http://localhost:3001"<br/>    }<br/>  ],<br/>  "paths": {<br/>    "/api": {<br/>      "get": {<br/>        "summary": "/api",<br/>        "responses": {<br/>          "200": {<br/>            "description": "OK",<br/>            "content": {<br/>              "application/json": {<br/>                "schema": {<br/>                  "type": "object",<br/>                  "properties": {<br/>                    "question": {<br/>                      "type": "string",<br/>                      "description": "The question to be asked",<br/>                      "example": "What is the answer to life, the universe, and everything?"<br/>                    },<br/>                    "answer": {<br/>                      "type": "string",<br/>                      "description": "The answer",<br/>                      "example": "42!"<br/>                    }<br/>                  }<br/>                }<br/>              }<br/>            }<br/>          }<br/>        },<br/>        "tags": []<br/>      },<br/>      "post": {<br/>        "summary": "/api",<br/>        "requestBody": {<br/>          "required": true,<br/>          "content": {<br/>            "application/json": {<br/>              "schema": {<br/>                "type": "object",<br/>                "properties": {<br/>                  "question": {<br/>                    "type": "string",<br/>                    "description": "The question to be asked",<br/>                    "example": "What is the answer to life, the universe, and everything?"<br/>                  }<br/>                }<br/>              }<br/>            }<br/>          }<br/>        },<br/>        "responses": {<br/>          "200": {<br/>            "description": "OK",<br/>            "content": {<br/>              "application/json": {<br/>                "schema": {<br/>                  "type": "object",<br/>                  "properties": {<br/>                    "question": {<br/>                      "type": "string",<br/>                      "example": "what is the first letter of the alphabet?"<br/>                    },<br/>                    "answer": {<br/>                      "type": "object",<br/>                      "properties": {<br/>                        "conversationId": {<br/>                          "type": "string",<br/>                          "example": "someId"<br/>                        },<br/>                        "messageId": {<br/>                          "type": "string",<br/>                          "example": "someOtherId"<br/>                        },<br/>                        "response": {<br/>                          "type": "string",<br/>                          "example": "The first letter of the alphabet is A."<br/>                        }<br/>                      }<br/>                    }<br/>                  }<br/>                }<br/>              }<br/>            }<br/>          }<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><h1 id="85ab" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">ç¬¬2éƒ¨åˆ†:Next.js + WunderGraph</h1><h2 id="0ec5" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ç¬¬0æ­¥:å¿«é€Ÿå…¥é—¨</h2><p id="9e3a" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe nj nk nl nm b">create-wundergraph-app</code> CLIè®¾ç½®Next.jså®¢æˆ·ç«¯å’ŒWunderGraph BFFã€‚CDè¿›å…¥é¡¹ç›®æ ¹ç›®å½•(åœ¨æ‚¨çš„Expressåç«¯ç›®å½•ä¸‹)ï¼Œå¹¶é”®å…¥:</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="94b7" class="oe ly in nm b be of og l oh oi">npx create-wundergraph-app frontend -E nextjs</span></pre><p id="2ade" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ç„¶åï¼Œè¿›å…¥æ‚¨åˆšæ‰è¦æ±‚CLIåˆ›å»ºçš„ç›®å½•:</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="a007" class="oe ly in nm b be of og l oh oi">cd frontend</span></pre><p id="eaa5" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">å®‰è£…ä¾èµ–é¡¹ï¼Œå¹¶å¯åŠ¨:</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="091a" class="oe ly in nm b be of og l oh oi">npm i &amp;&amp; npm start</span></pre><p id="f487" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">è¿™å°†å¯åŠ¨WunderGraphå’ŒNext.jsæœåŠ¡å™¨(åˆ©ç”¨<code class="fe nj nk nl nm b">npm-run-all</code>åŒ…)ï¼Œåœ¨<code class="fe nj nk nl nm b">localhost:3000</code>ä¸ºæ‚¨æä¾›ä¸€ä¸ªå¸¦æœ‰ç¤ºä¾‹æŸ¥è¯¢çš„Next.jså¯åŠ¨é¡µé¢ã€‚å¦‚æœä½ çœ‹åˆ°äº†ï¼Œä¸€åˆ‡éƒ½æ­£å¸¸ã€‚</p><h2 id="df6d" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">æ­¥éª¤1:è®¾ç½®WunderGraph</h2><p id="e07d" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">WunderGraphå¯ä»¥å°†ä½ èƒ½æƒ³åˆ°çš„å‡ ä¹ä»»ä½•æ•°æ®æºâ€”â€”å¾®æœåŠ¡ã€æ•°æ®åº“ã€APIâ€”â€”å†…çœåˆ°ä¸€ä¸ªå®‰å…¨çš„ã€ç±»å‹å®‰å…¨çš„JSON-over-RPC APIä¸­ï¼›OpenAPI RESTã€GraphQLã€PlanetScaleã€Faunaã€MongoDBç­‰ç­‰ï¼Œä»¥åŠä»»ä½•Postgres/SQLite/MySQLæ•°æ®åº“ã€‚</p><p id="824a" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ‰€ä»¥è®©æˆ‘ä»¬å¼€é—¨è§å±±ã€‚åœ¨<code class="fe nj nk nl nm b">.wundergraph</code>ç›®å½•ä¸­æ‰“å¼€<code class="fe nj nk nl nm b">wundergraph.config.ts</code>ï¼Œæ·»åŠ æˆ‘ä»¬çš„RESTç«¯ç‚¹ä½œä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ‰€ä¾èµ–çš„ä¸€ä¸ªæ•°æ®æºï¼Œä¸€ä¸ªWunderGraphåº”è¯¥åçœçš„æ•°æ®æºã€‚</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="27fe" class="oe ly in nm b be of og l oh oi">const chatgpt = introspect.openApi({<br/> apiNamespace: 'chatgpt',<br/> source: {<br/>   kind: 'file',<br/>   filePath: './chatgpt-spec.json', // path to your openAPI spec file<br/> },<br/> requestTimeoutSeconds: 30, // optional<br/>  })ty<br/><br/>// add this data source to your config like a dependency<br/>configureWunderGraphApplication({<br/> apis: [chatgpt],<br/>});<br/>//...</span></pre><p id="1656" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä¸€ä¸ªçœŸå®çš„åº”ç”¨ç¨‹åºå½“ç„¶ä¼šæœ‰ä¸æ­¢ä¸€ä¸ªRESTç«¯ç‚¹ï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·å®šä¹‰å®ƒä»¬ã€‚åœ¨è¿™é‡Œæ£€æŸ¥WunderGraphå¯ä»¥è‡ªçœçš„ä¸åŒç±»å‹çš„æ•°æ®æºï¼Œç„¶ååœ¨æ‚¨çš„é…ç½®ä¸­ç›¸åº”åœ°å®šä¹‰å®ƒä»¬ã€‚</p><p id="3dc4" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä¸€æ—¦ä½ è¿è¡Œäº†npm startï¼ŒWunderGraphä¼šè‡ªåŠ¨ç›‘æ§ä½ çš„é¡¹ç›®ç›®å½•ä¸­çš„å¿…è¦æ–‡ä»¶ï¼Œæ‰€ä»¥åªè¦ç‚¹å‡»è¿™é‡Œçš„saveå°±ä¼šè®©ä»£ç ç”Ÿæˆå™¨è¿è¡Œï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªä½ å¯ä»¥æ£€æŸ¥çš„æ¨¡å¼(å¦‚æœä½ æƒ³çš„è¯)â€”â€”åœ¨<code class="fe nj nk nl nm b">/.wundergraph/generated</code>ä¸­çš„<code class="fe nj nk nl nm b">wundergraph.app.schema.graphql </code>æ–‡ä»¶ã€‚</p><h2 id="3f1e" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">æ­¥éª¤2:ä½¿ç”¨GraphQLå®šä¹‰æ“ä½œ</h2><p id="46d5" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">è¿™æ˜¯æˆ‘ä»¬åœ¨GraphQLä¸­ç¼–å†™æŸ¥è¯¢/å˜å¼‚æ¥æ“ä½œWunderGraphç”Ÿæˆçš„è™šæ‹Ÿå›¾å½¢å±‚ï¼Œå¹¶è·å¾—æˆ‘ä»¬æƒ³è¦çš„æ•°æ®çš„éƒ¨åˆ†ã€‚</p><p id="a4c5" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ‰€ä»¥è½¬åˆ°<code class="fe nj nk nl nm b">./wundergraph/operations</code>å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„GraphQLæ–‡ä»¶ã€‚æˆ‘ä»¬å°±å«å®ƒ<code class="fe nj nk nl nm b">GetAnswer.graphql</code>ã€‚</p><p id="b880" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ‰€ä»¥è¿™æ˜¯æˆ‘ä»¬çš„å˜ç§ï¼Œå‘æˆ‘ä»¬çš„Express APIå‘é€ä¸€ä¸ªé—®é¢˜(ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²)ï¼Œå¹¶æ¥æ”¶ä¸€ä¸ªå›ç­”(åŒ…æ‹¬åŸå§‹é—®é¢˜ï¼Œç”¨äºæ‚¨çš„UIï¼Œæˆ–è€…åªæ˜¯æ—¥å¿—)ã€‚</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="e7f2" class="oe ly in nm b be of og l oh oi">mutation ($question: String!) {<br/>  chatgpt_postApi(postApiInput: { question: $question }) {<br/>    question<br/>    answer {<br/>      conversationId<br/>      messageId<br/>      response<br/>    }<br/>  }<br/>}</span></pre><p id="9799" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ³¨æ„åå­—é—´è·ï¼</p><p id="7dd6" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä¸­ä¸ºå…¶ä»–æ•°æ®æºå®šä¹‰æ•°æ®æå–æ“ä½œã€‚graphqlæ–‡ä»¶å°±åƒè¿™ä¸ªã€‚</p><p id="6eeb" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ç‚¹å‡»saveï¼ŒWunderGraphçš„ä»£ç ç”Ÿæˆéƒ½åœ¨åå°å·¥ä½œ(åªè¦å®ƒçš„æœåŠ¡å™¨åœ¨è¿è¡Œï¼Œå®ƒå°±ä¼šåœ¨åå°å·¥ä½œ)ï¼Œç”Ÿæˆç±»å‹å®‰å…¨çš„ã€ç‰¹å®šäºå®¢æˆ·ç«¯çš„æ•°æ®è·å–Reacté’©å­(<code class="fe nj nk nl nm b">useQuery, useMutation</code>ç­‰ç­‰ã€‚)ä¸ºä½ é£å¥”(ä½¿ç”¨ç»´å°”å¡å°”çš„ã€Šå¼•æ“ç›–ä¸‹çš„SWRã€‹)ã€‚è¿™äº›æ˜¯æˆ‘ä»¬å°†åœ¨Next.jså‰ç«¯ä½¿ç”¨çš„ã€‚</p><h2 id="0e49" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">æ­¥éª¤3:æ„å»ºç”¨æˆ·ç•Œé¢</h2><p id="e498" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">å¯¹äºä¸€ä¸ªæœ€å°å¯è¡Œçš„äº§å“ï¼Œæˆ‘ä»¬çš„UIç¡®å®åªéœ€è¦ä¸¤æ ·ä¸œè¥¿ã€‚ä¸€ä¸ªå†…å®¹åŒºï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå±•ç¤ºä½ çš„è¯¾ç¨‹ã€æ•™ç¨‹æˆ–ä½ æä¾›çš„ä»»ä½•ç±»å‹çš„å†…å®¹ï¼Œä»¥åŠä¸€ä¸ªå¯æŠ˜å çš„èŠå¤©åŠ©æ‰‹/èŠå¤©æœºå™¨äººç•Œé¢â€”â€”å®ƒä½¿ç”¨äº†æˆ‘ä»¬åˆšåˆšè°ˆåˆ°çš„ä¸€ä¸ªé’©å­ï¼Œ<code class="fe nj nk nl nm b">useMutation</code>ã€‚</p><h2 id="893e" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ã€‚/pages/_app.tsx</h2><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="cfb9" class="oe ly in nm b be of og l oh oi">import Head from "next/head";<br/><br/>function MyApp({ Component, pageProps }) {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Head&gt;<br/>        &lt;meta charSet="UTF-8" /&gt;<br/>        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br/>        &lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;<br/>      &lt;/Head&gt;<br/>      &lt;main&gt;<br/>        &lt;Component {...pageProps} /&gt;<br/>      &lt;/main&gt;<br/>    &lt;/&gt;<br/>  );<br/>}<br/>export default MyApp;</span></pre><p id="b99f" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">è¯·æ³¨æ„ï¼Œæˆ‘åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„æ˜¯Tailwindã€‚Tailwindæ˜¯ä¸€ä¸ªéå¸¸æ£’çš„å®ç”¨è‡³ä¸Šçš„CSSï¼Œå¯ä»¥é€šè¿‡å®ƒçš„Play CDNè½»æ¾åœ°é›†æˆåˆ°ä»»ä½•åº”ç”¨ç¨‹åºä¸­(å°½ç®¡ä½ å¯èƒ½æƒ³åˆ‡æ¢åˆ°PostCSSå®ç°è¿›è¡Œç”Ÿäº§)ã€‚</p><h2 id="28af" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ã€‚/pages/index.tsx</h2><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="96c7" class="oe ly in nm b be of og l oh oi">import { NextPage } from "next";<br/>import { withWunderGraph } from "../components/generated/nextjs";<br/>// my components<br/>import ChatHelper from "../components/ChatHelper";<br/>import NavBar from "../components/Header";<br/><br/>const Home: NextPage = () =&gt; {<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;div className="dark:bg-gray-800 min-h-screen"&gt;<br/>        &lt;NavBar /&gt;<br/>        &lt;div className="container flex mx-auto mt-10 h-fit"&gt;<br/>          &lt;div className="bg-gray-300 p-4 rounded-md"&gt;<br/>            {/* page content */}<br/>            &lt;h2 className="font-bold text-xl"&gt; Page content goes here &lt;/h2&gt;<br/>            &lt;div&gt;<br/>{/* video/course content here */}<br/>              &lt;iframe<br/>                className="rounded-lg w-full h-80 mt-4 "<br/>                src="https://www.youtube.com/embed/njX2bu-_Vw4"<br/>                title="YouTube video player"<br/>                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"<br/>                allowFullScreen<br/>              &gt;&lt;/iframe&gt;<br/>            &lt;/div&gt;<br/>            &lt;p className="mt-4"&gt;<br/>              {/* some lipsum here */}            &lt;/p&gt;<br/>          &lt;/div&gt;<br/>          &lt;div className="absolute bottom-0 right-0 m-4"&gt;<br/>            &lt;ChatHelper /&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};<br/><br/>export default withWunderGraph(Home); // for SSR with WunderGraph</span></pre><h2 id="023c" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ã€‚/components/NavBar.tsx</h2><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="90a0" class="oe ly in nm b be of og l oh oi">const NavBar = () =&gt; {<br/>  return (<br/>    &lt;header className="bg-gray-400 p-4 shadow-md"&gt;<br/>      &lt;div className="container mx-auto flex items-center justify-between"&gt;<br/>        &lt;a href="#" className="font-bold text-xl"&gt;<br/>          My Website<br/>        &lt;/a&gt;<br/>        &lt;nav&gt;<br/>          &lt;a href="#" className="px-4 hover:underline"&gt;<br/>            Home<br/>          &lt;/a&gt;<br/>          &lt;a href="#" className="px-4 hover:underline"&gt;<br/>            FAQ<br/>          &lt;/a&gt;<br/>        &lt;/nav&gt;<br/>      &lt;/div&gt;<br/>    &lt;/header&gt;<br/>  );<br/>};<br/><br/>export default NavBar;</span></pre><p id="e16a" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯¼èˆªæ¡å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼›è¿™åªæ˜¯ä¸€ä¸ªæˆ‘åœ¨å¸ƒå±€æ—¶æ”¾å…¥æˆ‘çš„æ‰€æœ‰é¡¹ç›®ä¸­çš„ä¸€ä¸ªå¸¸ç”¨ç»„ä»¶ï¼Œä»¥ä½¿äº‹æƒ…çœ‹èµ·æ¥æ›´æ¼‚äº®ğŸ˜…ã€‚</p><h2 id="5ad6" class="no ly in bd lz np nq dn md nr ns dp mh lt nt nu mj lu nv nw ml lv nx ny mn nz bi translated">ã€‚/components/ChatHelper.tsx</h2><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="630e" class="oe ly in nm b be of og l oh oi">import React, { useState } from "react";<br/>import { useMutation, useQuery } from "../components/generated/nextjs";<br/><br/>const ChatHelper = () =&gt; {<br/>  const placeholderAnswer = "Hi! What did you want to learn about today?";<br/><br/>  const [isExpanded, setIsExpanded] = useState(false);<br/>  const [input, setInput] = useState("");<br/><br/><br/>  const { data, isMutating, trigger } = useMutation({<br/>    operationName: "GetAnswer",<br/>  });<br/><br/>  return (<br/>    &lt;div<br/>      className={`relative rounded-lg bg-white shadow-md ${<br/>        isExpanded ? "expanded" : "collapsed"<br/>      }`}<br/>    &gt;<br/>      &lt;button<br/>        className="p-4 absolute top-0 right-0 mr-2"<br/>        onClick={() =&gt; setIsExpanded(!isExpanded)}<br/>      &gt;<br/>        &lt;span&gt;{isExpanded ? "âŒ" : "ğŸ’¬"}&lt;/span&gt;<br/>      &lt;/button&gt;<br/>      &lt;div className="max-w-lg max-h-lg p-4"&gt;<br/>        {isExpanded &amp;&amp; (<br/>          &lt;&gt;<br/>            &lt;h2 className="text-lg font-bold"&gt;Helper&lt;/h2&gt;<br/><br/>            &lt;p id="answer" className="text-blue-500 font-bold"&gt;<br/>              {data ? data.chatgpt_postApi?.answer?.response : placeholderAnswer}<br/>            &lt;/p&gt;<br/><br/>            &lt;p id="ifLoading" className="text-green-500 font-bold font-italics"&gt;<br/>              {isMutating ? "ChatGPT is thinking..." : ""}<br/>            &lt;/p&gt;<br/><br/>            &lt;form<br/>              onSubmit={(event) =&gt; {<br/>                event.preventDefault();<br/>                if (input) {<br/>                  trigger({<br/>                    question: input,<br/>                  });<br/>                }<br/>              }}ty<br/>            &gt;<br/>              &lt;input<br/>                className="border rounded-md p-2 w-full"<br/>                type="text"<br/>                placeholder="Your question here."<br/>                onChange={(event) =&gt; {<br/>                  const val = event.target.value;<br/>                  if (val) {<br/>                    // set question<br/>                    setInput(val);<br/>                  }<br/>                }}<br/>              /&gt;<br/>              &lt;button className="bg-blue-500 text-white rounded-md p-2 mt-2"&gt;<br/>                Help me, Obi-Wan Kenobi.<br/>              &lt;/button&gt;<br/>            &lt;/form&gt;<br/>          &lt;/&gt;<br/>        )}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};<br/><br/>export default ChatHelper;</span></pre><p id="bf62" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">åªæœ‰å½“æ‚¨åœ¨è¡¨å•æäº¤ä¸Šç”¨è¾“å…¥(å³é—®é¢˜)è°ƒç”¨<code class="fe nj nk nl nm b">trigger </code>æ—¶ï¼Œæ‰ä¼šè°ƒç”¨<code class="fe nj nk nl nm b">useMutation</code>é’©å­ï¼›å…¶å°†åœ¨Expressåç«¯ä¸­ä½œä¸ºè¯·æ±‚ä¸»ä½“ç»“æŸ)ã€‚è¿™å¾ˆç›´è§‚ï¼Œä½†æ˜¯å…³äº<code class="fe nj nk nl nm b">trigger</code>çš„æ›´å¤šé—®é¢˜ï¼Œè¯·æŸ¥çœ‹SWRçš„æ–‡æ¡£<a class="ae ks" href="https://swr.vercel.app/docs/api" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>ã€‚</p><p id="c9da" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">ä½ å®Œäº†ï¼å¦‚æœChatGPTæœåŠ¡å™¨çš„è´Ÿè½½ä¸æ˜¯å¾ˆé‡ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿè¾“å…¥ä¸€ä¸ªé—®é¢˜ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œç„¶ååœ¨ã€‚</p><h1 id="10e2" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">ä»è¿™é‡Œå»å“ªé‡Œï¼Ÿ</h1><p id="ca76" class="pw-post-body-paragraph kw kx in kz b la mp jo lc ld mq jr lf lt mr li lj lu ms lm ln lv mt lq lr ls ig bi translated">å¸Œæœ›æœ¬æ•™ç¨‹èƒ½å¤Ÿè®©æ‚¨äº†è§£å¦‚ä½•å°†ChatGPTç”¨äºæ‚¨è‡ªå·±çš„ç”¨ä¾‹ï¼Œç¼–å†™APIå¹¶ä¸ºå…¶ç”ŸæˆOpenAPIæ–‡æ¡£ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥å°†å®ƒä½œä¸ºBFFä¸WunderGraphä¸€èµ·ä½¿ç”¨ï¼Œä½¿æŸ¥è¯¢å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚</p><p id="f9d2" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ¥ä¸‹æ¥ï¼Œæ‚¨å¯èƒ½ä¼šæƒ³è¦æ·»åŠ ä¸€ä¸ª<code class="fe nj nk nl nm b">&lt;ul&gt;</code>åˆ—è¡¨ï¼Œåˆ—å‡ºå›ºå®š/é¢„å…ˆé€‰æ‹©çš„é—®é¢˜(åŸºäºå½“å‰è¯¾ç¨‹)ï¼Œå•å‡»è¿™äº›é—®é¢˜æ—¶ï¼Œå®ƒä»¬ä¼šä½œä¸ºé—®é¢˜ä¼ é€’ç»™<code class="fe nj nk nl nm b">&lt;ChatHelper&gt;</code>ç»„ä»¶ï¼Œè¿™æ ·æ‚¨çš„å­¦ç”Ÿå°±æœ‰äº†ä¸€ä¸ªå»ºè®®åˆ—è¡¨ï¼ŒçŸ¥é“ä»å“ªé‡Œå¼€å§‹æé—®ã€‚</p><p id="f921" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">é™¤æ­¤ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ç»“æœå¯¹è±¡ä¸­ä½¿ç”¨<code class="fe nj nk nl nm b">conversationId </code>å’Œ<code class="fe nj nk nl nm b">messageId </code>ï¼Œå¹¶å°†å®ƒä»¬åˆ†åˆ«ä½œä¸º<code class="fe nj nk nl nm b">conversationId </code>å’Œ<code class="fe nj nk nl nm b">parentMessageId </code>ä¼ é€’ç»™<code class="fe nj nk nl nm b">sendMessage </code>æ¥è·Ÿè¸ªä¸æœºå™¨äººçš„å¯¹è¯ï¼Œå¹¶ä¸ºå…¶æ·»åŠ å¯¹ä¹‹å‰æ‰€æé—®é¢˜çš„æ„è¯†â€”â€”è¿™æ ·æ‚¨çš„å­¦ç”Ÿå°±å¯ä»¥æå‡ºåç»­é—®é¢˜ä»¥è·å¾—æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œå¹¶ä½¿å¯¹è¯æ›´åŠ è‡ªç„¶ã€‚</p><pre class="kd ke kf kg gt oa nm ob bn oc od bi"><span id="c1aa" class="oe ly in nm b be of og l oh oi"><br/>// send a follow-up<br/>res = await api.sendMessage('Can you expand on that?', {<br/>  conversationId: res.conversationId,<br/>  parentMessageId: res.messageId<br/>})<br/>console.log(res.response)<br/><br/>// send another follow-up<br/>res = await api.sendMessage('What were we talking about?', {<br/>  conversationId: res.conversationId,<br/>  parentMessageId: res.messageId<br/>})</span></pre><p id="b520" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æ­¤å¤–ï¼Œè¯·ç•™æ„<code class="fe nj nk nl nm b">chatgpt</code>åº“æœ¬èº«ï¼Œå› ä¸ºOpenAIç»å¸¸æ”¹å˜ChatGPTçš„ç ”ç©¶é¢„è§ˆç‰ˆçš„å·¥ä½œæ–¹å¼ï¼Œæ‰€ä»¥æ‚¨éœ€è¦ç¡®ä¿æ‚¨çš„ä»£ç è·Ÿä¸Šéå®˜æ–¹APIçš„æ›´æ–°ã€‚</p><p id="17fe" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">æœ€åï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºWunderGraphçš„ä¼—å¤šç”¨ä¾‹ï¼Œå¯ä»¥æŸ¥çœ‹ä»–ä»¬çš„Discordç¤¾åŒº<a class="ae ks" href="https://wundergraph.com/discord" rel="noopener ugc nofollow" target="_blank"> <em class="ky">è¿™é‡Œ</em> </a>ï¼</p></div></div>    
</body>
</html>