<html>
<head>
<title>What Is Interface Declaration Merging in TypeScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是TypeScript中的接口声明合并？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-interface-declaration-merging-in-typescript-9a9457a6d536?source=collection_archive---------3-----------------------#2022-11-13">https://javascript.plainenglish.io/what-is-interface-declaration-merging-in-typescript-9a9457a6d536?source=collection_archive---------3-----------------------#2022-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b6371067d3de358761ddc07b045fb0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H7knw8pAvxWRscjuylUYVQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/es/@orwhat?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Richard Horvath</a> on <a class="ae kc" href="https://unsplash.com/s/photos/abstract?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="de43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可能会发现自己需要更新一个已经存在的<strong class="kf ir">界面；然而</strong>，这伴随着在其他地方打破它的用法，所以你怎么做？</p><p id="8cc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这正是我们今天文章要回答的问题！</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="ba27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="li">文章最初发表于</em> <a class="ae kc" href="https://upmostly.com/typescript/what-is-interface-declaration-merging-in-typescript" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="li">此处</em> </strong> </a> <em class="li">。</em></p><h1 id="e59d" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">介绍</h1><p id="d405" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">如果你还不熟悉<strong class="kf ir">接口</strong>的概念或者它们在TypeScript中是什么，一定要先看看<a class="ae kc" href="https://upmostly.com/tutorials/what-are-interfaces-in-typescript" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">这篇</strong> </a>文章，因为<strong class="kf ir">接口声明合并</strong>直接链接到它们。</p><p id="59ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们将继续文章的其余部分。</p><h1 id="3424" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">接口声明合并指的是什么？</h1><p id="c107" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">处理文章开头提到的问题的最好方法是通过<strong class="kf ir"> IDF </strong>或<strong class="kf ir">接口声明合并</strong>。</p><p id="b66a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">接口声明合并</strong>允许我们做的是，每当我们有两个同名的<strong class="kf ir">接口</strong>时，TypeScript编译器会尝试将这两个接口的属性合并到一个它们共享名称的接口中。</p><p id="cba9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript允许合并多种类型，如<strong class="kf ir">作为接口</strong>、<strong class="kf ir">枚举</strong>、<strong class="kf ir">命名空间</strong>等。我们不能合并的一个显著例子是<strong class="kf ir">类</strong>。为此，我们将需要使用一个叫做<strong class="kf ir"> Mixins </strong>的东西(这将在以后的一篇关于<a class="ae kc" href="https://upmostly.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">直到</strong> </a>的文章中讨论)。</p><h1 id="30ce" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">接口声明合并的示例</h1><p id="21d8" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">我们将通过代码示例尝试涵盖所有可能的合并情况:</p><pre class="mm mn mo mp gt mq mr ms bn mt mu bi"><span id="313f" class="mv lk iq mr b be mw mx l my mz">interface Car {<br/>  model: string;<br/>  engineSize: number;<br/>}<br/><br/>interface Car {<br/>  manufacturer: string;<br/>}<br/><br/>interface Car {<br/>  color: string;<br/>}<br/><br/>const car: Car = {<br/>  color: 'red',<br/>  engineSize: 1968,<br/>  manufacturer: 'BMW',<br/>  model: 'M4',<br/>  numSeats: 4, // `numSeats` property is not specified<br/>};</span></pre><p id="d450" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为所有声明的接口共享相同的名称，所以它们将被合并到同一个名称下，同时共享集合属性。</p><p id="2845" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，具有相同名称的所有属性应该是相同的类型。否则，将会引发编译错误，如下例所示:</p><pre class="mm mn mo mp gt mq mr ms bn mt mu bi"><span id="ff4e" class="mv lk iq mr b be mw mx l my mz">interface Car {<br/>  model: string;<br/>  engineSize: number;<br/>}<br/><br/>interface Car {<br/>  manufacturer: string;<br/>}<br/><br/>interface Car {<br/>  color: string;<br/>  numSeats: string;<br/>}<br/><br/>interface Car {<br/>  numSeats: number; // Error: Subsequent property declarations must have the same type.  Property 'numSeats' must be of type 'string', but here has type 'number'.ts(2717)<br/>}<br/><br/>const car: Car = {<br/>  color: 'red',<br/>  engineSize: 1968,<br/>  manufacturer: 'BMW',<br/>  model: 'M4',<br/>  numSeats: 4,<br/>};</span></pre><p id="1762" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们来看看具有相同属性名称的<strong class="kf ir">接口</strong>，其类型是函数:</p><pre class="mm mn mo mp gt mq mr ms bn mt mu bi"><span id="959a" class="mv lk iq mr b be mw mx l my mz">interface Car {<br/>  model: string;<br/>  engineSize: number;<br/>  manufacturer: string;<br/>  color: string;<br/>}<br/><br/>interface Car {<br/>  start(param: string);<br/>}<br/><br/>interface Car {<br/>  start(param: number);<br/>}<br/><br/>const bmw: Car = {<br/>  model: 'M4',<br/>  manufacturer: 'BMW',<br/>  engineSize: 2993,<br/>  color: 'white',<br/>  start: (param) =&gt; param,<br/>};<br/><br/>bmw.start(2) // `start(param: number)` will be used<br/><br/>bmw.start('3') // `start(param: string)` will be used</span></pre><p id="43c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当合并包含具有相同签名的函数的接口时，最后声明的接口中的函数出现在合并接口的顶部，而第一个接口中声明的函数出现在下面:</p><pre class="mm mn mo mp gt mq mr ms bn mt mu bi"><span id="3b37" class="mv lk iq mr b be mw mx l my mz">interface Car {<br/>  start(param: string);<br/>}<br/><br/>interface Car {<br/>  start(param: any);<br/>}<br/><br/>interface Car {<br/>  start(param: number);<br/>  start(param: boolean);<br/>}<br/><br/>// This is how the final merged interface looks like<br/>interface Car {<br/>  // functions in the last interface appear at the top<br/>  start(param: number);<br/>  start(param: boolean);<br/><br/>  // function in the middle interface appears next<br/>  start(param: any): number;<br/><br/>  // function in the first interface appears last<br/>  start(param: string): string;<br/>}</span></pre><p id="0e05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">原因是后来声明的接口比最初声明的接口优先级高。</p><p id="6e9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们考虑上面的例子，<code class="fe na nb nc mr b">start(param: string)</code>将永远不会被调用，因为在最终合并的<code class="fe na nb nc mr b">Car</code>接口中，start(param: any): number方法声明在start(param: string): string方法声明之前，并且由于<code class="fe na nb nc mr b">any</code>可以代表任何类型，所以即使将<code class="fe na nb nc mr b">string</code>作为参数传递，它也会被调用。</p><p id="8c2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了同名函数参数有一个<a class="ae kc" href="https://www.digitalocean.com/community/tutorials/typescript-string-literal-types" rel="noopener ugc nofollow" target="_blank">字符串文字</a>作为<strong class="kf ir">类型</strong>的情况之外，所有接口都是如此。它遵循上述相同的顺序，但是字符串类型的函数被赋予更高的优先级，因此，通过<strong class="kf ir">声明合并</strong>，出现在顶部。</p><p id="3cbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如上所述，后面接口中的字符串文字将出现在初始接口之前。</p><h1 id="7e69" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">摘要</h1><p id="5ea3" class="pw-post-body-paragraph kd ke iq kf b kg mh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">我希望你喜欢这篇文章，并更好地理解什么是<strong class="kf ir">接口声明合并</strong>，何时使用它会有帮助，更重要的是，我们将如何在我们已经存在的<strong class="kf ir">接口</strong>中使用它。</p><p id="f104" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还要注意的是，在React内部使用TypeScript时，<strong class="kf ir">接口</strong>非常方便；您可以在这里查看一篇文章，该文章强调了使用TypeScript创建一个新的React项目，甚至是将TypeScript添加到一个已经存在的React项目中。</p><p id="af0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="li">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="li">plain English . io</em></strong></a><em class="li">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="li">免费周报</em> </strong> </a> <em class="li">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="li">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="li">LinkedIn</em></strong></a><em class="li"/><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="li">YouTube</em></strong></a><em class="li"/><a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="li">不和</em> </strong> </a> <em class="li">。对增长黑客感兴趣？检查</em> <a class="ae kc" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="li">电路</em> </strong> </a> <em class="li">。</em></p></div></div>    
</body>
</html>