<html>
<head>
<title>5 Essential Hooks You Need to Know in 2022 — React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2022年你需要知道的5个关键问题——做出反应</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-essential-hooks-you-need-to-know-in-2022-react-42aac69f4a62?source=collection_archive---------6-----------------------#2022-01-31">https://javascript.plainenglish.io/5-essential-hooks-you-need-to-know-in-2022-react-42aac69f4a62?source=collection_archive---------6-----------------------#2022-01-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="89af" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解这些挂钩在您的新功能组件中的使用有多简单方便。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7bb038d935bc7832efa07d5b7cd771e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PK4rqQutXTD7jLT33zKvRA.png"/></div></div></figure><p id="fff0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如今，我们中的许多人都在使用React开发前端应用程序，React开发人员的市场也在不断增长。一些公司正在使用遗留的React开发过程，由此编写基于类的组件仍然是他们的首选。但是从React 16.8开始，作为React开发人员，您可以编写纯功能组件，并使用React库提供的挂钩来实现您希望使用基于类的组件实现的相同开发目标。</p><p id="dc3d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您对切换/升级React库犹豫不决，现在是最好的时机。现在是2022年，让我们不断更新我们的开发工具，提升我们的应用程序性能。</p><h1 id="8ed6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">钩子法则</h1><p id="b2c3" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">钩子只是普通的JavaScript函数，但是每个工具都有自己的指导方针和一套规则，为了让工具工作良好，钩子就是其中之一。钩子只有两个简单的规则。</p><ul class=""><li id="9cbe" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">只调用顶层的钩子<strong class="kt ir">。不要在循环、条件或嵌套函数中调用钩子。</strong></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/b32cfca0aea686ed4900331e6039b8d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJ_nkJN4NTLMJGCmB4r4Lw.png"/></div></div></figure><ul class=""><li id="e588" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">只从React函数组件调用钩子<strong class="kt ir">。不要从常规的JavaScript函数中调用钩子。</strong></li></ul><h1 id="4df2" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用状态挂钩</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/ed02930ced31e382a69b8023e8555c55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*km7JvH1MmAb6aG12WRGICQ.png"/></div></figure><p id="32ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> useState </strong>函数接受一个初始值并返回两个值，这两个值可以被解结构为count，这是变量的当前值，以及setCount，这是一个用于更新变量状态的函数。在setCount中，您可以通过向函数传递最新值来直接使用它来更新状态，也可以在setCount函数中获取以前的值并在更新状态之前执行一些操作。</p><p id="c27f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与传统的基于类的组件不同，这里的状态不一定是对象。它可以是您想要的任何数据类型，并且您可以在一个组件中声明多个useState来管理不同DOM元素的状态。</p><h1 id="e6bb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用效果挂钩</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/e84ead060f304d6fcd44498cf7cdb0e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*CPAPWQH7VN87m47DvPDJWQ.png"/></div></figure><p id="fb35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">用useEffect钩子替换componentDidMount函数，在useEffect回调函数的末尾加上方括号([])，保证这个useEffect中的逻辑在你的组件生命周期中只运行一次。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/971bee4e68078d665a474239db4e4bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*vHnlJnEO5GXjSKhcTPUpRA.png"/></div></figure><p id="73b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">删除useEffect回调函数末尾的方括号将在组件中的任何状态发生变化时运行代码。请注意，如果您正在使用它，请不要在您计划运行的useEffect代码块中实现状态变更逻辑，否则，您将陷入无限循环。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/d0a79331cb28d40d71ac5952b122848a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*gLV1mbWNb1lj8ajMtPZrxg.png"/></div></figure><p id="57e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，如果您只想在props中的param变量发生变化时更新某些逻辑，那么您可以将该参数放在useEffect回调函数的方括号([])中，告诉React只有在该参数发生变化时，我才会运行useEffect函数中的代码块。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/c93309f9e4faad478afec2b432a9d7d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*q_siHq7TWuCrLH-C4gCNag.png"/></div></figure><p id="830c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您正在订阅一个API调用，或者有一个观察器或开放的API连接，当组件被销毁时，您需要停止它，您可以通过在useEffect钩子中实现一个返回回调函数来做到这一点。</p><h1 id="3347" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">useRef挂钩</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/ef57e2e23c221ee84f48691982d96eb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7gqEROLBr3tidMmHVh0jjQ.png"/></div></div></figure><p id="ce89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">useRef hook是一个可变值，但它不重新呈现UI。因此，如果你试图实现类似上面的东西，你可以继续点击按钮来增加计数，那么它不会在UI上反映任何变化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/5dbf06e033f96a3d73c4e2c85a032ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*qq5zZNTd5w5YMdA5IzXtcA.png"/></div></figure><p id="2262" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用useRef的一种常见方式是当您需要在函数调用中访问本机元素特性时，比如聚焦输入或对输入进行一些验证。</p><h1 id="f9b4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">useReducer挂钩</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/d72f24fcec30317d1562a0c3bbba6bbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6nYJrDL3rnAJC__n_jkzLA.png"/></div></div></figure><p id="5970" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个钩子看起来很复杂，但它只是使用useState来更新与useReducer钩子相关的变量状态的一种冗余模式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/ea96b6c8a827b2c7e0437617aa2a0569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sAHjc3XRkZOP6j8wigebbA.png"/></div></div></figure><p id="f581" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你一定在想，既然有了useState钩子，为什么还要重新发明轮子呢？有时，您的代码中有非常复杂的逻辑，您需要使用redux模式来管理组件状态，而不是使用useState，因此，如果useState对您的组件来说变得太复杂和混乱，您可能会考虑使用这个钩子。</p><h1 id="8d7b" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">自定义挂钩</h1><p id="c4bc" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">构建您的定制钩子的一个用例是当您使用钩子并在其中实现复杂的逻辑，并在多个组件中重复它们时。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/68364dc4af6ccd5fcf553acb86e74c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*WXSrKvA5Q9vFLXzdHQ82sQ.png"/></div></figure><p id="e960" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">想象一下，如果我需要实现我的用户设置来显示从应用程序的每个组件的数据库中获取的用户名。我可以重构这些重复的代码，并实现一个useNameHook来提取这些重复的代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/e63eff79f95cf385e6042da493118df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*A2n96tSiaKF5D7Cf4BfpSQ.png"/></div></figure><p id="4a69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您可以在任何需要从数据库中获取用户名的地方重用这个useNameHook。</p><h1 id="9806" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">摘要</h1><p id="03bc" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我希望这篇文章能让你明白，在新的功能组件中使用这些钩子是多么的简单和方便。要知道React设计这些钩子并不是为了让我们作为开发人员的生活更加痛苦和艰难，而是为了让我们能够利用它们来让我们的开发人员的生活更加轻松，并构建更高性能的应用程序。如果你对这些钩子有其他有趣的使用案例，请在下面的评论中告诉我，因为我很想看看你们是如何使用它们的。干杯。</p><div class="nf ng gp gr nh ni"><a href="https://medium.com/@devjo/membership" rel="noopener follow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">用我的推荐链接- DevJo加入媒体</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><p id="5a39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nx">更多内容请看</em><a class="ae ny" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nx">plain English . io</em></strong></a><em class="nx">。报名参加我们的</em> <a class="ae ny" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nx">免费周报</em> </strong> </a> <em class="nx">。在我们的</em> <a class="ae ny" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nx">社区</em> </strong> </a> <em class="nx">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>