<html>
<head>
<title>Scrape Glassdoor Job Data Legally W/o Headless Browsers Using JavaScript &amp; Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript和Python在没有无头浏览器的情况下合法地抓取Glassdoor作业数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-scrape-glassdoor-job-data-legally-without-headless-browsers-331ea7c24ebd?source=collection_archive---------14-----------------------#2022-09-22">https://javascript.plainenglish.io/how-to-scrape-glassdoor-job-data-legally-without-headless-browsers-331ea7c24ebd?source=collection_archive---------14-----------------------#2022-09-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2660" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">一个关于合法地从Glassdoor抓取工作列表数据的教程，不需要使用任何类型的无头浏览器或登录网站。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/41b7232050985eaa69648febb37dde6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gCXWn8Ta8tK020Dd.jpg"/></div></div></figure><p id="5653" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Glassdoor存储了超过1亿条评论、薪水和见解；有220万雇主积极向市场发布工作，每月有大约5900万次独立访问。拥有如此多的数据和需求，Glassdoor是工作和公司数据的金矿。</p><p id="bb80" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在今天的教程中，我们将在不使用任何类型的无头浏览器或登录网站的情况下，从Glassdoor收集工作列表数据，从而保持我们的活动合法且符合道德责任。</p><p id="f2ef" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">谈论法律…</p><h1 id="6f45" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">刮玻璃门合法吗？</h1><p id="42e3" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">直截了当的答案是肯定的，只要你不违反一些基本规则，刮Glassdoor就是合法的。</p><p id="b20e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一般来说，Glassdoor不喜欢被刮，正如其<a class="ae mh" href="https://www.glassdoor.com/about/terms.htm#:~:text=or%20to%20scrape" rel="noopener ugc nofollow" target="_blank">使用条款</a>中所述。然而，有一些细微差别，因为你必须接受这些条款，他们会影响你。</p><p id="ce93" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如，创建一个帐户，然后在日志墙后面抓取数据会被认为是非法的，因为你在创建帐户的那一刻就已经同意了<em class="mi">的使用条款</em>。</p><p id="b607" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">也就是说，所有不需要账号就可以访问的页面都被认为是公开的；因此，你刮这些纸是合法的。</p><p id="22d5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">尽管如此，我们还是建议使用一些<a class="ae mh" href="https://www.scraperapi.com/blog/web-scraping-best-practices/" rel="noopener ugc nofollow" target="_blank">最佳实践来确保你尊重网站</a>并且不伤害它的用户。</p><p id="3e6f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">资源:</strong>要获得更全面的解释，请查看我们的<a class="ae mh" href="https://www.scraperapi.com/featured/is-web-scraping-legal/" rel="noopener ugc nofollow" target="_blank">网页抓取合法性指南</a>。</p><h1 id="23c2" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">用JavaScript抓取Glassdoor作业</h1><p id="a359" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">对于这个项目，我们将收集Glassdoor在米兰的兼职工作机会，以提取职位名称、公司招聘和职位发布的链接。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/257c6638a4eda8d49d41767260be95ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PiHqcgf7nUPR7OI2.png"/></div></div></figure><p id="ee44" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这些分类页面是公开的(它们不在任何类型的登录或付费墙后面)，所以我们正在做这个100%白帽子。</p><h1 id="25e2" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">要求</h1><p id="0d1c" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">虽然我们将解释该过程的每一步，但我们假设您已经掌握了基本知识。然而，如果你曾经感到失落或困惑，这里有几个更简单的网络抓取项目，你可以用它们来逐步提高你的技能:</p><ul class=""><li id="89f8" class="mk ml in kq b kr ks ku kv kx mm lb mn lf mo lj mp mq mr ms bi translated"><a class="ae mh" href="https://www.scraperapi.com/blog/web-scraping-javascript-tutorial/" rel="noopener ugc nofollow" target="_blank">带节点的网页抓取。初学者JS</a></li><li id="4cc9" class="mk ml in kq b kr mt ku mu kx mv lb mw lf mx lj mp mq mr ms bi translated"><a class="ae mh" href="https://www.scraperapi.com/blog/how-to-build-a-linkedin-scraper/" rel="noopener ugc nofollow" target="_blank">用Cheerio抓取LinkedIn工作数据</a></li><li id="625c" class="mk ml in kq b kr mt ku mu kx mv lb mw lf mx lj mp mq mr ms bi translated"><a class="ae mh" href="https://www.scraperapi.com/blog/how-to-scrape-football-data/" rel="noopener ugc nofollow" target="_blank">在Node.js中使用Async和Await进行网络抓取</a></li></ul><p id="e88c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，让我们从设置项目开始。</p><h1 id="1c42" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">1.获取项目设置</h1><p id="1e82" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">为了让一切都启动并运行起来，你需要为你的项目创建一个新的文件夹(我们将我们的文件夹命名为<em class="mi"> glassdoor-scraper </em>)，并在VS Code或你最喜欢的IDE上打开它。</p><p id="b1d9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">进入文件夹后，打开终端并启动节点。JS是这样的:</p><p id="dc6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe my mz na nb b">1npm init</code> <code class="fe my mz na nb b">-``y</code></p><p id="cb2e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">它将在您的项目中创建两个必要的JSON文件。</p><p id="ea6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>如果还没有，<a class="ae mh" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">下载并安装Node。JS和NPM </a>在运行任何命令之前。</p><p id="e917" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后，我们将安装我们最喜欢的三个依赖项:</p><p id="fae0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe my mz na nb b">1npm install axios cheerio objects``-``to``-``csv</code></p><p id="f924" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从这里，创建一个新的文件名glassdoorScraper.js，并在顶部导入依赖项:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="7387" class="ng ll in nb b gy nh ni l nj nk">1const axios<!-- --> <!-- -->=<!-- --> <!-- -->require(``"axios"``);</span><span id="1fae" class="ng ll in nb b gy nl ni l nj nk">2const cheerio<!-- --> <!-- -->=<!-- --> <!-- -->require(``"cheerio"``);</span><span id="feae" class="ng ll in nb b gy nl ni l nj nk">3const ObjectsToCsv<!-- --> <!-- -->=<!-- --> <!-- -->require(``"objects-to-csv"``);</span></pre><p id="a512" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">下一步，让我们探索Glassdoor，了解如何访问我们正在寻找的每个数据点。</p><h1 id="a425" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">2.了解Glassdoor的页面</h1><p id="e899" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">当点击链接“提供米兰拉沃罗兼职”</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/cce2caadd13da56f44f1440d99f379b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/0*RuXVr6La40kYTwsL.png"/></div></figure><p id="90ee" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">网站会在左边以卡片的形式把你带到一个工作列表，更多的细节在右边。每张卡片代表一份工作，包含了我们要找的所有信息:公司名称、职位名称和工作岗位的链接。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/55f505e0ae5dc7a415b76ee904576af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zeocg1yy6zjwOiCc.png"/></div></div></figure><p id="0f27" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是我们对视觉渲染不感兴趣，对吗？为了找到我们的CSS目标，让我们检查页面，看看这些卡片是如何构成的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/aef313cf8e5aa862a9c68a785dd96cb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aQN7auNBctFuxgeZ.png"/></div></div></figure><p id="7340" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">卡片上的第一个元素是公司的名称，它在容器中向下三层:<code class="fe my mz na nb b">div &gt; a &gt; span</code>。注意这一点很重要，因为包含文本的<code class="fe my mz na nb b">&lt;span&gt;</code>没有任何我们可以作为目标的属性。</p><p id="bcf1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果我们只在解析器中使用<code class="fe my mz na nb b">&lt;span&gt;</code>,我们将提取页面上的所有<code class="fe my mz na nb b">&lt;span&gt;</code>元素——这并不太好。</p><p id="bde8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">相反，我们可以上升一个级别，将父标签<code class="fe my mz na nb b">&lt;a&gt;</code>作为目标，因为它有大量的属性。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/edb0521baafdf3e6ce988cb4f46dc59d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IvKmuWZEuuqBTepq.png"/></div></div></figure><p id="c5b8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">公司名称的选择器看起来类似于<code class="fe my mz na nb b">a.job-search-key-l2wjgv.e1n63ojh0.jobLink &gt; span</code>。</p><p id="447e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">换句话说，我们以每个具有类属性“<code class="fe my mz na nb b">job-search-key-l2wjgv.e1n63ojh0.jobLink</code>”的<code class="fe my mz na nb b">&lt;a&gt;</code>标签为目标，然后向下移动到<code class="fe my mz na nb b">&lt;span&gt;</code>子标签。</p><p id="ff83" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>这个标签分配了三个不同的类值；在大多数情况下，当检查页面的HTML时，这些值用空格分隔，如上图所示。但是，当在代码中构造选择器时，这可能会成为一个问题，因此，请用点替换这些空格。</p><p id="9092" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您对其余的元素执行相同的过程，它将看起来像这样:</p><ul class=""><li id="1390" class="mk ml in kq b kr ks ku kv kx mm lb mn lf mo lj mp mq mr ms bi translated">对于职位名称，我们实际上是在寻找数据测试属性:“a[data-test='job-link'] &gt; span”</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/b42e4cd0b7ef3950bfa1b718e57f116f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A0UnK1qwgSyosqIt.png"/></div></div></figure><ul class=""><li id="2246" class="mk ml in kq b kr ks ku kv kx mm lb mn lf mo lj mp mq mr ms bi translated">对于URL，我们将使用与职位相同的选择器，但是没有<code class="fe my mz na nb b">&lt;span&gt;</code>元素。</li></ul><p id="dc1a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是我们怎么知道这些会不会起作用呢？嗯，我们可以建立刮刀，并尝试在第一页上的选择器，但如果它不工作，将只是不断发送请求后，请求？</p><p id="676d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">不要！在我们将我们的IP置于危险之前，最好使用浏览器的控制台来测试这些选择器。</p><h1 id="c3b6" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">3.测试浏览器控制台内的选择器</h1><p id="57c5" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">从您所在的位置，单击控制台选项卡。你会看到很多信息印在那里。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/8918f31230b0e040f95028a7aa9bf896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3p_89Ft-8wOxY47W.png"/></div></div></figure><p id="c604" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要摆脱它，在你的关键字中按CTRL + L清除控制台。</p><p id="c8ff" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从头开始，让我们将第一个选择器传递给querySelectorAll()函数，看看返回了什么:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi np"><img src="../Images/f78bad4ed4f6ecd1cc1e00d3f439cbc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*KzTfiOwab7sbqIli.gif"/></div></figure><p id="fbc1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">很好，成功了！如您所见，它总共返回了30个节点，当我们将鼠标悬停在这些节点上时，它们会在每张卡片上突出显示公司的名称。另外，现在我们知道每页有30个作业。</p><p id="3130" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">尝试测试其余的选择器，亲自看看这个过程。当你准备好了，让我们回到VS代码。</p><h1 id="2458" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">4.通过Axios发送HTTP请求</h1><p id="8cb7" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">你知道你想要提取什么，现在你知道在哪里可以找到它。是时候把我们的铲运机送到野外去了。</p><p id="8088" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我们的our glasssdoorScraper.js文件中，让我们创建一个新的异步函数，并通过传递我们的目标URL来初始化Axios。</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="a658" class="ng ll in nb b gy nh ni l nj nk">1(``async<!-- --> <!-- -->function () {</span><span id="781c" class="ng ll in nb b gy nl ni l nj nk">2const page<!-- --> <!-- -->=<!-- --> <!-- -->await<!-- --> <!-- -->axios("");</span><span id="368c" class="ng ll in nb b gy nl ni l nj nk">3})();</span></pre><p id="08f4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">哦！但是我们还没有选择网址，不是吗？回到当前页面，URL看起来像这样:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="3892" class="ng ll in nb b gy nh ni l nj nk">1[https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0](https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0),6_IC2802090_KO7,16.htm</span></pre><p id="c713" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是在没有评估是否有更好的变体之前，你不应该使用第一个URL。</p><p id="54e0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">举例来说，如果我们浏览分页系列中的其余URL，这里有一个页面与页面之间的共同趋势:</p><p id="b904" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">第2页:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="9c67" class="ng ll in nb b gy nh ni l nj nk"><a class="ae mh" href="https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0,6_IC2802090_KO7,16_IP2.htm?includeNoSalaryJobs=true&amp;pgc=AB4AAYEAHgAAAAAAAAAAAAAAAeJsfSYASAEBAQ0BkGkLZy7wZR4%2F2Zo9gFfJc%2BaGfJR2hsdPG88aYkQEq%2BZCuA1D8cX0auxYd5YLWXw4PlrFLs6CbF64VTKidMy%2FVVlQewAA" rel="noopener ugc nofollow" target="_blank">https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0,6_IC2802090_KO7,16_IP2.htm?includeNoSalaryJobs=true&amp;pgc=AB4AAYEAHgAAAAAAAAAAAAAAAeJsfSYASAEBAQ0BkGkLZy7wZR4%2F2Zo9gFfJc%2BaGfJR2hsdPG88aYkQEq%2BZCuA1D8cX0auxYd5YLWXw4PlrFLs6CbF64VTKidMy%2FVVlQewAA</a></span></pre><p id="7efc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">第3页:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="f451" class="ng ll in nb b gy nh ni l nj nk"><a class="ae mh" href="https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0,6_IC2802090_KO7,16_IP3.htm?includeNoSalaryJobs=true&amp;pgc=AB4AAoEAPAAAAAAAAAAAAAAAAeJsfSYAfQEBARIBKE7V5yzSCE8JHGVBEGqz7wAzuNK9l7EpYDY04B%2FezXcfXZMYR5YqLcFzc7zLnpGx2RjtMQTOQD7v9%2FdGuWhCorhxKDvn80HEk9RcGxMTa110BNJz2wVS1VEBfbcw0u1rpBWrMhZMF1T%2BAHtTQq8aCnkr9ztDMcmkAAA%3D" rel="noopener ugc nofollow" target="_blank">https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0,6_IC2802090_KO7,16_IP3.htm?includeNoSalaryJobs=true&amp;pgc=AB4AAoEAPAAAAAAAAAAAAAAAAeJsfSYAfQEBARIBKE7V5yzSCE8JHGVBEGqz7wAzuNK9l7EpYDY04B%2FezXcfXZMYR5YqLcFzc7zLnpGx2RjtMQTOQD7v9%2FdGuWhCorhxKDvn80HEk9RcGxMTa110BNJz2wVS1VEBfbcw0u1rpBWrMhZMF1T%2BAHtTQq8aCnkr9ztDMcmkAAA%3D</a></span></pre><p id="ede6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这些URL中有很多噪音，但是仔细看看用黄色突出显示的URL的底部。</p><p id="6069" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果我们只使用这一部分，我们得到的结果就好像我们在分页一样。所以让我们从现在开始使用这个结构。</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="ae8b" class="ng ll in nb b gy nh ni l nj nk">1(``async<!-- --> <!-- -->function () {</span><span id="21b6" class="ng ll in nb b gy nl ni l nj nk">2const page<!-- --> <!-- -->=<!-- --> <!-- -->await<!-- --> <!-- -->axios(</span><span id="82f3" class="ng ll in nb b gy nl ni l nj nk">3"[https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0](https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0),6_IC2802090_KO7,16_IP1.htm?includeNoSalaryJobs=true"</span><span id="9740" class="ng ll in nb b gy nl ni l nj nk">4);</span><span id="b730" class="ng ll in nb b gy nl ni l nj nk">5</span><span id="2ed5" class="ng ll in nb b gy nl ni l nj nk">6console.log(page.status);</span><span id="c461" class="ng ll in nb b gy nl ni l nj nk">7})();</span></pre><p id="cef5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">此外，我们还提供控制台日志记录。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nq"><img src="../Images/1b8c0ab46a94a285ac93922212f204cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vZ4ImCpetJN6oHmI.png"/></div></div></figure><p id="920d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">厉害了，一个200成功的代码！然而，在我们继续之前，我们还需要做一件事，一旦我们将项目扩展到更多的请求，让我们的scraper更有弹性。</p><h1 id="8044" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">5.集成ScraperAPI以避免阻塞</h1><p id="bbc9" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">在抓取高流量或数据密集型网站时，需要考虑的一点是，大多数网站不喜欢被抓取，因此他们有几个锦囊妙计来阻止您的脚本访问他们的服务器。</p><p id="644d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了解决这个问题，你需要编写不同的行为来方便服务器，你的抓取器实际上是一个真正的人与页面进行交互，如处理验证码，旋转你的IP地址，创建和维护一个IP地址池进行旋转，<a class="ae mh" href="https://www.scraperapi.com/blog/headers-and-cookies-for-web-scraping/" rel="noopener ugc nofollow" target="_blank">发送正确的标题</a>，并更改你的IP位置以访问地理敏感数据。</p><p id="cae4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">或者我们可以使用一个简单的API来为我们处理这一切。</p><p id="426b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ScraperAPI使用机器学习、多年的统计分析和巨大的浏览器农场来防止您的抓取机器人被标记和阻止。</p><p id="9338" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，让我们<a class="ae mh" href="https://www.scraperapi.com/signup" rel="noopener ugc nofollow" target="_blank">创建一个免费的ScraperAPI帐户</a>来生成一个API密钥——您可以在您的仪表板中找到它。</p><p id="22be" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们将使用以下结构来修改我们的初始请求:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="6866" class="ng ll in nb b gy nh ni l nj nk">1http:``/``/``api.scraperapi.com?api_key``=``{yourApiKey}&amp;url``=``https:``/``/``www.glassdoor.it``/``Lavoro``/``milano``-``part``-``time``-``lavori``-``SRCH_IL.``0``,``6_IC2802090_KO7``,``16_IP1``.htm?includeNoSalaryJobs``=``true</span></pre><p id="58fa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们的请求将从ScraperAPI的服务器发送，在每个请求中轮换我们的IP地址，并处理我们的刮刀遇到的所有复杂性和反刮擦系统。</p><h1 id="50e5" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">6.用Cheerio解析响应</h1><p id="d556" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">有趣的部分开始了！提取所需数据的第一步是<a class="ae mh" href="https://www.scraperapi.com/blog/what-is-data-parsing/" rel="noopener ugc nofollow" target="_blank">解析响应</a>，这样我们就可以浏览节点，并使用之前构建的选择器挑选元素。</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="b3fa" class="ng ll in nb b gy nh ni l nj nk">1const html<!-- --> <!-- -->=<!-- --> <!-- -->page.data;</span><span id="9559" class="ng ll in nb b gy nl ni l nj nk">2const $<!-- --> <!-- -->=<!-- --> <!-- -->cheerio.load(html);</span></pre><p id="f417" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您现在所做的是将响应数据(HTML数据)存储到一个变量中，然后传递给Cheerio进行解析。</p><p id="460a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Cheerio会将HTML文件中的每个元素转换成节点对象，我们可以使用XPath或者CSS选择器遍历这些对象。</p><p id="0bf5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">尽管如此，还有一个选择器我们还没有讨论:主容器。</p><p id="b5bd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在页面上，每个工作列表都由一个卡片表示，每个卡片都包含我们想要的数据。为了让我们的scraper更容易找到信息——并减少无用数据泄露到我们项目中的可能性——我们首先需要挑选所有的卡片，然后遍历它们以提取数据点。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/8871cabdc950279c8455e8ba5756b492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gT2A1MpXjlgUj_Iv.png"/></div></div></figure><p id="c1c0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">每张卡片都是一个<code class="fe my mz na nb b">&lt;li&gt;</code>元素，我们可以使用<code class="fe my mz na nb b">[data-test="jobListing"]</code>属性来挑选它们。</p><p id="1615" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>由于截图中的剪切，您在图像上看不到它，但是您将能够在页面上找到该属性。</p><p id="4a2b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以我们可以这样编写整个解析器:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="74b3" class="ng ll in nb b gy nh ni l nj nk">1let allJobs<!-- --> <!-- -->=<!-- --> <!-- -->$(``'[data-test="jobListing"]'``);</span><span id="db41" class="ng ll in nb b gy nl ni l nj nk">2allJobs.each((index, element)<!-- --> <!-- -->=``&gt; {</span><span id="0f51" class="ng ll in nb b gy nl ni l nj nk">3const jobTitle<!-- --> <!-- -->=<!-- --> <!-- -->$(element).find(``"a[data-test='job-link'] &gt; span"``).text();</span><span id="1e2d" class="ng ll in nb b gy nl ni l nj nk">4const company<!-- --> <!-- -->=<!-- --> <!-- -->$(element)</span><span id="9053" class="ng ll in nb b gy nl ni l nj nk">5.find(``"a.job-search-key-l2wjgv.e1n63ojh0.jobLink &gt; span"``)</span><span id="d848" class="ng ll in nb b gy nl ni l nj nk">6.text();</span><span id="0c90" class="ng ll in nb b gy nl ni l nj nk">7const jobLink<!-- --> <!-- -->=<!-- --> <!-- -->$(element).find(``"a[data-test='job-link']"``).attr(``"href"``);</span><span id="632e" class="ng ll in nb b gy nl ni l nj nk">8});</span></pre><p id="29a6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">注意到字符串末尾的<code class="fe my mz na nb b">.text()</code>方法了吗？您可能已经知道，方法从元素中提取文本数据。没有它，它将返回标记和文本，这不是很有帮助。</p><p id="5bb9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">另一方面，当我们想要提取元素中某个属性的值时，我们可以使用<code class="fe my mz na nb b">.attr()</code>方法并传递我们想要从中获取值的属性。</p><p id="2b96" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果我们现在运行我们的脚本，实际上什么也不会发生，因为脚本不会对它选取的数据做任何事情。</p><p id="4e9e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们可以继续将数据记录到终端，但是看起来会很混乱。所以，在我们记录它之前，让我们用一个数组来格式化它。</p><h1 id="b95a" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">7.将数据推送到空数组中</h1><p id="2d43" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">在主异步函数之外，创建一个空数组，如下所示:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="b44d" class="ng ll in nb b gy nh ni l nj nk">1let jobListings<!-- --> <!-- -->=<!-- --> <!-- -->[];</span></pre><p id="22ee" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在里面添加抓取的数据，我们只需要使用数组上的<code class="fe my mz na nb b">.push()</code>:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="a212" class="ng ll in nb b gy nh ni l nj nk">1jobListings.push({</span><span id="14b9" class="ng ll in nb b gy nl ni l nj nk">2"Job Title"``: jobTitle,</span><span id="6a14" class="ng ll in nb b gy nl ni l nj nk">3"Hiring Company"``: company,</span><span id="a88a" class="ng ll in nb b gy nl ni l nj nk">4"Job Link"``:<!-- --> <!-- -->"[https://www.glassdoor.it](https://www.glassdoor.it/)"<!-- --> <!-- -->+<!-- --> <!-- -->jobLink,</span><span id="e105" class="ng ll in nb b gy nl ni l nj nk">5});</span></pre><p id="37ab" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你听到了吗？我们在从<code class="fe my mz na nb b">jobLink</code>返回的值之前推送一个字符串。但是为什么呢？</p><p id="a7b4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这就是为什么网络抓取是关于细节的。让我们回到页面，看看<code class="fe my mz na nb b">href</code>值:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/041f657fb8cbd3c77aecbd9734d26438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/0*Ckdyq3NaosWVxuDe.png"/></div></figure><p id="952b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">那里有很多信息，但是URL少了一块:“<a class="ae mh" href="https://www.glassdoor.it" rel="noopener ugc nofollow" target="_blank"><em class="mi">https://www . glass door . it</em></a>”。这是一个聪明的方法来保护网址免受像我们这样的骗子的攻击。</p><p id="3a9e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们将这两个字符串连接成一个字符串，将缺少的信息作为一个字符串与jobLink的值一起传递。因此，使它再次有用。</p><p id="71a6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">解决了这个问题后，让我们通过控制台记录生成的数组来测试我们的代码:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/9a622e625fc0c4da7ee80b9bd3b9440f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hNE8sdIVCaRyq_xS.png"/></div></div></figure><p id="3a8a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">迄今为止工作出色；你已经完成了最难的部分！现在，让我们把数据从终端取出来，好吗？</p><h1 id="9e26" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">8.构建CSV文件</h1><p id="d38a" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">由于ObjectsToCsv包，将抓取的信息导出到CSV文件实际上非常简单。您需要做的就是在<code class="fe my mz na nb b">.each()</code>方法之外添加以下代码片段:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="6a8a" class="ng ll in nb b gy nh ni l nj nk">1const csv<!-- --> <!-- -->=<!-- --> <!-- -->new ObjectsToCsv(jobListings);</span><span id="e9ce" class="ng ll in nb b gy nl ni l nj nk">2await<!-- --> <!-- -->csv.toDisk(``"./glassdoorJobs.csv"``, { append: true });</span><span id="2f3a" class="ng ll in nb b gy nl ni l nj nk">3console.log(``"Save to CSV"``);</span></pre><p id="fca2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">重要的是，我们将append设置为true，这样如果我们不在每次使用文件时覆盖它。</p><p id="e123" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们之前已经测试过了，所以先不要运行你的代码。之前我们还想再做一件事。</p><h1 id="6839" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">9.处理分页页面</h1><p id="9b87" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">我们已经知道了URL结构在分页系列中是如何逐页变化的。有了这些信息，我们可以创建一个<code class="fe my mz na nb b">for loop</code>来增加IP{x}号，直到我们到达分页中的最后一页:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="aea1" class="ng ll in nb b gy nh ni l nj nk">1for<!-- --> <!-- -->(let pageNumber<!-- --> <!-- -->=<!-- --> <!-- -->1``; pageNumber &lt;<!-- --> <!-- -->31``; pageNumber<!-- --> <!-- -->+``=<!-- --> <!-- -->1``){}</span></pre><p id="be16" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">此外，我们需要在<code class="fe my mz na nb b">axios()</code>请求中动态添加这个数字:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="a498" class="ng ll in nb b gy nh ni l nj nk">1const page<!-- --> <!-- -->=<!-- --> <!-- -->await<!-- --> <!-- -->axios(</span><span id="a3f7" class="ng ll in nb b gy nl ni l nj nk">2http://api.scraperapi.com?api_key={yourApiKey}&amp;url=https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0,6_IC2802090_KO7,16_IP${pageNumber}.htm?includeNoSalaryJobs=true</span><span id="ecdb" class="ng ll in nb b gy nl ni l nj nk">3);</span></pre><p id="4ef8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，我们将整个代码移到<code class="fe my mz na nb b">for loop</code>中——为了简单起见，将CSV部分排除在循环之外。</p><h1 id="a8e1" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">10.试运行和全玻璃门节点。JS刮刀</h1><p id="6b15" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">如果你一直跟随(如果你直接来到这一节:<em class="mi">嗨</em>)你的代码库应该是这样的:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="af3e" class="ng ll in nb b gy nh ni l nj nk">1const axios<!-- --> <!-- -->=<!-- --> <!-- -->require(``"axios"``);</span><span id="1394" class="ng ll in nb b gy nl ni l nj nk">2const cheerio<!-- --> <!-- -->=<!-- --> <!-- -->require(``"cheerio"``);</span><span id="8227" class="ng ll in nb b gy nl ni l nj nk">3const ObjectsToCsv<!-- --> <!-- -->=<!-- --> <!-- -->require(``"objects-to-csv"``);</span><span id="20a4" class="ng ll in nb b gy nl ni l nj nk">4</span><span id="4636" class="ng ll in nb b gy nl ni l nj nk">5let jobListings<!-- --> <!-- -->=<!-- --> <!-- -->[];</span><span id="61e4" class="ng ll in nb b gy nl ni l nj nk">6</span><span id="55a9" class="ng ll in nb b gy nl ni l nj nk">7(``async<!-- --> <!-- -->function () {</span><span id="1fad" class="ng ll in nb b gy nl ni l nj nk">8for<!-- --> <!-- -->(let pageNumber<!-- --> <!-- -->=<!-- --> <!-- -->1``; pageNumber &lt;<!-- --> <!-- -->31``; pageNumber<!-- --> <!-- -->+``=<!-- --> <!-- -->1``) {</span><span id="2255" class="ng ll in nb b gy nl ni l nj nk">9const page<!-- --> <!-- -->=<!-- --> <!-- -->await<!-- --> <!-- -->axios(</span><span id="27c2" class="ng ll in nb b gy nl ni l nj nk">10<!-- --> `http:```/<!-- -->/<!-- -->api.scraperapi.com?api_key<!-- -->=<!-- -->51e43be283e4db2a5afb62660fc6ee44<!-- -->&amp;url<!-- -->=<!-- -->https:<!-- -->/<!-- -->/<!-- -->www.glassdoor.it<!-- -->/<!-- -->Lavoro<!-- -->/<!-- -->milano<!-- -->-<!-- -->part<!-- -->-<!-- -->time<!-- -->-<!-- -->lavori<!-- -->-<!-- -->SRCH_IL.<!-- -->0<!-- -->,<!-- -->6_IC2802090_KO7<!-- -->,<!-- -->16_IP<!-- -->${pageNumber}.htm?includeNoSalaryJobs<!-- -->=```true` ``</span><span id="4d12" class="ng ll in nb b gy nl ni l nj nk">11<!-- -->);</span><span id="e50d" class="ng ll in nb b gy nl ni l nj nk">12<!-- -->const html<!-- --> <!-- -->=<!-- --> <!-- -->await<!-- --> <!-- -->page.data;</span><span id="e897" class="ng ll in nb b gy nl ni l nj nk">13<!-- -->const $<!-- --> <!-- -->=<!-- --> <!-- -->cheerio.load(html);</span><span id="6016" class="ng ll in nb b gy nl ni l nj nk">14</span><span id="d10b" class="ng ll in nb b gy nl ni l nj nk">15<!-- -->let allJobs<!-- --> <!-- -->=<!-- --> <!-- -->$(``'[data-test="jobListing"]'``);</span><span id="27ee" class="ng ll in nb b gy nl ni l nj nk">16<!-- -->allJobs.each((index, element)<!-- --> <!-- -->=``&gt; {</span><span id="0786" class="ng ll in nb b gy nl ni l nj nk">17<!-- -->const jobTitle<!-- --> <!-- -->=<!-- --> <!-- -->$(element).find(``"a[data-test='job-link'] &gt; span"``).text();</span><span id="26ed" class="ng ll in nb b gy nl ni l nj nk">18<!-- -->const company<!-- --> <!-- -->=<!-- --> <!-- -->$(element).find(``"a.e1n63ojh0 &gt; span"``).text();</span><span id="a31f" class="ng ll in nb b gy nl ni l nj nk">19<!-- -->const jobLink<!-- --> <!-- -->=<!-- --> <!-- -->$(element).find(``"a[data-test='job-link']"``).attr(``"href"``);</span><span id="8553" class="ng ll in nb b gy nl ni l nj nk">20<!-- -->jobListings.push({</span><span id="7e85" class="ng ll in nb b gy nl ni l nj nk">21<!-- -->"Job Title"``: jobTitle,</span><span id="2195" class="ng ll in nb b gy nl ni l nj nk">22<!-- -->"Hiring Company"``: company,</span><span id="7d49" class="ng ll in nb b gy nl ni l nj nk">23<!-- -->"Job Link"``:<!-- --> <!-- -->"[https://www.glassdoor.it/](https://www.glassdoor.it/)"<!-- --> <!-- -->+<!-- --> <!-- -->jobLink,</span><span id="da01" class="ng ll in nb b gy nl ni l nj nk">24<!-- -->});</span><span id="676b" class="ng ll in nb b gy nl ni l nj nk">25<!-- -->});</span><span id="fe3a" class="ng ll in nb b gy nl ni l nj nk">26</span><span id="f7d6" class="ng ll in nb b gy nl ni l nj nk">27<!-- -->console.log(pageNumber<!-- --> <!-- -->+<!-- --> <!-- -->" Done!"``);</span><span id="e8b3" class="ng ll in nb b gy nl ni l nj nk">28<!-- -->}</span><span id="b8f7" class="ng ll in nb b gy nl ni l nj nk">29</span><span id="b4b5" class="ng ll in nb b gy nl ni l nj nk">30<!-- -->const csv<!-- --> <!-- -->=<!-- --> <!-- -->new ObjectsToCsv(jobListings);</span><span id="4750" class="ng ll in nb b gy nl ni l nj nk">31<!-- -->await<!-- --> <!-- -->csv.toDisk(``"./glassdoorJobs.csv"``);</span><span id="965f" class="ng ll in nb b gy nl ni l nj nk">32<!-- -->console.log(``"Save to CSV"``);</span><span id="f664" class="ng ll in nb b gy nl ni l nj nk">33<!-- -->console.log(jobListings);</span><span id="4573" class="ng ll in nb b gy nl ni l nj nk">34<!-- -->})();</span></pre><p id="edba" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">运行代码后，将在您的文件夹中创建一个新的CSV文件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/6c91d6a0345d87cd900e08c630303a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4LI1u7ExFA8BCbQs.png"/></div></div></figure><p id="7478" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>要实现这一点，请记住您需要将您的ScraperAPI键添加到脚本中，替换<code class="fe my mz na nb b">{yourApiKey}</code>占位符。</p><p id="6506" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们做了一些改动:</p><ul class=""><li id="edda" class="mk ml in kq b kr ks ku kv kx mm lb mn lf mo lj mp mq mr ms bi translated">首先，我们添加了一个<code class="fe my mz na nb b">console.log(pageNumber + " Done!")</code>行，在脚本运行时给出视觉反馈。</li><li id="6714" class="mk ml in kq b kr mt ku mu kx mv lb mw lf mx lj mp mq mr ms bi translated">其次，我们从<code class="fe my mz na nb b">.toDisk()</code>方法中删除了<code class="fe my mz na nb b">{ append: true }</code>参数；由于它已经不在<code class="fe my mz na nb b">for loop</code>中，我们不会再向它添加(追加)任何数据。</li></ul><p id="e93d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">恭喜你，你用JavaScript构建了你的第一个玻璃门刮刀！</p><p id="0fdf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你可以使用相同的原则来抓取Glassdoor上的每一页，使用相同的逻辑，你可以将这个脚本翻译成其他语言。</p><p id="d0e3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们创建一个Python脚本来做与演示相同的事情。</p><h1 id="841b" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">在Python中抓取玻璃门作业</h1><p id="6203" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">用Python编写Glassdoor scraper时，您可能倾向于使用Selenium这样的工具。然而，就像JavaScript一样，我们不需要使用任何类型的无头浏览器。</p><p id="b570" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">相反，我们将使用请求和漂亮的Soup构建一个循环来访问和解析分页页面的HTML，像上面那样提取数据。</p><h1 id="0de7" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">1.设置Python环境</h1><p id="15cf" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">在您的项目文件夹中，创建一个新的glassdoor-python-scraper目录，添加一个glassdoor_scraper.py文件，并从终端发送安装请求和漂亮的Soup:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="22b3" class="ng ll in nb b gy nh ni l nj nk">1pip install requests beautifulsoup4</span></pre><p id="de5b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，将两个依赖项都导入到文件的顶部:</p><p id="4c3d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe my mz na nb b">1import</code> <code class="fe my mz na nb b">requests</code></p><p id="50d9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe my mz na nb b">2from</code> <code class="fe my mz na nb b">bs4</code> <code class="fe my mz na nb b">import</code> <code class="fe my mz na nb b">BeautifulSoup</code></p><p id="9ccc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">就这样，我们为下一步做好了准备。</p><h1 id="9398" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">2.在For循环中使用请求</h1><p id="210d" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">另外，向服务器发送初始请求并打印状态代码。</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="c32d" class="ng ll in nb b gy nh ni l nj nk">1response<!-- --> <!-- -->=<!-- --> <!-- -->requests.get(</span><span id="a37b" class="ng ll in nb b gy nl ni l nj nk">2"[https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0](https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0),6_IC2802090_KO7,16_IP1.htm?includeNoSalaryJobs=true"``)</span><span id="1c73" class="ng ll in nb b gy nl ni l nj nk">3</span><span id="0cf4" class="ng ll in nb b gy nl ni l nj nk">4print``(response.status_code)</span></pre><p id="54c4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>记住，在能够运行Python脚本之前，您需要将CD放到新文件夹中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/f3eafca0d714f0c463776bb45fd337aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xCVlFm9iWiSkDewS.png"/></div></div></figure><p id="c294" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">目前为止很有效！现在，让我们把它放到一个<code class="fe my mz na nb b">for loop</code>中，并尝试访问分页中的前三页。为此，我们将创建一个从1到4的范围(该范围中不包括4)，并将一个{x}变量添加到字符串中:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="ce8c" class="ng ll in nb b gy nh ni l nj nk">1for<!-- --> <!-- -->x<!-- --> <!-- -->in<!-- --> <!-- -->range``(``1``,<!-- --> <!-- -->4``):</span><span id="c356" class="ng ll in nb b gy nl ni l nj nk">2response<!-- --> <!-- -->=<!-- --> <!-- -->requests.get(</span><span id="8995" class="ng ll in nb b gy nl ni l nj nk">3"[https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0](https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0),6_IC2802090_KO7,16_IP{x}.htm?includeNoSalaryJobs=true"``)</span><span id="dce4" class="ng ll in nb b gy nl ni l nj nk">4</span><span id="42d2" class="ng ll in nb b gy nl ni l nj nk">5print``(response.status_code)</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/cf09f3ef51bc6d3244bd527c51bc2386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RyJs2VaHJvQdqykj.png"/></div></div></figure><p id="3ca4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有了这个简单的for循环，我们的scraper将能够毫无问题地遍历分页。</p><h1 id="5f71" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">3.用美汤刮玻璃门数据</h1><p id="fc12" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">出于测试目的，我们不希望我们的scraper在三个不同的页面上失败，所以让我们将范围缩小到1–2；只会刮到第一页。</p><p id="581d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">和以前一样，我们将使用<code class="fe my mz na nb b">[data-test="jobListing"]</code>属性选择器挑选所有的工作卡:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="7f70" class="ng ll in nb b gy nh ni l nj nk">1all_jobs<!-- --> <!-- -->=<!-- --> <!-- -->soup.select(``"[data-test='jobListing']"``)</span></pre><p id="8439" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所有的卡片都存储在<code class="fe my mz na nb b">all_jobs</code>变量中，我们可以遍历它们来提取目标数据点:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="a013" class="ng ll in nb b gy nh ni l nj nk">1for<!-- --> <!-- -->job<!-- --> <!-- -->in<!-- --> <!-- -->all_jobs:</span><span id="4bde" class="ng ll in nb b gy nl ni l nj nk">2job_title<!-- --> <!-- -->=<!-- --> <!-- -->job.find(``"a"``, attrs``=``{``"data-test"``:<!-- --> <!-- -->"job-link"``}).text</span><span id="b69e" class="ng ll in nb b gy nl ni l nj nk">3company<!-- --> <!-- -->=<!-- --> <!-- -->job.select_one(</span><span id="4304" class="ng ll in nb b gy nl ni l nj nk">4"a.job-search-key-l2wjgv.e1n63ojh0.jobLink &gt; span"``).text</span><span id="68fc" class="ng ll in nb b gy nl ni l nj nk">5job_link<!-- --> <!-- -->=<!-- --> <!-- -->job.find(``"a"``, attrs``=``{``"data-test"``:<!-- --> <!-- -->"job-link"``})[``"href"``]</span></pre><p id="7695" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>由于某种原因，当<code class="fe my mz na nb b">using</code> <code class="fe my mz na nb b">.find()</code>提取公司名称时不起作用，所以我们决定用<code class="fe my mz na nb b">select_one()</code>的方法代替。</p><h1 id="3b9f" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">4.构造JSON文件</h1><p id="9e37" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">我们在使用Python教程抓取表格数据的<a class="ae mh" href="https://www.scraperapi.com/blog/python-loop-through-html-table/" rel="noopener ugc nofollow" target="_blank">中详细讨论了如何处理JSON文件。不过，为了简单说明，我们将数据添加到一个空数组中，并使用json.dump()方法将数组存储到一个json文件中:</a></p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="0f84" class="ng ll in nb b gy nh ni l nj nk">1glassdoor_jobs.append({</span><span id="f692" class="ng ll in nb b gy nl ni l nj nk">2"Job Title"``: job_title,</span><span id="20b2" class="ng ll in nb b gy nl ni l nj nk">3"Company"``: company,</span><span id="a352" class="ng ll in nb b gy nl ni l nj nk">4"Job Link"``:<!-- --> <!-- -->"[https://www.glassdoor.it](https://www.glassdoor.it/)"<!-- --> <!-- -->+<!-- --> <!-- -->job_link</span><span id="c706" class="ng ll in nb b gy nl ni l nj nk">5})</span></pre><p id="8cba" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>您需要在文件顶部导入json，并在循环外创建一个新的<code class="fe my mz na nb b">glassdoor_jobs = []</code>空数组，这样才能工作。</p><p id="1a8f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当数组准备好格式良好的数据后，我们将把数据转储到一个JSON文件中，并使用下面的代码片段:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="f26b" class="ng ll in nb b gy nh ni l nj nk">1with<!-- --> <!-- -->open``(``'glassdoor_jobs'``,<!-- --> <!-- -->'w'``) as json_file:</span><span id="fd93" class="ng ll in nb b gy nl ni l nj nk">2json.dump(glassdoor_jobs, json_file, indent``=``2``)</span></pre><p id="48c5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后要做的一件事:测试它！</p><h1 id="e301" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">5.试运行和全玻璃门Python刮刀</h1><p id="785f" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">无需更多介绍，下面是收集Glassdoor作业数据的完整Python脚本:</p><pre class="kd ke kf kg gt nc nb nd ne aw nf bi"><span id="4358" class="ng ll in nb b gy nh ni l nj nk">1import<!-- --> <!-- -->requests</span><span id="887d" class="ng ll in nb b gy nl ni l nj nk">2from<!-- --> <!-- -->bs4<!-- --> <!-- -->import<!-- --> <!-- -->BeautifulSoup</span><span id="9b57" class="ng ll in nb b gy nl ni l nj nk">3import<!-- --> <!-- -->json</span><span id="4777" class="ng ll in nb b gy nl ni l nj nk">4</span><span id="725a" class="ng ll in nb b gy nl ni l nj nk">5glassdoor_jobs<!-- --> <!-- -->=<!-- --> <!-- -->[]</span><span id="7535" class="ng ll in nb b gy nl ni l nj nk">6</span><span id="ee74" class="ng ll in nb b gy nl ni l nj nk">7for<!-- --> <!-- -->x<!-- --> <!-- -->in<!-- --> <!-- -->range``(``1``,<!-- --> <!-- -->31``):</span><span id="78a7" class="ng ll in nb b gy nl ni l nj nk">8response<!-- --> <!-- -->=<!-- --> <!-- -->requests.get(</span><span id="9490" class="ng ll in nb b gy nl ni l nj nk">9"[http://api.scraperapi.com?api_key=](http://api.scraperapi.com/?api_key=){your_api_key}&amp;url=[https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0](https://www.glassdoor.it/Lavoro/milano-part-time-lavori-SRCH_IL.0),6_IC2802090_KO7,16_IP{x}.htm?includeNoSalaryJobs=true"``)</span><span id="ceb2" class="ng ll in nb b gy nl ni l nj nk">10<!-- -->soup<!-- --> <!-- -->=<!-- --> <!-- -->BeautifulSoup(response.content,<!-- --> <!-- -->"html.parser"``)</span><span id="4354" class="ng ll in nb b gy nl ni l nj nk">11</span><span id="c705" class="ng ll in nb b gy nl ni l nj nk">12<!-- -->all_jobs<!-- --> <!-- -->=<!-- --> <!-- -->soup.select(``"[data-test='jobListing']"``)</span><span id="e1d1" class="ng ll in nb b gy nl ni l nj nk">13<!-- -->for<!-- --> <!-- -->job<!-- --> <!-- -->in<!-- --> <!-- -->all_jobs:</span><span id="604f" class="ng ll in nb b gy nl ni l nj nk">14<!-- -->job_title<!-- --> <!-- -->=<!-- --> <!-- -->job.find(``"a"``, attrs``=``{``"data-test"``:<!-- --> <!-- -->"job-link"``}).text</span><span id="334a" class="ng ll in nb b gy nl ni l nj nk">15<!-- -->company<!-- --> <!-- -->=<!-- --> <!-- -->job.select_one(</span><span id="9883" class="ng ll in nb b gy nl ni l nj nk">16<!-- -->"a.job-search-key-l2wjgv.e1n63ojh0.jobLink &gt; span"``).text</span><span id="41a7" class="ng ll in nb b gy nl ni l nj nk">17<!-- -->job_link<!-- --> <!-- -->=<!-- --> <!-- -->job.find(``"a"``, attrs``=``{``"data-test"``:<!-- --> <!-- -->"job-link"``})[``"href"``]</span><span id="bb17" class="ng ll in nb b gy nl ni l nj nk">18<!-- -->glassdoor_jobs.append({</span><span id="74ce" class="ng ll in nb b gy nl ni l nj nk">19<!-- -->"Job Title"``: job_title,</span><span id="5762" class="ng ll in nb b gy nl ni l nj nk">20<!-- -->"Company"``: company,</span><span id="d456" class="ng ll in nb b gy nl ni l nj nk">21<!-- -->"Job Link"``:<!-- --> <!-- -->"[https://www.glassdoor.it](https://www.glassdoor.it/)"<!-- --> <!-- -->+<!-- --> <!-- -->job_link</span><span id="4f23" class="ng ll in nb b gy nl ni l nj nk">22<!-- -->})</span><span id="fcc6" class="ng ll in nb b gy nl ni l nj nk">23<!-- -->print``(``"Page "<!-- --> <!-- -->+<!-- --> <!-- -->str``(x)<!-- --> <!-- -->+<!-- --> <!-- -->" is done"``)</span><span id="25ae" class="ng ll in nb b gy nl ni l nj nk">24</span><span id="313e" class="ng ll in nb b gy nl ni l nj nk">25<!-- -->with<!-- --> <!-- -->open``(``'glassdoor_jobs'``,<!-- --> <!-- -->'w'``) as json_file:</span><span id="c554" class="ng ll in nb b gy nl ni l nj nk">26<!-- -->json.dump(glassdoor_jobs, json_file, indent``=``2``)</span></pre><p id="057f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们做了一些改变:</p><ul class=""><li id="0ea4" class="mk ml in kq b kr ks ku kv kx mm lb mn lf mo lj mp mq mr ms bi translated">我们将范围从1–2更改为1–31。脚本将在第30页停止(因为不包括第31页)，这是分页系列的最后一页。</li><li id="47da" class="mk ml in kq b kr mt ku mu kx mv lb mw lf mx lj mp mq mr ms bi translated">我们添加了一个<code class="fe my mz na nb b">print("Page: " + str(x) + " is done")</code>语句，用于代码运行时的视觉反馈。它将x变量从整数转换成字符串，这样我们就可以连接整个短语。</li><li id="5a59" class="mk ml in kq b kr mt ku mu kx mv lb mw lf mx lj mp mq mr ms bi translated">为了保护我们的知识产权和处理任何针对我们的反抓取技术，我们将通过ScraperAPI的服务器发送我们的请求。您可以在初始URL中看到新字符串，并通过我们的文档<a class="ae mh" href="https://www.scraperapi.com/documentation/" rel="noopener ugc nofollow" target="_blank">了解更多关于ScraperAPI功能的信息</a>。</li></ul><p id="82fc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">以下是最终结果:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/83f93dfa97bfd0be324932451fb4c356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HWdSB91hw7KPFfYJ.png"/></div></div></figure><p id="97fc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">刮出30页，并将所有数据格式化成可重用的JSON文件。</p><h1 id="2705" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">包扎</h1><p id="8285" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">通过扩展这个项目，您可以获得更多的页面和更多的数据点。您还可以通过过滤信息来收集特定的职位，如仅具有特定头衔、位置或价值的职位(即显示工资的职位)，并建立一个策划的职位公告板或工作机会简讯。</p><p id="d254" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有了这么多的信息，天空是无限的，所以保持你的头脑开放的可能性。</p><p id="6c16" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">下次见，刮刮快乐！</p></div><div class="ab cl ns nt hr nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ig ih ii ij ik"><p id="e197" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="mi">更多内容请看</em><a class="ae mh" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mi">plain English . io</em></strong></a><em class="mi">。报名参加我们的</em> <a class="ae mh" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mi">免费周报</em> </strong> </a> <em class="mi">。关注我们关于</em><a class="ae mh" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mi">Twitter</em></strong></a><a class="ae mh" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mi">LinkedIn</em></strong></a><em class="mi"/><a class="ae mh" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mi">YouTube</em></strong></a><em class="mi"/><a class="ae mh" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mi">不和</em> </strong> </a> <em class="mi">。对增长黑客感兴趣？检查</em> <a class="ae mh" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mi">电路</em> </strong> </a> <em class="mi">。</em></p></div></div>    
</body>
</html>