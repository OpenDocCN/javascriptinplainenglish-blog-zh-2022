<html>
<head>
<title>How to Convert a String to a Date Object in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中将字符串转换成日期对象</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-convert-string-to-date-object-8f4b705a1d59?source=collection_archive---------10-----------------------#2022-07-14">https://javascript.plainenglish.io/javascript-convert-string-to-date-object-8f4b705a1d59?source=collection_archive---------10-----------------------#2022-07-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f566" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何在JavaScript中轻松地将字符串转换为日期对象。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b02d0a739c8eb5fd104924ad31944b59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TOW8BtVmtWuUI1o_7wcJlw.png"/></div></div></figure><h1 id="1b81" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">1.Date()构造函数</h1><p id="adc9" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">要将字符串转换为日期对象，调用<code class="fe mc md me mf b">Date()</code>构造函数，将字符串作为参数传递，即<code class="fe mc md me mf b">const date = new Date(str)</code>。例如:</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="97a6" class="mk kp in mf b gy ml mm l mn mo">const str = '2022-06-15';</span><span id="bee3" class="mk kp in mf b gy mp mm l mn mo">const date = new Date(str);</span><span id="6d45" class="mk kp in mf b gy mp mm l mn mo">console.log(date.getFullYear()); // 2022<br/>console.log(date.getDate()); // 15<br/>console.log(date); // 2022-06-15T00:00:00.000Z</span></pre><p id="1e72" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">如果传递了一个字符串，<code class="fe mc md me mf b">Date()</code>构造函数从字符串中的信息创建一个<code class="fe mc md me mf b">Date</code>对象。</p><h2 id="9b6d" class="mk kp in bd kq mv mw dn ku mx my dp ky lp mz na la lt nb nc lc lx nd ne le nf bi translated">无效日期</h2><p id="099e" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">如果传递的字符串具有错误或不支持的格式，将会抛出错误或创建无效日期，具体取决于实现。例如:</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="2cef" class="mk kp in mf b gy ml mm l mn mo">const invalidDate = new Date('a');<br/>console.log(invalidDate); // Invalid Date</span><span id="a7b3" class="mk kp in mf b gy mp mm l mn mo">const invalidDate2 = new Date('15/6/2022');<br/>console.log(invalidDate2); // Invalid Date</span></pre><h2 id="c191" class="mk kp in bd kq mv mw dn ku mx my dp ky lp mz na la lt nb nc lc lx nd ne le nf bi translated">如何将非ISO-8601格式的字符串转换为日期对象</h2><p id="9c29" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">确保传递给<code class="fe mc md me mf b">Date()</code>构造函数的字符串符合<a class="ae ng" href="https://en.wikipedia.org/wiki/ISO_8601" rel="noopener ugc nofollow" target="_blank"> ISO 8601 </a>格式(<code class="fe mc md me mf b">YYYY-MM-DDTHH:mm:ss.sssZ</code>)对于跨所有浏览器的一致解析行为很重要。其他格式的解析行为取决于实现，并且可能不适用于所有浏览器。</p><p id="ab9d" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">为了转换非ISO 8601格式的字符串并保持一致的解析行为，我们可以从字符串中获取各个日期组件值，并将它们作为数字传递给<code class="fe mc md me mf b">Date()</code>构造函数。例如，我们可以将一个带有<code class="fe mc md me mf b">MM/DD/YY</code>格式的字符串转换成一个<code class="fe mc md me mf b">Date</code>对象，如下所示:</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="1ab9" class="mk kp in mf b gy ml mm l mn mo">const str = '06/15/2022';</span><span id="7cc6" class="mk kp in mf b gy mp mm l mn mo">const [month, day, year] = str.split('/');</span><span id="49e8" class="mk kp in mf b gy mp mm l mn mo">console.log(month); // 06<br/>console.log(day); // 15<br/>console.log(year); // 2022</span><span id="3de7" class="mk kp in mf b gy mp mm l mn mo">const date = new Date(+year, +month - 1, +day);<br/>console.log(date); // May 15, 2022</span></pre><p id="ffad" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">我们使用<code class="fe mc md me mf b">String</code> <code class="fe mc md me mf b">split()</code>方法用正斜杠(<code class="fe mc md me mf b">/</code>)分割字符串，以获得月、日和年的各个值。我们用一元运算符(<code class="fe mc md me mf b">+</code>)将它们转换成数字，并将其传递给<code class="fe mc md me mf b">Date()</code>构造函数。</p><p id="f205" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated"><strong class="li io">注意:</strong>在将月份传递给<code class="fe mc md me mf b">Date()</code>构造函数时，我们从月份中减去了<code class="fe mc md me mf b">1</code>，因为<code class="fe mc md me mf b">Date()</code>需要一个从零开始的月份值，即0 =一月，1 =二月，2 =三月，等等。</p><p id="2212" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">当在字符串中指定时间时，我们可以采用类似的方法。在下面的示例中，我们转换的字符串指定了小时、分钟和秒。</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="bb87" class="mk kp in mf b gy ml mm l mn mo">const str = '06-15-2022 09:13:50';</span><span id="5a60" class="mk kp in mf b gy mp mm l mn mo">const [dateStr, timeStr] = str.split(' ');<br/>console.log(dateStr); // 06-15-2022<br/>console.log(timeStr); // 09:13:50</span><span id="82b0" class="mk kp in mf b gy mp mm l mn mo">const [month, day, year] = dateStr.split('-');<br/>const [hours, minutes, seconds] = timeStr.split(':');</span><span id="82dc" class="mk kp in mf b gy mp mm l mn mo">console.log(month); // 06<br/>console.log(day); // 15<br/>console.log(year); // 2022</span><span id="96e6" class="mk kp in mf b gy mp mm l mn mo">const date = new Date(<br/>  +year,<br/>  +month - 1,<br/>  +day,<br/>  +hours,<br/>  +minutes,<br/>  +seconds<br/>);<br/>console.log(date); // 2022-06-15T08:13:50.000Z</span></pre><p id="7c4f" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">首先，我们必须用空格将字符串分开，以便分别使用日期和时间字符串。</p><p id="5980" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">与上一个例子不同，这次日期字符串中的值用连字符(<code class="fe mc md me mf b">-</code>)分隔，所以我们在调用<code class="fe mc md me mf b">split()</code>来分别获取月、日和年时使用它作为分隔符。</p><p id="b96a" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">类似地，时间字符串中的值用冒号(<code class="fe mc md me mf b">:</code>)分隔，所以这是我们用<code class="fe mc md me mf b">String</code> <code class="fe mc md me mf b">split()</code>方法分隔它们的分隔符。</p><p id="533c" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">在分别获得每个日期和时间值后，我们用一元运算符(<code class="fe mc md me mf b">+</code>)将它们转换成数字，并将其传递给<code class="fe mc md me mf b">Date()</code>构造函数。</p><h2 id="4180" class="mk kp in bd kq mv mw dn ku mx my dp ky lp mz na la lt nb nc lc lx nd ne le nf bi translated">如何将日期对象转换为ISO 8601字符串</h2><p id="1376" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">如果我们想将一个<code class="fe mc md me mf b">Date</code>对象转换成一个字符串以存储在一个文件或数据库中，我们可以以ISO 8601格式存储它，这样我们就可以检索并轻松地将其转换回一个具有独立于浏览器的解析行为的<code class="fe mc md me mf b">Date</code>对象，而无需使用任何第三方库。</p><p id="6681" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">我们可以用<code class="fe mc md me mf b">toISOString()</code>方法来做这件事。</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="7946" class="mk kp in mf b gy ml mm l mn mo">const str = '06-15-2022 09:13:50';</span><span id="4e37" class="mk kp in mf b gy mp mm l mn mo">const [dateStr, timeStr] = str.split(' ');<br/>console.log(dateStr); // 06-15-2022<br/>console.log(timeStr); // 09:13:50</span><span id="50dc" class="mk kp in mf b gy mp mm l mn mo">const [month, day, year] = dateStr.split('-');<br/>const [hours, minutes, seconds] = timeStr.split(':');</span><span id="fdb2" class="mk kp in mf b gy mp mm l mn mo">console.log(month); // 06<br/>console.log(day); // 15<br/>console.log(year); // 2022</span><span id="f248" class="mk kp in mf b gy mp mm l mn mo">const date = new Date(<br/>  +year,<br/>  +month - 1,<br/>  +day,<br/>  +hours,<br/>  +minutes,<br/>  +seconds<br/>);</span><span id="3391" class="mk kp in mf b gy mp mm l mn mo">const isoString = date.toISOString();<br/>console.log(isoString); // 2022-06-15T08:13:50.000Z</span><span id="d255" class="mk kp in mf b gy mp mm l mn mo">// Can convert back to Date object with browser-independent parsing<br/>const sameDate = new Date(isoString);<br/>console.log(sameDate.getDate()); // 15<br/>console.log(sameDate.getMinutes()); // 13</span></pre><p id="97cb" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated"><code class="fe mc md me mf b">Date</code> <code class="fe mc md me mf b">toISOString()</code>方法根据世界时返回一个ISO 8601格式的日期字符串。</p><h1 id="20d6" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">2.date-fns parse()函数</h1><p id="220d" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">我们还可以使用<code class="fe mc md me mf b">date-fns</code> NPM包中的<a class="ae ng" href="https://date-fns.org/v2.16.1/docs/parse" rel="noopener ugc nofollow" target="_blank"> parse() </a>函数，轻松地将各种格式的字符串转换成<code class="fe mc md me mf b">Date</code>对象。这里我们指定字符串为<code class="fe mc md me mf b">MM-dd-yyyy hh:m:ss</code> <a class="ae ng" href="https://date-fns.org/v2.16.1/docs/format" rel="noopener ugc nofollow" target="_blank">格式</a>，这样它就可以被正确转换。</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="5d85" class="mk kp in mf b gy ml mm l mn mo">import { parse } from 'date-fns';</span><span id="2700" class="mk kp in mf b gy mp mm l mn mo">const str = '06-15-2022 09:13:50';</span><span id="d405" class="mk kp in mf b gy mp mm l mn mo">const date = parse(str, 'MM-dd-yyyy hh:m:ss', new Date());</span><span id="39ba" class="mk kp in mf b gy mp mm l mn mo">console.log(date.getHours()); // 9<br/>console.log(date.getDate()); // 15<br/>console.log(date); // 2022-06-15T08:13:50.000Z</span></pre><p id="ba4c" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated"><em class="nh">更新于:</em><a class="ae ng" href="https://cbdev.link/963dbb" rel="noopener ugc nofollow" target="_blank"><em class="nh">codingbeautydev.com</em></a></p></div><div class="ab cl ni nj hr nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ig ih ii ij ik"><p id="60c6" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">您可以在哪里找到我们:</p><p id="1ce7" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">🌐<a class="ae ng" href="https://cbdev.link/b621b9" rel="noopener ugc nofollow" target="_blank">网站</a> |🌟<a class="ae ng" href="https://twitter.com/CodingBeautyDev" rel="noopener ugc nofollow" target="_blank">推特</a>🌟<a class="ae ng" href="http://facebook.com/CodingBeautyDev" rel="noopener ugc nofollow" target="_blank">脸书</a></p></div><div class="ab cl ni nj hr nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ig ih ii ij ik"><h1 id="ef1b" class="ko kp in bd kq kr np kt ku kv nq kx ky jt nr ju la jw ns jx lc jz nt ka le lf bi translated">JavaScript做的每一件疯狂的事情</h1><p id="9a76" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph lg lh in li b lj mq jo ll lm mr jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated"><a class="ae ng" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="li io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>