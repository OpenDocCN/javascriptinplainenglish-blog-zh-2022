<html>
<head>
<title>React Navigation v6 with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用类型脚本反应导航版本6</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-navigation-v6-with-typescript-5c9c065d45a5?source=collection_archive---------0-----------------------#2022-07-11">https://javascript.plainenglish.io/react-navigation-v6-with-typescript-5c9c065d45a5?source=collection_archive---------0-----------------------#2022-07-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/408eead9a36aef224e6cbb41b100761d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qaSKyDhk-eJnN9-C"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/es/@lautaroandreani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2439" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">用TypeScript设置React本机移动应用程序导航非常简单。理解它只需要两步。</p><p id="f07d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你理解了这两个步骤，那么你就能够为你的react本地应用构建任何带有完整类型检查的导航。</p><ol class=""><li id="51cf" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">键入检查导航器。</li><li id="c1ee" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">检查单个屏幕的类型。</li></ol><p id="eb6d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们创建一个包含3个屏幕的本地堆栈导航结构:主页、设置和配置文件屏幕。</p><ol class=""><li id="a685" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated"><strong class="kc io">类型检查导航仪</strong></li></ol><p id="1652" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您需要做的第一件事是创建一个对象类型，将<strong class="kc io"> <em class="lm">路线名称</em> </strong>映射到路线的<strong class="kc io"> <em class="lm">参数</em> </strong>。在我们的例子中，我们的屏幕不依赖于任何参数，所以我们将路由名称映射到undefined。</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="515d" class="lw lx in ls b gy ly lz l ma mb"><em class="lm">// I call this object type </em><strong class="ls io"><em class="lm">RootStackParamList</em></strong></span><span id="3307" class="lw lx in ls b gy mc lz l ma mb"><em class="lm">export</em> <em class="lm">type</em> <strong class="ls io">RootStackParamList</strong> <em class="lm">=</em> {<br/>    <em class="lm">Home:</em> undefined;<br/>    <em class="lm">Profile:</em> undefined;<br/>    <em class="lm">Settings:</em> undefined;<br/>};</span></pre><p id="36ee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在当你用create<strong class="kc io">X</strong>Navigator(<strong class="kc io">X</strong>可以是Stack、BottomTab、Drawer)创建导航器时，你必须让它知道你上面创建的结构。</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="3278" class="lw lx in ls b gy ly lz l ma mb"><em class="lm">//Instead of this<br/>//const Stack = createNativeStackNavigator()</em>;</span><span id="bd28" class="lw lx in ls b gy mc lz l ma mb"><em class="lm"><br/>// Do this<br/>const Stack = createNativeStackNavigator&lt;</em><strong class="ls io"><em class="lm">RootStackParamList</em></strong><em class="lm">&gt;()</em>;</span></pre><p id="e5fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们可以创建导航器，如下所示:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="f6b9" class="lw lx in ls b gy ly lz l ma mb">&lt;Stack.Navigator <em class="lm">initialRouteName=</em>"Home"&gt;<br/>    &lt;Stack.Screen <em class="lm">name=</em>"Home" <em class="lm">component=</em>{() <em class="lm">=&gt;</em> &lt;View /&gt;} /&gt;<br/>    &lt;Stack.Screen <em class="lm">name=</em>"Profile" <em class="lm">component=</em>{() <em class="lm">=&gt;</em> &lt;View /&gt;} /&gt;<br/>    &lt;Stack.Screen <em class="lm">name=</em>"Settings" <em class="lm">component=</em>{() <em class="lm">=&gt;</em> &lt;View /&gt;} /&gt;&lt;/Stack.Navigator&gt;</span></pre><p id="c639" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的代码经过了全面的类型检查，屏幕的<code class="fe md me mf ls b"><strong class="kc io">name</strong></code>属性只能是您的<strong class="kc io"> <em class="lm"> RootStackParamList中定义的名称之一。</em> </strong> <em class="lm">已经享受到打字稿的好处了😇。</em></p><p id="f433" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将为<code class="fe md me mf ls b">Navigator</code>和<code class="fe md me mf ls b">Screen</code>组件的道具提供类型检查和智能感知。导航器的<code class="fe md me mf ls b"><strong class="kc io">initialRouteName</strong></code> <em class="lm"> </em>道具<em class="lm"> </em>只能是<strong class="kc io"><em class="lm">RootStackParamList</em></strong>对象中定义的键(Home、Profile、Settings)之一。</p><p id="34ea" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在到第二步。</p><p id="da08" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.<strong class="kc io">类型检查单个屏幕</strong></p><p id="cb15" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为什么我们需要对单个屏幕进行类型检查，因为我们需要注释一个屏幕接收到的<code class="fe md me mf ls b"><strong class="kc io">navigation</strong></code>道具和<code class="fe md me mf ls b"><strong class="kc io">route</strong></code>道具。当我们想导航到另一个屏幕时，我们需要智能感知，我们不想一直去导航器检查我们的屏幕名称，我们希望TypeScript向我们显示有效/可用的名称。</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="a4b7" class="lw lx in ls b gy ly lz l ma mb">// Every react-navigation screen receives <strong class="ls io">route</strong> and <strong class="ls io">navigation</strong> props<br/>function ProfileScreen({ <strong class="ls io">route</strong>, <strong class="ls io">navigation</strong> }) {<br/>  <em class="lm">// ...</em><br/>}</span></pre><p id="5089" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">React Navigation中的导航器包导出一个<strong class="kc io">通用类型</strong>来定义来自相应导航器的<code class="fe md me mf ls b">navigation</code>和<code class="fe md me mf ls b">route</code>道具的类型。</p><p id="39f8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，您可以使用<code class="fe md me mf ls b"><strong class="kc io">NativeStackScreenProps</strong></code>作为本机堆栈导航器(<code class="fe md me mf ls b">@react-navigation/native</code>)、使用<code class="fe md me mf ls b"><strong class="kc io">StackScreenProps</strong></code>作为堆栈导航器(<code class="fe md me mf ls b">@react-navigation/stack</code>)、使用<code class="fe md me mf ls b"><strong class="kc io">DrawerScreenProps</strong></code>作为抽屉导航器(<code class="fe md me mf ls b">@react-navigation/drawer</code>)、使用<code class="fe md me mf ls b"><strong class="kc io">BottomTabScreenProps</strong></code>作为底部标签导航器(<code class="fe md me mf ls b">@react-navigation/bottom-tabs</code>)等等。</p><p id="836d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于我们的例子，我们将使用<code class="fe md me mf ls b">NativeStackScreenProps</code>作为本机堆栈导航器。</p><p id="7069" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个类型有3个泛型:</p><ol class=""><li id="1900" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">参数列表对象是为导航器定义的(<strong class="kc io"> RootStackParamList) </strong></li><li id="c113" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">当前屏幕所属路线的名称。</li><li id="1702" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">导航器的ID(<strong class="kc io">这是可选的</strong>)</li></ol><p id="8583" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">举个例子，</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="e3f9" class="lw lx in ls b gy ly lz l ma mb">type Props = NativeStackScreenProps&lt;<strong class="ls io">RootStackParamList</strong>, '<strong class="ls io">Profile</strong>', '<em class="lm">MyStack</em>'&gt;;</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mg"><img src="../Images/fb919645a0b0af3940f3f683f65e2c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BCcx9iUiNM3XB2ndLKr_3w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Create Params for the Navigator and Create Props for the Screen</figcaption></figure><p id="b620" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们将此应用到我们的<strong class="kc io">个人资料屏幕</strong>。</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="b7dd" class="lw lx in ls b gy ly lz l ma mb"><em class="lm">type</em> <strong class="ls io">ProfileProps</strong> <em class="lm">=</em> NativeStackScreenProps&lt;RootStackParamList, 'Profile'&gt;;</span><span id="a066" class="lw lx in ls b gy mc lz l ma mb"><em class="lm">// Every react-navigation screen receives route and navigation props<br/>function</em> <strong class="ls io"><em class="lm">ProfileScreen</em></strong>({ route, navigation } <em class="lm">:</em> <strong class="ls io">ProfileProps</strong>) {<br/>    <em class="lm">// ...<br/></em>}</span></pre><p id="9417" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们可以使用<code class="fe md me mf ls b"><strong class="kc io">navigate</strong></code>、<code class="fe md me mf ls b"><strong class="kc io">push</strong></code>等输入您正在导航的<em class="lm">路线名称</em>和<em class="lm">参数</em>。TypeScript现在知道可以从Profile屏幕导航到哪些屏幕，如下所示。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/76d0c03d8dc5eb59ab31fcf1b2f05fce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IexZKNvKyTJ4J-557_v3zw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Intellisense on the navigate() function</figcaption></figure><p id="4006" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于我们的设置屏幕需要将<code class="fe md me mf ls b"><strong class="kc io">userID</strong></code>作为参数的场景，我们的参数列表如下所示:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="9cc7" class="lw lx in ls b gy ly lz l ma mb"><em class="lm">export</em> <em class="lm">type</em> RootStackParamList <em class="lm">=</em> {<br/>    <em class="lm">Home:</em> undefined;<br/>    <em class="lm">Profile:</em> undefined;<br/>    <em class="lm">Settings:</em> {<br/>        <em class="lm">userId:</em> number;<br/>    };</span><span id="adac" class="lw lx in ls b gy mc lz l ma mb">};</span></pre><p id="b550" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在TypeScript突出显示了如下所示的<code class="fe md me mf ls b">navigation.navigate('Settings')</code>:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mi"><img src="../Images/bdbcc28c0ef52c3aab9bdaa23fb43e91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iAeEAJNz_PN3y3GnVaN9PA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">TypeScript complaining about the Settings route</figcaption></figure><p id="9822" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是因为我们定义了设置路线来接受参数列表中的<code class="fe md me mf ls b"><strong class="kc io">userID</strong></code> <strong class="kc io"> </strong>参数。这就是为什么我们希望我们的导航由TypeScript进行类型检查。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/dcf4c325f2a83db21496031dbb8d39c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jCr04rp1hetyu2FYq6ZaNg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">What is needed?</figcaption></figure><p id="e4c8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将鼠标悬停在“导航”上，会显示如上所见的确切内容。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/dfb68e6fe41925f49810ef215116ec85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tGyOzqCLDJ_ZuAE1wM-e6g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">You can see the error has disappeared.</figcaption></figure><p id="ae63" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在navigate函数中使用<code class="fe md me mf ls b"><strong class="kc io">userID</strong></code> <strong class="kc io"> </strong>作为第二个参数传递params对象后，错误消失了。</p><p id="eeed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">享受使用TypeScript提供的适当的类型检查和智能感知来构建React导航。</p><p id="d43d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">根据React Navigation的建议，您可以根据您的项目将所有类型提取到一个单独的文件中。</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="6f35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将在下一个系列中介绍如何处理嵌套屏幕。</p><p id="1c88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lm">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lm">plain English . io</em></strong></a><em class="lm">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lm">免费周报</em> </strong> </a> <em class="lm">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lm">Twitter</em></strong></a><em class="lm">和</em><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lm">LinkedIn</em></strong></a><em class="lm">。查看我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lm">社区不和谐</em> </strong> </a> <em class="lm">加入我们的</em> <a class="ae jz" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lm">人才集体</em> </strong> </a> <em class="lm">。</em></p></div></div>    
</body>
</html>