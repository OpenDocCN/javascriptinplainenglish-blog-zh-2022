<html>
<head>
<title>The Power of Angular Guards: How They Work and When to Use Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角形防护装置的威力:它们如何工作以及何时使用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-power-of-angular-guards-how-they-work-and-when-to-use-them-db4482e945fd?source=collection_archive---------7-----------------------#2022-12-22">https://javascript.plainenglish.io/the-power-of-angular-guards-how-they-work-and-when-to-use-them-db4482e945fd?source=collection_archive---------7-----------------------#2022-12-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6473f5438b7370275f42aed42c3b20f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5uE5dHHiqBPMojW3XG5pg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@ember_?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ember Navarro</a> on <a class="ae jz" href="https://unsplash.com/s/photos/guards?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f81f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当涉及到限制用户访问您的应用程序中的路线时，角度防护是一个强有力的工具。它们可用于保护敏感路由、阻止非法访问和实现自定义逻辑，因为它们允许您指定用户访问特定路由时必须满足的要求。</p><p id="8d75" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我们将研究角度防护装置的基本原理及其操作。此外，我们还将介绍各种防护配置，以及在您的应用中何时适合使用它们。到本文结束时，您应该对如何在您的应用程序中利用角度防护来限制对路线的访问有了一个坚实的理解。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="9410" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">导航到某条路由之前路由器调用的功能称为角度防护。基于多个变量，如身份验证状态、权限或自定义逻辑，它们可用于决定是否允许用户访问路径。</p><p id="d915" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在角度应用中，<strong class="kc io">防护装置</strong>可能在下列情况下<strong class="kc io">有用</strong>:</p><ol class=""><li id="65fc" class="lf lg in kc b kd ke kh ki kl lh kp li kt lj kx lk ll lm ln bi translated"><strong class="kc io">执行异步任务</strong>:在路由启动之前，可以使用解析器保护执行异步操作，例如从服务器下载数据。这可以帮助您的应用程序更有效地运行，确保在触发路线时准备好显示数据。</li><li id="4f58" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io">保护敏感路由:</strong> Guards可以用来阻止未经授权的用户访问您的应用程序中的敏感路由，从而保护它们。例如，您可以雇用一名警卫来保证只有授权用户才能访问显示私人数据的路由。</li><li id="66c8" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io">阻止用户离开组件:</strong>组件防护可用于禁止用户离开组件，除非满足许多条件，如保存对表单的更改。通过这样做，用户可以确保在浏览组件时不会丢失重要信息。</li><li id="886d" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io">实现定制逻辑:</strong> Guards可用于提供定制逻辑，在您的应用程序中控制用户对路由的访问。例如，为了确保用户仅在满足特定要求的情况下才可以访问某个路由，例如拥有一定程度的权限或成员身份，您可以雇用一名警卫。</li></ol><p id="a6c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Angular应用程序中，警卫是管理路由访问和实现自定义逻辑的有用工具。通过允许您指定用户在访问路径之前必须满足的要求，它们可以帮助您提高服务的安全性和有用性。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="2e99" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">路线防护罩、组件防护罩和分解器防护罩是<strong class="kc io">角度防护罩</strong>的三个基本<strong class="kc io">类别</strong>。</p><ol class=""><li id="949d" class="lf lg in kc b kd ke kh ki kl lh kp li kt lj kx lk ll lm ln bi translated"><strong class="kc io">路由守卫</strong>:当用户试图前往某条路由时，路由器调用路由守卫的例程。它们可以通过返回一个布尔值或一个解析为布尔值的承诺来指示是否应该允许用户访问路径。</li><li id="168e" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io">组件防护</strong>:当用户试图激活一个组件时，路由器调用的函数称为组件防护。它们可用于在启用组件之前执行任务，或者阻止组件被实例化。</li><li id="68ff" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io">解析器保护:</strong>当用户试图行进到一个路由时，路由器调用解析器保护功能。在启用路由之前，它可用于解析路由的数据，使用户能够在路由被激活时查看数据。</li></ol></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="addb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">角度防护装置</strong>可在您的应用中以多种不同方式<strong class="kc io">配置</strong>:</p><ol class=""><li id="a7c7" class="lf lg in kc b kd ke kh ki kl lh kp li kt lj kx lk ll lm ln bi translated"><strong class="kc io"> CanActivate </strong>:一个被称为CanActivate的路由保护用于决定是否允许用户激活一个路由。它可用于添加自定义逻辑来管理对路由的访问，或阻止未经授权的用户访问敏感路由。</li><li id="657e" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io"> CanActivateChild </strong>:一个名为CanActivateChild的路由保护用于决定是否允许用户激活子路由。为了管理对嵌套路由的访问，它可以与CanActivate结合使用。</li><li id="dd71" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io"> CanDeactivate </strong>:用来评估用户是否可以去激活一个组件的组件保护称为CanDeactivate。它可以用来阻止用户在满足特定条件之前离开组件，例如保存对表单的更改。</li><li id="d497" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated"><strong class="kc io">解析</strong>:路由启动前，使用解析器保护解析路由数据。在路由激活之前，它可能用于从服务器加载数据或执行其他异步操作。</li><li id="b0b5" class="lf lg in kc b kd lo kh lp kl lq kp lr kt ls kx lk ll lm ln bi translated">CanLoad :一个被称为CanLoad的路由保护被用来决定一个用户是否被允许加载一个组件。</li></ol><p id="cfb7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这些只是Angular提供的各种防护设置的几个例子。通过利用这些保护和路由配置对象，可以限制对路由的访问，并在应用程序中实现自定义逻辑。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="8a2e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面是一个在角度应用中如何使用路线防护的示例:</p><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="04a5" class="mc md in ly b be me mf l mg mh">import { Injectable } from '@angular/core';<br/>import { CanActivate, Router } from '@angular/router';<br/>import { AuthService } from './auth.service';<br/><br/>@Injectable({<br/>  providedIn: 'root'<br/>})<br/>export class AuthGuard implements CanActivate {<br/>  constructor(<br/>  private authService: AuthService, <br/>  private router: Router<br/>) {}<br/><br/>  canActivate(): boolean {<br/>    if (this.authService.isAuthenticated()) {<br/>      return true;<br/>    } else {<br/>      this.router.navigate(['/login']);<br/>      return false;<br/>    }<br/>  }<br/>}</span></pre><p id="a830" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果用户通过了身份验证，路由守卫会使用<code class="fe mi mj mk ly b">AuthService</code>验证他们的身份验证状态，并授予他们访问路由的权限。如果用户未被授权，门卫禁止用户访问该路线，而是将他们引向<code class="fe mi mj mk ly b">login</code>页面。</p><p id="e794" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">必须将此保护添加到要保护的路由的路由配置对象中，以便使用:</p><pre class="lt lu lv lw gt lx ly lz bn ma mb bi"><span id="6bc0" class="mc md in ly b be me mf l mg mh">const routes: Routes = [<br/>  {<br/>    path: 'admin',<br/>    component: AdminComponent,<br/>    canActivate: [AuthGuard]<br/>  }<br/>];</span></pre><p id="6d97" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，每当用户试图访问<code class="fe mi mj mk ly b">/admin</code>路线时，就会调用<code class="fe mi mj mk ly b">AuthGuard</code>来确定用户是否应该被允许这样做。如果用户成功通过身份验证，将允许用户访问该路线。如果未通过身份验证，它们将被路由到登录页面。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="c152" class="ml md in bd mm mn mo dn mp mq mr dp ms kl mt mu mv kp mw mx my kt mz na nb nc bi translated">结论:</h2><p id="2b0a" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated">Angular guards使您能够限制对路线的访问并实现自定义逻辑，使它们成为增强应用程序安全性和功能的有用工具。通过了解如何在您的应用程序中使用和配置卫士，您可以充分利用卫士的功能来改善用户体验，并确保您的应用程序稳定可靠。</p><p id="4be9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望这篇文章对你有所帮助。<strong class="kc io"> <em class="ni">感谢阅读。</em> </strong></p><h2 id="60ea" class="ml md in bd mm mn mo dn mp mq mr dp ms kl mt mu mv kp mw mx my kt mz na nb nc bi translated">更多内容请访问<a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> PlainEnglish.io </a>。</h2><p id="e8a0" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated"><em class="ni">报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ni">免费每周简讯</em> </strong> </a> <em class="ni">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ni">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ni">LinkedIn</em></strong></a><strong class="kc io"><em class="ni"/></strong><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ni">YouTube</em></strong></a><strong class="kc io"><em class="ni">，以及</em></strong><em class="ni"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ni">不和</em> </strong> </a>T55】</p><h2 id="9278" class="ml md in bd mm mn mo dn mp mq mr dp ms kl mt mu mv kp mw mx my kt mz na nb nc bi translated">想扩大你的软件创业规模吗？检查<a class="ae jz" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank">电路</a>。</h2></div></div>    
</body>
</html>