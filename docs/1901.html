<html>
<head>
<title>Build a React Component Library Using TypeScript &amp; StoryBook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeScript &amp; StoryBook构建React组件库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-react-component-library-using-typescript-storybook-86d3562aa53a?source=collection_archive---------2-----------------------#2022-04-28">https://javascript.plainenglish.io/build-a-react-component-library-using-typescript-storybook-86d3562aa53a?source=collection_archive---------2-----------------------#2022-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8e74" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何创建和发布您的第一个React组件库的教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dfaf163f1aaadafc657f3a08e68bfd9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o7RFwA_mZ2AyD7tN"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@freegraphictoday?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AbsolutVision</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="47e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React组件库有助于在许多不同的项目中重用它们。如果项目变得更加复杂并且需要扩展，那么创建单独的组件库通常是一个好主意。</p><p id="92db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文将教你如何使用TypeScript和StoryBook创建我们的第一个React组件库包，并将其发布到NPM。</p><h1 id="e694" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤1:启动一个新的NPM项目</h1><p id="5cc5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">让我们首先创建一个新文件夹，并通过在终端中键入以下命令来初始化一个新的NPM项目:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="4fcf" class="mu lt iq mq b gy mv mw l mx my">npm init</span></pre><p id="926c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们给出它所要求的属性。在我的例子中，我给出了以下属性:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/c1e72c2f17decdb275b6d5d17f8d15a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QKabCzZT6V-hbQEa_PdeUQ.png"/></div></div></figure><p id="7737" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="na">注意:</em> </strong> <em class="na">您可能需要给出一个单独的包名，因为npm包必须是唯一的。</em></p><p id="f263" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，你会在项目根目录下得到一个<code class="fe nb nc nd mq b">package.json</code>文件。</p><h1 id="ff71" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤2:安装必要的软件包</h1><p id="fce8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下一步是安装必要的包来支持React和TypeScript。</p><p id="0271" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们通过在终端的根项目目录中输入下面的命令来安装下面的包:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3dea" class="mu lt iq mq b gy mv mw l mx my">npm install --save-dev react react-dom <a class="ae kv" href="http://twitter.com/types/node" rel="noopener ugc nofollow" target="_blank">@types/node</a> <a class="ae kv" href="http://twitter.com/types/react" rel="noopener ugc nofollow" target="_blank">@types/react</a> <a class="ae kv" href="http://twitter.com/types/react-dom" rel="noopener ugc nofollow" target="_blank">@types/react-dom</a> typescript</span></pre><p id="f265" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在我们的项目中安装React、React-Dom和TypeScript，并安装所有其他必需的节点包。</p><h1 id="4f75" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤3:添加React和React-Dom作为对等依赖</h1><p id="1a5c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">让我们从<code class="fe nb nc nd mq b">package.json</code>文件中复制<code class="fe nb nc nd mq b">react</code>和<code class="fe nb nc nd mq b">react-dom</code>依赖项，并将其粘贴到对等依赖项中，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/a310f3eec92bb930f766a616c7478bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*RBQ38x5iqT2dPF-YncMEaQ.png"/></div></figure><p id="1ec8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="na">注意:</em> </strong> <em class="na">不要从devDependencies中删除</em> <code class="fe nb nc nd mq b"><em class="na">react</em></code> <em class="na">和</em> <code class="fe nb nc nd mq b"><em class="na">react-dom</em></code> <em class="na">。</em></p><h1 id="1758" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤4:在Package.json中添加其他必要的属性</h1><p id="6b14" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">接下来，在<code class="fe nb nc nd mq b">package.json</code>文件中更改以下属性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/0cba7d33a49d2ce57842e770b486d1ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BpnPlsFN9-UlwEYo9ul9mA.png"/></div></div></figure><p id="f6d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们正在构建两种不同的类型，因为我们允许使用普通JavaScript和TypeScript的人使用我们的包。</p><p id="fcbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">修改完所有的更改后，我们的<code class="fe nb nc nd mq b">package.json</code>应该看起来像下面这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/e819a975dc8154ab33ec9e7b45c38cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yI9o8jFMEElNMZbe4shmdw.png"/></div></div></figure><h1 id="40f2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤5:将TSConfig添加到我们的项目中</h1><p id="88d0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">接下来，我们将ts配置文件添加到我们的项目中。我们可以通过在终端中键入以下命令来添加它:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="6f4b" class="mu lt iq mq b gy mv mw l mx my">tsc --init</span></pre><p id="55f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在项目的根目录下创建一个<code class="fe nb nc nd mq b">tsconfig.json</code>文件。</p><p id="d90f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们需要修改<code class="fe nb nc nd mq b">tsconfig.json</code>文件，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="d910" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤6:将故事书安装到我们的项目中</h1><p id="cb2f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在这一部分，我们将为我们的项目安装故事书。让我们通过在终端中编写以下命令来启动故事书:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9f7b" class="mu lt iq mq b gy mv mw l mx my">npx sb init</span></pre><p id="44eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在我们的项目根文件夹中创建两个目录:<code class="fe nb nc nd mq b">stories</code>和<code class="fe nb nc nd mq b">.storybook</code>。我们可以通过在终端中键入以下命令来运行故事书:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9168" class="mu lt iq mq b gy mv mw l mx my">npm run storybook</span></pre><p id="50cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将得到如下所示的界面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/1640d1e65bac76bbedecd23a74d22fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c_MXgzBNf7-QdtGxEkClGg.png"/></div></div></figure><h1 id="53ff" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤7:创建我们的组件</h1><p id="8548" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这是最好玩的部分，也是构建react组件库的首要功能。</p><p id="7b79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将构建一个用于演示的按钮。但是您可以在React组件库中实现任何东西。</p><p id="94f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们创建一个<code class="fe nb nc nd mq b">src</code>文件夹，并在其中创建一个<code class="fe nb nc nd mq b">index.ts</code>文件。让我们在<code class="fe nb nc nd mq b">src</code>目录下创建一个<code class="fe nb nc nd mq b">components</code>文件夹。</p><p id="3b2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们在<code class="fe nb nc nd mq b">components</code>文件夹中创建<code class="fe nb nc nd mq b">Button.tsx</code>组件。</p><p id="6004" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是我对一个简单按钮组件的实现:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7298" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们在<code class="fe nb nc nd mq b">components</code>文件夹中创建一个<code class="fe nb nc nd mq b">index.ts</code>文件，并粘贴下面的代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/c5f296a0156fc96563298b17f2d48ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*Y6bwEzz_arQ67XCeeTRtoQ.png"/></div></figure><p id="de41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们也改变我们的<code class="fe nb nc nd mq b">src</code>文件夹中的<code class="fe nb nc nd mq b">index.ts</code>文件，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/9b45f7c88f43f1d7bfa59a953880fb3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*UoZtKKIQfq5erQrKqoH2eQ.png"/></div></figure><p id="5f0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们构建我们的组件时，我们还需要可视化它们并记录它们。现在是在StoryBook上查看我们的组件的最佳时机。</p><p id="3027" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们删除<code class="fe nb nc nd mq b">stories</code>文件夹中的所有文件，因为我们是从头开始创建它们的。让我们在故事文件夹中制作<code class="fe nb nc nd mq b">Button.stories.tsx</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="2d50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我的<code class="fe nb nc nd mq b">Button.stories.tsx</code>文件。保存文件后，我们可以在故事书中看到我们的组件，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/eab49965269b559de38326424d7cc45f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PfkyZTo5xwQzCjeZ8qBmgg.png"/></div></div></figure><h1 id="1c85" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤8:构建我们的项目</h1><p id="a86a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">创建了我们的项目之后，是时候构建我们的项目了。我们可以键入以下命令来构建我们的库:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="2b1b" class="mu lt iq mq b gy mv mw l mx my">npm run build</span></pre><p id="371d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果一切构建正确，我们可以在项目的根目录中看到<code class="fe nb nc nd mq b">dist</code>文件夹。</p><h1 id="6079" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤9:将我们的库发布到NPM</h1><p id="95ec" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在创建了组件并成功构建了项目之后，是时候将我们的库发布到NPM了。为此，我们需要首先在<a class="ae kv" href="https://www.npmjs.com" rel="noopener ugc nofollow" target="_blank"> NPM网站</a>上创建一个账户。</p><p id="9677" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们需要通过在终端中键入<code class="fe nb nc nd mq b">npm login</code>从我们的终端登录到NPM。</p><p id="421d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">成功登录后，我们可以通过在终端中键入以下命令来发布我们的库:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b145" class="mu lt iq mq b gy mv mw l mx my">npm publish</span></pre><p id="f605" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="na">注意:</em> </strong> <em class="na">您需要先验证您的电子邮件，才能将包发布到npm。</em></p><h1 id="4710" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="eb03" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">恭喜你出版了我们的第一个NPM套餐！在本文中，我们看到了如何将我们的第一个React组件库发布到启用了TypeScript和Storybook的NPM。</p><p id="40ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读我的文章。祝您愉快！</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><h2 id="bd27" class="mu lt iq bd lu nt nu dn ly nv nw dp mc lf nx ny me lj nz oa mg ln ob oc mi od bi translated">进一步阅读</h2><div class="oe of gp gr og oh"><a href="https://bit.cloud/blog/building-a-composable-ui-component-library--l33jy1vs" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">构建可组合的UI组件库</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">如何构建组件库？React组件库，包含可组合的组件。</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">比特云</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kp oh"/></div></div></a></div><p id="7f37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">plain English . io</em></strong></a><em class="na">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="na">免费周报</em> </strong> </a> <em class="na">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">LinkedIn</em></strong></a><strong class="ky ir"><em class="na"/></strong><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">YouTube</em></strong></a><strong class="ky ir"><em class="na">，以及</em></strong><em class="na"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">不和</em> </strong> </a>  <em class="na">对成长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="na">电路</em> </strong> </a> <strong class="ky ir"> <em class="na">。</em> </strong></p></div></div>    
</body>
</html>