<html>
<head>
<title>How to Silently Update URL in Nuxt 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Nuxt 3中静默更新URL</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/silently-update-url-in-nuxt-3-a280762f4ba?source=collection_archive---------14-----------------------#2022-02-15">https://javascript.plainenglish.io/silently-update-url-in-nuxt-3-a280762f4ba?source=collection_archive---------14-----------------------#2022-02-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4209bea635fbd35cc732c156ae332733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jEjg80Vj4-IPnCfby1qG_A.png"/></div></div></figure><blockquote class="jv jw jx"><p id="53d0" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们经常需要在不刷新页面的情况下更新URL中的查询参数，如<code class="fe kx ky kz la b">?search=hello</code>。我将快速向您展示如何使用Nuxt 3来实现这一点。</p></blockquote><figure class="lc ld le lf gt jo gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/f5b8a6323e3c78dfbdc569d29c08b385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*g8Un9fHHdvdF8gtd.gif"/></div></figure><h2 id="6715" class="lg lh in bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">收集用户输入</h2><p id="0e8b" class="pw-post-body-paragraph jy jz in kb b kc mc ke kf kg md ki kj lp me km kn lt mf kq kr lx mg ku kv kw ig bi translated">对于本教程，我将使用一个简单的带有<code class="fe kx ky kz la b">v-model</code>的<code class="fe kx ky kz la b">&lt;input&gt;</code>字段来收集查询参数。</p><pre class="lc ld le lf gt mh la mi mj aw mk bi"><span id="4685" class="lg lh in la b gy ml mm l mn mo">&lt;!-- pages/example.vue --&gt;<br/>&lt;template&gt;<br/>  &lt;input v-model="twitchStreamer" /&gt;<br/>&lt;/template&gt;</span></pre><p id="e950" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lp kl km kn lt kp kq kr lx kt ku kv kw ig bi translated"><code class="fe kx ky kz la b">twitchStreamer</code>现在是一个<a class="ae mp" href="https://vuejs.org/guide/extras/reactivity-in-depth.html" rel="noopener ugc nofollow" target="_blank">反应变量</a>，我们可以在<code class="fe kx ky kz la b">setup()</code>中使用它。</p><pre class="lc ld le lf gt mh la mi mj aw mk bi"><span id="6cc7" class="lg lh in la b gy ml mm l mn mo">// pages/example.vue<br/>&lt;script&gt;<br/>  setup() {<br/>    const twitchStreamer = ref('')<br/><br/>    return { twitchStreamer }<br/>&lt;/script&gt;</span></pre><h2 id="9d8b" class="lg lh in bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Nuxt 3的useRouter()</h2><blockquote class="jv jw jx"><p id="f696" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我不确定Nuxt 2和Nuxt 3有什么不同，但是到目前为止还没有。</p></blockquote><p id="e833" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lp kl km kn lt kp kq kr lx kt ku kv kw ig bi translated">在<code class="fe kx ky kz la b">setup()</code>内，调用自动导入的函数<code class="fe kx ky kz la b">useRouter()</code>来访问<code class="fe kx ky kz la b">router</code>对象。</p><pre class="lc ld le lf gt mh la mi mj aw mk bi"><span id="1497" class="lg lh in la b gy ml mm l mn mo">// pages/example.vue<br/>&lt;script&gt;<br/>  setup() {<br/>    const router = useRouter()<br/>    const twitchStreamer = ref('')<br/><br/>    return { twitchStreamer }<br/>&lt;/script&gt;</span></pre><h2 id="4cc7" class="lg lh in bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将v模型输入连接到我们的URL</h2><p id="933d" class="pw-post-body-paragraph jy jz in kb b kc mc ke kf kg md ki kj lp me km kn lt mf kq kr lx mg ku kv kw ig bi translated">现在，设置一个观察器来观察我们的<code class="fe kx ky kz la b">twitchStreamer</code> v-model值，这样每次更新它的值时，都会运行一点代码。</p><pre class="lc ld le lf gt mh la mi mj aw mk bi"><span id="1bd2" class="lg lh in la b gy ml mm l mn mo">// pages/example.vue<br/>&lt;script&gt;<br/>  setup() {<br/>    const router = useRouter()<br/>    const twitchStreamer = ref('')<br/><br/>    watch(twitchStreamer, (twitchStreamer, previous) =&gt; {<br/>      router.push({<br/>        path: '/test',<br/>        query: { streamer: twitchStreamer },<br/>      })<br/>    })<br/><br/>    return { twitchStreamer }<br/>&lt;/script&gt;</span></pre><p id="f408" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lp kl km kn lt kp kq kr lx kt ku kv kw ig bi translated">每次twitchStreamer值发生变化时，我们使用带有更新查询的<a class="ae mp" href="https://router.vuejs.org/guide/essentials/navigation.html" rel="noopener ugc nofollow" target="_blank"> vue-router </a>推送至我们的URL。</p><p id="2a80" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lp kl km kn lt kp kq kr lx kt ku kv kw ig bi translated"><code class="fe kx ky kz la b">.push</code>的查询参数接受一个键和值。本例中的键是<code class="fe kx ky kz la b">streamer</code>。</p><p id="72bb" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lp kl km kn lt kp kq kr lx kt ku kv kw ig bi translated">因此，更新后的url将看起来像是在=符号后带有值<code class="fe kx ky kz la b">twitchStreamer</code>的<code class="fe kx ky kz la b">/test?streamer=</code>。</p><h2 id="bb56" class="lg lh in bd li lj lk dn ll lm ln dp lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最终代码片段</h2><pre class="lc ld le lf gt mh la mi mj aw mk bi"><span id="647e" class="lg lh in la b gy ml mm l mn mo">&lt;!-- pages/example.vue --&gt;<br/>&lt;template&gt;<br/>  &lt;input v-model="twitchStreamer" /&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>  setup() {<br/>    const router = useRouter()<br/>    const twitchStreamer = ref('')<br/><br/>    watch(twitchStreamer, (twitchStreamer, previous) =&gt; {<br/>      router.push({<br/>        path: '/test',<br/>        query: { streamer: twitchStreamer },<br/>      })<br/>    })<br/><br/>    return { twitchStreamer }<br/>&lt;/script&gt;</span></pre><p id="b78b" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lp kl km kn lt kp kq kr lx kt ku kv kw ig bi translated"><em class="ka">更多内容看</em> <a class="ae mp" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ka">说白了就是</em> </strong> </a> <em class="ka">。报名参加我们的</em> <a class="ae mp" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ka">免费每周简讯</em> </strong> </a> <em class="ka">。在我们的</em> <a class="ae mp" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ka">社区不和谐</em> </strong> </a> <em class="ka">获得独家获取写作机会和建议。</em></p></div></div>    
</body>
</html>