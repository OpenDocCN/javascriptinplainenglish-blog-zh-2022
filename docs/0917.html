<html>
<head>
<title>React Crash Course — JSON Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React速成班— JSON服务器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-crash-course-json-server-8f58dc44c271?source=collection_archive---------11-----------------------#2022-02-21">https://javascript.plainenglish.io/react-crash-course-json-server-8f58dc44c271?source=collection_archive---------11-----------------------#2022-02-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="21b4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第6部分:用模拟后端原型化React应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1961cdbd0dad5b3dcf017d01456e5d9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Yt6ahbjZn36O0MP0"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@lautaroandreani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a8c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls"> Live dev笔记由</em><a class="ae kv" href="https://www.youtube.com/channel/UCTZRcDjjkVajGL6wd76UnGg" rel="noopener ugc nofollow" target="_blank"><em class="ls">Dennis Ivy</em></a><em class="ls">——</em><a class="ae kv" href="https://www.youtube.com/watch?v=6fM3ueN9nYM" rel="noopener ugc nofollow" target="_blank"><em class="ls">React JS速成班</em> </a></p><blockquote class="lt"><p id="a042" class="lu lv iq bd lw lx ly lz ma mb mc lr dk translated">在第6部分中，我们将研究如何为我们的notes构建一个快速模拟服务器。我们将为原型请求创建一个伪API，类似于后端服务器，而不是从零开始构建API。</p></blockquote></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="d206" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你也可以参考我的Github repo:</p><div class="mk ml gp gr mm mn"><a href="https://github.com/emilyyleung/notesapp/tree/Part-6/JSON-Server" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd ir gy z fp ms fr fs mt fu fw ip bi translated">GitHub-Emily leung/notes app at Part-6/JSON-Server</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">在GitHub上创建一个帐户，为Emily leung/notes app的开发做出贡献。</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">github.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb kp mn"/></div></div></a></div></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="44cf" class="nc nd iq bd ne nf ng nh ni nj nk nl nm jw nn jx no jz np ka nq kc nr kd ns nt bi translated">安装<code class="fe nu nv nw nx b">json-server</code></h1><p id="0765" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">通常，后端服务器是使用NodeJS和ExpressJS或者Python和Django构建的。然而，从头开始设置一个API的时间可能会很长，因此，我们将使用<code class="fe nu nv nw nx b">json-server</code>包创建一个快速的虚拟API系统来测试我们的应用程序。</p><p id="e017" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要安装<code class="fe nu nv nw nx b">json-server</code>包:</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="063e" class="oh nd iq nx b gy oi oj l ok ol">npm install -g json-server</span></pre><h1 id="732d" class="nc nd iq bd ne nf om nh ni nj on nl nm jw oo jx no jz op ka nq kc oq kd ns nt bi translated">启动快速服务器</h1><p id="4054" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated"><code class="fe nu nv nw nx b">json-server</code>读取和写入一个用于表示数据库的JSON文件。我们可以选择使用文本编辑器创建这个JSON文件，或者运行相同的命令为我们创建文件(同时提供服务)。</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="3f7f" class="oh nd iq nx b gy oi oj l ok ol">json-server --watch db.json</span></pre><h1 id="1de7" class="nc nd iq bd ne nf om nh ni nj on nl nm jw oo jx no jz op ka nq kc oq kd ns nt bi translated">定制我们的服务器</h1><p id="35d5" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">默认情况下，服务器将在端口3000上运行，但是由于我们的React项目当前正在使用这个端口，我们可以使用<code class="fe nu nv nw nx b">--port</code>标志分配一个新端口。</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="591d" class="oh nd iq nx b gy oi oj l ok ol">json-server --watch db.json <strong class="nx ir">--port 8000</strong></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/cb859134e0016e84539bdcd536496e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/0*FmQ1hzl5gsmBi6xd"/></div></figure><p id="5c0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，默认情况下，JSON文件将在项目的最高级别父文件夹中创建。如果您想在子文件夹中创建它，<strong class="ky ir">首先确认该文件夹已经被创建</strong>。然后将目录添加到文件的路径中。</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="2a17" class="oh nd iq nx b gy oi oj l ok ol">json-server --watch <strong class="nx ir">./data/db.json</strong> --port 8000</span></pre><h1 id="011c" class="nc nd iq bd ne nf om nh ni nj on nl nm jw oo jx no jz op ka nq kc oq kd ns nt bi translated">如何发出请求和访问数据</h1><p id="30a4" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">由<code class="fe nu nv nw nx b">json-server</code>提供的基本JSON让我们了解了它是如何工作的。</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="be25" class="oh nd iq nx b gy oi oj l ok ol">{<br/>  "posts": [<br/>    {<br/>      "id": 1,<br/>      "title": "json-server",<br/>      "author": "typicode"<br/>    }<br/>  ],<br/>  "comments": [<br/>    {<br/>      "id": 1,<br/>      "body": "some comment",<br/>      "postId": 1<br/>    }<br/>  ],<br/>  "profile": {<br/>    "name": "typicode"<br/>  }<br/>}</span></pre><p id="a040" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了测试模拟API的工作情况，我们可以打开浏览器并访问以下路径:</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="5972" class="oh nd iq nx b gy oi oj l ok ol"># Access all posts<br/><strong class="nx ir">http://localhost:8000/posts</strong><br/><br/># Access a single post by id<br/><strong class="nx ir">http://localhost:8000/posts/1</strong></span></pre><h1 id="0527" class="nc nd iq bd ne nf om nh ni nj on nl nm jw oo jx no jz op ka nq kc oq kd ns nt bi translated">使用我们自己的数据</h1><p id="fe4a" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">让我们用我们自己的数据代替这些数据。</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="20e1" class="oh nd iq nx b gy oi oj l ok ol">{<br/>  "notes": [<br/>    {<br/>      "id": 1,<br/>      "body": "Todays Agenda\n\n- Walk Dog\n- Feed fish\n- Play basketball\n- Eat a salad",<br/>      "updated": "2021-07-14T13:49:02.078653Z"<br/>    },<br/>    {<br/>        "id": 2,<br/>        "body": "Bob from bar down the \n\n- Take out trash\n- Eat food",<br/>        "updated": "2021-07-13T20:43:18.550058Z"<br/>    },<br/>    {<br/>        "id": 3,<br/>        "body": "Wash car",<br/>        "updated": "2021-07-13T19:46:12.187306Z"<br/>    }<br/>  ]<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/89b387dacf66ddc7137a59befe68a0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6bdrvAVfXnsR4K_-"/></div></div></figure><h1 id="c0cd" class="nc nd iq bd ne nf om nh ni nj on nl nm jw oo jx no jz op ka nq kc oq kd ns nt bi translated">自动化服务器启动</h1><p id="4489" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">我们可以将这个命令存储在我们的<code class="fe nu nv nw nx b">package.json</code>文件的一个脚本中，而不是每次我们想要启动服务器时都运行这个冗长的命令。</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="e239" class="oh nd iq nx b gy oi oj l ok ol">// package.json</span><span id="5c13" class="oh nd iq nx b gy ot oj l ok ol">{<br/> ...<br/> "scripts": {<br/>  ...<br/>    <strong class="nx ir">"server": "json-server --watch db.json --port 8000"</strong><br/> }<br/> ...<br/>}</span></pre><p id="7249" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从现在开始，我们只需要运行下面的命令来启动和运行我们的模拟服务器:</p><pre class="kg kh ki kj gt od nx oe of aw og bi"><span id="780e" class="oh nd iq nx b gy oi oj l ok ol">npm run server</span></pre><p id="c1dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">plain English . io</em></strong></a><em class="ls">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">社区</em> </strong> </a> <em class="ls">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>