<html>
<head>
<title>How to Sort an Array without Using JavaScript’s Sort Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在不使用JavaScript的排序方法的情况下对数组排序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/sorting-array-without-using-javascript-sort-method-430cdeddb4e5?source=collection_archive---------4-----------------------#2022-01-02">https://javascript.plainenglish.io/sorting-array-without-using-javascript-sort-method-430cdeddb4e5?source=collection_archive---------4-----------------------#2022-01-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ff1b88d425fd037d24551a2bef36a8e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aSDeEJ5TauzjA_Kh"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kelly Sikkema</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e71a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在从事软件项目时，我们经常需要对数据进行分类。不出所料，在JavaScript中，数组有一个内置的方法<code class="fe ky kz la lb b">Array#sort</code>,用于对数组进行排序。</p><p id="ad7d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">Array#sort</code>方法采用一个回调函数，该函数应该返回一个用于对数组排序的整数。您可以在<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" rel="noopener ugc nofollow" target="_blank"> MDN docs </a>中详细了解分类方法。如果你想深入了解V8引擎中排序是如何实现的，你也可以在这里阅读<a class="ae jz" href="https://v8.dev/blog/array-sort" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="fbf6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在某些情况下，使用<code class="fe ky kz la lb b">Array#sort</code>会导致代码不可读。其中一种情况是排序项目不遵循任何时间顺序。例如，假设有一些数据要排序，数据的形状是:</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="11f0" class="lk ll in lb b gy lm ln l lo lp">interface Object {<br/>    _id: string,<br/>    status: '<!-- -->Matched' | 'Active' | 'Paused' | 'Completed' | 'Cancelled'<br/>}</span></pre><p id="ea25" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">数据应该按<code class="fe ky kz la lb b">status</code>排序，但排序的顺序是:<code class="fe ky kz la lb b">Matched &gt; Active &gt; Paused &gt; Completed &gt; Cancelled</code>，这意味着:带有<code class="fe ky kz la lb b">status == 'Matched'</code>的项目应该首先出现在列表中。有<code class="fe ky kz la lb b">status == 'Active'</code>的项目应该出现在其后，依此类推。</p><p id="782f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要对这种类型的数据进行排序，可以首先按属性对列表进行分组，然后使用预定义的标准列表将其映射到排序列表中。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="b83e" class="lk ll in lb b gy lm ln l lo lp">import { groupBy } from 'lodash';</span><span id="e887" class="lk ll in lb b gy lq ln l lo lp">const groupedData = groupBy(data, 'status');</span><span id="e076" class="lk ll in lb b gy lq ln l lo lp">const ascOrder = [<br/>    'Matched','Active','Paused','Completed','<!-- -->Cancelled<!-- -->'<br/>];</span><span id="2d69" class="lk ll in lb b gy lq ln l lo lp">const sortedData = ascOrder<br/>    .flatMap(status =&gt; groupedData[status])<br/>    .filter(isNotEmpty)</span></pre><p id="cb21" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里使用了<code class="fe ky kz la lb b">flatMap</code>而不是<code class="fe ky kz la lb b">map</code>，因为<code class="fe ky kz la lb b">map</code>会给出一个嵌套数组，而该数组需要单独展平。此外，使用<code class="fe ky kz la lb b">Array#filter</code>是因为有可能某些状态没有项目，这会将<code class="fe ky kz la lb b">holes</code>留在结果数组中。</p><p id="6e08" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以在<a class="ae jz" href="https://stackblitz.com/edit/typescript-gspi36?embed=1&amp;file=index.ts" rel="noopener ugc nofollow" target="_blank"> StackBlitz </a>上看到完整的例子。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="31ec" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lt">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lt">plain English . io</em></a><em class="lt">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lt">免费每周简讯</em> </a> <em class="lt">。在我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="lt">社区不和谐</em> </a> <em class="lt">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>