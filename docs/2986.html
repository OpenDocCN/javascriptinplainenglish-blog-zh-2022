<html>
<head>
<title>How to Check if a Background Image is Loaded with JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何检查一张背景图片是否加载了JavaScript？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-check-if-a-background-image-is-loaded-with-javascript-32088a0d1f1e?source=collection_archive---------3-----------------------#2022-07-20">https://javascript.plainenglish.io/how-to-check-if-a-background-image-is-loaded-with-javascript-32088a0d1f1e?source=collection_archive---------3-----------------------#2022-07-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="39e1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何用JavaScript检查页面上是否加载了背景图片的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b16227bbf4c10ba0e778422159dfd641.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UiJVdFuQZ7YTsxD0"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ballparkbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ball Park Brand</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a36f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时，我们想检查背景图片是否加载了JavaScript。</p><p id="466c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将看看如何用JavaScript检查页面上是否加载了背景图像。</p><h1 id="3f89" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">侦听加载事件</h1><p id="d3db" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以监听一个背景图片的<code class="fe mp mq mr ms b">load</code>事件，看看它是否被加载。</p><p id="3237" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果它被加载，那么我们可以将背景图像设置为与背景图像具有相同URL的图像。</p><p id="c5b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以写:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="fc82" class="mx lt iq ms b gy my mz l na nb">const imageUrl = "https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png";<br/>const bgElement = document.querySelector("body");<br/>let preloaderImg = document.createElement("img");<br/>preloaderImg.src = imageUrl;</span><span id="eecc" class="mx lt iq ms b gy nc mz l na nb">preloaderImg.addEventListener('load', (event) =&gt; {<br/>  bgElement.style.backgroundImage = `url(${imageUrl})`;<br/>  preloaderImg = null;<br/>});</span></pre><p id="9d9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有一个<code class="fe mp mq mr ms b">imageUrl</code>,它包含了我们想要作为背景图片加载的图片。</p><p id="1620" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们用<code class="fe mp mq mr ms b">document.querySelector</code>得到主体元素。</p><p id="cb6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们用我们想要预加载的图像创建带有<code class="fe mp mq mr ms b">document.createElement</code>的<code class="fe mp mq mr ms b">preloaderImg</code>元素。</p><p id="bcca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将<code class="fe mp mq mr ms b">preloaderImg.src</code>设置为<code class="fe mp mq mr ms b">imageUrl</code>。</p><p id="0734" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们调用<code class="fe mp mq mr ms b">preloaderImg</code>上的<code class="fe mp mq mr ms b">addEventListener</code>，用<code class="fe mp mq mr ms b">'load'</code>作为第一个参数来观察<code class="fe mp mq mr ms b">preloaderImg</code>的加载。</p><p id="8a54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回调将在加载后运行。</p><p id="f20b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们可以设置<code class="fe mp mq mr ms b">bgElement.style.backgroundImage</code>来将背景图像设置为加载到<code class="fe mp mq mr ms b">preloaderImg</code>元素中的图像。</p><p id="b028" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们将<code class="fe mp mq mr ms b">preloaderImg</code>设置为<code class="fe mp mq mr ms b">null</code>来清除预加载的图像。</p><p id="2867" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们应该看到页面上加载的背景图像。</p><h1 id="8b47" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="20f4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以监听一个图像元素的<code class="fe mp mq mr ms b">load</code>事件，看看是否加载了一个图像。</p><p id="e11b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后一旦它被加载，我们就可以使用预加载图像的图像URL来设置页面的背景图像。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="6a7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nk">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nk">plain English . io</em></strong></a><em class="nk">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nk">免费周报</em> </strong> </a> <em class="nk">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nk">Twitter</em></strong></a><em class="nk">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nk">LinkedIn</em></strong></a><em class="nk">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nk">社区不和谐</em> </strong> </a> <em class="nk">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nk">人才集体</em> </strong> </a> <em class="nk">。</em></p></div></div>    
</body>
</html>