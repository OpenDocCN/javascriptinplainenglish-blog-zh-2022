<html>
<head>
<title>Sanitize your HTML and keep its style in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">净化你的HTML并在React中保持它的风格</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/sanitize-your-html-and-keep-its-style-in-react-1ff9fdd8e3cc?source=collection_archive---------3-----------------------#2022-01-21">https://javascript.plainenglish.io/sanitize-your-html-and-keep-its-style-in-react-1ff9fdd8e3cc?source=collection_archive---------3-----------------------#2022-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7e5d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">净化HTML是避免XSS攻击的一部分，但是如何保持你的CSS在里面呢？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ac173d5adb81726337935c7f734c5c5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h0PSPoGm_fe9OXWp8VRA0w.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">How to make your article trendy (Photo by <a class="ae kv" href="https://www.pexels.com/@cottonbro?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">cottonbro</a> from <a class="ae kv" href="https://www.pexels.com/photo/person-holding-clear-glass-bottle-4114703/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a>)</figcaption></figure><p id="e2e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">净化你的HTML可以让你<strong class="ky ir">避免XSS漏洞</strong>，让你的应用<strong class="ky ir">更安全</strong>。</p><p id="25fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在React中，如果你打算使用<code class="fe ls lt lu lv b">dangerouslySetInnerHTML</code>，你可能想要<strong class="ky ir">净化你的HTML </strong>，并确保它不会使你的应用程序<strong class="ky ir">易受攻击</strong>。</p><h1 id="2476" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">如何净化我的HTML代码？</h1><p id="f183" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">因为在React中没有本地的方法来做这件事(不幸的是，我们将求助于一个外部库)。</p><p id="10a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我为这个操作找到的最佳选择叫做<a class="ae kv" href="https://github.com/cure53/DOMPurify" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> dompurify </strong> </a>。你所要做的就是安装它:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="326d" class="my lx iq lv b gy mz na l nb nc">npm install -i dompurify</span></pre><p id="eb56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您的代码中导入它</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="2c89" class="my lx iq lv b gy mz na l nb nc">import dompurify from 'dompurify';</span></pre><p id="1b36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后就<em class="mt">净化</em>你的HTML！</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="e27b" class="my lx iq lv b gy mz na l nb nc">dompurify.sanitize(MyHTMLString);</span></pre><p id="667c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在这个配置中，<strong class="ky ir">样式没有被保留</strong>,因为净化去掉了很多HTML。为了保持您的风格，我们将使用作为函数的第二个参数给出的选项。</p><p id="f540" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们正在寻找的选项是<code class="fe ls lt lu lv b">FORCE_BODY: true</code>。因此，让我们将它添加到我们的代码中:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="4a5f" class="my lx iq lv b gy mz na l nb nc">dompurify.sanitize(MyHTMLString, {FORCE_BODY: true});</span></pre><p id="3292" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊。现在你应该保持你的风格，并且能够安全地将你的HTML字符串插入到<code class="fe ls lt lu lv b">dangerouslySetInnerHTML</code>中！</p><p id="af8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mt">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mt">plain English . io</em></strong></a><em class="mt">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mt">免费每周简讯</em> </strong> </a> <em class="mt">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mt">社区</em> </strong> </a> <em class="mt">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>