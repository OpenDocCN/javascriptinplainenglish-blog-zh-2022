<html>
<head>
<title>State Management with Context API &amp; Custom MultiSelect Hook in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中使用上下文API和自定义多选挂钩的状态管理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/state-management-with-context-api-and-custom-multiselect-hook-in-reactjs-ed3109cce175?source=collection_archive---------9-----------------------#2022-07-27">https://javascript.plainenglish.io/state-management-with-context-api-and-custom-multiselect-hook-in-reactjs-ed3109cce175?source=collection_archive---------9-----------------------#2022-07-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="be8b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何创建自定义钩子，在React中使用上下文API，以及在应用程序中的任何地方使用状态管理。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3bb23ae98ad97211fac54598dbf4d5b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PtzvMk9SotP91rpPP1qvJg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">State Management with Context API and custom hooks</figcaption></figure><h2 id="665b" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">概观</h2><ul class=""><li id="2b74" class="lo lp in lq b lr ls lt lu lb lv lf lw lj lx ly lz ma mb mc bi translated">创建自定义多选挂钩</li><li id="e13f" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated">创建一个上下文，并在其中使用多选挂钩</li><li id="1ee4" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated">使用React挂钩和上下文API创建一个演示来测试状态管理</li></ul><h2 id="12a7" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">先决条件</h2><ul class=""><li id="8344" class="lo lp in lq b lr ls lt lu lb lv lf lw lj lx ly lz ma mb mc bi translated">关于React <a class="ae mi" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank">钩子</a>和<a class="ae mi" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">上下文API </a>的基础知识</li></ul><h2 id="1e7e" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">第1部分:创建一个定制的多选挂钩</h2><ul class=""><li id="4300" class="lo lp in lq b lr ls lt lu lb lv lf lw lj lx ly lz ma mb mc bi translated">自定义挂钩的名称是<code class="fe mj mk ml mm b">useSelection</code></li><li id="0cc7" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated">我们首先为我们的选择声明一个<code class="fe mj mk ml mm b">useState</code>。在这个钩子里面我们有三个函数:<code class="fe mj mk ml mm b">addSelection</code>、<code class="fe mj mk ml mm b">addMultipleSelection</code>和<code class="fe mj mk ml mm b">clearSelection</code>。</li><li id="0fe4" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated"><code class="fe mj mk ml mm b">addSelection</code>接受2个参数，item设置，clear清空选择。</li><li id="2866" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated"><code class="fe mj mk ml mm b">addMultipleSelection</code>在数组内部设置多重选择(我们将在下面看到如何使用它)。</li><li id="b3c6" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated"><code class="fe mj mk ml mm b">clearSelection</code>将状态清除为空数组。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><code class="fe mj mk ml mm b">useSelection.tsx: Custom hook for selection</code></figcaption></figure><h2 id="985b" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">第2部分:创建<code class="fe mj mk ml mm b">multiSelectionContext</code>和<code class="fe mj mk ml mm b">MultiSelectionProvider</code></h2><ul class=""><li id="9ce4" class="lo lp in lq b lr ls lt lu lb lv lf lw lj lx ly lz ma mb mc bi translated">使用React提供的<code class="fe mj mk ml mm b">createContext</code>创建<code class="fe mj mk ml mm b">multiSelectionContext</code>。</li><li id="509b" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated">创建包含<code class="fe mj mk ml mm b">multiSelectionContext.Provider</code>的<code class="fe mj mk ml mm b">MultiSelectionProvider</code>，并从我们上面创建的<code class="fe mj mk ml mm b">useSelection</code>钩子传递值。这样，我们可以在应用程序的任何部分使用<code class="fe mj mk ml mm b">useSelection</code>作为上下文，而无需使用prop drilling。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><code class="fe mj mk ml mm b">MultiSelectionProvider.tsx: Creating context and the provider</code></figcaption></figure><h2 id="6a6b" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">第3节:创建ListComponent以使用multiSelectionContext</h2><ul class=""><li id="8515" class="lo lp in lq b lr ls lt lu lb lv lf lw lj lx ly lz ma mb mc bi translated">在这个组件中，我们正在创建一个列表，并使用上下文onClick将该列表项添加到我们的状态中，并使用<code class="fe mj mk ml mm b">setSelection</code>和<code class="fe mj mk ml mm b">addMultipleSelection</code>函数突出显示它。</li><li id="51f7" class="lo lp in lq b lr md lt me lb mf lf mg lj mh ly lz ma mb mc bi translated">我们还使用<code class="fe mj mk ml mm b">clearSelection</code>来清除用户点击清除按钮时的状态。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">ListComponent.tsx: use of context for updating the selection state value</figcaption></figure><h2 id="8e48" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">第4部分:用MultiSelectionProvider包装ListComponent</h2><ul class=""><li id="a759" class="lo lp in lq b lr ls lt lu lb lv lf lw lj lx ly lz ma mb mc bi translated">最后，我们需要用我们的<code class="fe mj mk ml mm b">MultiSelectionProvider</code>包装<code class="fe mj mk ml mm b">ListComponent</code>，这样里面的组件就可以使用我们创建的定制钩子的值。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">App.tsx: Wrap the component with <code class="fe mj mk ml mm b">MultiSelectionProvider</code></figcaption></figure><h2 id="6ea5" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">最终组件将如下所示:</h2><ul class=""><li id="4ae9" class="lo lp in lq b lr ls lt lu lb lv lf lw lj lx ly lz ma mb mc bi translated">在选择所有3个列表项时，我们看到所有的背景样式都更新了。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/29dd3f0cd858c085bed6891e37184bd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*pdAZrNyQtHcdryec7J4_KA.png"/></div></figure><ul class=""><li id="cac3" class="lo lp in lq b lr mq lt mr lb ms lf mt lj mu ly lz ma mb mc bi translated">同样，如果我们记录<code class="fe mj mk ml mm b">selection</code>，它包含所有3个列表项。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/3a0df79a964036efd058c3ca78d55a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*iJdKqa5fd53bHSi8iw8GiA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">selection state value</figcaption></figure><p id="881b" class="pw-post-body-paragraph mw mx in lq b lr mq jo my lt mr jr mz lb na nb nc lf nd ne nf lj ng nh ni ly ig bi translated">希望您理解我们如何创建自己的定制钩子，并在React中使用上下文API来防止钻柱，并在应用程序中的任何地方使用状态管理。</p><p id="c81e" class="pw-post-body-paragraph mw mx in lq b lr mq jo my lt mr jr mz lb na nb nc lf nd ne nf lj ng nh ni ly ig bi translated">您也可以在这里查看最终代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj mo l"/></div></figure><p id="26a5" class="pw-post-body-paragraph mw mx in lq b lr mq jo my lt mr jr mz lb na nb nc lf nd ne nf lj ng nh ni ly ig bi translated"><strong class="lq io"> <em class="nk">感谢阅读！</em> </strong> <em class="nk"> <br/>希望你喜欢这篇帖子，关注</em><a class="ae mi" href="https://www.linkedin.com/in/yg18/" rel="noopener ugc nofollow" target="_blank"><em class="nk">LinkedIn</em></a><em class="nk">和</em><a class="ae mi" href="https://medium.com/@yashguptaa" rel="noopener"><em class="nk">Medium</em></a><em class="nk">了解更多内容。如果您有任何反馈或建议，请在下面的评论中留下，我会尽最大努力回复您。</em></p><p id="5a03" class="pw-post-body-paragraph mw mx in lq b lr mq jo my lt mr jr mz lb na nb nc lf nd ne nf lj ng nh ni ly ig bi translated">一定要看看我的其他博客:</p><div class="nl nm gp gr nn no"><a href="https://yashguptaa.medium.com/stages-in-devops-and-tools-used-in-different-stages-of-an-application-da7a476ea02" rel="noopener follow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">DevOps中的阶段和应用程序不同阶段中使用的工具</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">DevOps是一个方法和工具的组合，使企业能够开发、测试和分发软件…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">yashguptaa.medium.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://blog.devops.dev/importance-of-logging-in-kubernetes-and-intro-to-grafana-loki-f8dc6f736e6" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">在Kubernetes中登录的重要性，Grafana Loki简介和使用舵图部署</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">通过使用应用程序日志，您可以更多地了解应用程序内部的情况。日志非常有用…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">blog.devops.dev</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://blog.devops.dev/introduction-to-kubernetes-monitoring-and-exploring-prometheus-9bd0358ce504" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">Kubernetes监测和探索普罗米修斯简介</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">应用程序性能监控是Kubernetes的许多运营操作和复杂性的特点…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">blog.devops.dev</p></div></div><div class="nx l"><div class="oe l nz oa ob nx oc km no"/></div></div></a></div></div><div class="ab cl of og hr oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ig ih ii ij ik"><p id="79d5" class="pw-post-body-paragraph mw mx in lq b lr mq jo my lt mr jr mz lb na nb nc lf nd ne nf lj ng nh ni ly ig bi translated"><em class="nk">更多内容请看</em> <a class="ae mi" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="nk">说白了就是</em> </strong> </a> <em class="nk">。报名参加我们的</em> <a class="ae mi" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="nk">免费每周简讯</em> </strong> </a> <em class="nk">。关注我们</em><a class="ae mi" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="nk">Twitter</em></strong></a><strong class="lq io"><em class="nk"/></strong><em class="nk">和</em><a class="ae mi" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="nk">LinkedIn</em></strong></a><em class="nk">。查看我们的</em> <a class="ae mi" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="nk">社区不和谐</em> </strong> </a> <em class="nk">加入我们的</em> <a class="ae mi" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="nk">人才集体</em> </strong> </a> <em class="nk">。</em></p></div></div>    
</body>
</html>