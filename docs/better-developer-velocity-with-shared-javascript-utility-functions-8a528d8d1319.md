# åˆ©ç”¨å…±äº«çš„ JavaScript å®ç”¨å‡½æ•°æé«˜å¼€å‘é€Ÿåº¦

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/better-developer-velocity-with-shared-javascript-utility-functions-8a528d8d1319?source=collection_archive---------8----------------------->

## ä¿æŒä»£ç å¹²ç‡¥çš„å®ç”¨æŒ‡å—ï¼Œä»¥åŠè·¨é¡¹ç›®æ­£ç¡®é‡ç”¨ JS helper å‡½æ•°çš„æœ€ä½³å®è·µ

![](img/8286457245bae20083e72c8c14068efd.png)

åŠ©æ‰‹/å®ç”¨ç¨‹åºåŠŸèƒ½çš„è¡Œä¸šæ ‡å‡†æ–¹æ³•æ˜¯ç»´æŠ¤ä¸€ä¸ªä¸“ç”¨æ–‡ä»¶å¤¹ï¼Œæ ¹æ®åŠŸèƒ½å’Œå¼ºç›¸å…³æ€§æ ‡å‡†å¯¹å®ƒä»¬è¿›è¡Œå‘½åå’Œåˆ†ç»„ï¼Œå¹¶æ ¹æ®éœ€è¦éšå¼å¯¼å‡º/å¯¼å…¥æ¯ä¸ªåŠŸèƒ½ã€‚

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡é¡ºåˆ©ã€‚ä½†æ˜¯**æ•ˆç”¨å‡½æ•°æ˜¯éä¸Šä¸‹æ–‡ç‰¹å®šçš„**ã€‚

å½“ç„¶ï¼Œæ‚¨ä¼šåœ¨å…¶ä»–é¡¹ç›®ä¸­é‡ç”¨å®ƒä»¬ï¼Œå°†å®ƒä»¬ä¼ é€’ç»™å›¢é˜Ÿæˆå‘˜ï¼Œç”šè‡³åœ¨çº¿å…±äº«å®ƒä»¬ï¼Œå¯¹å—ï¼Ÿ

ä½†æ˜¯ä»ä»¥å‰çš„é¡¹ç›®ä¸­å¤åˆ¶ç²˜è´´ä»£ç æ˜¯ä¸€ç§å¹¼ç¨šçš„è§£å†³æ–¹æ¡ˆï¼Œä¸ä»…æ‰©å±•æ€§å·®ï¼Œè€Œä¸”è¿˜ä¼šäº§ç”Ÿè®¸å¤šä»£ç å¯è¯»æ€§å’Œç»´æŠ¤é—®é¢˜ã€‚

é‚£ä¹ˆåˆ†äº«æ•ˆç”¨å‡½æ•°çš„æ­£ç¡®æ–¹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªä»å·®åˆ°å¥½çš„è§£å†³æ–¹æ¡ˆã€‚

> *ğŸ’¡*ä½¿ç”¨ npm å¹¶ä¸æ˜¯å…¶ä¸­ä»»ä½•ä¸€ä¸ªçš„ä¸¥æ ¼è¦æ±‚â€”â€”æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•å…¶ä»–åŒ…ç®¡ç†å™¨â€”â€”yarnã€chocolateyã€pnpm ç­‰ã€‚

# 1.å°†æ‚¨çš„æ¨¡å—å‘å¸ƒåˆ°æ‚¨è‡ªå·±èŒƒå›´ä¸‹çš„ NPM æ³¨å†Œä¸­å¿ƒ

å°±åƒç½å¤´ä¸Šå†™çš„ä¸€æ ·ã€‚ä½ åº”è¯¥è¿™ä¹ˆåš:

*   ç”¨`npm init`åˆå§‹åŒ–åŒ…ç›®å½•ï¼Œæ·»åŠ åç§°å’Œæè¿°ï¼Œå¹¶ç”¨æ‚¨çš„ç”¨æˆ·åæ¥ç¡®å®šåŒ…çš„èŒƒå›´ã€‚
*   å°†æ‚¨çš„åŠ©æ‰‹/å®ç”¨å‡½æ•°æ”¾å…¥åŒ…å…¥å£ç‚¹(é»˜è®¤æƒ…å†µä¸‹æ˜¯`index.js`)ï¼Œå¹¶å¯¼å‡ºå®ƒä»¬ã€‚
*   åœ¨ NPM ç½‘ç«™ä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼ŒéªŒè¯æ‚¨çš„ç”µå­é‚®ä»¶ï¼Œç„¶åä½¿ç”¨`npm login`é€šè¿‡ CLI ç™»å½•ã€‚
*   ä¸€åˆ‡å°±ç»ªï¼ç”¨`npm publish --access=public`å‘å¸ƒ

ä½ å°†æ‹¥æœ‰æ— é™çš„å…¬å…±è®¿é—®åŒ…å’ŒåŸºæœ¬çš„å…è´¹å±‚ï¼Œä½†è¿™å¹¶ä¸æ€»æ˜¯ä¸€ä¸ªé€‰æ‹©ï¼Œå› ä¸ºä½ å·¥ä½œçš„å¤§å¤šæ•°ä¼ä¸šé¡¹ç›®ä¸ä¼šæ˜¯å¼€æºçš„(å³ä½¿ä½ çš„é¡¹ç›®æ˜¯å¼€æºçš„ï¼ŒNPM ä¹Ÿä¸å¤ªé€‚åˆè¢«å‘ç°ã€‚)

æ²¡æœ‰æœªä¸Šå¸‚çš„ NPM åŒ…è¿™ç§ä¸œè¥¿ï¼Œé™¤éä½ [ä»˜è´¹](https://www.npmjs.com/products)ï¼Œå¦åˆ™ä½ ä¸èƒ½å‘å¸ƒç§äººåŒ…ã€‚å³ä½¿è¿™æ ·ï¼Œä¹Ÿä¸å¯èƒ½è¿›è¡Œç²’åº¦è®¿é—®æ§åˆ¶æˆ–åä½œã€‚

> *ğŸ’¡* NPM æœ€è¿‘è¢« Github æ”¶è´­ï¼ŒGithub ä¸“æ³¨äºè®©å®ƒæˆä¸ºä¸€ä¸ªå…¬å…±æ³¨å†Œä¸­å¿ƒã€‚Github åŒ…å°†æˆä¸ºç§äººåŒ…çš„é€‰æ‹©ï¼Œæ¯ä¸ªå¸æˆ·æ¯æœˆä½¿ç”¨ 500MB å­˜å‚¨ç©ºé—´/1GB æ•°æ®ä¼ è¾“(**è€Œä¸æ˜¯**æ¯ä¸ªåŒ…)ã€‚

# 2.ä¸Šä¼ ä¸€ä¸ªç§˜å¯†ç½‘å€çš„ tarball

è¿™åˆ©ç”¨äº†è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³åƒ NPM è¿™æ ·çš„åŒ…ç®¡ç†å™¨å¯ä»¥å®‰è£…ä»æä¾›çš„ URL è·å–çš„**æ¡£æ¡ˆã€‚ä½ åº”è¯¥è¿™ä¹ˆåš:**

*   é¦–å…ˆï¼Œé€šå¸¸çš„â€”â€”`npm init` åŒ…ç›®å½•ï¼ŒåŒ…çš„åç§°å’Œæè¿°ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬ä¿¡æ¯ç­‰ã€‚
*   ä»æ‚¨çš„åŒ…ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª [tarball](https://en.wikipedia.org/wiki/Tarball) (ä¸€ä¸ª. tar å½’æ¡£æ–‡ä»¶)ï¼Œæ‚¨çš„å‡½æ•°ä½äºå…¶ä¸­çš„ä¸€ä¸ªå­æ–‡ä»¶å¤¹ä¸­(ç±»ä¼¼äº`package/`)ã€‚ä¸‹é¢æ˜¯å‘½ä»¤ã€‚(å¦‚æœåœ¨ Windows ä¸Šä½¿ç”¨ Powershell)
    `tar cvfz FILENAME.tar.gz DIRECTORY/`
*   å°†è¿™ä¸ªæ¡£æ¡ˆä¸Šä¼ åˆ°ä»»ä½•ä½ æƒ³ä¸Šä¼ çš„åœ°æ–¹â€”â€”ä½ ç”šè‡³å¯ä»¥è‡ªå·±ç®¡ç†å®ƒã€‚ç„¶åï¼Œæ‚¨å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨ä»»ä½•è®¿é—®æ§åˆ¶æ–¹æ³•æ¥éš”ç¦»å®ƒã€‚
*   æ¯å½“ä½ åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­éœ€è¦å®ƒçš„æ—¶å€™ï¼Œå°±åƒè¿™æ ·é€šè¿‡ NPM å®‰è£…å®ƒï¼Œå¹¶åœ¨éœ€è¦çš„åœ°æ–¹å¯¼å…¥å®ƒ:

```
npm i your-url.com/FILENAME
```

æœ€åï¼Œé€‚å½“çš„è®¿é—®æ§åˆ¶ï¼ä½†æ˜¯æœ‰äº†æ¡ä»¶â€”â€”**è¿™å°±å®Œå…¨æ˜¯ä½ çš„è´£ä»»äº†**ã€‚é™¤äº†è½¯ä»¶åŒ…å®‰è£…è¿‡ç¨‹ï¼ŒNPM ä¸å‚ä¸ä»»ä½•äº‹æƒ…ã€‚è¿™ç§æ–¹æ³•æ˜¯åœ¨æ‹¥æœ‰æœªåˆ—å‡º+ç§æœ‰åŒ…å’Œè®¿é—®æ§åˆ¶ä¹‹é—´çš„ä¸€ç§æŠ˜è¡·ï¼Œä»£ä»·æ˜¯[è¯­ä¹‰ç‰ˆæœ¬](https://github.com/npm/node-semver)å’Œè‡ªåŠ¨æ›´æ–°ã€‚

ä¸ç”¨è¯´ï¼Œå¯å‘ç°æ€§å°†æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥è¿™åªå¯¹ç§æœ‰å›è´­æœ‰ç”¨ï¼›ä¸¥æ ¼çš„å†…éƒ¨ç”¨ä¾‹ã€‚

# 3.é€šè¿‡ Bit ç‰ˆæœ¬åŒ–å’Œå‘å¸ƒ

é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯ç†æƒ³çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿå¸å–äº†å‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆçš„ä¸è¶³ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„æ–°æ ‡å‡†:

*   å‘å¸ƒåŠŸèƒ½ï¼Œå¹¶ç®€åŒ–å…±äº«/å¯¼å…¥åŠŸèƒ½çš„æµç¨‹ã€‚
*   æ‹¥æœ‰è®¿é—®æ§åˆ¶ã€è‡ªåŠ¨ä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬+æ›´æ–°ã€‚
*   è®©å®ƒå®¹æ˜“è¢«å‘ç°å’Œæµè§ˆï¼Œæ”¹å–„å¼€å‘äººå‘˜çš„ä½“éªŒã€‚

é’»å¤´å°†å®Œå…¨ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚å®ƒæ˜¯ä¸€ä¸ªç”¨äºå‘å¸ƒã€å…±äº«å’Œå‘ç°æ–°ç»„ä»¶çš„å¼€æºå·¥å…·é“¾å’Œä¸­å¿ƒâ€”â€”æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒè¿˜æ”¯æŒ Node.js æ¨¡å—ã€‚æˆ‘ä»¬å¯ä»¥å°†å®ƒç”¨äºæ™®é€šçš„ JS å®ç”¨å‡½æ•°â€”â€”å¿ äºå¯ç»„åˆè½¯ä»¶å¼€å‘çš„ä¸»é¢˜ã€‚

è®©æˆ‘ä»¬åˆ›å»ºå¹¶å…±äº«å‡ ä¸ªå­—ç¬¦ä¸²å®ç”¨å‡½æ•°â€”â€”åŒ…æ‹¬æµ‹è¯•ã€æ–‡æ¡£å’Œæ¼”ç¤ºã€‚è¦çœ‹æˆå“ï¼Œè¯·å‰å¾€ https://bit.cloud/sixthextinction/shared-utils[æŸ¥çœ‹ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä¹Ÿå¯ä»¥éšæ„å‰å®ƒä»¬ï¼](https://bit.cloud/sixthextinction/shared-utils)

## æ­¥éª¤ 0:å…ˆå†³æ¡ä»¶

é¦–å…ˆï¼Œç¡®ä¿æ‚¨å·²ç»å®‰è£…äº†äºŒè¿›åˆ¶ä½ã€‚

```
npx [@teambit/bvm](http://twitter.com/teambit/bvm) install
```

æ­¤å¤–ï¼Œä½ éœ€è¦å»ºç«‹ä¸€ä¸ª [bit.cloud](https://bit.cloud/) è´¦æˆ·ï¼Œå¹¶ä¸”çŸ¥é“å¦‚ä½•åœ¨é‚£é‡Œæ‰“å¼€ä¸€ä¸ªè¿œç¨‹ scopeã€‚ä¸è¦æ‹…å¿ƒè¿™ä¸ªâ€”â€”Bit ä¼šæŒ‡å¯¼ä½ å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚

> *ğŸ’¡* [ä½œç”¨åŸŸ](https://bit.dev/docs/scope/scope-overview)å…è®¸æ¥è‡ªä¸åŒç»„ç»‡çš„åŒååŒ…é€šè¿‡å‘½åç©ºé—´å…±å­˜ã€‚

## æ­¥éª¤ 1:åˆ›å»ºä¸€ä¸ª Bit å·¥ä½œç©ºé—´

å¯¼èˆªåˆ°æ‚¨çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨é‚£é‡Œåˆå§‹åŒ–ä¸€ä¸ª Bit å·¥ä½œç©ºé—´ã€‚è¿™å¾ˆåƒ`npm init`â€”â€”åˆ›å»ºä¸€ä¸ªæš‚å­˜åŒºï¼Œè®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹æ„å»ºã€å¯¼å…¥ã€é¢„è§ˆã€ä¿®æ”¹å¯ç»„åˆä»£ç ï¼Œå¹¶ç®¡ç†å…¶ä¾èµ–å…³ç³»ã€‚

```
bit init
```

ç„¶åï¼Œåœ¨æ‚¨é€‰æ‹©çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€æ–°åˆ›å»ºçš„ **workspace.jsonc** æ–‡ä»¶ï¼Œå¹¶å°†`defaultScope`å±æ€§çš„å€¼æ›´æ”¹ä¸º`your-bit-cloud-username.your-scope-name`ã€‚æ›¿æ¢æ‚¨è‡ªå·±çš„å€¼ï¼Œä½†è¦æ³¨æ„ç‚¹åˆ†éš”ç¬¦ï¼

## æ­¥éª¤ 2:æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ•ˆç”¨å‡½æ•°â€”â€”å½’ä¸€åŒ–

åœ¨æ‚¨çš„å·¥ä½œåŒºæ–‡ä»¶å¤¹ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
bit create node utils/normalize
```

è¿™å°†åˆ›å»ºä¸€å †æ–‡ä»¶å’Œç›®å½•ã€‚è®©æˆ‘ä»¬ä¸€æ¬¡è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚åœ¨ `./your-remote-scope/utils/normalize/`å¤„çš„ **normalize.ts** æ˜¯ä½ å®é™…è¦å¯¼å‡ºçš„æ•ˆç”¨å‡½æ•°ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å…ˆç¼–ç ã€‚

Simple enough; weâ€™re using a regex pattern, replacing all unicode characters in the range U+0300 â€” U+036F with an empty character.

è¿™å°†åˆ é™¤æ‰€æœ‰ç»„åˆå­—ç¬¦çš„ unicode å—ï¼Œä»è€Œä½¿æˆ‘ä»¬çš„å­—ç¬¦ä¸²æ­£å¸¸åŒ–ã€‚

> *ğŸ’¡*åœ¨`bit create`ä¹‹åçš„`node`å‚æ•°å‘Šè¯‰ Bit åˆ›å»ºä¸€ä¸ª Node.js æ¨¡å—â€”â€”ç›¸å¯¹äº[å…¶ä»–ä½ å¯ä»¥ä½¿ç”¨çš„](https://bit.dev/docs/getting-started/composing/creating-components)â€”â€”æ¯”å¦‚ Reactã€React Nativeã€MDX ç­‰ç­‰ã€‚ä½¿ç”¨`bit templates`å‘½ä»¤äº†è§£æ›´å¤šä¿¡æ¯ï¼

## æ­¥éª¤ 3:æµ‹è¯•ã€æ–‡æ¡£å’Œä½œæ–‡ã€‚

å¦‚æœæ²¡æœ‰é€‚å½“çš„å•å…ƒæµ‹è¯•ã€æ–‡æ¡£ï¼Œæˆ–è€…å±•ç¤ºå…¶å·¥ä½œåŸç†çš„å¿«é€Ÿæ¼”ç¤ºï¼Œæˆ‘ä»¬çš„æ•ˆç”¨å‡½æ•°å¯¹ä»»ä½•äººéƒ½æ²¡æœ‰ç”¨ã€‚é¦–å…ˆ:ç”¨ Jest è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚

Unit tests should be self-explanatory for anyone consuming our module, even if not exhaustive.

ä¸‹ä¸€ä¸ªï¼ŒåŒ»ç”Ÿã€‚Bit æ”¯æŒ [MDX](https://mdxjs.com/) ï¼Œå› æ­¤ä½¿ç”¨`ts`å’Œ`tsx live`é™ä»·ä½¿æ‚¨çš„æ–‡æ¡£**å¯è§†åŒ–**ã€‚

```
---
labels: ['normalize', 'string utils', 'remove accents']
description: 'A utility function that removes accents and diacritics from a given string'
---

import {normalize} from "./normalize";

Use this function to normalize a string by removing the unicode block of combined diacritical characters (aka accents).
U+030 - U+036F
Read this for more info : https://en.wikipedia.org/wiki/Combining_Diacritical_Marks

API:

```ts
function normalize(): string;
```

```tsx live

<div>For example, "crÃ¨me pÃ¢tissiÃ¨re" will be normalized to "{normalize("crÃ¨me pÃ¢tissiÃ¨re")}"</div>
```

This function leaves regular characters untouched.

```tsx live

<div>{normalize("This is a normal string with no diacritics")}</div>
```
```

ç”šè‡³å¯ä»¥ç›´æ¥åœ¨ MDX æ–‡ä»¶ä¸­ä½¿ç”¨ HTML å’Œ React ä»£ç ã€‚ç‚¹å‡»é˜…è¯»æ›´å¤šå…³äºé‚£ä¸ª[çš„å†…å®¹ã€‚](https://bit.cloud/blog/meet-component-driven-content-applicable-composable-l24cw7ku)

æœ€åï¼Œç»„åˆâ€”â€”æœ€å°çš„ JSX/TSX æ¥é¢„è§ˆä½ çš„ä»£ç åœ¨ç°å®ä¸–ç•Œä¸­çš„æ ·å­ã€‚

Think of compositions as the image gallery/carousel on a productâ€™s landing page.

## æ­¥éª¤ 4:ç‰ˆæœ¬å’Œå‘å¸ƒ

å…¨éƒ¨å®Œæˆï¼æœ€åä¸€æ­¥æ˜¯æ ‡è®°å¹¶å¯¼å‡ºæˆ‘ä»¬çš„æ•ˆç”¨å‡½æ•°ã€‚

```
bit tag --message â€œFirst versionâ€
```

æ ‡è®°å˜æ›´è¿è¡Œæˆ‘ä»¬é¡¹ç›®çš„æ„å»ºç®¡é“â€” â€”ç¼–è¯‘æˆ‘ä»¬çš„ä»£ç å¹¶ç”Ÿæˆä¸€ä¸ªåŒ…ï¼Œå®‰è£…ä¾èµ–é¡¹ï¼Œè¿è¡Œæˆ‘ä»¬çš„å•å…ƒæµ‹è¯•â€”â€”å¹¶åœ¨è¿™ä¸ªè¿‡ç¨‹ç»“æŸæ—¶åˆ›å»ºä¸€ä¸ªå¯å¯¼å‡ºçš„å¿«ç…§ï¼Œå®Œæˆ[è¯­ä¹‰ç‰ˆæœ¬](https://github.com/npm/node-semver)(ä¸ NPM ä½¿ç”¨çš„ç‰ˆæœ¬ç›¸åŒ)ä»¥æ–¹ä¾¿ä¾èµ–é¡¹ç®¡ç†ã€‚

> *ğŸ’¡*å¦‚æœæ‚¨åœ¨è¿™ä¸ªé˜¶æ®µå¾—åˆ°ä»»ä½•é”™è¯¯ï¼Œæ‚¨å¯èƒ½ä¼šä¸¢å¤±ä¾èµ–é¡¹ã€‚è¿è¡Œ`bit install`æ¥ä¿®å¤è¿™äº›é—®é¢˜ã€‚

```
new components
(first version for components)> utils/normalize@0.0.1
```

è®©æˆ‘ä»¬ç»§ç»­å°†è¿™ä¸ªå¿«ç…§å‘å¸ƒåˆ°æˆ‘ä»¬çš„è¿œç¨‹èŒƒå›´ã€‚

```
bit export
```

è¦æŸ¥çœ‹è¿™ä¸ªå·²å‘å¸ƒçš„å®ç”¨å‡½æ•°åœ¨æµ‹è¯•ã€åˆæˆå’Œ MDX æ–‡æ¡£ä¸­çš„æ ·å­ï¼Œè¯·è®¿é—®:

[](https://bit.cloud/sixthextinction/shared-utils/string-utils/normalize) [## å…±äº«å®ç”¨ç¨‹åº/å­—ç¬¦ä¸²å®ç”¨ç¨‹åº/æ­£å¸¸åŒ–

### ä»ç»™å®šå­—ç¬¦ä¸²ä¸­åˆ é™¤é‡éŸ³ç¬¦å·å’ŒéŸ³è°ƒç¬¦å·çš„å®ç”¨å‡½æ•°ã€‚æ ‡æœ‰ normalizeï¼Œå­—ç¬¦ä¸²å®ç”¨ç¨‹åºâ€¦

æ¯”ç‰¹äº‘](https://bit.cloud/sixthextinction/shared-utils/string-utils/normalize) 

## æ­¥éª¤ 5:æ¨¡æ‹Ÿä¸æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå®ç”¨å‡½æ•°â€”â€”Sanitize çš„åä½œ

æˆ‘ä»¬åˆ°æ­¤ä¸ºæ­¢ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†`normalize`åŒ…`npm install`(åœ¨[å°†æˆ‘ä»¬çš„è¿œç¨‹ä½œç”¨åŸŸçš„æ³¨å†Œè¡¨æ·»åŠ åˆ° npm é…ç½®](https://bit.dev/docs/packages/npmrc)ä¹‹å)ï¼Œå¯¼å…¥åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œå¹¶æ ¹æ®éœ€è¦ä½¿ç”¨å®ƒã€‚

ä¸è¿‡ï¼Œåœ¨ä»Šå¤©ç»“æŸä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ¨¡æ‹Ÿçš„çœŸå®åœºæ™¯:**åµŒå¥—å®ç”¨å‡½æ•°**ã€‚å¦‚ä½•åˆ›å»ºå¦ä¸€ä¸ªä½¿ç”¨è¿™ä¸ªå‡½æ•°ä½œä¸ºä¾èµ–é¡¹çš„å®ç”¨å‡½æ•°ï¼Œç„¶åå‘å¸ƒå®ƒï¼Œå°±åƒæ‚¨åˆ›å»ºè¿™ä¸ªå‡½æ•°ä¸€æ ·ï¼Ÿ

æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå®ç”¨å‡½æ•°(åœ¨ä¸€ä¸ªå…¨æ–°çš„ç›®å½•ä¸­)æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ€æ¯’å™¨ï¼Œå®ƒä»ä¸€ä¸ªè§„èŒƒåŒ–çš„å­—ç¬¦ä¸²ä¸­åˆ é™¤æ‰€æœ‰çš„ HTML æ ‡ç­¾å’Œæ ‡è®°â€”â€”ç”¨æµè§ˆå™¨ä»ç„¶å¯ä»¥è¯»å–çš„ç¬¦å·æ¥æ›¿æ¢å®ƒï¼Œä½†æ˜¯æ¶ˆé™¤äº†æ½œåœ¨çš„å±å®³ã€‚å¯ä»¥çœ‹å‡ºï¼Œè¿™å°†ä½¿ç”¨æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå‡½æ•°(`normalize`)ä½œä¸ºä¾èµ–é¡¹ã€‚

```
> bit init
> bit create node utils/sanitize
```

Using regex again, this time to escape HTML tags and other tokens globally.

å¦‚æ‚¨æ‰€è§ï¼Œè¿™ä¸ªç»„ä»¶å°†æˆ‘ä»¬çš„`normalize`å‡½æ•°ä½œä¸ºä¸€ä¸ªä¾èµ–é¡¹ã€‚è®©æˆ‘ä»¬å¿«é€Ÿå®‰è£…å®ƒã€‚

```
> bit install @your-username/your-remote-scope.utils.normalize
```

Unit tests are simple enough.

A composition to showcase each stage of the process.

æœ€åæ˜¯ MDX æ–‡æ¡£ã€‚

## sanitize.docs.mdx

```
---
labels: [â€˜sanitizeâ€™, â€˜string utilsâ€™, â€˜escape html tagsâ€™]
description: â€˜A utility function that normalizes a string to remove diacritical characters, then sanitizes it by properly escaping all HTML tagsâ€™
---import {sanitize} from â€œ./sanitizeâ€;Use this function to sanitize a string in two steps : 
1) Normalize the string to prep it for Step 2 â€” Remove the unicode block of combined diacritical characters in the range U+030 â€” U+036F. 
2) Properly escape all HTML tags, to safeguard against potentially malicious behavior without omitting information contained within the string.---
`&amp;` to replace &`&lt;` to replace <`&gt;` to replace >`&quot;` to replace â€œ`&apos;` to replace â€˜---API:```ts
function normalize(): string;
``````tsx live<div>For example, â€œ<i>pÃ¢tisserie</i>â€ will be sanitized to â€œ{sanitize(â€œ<i>pÃ¢tisserie</i>â€)}â€</div>
```
```

ç…§å¸¸æ ‡è®°å’Œå¯¼å‡ºã€‚

```
bit tag --message â€First versionâ€
bit exportnew components
(first version for components)
     > utils/sanitize@0.0.1
```

![](img/198a5784ae4cb652b743029476ac5136.png)

Bit provides a visual dependency graph that lets you easily skim through a component/moduleâ€™s structure.

åŒæ ·ï¼Œå¦‚æœä½ æƒ³çœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆæ ·å­çš„å‡ºç‰ˆï¼Œå®Œæˆæµ‹è¯•ï¼Œæ–‡ä»¶ï¼Œå’Œç»„æˆï¼Œè¿™é‡Œç»™ä½ ã€‚

[](https://bit.cloud/sixthextinction/shared-utils/string-utils/sanitize) [## å…±äº«å®ç”¨ç¨‹åº/å­—ç¬¦ä¸²å®ç”¨ç¨‹åº/æ•´ç†

### ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²è§„æ ¼åŒ–ä»¥å»é™¤å˜éŸ³å­—ç¬¦ï¼Œç„¶åé€šè¿‡æ­£ç¡®è½¬ä¹‰â€¦

æ¯”ç‰¹äº‘](https://bit.cloud/sixthextinction/shared-utils/string-utils/sanitize) 

## é¢å¤–æ”¶è·:ç”¨`bit import`é‡æ„ä¾èµ–å…³ç³»

åœ¨æˆ‘ä»¬ç»“æŸä¹‹å‰ï¼Œè¿˜æœ‰æœ€åä¸€ä¸ªåœºæ™¯:å¦‚æœæ‚¨é‡åˆ°äº†ä¾èµ–é¡¹ä¸­çš„é”™è¯¯æˆ–è®¾è®¡ç¼ºé™·ï¼Œæœ€ç»ˆç ´åäº†æ‚¨è‡ªå·±çš„ä»£ç â€”â€”ä¸€ä¸ªæ‚¨æ— æ³•ä¿®å¤çš„é”™è¯¯æˆ–è®¾è®¡ç¼ºé™·ï¼Œå› ä¸ºæ‚¨æ— æ³•è®¿é—®æ­£åœ¨å¯¼å…¥çš„æ¨¡å—ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

è®©`bit import`æ¥æ‹¯æ•‘æˆ‘ä»¬å§ï¼

è¯¥å‘½ä»¤å°†è¿œç¨‹ä½œç”¨åŸŸä¸­æŒ‡å®šçš„ç»„ä»¶/æ¨¡å—æ·»åŠ åˆ°æ‚¨çš„å·¥ä½œåŒºä¸­(ä¸**å®‰è£…**ä¸€ä¸ªç»„ä»¶ç›¸åï¼Œè¯¥ç»„ä»¶åªæ˜¯å°†å…¶ä½œä¸ºä¸€ä¸ªåŒ…æ·»åŠ åˆ°æ‚¨çš„`node_modules/`)ã€‚è¿™ä¸ª**è®©æ‚¨å¯ä»¥è®¿é—®å¯¼å…¥çš„å®ç”¨å‡½æ•°çš„å®é™…ä»£ç **ï¼Œå…è®¸æ‚¨ç¼–è¾‘å®ƒå¹¶ç«‹å³çœ‹åˆ°å˜åŒ–ã€‚

```
bit import your-username.your-remote-scope/utils/normalize
```

å“å‘¦ã€‚äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬åœ¨`normalize` çš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰å…¨çƒ`/g` æ ‡å¿—ï¼å®ƒä¸èƒ½å¤„ç†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¤šæ¬¡å‡ºç°çš„éŸ³è°ƒç¬¦å·ã€‚è®©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

Yikes. Hope no one noticed thatâ€¦

å¯¹ä»£ç è¿›è¡Œæ›´æ”¹ï¼Œå½“æ‚¨æ ‡è®°è¿™äº›æ›´æ”¹æ—¶ã€‚

```
changed components
(components that got a version bump) 
   > your-username.your-remote-scope/utils/normalize@0.0.2auto-tagged dependents:utils/sanitize@0.0.2
```

â€¦Bit å°†è‡ªåŠ¨æ›´æ–°ä»»ä½•ä½¿ç”¨å®ƒä½œä¸ºä¾èµ–é¡¹çš„ç‰ˆæœ¬å·ï¼›æˆ‘ä»¬ä¾‹å­ä¸­çš„`sanitize`å‡½æ•°ã€‚

# ä¸¤å…¨å…¶ç¾

æ‚¨çš„æ•ˆç”¨å‡½æ•°ç°åœ¨å·²ç»å‘å¸ƒå¹¶å¯è¢«å‘ç°ï¼Œä¸ºé€‰æ‹©ä½¿ç”¨å®ƒä»¬çš„ä»»ä½•äººæä¾›äº†æ¸…æ™°çš„æ–‡æ¡£å’Œé¢„è§ˆã€‚

å€ŸåŠ© Bitï¼Œæ‚¨å¯ä»¥å®ç°ä»¥ä¸‹å®ç”¨åŠŸèƒ½:

1.  ä½ çš„å®ç”¨å‡½æ•°ç°åœ¨**å®Œå…¨ç‹¬ç«‹**äº†ï¼Œå¯ä»¥ç”¨æ¥ç»„æˆä»»ä½•é¡¹ç›®ä¸­çš„ä»»ä½•ä¸œè¥¿â€”â€”æ— è®ºæ˜¯ Node.js åç«¯ã€React å‰ç«¯è¿˜æ˜¯æ™®é€šçš„ js åº”ç”¨ã€‚ä»»ä½•è½¯ä»¶åŒ…ç®¡ç†å™¨éƒ½å¯ä»¥ç”¨æ¥å®‰è£…å®ƒä»¬ã€‚
2.  å¯¹å·²å‘å¸ƒçš„åŒ…è¿›è¡ŒèŒƒå›´ç•Œå®šã€è‡ªåŠ¨ä¾èµ–æ€§è§£æå’Œè‡ªåŠ¨æ›´æ–°ï¼Œå¹¶æä¾›ç²¾ç¡®çš„è®¿é—®æ§åˆ¶ï¼Œæ— è®ºæ‚¨æ˜¯é€‰æ‹©å…¬å¼€å’Œå¼€æºï¼Œè¿˜æ˜¯ä¿æŒè¿œç¨‹èŒƒå›´ç§æœ‰ï¼Œåªåœ¨éœ€è¦æ—¶é€šè¿‡ Bit æ·»åŠ åä½œè€…ã€‚
3.  **çœŸç›¸çš„å•ä¸€æ¥æº**ã€‚å¯¹ä¸€ä¸ªæ¨¡å—çš„æ›´æ–°å°†è‡ªåŠ¨æ›´æ–°æ‰€æœ‰ä¾èµ–å®ƒçš„ä»£ç åº“ï¼Œè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶ä½¿å¾—å›æ»šåˆ°ä»¥å‰çš„ç‰ˆæœ¬å¹¶åœç•™åœ¨é‚£é‡Œå˜å¾—å¾ˆç®€å•â€”â€”è¿™å¯¹äºç»´æŠ¤é—ç•™ä»£ç éå¸¸æœ‰ç”¨ã€‚
4.  **å¯å‘ç°æ€§** â€”ä»»ä½•åŠ å…¥å›¢é˜Ÿçš„äººéƒ½å¯ä»¥å¿«é€Ÿæµè§ˆæ‚¨çš„ä½å­˜å‚¨åº“ï¼Œå‘ç°ä»–ä»¬å¯ä»¥è½»æ¾å¯¼å…¥å¹¶æ„å»ºæ–°çš„ã€é…·çš„ä¸œè¥¿çš„å¯ç»„åˆä»£ç ã€‚å¦‚æœä½ çš„è¿œç¨‹ä½œç”¨åŸŸæ˜¯å…¬å¼€çš„ï¼Œé‚£å°†é€‚ç”¨äºä¸–ç•Œä¸Šçš„ä»»ä½•äººã€‚

è¿™ä¸ªè¯é¢˜åˆ°æ­¤ä¸ºæ­¢ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚

## è¿›ä¸€æ­¥é˜…è¯»

[](https://bit.cloud/blog/meet-component-driven-content-applicable-composable-l24cw7ku) [## æ»¡è¶³ç»„ä»¶é©±åŠ¨çš„å†…å®¹:é€‚ç”¨çš„ã€å¯ç»„åˆçš„

### è‡ªä» React å’Œ Angular ç­‰æŠ€æœ¯å‡ºç°ä»¥æ¥ï¼Œæˆ‘ä»¬ç»å¸¸å°†æœ¯è¯­â€œç»„ä»¶â€ä¸â€¦

æ¯”ç‰¹äº‘](https://bit.cloud/blog/meet-component-driven-content-applicable-composable-l24cw7ku) [](https://bit.cloud/blog/sharing-types-between-your-frontend-and-backend-applications-l5qih48g) [## åœ¨å‰ç«¯å’Œåç«¯åº”ç”¨ç¨‹åºä¹‹é—´å…±äº«ç±»å‹

### æ‚¨çš„åç«¯ API å·²ç»æ›´æ–°ï¼Œå¯ä»¥è¿”å›æ–°ç±»å‹çš„æ•°æ®ã€‚å¿…é¡»é€šçŸ¥å‰ç«¯å›¢é˜Ÿè¿›è¡Œæ›´æ–°â€¦

æ¯”ç‰¹äº‘](https://bit.cloud/blog/sharing-types-between-your-frontend-and-backend-applications-l5qih48g) [](https://bit.cloud/blog/how-to-reuse-react-components-across-your-projects-l4pz83f4) [## å¦‚ä½•åœ¨é¡¹ç›®ä¸­é‡ç”¨ React ç»„ä»¶

### æœ€åï¼Œæ‚¨å®Œæˆäº†ä¸ºåº”ç”¨ç¨‹åºä¸­çš„è¡¨å•åˆ›å»ºä¸€ä¸ªå¥‡å¦™çš„è¾“å…¥å­—æ®µçš„ä»»åŠ¡ã€‚ä½ å¯¹â€¦â€¦å¾ˆæ»¡æ„

æ¯”ç‰¹äº‘](https://bit.cloud/blog/how-to-reuse-react-components-across-your-projects-l4pz83f4)