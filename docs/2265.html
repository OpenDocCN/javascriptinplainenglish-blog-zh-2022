<html>
<head>
<title>My Boss: You Don’t Know React At All!😠</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我老板:你根本不知道反应！😠</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/my-boss-you-dont-know-react-at-all-f493970f1807?source=collection_archive---------0-----------------------#2022-05-26">https://javascript.plainenglish.io/my-boss-you-dont-know-react-at-all-f493970f1807?source=collection_archive---------0-----------------------#2022-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d882" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你必须知道的React的3种错误用法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/87d625e5fb6db4e68ae7dad30c62ea4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ib_25H89_NyoVC1R"/></div></div></figure><h1 id="7736" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">前言</h1><p id="f4de" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我在React工作了很多年，我确信我对它非常了解，但最近我的老板对我说:“你根本不了解React，你对它一无所知。”</p><p id="15f7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我很生他的气，但他指出了我程序中的三个漏洞。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="c117" class="kr ks iq bd kt ku mr kw kx ky ms la lb jw mt jx ld jz mu ka lf kc mv kd lh li bi translated">1.你知道怎么用“&amp;&amp;”吗？</h1><p id="92a0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在React程序中，我经常使用“&amp;&amp;”操作符来决定是否显示内容，方式如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="06ff" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">我的上司:</strong> <strong class="ll ir">【难道你不知道&amp; &amp;的特点吗】操作员？当请求没有成功返回时，将直接呈现“0”。”</strong></p><p id="7db6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我不相信，因为我一直都是这样写代码的，从来没有犯过错误。为了证明老板是错的，我写了下面的例子</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="71bb" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir"> OMG！我老板说的没错，页面一开始显示的是0，3秒后显示的是列表。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/2757c56c02abd5d5ee7ed7cec68aa037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mRP7Dsmb-AGxo-vdeDgixg.gif"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz mx l"/></div></figure><p id="f298" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">为什么？</strong></p><p id="cbb2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">提示</strong>(来自<a class="ae na" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND" rel="noopener ugc nofollow" target="_blank"> MDN </a>):“一组布尔操作数的逻辑AND ( &amp; &amp;)运算符(逻辑合取)当且仅当所有操作数为真时为真。否则就是假的。”</p><p id="a76f" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">更一般地，当从左到右求值时，运算符返回遇到的第一个假操作数的值，或者如果它们都为真，则返回最后一个操作数的值。</p><p id="df35" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">几个例子</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a6e3" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在我终于明白为什么那样写代码会导致错误。原因如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5df7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">如何解决？</strong></p><p id="1613" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我找到了三种方法来解决这个问题。我希望你不要犯和我一样的错误。祝福你。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="b90d" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">2.“道具.儿童”的奇怪行为</h1><p id="d553" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我猜你也写过类似的代码。向<code class="fe nb nc nd ne b">&lt;Container /&gt;</code>组件传递内容时，将显示<strong class="ll ir">【孩子】</strong>。否则，将显示一个空的工具提示。像下面这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="c3c7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">我的老板:“你必须谨慎使用‘儿童’属性，它会引起逻辑异常！就像下面这些情况。”</strong></p><p id="5ea4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir"> 1。清空列表数据</strong></p><p id="4264" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">你认为这个例子会显示什么——“空”吗？</p><p id="5a0e" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">很不幸，答案是另一个。你也觉得不可思议吗？朋友们，一定要非常谨慎地使用<code class="fe nb nc nd ne b">props.children</code>。否则老板可能会扣你工资。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/97c28b5f6aa486d4ced9db77848cca45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/0*RNx4CBZhOVgUBBZs.png"/></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk">props.children</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="85cb" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">为什么？</strong></p><p id="07d6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">让我们向“容器”组件添加一行代码，并尝试打印出子组件是什么！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="0e99" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">是的，你是对的。此时，“children”是一个空数组，所以显示“children的内容是:”而不是“empty”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/ade88ccf9350fde20165ebe0c1c7851e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EEAGIcN-0tjDUWxd.png"/></div></div></figure><p id="f999" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">怎么解决？</strong></p><p id="5c2b" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">使用<a class="ae na" href="https://reactjs.org/docs/react-api.html#reactchildrentoarray" rel="noopener ugc nofollow" target="_blank">做出反应。Children.toArray </a>解决这个问题会很容易，这时你会看到“空”显示出来。所以如果你真的需要用孩子作为条件判断，我建议你用这个方法！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="faa0" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">3.关于安装和更新的问题</h1><p id="8dbb" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在React中通过状态切换组件是很常见的，但是这个小东西也会让你迷惑。</p><p id="08dc" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在下面的代码中，你是否认为当你切换名称的值时，一个演示组件会被卸载，另一个会被挂载？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="fe0e" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我录了一个简短的gif给你说实话，你也可以通过CodePen试试。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/80db8e9d403599b9f0faa1f582ab678b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oyq344hq0NKHGe6r.gif"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz mx l"/></div></figure><p id="a13f" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">为什么？</strong></p><p id="935a" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">虽然我们写了两个<code class="fe nb nc nd ne b">Demo</code>组件，并假设它们会分别挂载和更新，但React认为它们是同一个组件，所以<code class="fe nb nc nd ne b">componentDidMount</code>只会执行一次。</p><p id="cbc1" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">如何解决？</strong></p><p id="e982" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">但是当我们想写两个完全相同的组件，却传递不同的参数时，该怎么办呢？</p><p id="e44b" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">是的，你应该给这两个组件添加不同的键，这样React就会认为它们是不同的组件。组件安装也将被单独执行。</p><p id="dad0" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><code class="fe nb nc nd ne b">Let's try</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/ba2636fbf3c732b91b46dad312cc5de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*m7ylFgUvQV82-opn1mFdtg.gif"/></div></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk">key for Demo</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz mx l"/></div></figure><h1 id="6590" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">最后</h1><p id="ca8f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><strong class="ll ir">感谢阅读。</strong>期待<strong class="ll ir"> </strong>期待您的关注，阅读更多高质量的文章。</p><div class="nl nm gp gr nn no"><a rel="noopener  ugc nofollow" target="_blank" href="/8-cool-github-tricks-to-make-you-look-like-a-senior-developer-ab8fe9ae9b14"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">让你看起来像高级开发人员的8个很酷的GitHub技巧</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">使用GitHub可以做的8件很酷的事情</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener  ugc nofollow" target="_blank" href="/10-easy-interview-questions-you-may-not-know-the-answer-e9421a0953b8"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">10个你可能不知道答案的简单面试问题</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">99%的人不一定知道答案。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-can-x-x-return-true-in-javascript-7e1d1fa7b5cd"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">面试官:可以“x！== x "在JavaScript中返回True？</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">你可能不知道的五个神奇的JavaScript知识点！</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="oe l nz oa ob nx oc kp no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener  ugc nofollow" target="_blank" href="/what-does-123-tostring-length-123-print-out-in-javascript-2c804a414325"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">123['toString']。length + 123)用JavaScript打印出来？</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">95%的前端开发者回答错误的问题。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="of l nz oa ob nx oc kp no"/></div></div></a></div><p id="b317" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><em class="og">更多内容请看</em><a class="ae na" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="og">plain English . io</em></strong></a><em class="og">。报名参加我们的</em> <a class="ae na" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="og">免费周报</em> </strong> </a> <em class="og">。关注我们关于</em><a class="ae na" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="og">Twitter</em></strong></a><em class="og">和</em><a class="ae na" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="og">LinkedIn</em></strong></a><em class="og">。查看我们的</em> <a class="ae na" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="og">社区不和谐</em> </strong> </a> <em class="og">加入我们的</em> <a class="ae na" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="og">人才集体</em> </strong> </a> <em class="og">。</em></p></div></div>    
</body>
</html>