<html>
<head>
<title>JavaScript Runtime Node.js 19 Keeps the HTTP Connection Alive and Replaces Nodemon!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript Runtime Node.js 19保持HTTP连接活动并替换Nodemon！</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-runtime-node-js-19-keeps-the-http-connection-alive-and-replaces-nodemon-6925ce113271?source=collection_archive---------5-----------------------#2022-10-24">https://javascript.plainenglish.io/javascript-runtime-node-js-19-keeps-the-http-connection-alive-and-replaces-nodemon-6925ce113271?source=collection_archive---------5-----------------------#2022-10-24</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="166b" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">很酷的新功能，少了一个要安装的npm包💪🏾</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/112ac0dbc002b9581e7ef24898ca4bce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ylZq9SQ05k3ZhsvZweE1qg.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@markuswinkler?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Markus Winkler</a> on <a class="ae kw" href="https://unsplash.com/s/photos/news?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5b62" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">上周，Node.js社区发布了Node.js 19，这是第18版发布6个月后的结果。最新版本的开源JavaScript运行时环境中包含了一个新的实验性特性，可以在重要文件更新时重新启动这个过程。此外，HTTP的保持活动功能会立即打开。</p><p id="8585" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">内部已经做了一些改变:JavaScript引擎V8的10.7版本和处理HTTP处理的8.1.0版本的<code class="fe lt lu lv lw b">llhttp library</code>，现在在运行时环境中使用。</p><p id="b5f3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">四月份发布的Node.js 18将在接下来的一周进入长期支持(LTS)。运行总共三年，运行时的偶数版本号随着奇数版本号的发布而过渡到LTS阶段，而奇数版本号随着随后偶数版本号的发布而达到其寿命终点(EOL)。因此，Node.js 18将支持到2025年4月30日，而Node.js 19将只支持到2023年6月1日。</p><h1 id="c17a" class="lx ly ir bd lz ma mb mc md me mf mg mh jx mi jy mj ka mk kb ml kd mm ke mn mo bi translated">保持连接</h1><p id="2b86" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">这个新版本(Node.js 19)默认启用<code class="fe lt lu lv lw b">keepAlive</code>。传出HTTP(S)连接受HTTP/1.1中包含的保持活动功能的约束，该功能重用当前连接，通常会提高性能。超时默认设置为5秒。</p><p id="fe82" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">启用<code class="fe lt lu lv lw b">keepAlive</code>会带来更好的性能，因为默认情况下会重用连接。</p><p id="5656" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">此外，代理现在可以解释服务器可能发送的任何响应<code class="fe lt lu lv lw b">keepAlive</code>消息。客户端通过这个头被告知保持连接的时间。另一方面，当使用<code class="fe lt lu lv lw b">close()</code>方法时，Node.js HTTP服务器现在将立即断开不活动的客户机(这些客户机利用HTTP Keep-Alive来重用连接)。此外，Node.js HTTP(S)/1.1请求的吞吐量/性能可能会有默认的提高。</p><h1 id="ff94" class="lx ly ir bd lz ma mb mc md me mf mg mh jx mi jy mj ka mk kb ml kd mm ke mn mo bi translated">加密现在是稳定的！</h1><p id="7c61" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">Node.js 19稳定了WebCrypto API，可以由<code class="fe lt lu lv lw b">globalThis.crypto</code>或<code class="fe lt lu lv lw b">require('node:crypto').webcrypto</code>使用(使用以下算法的情况除外:X448、X25519、Ed448和Ed25519)</p><h1 id="362c" class="lx ly ir bd lz ma mb mc md me mf mg mh jx mi jy mj ka mk kb ml kd mm ke mn mo bi translated">可用的观察模式</h1><p id="dbab" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">严格来说，仍然标记为实验性的(几乎)新命令行参数<code class="fe lt lu lv lw b">--watch</code>，已经做成了18系列的运行时环境，从18.11版本就已经知道了。如果它是活动的，运行时检查文件的更改，如果是，重新启动进程。当文件由以下人员运行时，它可以被激活:</p><h1 id="a272" class="lx ly ir bd lz ma mb mc md me mf mg mh jx mi jy mj ka mk kb ml kd mm ke mn mo bi translated">结束语</h1><p id="a705" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">快速更新新Node.js版本中的重要新变化。由于最新的LTS版本16将于明年弃用，您应该考虑更新到18 LTS或19。这一过程可能会对你的应用程序造成严重损害，你应该尽早。</p><p id="a86d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我的建议:<strong class="kz is">现在就开始！</strong></p><p id="4905" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">此外，除了创新之外，值得注意的是Node.js 19不再为分析工具DTrace、SystemTap和ETW(Windows事件跟踪)提供连接。使与工具的交互保持最新显然太复杂了。</p><pre class="kh ki kj kk gu mu lw mv mw aw mx bi"><span id="8db8" class="my ly ir lw b gz mz na l nb nc"><strong class="lw is">Want to Connect?</strong></span><span id="b502" class="my ly ir lw b gz nd na l nb nc">Feel free to connect with me on <a class="ae kw" href="https://www.knulst.de/" rel="noopener ugc nofollow" target="_blank">my blog</a>, <a class="ae kw" href="https://www.linkedin.com/in/paulknulst/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>, and <a class="ae kw" href="https://twitter.com/paulknulst" rel="noopener ugc nofollow" target="_blank">Twitter</a>.</span></pre></div><div class="ab cl ne nf hv ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ik il im in io"><p id="85cd" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="nl">本文最初发表于我的博客</em><a class="ae kw" href="https://www.paulsblog.dev/javascript-runtime-node-js-19-keeps-the-http-connection-alive/" rel="noopener ugc nofollow" target="_blank"><em class="nl">https://www . paulsblog . dev/JavaScript-runtime-node-js-19-keeps-the-http-connection-alive/</em></a></p></div><div class="ab cl ne nf hv ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ik il im in io"><p id="05bf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="nl">更多内容看</em> <a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">说白了。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">免费周报</em> </strong> </a> <em class="nl">。关注我们关于</em> <a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">推特</em> </strong> </a>，<a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="nl">LinkedIn</em></strong></a><em class="nl">，</em><a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="nl">YouTube</em></strong></a><em class="nl">，以及</em> <a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">不和</em> </strong> </a> <em class="nl">。对增长黑客感兴趣？检查</em> <a class="ae kw" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="nl">电路</em> </strong> </a> <em class="nl">。</em></strong></a></p></div></div>    
</body>
</html>