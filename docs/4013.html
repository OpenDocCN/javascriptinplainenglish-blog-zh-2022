<html>
<head>
<title>How to Test Your Front-end Code With Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Cypress测试你的前端代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/testing-your-front-end-code-with-cypress-4a3c64ab89d4?source=collection_archive---------2-----------------------#2022-10-18">https://javascript.plainenglish.io/testing-your-front-end-code-with-cypress-4a3c64ab89d4?source=collection_archive---------2-----------------------#2022-10-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6b4c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">通过编写端到端测试使您的代码更加安全</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/769abfa28e2e478c501b428d3abb93bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d0mgw2xGRRR7_2oML-fG3A.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="https://www.pexels.com/photo/forest-covered-in-white-fog-1423600/" rel="noopener ugc nofollow" target="_blank">Photo by Johannes Plenio</a></figcaption></figure><h1 id="9222" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated"><strong class="ak">关于我</strong></h1><blockquote class="ll lm ln"><p id="10f8" class="lo lp lq lr b ls lt jo lu lv lw jr lx ly lz ma mb mc md me mf mg mh mi mj mk ig bi translated">你好。我是杰里米。我写一些关于前端开发的文章来帮助初学者更好地理解Web开发的内部工作。如果你对这篇文章有任何疑问，请留下评论，我会尽快回复你，或者登陆LinkedIn <a class="ae ks" href="https://www.linkedin.com/in/jeremylgrice/" rel="noopener ugc nofollow" target="_blank"> @JeremyGrice。你可以到我的个人网站查看</a></p></blockquote></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="a8b3" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated"><strong class="ak">为什么要用柏树？</strong></h1><p id="8688" class="pw-post-body-paragraph lo lp in lr b ls mx jo lu lv my jr lx mz na ma mb nb nc me mf nd ne mi mj mk ig bi translated">Cypress使您能够编写所有类型的测试:</p><ul class=""><li id="5aa0" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated">端到端测试</li><li id="dd28" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">集成测试</li><li id="f0ba" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">单元测试</li></ul><p id="7f24" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">Cypress可以测试任何在浏览器中运行的东西。</p><p id="074b" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">Cypress是一个健壮的测试工具。它有很多非常酷的特性，并且可以做其他测试框架做不到的事情:</p><ul class=""><li id="437f" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated">Cypress将在您的测试运行时拍摄快照。当程序运行时，您可以将鼠标悬停在命令日志中的命令上，以查看程序运行时到底发生了什么。</li><li id="2f08" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">停止猜测你的测试失败的原因。直接从你熟悉的工具中调试，比如浏览器开发工具。Cypress使错误更具可读性。</li><li id="8675" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">不再有异步地狱。您永远不需要在测试中添加等待或休眠，因为Cypress会在继续之前自动等待命令和断言。</li><li id="e3f9" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">从CLI运行时，查看失败时自动拍摄的屏幕截图或整个测试套件的视频。</li></ul></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="1695" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated"><strong class="ak">要求</strong></h1><p id="c29d" class="pw-post-body-paragraph lo lp in lr b ls mx jo lu lv my jr lx mz na ma mb nb nc me mf nd ne mi mj mk ig bi translated">为此，您将需要以下内容:</p><ul class=""><li id="5bf9" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated">macOS 10.9及以上，Linux Ubuntu 12.04及以上，Fedora 21和Debian 8，或Windows 7及以上(<em class="lq">仅限64位)</em></li><li id="1e3f" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">Node.js 12或14及以上版本</li></ul></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="94d9" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated"><strong class="ak">安装</strong></h1><p id="a796" class="pw-post-body-paragraph lo lp in lr b ls mx jo lu lv my jr lx mz na ma mb nb nc me mf nd ne mi mj mk ig bi translated">要安装cypress，请将cd安装到您的项目所在的目录中，并运行这个命令</p><p id="f4dd" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated"><strong class="lr io"> NPM </strong></p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="f735" class="ny ku in nu b gy nz oa l ob oc">npm install cypress --save-dev</span></pre><p id="b85a" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated"><strong class="lr io">纱线</strong></p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="1edf" class="ny ku in nu b gy nz oa l ob oc">yarn add cypress --dev</span></pre><p id="40b9" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">之后，事情应该就好办了！</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="7227" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated"><strong class="ak">利用柏树</strong></h1><div class="od oe gp gr of og"><a href="https://docs.cypress.io/guides/overview/why-cypress" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">为什么是柏树？Cypress文档</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">什么是赛普拉斯，为什么你应该使用它我们的使命，我们相信在关键赛普拉斯的特点类型的测试…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">docs.cypress.io</p></div></div><div class="op l"><div class="oq l or os ot op ou km og"/></div></div></a></div><p id="d796" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">现在我们已经做好了一切准备，让我们实际使用它。下面，我将介绍一些你可以用柏树做的事情的例子。</p><p id="e3b8" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated"><strong class="lr io">访问网站</strong></p><p id="6eee" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">让我们先从最基本的开始。如果我们想让我们的测试访问一个特定的站点呢？让我们利用<code class="fe ov ow ox nu b">cy.visit()</code>并传入我们想要的url。</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="9d06" class="ny ku in nu b gy nz oa l ob oc">describe('Our test', () =&gt; {<br/>  it('Visits vetthatcodes', () =&gt; {<br/>    cy.visit('https://www.vetthatcodes.com')<br/>  })<br/>})</span></pre><p id="7a5f" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">当您运行这个测试时，您会注意到一些事情</p><ul class=""><li id="6b63" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><a class="ae ks" href="https://docs.cypress.io/guides/core-concepts/cypress-app#Command-Log" rel="noopener ugc nofollow" target="_blank">命令日志</a>现在显示<code class="fe ov ow ox nu b">VISIT</code>动作</li><li id="d2ff" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">我们的网站被载入右侧的<a class="ae ks" href="https://docs.cypress.io/guides/core-concepts/cypress-app#Overview" rel="noopener ugc nofollow" target="_blank">应用预览</a>窗格</li><li id="97e8" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">我们的测试是绿色的，这意味着它通过了(我们还没有使用任何断言，所以这是有意义的)</li></ul><p id="c780" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated"><strong class="lr io"> Get() </strong></p><div class="od oe gp gr of og"><a href="https://docs.cypress.io/api/commands/get#Syntax" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">获取| Cypress文档</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">通过选择器或别名获取一个或多个DOM元素。此命令的查询行为类似于…中的工作方式</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">docs.cypress.io</p></div></div><div class="op l"><div class="oy l or os ot op ou km og"/></div></div></a></div><p id="05e0" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">使用Cypress时最常用的一个工具是<code class="fe ov ow ox nu b">.get(...)</code>。这里的文档是<a class="ae ks" href="https://docs.cypress.io/api/commands/get" rel="noopener ugc nofollow" target="_blank"/>。这允许您通过选择器获得一个或多个DOM元素。<code class="fe ov ow ox nu b">get(...)</code>根据选择器返回一个元素——类似于jQuery的<code class="fe ov ow ox nu b">$(...)</code></p><p id="f2ef" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">举个例子，如果我们想获得一个元素，然后检查它是否被禁用，我们可以做以下事情</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="a250" class="ny ku in nu b gy nz oa l ob oc">cy.get('input').should('be.disabled')<!-- --> </span></pre><p id="a13f" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">关于<code class="fe ov ow ox nu b">cy.get(...)</code>的几个旁注</p><ul class=""><li id="3ff0" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated">它会自动重试，直到我们要找的东西存在于DOM中。</li><li id="be3b" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">它将自动重试，直到所有链接的断言都已通过</li><li id="85b2" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">它可以在等待DOM中存在东西时超时。</li><li id="2d6c" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">它可以在等待所有断言通过时超时。</li></ul></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="0461" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated"><strong class="ak">断言</strong></h1><div class="od oe gp gr of og"><a href="https://docs.cypress.io/guides/references/assertions#BDD-Assertions" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">断言| Cypress文档</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">Cypress捆绑了流行的Chai断言库，以及对Sinon和jQuery有用的扩展，为您带来…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">docs.cypress.io</p></div></div><div class="op l"><div class="oz l or os ot op ou km og"/></div></div></a></div><blockquote class="ll lm ln"><p id="b282" class="lo lp lq lr b ls lt jo lu lv lw jr lx ly lz ma mb mc md me mf mg mh mi mj mk ig bi translated">断言是我们在测试中验证给定步骤的一种方式。这些断言决定了任何给定的步骤是否成功。断言验证测试中的元素、对象或应用程序的期望状态。</p></blockquote><p id="f9ad" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">根据赛普拉斯的文件，我附上了一些比较常见的。这些我就不赘述了，因为可读性很强。</p><ul class=""><li id="0101" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">不是</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="803c" class="ny ku in nu b gy nz oa l ob oc">expect(name).to.not.equal(‘Jeremy’)</span></pre><ul class=""><li id="6cbf" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">真</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="a80b" class="ny ku in nu b gy nz oa l ob oc">expect(true).to.be.true;</span></pre><ul class=""><li id="c259" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">长度</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="65ee" class="ny ku in nu b gy nz oa l ob oc">cy.get('li.selected').should('have.length', 1)</span></pre><ul class=""><li id="092a" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">类</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="ac24" class="ny ku in nu b gy nz oa l ob oc">cy.get('form').find('input').should('not.have.class', 'enabled')</span></pre><ul class=""><li id="6291" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">值</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="c399" class="ny ku in nu b gy nz oa l ob oc">cy.get('textarea').should('have.value', 'this site is awesome')</span></pre><ul class=""><li id="c1fc" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">能见度</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="9d00" class="ny ku in nu b gy nz oa l ob oc">cy.get('p').should('be.visible')</span><span id="9422" class="ny ku in nu b gy pa oa l ob oc">// or</span><span id="dc5e" class="ny ku in nu b gy pa oa l ob oc">cy.get('p.hidden').should('not.be.visible')</span></pre><ul class=""><li id="dd33" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">存在</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="eeab" class="ny ku in nu b gy nz oa l ob oc">cy.get('[data-cy="loading"]').should('not.exist')</span></pre><ul class=""><li id="d729" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">状态</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="5ea5" class="ny ku in nu b gy nz oa l ob oc">cy.get(':radio').should('be.checked')</span></pre><ul class=""><li id="cc70" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io"> CSS </strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="9a86" class="ny ku in nu b gy nz oa l ob oc">cy.get('[data-cy="completed"]').should(<br/>  'have.css',<br/>  'text-decoration',<br/>  'line-through'<br/>);</span></pre><ul class=""><li id="b9f6" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">禁用属性</strong></li></ul><p id="5c01" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">如果我们有一个包含以下内容的HTML元素会怎么样</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="6be9" class="ny ku in nu b gy nz oa l ob oc">&lt;input type="text" data-cy="input" disabled /&gt;</span></pre><p id="6110" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">然后我们可以用</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="5126" class="ny ku in nu b gy nz oa l ob oc">cy.get('[data-cy="input"]').should('be.disabled')</span></pre><ul class=""><li id="5c2c" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated"><strong class="lr io">链接断言</strong></li></ul><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="829a" class="ny ku in nu b gy nz oa l ob oc">&lt;a data-cy="assertions-link" class="active" href="https://on.cypress.io" target="_blank"&gt;Cypress Docs&lt;/a&gt;</span></pre><p id="a48e" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">然后，我们可以用一连串的断言来检查多个东西</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="1f45" class="ny ku in nu b gy nz oa l ob oc">cy.get('[data-cy="assertions-link"]')<br/>  .should('have.class', 'active')<br/>  .and('have.attr', 'href')<br/>  .and('include', 'cypress.io')</span></pre><p id="eb94" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated"><strong class="lr io">柏树上的承诺</strong></p><p id="1806" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">我们可以使用<code class="fe ov ow ox nu b">Cypress.Promise</code>来创建承诺，所以如果你从像<code class="fe ov ow ox nu b"><a class="ae ks" href="https://docs.cypress.io/api/commands/then" rel="noopener ugc nofollow" target="_blank">.then()</a></code>这样的命令中返回一个承诺，Cypress将不会继续，直到这些承诺解决。这是超级整洁，非常强大。让我们在下面写一个快速的例子。</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="64b3" class="ny ku in nu b gy nz oa l ob oc">cy.get('button').then((response) =&gt; {<br/>  return <em class="lq">new</em> Cypress.Promise((resolve, reject) =&gt; {<br/>    // write your custom logic here<br/>  })<br/>})</span></pre><p id="27c1" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">我们也可以像这样处理承诺中的错误</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="fe44" class="ny ku in nu b gy nz oa l ob oc">Cypress.Promise.onPossiblyUnhandledRejection((error, promise) =&gt; {<br/>  throw error;<br/>})</span></pre></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="d696" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated"><strong class="ak">编写我们的第一个测试</strong></h1><p id="9cbd" class="pw-post-body-paragraph lo lp in lr b ls mx jo lu lv my jr lx mz na ma mb nb nc me mf nd ne mi mj mk ig bi translated">既然我们已经解决了所有这些问题，我确信我们会想要编写一个测试。我们测试的游戏计划如下</p><ul class=""><li id="3bf5" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk nk nl nm nn bi translated">访问该页面以确保其加载</li><li id="b829" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">检查我们的主机名、端口和协议的准确性</li><li id="ed4a" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated">检查标题</li></ul><p id="7cdb" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">现在我们有了一个行动计划，我们想要编写我们的测试。</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="a872" class="ny ku in nu b gy nz oa l ob oc">describe('Navigating to our URL', () =&gt; {<br/>  it('is successful', () =&gt; {<br/>    cy.visit('www.localhost:3000');<br/>    cy.location().should((page) =&gt; {<br/>      expect(page.hostname).to.equal('www.localhost');<br/>      expect(page.port).to.equal('3000');<br/>      expect(page.protocol).to.equal('http:');<br/>    });<br/>    cy.title().should('contain', 'cypress-testing');<br/>  })<br/>})</span></pre></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="4f34" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated">最佳实践</h1><div class="od oe gp gr of og"><a href="https://docs.cypress.io/guides/references/best-practices#How-It-Works" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">最佳实践| Cypress文档</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">2018年2月，我们在AssertJS举办了“最佳实践”会议。本视频演示了如何接近…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">docs.cypress.io</p></div></div><div class="op l"><div class="pb l or os ot op ou km og"/></div></div></a></div><p id="1af6" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">就像任何编程语言或工具一样，它应该总是有一套最佳实践。赛普拉斯也不例外。</p><p id="67b7" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">虽然有很多事情你应该知道，但有两件最重要的事情一直在我脑海中挥之不去</p><ol class=""><li id="7561" class="nf ng in lr b ls lt lv lw mz nh nb ni nd nj mk pc nl nm nn bi translated">不要将基于CSS属性的元素作为目标，比如:<code class="fe ov ow ox nu b">id</code>、<code class="fe ov ow ox nu b">class</code>、<code class="fe ov ow ox nu b">tag</code></li><li id="2c54" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk pc nl nm nn bi translated">添加<code class="fe ov ow ox nu b">data-*</code>属性，使其更容易定位元素</li></ol><p id="8742" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">这两件事都是如何选择和不选择你的元素的最佳实践，因为这两件事将使你的Cypress测试不会变得非常脆弱，并且应该防止事情破裂。</p><p id="6dbb" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">让我们很快过一遍。假设我们有这个按钮</p><pre class="kd ke kf kg gt nt nu nv nw aw nx bi"><span id="c5b9" class="ny ku in nu b gy nz oa l ob oc">&lt;button id="primary-button" class="btn btn-small" name="submit-button" role="button" data-cy="submit-button"&gt;<br/>  Submit<br/>&lt;/button&gt;</span></pre><p id="92ce" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">在我们的测试中选择这个元素的最佳方法是什么？由于在web开发中通过id来选择任何东西通常都是不好的做法，并且类有时可能会发生变化，所以我们很可能希望基于<code class="fe ov ow ox nu b">data-cy="..."</code>来选择<code class="fe ov ow ox nu b">.get()</code></p><p id="17b6" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated">这是为什么呢？当使用cypress时，data-cy是一个特定于cypress的选择器，我们可以将它添加到元素中。这给了我们一些东西，并告诉其他开发人员这是cypress特有的。我们可以像这样编写我们的选择器=&gt; <code class="fe ov ow ox nu b">cy.get('[data-cy="submit-button"]').click()</code>，这将防止我们的测试在将来中断。如果您想了解更多，可以在本节顶部的最佳实践链接中找到。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="4ba6" class="kt ku in bd kv kw ms ky kz la mt lc ld jt mu ju lf jw mv jx lh jz mw ka lj lk bi translated">如果您觉得这篇文章有帮助或有趣，请不要犹豫点击👏按钮，或者如果您有任何问题，请在下面留下您的评论。</h1><h1 id="1937" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">另外，别忘了看看我的其他文章</h1><ul class=""><li id="e5d9" class="nf ng in lr b ls mx lv my mz pd nb pe nd pf mk nk nl nm nn bi translated"><a class="ae ks" href="https://medium.com/enlear-academy/build-deploy-a-great-looking-site-with-nextjs-and-netlify-eb9e59a7e0ad" rel="noopener">构建&amp;用Next.js和Netlify部署一个漂亮的网站</a></li><li id="8a50" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated"><a class="ae ks" href="https://medium.com/enlear-academy/async-await-how-the-heck-do-i-use-this-thing-3199f0701041" rel="noopener"> Async Await:我到底该怎么使用这个东西？</a></li><li id="b046" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/level-up-your-skills-in-javascript-with-the-inclusion-of-promises-5a2c84f2fe71">通过承诺提升你的javascript技能</a></li><li id="cc3a" class="nf ng in lr b ls no lv np mz nq nb nr nd ns mk nk nl nm nn bi translated"><a class="ae ks" href="https://medium.com/@vetthatcodes" rel="noopener">我的所有文章</a></li></ul></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="4043" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx mz lz ma mb nb md me mf nd mh mi mj mk ig bi translated"><em class="lq">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="lq">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="lq">免费周报</em> </strong> </a> <em class="lq">。关注我们上</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="lq">推特</em> </strong> </a>，<a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lr io"><em class="lq">LinkedIn</em></strong></a><strong class="lr io"><em class="lq">，</em></strong><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lr io"><em class="lq">YouTube</em></strong></a><strong class="lr io"><em class="lq">，以及</em></strong><em class="lq"><a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="lr io"><em class="lq">不和</em> </strong> </a></em> </strong> <em class="lq">对成长黑客感兴趣？检查出</em> </a><a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="lq">电路</em> </strong> </a> <strong class="lr io"> <em class="lq">。</em>T75】</strong></p></div></div>    
</body>
</html>