<html>
<head>
<title>An Introduction to ng-container for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向初学者的ng-container介绍</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-ng-container-cce9f880abd2?source=collection_archive---------5-----------------------#2022-02-11">https://javascript.plainenglish.io/what-is-ng-container-cce9f880abd2?source=collection_archive---------5-----------------------#2022-02-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5ff3" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">什么是ng-container，为什么使用它？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/885c140ae04ac6f4d4ac03dcac200246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6OUJ26ZPBMaOJRUe"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@ale_s_bianchi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alessandro Bianchi</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a144" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你一直在研究Angular，那么毫无疑问你一定使用了结构指令(例如*ngFor，*ngIf)。</p><p id="3f3f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你有没有遇到过这样的情况，为了实现功能，你必须同时使用两个结构指令。</p><p id="c4eb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以下面的基本场景为例，我们正在迭代一个数字数组，并且只想显示奇数。</p><p id="0f6f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一种简单的方法是:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="6d47" class="lu lv in lq b gy lw lx l ly lz">&lt;div *ngFor="let i of [1, 2, 3, 4]" *ngIf="i % 2"&gt;</span><span id="2ab2" class="lu lv in lq b gy ma lx l ly lz">{{ i }}</span><span id="12e1" class="lu lv in lq b gy ma lx l ly lz">&lt;/div&gt;</span></pre><p id="aac4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但是一旦我们尝试这样做，就会出现一个可怕的错误。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="086c" class="lu lv in lq b gy lw lx l ly lz">Template parse errors:<br/>Can't have multiple template bindings on one element. Use only one attribute prefixed with * ("&lt;div *ngFor="let i of [1, 2, 3, 4]" [ERROR -&gt;]*ngIf="i % 2"&gt;<br/>  {{ i }}<br/>&lt;/div&gt;</span></pre><p id="4d85" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个错误用外行人的话来说就是我们不能在同一个DOM元素上使用两个结构化指令。</p><p id="2fdf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那么，我们剩下的解决方案是，简单地添加一个额外的HTML标签。我不会说谎，但这是我做的😏是的，它会起作用。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="5a97" class="lu lv in lq b gy lw lx l ly lz">&lt;div *ngFor="let i of [1, 2, 3, 4]"&gt;</span><span id="892a" class="lu lv in lq b gy ma lx l ly lz">&lt;div &gt;</span><span id="4529" class="lu lv in lq b gy ma lx l ly lz">{{ i }}</span><span id="0f5e" class="lu lv in lq b gy ma lx l ly lz">&lt;/div&gt;</span><span id="3fc8" class="lu lv in lq b gy ma lx l ly lz">&lt;/div&gt;</span></pre><p id="d07f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但这是一种好的做法吗？毫不犹豫的回答是一个大大的否定。</p><h2 id="a401" class="lu lv in bd mb mc md dn me mf mg dp mh lc mi mj mk lg ml mm mn lk mo mp mq mr bi translated"><strong class="ak">为什么？</strong></h2><p id="b53b" class="pw-post-body-paragraph kt ku in kv b kw ms jo ky kz mt jr lb lc mu le lf lg mv li lj lk mw lm ln lo ig bi translated">因为从长远来看，你正在使DOM变得庞大，如果有多个这样的场景，后果可能是添加不必要的HTML标签和不必要的CSS来实现UX。</p><p id="db83" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">观察这种情况下产生的DOM。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mx"><img src="../Images/1d8ef31f823abae361098d395aa68c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sdcEe19JTUXRTCiqopgKFw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">DOM without ng-container</figcaption></figure><p id="eef0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">可能看起来有点复杂，但这里值得注意的一点是div中存在div，并且我们已经复合了许多div元素。<br/>想象一下在应用程序的多个地方都有这样的场景😱。</p><p id="5b98" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们理解了这个问题，但是解决方案是什么呢？</p><p id="0d14" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">解决方案是使用一个<strong class="kv io"> <em class="my"> ng容器</em> </strong>。</p><p id="e02e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">基本上，ng-container可以用在任何地方的Angular应用程序中，我们希望在其中进行一些计算，比如对任何结构指令进行评估，并且我们不希望将元素与DOM相关联。</p><p id="7a7c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">基本上，ng-container就像一个ghost标签，完成一些计算，然后就不存在了。因此，任何与ng-container相关的东西，比如样式/id/类等等。也变得不存在。</p><p id="b4d1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们试着用ng-container重写上面的例子，并理解其中的区别。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="c205" class="lu lv in lq b gy lw lx l ly lz">&lt;ng-container *ngFor="let i of [1, 2, 3, 4]"&gt;</span><span id="afb7" class="lu lv in lq b gy ma lx l ly lz">&lt;div *ngIf="i % 2"&gt;</span><span id="5686" class="lu lv in lq b gy ma lx l ly lz">{{ i }}</span><span id="ad06" class="lu lv in lq b gy ma lx l ly lz">&lt;/div&gt;</span><span id="a659" class="lu lv in lq b gy ma lx l ly lz">&lt;/ng-container&gt;</span></pre><p id="dc8f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以，这里我们没有使用div，而是使用了ng-container。结果将保持不变。</p><p id="cccc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这种情况下，观察计算出的DOM:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mz"><img src="../Images/f51cd506fc2a8044924b4e6cefb651dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IGMBZdyIO5yzOb6gusxMfg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">DOM With ng-container</figcaption></figure><p id="7f30" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">只有当div只出现在我们要显示的元素上时，DOM看起来更整洁。</p><p id="86a3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我希望从下一次开始，你将不再使用div标签，而是使用ng-container，这将使DOM成为其他标签更干净的地方😏。</p><p id="7992" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">简而言之，这是关于ng-container的基本用法。希望这篇文章对你有用。如果你有任何疑问，请告诉我，我会尽力回答，或者如果有任何反馈，请告诉我。</p><p id="95a9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="my">更多内容请看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="my">plain English . io</em></strong></a><em class="my">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="my">免费周报</em> </strong> </a> <em class="my">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="my">社区</em> </strong> </a> <em class="my">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>