<html>
<head>
<title>Stop Overcomplicating Web Development — Try Svelte</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止过度复杂的网络开发——尝试精简</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stop-overcomplicating-web-development-try-svelte-a188ca2a79fa?source=collection_archive---------8-----------------------#2022-03-20">https://javascript.plainenglish.io/stop-overcomplicating-web-development-try-svelte-a188ca2a79fa?source=collection_archive---------8-----------------------#2022-03-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2501" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">展示苗条身材的核心特征。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8395e65ed09f2f768b466db8f22d84ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4m0mPaW4so-bSvIp.png"/></div></div></figure><p id="1df7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Svelte被评为2021年最受开发者喜爱的web框架<a class="ae lk" href="https://insights.stackoverflow.com/survey/2021#section-most-loved-dreaded-and-wanted-web-frameworks" rel="noopener ugc nofollow" target="_blank">(链接)</a>。那么什么是苗条，为什么如此受人喜爱呢？</p><p id="3970" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Svelte是一个相当独特的javascript框架，它的目标是“真正的反应性”并帮助开发者“编写更少的代码”。</p><p id="d069" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">它有一个很棒的特性，通过让框架本身在编译阶段“消失”来创建微小的代码包，发布优化的普通JavaScript代码，而不是使用运行时加载的大型复杂的库。</p><p id="fbd7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我看来，这是让Svelte从其他JavaScript框架中脱颖而出的游戏规则改变者。一个小的包意味着更快的加载时间，这似乎是网络发展的方向，因为越来越多的数据显示了快速网站的好处。这个编译阶段还消除了对React和Vue.js使用的虚拟DOM等技术的需求，进一步提高了网站的速度。</p><p id="b771" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">另一个特点是没有样板文件。Svelte感觉非常接近标准的web开发，其中组件看起来完全像普通的HTML。我相信这是开发者喜欢这个框架的一个重要原因。</p><p id="730c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了介绍Svelte，让我们使用<a class="ae lk" href="https://pokeapi.co/" rel="noopener ugc nofollow" target="_blank"> PokeAPI </a>创建一个简单的单页应用程序，用户可以在其中选择一个口袋妖怪，并带有一个实时搜索栏来过滤所有口袋妖怪的列表。这将以一种有用的方式展示苗条身材的所有核心特征。完整的代码可以在<a class="ae lk" href="https://github.com/EB1811/svelte-searcher-tut" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="5a10" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">装置</h1><p id="fef0" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">先装基本的Svelte吧。为此，请运行以下命令:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="41f2" class="mn lm in mj b gy mo mp l mq mr">npx degit sveltejs/template new-svelte-project</span></pre><p id="27fc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这将把简单的模板复制到你想要的文件夹中。要启用TypeScript，进入新的svelte文件夹，运行:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="d803" class="mn lm in mj b gy mo mp l mq mr">node scripts/setupTypeScript.js</span></pre><p id="dc16" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在您需要做的就是通过运行以下命令来安装必要的文件</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="7875" class="mn lm in mj b gy mo mp l mq mr">npm install</span></pre><h1 id="ce89" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">组件特征</h1><p id="c918" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">一个苗条的组件是一个以. svelte. <br/>结尾的文件，正如你在App.svelte中看到的，一个苗条的组件可以非常简单，包含三个部分；HTML，一个放置javascript的脚本标签和一个放置CSS的样式标签。这类似于Vue，只是没有样板代码。</p><p id="7104" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">清除App.svelte的脚本和HTML内容，让我们在style标签中使用给定的CSS。</p><h1 id="46f7" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">变量和反应性</h1><p id="884a" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">变量是在脚本标签中创建的。通过使用花括号{}，我们可以非常容易地创建一个字符串变量并在DOM中显示它。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="c0dd" class="mn lm in mj b gy mo mp l mq mr">&lt;! — For example →<br/>&lt;script lang=”ts”&gt;<br/> let name: string = ‘pokemon searcher’<br/>&lt;/script&gt;</span><span id="3256" class="mn lm in mj b gy ms mp l mq mr">&lt;h1&gt;{name}&lt;/h1&gt;</span></pre><p id="d2a3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了搜索口袋妖怪的名字，我们需要一个输入字段和一个保存该字段内容的变量。<br/>为了使‘口袋妖怪名称’变量等于输入字段的内容，我们可以使用一个特殊的细长关键字‘bind’，它允许‘口袋妖怪名称’变量的双向绑定。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="b05c" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte --&gt;<br/>&lt;script lang="ts"&gt;<br/>  let pokemonName: string = ''<br/>&lt;/script&gt;</span><span id="40a0" class="mn lm in mj b gy ms mp l mq mr">&lt;main&gt;<br/>  &lt;span&gt;Search: &lt;/span&gt;<br/>  &lt;input type="text" bind:value="{pokemonName}" /&gt;</span><span id="b6a5" class="mn lm in mj b gy ms mp l mq mr">&lt;h1&gt;Pokemon: {pokemonName}&lt;/h1&gt;<br/>&lt;/main&gt;</span></pre><p id="0c21" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，在输入字段中输入内容会改变口袋妖怪标题的输出。<br/>该bind关键字支持双向绑定，而无需像React中那样使用“onInput”函数来更改“pokemonName”变量的值。</p><h1 id="542d" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">onMount &amp; Async获取</h1><p id="cccd" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">对于这个示例应用程序，我们将PokeAPI中的pokemon名称作为字符串数组存储在一个变量中。</p><p id="e973" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们希望组件一呈现出来就获取数据并进行映射。<br/>为此，我们可以使用‘on mount’，这是一个简单的生命周期函数，在组件第一次呈现到DOM后运行。让我们用它从PokeAPI中获取数据，并将其映射到一个口袋妖怪名称数组中。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="eb96" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - script tag --&gt;<br/>&lt;script lang="ts"&gt;<br/>  import { onMount } from 'svelte'</span><span id="664f" class="mn lm in mj b gy ms mp l mq mr">  let pokemonName: string = ''</span><span id="1e01" class="mn lm in mj b gy ms mp l mq mr">  // Fetch from api then store the mapped names.<br/>  let pokemonData: string[] = []<br/>  onMount(() =&gt; {<br/>    const setPokemonData = async (): Promise&lt;void&gt; =&gt; {<br/>      const rawPokemonData = await (<br/>        await fetch('<a class="ae lk" href="https://pokeapi.co/api/v2/pokemon?limit=99'" rel="noopener ugc nofollow" target="_blank">https://pokeapi.co/api/v2/pokemon?limit=99'</a>)<br/>      ).json()</span><span id="0baa" class="mn lm in mj b gy ms mp l mq mr">      pokemonData = rawPokemonData.results.map(<br/>        (p: { name: string; url: string }) =&gt; p.name<br/>      )<br/>    }<br/>    setPokemonData()<br/>  })<br/>&lt;/script&gt;</span></pre><p id="a3e6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们现在在“pokemonData”数组中有一个Pokemon名称列表，我们可以在我们的简单项目中使用它。</p><h1 id="aa42" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">被动声明</h1><p id="79ba" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">对于live search特性，我们需要一个数组来保存用户从Pokemon名称中输入的内容。</p><p id="4e43" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Svelte有一个很棒的工具来处理从其他属性派生的状态，即反应性声明。它们看起来像这样。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="482b" class="mn lm in mj b gy mo mp l mq mr">$: reactiveVar = otherVar * 2;</span></pre><p id="c0ae" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，“reactiveVar”是一个变量，但是每当“otherVar”变量发生变化时，都会计算它的值(当计算中使用的变量发生变化时，svelte会运行计算)。</p><p id="a2a2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们可以将保存过滤后的口袋妖怪名称的变量变成一个反应性声明。我们称这些为“建议”。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="1457" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - bottom of script tag --&gt;<br/>&lt;script&gt;<br/>  // ...<br/><br/>  let suggestions: string[]<br/>  $: suggestions = <br/>       pokemonName.length &gt; 0<br/>         ? pokemonData.filter(<br/>             (name) =&gt; name.includes(pokemonName)<br/>           )<br/>         : pokemonData<br/>&lt;/script&gt;</span></pre><p id="2b1f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，“suggestions”是一个口袋妖怪名称数组，其中包含输入字段中输入的字符串。</p><p id="c226" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">被动赋值不能与typescript一起使用，所以我们可以声明一个“建议”变量来保留类型检查。</p><h1 id="5554" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">环</h1><p id="784e" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">我们希望在页面上显示这个“建议”数组的内容，我们可以通过使用一个细长的循环来实现。Svelte有一个特殊的关键字“each ”,使我们能够显示给定iterable中每一项的DOM元素。<br/>要显示每个口袋妖怪的名字，只需使用每个关键字循环“口袋妖怪数据”变量。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="bf91" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - html --&gt;<br/>&lt;main&gt;<br/>  &lt;span&gt;Search: &lt;/span&gt;<br/>  &lt;input type="text" bind:value="{pokemonName}" /&gt;<br/><br/>  {#each suggestions as suggestion}<br/>    &lt;h2&gt;{suggestion}&lt;/h2&gt;<br/>  {/each}<br/>&lt;/main&gt;</span></pre><p id="9db6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当我们在输入字段中键入内容时，我们可以看到建议列表发生了变化。对于这样简单的代码来说很酷。</p><h1 id="c05d" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">条件渲染</h1><p id="d79a" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">Svelte还有其他关键词。另一个有用的是<code class="fe mt mu mv mj b">#if</code>。<code class="fe mt mu mv mj b">#if</code>关键字允许条件逻辑。</p><p id="cd1f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如，当我们从PokeAPI获取数据时，我们可以呈现一个加载屏幕。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="4c35" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - html --&gt;<br/>&lt;main&gt;<br/>  {#if pokemonData &amp;&amp; pokemonData.length &gt; 0}<br/>    &lt;span&gt;Search: &lt;/span&gt;<br/>    &lt;input type="text" bind:value="{pokemonName}" /&gt;<br/><br/>    {#each suggestions as suggestion}<br/>      &lt;h2&gt;{suggestion}&lt;/h2&gt;<br/>    {/each}<br/>  {:else}<br/>    &lt;h2&gt;Loading...&lt;/h2&gt;<br/>  {/if}<br/>&lt;/main&gt;</span></pre><h1 id="529a" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">组件和道具</h1><p id="ce4d" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">Props用于将数据从一个组件传递到另一个组件。这对于框架来说是相当标准的，并且语法非常简单。</p><p id="0373" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了表示一个组件接受一个属性，export关键字被用于一个变量。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="31b8" class="mn lm in mj b gy mo mp l mq mr">&lt;script lang="ts"&gt;<br/>  export let stringProp: string<br/>&lt;/script&gt;</span></pre><p id="4368" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，要传递“stringProp”的值，只需在编写组件时使用导出变量的名称。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="be95" class="mn lm in mj b gy mo mp l mq mr">&lt;script lang="ts"&gt;<br/>  import NewComponent from './NewComponent.svelte'<br/>&lt;/script&gt;<br/><br/>&lt;NewComponent  stringProp="prop value"  /&gt;</span></pre><p id="7c73" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于我们的应用程序，让我们为每个建议创建一个组件。</p><p id="e1ac" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在src/</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="b497" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- Suggestion.svelte --&gt;<br/>&lt;script lang="ts"&gt;<br/>  export let suggestion: string<br/>&lt;/script&gt;<br/><br/>&lt;div class="suggestion"&gt;{suggestion}&lt;/div&gt;<br/><br/>&lt;style&gt;<br/>    .suggestion {<br/>        font-size: 1.25rem;<br/>    }<br/>&lt;/style&gt;</span></pre><p id="6e07" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们可以导入这个组件并在我们的#每个循环中使用它。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="1b19" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - top of script tag --&gt;<br/>&lt;script lang="ts"&gt;<br/>  import Suggestion from './Suggestion.svelte'<br/><br/>  // ...<br/>  // ...<br/>&lt;/script&gt;</span><span id="f4f1" class="mn lm in mj b gy ms mp l mq mr">&lt;!-- App.svelte - html --&gt;<br/>&lt;main&gt;<br/>  {#if pokemonData &amp;&amp; pokemonData.length &gt; 0}<br/>    &lt;span&gt;Search: &lt;/span&gt;<br/>    &lt;input type="text" bind:value="{pokemonName}" /&gt;<br/><br/>    {#each suggestions as suggestion}<br/>      &lt;Suggestion suggestion="{suggestion}"/&gt;<br/>    {/each}<br/>  {:else}<br/>    &lt;h2&gt;Loading...&lt;/h2&gt;<br/>  {/if}<br/>&lt;/main&gt;</span></pre><p id="a9e1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这在目前是毫无意义的，所以让我们以事件的形式为“建议”部分添加一些逻辑。</p><h1 id="b660" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">自定义事件</h1><p id="d935" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">自定义事件可以从一个组件分派到另一个组件。这使我们能够进行亲子沟通。</p><p id="d865" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于我们的应用，我们希望能够点击一个建议来选择我们的口袋妖怪。我们可以通过将一个自定义事件从“建议”组件发送到应用程序组件，然后设置一个变量的值来保存我们选择的口袋妖怪。</p><p id="fe11" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，创建新的“chosenPokemon”变量，并在App.svelte的屏幕上显示。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="8997" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - bottom of script tag --&gt;<br/>&lt;script lang="ts"&gt;<br/>  // ...<br/>  // ...<br/><br/>  let chosenPokemon: string = ''<br/>&lt;/script&gt;</span><span id="a7f1" class="mn lm in mj b gy ms mp l mq mr">&lt;!-- App.svelte - html --&gt;<br/>&lt;main&gt;<br/>  {#if pokemonData &amp;&amp; pokemonData.length &gt; 0}<br/>    &lt;h1&gt;Chose Your Pokemon&lt;/h1&gt;<br/>    &lt;h2&gt;Chosen Pokemon: {chosenPokemon}&lt;/h2&gt;<br/><br/>    &lt;div&gt;<br/>      &lt;span&gt;Search: &lt;/span&gt;<br/>      &lt;input type="text" bind:value="{pokemonName}" /&gt;<br/><br/>      {#each suggestions as suggestion}<br/>        &lt;Suggestion suggestion="{suggestion}"/&gt;<br/>      {/each}<br/>    &lt;/div&gt;<br/>  {:else}<br/>    &lt;h2&gt;Loading...&lt;/h2&gt;<br/>  {/if}<br/>&lt;/main&gt;</span></pre><p id="d99d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，在建议中，我们可以在点击建议时发送一个定制的“chosePokemon”事件。</p><p id="36d3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了创建一个自定义事件，我们需要从svelte导入“createEventDispatcher”。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="e076" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- Suggestion.svelte - script tag --&gt;<br/>&lt;script lang="ts"&gt;<br/>  import { createEventDispatcher } from 'svelte'<br/><br/>  export let suggestion: string<br/><br/>  // Function to dispatch a custom event.<br/>  const dispatch = createEventDispatcher()<br/>  const chosePokemon = (): void =&gt; {<br/>    dispatch('chosePokemon', {<br/>      pokemon: suggestion<br/>    })<br/>  }<br/>&lt;/script&gt;</span></pre><p id="6bc6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们现在有一个“chosePokemon”函数，它将一个自定义的“chosePokemon”事件分派给父组件。</p><p id="42bd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在点击建议时调用该函数，我们需要使用像这样的“点击”事件。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="732e" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- Suggestion.svelte - html --&gt;<br/>&lt;div class="suggestion" on:click="{chosePokemon}"&gt;<br/>  {suggestion}<br/>&lt;/div&gt;</span></pre><p id="02a9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">回到App.svelte文件，我们可以通过使用“on:(事件名称)”语法来处理这个自定义事件。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="bc4b" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - 'Suggestion' component in html --&gt;<br/>&lt;Suggestion<br/>  suggestion="{suggestion}"<br/>  on:chosePokemon="{(e) =&gt; {<br/>    chosenPokemon = e.detail.pokemon<br/>  }}"<br/>/&gt;</span></pre><p id="679d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">此处理程序将chosenPokemon变量的值设置为等于自定义事件中传递的Pokemon名称(位于“detail”属性中)。当我们点击一个建议时，那个口袋妖怪的名字就会显示出来。</p><p id="0968" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我已经通过这种方式设置了“chosenPokemon”变量来引入自定义事件，但是，还有一种更干净、更简单的方法:绑定转发。</p><h1 id="d13a" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">绑定转发</h1><p id="3d7f" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">我们看到了在创建输入字段时如何使用bind关键字来设置双向绑定，但是这个关键字也可以在我们的组件中使用。</p><p id="eb0c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在App.svelte中，我们可以用chosenPokemon道具上的bind关键字替换chosePokemon事件处理程序。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="3a02" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte - 'Suggestion' component in html --&gt;<br/>&lt;Suggestion suggestion="{suggestion}" bind:chosenPokemon /&gt;</span></pre><p id="18b7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在“建议”组件中，我们可以接受这个道具，使“点击”功能简单地设置这个“chosenPokemon”变量。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="fe5d" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- Suggestion.svelte --&gt;<br/>&lt;script lang="ts"&gt;<br/>  export let suggestion: string<br/>  export let chosenPokemon: string = ''<br/>&lt;/script&gt;<br/><br/>&lt;div <br/>  class="suggestion" <br/>  on:click="{() =&gt; chosenPokemon = suggestion}"<br/>&gt;<br/>  {suggestion}<br/>&lt;/div&gt;</span></pre><p id="1e18" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们现在使用一小部分代码就拥有了和以前一样的功能。</p><h1 id="7593" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">商店</h1><p id="9bbd" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">我想通过介绍商店来总结一下。</p><p id="d0c8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有了Svelte，我们不需要使用像Redux这样的外部库来拥有一个中央存储，它是与框架一起出现的。</p><p id="1478" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从根本上说，存储是一个具有subscribe方法的对象，该方法允许我们的Svelte组件被告知存储值的任何变化。Svelte定义了两种不同类型的存储，一种是可写存储，一种是可读存储。顾名思义，可写存储允许读取和写入，而可读存储只允许读取。</p><p id="6b9f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于我们的应用程序，我们将把“口袋妖怪数据”变量发送到商店。由于这个变量只是收集和存储口袋妖怪数据，我们将使用可读的存储。</p><p id="b599" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，我们需要src文件夹中的一个新文件(我将它命名为“stores.ts”)。<br/>我们可以从svelte导入可读存储函数，以及所需的类型。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="5899" class="mn lm in mj b gy mo mp l mq mr">// stores.ts<br/>import { readable, Readable, Subscriber } from 'svelte/store'</span></pre><p id="75f9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一个可读的函数，作为它的第一个参数，接受存储的初始值，作为它的第二个参数，一个“开始”函数。这个“start”函数在商店获得第一个订阅者时被调用，所以它是我们检索API数据的地方。</p><p id="32b6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">该函数接收一个“set”回调函数，该函数用于设置存储的值，并返回一个“stop”函数，该函数在最后一个订户取消订阅时被调用(在这里我们可以执行一些清理)。</p><p id="e7ce" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我们的商店中，我们可以简单地复制我们的' setPokemonData '函数的内容，但我们不是分配' PokemonData '的值，而是调用' set '函数。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="4d61" class="mn lm in mj b gy mo mp l mq mr">import { readable, Readable, Subscriber } from 'svelte/store'<br/><br/>const setPokemonData = <br/>  async (set: Subscriber&lt;string[]&gt;): Promise&lt;void&gt; =&gt; {<br/>    const rawPokemonData = await (<br/>      await fetch('https://pokeapi.co/api/v2/pokemon?limit=99')<br/>    ).json()<br/><br/>    set(<br/>      rawPokemonData.results.map(<br/>        (p: { name: string; url: string }) =&gt; p.name<br/>      )<br/>    )<br/>  }<br/><br/>// Export the new store 'pokemonData' variable.<br/>export const pokemonData: Readable&lt;string[]&gt; = <br/>  readable([], (set) =&gt; {<br/>    setPokemonData(set)<br/><br/>    return () =&gt; set([])<br/>  })</span></pre><p id="e377" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">就是这样。我们现在有一个中央商店，在“口袋妖怪数据”中保存我们的口袋妖怪名称。</p><p id="c5aa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要使用我们的商店，我们需要从我们的商店文件导入' pokemonData '变量。然后，我们可以使用特殊的细长“$”符号来引用商店的价值。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="cf41" class="mn lm in mj b gy mo mp l mq mr">&lt;!-- App.svelte --&gt;<br/>&lt;script lang="ts"&gt;<br/>  import { pokemonData } from './stores.js'<br/>  import Suggestion from './Suggestion.svelte'<br/><br/>  let pokemonName: string = ''<br/><br/>  let suggestions: string[]<br/>  // $pokemonData instead of pokemonData<br/>  $: suggestions =<br/>    pokemonName.length &gt; 0<br/>      ? $pokemonData.filter((name) =&gt; <br/>          name.includes(pokemonName)<br/>        )<br/>      : $pokemonData<br/><br/>  let chosenPokemon: string = ''<br/>&lt;/script&gt;<br/><br/>&lt;main&gt;<br/>  {#if $pokemonData &amp;&amp; $pokemonData.length &gt; 0}<br/>    &lt;h1&gt;Chose Your Pokemon&lt;/h1&gt;<br/>    &lt;h2&gt;Chosen Pokemon: {chosenPokemon}&lt;/h2&gt;<br/><br/>    &lt;div&gt;<br/>      &lt;span&gt;Search: &lt;/span&gt;<br/>      &lt;input type="text" bind:value="{pokemonName}" /&gt;<br/>      {#each suggestions as suggestion}<br/>        &lt;Suggestion <br/>          suggestion="{suggestion}" <br/>          bind:chosenPokemon <br/>        /&gt;<br/>      {/each}<br/>    &lt;/div&gt;<br/>  {:else}<br/>    &lt;h2&gt;Loading...&lt;/h2&gt;<br/>  {/if}<br/>&lt;/main&gt;</span></pre><p id="813c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们的应用程序工作原理相同，但是我们的API数据现在集中存储，可以在任何组件中使用。</p><p id="faa5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，虽然svelte有可写和可读的存储，但任何坚持svelte存储“契约”并实现subscribe方法的东西都是存储。这意味着商店非常灵活，可以根据您的需求量身定制。你甚至可以用另一种语言创建一个商店，比如Rust，如下图所示。</p><h1 id="7859" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">最终注释</h1><p id="d610" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">Svelte在混乱的JavaScript框架世界中脱颖而出，因为它没有为了开发者体验而牺牲用户体验，反之亦然。</p><p id="2b13" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Svelte提供了神奇的工具，使开发应用程序变得容易，而它的编译器为最终用户带来了一个微小的软件包，大大减少了下载时间。</p><p id="7650" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Svelte成为最受欢迎的框架已经有一段时间了，尽管它的使用越来越多，这是它将变得像Vue或React一样大的潜在迹象。这与最近对更高性能web的推动不谋而合，从提供给客户端的疯狂的大型JavaScript包转向服务器端或混合呈现。</p><p id="4a13" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Svelte团队现在正在开发SvelteKit，这是Svelte的Next.js版本，你可以在这里了解<a class="ae lk" href="https://kit.svelte.dev/" rel="noopener ugc nofollow" target="_blank"/>:</p><div class="mw mx gp gr my mz"><a href="https://kit.svelte.dev/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">苗条套装</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">SvelteKit是官方的Svelte应用程序框架</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">kit.svelte.dev</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn km mz"/></div></div></a></div><p id="bfa8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你喜欢这篇文章，请考虑分享它。</p><p id="df3c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看看我的<a class="ae lk" href="https://github.com/EB1811" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和其他<a class="ae lk" href="https://dev.to/emmanuilsb" rel="noopener ugc nofollow" target="_blank">文章</a>。</p></div><div class="ab cl no np hr nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ig ih ii ij ik"><p id="ea1b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nv">原载于2022年3月20日</em><a class="ae lk" href="https://dev.to/emmanuilsb/stop-overcomplicating-web-development-try-svelte-47ln" rel="noopener ugc nofollow" target="_blank"><em class="nv">https://dev . to</em></a><em class="nv">。</em></p><p id="baf9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nv">更多内容请看</em><a class="ae lk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nv">plain English . io</em></strong></a><em class="nv">。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nv">免费周报</em> </strong> </a> <em class="nv">。关注我们关于</em><a class="ae lk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nv">Twitter</em></strong></a><em class="nv">和</em><a class="ae lk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nv">LinkedIn</em></strong></a><em class="nv">。加入我们的</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nv">社区不和谐</em> </strong> </a> <em class="nv">。</em></p></div></div>    
</body>
</html>