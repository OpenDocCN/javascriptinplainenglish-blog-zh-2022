<html>
<head>
<title>Content Projection in Angular with Ng-Content</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">含Ng内容的角度内容投影</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/content-projection-in-angular-with-ng-content-b8119f3f7360?source=collection_archive---------6-----------------------#2022-07-25">https://javascript.plainenglish.io/content-projection-in-angular-with-ng-content-b8119f3f7360?source=collection_archive---------6-----------------------#2022-07-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/77da9f9790ff539807465333bb4f451a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XOJOBvobsdtbX1vc"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@pimchu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pim Chu</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9e7b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在将动态内容从父节点传递到子节点时，您是否经常不得不使用不必要的输入属性，然后在属性绑定中发送一个字符串来完成需求？很艰难，对吧？这种解决方案非常简单，但它不是最佳实践，而且也有一些缺点。</p><p id="a36f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">今天，我们将看到如何以更好的方式实现同样的要求。</p><p id="1afd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，如果你还没有理解上述内容，我们来看看问题陈述。</p><p id="d91e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">看看下面的例子:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="26d0" class="lh li in ld b gy lj lk l ll lm">export class AppComponent {</span><span id="393e" class="lh li in ld b gy ln lk l ll lm">passToChildren: string = 'This is using Input Decorator';</span><span id="8ea7" class="lh li in ld b gy ln lk l ll lm">}</span></pre><p id="86b7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，在我们的<strong class="kc io"> app.component </strong>中，我们声明了一个字符串，然后利用它将值传递给子组件，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3da8" class="lh li in ld b gy lj lk l ll lm">&lt;app-comp-a [dynamicContent]="passToChildren"&gt;&lt;/app-comp-a&gt;</span></pre><p id="213d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，<code class="fe lo lp lq ld b">dynamicContent</code>是一个输入装饰器，然后在子组件中声明为:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="0f1e" class="lh li in ld b gy lj lk l ll lm">export class CompAComponent implements OnInit {</span><span id="3bf6" class="lh li in ld b gy ln lk l ll lm">@Input() dynamicContent: string;</span><span id="f3e9" class="lh li in ld b gy ln lk l ll lm">constructor() {}</span><span id="25cf" class="lh li in ld b gy ln lk l ll lm">ngOnInit(): void {}</span><span id="0470" class="lh li in ld b gy ln lk l ll lm">}</span></pre><p id="8492" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在HTML中也是如此:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="ef25" class="lh li in ld b gy lj lk l ll lm">&lt;p&gt;comp-a works!&lt;/p&gt;</span><span id="ace7" class="lh li in ld b gy ln lk l ll lm">&lt;p&gt;{{dynamicContent}}&lt;/p&gt;</span></pre><p id="b60d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们得到的预期输出是:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/81b4a78ffd79ca8f54276763776c22b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjgfUNf9ZfZChIWdUq_Fpw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Without Content Projection</figcaption></figure><p id="189f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">很简单，对吧？</p><p id="060c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是这种方法有一些限制:</p><p id="0b9b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">1.从子组件的模板(HTML)中可以明显看出，我们必须在那里使用<code class="fe lo lp lq ld b">&lt;p&gt;</code>标签。让我们假设一些其他组件使用相同的子组件，并且需要在span中显示不同的内容——那么这就变成了一种开销。</p><p id="3149" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ls">这里有一点需要注意，如果你想通过输入装饰器传递完整的HTML，那么很不幸，输入装饰器不支持它。</em> </strong></p><p id="6c23" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.如果我们必须传入多个字符串值，这些值需要在HTML上显示，那么输入属性的数量将不断增加。</p><p id="6343" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上述问题的解决方案是<strong class="kc io"> <em class="ls">内容投射</em> </strong> <em class="ls">，</em>也就是说，我们将投射或发送来自父节点的完整内容，同样可以使用<strong class="kc io"> <em class="ls"> ng-content </em> </strong>指令在子节点中显示。</p><p id="7917" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看一个例子。</p><p id="a441" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将把我们的<strong class="kc io">app.component.html</strong>改为:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="c795" class="lh li in ld b gy lj lk l ll lm">&lt;app-comp-a&gt;</span><span id="f332" class="lh li in ld b gy ln lk l ll lm">&lt;p&gt;This is using Content Projection&lt;/p&gt;</span><span id="777a" class="lh li in ld b gy ln lk l ll lm">&lt;/app-comp-a&gt;</span></pre><p id="838c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们没有发送输入属性，而是发送了一个完整的HTML标记，我们需要将它显示在子组件中。</p><p id="13de" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了在子组件中显示相同的内容，我们将使用如下所示的<ng-content>指令:</ng-content></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="41ef" class="lh li in ld b gy lj lk l ll lm">&lt;p&gt;comp-a works!&lt;/p&gt;</span><span id="d1a2" class="lh li in ld b gy ln lk l ll lm">&lt;ng-content&gt;&lt;/ng-content&gt;</span><span id="85c0" class="lh li in ld b gy ln lk l ll lm">&lt;p&gt;After Ng Content&lt;/p&gt;</span></pre><p id="3280" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ng-内容将充当占位符，其中投影内容将显示为:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/793350fb17edbd7cd7f63e71bffde6df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7vMkXKo83qTcUAFqNbnsZA.png"/></div></div></figure><p id="729e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面是一个<strong class="kc io">单槽内容投影</strong>的例子，其中我们发送了一个标签。</p><p id="11e9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，多个HTML标签可以从父节点发送到子节点，并且可以被呈现。</p><p id="8237" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看如何实现同样的目标。</p><p id="5a0f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们已将<strong class="kc io">app.component.html</strong>改为:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="cebc" class="lh li in ld b gy lj lk l ll lm">&lt;app-comp-a&gt;</span><span id="2356" class="lh li in ld b gy ln lk l ll lm">&lt;span id="multiSlotId"&gt;</span><span id="4563" class="lh li in ld b gy ln lk l ll lm">This is the new content to be projected based on id.</span><span id="17ef" class="lh li in ld b gy ln lk l ll lm">&lt;/span&gt;</span><span id="eabc" class="lh li in ld b gy ln lk l ll lm">&lt;p&gt;This is using Content Projection&lt;/p&gt;</span><span id="f56c" class="lh li in ld b gy ln lk l ll lm">&lt;span class="multiSlotClass"&gt;</span><span id="3bde" class="lh li in ld b gy ln lk l ll lm">This is the new content to be projected based on class.</span><span id="a671" class="lh li in ld b gy ln lk l ll lm">&lt;/span&gt;</span><span id="9e4e" class="lh li in ld b gy ln lk l ll lm">&lt;/app-comp-a&gt;</span></pre><p id="b801" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们添加了一个带有id属性的span和另一个带有class属性的span。基本上，这些有助于确定它们需要在子组件中呈现的位置。</p><p id="86b0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">子组件将类似于:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b30a" class="lh li in ld b gy lj lk l ll lm">&lt;ng-content select="#multiSlotId"&gt;&lt;/ng-content&gt;</span><span id="b61f" class="lh li in ld b gy ln lk l ll lm">&lt;p&gt;comp-a works!&lt;/p&gt;</span><span id="8ebe" class="lh li in ld b gy ln lk l ll lm">&lt;ng-content&gt;&lt;/ng-content&gt;</span><span id="b905" class="lh li in ld b gy ln lk l ll lm">&lt;p&gt;After Ng Content&lt;/p&gt;</span><span id="2bd3" class="lh li in ld b gy ln lk l ll lm">&lt;ng-content select=".multiSlotClass"&gt;&lt;/ng-content&gt;</span></pre><p id="e842" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ng-content与select属性一起使用，并将使用CSS选择器中使用的name来设置带有相关标识符的占位符。</p><p id="c29b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简而言之，这就是如何在Angular中使用内容投影。</p><p id="2cbe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我知道在回应，如果你有任何疑问或关注，或希望我在一些其他主题的权利。</p></div><div class="ab cl lt lu hr lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ig ih ii ij ik"><p id="d520" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">关于我——我是一个编程爱好者，喜欢阅读和写作前端设计、JavaScript和UI/UX相关的东西。点击<a class="ae jz" href="https://medium.com/@avinash.dev21987" rel="noopener">这里</a>阅读我所有的文章，并让我知道你的反馈。</p></div><div class="ab cl lt lu hr lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ig ih ii ij ik"><p id="5f3a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ls">更多内容看</em> <a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ls">说白了。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ls">Twitter</em></strong></a><em class="ls">和</em><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ls">LinkedIn</em></strong></a><em class="ls">。查看我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ls">社区不和谐</em> </strong> </a> <em class="ls">，加入我们的</em> <a class="ae jz" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ls">人才集体</em> </strong> </a> <em class="ls">。</em></strong></a></p></div></div>    
</body>
</html>