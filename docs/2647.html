<html>
<head>
<title>Comparing 3 React Accordion Libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比较3个React Accordion库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/comparing-3-react-accordion-libraries-1187bc644f2d?source=collection_archive---------22-----------------------#2022-06-22">https://javascript.plainenglish.io/comparing-3-react-accordion-libraries-1187bc644f2d?source=collection_archive---------22-----------------------#2022-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="23b0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">3个React手风琴库的比较研究。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/845a3e359d30a9a1e5c02a713f178dbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rBtrA-Canh3hjo85BqmITQ.png"/></div></div></figure><p id="3f42" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最近，为了我的工作，我必须创建一组React组件来实现我们项目的accordion。其中一个选择是从头开始实现一切，另一个选择是研究现有的组件库并加以利用。</p><p id="fd07" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">起初，我觉得没有必要让第三方库参与这项任务。自己拉手风琴会有多难？它只需要一个可点击的标题，可以使用标题切换的内容，它应该可以有多个组。然而，为了确保万无一失，我潜入了几个图书馆，看看他们在做什么。</p><p id="9696" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们选择使用其中的一个库。然而，导致这一决定的途径非常有趣。特别是，看到这些第三方库之间的相似之处和不同之处是非常有趣的。我翻遍了多个库，做了一个彻底的对比，并向团队提出。</p><p id="42aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然结果不一定有趣，但我认为这种比较本身对某些React开发人员来说是有用的，有教育意义的。因此，我们将研究这种比较，我必须满足的要求，以及与这种比较相关的所有不同因素。</p><h1 id="c7d4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">要求</h1><p id="910d" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">显然，对于手风琴，我必须实现几个要求。</p><ul class=""><li id="c116" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">因为我要使用一个库，所以我必须小心它的包的大小。虽然没有具体的大小限制，但将它保持在一个合理的数量仍然是有意义的。没有理由仅仅为了一个手风琴而包含一个极其臃肿的库，但是使用一个极其小的库也是适得其反的，因为它缺少想要的特性，因此需要我们自己来实现。</li><li id="9dfd" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">由于我们代码库的可组合性，我们需要一个库来实现这种风格的手风琴。我们想要一组可组合的React组件，而不是一个可以配置一切的大组件。这将允许最高的灵活性和长期可调性。</li><li id="e5e5" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">虽然我们不打算在手风琴上添加非常花哨的动画，但一些简单的手风琴组的关闭和打开动画是设计所需要的。</li><li id="341f" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">虽然可访问性功能肯定很重要，但在这个故事中，它们的优先级并不高。将来能够简单地实现它们是很好的，但是现在唯一与可访问性相关的需求是它应该是键盘用户可以控制的。</li></ul><h1 id="69eb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">图书馆</h1><p id="9f51" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">最终，最有希望的库归结为以下3个，<a class="ae my" href="https://github.com/react-component/collapse" rel="noopener ugc nofollow" target="_blank"> rc-collapse </a>、<a class="ae my" href="https://github.com/glennflanagan/react-collapsible" rel="noopener ugc nofollow" target="_blank">react-collapse</a>和<a class="ae my" href="https://github.com/springload/react-accessible-accordion" rel="noopener ugc nofollow" target="_blank">react-accessible-accordion</a>。这些是在NPM注册中心发现的，是根据它们的活动、受欢迎程度、与React和TypeScript的集成程度以及文档选择的。在这一节中，我们将深入探讨所有这些问题。</p><h1 id="e789" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">RC-崩溃</h1><p id="45a5" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">到目前为止，这三个库中最受欢迎的是<code class="fe mz na nb nc b">rc-collapse</code>。在NPM的注册表上，该图书馆记录了惊人的每周下载量，超过84万次。根据NPM，库的大小为46.4kB，根据Bundlephobia，库的大小为21kB，库的大小为7.2kB。</p><p id="6ba4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，该库的组件并没有针对可组合结构进行优化。虽然容器和组都有组件，它们接受组件作为它们的子组件，但是配置头部必须通过这些组组件来完成。</p><p id="fb6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用这个库实现动画非常简单。在幕后，accordion组组件利用了<code class="fe mz na nb nc b">rc-motion</code>库。这为配置动画提供了许多选项，并为开发人员抽象了许多手动CSS工作。</p><p id="9459" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个库最大的缺点是可访问特性的数量有限。根据W3C标准<a class="ae my" href="https://www.w3.org/WAI/ARIA/apg/patterns/accordion/" rel="noopener ugc nofollow" target="_blank">和</a>，一个完全无障碍的手风琴有很多方面。在这些库中，<code class="fe mz na nb nc b">rc-collapse</code>实现的最少。基本上，他们实现的唯一一个是用于手风琴组的<code class="fe mz na nb nc b">aria-expanded</code>，它与屏幕阅读器相关。</p><h1 id="1161" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">可折叠的</h1><p id="3dcf" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们在这里考虑的三个库中最不受欢迎和更新的是<code class="fe mz na nb nc b">react-collapsible</code>。它的每周下载量最少，略低于100k，并且8个月没有收到任何更新。就大小而言，NPM报告的大小与之前的43kB图书馆相似，而Bundlephobia说它的大小更小，即10.3kB minified和3.3kB gzipped。</p><p id="0e7a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">和<code class="fe mz na nb nc b">rc-collapse</code>类似，这个库的可组合性是有限的。accordion组内容是通过组件的子组件指定的，但是标题也是通过prop指定的。这使得它在可组合性方面遇到了同样的问题。</p><p id="2ba9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于动画，有一些选项可用于配置。虽然这些都不是极其精细的，但是高度动画似乎有一个内置的选项。由于这是我们在这方面的主要要求，因此可以忽略这些限制。</p><p id="48e9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个库实现了相当多的可访问性特性。它不仅有<code class="fe mz na nb nc b">aria-expanded</code>，而且还有以<code class="fe mz na nb nc b">aria-disabled</code>、<code class="fe mz na nb nc b">aria-controls</code>和<code class="fe mz na nb nc b">aria-labelledby</code>形式实现的更大的<code class="fe mz na nb nc b">aria</code>属性家族。除此之外，它还实现了与屏幕阅读器和键盘控制相关的<code class="fe mz na nb nc b">tabIndex</code>和<code class="fe mz na nb nc b">role</code>属性。</p><p id="4258" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这个库，我遇到了两个缺点。首先，我无法运行他们的示例项目。这是一个很小的缺点，但它让我更难理解它们的组件看起来、感觉起来和工作起来是怎样的。</p><p id="4100" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一个更重要的缺点是，该库的组件只负责呈现一个组。由于整个事情没有封装组件，这使得实现accordion有点不方便。特别是，由于其分离性，在不同的组之间获得可访问性特性和适当的键盘控制将需要相当多的手工工作。</p><h1 id="1ced" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">react-可访问-手风琴</h1><p id="fbeb" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">到目前为止，这个比较中最大的库是<code class="fe mz na nb nc b">react-accessible-accordion</code>。根据NPM的说法，它配有100kB的资产，而根据Bundlephobia的说法，minified和gzipped分别配有13.6kB和4.1kB的资产。如果后两个不适用于你，那么你必须满足于两倍于其他库的大小。这可能是一个相当大的障碍，即使它只有大约50kB。</p><p id="2f7d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">主要优势之一是库组件的可组合性。基本上，这个库已经提供了一组现成的可组合组件来构建一个accordion。这完全符合我们的需求，因为它允许我一对一地重用它们。我需要实现的唯一一件事是基于我们想要在代码库中公开的API包装那些组件。</p><p id="5f5f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个库的另一个好处是提供了大量现成的可访问性特性。与其他库相比，<code class="fe mz na nb nc b">react-accessible-accordion</code>已经最精心和勤奋地实现了它们。它包含适当的角色、标签、<code class="fe mz na nb nc b">aria</code>属性族、键盘可控性和<code class="fe mz na nb nc b">aria-level</code>属性。</p><p id="de31" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个库的主要缺点是缺乏动画支持。虽然其他库允许您配置切换折叠项的动画，但这个库不提供任何类似的功能。他们提供的动画的唯一例子与不透明度有关，这与我们无关。因此，切换可见性和高度的动画必须由我们自己实现，这并不总是微不足道的。</p><h1 id="3e14" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">最后的想法</h1><p id="110c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在JavaScript开发领域，求助于第三方库并不罕见。然而，它们数量巨大，而且质量和功能各不相同。因此，在决定使用哪个库时很容易迷失。</p><p id="48da" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，本文讨论了这样一个场景，在3个不同的库之间决定实现一个accordion。虽然结果不是最重要的部分，但比较本身更有趣，更有教育意义。它深入到需求、库需要考虑的不同方面，以及如何将它们结合在一起。</p><p id="6f89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然结果不一定有趣，但我认为这种比较本身对某些React开发人员来说是有用的，有教育意义的。因此，我们将研究这种比较，我必须满足的要求，以及与这种比较相关的所有不同因素。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><pre class="kg kh ki kj gt nk nc nl nm aw nn bi"><span id="0286" class="no lo iq nc b gy np nq l nr ns"><strong class="nc ir">Want to Connect?</strong></span><span id="5638" class="no lo iq nc b gy nt nq l nr ns">If you liked this article, consider checking out the other entries in the <a class="ae my" href="https://www.getrevue.co/profile/chakshunyu" rel="noopener ugc nofollow" target="_blank">Uncommon React</a> newsletter and my <a class="ae my" href="https://twitter.com/keraito" rel="noopener ugc nofollow" target="_blank">Twitter</a> for future updates.</span></pre><p id="1f09" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nu">更多内容请看</em><a class="ae my" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">plain English . io</em></strong></a><em class="nu">。报名参加我们的</em> <a class="ae my" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nu">免费周报</em> </strong> </a> <em class="nu">。关注我们关于</em><a class="ae my" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">Twitter</em></strong></a><em class="nu">和</em><a class="ae my" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nu">LinkedIn</em></strong></a><em class="nu">。查看我们的</em> <a class="ae my" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nu">社区不和谐</em> </strong> </a> <em class="nu">加入我们的</em> <a class="ae my" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nu">人才集体</em> </strong> </a> <em class="nu">。</em></p></div></div>    
</body>
</html>