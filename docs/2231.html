<html>
<head>
<title>Be Aware Of Your GitHub Actions Workflow With Slack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">注意你的GitHub动作工作流程和Slack</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/be-aware-of-your-github-actions-workflow-with-slack-35d1f46821cf?source=collection_archive---------2-----------------------#2022-05-24">https://javascript.plainenglish.io/be-aware-of-your-github-actions-workflow-with-slack-35d1f46821cf?source=collection_archive---------2-----------------------#2022-05-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d275b8012d3fbbd839d1ddd30c2f4dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YAwBJvuMJt1K8Faq.png"/></div></div></figure><p id="76b6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">几个月前，在享受和平与宁静的时候，我们从支持部门得到一个消息，我们的一个部署突然失败了。当一个人过了一段时间才知道失败的时候，这真的不合适。当然，我们收到了一封电子邮件，但究竟谁会看呢？显然，当出现问题时，我们希望立即知道，因为这可能会对我们的最终用户产生巨大影响。</p><p id="aff0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于我们的项目和团队使用<strong class="jx io"> Slack </strong>作为主要的通知和消息应用程序，使用<strong class="jx io"> GitHub Actions </strong>作为CI工具，我们想到了将Slack通知集成到CI工作流中的想法。</p><h1 id="42c6" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">先决条件:</h1><ul class=""><li id="afdd" class="lr ls in jx b jy lt kc lu kg lv kk lw ko lx ks ly lz ma mb bi translated">我们的应用程序是多区域的，每个区域都有单独的部署工作流；</li><li id="9289" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks ly lz ma mb bi translated"><strong class="jx io"> GitHub Actions </strong>作为CI/CD工具应用；</li><li id="a188" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks ly lz ma mb bi translated">一个团队使用<strong class="jx io"> Slack </strong>作为信使。</li></ul><p id="2b5c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，让我们来看看Slack和GitHub可以为我们提供的选项，并看看如何在基本场景中使用它们。</p><h1 id="10d5" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">1.与Slack的集成。</h1><p id="76bb" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">最简单的方法是使用<a class="ae mk" href="https://github.com/integrations/slack" rel="noopener ugc nofollow" target="_blank">松弛集成</a>。只需打开<a class="ae mk" href="https://slack.com/apps/A01BP7R4KNY-github" rel="noopener ugc nofollow" target="_blank">链接</a>，给予应用程序权限并使用<strong class="jx io"> /invite </strong>命令将GitHub集成添加到您需要的频道。之后，您应该使用<a class="ae mk" href="https://github.com/integrations/slack#getting-started" rel="noopener ugc nofollow" target="_blank">登录、订阅、取消订阅</a>等命令将您的帐户/组织与其关联。</p><p id="77b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果只是需要获得关于标准流程的通知，比如拉请求、提交、分支、问题、发布等等，那么在5分钟内实现这种集成会更好、更简单。</p><p id="9d6c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我看来，任何项目都应该默认启用集成。同时，它不应该包括你GitHub帐户中的每个喷嚏，而被你的队友忽略(商定规则，每天在特定时间检查1-2次)。</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/55bfdc92a164a15ab7b9795c64a7db12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sxnpSzLWVFQrPhlY"/></div></div></figure><p id="5c58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">GitHub和Slack集成</p><p id="dfff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">来看看:</strong><a class="ae mk" href="https://github.com/integrations/slack" rel="noopener ugc nofollow" target="_blank">https://github.com/integrations/slack</a></p><p id="d85c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mq">注意:接下来的选项是集成无法覆盖的自定义通知。</em></p><h1 id="19c3" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">2.来自市场的GitHub行动。</h1><p id="7518" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">首先，在GitHub Actions Marketplace找到一些东西。人们经常在那里分享定制开发的动作，你可以检查并尝试一个。但是我更喜欢使用由可信的供应商首先提供的官方的东西，而不是尝试外来的、可能不稳定的东西。</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/03bcdb5e60b1f045e5c6cedc2768126f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5JflZU9OllkWGpL3.png"/></div></div></figure><p id="1925" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们来看看slack自己开发的<strong class="jx io"> slack-send </strong> <strong class="jx io"> action </strong>的使用例子。使用此操作发送通知有几个选项:Slack workflow、Slack app和incoming webhook。最后两个是将原始有效载荷作为消息发送，所以你可以通过<a class="ae mk" href="https://api.slack.com/block-kit" rel="noopener ugc nofollow" target="_blank">模块套件</a>给消息添加一些交互性和表现力，或者只是发送几行纯文本。</p><p id="5a90" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面的示例演示了作业成功时发送的通知(请参见“if”语句)，以及其状态和特定运行的链接，以了解更多详细信息。</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/ed316bd7c49e0d4bb9cea82b6ff0d00b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VmHCg1SKLxW3Mt1n.png"/></div></div></figure><p id="fb13" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过Slack API GitHub操作的Slack通知示例</p><p id="40c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">市场上有许多现成的动作，它们具有一组特定的属性和清晰的文档。试试它们，找到完美的搭配。</p><p id="a827" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">有用链接:</strong></p><ul class=""><li id="3499" class="lr ls in jx b jy jz kc kd kg ms kk mt ko mu ks ly lz ma mb bi translated"><a class="ae mk" href="https://github.com/slackapi/slack-github-action" rel="noopener ugc nofollow" target="_blank">https://github.com/slackapi/slack-github-action</a></li><li id="d0ff" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks ly lz ma mb bi translated"><a class="ae mk" href="https://api.slack.com/block-kit" rel="noopener ugc nofollow" target="_blank">https://api.slack.com/block-kit</a></li><li id="d878" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks ly lz ma mb bi translated"><a class="ae mk" href="https://docs.github.com/en/actions/learn-github-actions/contexts" rel="noopener ugc nofollow" target="_blank">https://docs . github . com/en/actions/learn-github-actions/contexts</a></li></ul><h1 id="be6c" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">3.自定义GitHub操作。</h1><p id="88fa" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">如果上述选项都不适合您的具体情况，那么您别无选择，只能编写自己的操作。甚至可能有一个bash脚本通过curl向webhook发送消息。</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/1ed31160e5f16f690963a25ce59bd2f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6GaSxi77nHQgvDLL.png"/></div></div></figure><p id="e50d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过curl的松弛通知</p><p id="bfac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">自定义操作的创建超出了本文的范围，但是我将在下面留下一个文档的链接。这种选择既简单又复杂，所以在重新发明轮子之前，尝试找到一个盒子解决方案。</p><p id="162b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">有用阅读:</strong></p><ul class=""><li id="bb0b" class="lr ls in jx b jy jz kc kd kg ms kk mt ko mu ks ly lz ma mb bi translated"><a class="ae mk" href="https://api.slack.com/tutorials/tracks/posting-messages-with-curl" rel="noopener ugc nofollow" target="_blank">https://API . slack . com/tutorials/tracks/posting-messages-with-curl</a></li><li id="5026" class="lr ls in jx b jy mc kc md kg me kk mf ko mg ks ly lz ma mb bi translated"><a class="ae mk" href="https://docs.github.com/en/actions/creating-actions" rel="noopener ugc nofollow" target="_blank">https://docs.github.com/en/actions/creating-actions</a></li></ul><h1 id="6f89" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结论。</h1><p id="14f2" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">时差通知可以通知您和其他相关方有关项目活动的信息。它可以是部署、发布、拉取请求或其他什么，当然，可能会很烦人。然而，它的真正好处是立即得到通知，而不是过一会儿才意识到事情发生了。</p><p id="d49d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读！</p><p id="40c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mq">更多内容请看</em><a class="ae mk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mq">plain English . io</em></strong></a><em class="mq">。报名参加我们的</em> <a class="ae mk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mq">免费周报</em> </strong> </a> <em class="mq">。关注我们关于</em><a class="ae mk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mq">Twitter</em></strong></a><em class="mq">和</em><a class="ae mk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mq">LinkedIn</em></strong></a><em class="mq">。查看我们的</em> <a class="ae mk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mq">社区不和谐</em> </strong> </a> <em class="mq">加入我们的</em> <a class="ae mk" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mq">人才集体</em> </strong> </a> <em class="mq">。</em></p></div></div>    
</body>
</html>