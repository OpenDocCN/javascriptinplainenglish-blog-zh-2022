<html>
<head>
<title>Create and Generate UUIDs with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript创建和生成UUIDs</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-and-generate-uuids-with-javascript-dbd7494c81ed?source=collection_archive---------7-----------------------#2022-11-16">https://javascript.plainenglish.io/create-and-generate-uuids-with-javascript-dbd7494c81ed?source=collection_archive---------7-----------------------#2022-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a316" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通用唯一标识符是引用JavaScript中各种对象和元素的一种简单方法。让我们看看如何制作它们。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b322b0a900cf616218cd5e412d7efb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kg6Llp4QlWdpqQM3587RTg.png"/></div></div></figure><p id="153f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通用唯一标识符(UUIDs)在软件开发中无处不在，从识别对象元素到网页上的DOM元素。它们是唯一的128位标识符，由36个字符组成，格式为<code class="fe ln lo lp lq b">8-4-4-4-12</code>——例如<code class="fe ln lo lp lq b">f81e7af3-fcf4-4cdd-b3a3-14a8087aa191</code>。UUIDs通常不依赖于注册表或数据库来确保唯一性。UUID是复制品的可能性不是零，但这种可能性如此之小，以至于大多数人都忽略了这种风险。</p><p id="aa23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Javascript中，有许多方法可以创建UUIDs。记住这一点，让我们看看如何用Javascript 创建UUIDs。</p><h1 id="d347" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">选项1:使用crypto.randomUUID()方法</h1><p id="bc67" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated"><code class="fe ln lo lp lq b">crypto.randomUUID</code>是一种用原生Javascript制作UUIDs的相对较新且可靠的方法。所有现代的常青树浏览器都支持它，它可以用一行代码生成一个UUID。浏览器上的全局<code class="fe ln lo lp lq b">this</code>对象提供了<code class="fe ln lo lp lq b">crypto</code>方法——也称为<code class="fe ln lo lp lq b">window</code>。它也可以在节点上使用。射流研究…</p><p id="4370" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，您现在可以在浏览器中生成UUIDs，如下所示:</p><pre class="kg kh ki kj gt mo lq mp bn mq mr bi"><span id="7cd3" class="ms ls iq lq b be mt mu l mv mw">console.log(this.crypto.randomUUID()); // f81e7af3-fcf4-4cdd-b3a3-14a8087aa191</span></pre><p id="bf01" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者，在节点中。来自版本<code class="fe ln lo lp lq b">19.0</code>的JS是这样的:</p><pre class="kg kh ki kj gt mo lq mp bn mq mr bi"><span id="b3fc" class="ms ls iq lq b be mt mu l mv mw">import crypto from 'crypto'<br/>console.log(crypto.randomUUID()); // f81e7af3-fcf4-4cdd-b3a3-14a8087aa191</span></pre><h1 id="24b3" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">选项2:使用UUID软件包</h1><p id="a928" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">NPM上有一个非常流行的包叫做<code class="fe ln lo lp lq b">uuid</code>，它为你做了所有繁重的工作并生成了可靠的UUIDs。它可以在节点中使用。首先安装JS项目，然后在您的代码中运行它。</p><p id="1b4d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，使用<code class="fe ln lo lp lq b">npm</code>安装:</p><pre class="kg kh ki kj gt mo lq mp bn mq mr bi"><span id="7743" class="ms ls iq lq b be mt mu l mv mw">npm i uuid</span></pre><p id="9648" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后你只需要像这样导入并在你的代码中使用它:</p><pre class="kg kh ki kj gt mo lq mp bn mq mr bi"><span id="b76b" class="ms ls iq lq b be mt mu l mv mw">import { v4 as uuid } from 'uuid';<br/>let myUUID = uuid(); // Returns a random UUID xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</span></pre><p id="c935" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">uuid</code>包是在Node.JS中创建UUIDs的可靠方法。</p><h1 id="32be" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">选项3:使用crypto.getRandomValues()方法</h1><p id="4af8" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">使用<code class="fe ln lo lp lq b">crypto.getRandomValues()</code>可以生成您自己的<code class="fe ln lo lp lq b">uuid</code>函数。这在处理Node的情况下很有用。<code class="fe ln lo lp lq b">19.0</code>之前的JS版本，还是得支持老浏览器。<code class="fe ln lo lp lq b">crypto.getRandomValues()</code>早在Chrome 11就支持了。</p><pre class="kg kh ki kj gt mo lq mp bn mq mr bi"><span id="ccff" class="ms ls iq lq b be mt mu l mv mw">function uuid() {<br/>    return ('10000000-1000-4000-8000-100000000000').replace(/[018]/g, c =&gt; (<br/>        c ^ (crypto.getRandomValues(new Uint8Array(1))[0] &amp; (15 &gt;&gt; (c / 4)))).toString(16)<br/>    );<br/>}</span></pre><p id="5a54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个函数基于<a class="ae mx" href="https://gist.github.com/jed/982883" rel="noopener ugc nofollow" target="_blank">这里的工作</a>——如果你需要自己的函数来生成可靠的UUIDs，它会生成可靠的UUIDs。</p><h1 id="7932" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">选项4: Math.random()(不推荐)</h1><p id="b51d" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">最后一招，也是最糟糕的解决方案是使用<code class="fe ln lo lp lq b">Math.random()</code>，然而这通常不是一个好主意，因为<code class="fe ln lo lp lq b">Math.random()</code>在生成UUIDs以确保唯一性方面做得不够好。你应该也不需要这个，因为我们现在已经有了广泛可用的<code class="fe ln lo lp lq b">crypto.randomUUID()</code>方法。</p><p id="4880" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您想要一个真正的UUID，最好避免这种解决方案，但是它可以为您需要一个UUID fast进行测试的项目提供一个快速解决方案。当您没有<code class="fe ln lo lp lq b">randomUUID()</code>支持或<code class="fe ln lo lp lq b">uuid</code>软件包可用时，这可以作为一种备用方案:</p><pre class="kg kh ki kj gt mo lq mp bn mq mr bi"><span id="b704" class="ms ls iq lq b be mt mu l mv mw">function uuid() {<br/>  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {<br/>    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);<br/>    return v.toString(16);<br/>  });<br/>}</span></pre><h1 id="6d5c" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">结论</h1><p id="591d" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">这大概涵盖了用JavaScript制作UUIDs的所有不同方法。希望你喜欢这个指南— <a class="ae mx" href="https://fjolt.com/category/javascript" rel="noopener ugc nofollow" target="_blank">点击这里</a>查看更多关于JavaScript的内容。</p><p id="ff29" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="my">更多内容看</em> <a class="ae mx" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">说白了。报名参加我们的</em> <a class="ae mx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">免费周报</em> </strong> </a> <em class="my">。关注我们关于</em> <a class="ae mx" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">推特</em> </strong> </a>，<a class="ae mx" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">LinkedIn</em></strong></a><em class="my">，</em><a class="ae mx" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">YouTube</em></strong></a><em class="my">，</em> <a class="ae mx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">不和</em> </strong> </a> <em class="my">。对增长黑客感兴趣？检查</em> <a class="ae mx" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">电路</em> </strong> </a> <em class="my">。</em></strong></a></p></div></div>    
</body>
</html>