# æ ‡è®°çš„æ¨¡æ¿æ–‡å­—â€”â€”åƒæ ·å¼åŒ–ç»„ä»¶è¿™æ ·çš„å·¥å…·æ˜¯å¦‚ä½•å·¥ä½œçš„

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/tagged-template-literals-how-tools-like-styled-components-work-81b26647e5ab?source=collection_archive---------4----------------------->

ä½ æœ‰æ²¡æœ‰æƒ³è¿‡åƒ `*styled*` *è¿™æ ·çš„è¯­æ³•ç³–æ˜¯å¦‚ä½•ç¥å¥‡åœ°å·¥ä½œçš„ï¼Ÿè®©æˆ‘ä»¬ä½¿ç”¨ Javascript ä¸­çš„æ ‡è®°æ¨¡æ¿å­—ç¬¦ä¸²é‡æ–°åˆ›å»ºè¿™ä¸ªåŠŸèƒ½ã€‚*

![](img/81306def0c3b7dad56993b4a03309854.png)

Styled Components and other libraries made template tags quite popular.

å¦‚æœä½ ä½¿ç”¨äº†åƒ[æ ·å¼ç»„ä»¶](https://styled-components.com/)æˆ–è€… [graphql](https://graphql.org/) è¿™æ ·çš„å·¥å…·ï¼Œä½ å¾ˆå¯èƒ½ä¼šé‡åˆ°å¸¦æ ‡ç­¾çš„æ¨¡æ¿æ–‡å­—ã€‚ES6 å¼•å…¥çš„æ–° Javascript ç‰¹æ€§ã€‚

åœ¨æ ·å¼åŒ–ç»„ä»¶ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å…è®¸æ‚¨åƒè¿™æ ·ç¥å¥‡åœ°åˆ›å»ºç»„ä»¶:

```
const Title = styled.h1`
  font-size: ${props => props.theme.sizes.lg};
  text-align: center;
  color: palevioletred;
`;
```

æœ¬ä¾‹ä¸­ï¼Œ`styled.h1`æ˜¯*æ¨¡æ¿å‡½æ•°*æˆ–*æ ‡ç­¾*ã€‚åé¢çš„å­—ç¬¦ä¸²è¡¨ç¤ºå®é™…çš„æ¨¡æ¿ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º*æ¨¡æ¿ä¸²*ã€‚ç»“åˆè¿™ä¸¤éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ç¥å¥‡çš„ğŸª„

è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ¨¡æ¿å­—ç¬¦ä¸²ã€‚å®ƒä½¿ç”¨æ”¯æŒå­—ç¬¦ä¸²æ’å€¼çš„åæ–œçº¿è¯­æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†™â€¦

```
const output = `My name is ${name}.`;
```

â€¦å¹¶åŠ¨æ€å¡«å……`name`å€¼ã€‚

æ¨¡æ¿å‡½æ•°`styled.h1`ç”¨äºæ ‡è®°å­—ç¬¦ä¸²ï¼Œå› æ­¤å‘½åä¸ºæ ‡è®°æ¨¡æ¿æ–‡å­—ã€‚å®ƒå…è®¸æˆ‘ä»¬å‘Šè¯‰å¼•æ“åº”è¯¥å¦‚ä½•å¡«å……å’Œæ„é€ å¸¦æ ‡ç­¾çš„å­—ç¬¦ä¸²ã€‚

ç»™å®šæ‰“å°`My name is ${name}`çš„ç®€å•ä¾‹å­ï¼Œæµè§ˆå™¨é€šå¸¸ä¼šå°†`name`çš„å½“å‰å€¼æ’å…¥å­—ç¬¦ä¸²ã€‚

ä½†æ˜¯ä¹Ÿè®¸æˆ‘ä»¬æƒ³ç”¨ç»³å­åšäº›ä¸åŒçš„äº‹æƒ…ï¼Ÿé€šè¿‡å¯¹å­—ç¬¦ä¸²è¿è¡Œæ¨¡æ¿å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå¹¶æ§åˆ¶è¾“å‡ºçš„å¤–è§‚ã€‚

æ¨¡æ¿å‡½æ•°æ¥æ”¶å…³äºæ¨¡æ¿å­—ç¬¦ä¸²(å®ƒçš„éƒ¨åˆ†å’Œå˜é‡)çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ— è®ºæˆ‘ä»¬ä»å‡½æ•°è¿”å›ä»€ä¹ˆéƒ½å°†æ˜¯æˆ‘ä»¬çš„`output`ã€‚

# äº†è§£æ¨¡æ¿åŠŸèƒ½

åœ¨æˆ‘ä»¬å°è¯•é‡æ–°æ„å»ºè‡ªå·±çš„`styled`æ¨¡æ¿å‡½æ•°ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹è¿™äº›å‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

åœ¨ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`introduce`æ ‡ç­¾æ‰“å°å‡ºä¸€ä¸ªç®€çŸ­çš„ä»‹ç»ã€‚

```
function introduce(strings, name, food) {
  // construct and return string
}const name = 'Nina';
const food = 'ğŸ•';
const output = introduce`I am ${name}. I like ${food}.`;
```

å½“å¯¹æ¨¡æ¿å­—ç¬¦ä¸²è¿è¡Œå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡å‚æ•°æ¥æ”¶æ‰€æœ‰éœ€è¦çš„ç»†èŠ‚ã€‚

`strings`åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæœ¬è´¨ä¸Šæ˜¯åŠ¨æ€å˜é‡ä¹‹é—´çš„æ‰€æœ‰é™æ€éƒ¨åˆ†ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å« 3 é¡¹çš„æ•°ç»„:`I am`ã€`. I like`å’Œ`.`ã€‚

æ‰€æœ‰åç»­å‚æ•°éƒ½æ˜¯æˆ‘ä»¬çš„æ’å€¼å˜é‡ï¼Œ`name`å’Œ`food`çš„å€¼ã€‚

ä½¿ç”¨ ES6 rest æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·å°†è¿™äº›åç»­å‚æ•°æ‰¹å¤„ç†åœ¨ä¸€èµ·:

```
function introduce(strings, ...args) {
  // construct and return string
}
```

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸ä»…é™äºä¸¤ä¸ªå€¼çš„æ¨¡æ¿ã€‚

# æ„å»ºæˆ‘ä»¬è‡ªå·±çš„â€œé£æ ¼åŒ–â€æ ‡ç­¾

çŸ¥é“äº†æ¨¡æ¿å‡½æ•°é€šå¸¸æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè®©æˆ‘ä»¬å›åˆ°æœ€åˆçš„ä¾‹å­:`styled`æ ‡ç­¾ã€‚

```
const Title = styled.h1`
  font-size: ${props => props.theme.sizes.lg};
  text-align: center;
  color: palevioletred;
`;
```

æˆ‘ä»¬ç°åœ¨æƒ³è¦è¿”å›ä¸€ä¸ªåä¸º`Title`çš„ React ç»„ä»¶ï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ã€‚è¯¥ç»„ä»¶åº”è¯¥ä½¿ç”¨æˆ‘ä»¬åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­æä¾›çš„æ ·å¼å‘ˆç°ä¸€ä¸ª HTML æ ‡é¢˜å…ƒç´ ã€‚

å¯¹äºæ ·å¼ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­è®¿é—®çš„ä¸»é¢˜ã€‚å› æ­¤ï¼Œ`Title`ç»„ä»¶åº”è¯¥å°Šé‡æˆ‘ä»¬é€šè¿‡ä¸»é¢˜æ³¨å…¥çš„å­—ä½“å¤§å°ã€‚

å°½ç®¡è¿™çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†å®ç°èµ·æ¥ç›¸å½“ç®€å•ï¼

é¦–å…ˆï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€äº›å…ˆå†³æ¡ä»¶:

```
// This acts as our theme provider
const props = {
  theme: {
    sizes: {
      xl: '2rem',
      lg: '1.5rem',
      md: '1rem',
      xs: '0.75rem',
    },
  },
};// This will be our template function
function h1(strings, ...args) {
  // Do something
}const styled = { h1 };// This will be our styled component
const Title = styled.h1`
  font-size: ${props => props.theme.sizes.lg};
  text-align: center;
  color: palevioletred;
`;
```

ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾æˆ‘ä»¬å¯ä»¥è®¿é—®ä¸€ä¸ªå…¨å±€çš„`props`å¯¹è±¡ï¼Œå®ƒå°±åƒæ˜¯æˆ‘ä»¬çš„ä¸»é¢˜æä¾›è€…ã€‚

åœ¨æˆ‘ä»¬çš„`props`å¯¹è±¡ä¸‹é¢ï¼Œæˆ‘ä»¬å®šä¹‰äº†æˆ‘ä»¬çš„`h1`æ¨¡æ¿å‡½æ•°ã€‚ä¸ºäº†è®©å®ƒçœ‹èµ·æ¥æ›´åƒæ ·å¼åŒ–ç»„ä»¶ï¼Œæˆ‘å°†å‡½æ•°åŒ…è£…åœ¨ä¸€ä¸ªåä¸º`styled`çš„å¯¹è±¡ä¸­ï¼Œç„¶åæˆ‘ä»¬ç”¨å®ƒæ¥æ„å»ºæˆ‘ä»¬çš„`Title`ç»„ä»¶ã€‚

è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹`h1`åŠŸèƒ½åŠå…¶ä½¿ç”¨æ–¹å¼:

```
function h1(strings, ...args) {
  // Do something
}const Title = styled.h1`
  font-size: ${props => props.theme.sizes.lg};
  text-align: center;
  color: palevioletred;
`;
```

å›æƒ³ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰æ‰€å­¦çš„ï¼Œ`strings`å‚æ•°åŒ…å«äº†æˆ‘ä»¬æ¨¡æ¿çš„æ‰€æœ‰é™æ€å­—ç¬¦ä¸²éƒ¨åˆ†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒåªæœ‰ä¸¤ä¸ªé¡¹ç›®:`font-size:`å’Œ`; text-align: center; â€¦`

`args`åŒ…å«æ’å€¼ã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨æ’å€¼å‡½æ•°ï¼Œè€Œä¸åªæ˜¯åƒä»¥å‰é‚£æ ·æ’å€¼å­—ç¬¦ä¸²ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æä¾›äº†æ›´å¤šçš„å¯èƒ½æ€§ï¼Œæˆ‘ä»¬é©¬ä¸Šå°±ä¼šçœ‹åˆ°ï¼

è¦åˆ›å»ºè¾“å‡ºè¿™ç§æ ·å¼åŒ–ç»„ä»¶çš„æ ‡è®°æ¨¡æ¿æ–‡æœ¬ï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹:

1.  åŸºäºæ‰€æä¾›çš„æ¨¡æ¿å­—ç¬¦ä¸²ç”ŸæˆåŸºäºä¸»é¢˜çš„æ ·å¼
2.  åˆ›å»ºå¹¶è¿”å›å…·æœ‰è¿™äº›æ ·å¼çš„ React ç»„ä»¶

æ‰€ä»¥æˆ‘ä»¬å°±è¿™ä¹ˆåšï¼Œä»ç¬¬ä¸€æ­¥å¼€å§‹ã€‚

# ç”ŸæˆåŸºäºä¸»é¢˜çš„æ ·å¼

åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ç”Ÿæˆæ ·å¼ï¼Œç¨åå°†åº”ç”¨äºç»„ä»¶ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ·å¼è¾“å‡ºä¸ºç®€å•çš„ CSS å­—ç¬¦ä¸²ï¼ŒåŒæ ·è¾“å‡ºä¸ºæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å½“å‰æ ¼å¼ã€‚

```
const props = {
  theme: {
    sizes: {
      xl: '2rem',
      lg: '1.5rem',
      md: '1rem',
      xs: '0.75rem',
    },
  },
};function h1(strings, ...args) {
  let str = ''; strings.forEach((string, i) => {
    str += string + (args[i] ? args[i](props) : '');
  }); return str;
}const styles = h1`
  font-size: ${props => props.theme.sizes.lg};
  text-align: center;
  color: palevioletred;
`;
```

åœ¨æˆ‘ä»¬çš„å‡½æ•°`h1`ä¸­ï¼Œæˆ‘ä»¬éå†æ¨¡æ¿çš„é™æ€å­—ç¬¦ä¸²éƒ¨åˆ†ï¼Œå¹¶é€’å¢åœ°è¿æ¥å®ƒä»¬ã€‚é€šè¿‡ä½¿ç”¨ç´¢å¼•`i`ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥æ¯ä¸ªéƒ¨åˆ†æ˜¯å¦æœ‰ç›¸å…³çš„æ’å€¼ã€‚

å› æ­¤ï¼Œåœ¨å°†`font-size:`è¿æ¥åˆ°åˆå§‹ç©ºå­—ç¬¦ä¸²ä¹‹åï¼Œæˆ‘ä»¬æ£€æŸ¥åœ¨ç´¢å¼• 0 å¤„æ˜¯å¦å­˜åœ¨æ’å€¼ã€‚çš„ç¡®æœ‰ï¼æˆ‘ä»¬æä¾›çš„å‡½æ•°å®šä¹‰äº†åŸºäºä¸»é¢˜çš„å­—ä½“å¤§å°ã€‚

ç”±äº`args[i]`åŒ…å«äº†æˆ‘ä»¬æ³¨å…¥çš„å€¼`(props) => props.theme.sizes.lg`ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å…¨å±€`props`å¯¹è±¡è°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶æ¥æ”¶å›å­—ä½“å¤§å°ã€‚å®Œç¾ï¼

æœ€åï¼Œæˆ‘ä»¬ä»æ¨¡æ¿å‡½æ•°ä¸­è¿”å›`str`ã€‚å®ƒåŒ…å«ä¸€ä¸ª CSS å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
font-size: 1.5rem;
text-align: center;
color: palevioletred;
```

# è¿”å›æ ·å¼åŒ–çš„ React ç»„ä»¶

ä¸ºäº†å®Œå…¨æ¨¡æ‹Ÿæ ·å¼åŒ–çš„ç»„ä»¶ï¼Œæˆ‘ä»¬ç°åœ¨æƒ³è¦è¿”å›ä¸€ä¸ªæ ·å¼åŒ–çš„ React ç»„ä»¶ï¼Œè€Œä¸æ˜¯ CSS å­—ç¬¦ä¸²ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå°çš„åŠ©æ‰‹å‡½æ•°`css2obj`å¾ˆå®¹æ˜“åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯¥å‡½æ•°å°† CSS å­—ç¬¦ä¸²è½¬æ¢æˆå¯ä»¥åº”ç”¨äº React ç»„ä»¶çš„ CSS å¯¹è±¡ã€‚è¿™å¹¶ä¸å®Œå…¨æ˜¯æ ·å¼åŒ–ç»„ä»¶çš„å·¥ä½œæ–¹å¼ï¼Œä½†æ˜¯ç›®å‰å®ƒç¡®å®å¯ä»¥å·¥ä½œã€‚æœ‰å…´è¶£å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹å®ç°[ã€‚](https://gist.github.com/konstantinmuenster/dd391a78b167972f03e198198fe6b5ae)

```
function h1(strings, ...args) {
  let str = ''; strings.forEach((string, i) => {
    str += string + (args[i] ? args[i](props) : '');
  }); return React.createElement('h1', {
    style: css2obj(str),
  });
}
```

è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„`h1`å®ç°ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šè¿”å› CSS å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªå…·æœ‰æ­£ç¡®æ ‡é¢˜ç±»å‹å’Œç”Ÿæˆçš„æ ·å¼å¯¹è±¡çš„ React å…ƒç´ ã€‚

å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¸¦æ ‡ç­¾çš„æ¨¡æ¿æ–‡å­—æ¥åˆ›å»ºä»¤äººæƒŠå¹çš„æ ‡é¢˜ï¼Œå°±åƒè¿™æ ·ç®€å•:

```
const Title = styled.h1`
  font-size: ${props => props.theme.sizes.lg};
  text-align: center;
  color: palevioletred;
`;export const MyComponent = () => {
  return <Title>My Heading</Title>;
};
```

å½“ç„¶ï¼Œå®é™…ä¸Šï¼Œæ ·å¼åŒ–ç»„ä»¶æ¯”è¿™ä¸ªç®€å•çš„ä¾‹å­éšè—äº†æ›´å¤šçš„å¤æ‚æ€§ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘å¸Œæœ›æˆ‘ä»¬æ­ç¤ºäº†ä¸€ç‚¹æ ‡ç­¾æ¨¡æ¿æ–‡å­—æä¾›çš„é­”åŠ›ã€‚

å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸€ç›´æ˜¯çœ‹èµ·æ¥(å¬èµ·æ¥)æ¯”å®é™…å¤æ‚å¾—å¤šçš„äº‹æƒ…ä¹‹ä¸€ã€‚

æ‰€ä»¥ä½ è¦è®°ä½:

**å¸¦æ ‡ç­¾çš„æ¨¡æ¿æ–‡å­—ä½¿æ‚¨èƒ½å¤Ÿå®šä¹‰æ¨¡æ¿å­—ç¬¦ä¸²åº”è¯¥å¦‚ä½•æ„é€ å’Œè¿”å›ã€‚**

åˆä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·å¸¦æŠ€æœ¯ï¼å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ª [CodeSandbox](https://codesandbox.io/s/styled-components-tagged-template-literal-article-dbiyd9) ä¸­æ‰¾åˆ°å®Œæ•´çš„ä¾‹å­ã€‚

è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨äº[konstantin.digital/blog](https://konstantin.digital/blog)ã€‚æˆ‘æ¯æœˆå†™ä¸€ç¯‡å…³äº React çš„ web å’Œäº§å“å¼€å‘ä»¥åŠå¦‚ä½•æˆä¸ºæ›´å¥½çš„å¼€å‘äººå‘˜çš„æ–‡ç« ã€‚

*æ›´å¤šå†…å®¹è¯·çœ‹*[***plain English . io***](https://plainenglish.io/)*ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„* [***å…è´¹å‘¨æŠ¥***](http://newsletter.plainenglish.io/) *ã€‚å…³æ³¨æˆ‘ä»¬å…³äº*[***Twitter***](https://twitter.com/inPlainEngHQ)[***LinkedIn***](https://www.linkedin.com/company/inplainenglish/)*[***YouTube***](https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw)*[***ä¸å’Œ***](https://discord.gg/GtDtUAvyhW) *ã€‚å¯¹å¢é•¿é»‘å®¢æ„Ÿå…´è¶£ï¼Ÿæ£€æŸ¥* [***ç”µè·¯***](https://circuit.ooo/) *ã€‚***