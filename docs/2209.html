<html>
<head>
<title>The Do’s and Don’ts of Try-Catch in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中Try-Catch的注意事项</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-dos-and-don-ts-of-try-catch-in-javascript-75c4e8c82200?source=collection_archive---------0-----------------------#2022-05-22">https://javascript.plainenglish.io/the-dos-and-don-ts-of-try-catch-in-javascript-75c4e8c82200?source=collection_archive---------0-----------------------#2022-05-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="660c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">学习使用try{}catch{}快速简单地处理错误</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/f5ace298314e4615ec0107645c71ae87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VE-rqR9GJW8GX_Ep"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo By <a class="ae ks" href="https://www.instagram.com/davijd1/" rel="noopener ugc nofollow" target="_blank"><strong class="bd kt">David Pupaza</strong></a></figcaption></figure><p id="3a27" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">早上好，朋友们，</p><p id="308f" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">几个月前，当我在做技术访谈时，错误处理出现了。我的面试官并没有使用简单的if-else语句，而是鼓励我使用try-catch。他没有直接说出来。；这更像是一种暗示或戏弄。他说了一些类似于“如果有一种处理异常的方法就好了……”幸运的是，我有在Java中使用try-catch和throw语句的经验，所以我能够理解他所说的。但对我来说不幸的是，我对JavaScript中的语法有何不同一无所知。</p><p id="6c9d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">所以今天，这就是我们要讲的内容。我们如何使用试捕法？什么时候我们应该使用if-else语句而不是try-catch？</p><p id="0954" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">让我们得到它。</p><h1 id="3cb1" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">开始使用Try Catch</h1><p id="0019" class="pw-post-body-paragraph ku kv in kw b kx mi jo kz la mj jr lc ld mk lf lg lh ml lj lk ll mm ln lo lp ig bi translated">在我们讨论该做什么和不该做什么之前，让我们先来简单了解一下如何使用try-catch。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/c7a0815bcf3eb22381a3365243f1e5e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Os2hS-DsZj82FAcVQ67a7g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Oversimplified Template of Try-Catch</figcaption></figure><p id="c630" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">首先，让我们从try语句开始。在花括号内，也就是try-block，编写任何您想要执行的代码。你可以打印到控制台，创建对象，声明变量，调用函数。尽你所能。</p><p id="a32c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">如果由于某种原因，try语句中出现错误，catch语句中所有代码都将被执行。</p><p id="8319" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">以下是MDN官方网站文档对此的解释:</p><blockquote class="mo mp mq"><p id="489f" class="ku kv mr kw b kx ky jo kz la lb jr lc ms le lf lg mt li lj lk mu lm ln lo lp ig bi translated"><code class="fe mv mw mx my b">try...catch</code>语句标记了一个<code class="fe mv mw mx my b">try</code>块和一个<code class="fe mv mw mx my b">catch</code>块。如果<code class="fe mv mw mx my b">try</code>块中的代码抛出异常，那么<code class="fe mv mw mx my b">catch</code>块中的代码将被执行。</p><p id="1d88" class="ku kv mr kw b kx ky jo kz la lb jr lc ms le lf lg mt li lj lk mu lm ln lo lp ig bi translated">- <a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a></p></blockquote><p id="d183" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">你可能想知道:我们在谈论什么类型的错误？<strong class="kw io">字面意思，全部。这实际上是使用try-catch而不是if-else语句的好处。</strong></p><p id="6e42" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">错误可能是由程序员造成的。例如，也许你拼错了。你可能没有写<code class="fe mv mw mx my b">console.log()</code>，而是写了<code class="fe mv mw mx my b">consolelog()</code>或<code class="fe mv mw mx my b">conle.log()</code>。你明白了。按照这种基本原理，你的代码可能想要做一些不可能的事情。例如，你正在调用一个不存在的函数。您试图使用不存在的变量或对象。你试图使用一个没有意义的陈述——同样，比如拼错的<code class="fe mv mw mx my b">console.log()</code>。</p><p id="4b2b" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">然后在浏览器的自然错误处理之上，你甚至可以创建你自己的错误。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/f3b264a287d150e91d2ec55f185ef3f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BvVPvgOdVbODZ7deWNtUHQ.png"/></div></div></figure><p id="7565" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">例如，假设您有一个存储用户年龄的变量<code class="fe mv mw mx my b">age</code>。正如您所看到的，如果年龄小于18岁，它将抛出一个错误，显示“您太年轻了。”当抛出这个错误时，将执行catch-block而不是try-block。相反，例如，如果用户的年龄是20岁，则不会抛出任何错误。try块将被完全执行，而catch块将永远不会被执行。</p><p id="dcf2" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">除了由程序员引起的错误之外，错误也可能是由程序员无法控制的事情引起的。如果你的程序依赖于API或任何第三方，当然程序员总是会假设第三方会成功地完成他们的部分。有时候他们不会。也许第三方有服务器问题。程序员的工作就是处理这些错误，以防第三方无法履行其职责。</p><p id="078e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">try-catch语句就是这么简单。更多信息，请查看<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch" rel="noopener ugc nofollow" target="_blank">试抓文档</a>。</p><p id="f70e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在让我们来看看该做和不该做的事情。</p><h1 id="fc32" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">试抓的注意事项</h1><h2 id="15ad" class="mz lr in bd ls na nb dn lw nc nd dp ma ld ne nf mc lh ng nh me ll ni nj mg nk bi translated">❌Don't使用Try-Catch进行输入验证</h2><p id="09fb" class="pw-post-body-paragraph ku kv in kw b kx mi jo kz la mj jr lc ld mk lf lg lh ml lj lk ll mm ln lo lp ig bi translated">如果您有一个输入表单来获取用户名，显然您需要一个字符串。如果用户发送了一系列的数字，我们想要处理它。或者如果您希望用户的年龄在某个范围内，我们也需要输入验证。</p><p id="12aa" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">我们需要确保用户提供的输入是我们所期望的。</p><p id="fd7b" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">尝试捕捉并不是做到这一点的工具。绝对可以用。它会像你期望的那样工作。根本不推荐。在特殊情况下，应该谨慎使用try-catch。您应该使用try-catch进行<strong class="kw io">错误处理。</strong>错误处理和输入验证是两回事。</p><p id="6716" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这里有一个<a class="ae ks" href="https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_state_throw_error" rel="noopener ugc nofollow" target="_blank"> W3 Schools </a>使用它进行输入验证的例子。简单的if-else语句肯定就够了。你根本不需要使用try-catch。</p><h2 id="3501" class="mz lr in bd ls na nb dn lw nc nd dp ma ld ne nf mc lh ng nh me ll ni nj mg nk bi translated">✔️Do使用Try-Catch进行错误处理</h2><p id="4683" class="pw-post-body-paragraph ku kv in kw b kx mi jo kz la mj jr lc ld mk lf lg lh ml lj lk ll mm ln lo lp ig bi translated">当你预计事情会出错，但又完全超出你的控制范围时，使用尝试捕捉。大多数情况下，该功能会起作用，很少会不起作用；这种可变性不是你能控制的。如果它在你的控制范围内，那就已经解决了。</p><h2 id="0f18" class="mz lr in bd ls na nb dn lw nc nd dp ma ld ne nf mc lh ng nh me ll ni nj mg nk bi translated">✔️Do使用Try-Catch定制错误消息</h2><p id="b9e0" class="pw-post-body-paragraph ku kv in kw b kx mi jo kz la mj jr lc ld mk lf lg lh ml lj lk ll mm ln lo lp ig bi translated">程序会很快变大。如果您希望能够无缝且快速地识别错误，自定义错误消息是您的好朋友。它们比浏览器提供的一般错误信息更能说明问题，也更有帮助。</p><p id="c31c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在本文中，我们非常简要地讨论了定制错误消息。如果你想更深入地了解它，请查看自定义错误<a class="ae ks" href="https://javascript.info/custom-errors" rel="noopener ugc nofollow" target="_blank">，通过Javascript.info扩展错误</a>。它非常全面且易于理解。此外，还有许多代码示例，您可以自己尝试一下。</p><h2 id="d8d1" class="mz lr in bd ls na nb dn lw nc nd dp ma ld ne nf mc lh ng nh me ll ni nj mg nk bi translated">✔️Do使用Try-Catch来捕捉所有异常</h2><p id="1f1e" class="pw-post-body-paragraph ku kv in kw b kx mi jo kz la mj jr lc ld mk lf lg lh ml lj lk ll mm ln lo lp ig bi translated">如果您试图使用if-else语句来捕获所有的异常，您将会写很多很多的代码——即使这样，您可能也不会捕获到所有的异常。</p><p id="1ed4" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">请注意，会有一些你可能会忘记甚至没有预料到的例外。</p><p id="02ec" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">Try-Catch非常棒，因为它将捕获所有异常——甚至是那些您没有想到或预料到会发生的异常。</p><h2 id="e914" class="mz lr in bd ls na nb dn lw nc nd dp ma ld ne nf mc lh ng nh me ll ni nj mg nk bi translated">❌Don't在程序逻辑中使用Try-Catch</h2><p id="e779" class="pw-post-body-paragraph ku kv in kw b kx mi jo kz la mj jr lc ld mk lf lg lh ml lj lk ll mm ln lo lp ig bi translated">if-else语句和try-catch不能互换使用。它们都有特定的用例以及需要满足的环境。</p><p id="7279" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">再次强调，谨慎而有策略地使用试捕。单独使用try-catch来处理错误。不要将try-catch用于其他任何东西，比如程序逻辑。绝对不行。</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><p id="bde0" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">感谢阅读。如果你用不同的方式使用try-catch，或者对它们有独特的用例，我很想了解一下。</p><p id="5c90" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">如果你想和我一起学习更多的JavaScript，请查看:</p><p id="fc10" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/you-think-you-know-the-difference-between-var-let-and-const-b55b638529fc">你认为你知道var、let和const之间的区别吗？</a></p><p id="6d03" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-javascript-classes-for-object-oriented-programming-8f300d5f71a5">如何使用JavaScript类进行面向对象编程</a></p><p id="2cf0" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><a class="ae ks" href="https://medium.com/@kyledeguzmanx/refactoring-javascript-code-truthy-and-falsy-f176a834a080" rel="noopener">重构JavaScript代码:Truthy和Falsy </a></p><p id="08e4" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><em class="mr">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mr">plain English . io</em></strong></a><em class="mr">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mr">免费周报</em> </strong> </a> <em class="mr">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mr">Twitter</em></strong></a><em class="mr">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="mr">LinkedIn</em></strong></a><em class="mr">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mr">社区不和谐</em> </strong> </a> <em class="mr">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="mr">人才集体</em> </strong> </a> <em class="mr">。</em></p></div></div>    
</body>
</html>