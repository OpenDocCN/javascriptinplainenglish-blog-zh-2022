<html>
<head>
<title>The URLSearchParams API in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的URLSearchParams API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-urlsearchparams-api-in-javascript-19748ef513d5?source=collection_archive---------11-----------------------#2022-10-19">https://javascript.plainenglish.io/the-urlsearchparams-api-in-javascript-19748ef513d5?source=collection_archive---------11-----------------------#2022-10-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1b3bf1cf9ca3803eb271bb5afab2d181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ET4DLWGsZHUaDhOC"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@nublson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nubelson Fernandes</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="958a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">URLSearchParams</code> API提供了实用方法来解析来自<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Glossary/URL" rel="noopener ugc nofollow" target="_blank"> URL </a>的查询字符串的数据。<code class="fe ky kz la lb b">URLSearchParams()</code>构造函数从查询字符串创建一个新的<code class="fe ky kz la lb b">URLSearchParams</code>对象并返回它。它忽略了查询字符串中的前导问号<code class="fe ky kz la lb b">?</code>，所以我们也可以传递没有前导<code class="fe ky kz la lb b">?</code>的查询字符串。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="6d5b" class="lk ll in lb b gy lm ln l lo lp">// URL: <a class="ae jz" href="https://myshop.com/mobiles?color=black&amp;sort=price_asc" rel="noopener ugc nofollow" target="_blank">https://myshop.com/mobiles?color=black&amp;sort=price_asc</a><br/>const search = new URLSearchParams('color=black&amp;sort=price_asc');</span></pre><p id="ce14" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们提供完整的URL而不是查询字符串，那么<code class="fe ky kz la lb b">URLSearchParams()</code>构造函数就不能正确解析数据。如果我们有一个完整的URL，我们可以使用<a class="ae jz" href="https://jscurious.com/the-url-api-in-javascript/" rel="noopener ugc nofollow" target="_blank"> URL API </a>解析其中的查询字符串，并将其传递给<code class="fe ky kz la lb b">URLSearchParams()</code>构造函数。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="a08d" class="lk ll in lb b gy lm ln l lo lp">// Wrong way<br/>const search = new URLSearchParams('<a class="ae jz" href="https://myshop.com/mobiles?color=black&amp;sort=price'" rel="noopener ugc nofollow" target="_blank">https://myshop.com/mobiles?color=black&amp;sort=price'</a>);</span><span id="2b6d" class="lk ll in lb b gy lq ln l lo lp">// Correct way<br/>const url = new URL('<a class="ae jz" href="https://myshop.com/mobiles?color=black&amp;sort=price'" rel="noopener ugc nofollow" target="_blank">https://myshop.com/mobiles?color=black&amp;sort=price'</a>);<br/>const search = new URLSearchParams(url.search);<br/>// OR pass the query string directly <br/>const search = new URLSearchParams('color=black&amp;sort=price');</span></pre><h1 id="1993" class="lr ll in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">实用方法</h1><p id="84a3" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated"><code class="fe ky kz la lb b">URLSearchParams</code>实用程序方法让我们可以轻松地访问查询参数，还可以添加新的或修改任何现有的参数。让我们一起来探索它们。</p><h2 id="082c" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">get()方法</h2><p id="13ea" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">该方法采用查询参数名称，并返回第一个匹配的值。如果没有找到匹配，它返回<code class="fe ky kz la lb b">null</code>。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="14f8" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams('color=black&amp;sort=price_asc&amp;color=red');<br/>console.log(search.get('color')); // 'black'<br/>console.log(search.get('brand')); // null</span></pre><h2 id="75fa" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">getAll()方法</h2><p id="0745" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">该方法采用查询参数名称，并以数组形式返回所有关联的值。如果没有找到匹配，它返回一个空数组。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="92d5" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams('color=black&amp;sort=price_asc&amp;color=red');<br/>console.log(search.getAll('color')); // ['black', 'red']<br/>console.log(search.getAll('sort')); // ['price_asc']<br/>console.log(search.getAll('brand')); // []</span></pre><h2 id="e578" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">has()方法</h2><p id="a639" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">此方法检查查询字符串中是否存在提供的参数。如果参数存在，则返回<code class="fe ky kz la lb b">true</code>，否则返回<code class="fe ky kz la lb b">false</code>。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="d0d1" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams('color=black&amp;sort=price_asc');<br/>console.log(search.has('sort')); // true<br/>console.log(search.has('brand')); // false</span></pre><h2 id="2080" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">forEach()方法</h2><p id="c38b" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">这个方法让我们遍历所有的查询参数值。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="ad43" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams("color=black&amp;sort=price_asc");<br/>search.forEach((value, key) =&gt; console.log(key, value));<br/>// color black<br/>// sort price_asc</span></pre><h2 id="83c5" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">keys()方法</h2><p id="caf6" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">这个方法返回一个包含所有查询参数名的迭代器对象。我们可以使用<code class="fe ky kz la lb b">for…of</code>循环迭代这个迭代器对象，或者使用spread操作符或<code class="fe ky kz la lb b">Array.from()</code>方法将它转换成一个数组。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="17f8" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams("color=black&amp;sort=price_asc");<br/>for (const key of search.keys()) {<br/>  console.log(key);<br/>}<br/>/* -output-<br/>    color<br/>    sort<br/>*/</span><span id="0a1f" class="lk ll in lb b gy lq ln l lo lp">// convert to Array<br/>console.log([...search.keys()]); // ['color', 'sort']<br/>// OR<br/>console.log(Array.from(search.keys())); // ['color', 'sort']</span></pre><h2 id="c3ec" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">values()方法</h2><p id="f20c" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">该方法返回包含所有查询参数值的迭代器对象。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="2e5d" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams("color=black&amp;sort=price_asc");<br/>console.log([...search.values()]); // ['black', 'price_asc']</span></pre><h2 id="284a" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">entries()方法</h2><p id="bda7" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">这个方法返回一个迭代器对象，包含查询参数的所有键值对及其值。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="811c" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams("color=black&amp;sort=price_asc");<br/>console.log([...search.entries()]); <br/>// [['color', 'black'], ['sort', 'price_asc']]</span></pre><h2 id="9605" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">append()方法</h2><p id="f07d" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">此方法将带有值的新查询参数追加到现有查询字符串中。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="6d59" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams('color=black&amp;sort=price_asc');<br/>search.append('brand', 'apple');<br/>console.log(search.toString()); <br/>// 'color=black&amp;sort=price_asc&amp;brand=apple'</span></pre><h2 id="656e" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">set()方法</h2><p id="6232" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">该方法用提供的参数值替换任何现有的查询参数值，如果提供的参数不存在，它会追加它。如果所提供的参数出现多次，它将删除它们并只替换第一个参数的值。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="948c" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams('color=black&amp;sort=price_asc&amp;color=red');<br/>search.set('sort', 'popularity');<br/>search.set('color', 'green');<br/>search.set('brand', 'apple');<br/>console.log(search.toString()); <br/>// 'color=green&amp;sort=popularity&amp;brand=apple'</span></pre><h2 id="171d" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">delete()方法</h2><p id="81a6" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">此方法删除与所提供的查询参数键关联的所有条目。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="9851" class="lk ll in lb b gy lm ln l lo lp">search = new URLSearchParams('color=black&amp;sort=price_asc&amp;color=red');<br/>search.delete('color');<br/>search.delete('brand');<br/>console.log(search.toString()); // 'sort=price_asc'</span></pre><h2 id="ed15" class="lk ll in bd ls mt mu dn lw mv mw dp ma kl mx my me kp mz na mi kt nb nc mm nd bi translated">sort()方法</h2><p id="8c43" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">这个方法按照键对查询字符串进行排序，如果存在多个同名的键，那么它们的相对顺序将被保留。</p><pre class="lc ld le lf gt lg lb lh li aw lj bi"><span id="0a45" class="lk ll in lb b gy lm ln l lo lp">const search = new URLSearchParams('sort=price&amp;ram=8gb&amp;color=red&amp;ram=4gb');<br/>search.sort();<br/>console.log(search.toString()); <br/>// color=red&amp;ram=8gb&amp;ram=4gb&amp;sort=price</span></pre></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><h1 id="6d15" class="lr ll in bd ls lt nl lv lw lx nm lz ma mb nn md me mf no mh mi mj np ml mm mn bi translated">你可能也喜欢</h1><ul class=""><li id="c2db" class="nq nr in kc b kd mo kh mp kl ns kp nt kt nu kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/the-url-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的URL API</a></li><li id="e0b7" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/the-notification-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">使用JavaScript中的通知API发送推送通知</a></li><li id="caea" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/play-audio-with-htmlaudioelement-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">用JavaScript中的HTMLAudioElement API播放音频</a></li><li id="45e0" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/map-in-javascript-and-how-it-is-better-than-object/" rel="noopener ugc nofollow" target="_blank">JavaScript中的地图，当它是比对象更好的选择时</a></li><li id="5dad" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/different-ways-to-check-if-a-key-exists-in-an-object/" rel="noopener ugc nofollow" target="_blank">JavaScript中检查对象中是否存在键的不同方法</a></li><li id="a31e" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/generator-functions-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的生成器函数</a></li><li id="806a" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/a-brief-guide-to-promises-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中承诺的简要指南</a></li><li id="21d4" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/the-vibration-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的震动API</a></li><li id="e6a9" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/javascript-fetch-api-to-make-http-requests/" rel="noopener ugc nofollow" target="_blank"> JavaScript获取API进行HTTP请求</a></li><li id="46c6" class="nq nr in kc b kd nz kh oa kl ob kp oc kt od kx nv nw nx ny bi translated"><a class="ae jz" href="https://jscurious.com/20-javascript-shorthand-techniques-that-will-save-your-time/" rel="noopener ugc nofollow" target="_blank"> 20+ JavaScript速记编码技巧和窍门</a></li></ul></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="470c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="oe">感谢您的时间:)</em> <br/> <strong class="kc io"> <em class="oe">阿米塔夫·米什拉</em> </strong></p><p id="5d88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="oe">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">plain English . io</em></strong></a><em class="oe">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="oe">免费周报</em> </strong> </a> <em class="oe">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">LinkedIn</em></strong></a><strong class="kc io"><em class="oe"/></strong><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">YouTube</em></strong></a><strong class="kc io"><em class="oe">，以及</em></strong><em class="oe"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="oe">不和</em> </strong> </a>T55】</p></div></div>    
</body>
</html>