<html>
<head>
<title>The Basics of Routing in Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Express中路由的基础知识</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-basics-of-routing-in-express-d76bb28f8ab8?source=collection_archive---------12-----------------------#2022-06-28">https://javascript.plainenglish.io/the-basics-of-routing-in-express-d76bb28f8ab8?source=collection_archive---------12-----------------------#2022-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="07a9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解Express中路由的基本知识，以及如何为自己的应用程序创建路由。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8c36583e32b2b385a82d34c589c14901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q9AiOWe_OIbHuBED"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sigmund</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e5fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Express是一个流行的Node.js web框架，提供路由功能。路由允许您将特定的URL映射到特定的处理程序，然后这些处理程序可用于处理请求和生成响应。在这篇博文中，我们将讨论Express中路由的基础知识，并向您展示如何为您自己的应用程序创建路由。</p><h2 id="a482" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">Express中的路由简介</h2><p id="bd2e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在Express中，使用HTTP方法在您声明的Express app对象上定义路由。例如，要创建一个响应GET请求的路由，您可以使用<code class="fe mq mr ms mt b"> app.get()</code>方法，对于POST请求，您可以使用<code class="fe mq mr ms mt b">app.post()</code>。</p><p id="de58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些方法有两个参数:一个路径和一个处理函数。path是您希望映射到处理程序的URL，而handler函数是当向该URL发出请求时将被调用的函数。</p><h2 id="bb1c" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">路由方法</h2><p id="b34f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">正如我们上面提到的，有不同的方法对应于您可以处理的不同类型的请求。在Express中，这些方法是:</p><ul class=""><li id="c884" class="mu mv iq ky b kz la lc ld lf mw lj mx ln my lr mz na nb nc bi translated"><code class="fe mq mr ms mt b">app.get()</code> —用于处理获取请求</li><li id="848a" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><code class="fe mq mr ms mt b">app.post() </code> —用于处理发布请求</li><li id="bb8e" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><code class="fe mq mr ms mt b">app.put() </code> —用于处理PUT请求</li><li id="22f8" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><code class="fe mq mr ms mt b">app.delete()</code> —用于处理删除请求</li><li id="c062" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><code class="fe mq mr ms mt b">app.patch()</code> —用于处理补丁请求</li></ul><p id="2eed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您还可以使用<code class="fe mq mr ms mt b">app.all()</code>方法将任何类型的请求映射到一个处理函数。下面是为GET和POST请求定义的两个简单路由。</p><pre class="kg kh ki kj gt ni mt nj nk aw nl bi"><span id="e7ad" class="ls lt iq mt b gy nm nn l no np">const express = require(‘express’)</span><span id="a64c" class="ls lt iq mt b gy nq nn l no np">const app = express()<br/></span><span id="d6d9" class="ls lt iq mt b gy nq nn l no np">// Handling GET requests</span><span id="6e2b" class="ls lt iq mt b gy nq nn l no np">app.get(‘/’, (req, res) =&gt; {</span><span id="6935" class="ls lt iq mt b gy nq nn l no np">  res.send(‘Hello, world!’)</span><span id="d900" class="ls lt iq mt b gy nq nn l no np">})<br/></span><span id="5478" class="ls lt iq mt b gy nq nn l no np">// Handling POST requests</span><span id="07b7" class="ls lt iq mt b gy nq nn l no np">app.post(‘/’, (req, res) =&gt; {</span><span id="16a6" class="ls lt iq mt b gy nq nn l no np">  res.send(‘Received a POST request’)</span><span id="e32c" class="ls lt iq mt b gy nq nn l no np">})</span></pre><p id="dd42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们首先需要Express模块，然后创建一个Express应用程序的实例。然后，我们可以使用上述方法定义我们的路线。接受两个参数req和res的回调函数是一个路由处理函数。我们将在后面的章节中更详细地讨论路由处理程序。</p><p id="a8a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第一条路线中，我们将根URL <code class="fe mq mr ms mt b">‘/’</code>映射到一个处理函数，该函数发送Hello World的简单消息作为响应。在第二条路线中，我们将同一个URL映射到一个不同的处理器函数，该函数也发送一条消息，但是这次它说我们收到了一个POST请求。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/3a898fe88a569fa30a86e75b2fb97b34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0MXsbU9A9zyuNd2g"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@johnschno?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">John Schnobrich</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="31fa" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">路线路径和参数</h2><p id="3437" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">除了指定要映射到处理函数的URL之外，还可以指定路由路径。路由路径是可以包含命名参数的字符串，命名参数是将传递给处理函数的值的占位符。</p><p id="df33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，假设我们有一个博客，我们想创建一个查看单个帖子的路径。我们可以创建一条这样的路线:</p><pre class="kg kh ki kj gt ni mt nj nk aw nl bi"><span id="5c61" class="ls lt iq mt b gy nm nn l no np">app.get(‘/posts/:postID’, (req, res) =&gt; {</span><span id="498d" class="ls lt iq mt b gy nq nn l no np">  // Get the post with the specified ID from the database</span><span id="e968" class="ls lt iq mt b gy nq nn l no np">  // send it as the response</span><span id="2521" class="ls lt iq mt b gy nq nn l no np">})</span></pre><p id="502d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个路由中，我们定义了一个名为postID的命名参数。当向该路由发出请求时，postID的值将作为req对象的属性传递给处理函数。</p><p id="640c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果向<code class="fe mq mr ms mt b">‘/posts/123’</code>发出请求，那么<code class="fe mq mr ms mt b">req.params.postID</code>将等于<code class="fe mq mr ms mt b">‘123’</code>。这使我们能够轻松地获得关于我们想要查看的帖子的信息。</p><p id="f8e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在路由路径中定义任意数量的命名参数，它们都将作为<code class="fe mq mr ms mt b">req.params</code>对象的属性传递给处理函数。</p><h2 id="dbff" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">路线处理程序</h2><p id="1d96" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">正如我们上面提到的，路由处理程序是在向映射到它们的URL发出请求时调用的函数。这些函数是回调函数，它们通常接受两个参数req和res。有时，路由处理程序可能接受下一个参数，该参数用于绕过或委托给下一个路由处理程序。</p><p id="0009" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">req对象表示向服务器发出的请求，并包含有关请求的信息，如URL、标头和正文。res对象表示将被发送回客户机的响应，并允许您设置响应的状态代码、标头和正文。</p><pre class="kg kh ki kj gt ni mt nj nk aw nl bi"><span id="da9d" class="ls lt iq mt b gy nm nn l no np">app.get(‘/’, (req, res) =&gt; {</span><span id="1edd" class="ls lt iq mt b gy nq nn l no np">  // Set the status code to 200 (OK)</span><span id="212a" class="ls lt iq mt b gy nq nn l no np">  res.status(200)</span><span id="02b2" class="ls lt iq mt b gy nq nn l no np">  // Set the content type header to ‘text/plain’</span><span id="2b78" class="ls lt iq mt b gy nq nn l no np">  res.set(‘Content-Type’, ‘text/plain’)</span><span id="92ec" class="ls lt iq mt b gy nq nn l no np">  // Send a string message as the response</span><span id="1716" class="ls lt iq mt b gy nq nn l no np">  res.send(‘Hello, World!’)</span><span id="95fa" class="ls lt iq mt b gy nq nn l no np">})</span></pre><p id="c84c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码定义了一个简单的路由处理程序，它在将消息作为响应体发送之前设置响应的状态代码和内容类型。</p><h2 id="f15d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">结论</h2><p id="1a58" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">路由处理函数非常有用，因为它们允许您为不同的URL路径定义应用程序的行为。现在，您已经了解了Express中路由的基本知识！我希望这篇文章能教会你一些东西。祝你的编码项目好运！</p><p id="5977" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ns">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ns">plain English . io</em></strong></a><em class="ns">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ns">免费周报</em> </strong> </a> <em class="ns">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ns">Twitter</em></strong></a><em class="ns">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ns">LinkedIn</em></strong></a><em class="ns">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ns">社区不和谐</em> </strong> </a> <em class="ns">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ns">人才集体</em> </strong> </a> <em class="ns">。</em></p></div></div>    
</body>
</html>