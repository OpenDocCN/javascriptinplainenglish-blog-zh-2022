<html>
<head>
<title>Getting Started with Index Signatures in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript中的索引签名入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-index-signatures-f2b8e15f3c0d?source=collection_archive---------5-----------------------#2022-04-13">https://javascript.plainenglish.io/getting-started-with-index-signatures-f2b8e15f3c0d?source=collection_archive---------5-----------------------#2022-04-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="62ae" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><strong class="ak">关于TypeScript中索引签名概念的教程。</strong></h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c99d665cf3f8b6abb456afa92275a6f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKK9omkf212nNaIcnebk9A.png"/></div></div></figure><h1 id="cff6" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">什么是索引签名？</h1><p id="c800" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">当对象的值是一致的类型时，索引签名用于表示对象/字典的类型。</p><p id="22c2" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><strong class="li io">语法</strong> : <code class="fe mh mi mj mk b">{ [key: KeyType] : ValueType }</code></p><p id="77c5" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">假设我们有一个主题对象，它允许我们配置可以在整个应用程序中使用的颜色属性。这些值将与类型<strong class="li io">字符串一致。</strong>这为我们提供了一个应用指数签名的绝佳机会*<strong class="li io">*</strong></p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="1e5f" class="mp kp in mk b gy mq mr l ms mt">let colorsTheme = {<br/>  palette: {<br/>    success: {<br/>      main: "green",<br/>    },<br/>    error: {<br/>      main: "red",<br/>    },<br/>    warning: {<br/>      main: "orange",<br/>    },<br/>  },<br/>}</span></pre><p id="af1e" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">让我们看看如何为下面的<strong class="li io">字典添加类型定义:</strong></p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="1409" class="mp kp in mk b gy mq mr l ms mt">let ColorsTheme : {<br/>  [key: string]: {<br/>    [key: string]:{<br/>      [key: string]: string<br/>    }<br/>  }<br/>}</span><span id="a64b" class="mp kp in mk b gy mu mr l ms mt"> ColorsTheme = {<br/>  palette: {<br/>    success: {<br/>      main: "green",<br/>    },<br/>    error: {<br/>      main: "r...</span></pre><p id="bab8" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><a class="ae mv" href="https://www.typescriptlang.org/play?#code/DYUwLgBAwg9sMCcDOAVAFiAtiCAuCA3gFAQQDaA1iAJ75JgICWAdgOYC6+xpplNdDFh1zcevKrQj0mbTlMFsSPAL5LVqkrHjJ0WHAF5CSgA4BDUGDAguS0kgCuAY0cgkSG2NKZTLfACJWBBAQZj8AGlsIZQixEAQERA9Pb18IPyCAE3DI6MiAd1MEZiEksRTmf0RTNhBssVzSXNUgA" rel="noopener ugc nofollow" target="_blank">游乐场链接</a></p><p id="f29d" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><em class="mw">如果我们试图添加一个不同类型的值，而不是索引签名中定义的类型，该怎么办？</em></p><p id="5e14" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如果我们试图添加一个类型为<code class="fe mh mi mj mk b">number</code>的值，那么typescript就会开始大喊。看看下面的例子:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/e48f8d43d2a232baaa714c40a5dc45b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/0*RnYqX8Ny2LFzGwa0.gif"/></div></figure><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="af4a" class="mp kp in mk b gy mq mr l ms mt">let ColorsTheme : {<br/>  [key: string]: {<br/>    [key: string]:{<br/>      [key: string]: string<br/>    }<br/>  }<br/>}</span><span id="646a" class="mp kp in mk b gy mu mr l ms mt"> ColorsTheme = {<br/>  palette: {<br/>    success: {<br/>      main: "green",<br/>    },<br/>    error: {<br/>      main: "red",<br/>    },<br/>    warning: {<br/>      main: 1231313,<br/>    },<br/>  },<br/>}</span></pre><p id="3665" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">在上面的例子中，我们已经将索引签名中的值的类型定义为字符串，但是对于键<code class="fe mh mi mj mk b">main</code>，我们给出的值是一个数字<code class="fe mh mi mj mk b">1231313</code>。</p><p id="33f0" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">我们将从TypeScript中得到的错误:</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="4864" class="mp kp in mk b gy mq mr l ms mt">(property) main: number<br/>Type 'number' is not assignable to type 'string'.(2322)<br/>input.tsx(61, 7): The expected type comes from this index signature.</span></pre><p id="5ca6" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">我们如何解决上述错误？我们修改了<code class="fe mh mi mj mk b">ColorsTheme</code>的类型定义，以接受一个字符串或数字。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="3b6e" class="mp kp in mk b gy mq mr l ms mt">let ColorsTheme : {<br/>  [key: string]: {<br/>    [key: string]:{<br/>      [key: string]: string | number <br/>    }<br/>  }<br/>}</span><span id="7868" class="mp kp in mk b gy mu mr l ms mt"> ColorsTheme = {<br/>  palette: {<br/>    success: {<br/>      main: "green",<br/>    },<br/>    error: {<br/>      main: "red",<br/>    },<br/>    warning: {<br/>      main: 1231313,<br/>    },<br/>  },<br/>}</span></pre><p id="ab4b" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><em class="mw">注意:然而，如果索引签名是属性类型的联合，则不同类型的属性是可接受的——属性类型</em> <a class="ae mv" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#index-signatures" rel="noopener ugc nofollow" target="_blank">类型脚本文档</a>。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="980c" class="mp kp in mk b gy mq mr l ms mt">interface NumberOrStringDictionary {<br/>    [index: string]: number | string | boolean;<br/>    length: number; <br/>    name: string; <br/>    isVisible: boolean; </span><span id="dbb6" class="mp kp in mk b gy mu mr l ms mt">}</span></pre><p id="1a56" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如果我们尝试为索引签名添加一个键，而不是字符串、数字或符号，会怎么样？</p><p id="5cf6" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如果我们尝试将索引签名中的键的类型添加为布尔值，TypeScript又会开始大喊，因为索引签名参数类型必须是“字符串”、“数字”、“符号”或模板文字类型。</p><pre class="kd ke kf kg gt ml mk mm mn aw mo bi"><span id="e366" class="mp kp in mk b gy mq mr l ms mt">let foo: {<br/>  [key: boolean] : number // Error : An index signature parameter type must be 'string', 'number', 'symbol', or a template literal type<br/>} </span><span id="98a8" class="mp kp in mk b gy mu mr l ms mt">foo = {<br/>  bar: 1<br/>}</span></pre><h1 id="6a6f" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">快速回顾:</h1><p id="94fa" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">索引签名可用于定义对象的类型，该对象的值具有一致的类型，或者您不知道正在处理的对象的结构。</p><h1 id="87f1" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">结论:</h1><p id="0275" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">差不多就是这样。感谢您花时间阅读这篇博文。我希望，每个人都理解指数签名的概念。</p><p id="bc75" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如果你觉得这篇文章有用，把❤️加进去，如果我错过了什么，请在评论区告诉我。非常欢迎对博客的反馈。</p><p id="05ba" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">让我们在推特上联系:</p><div class="my mz gp gr na nb"><a href="https://twitter.com/karthik_coder" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd io gy z fp ng fr fs nh fu fw im bi translated">JavaScript不可用。</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">编辑描述</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">twitter.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np km nb"/></div></div></a></div><h1 id="1f5d" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">参考资料:</h1><ol class=""><li id="5c52" class="nq nr in li b lj lk lm ln lp ns lt nt lx nu mb nv nw nx ny bi translated"><a class="ae mv" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#index-signatures" rel="noopener ugc nofollow" target="_blank">打字稿文件</a></li><li id="5630" class="nq nr in li b lj nz lm oa lp ob lt oc lx od mb nv nw nx ny bi translated"><a class="ae mv" href="https://dmitripavlutin.com/typescript-index-signatures/" rel="noopener ugc nofollow" target="_blank">打字稿中的索引签名</a></li></ol><p id="c974" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><em class="mw">更多内容看</em> <a class="ae mv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mw">说白了就是</em> </strong> </a> <em class="mw">。报名参加我们的</em> <a class="ae mv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mw">免费周报</em> </strong> </a> <em class="mw">。关注我们关于</em><a class="ae mv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="li io"><em class="mw">Twitter</em></strong></a><em class="mw">和</em><a class="ae mv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="li io"><em class="mw">LinkedIn</em></strong></a><em class="mw">。加入我们的</em> <a class="ae mv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="li io"> <em class="mw">社区</em> </strong> </a> <em class="mw">。</em></p></div></div>    
</body>
</html>