<html>
<head>
<title>Why [‘1’, ‘2’, ‘3’].map(parseInt) Returns [1, NaN, NaN]?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么['1 '，' 2 '，' 3']。map(parseInt)返回[1，NaN，NaN]？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-1-2-3-map-parseint-returns-1-nan-nan-67202bb472be?source=collection_archive---------2-----------------------#2022-11-27">https://javascript.plainenglish.io/why-1-2-3-map-parseint-returns-1-nan-nan-67202bb472be?source=collection_archive---------2-----------------------#2022-11-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b2d958b3b728a9d90f8eb11732a361bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o6BHtqSDuRKJ0iP3OQEwIA.png"/></div></div></figure><h1 id="dbb1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">问题</h1><pre class="kt ku kv kw gt kx ky kz bn la lb bi"><span id="2bf1" class="lc jw in ky b be ld le l lf lg"> ['1', '2', '3'].map(parseInt)</span></pre><p id="bcb2" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">产量是多少？可能有人会想出答案:<strong class="lj io">【1，2，3】</strong>，其实是个错误答案。让我们在控制台打印输出下查看正确答案:</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/eaa85fbf4799318dfdf4e5e481f38b2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*Wt3qvmTQ6dpvolgUCnDqmw.png"/></div></figure><p id="0232" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">它其实是:<code class="fe mg mh mi ky b">[1, NaN, NaN],</code>有些人很好奇为什么它输出的是<code class="fe mg mh mi ky b">[1, NaN, NaN]</code>而不是<code class="fe mg mh mi ky b">[1, 2, 3]</code>。</p><h1 id="67b1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">让我们来看看这个问题</h1><pre class="kt ku kv kw gt kx ky kz bn la lb bi"><span id="be90" class="lc jw in ky b be ld le l lf lg">['1', '2', '3'].map(parseInt)</span></pre><p id="6af2" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">你可能对<code class="fe mg mh mi ky b">map(parseInt)</code>有很多疑问，为什么要这样编码？实际上，这是速记，完整的代码如下</p><pre class="kt ku kv kw gt kx ky kz bn la lb bi"><span id="b7c0" class="lc jw in ky b be ld le l lf lg">['1', '2', '3'].map((v, i, arr) =&gt; parseInt(v, i))</span></pre><p id="fdb4" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated"><code class="fe mg mh mi ky b">map():</code>它是一个回调函数，有三个参数:当前值<code class="fe mg mh mi ky b">(v)</code>，下标<code class="fe mg mh mi ky b">(i)</code>，原数组<code class="fe mg mh mi ky b">(arr)</code>。执行顺序:<code class="fe mg mh mi ky b">[‘1’, ‘2’, ‘3’].map((v, i, arr) =&gt; parseInt(v, i))</code>，按顺序输出</p><ul class=""><li id="92de" class="mj mk in lj b lk ll lo lp ls ml lw mm ma mn me mo mp mq mr bi translated"><code class="fe mg mh mi ky b">parseInt('1', 0) // 1</code></li><li id="8aea" class="mj mk in lj b lk ms lo mt ls mu lw mv ma mw me mo mp mq mr bi translated"><code class="fe mg mh mi ky b">parseInt('2', 1) // NaN</code></li><li id="8688" class="mj mk in lj b lk ms lo mt ls mu lw mv ma mw me mo mp mq mr bi translated"><code class="fe mg mh mi ky b">parseInt('3', 2) // NaN</code></li></ul><p id="6cb4" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">所以问题来了<code class="fe mg mh mi ky b">pareInt</code>，为什么会产生这些答案？</p><h1 id="2c31" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak"> parseInt </strong></h1><p id="4a78" class="pw-post-body-paragraph lh li in lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ig bi translated">有人疑惑为什么第一个输出是<code class="fe mg mh mi ky b">1</code>，第二第三个是<code class="fe mg mh mi ky b">NaN</code>，那就正式进入今天的话题吧。</p><h2 id="5879" class="nc jw in bd jx nd ne dn kb nf ng dp kf ls nh ni kj lw nj nk kn ma nl nm kr nn bi translated">parseInt是什么？</h2><blockquote class="no np nq"><p id="fee4" class="lh li nr lj b lk ll lm ln lo lp lq lr ns lt lu lv nt lx ly lz nu mb mc md me ig bi translated"><code class="fe mg mh mi ky b">parseInt()</code>函数解析字符串参数并返回指定<a class="ae nv" href="https://en.wikipedia.org/wiki/Radix" rel="noopener ugc nofollow" target="_blank">基数</a>(数学数字系统中的基数)的整数。</p><p id="89f3" class="lh li nr lj b lk ll lm ln lo lp lq lr ns lt lu lv nt lx ly lz nu mb mc md me ig bi translated">基数:介于<code class="fe mg mh mi ky b">2</code>和<code class="fe mg mh mi ky b">36</code>之间的整数，代表<code class="fe mg mh mi ky b">string</code>的<em class="in">基数</em>(数学数系中的基数)</p><p id="9014" class="lh li nr lj b lk ll lm ln lo lp lq lr ns lt lu lv nt lx ly lz nu mb mc md me ig bi translated">链接:<a class="ae nv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt" rel="noopener ugc nofollow" target="_blank">developer.mozilla.org</a></p></blockquote><p id="4669" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">所以第二个参数<code class="fe mg mh mi ky b">parseInt</code>是数学数制，但它也表示系统中2到36之间的数。</p><p id="b1cd" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated"><strong class="lj io">为什么</strong> <code class="fe mg mh mi ky b"><strong class="lj io">parseInt(‘1’, 0) </strong></code> <strong class="lj io">等于1？</strong></p><p id="1107" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated"><code class="fe mg mh mi ky b">parseInt</code>上MDN截图</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/f2ed4174af874dc3dc816f55bc653fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZr_Luo7KCujT1mqlcV6Hg.png"/></div></div></figure><p id="8f73" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">所以0会算作十进制，所以<code class="fe mg mh mi ky b">parseInt(‘1’, 0)</code>等于1</p><p id="e5aa" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated"><strong class="lj io">为什么</strong> <code class="fe mg mh mi ky b"><strong class="lj io">parseInt(‘2’, 1) </strong></code> <strong class="lj io">等于南？</strong></p><p id="34e9" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">parseInt的第一个参数字符串小于第二个参数radix</p><p id="a41d" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated"><strong class="lj io">为什么</strong> <code class="fe mg mh mi ky b"><strong class="lj io">parseInt(‘3’, 2)</strong></code> <strong class="lj io">等于南？</strong></p><p id="aa23" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">原因同上。</p><h1 id="15a1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">关于parseInt的更多信息</h1><p id="53bd" class="pw-post-body-paragraph lh li in lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ig bi translated">根据推论，我们给数组添加更多的字符串，我们来看看:</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/77cbd08087789173fd4b2b3edabf53ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBAt_5VsF0CDtbGjhFrc9A.png"/></div></div></figure><p id="6c1e" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">数组<code class="fe mg mh mi ky b">‘2’,…’9</code>之间对应的下标值是<code class="fe mg mh mi ky b">1~8</code>，第一个参数大于第二个，所以都是<code class="fe mg mh mi ky b">NaN</code></p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ny"><img src="../Images/4d9dd809a99e4e47057a5c9f47aa587d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYRS_o57FKAXQQ7qrT8BDw.png"/></div></div></figure><p id="7539" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">那为什么在第一个参数为‘10’，系统为9的情况下，<code class="fe mg mh mi ky b">parseInt(‘10’, 9)</code>输出的是<code class="fe mg mh mi ky b">9</code>而不是NaN。</p><p id="19d5" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">根据前面对系统的描述，9系统代表的实数在0到8之间。第一个参数不管传入的是字符串还是数字都将被逐个解析成字符串，所以<code class="fe mg mh mi ky b">‘1’</code>和<code class="fe mg mh mi ky b">‘0’</code>在9系统中属于0到8的实数。</p><p id="8247" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">计算如下:</p><pre class="kt ku kv kw gt kx ky kz bn la lb bi"><span id="0e6f" class="lc jw in ky b be ld le l lf lg">parseInt('10', 9) = 0 * Math.pow(9, 0) + 1 * Math.pow(9, 1) = 9<br/>parseInt('11', 10) = 1* Math.pow(10, 0) + 1 * Math.pow(10, 1) = 11<br/>parseInt('12', 11) = 2* Math.pow(11, 0) + 1* Math.pow(11, 1) = 13<br/>parseInt('13', 12) = 3* Math.pow(12, 0) + 1* Math.pow(12, 1) = 15<br/>parseInt('14', 13) = 4* Math.pow(13, 0) + 1* Math.pow(13, 1) = 17<br/>parseInt('15', 14) = 5* Math.pow(14, 0) + 1* Math.pow(14, 1) = 19</span></pre><p id="3210" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated">让我们再多尝试几次，</p><pre class="kt ku kv kw gt kx ky kz bn la lb bi"><span id="6b57" class="lc jw in ky b be ld le l lf lg">parseInt('4123', 5); // 538<br/>4*Math.pow(5, 3) + 1*Math.pow(5, 2) + 2*Math.pow(5, 1) + 3*Math.pow(5, 0) // 538<br/><br/>parseInt('764', 8); // 500<br/>7*Math.pow(8, 2) + 6*Math.pow(8, 1) + 4*Math.pow(8, 0); // 500</span></pre><h1 id="af74" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">关于parseInt的更多信息</h1><p id="4f01" class="pw-post-body-paragraph lh li in lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ig bi translated"><code class="fe mg mh mi ky b">parseInt</code>第一个参数串的实数一定要小于系统号吗？</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/6c3d726eee33d1ad0a18514e0b1a5baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*bRrmFErOX_VYpicOLa8RXQ.png"/></div></figure><ol class=""><li id="2640" class="mj mk in lj b lk ll lo lp ls ml lw mm ma mn me oa mp mq mr bi translated">前两个解析是正常的。为什么第三个<code class="fe mg mh mi ky b">parseInt(‘125’, 5) = 7</code>的输出。我发现它自动删除了最后一个<code class="fe mg mh mi ky b">5</code>，输出其实是<code class="fe mg mh mi ky b">parseInt(‘12’, 5)</code>，所以输出等于<code class="fe mg mh mi ky b">7</code>。</li><li id="ba61" class="mj mk in lj b lk ms lo mt ls mu lw mv ma mw me oa mp mq mr bi translated">为什么第四个输出是<code class="fe mg mh mi ky b">NaN</code>，因为参数串以<code class="fe mg mh mi ky b">5</code>开头，不符合系统所属的编号，所以直接返回<code class="fe mg mh mi ky b">NaN</code>。</li><li id="939a" class="mj mk in lj b lk ms lo mt ls mu lw mv ma mw me oa mp mq mr bi translated">最后一个直接删除<code class="fe mg mh mi ky b">55</code>，最后解析成<code class="fe mg mh mi ky b">parseInt(‘1’, 5)</code>，输出<code class="fe mg mh mi ky b">1</code>。</li></ol><h1 id="42dd" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><ol class=""><li id="335c" class="mj mk in lj b lk mx lo my ls ob lw oc ma od me oa mp mq mr bi translated">如果第一个参数串的第一个值大于或等于第二个参数基数，则直接返回<code class="fe mg mh mi ky b">NaN</code></li><li id="c082" class="mj mk in lj b lk ms lo mt ls mu lw mv ma mw me oa mp mq mr bi translated">如果第一个参数字符串的第一个值满足条件，而其他值不满足条件，那么不满足条件的值最后会被忽略，然后进行计算。</li></ol><h1 id="1cd5" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak">额外锻炼</strong></h1><pre class="kt ku kv kw gt kx ky kz bn la lb bi"><span id="ee3d" class="lc jw in ky b be ld le l lf lg">//what's the output of two line code<br/>['10', '10', '10', '10'].map(parseInt); <br/>['1', '2', '3'].map(Number)</span></pre><h1 id="1833" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">最后</h1><p id="4c64" class="pw-post-body-paragraph lh li in lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ig bi translated"><strong class="lj io">感谢阅读。</strong>期待<strong class="lj io"> </strong>期待您的关注和阅读更多高质量的文章。</p><div class="oe of gp gr og oh"><a rel="noopener  ugc nofollow" target="_blank" href="/which-loop-traversal-is-the-fastest-in-javascript-c196311337d6"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd io gy z fp om fr fs on fu fw im bi translated">JavaScript中哪个循环遍历最快？</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">JavaScript数组遍历方法的比较</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oq l"><div class="or l os ot ou oq ov jt oh"/></div></div></a></div><div class="oe of gp gr og oh"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-how-to-modify-the-original-array-in-foreach-fd36a08c6ce1"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd io gy z fp om fr fs on fu fw im bi translated">面试官:如何在forEach()中修改原数组</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">foreach的使用提示</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oq l"><div class="ow l os ot ou oq ov jt oh"/></div></div></a></div><div class="oe of gp gr og oh"><a href="https://levelup.gitconnected.com/the-story-of-clip-path-and-endangered-animals-in-css-8af987927fc6" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd io gy z fp om fr fs on fu fw im bi translated">CSS中剪辑路径和濒危动物的故事</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">使用CSS剪辑路径创建奇妙的动画</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oq l"><div class="ox l os ot ou oq ov jt oh"/></div></div></a></div><p id="3a89" class="pw-post-body-paragraph lh li in lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ig bi translated"><em class="nr">更多内容看</em> <a class="ae nv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lj io"> <em class="nr">说白了就是</em> </strong> </a> <em class="nr">。报名参加我们的</em> <a class="ae nv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lj io"> <em class="nr">免费周报</em> </strong> </a> <em class="nr">。关注我们关于</em> <a class="ae nv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="lj io"> <em class="nr">推特</em> </strong> </a>，<a class="ae nv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="lj io"> <em class="nr">领英</em> </strong> </a> <em class="nr">，</em><a class="ae nv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lj io"><em class="nr">YouTube</em></strong></a><em class="nr">，以及</em> <a class="ae nv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lj io"> <em class="nr">不和</em> </strong> </a> <em class="nr">。对增长黑客感兴趣？检查</em> <a class="ae nv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="lj io"> <em class="nr">电路</em> </strong> </a> <em class="nr">。</em></p></div></div>    
</body>
</html>