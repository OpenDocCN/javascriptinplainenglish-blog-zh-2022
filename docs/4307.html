<html>
<head>
<title>Patterns Of JavaScript: Factory Method Illustrated By Tower Defense Spawner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript的模式:由Tower Defense Spawner演示的工厂方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/world-of-javascript-factory-method-explained-by-tower-defense-spawner-402c69426650?source=collection_archive---------8-----------------------#2022-11-18">https://javascript.plainenglish.io/world-of-javascript-factory-method-explained-by-tower-defense-spawner-402c69426650?source=collection_archive---------8-----------------------#2022-11-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4c44" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用塔防的基础知识解释工厂的方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/931834e41c2e3cfb916f782243cc4771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nuL-BUrX4EnGr67pfG2RTA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><p id="a32f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">工厂方法</em> </strong>允许你根据代码(客户端)任何其他部分的指令创建对象。客户端可能不总是能够决定实例化几个候选对象中的哪一个。</p><p id="4556" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以将模式分为三类:创造型、结构型和行为型。这种模式被归类为创造性的。你会明白为什么。</p><p id="d1a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">工厂方法允许客户端委托对象创建，同时保持对实例化对象类型的控制。通过调用与<code class="fe lt lu lv lw b">new</code>操作符一起使用的构造函数来创建对象。</p><h1 id="40cf" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">何时&amp;为什么使用工厂方法</h1><p id="8556" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">可扩展性是工厂方法的关键。</p><p id="f5b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">应用程序开发人员使用工厂方法来管理、维护或操作具有许多共同点的不同对象的集合(例如，方法和属性)。设想一个包含XML文档、Pdf文档和RTF文档的文档集合。它们可以被打开、保存、重命名、删除等等。</p><p id="4c7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">因此你可以把他们的创造抽象成一种通用的方法。</em> </strong></p><p id="f53b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你会发现一个游戏化的例子，具有更简单的公共属性。我选择了一个怪物产卵器的例子，但稍后会有更多的例子。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="d64c" class="lx ly iq bd lz ma nb mc md me nc mg mh jw nd jx mj jz ne ka ml kc nf kd mn mo bi translated">模式概述</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/b26ef16922e6919e54e76aad425b46f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GGKEq85qKbpl5TRUydUMWQ.png"/></div></div></figure><p id="17ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了匹配模式，你需要<em class="ls"> 3个编码对象</em>:</p><ul class=""><li id="1419" class="nh ni iq ky b kz la lc ld lf nj lj nk ln nl lr nm nn no np bi translated"><strong class="ky ir"> <em class="ls">制单人:</em> </strong>示例中编码:工厂。创建新的<code class="fe lt lu lv lw b">monster (products)</code>的<code class="fe lt lu lv lw b">factory</code>对象。它需要实现一个返回新创建的<code class="fe lt lu lv lw b">monster (product)</code>的<code class="fe lt lu lv lw b">FactoryMethod</code>。</li><li id="47db" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated"><strong class="ky ir"><em class="ls">abstract product:</em></strong>由于JavaScript没有抽象的工作方式，所以你无法在JavaScript中创建抽象对象。在任何其他语言中，它会为产品声明一个接口。使用TypesScript启用接口。</li><li id="ebeb" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated"><strong class="ky ir"> <em class="ls">产品:<code class="fe lt lu lv lw b">Monster</code>下例中的</em> </strong>和正在创建的产品。这种模式使所有产品都支持相同的接口(属性和方法)。</li></ul></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="7e2f" class="lx ly iq bd lz ma nb mc md me nc mg mh jw nd jx mj jz ne ka ml kc nf kd mn mo bi translated">示例1:怪物工厂(4种类型)</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/aaad9fb82067aa3e62ec1db0f8ecc0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qH3NtWkHNzXkEsiXpSQQtA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><p id="891b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本例使用<code class="fe lt lu lv lw b">MonsterFactory</code>创建4种类型的<code class="fe lt lu lv lw b">monsters</code>。</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="c23e" class="oa ly iq lw b be ob oc l od oe">const MonsterFactory = function () {<br/>   // ---snip---<br/>};</span></pre><p id="9515" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每种怪物都有不同的生命值。<em class="ls">工厂</em>对象的<code class="fe lt lu lv lw b">createMonster()</code>方法就是<em class="ls">工厂方法</em>。</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="996d" class="oa ly iq lw b be ob oc l od oe">const MonsterFactory = function () {<br/>    this.createMonster = function (type) {<br/>        let monster;<br/><br/>        switch (type) {<br/>            case 'common':<br/>                monster = new common();<br/>                break;<br/>            case 'rare':<br/>                monster = new rare();<br/>                break;<br/>            case 'elite':<br/>                monster = new elite();<br/>                break;<br/>            case 'boss':<br/>                monster = new boss();<br/>                break;<br/>        }<br/>        // ---snip---<br/><br/>        return monster;<br/>    }<br/>};</span></pre><p id="22fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">必须定义4种怪物类型，以便稍后以不同的方式调用它们，并单独编辑它们(当需要更改时):</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="7ec9" class="oa ly iq lw b be ob oc l od oe">const common = function () {<br/>    this.hitPoints = "25";<br/>};<br/><br/>const rare = function () {<br/>    this.hitPoints = "80";<br/>};<br/><br/>const elite = function () {<br/>    this.hitPoints = "190";<br/>};<br/><br/>const boss = function () {<br/>    this.hitPoints = "970";<br/>};</span></pre><p id="f6af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">客户端通过向工厂方法传递一个类型参数来告诉工厂方法要创建什么类型的怪物。</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="e2e9" class="oa ly iq lw b be ob oc l od oe">jafactory.createMonster("common")</span></pre><p id="4fab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记住Javascript不支持抽象的类或接口。<em class="ls">因此AbstractProduct(来自上图)没有实现。</em></p><p id="058e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们必须确保所有的怪物都有相同的属性和方法。</p><p id="efff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总共将创建四种不同类型的怪物，它们都存储在一个数组中。</p><p id="e278" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您现在已经可以调用它并将它们打印到控制台:</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="3838" class="oa ly iq lw b be ob oc l od oe">function run() {<br/><br/>    var monsters = [];<br/>    var factory = new MonsterFactory();<br/><br/>    monsters.push(factory.createMonster("common"));<br/>    monsters.push(factory.createMonster("rare"));<br/>    monsters.push(factory.createMonster("elite"));<br/>    monsters.push(factory.createMonster("boss"));<br/><br/>    console.log(monsters);<br/>}<br/><br/>run();</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/be85aa831d2b8c9c4e0ab7542dff6334.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/format:webp/1*1RO5gEWk5tOojf7i_w2qRA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Console Output Example 1 Part 1</figcaption></figure><p id="bd5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果我们让他们自己说，那会更酷。您可以通过添加调整<code class="fe lt lu lv lw b">MonsterFactory</code>来实现这一点:</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="5a90" class="oa ly iq lw b be ob oc l od oe">const MonsterFactory = function () {<br/>    this.createMonster = function (type) {<br/>        let monster;<br/><br/>        switch (type) {<br/>            case 'common':<br/>                monster = new common();<br/>                break;<br/>            case 'rare':<br/>                monster = new rare();<br/>                break;<br/>            case 'elite':<br/>                monster = new elite();<br/>                break;<br/>            case 'boss':<br/>                monster = new boss();<br/>                break;<br/>        }<br/><br/>        // add here<br/>        monster.type = type;<br/><br/>        monster.info = function () {<br/>            console.log(`Hi I am a ${this.type} monster.`);<br/>            console.log(`I have ${this.hitPoints} hitpoints.`);<br/>        }<br/>        // until here<br/><br/>        return monster;<br/>    }<br/>};</span></pre><p id="285d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以及<code class="fe lt lu lv lw b">run()</code>功能:</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="4eac" class="oa ly iq lw b be ob oc l od oe">function run() {<br/><br/>    var monsters = [];<br/>    var factory = new MonsterFactory();<br/><br/>    monsters.push(factory.createMonster("common"));<br/>    monsters.push(factory.createMonster("rare"));<br/>    monsters.push(factory.createMonster("elite"));<br/>    monsters.push(factory.createMonster("boss"));<br/><br/>    // add here<br/>    for (var i = 0, len = monsters.length; i &lt; len; i++) {<br/>        monsters[i].info();<br/>    }<br/>    // until here<br/>}</span></pre><p id="ed1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将是你的输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/1c966a9b40f1d4c37959fdd17d555212.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*uq9O5sA26nMR4MPcAL4sAg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Console Output Example 1 Part 2</figcaption></figure><p id="4f25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">整个示例的代码:</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="a21c" class="oa ly iq lw b be ob oc l od oe">const MonsterFactory = function () {<br/>    this.createMonster = function (type) {<br/>        let monster;<br/><br/>        switch (type) {<br/>            case 'common':<br/>                monster = new common();<br/>                break;<br/>            case 'rare':<br/>                monster = new rare();<br/>                break;<br/>            case 'elite':<br/>                monster = new elite();<br/>                break;<br/>            case 'boss':<br/>                monster = new boss();<br/>                break;<br/>        }<br/><br/>        monster.type = type;<br/><br/>        monster.info = function () {<br/>            console.log(`Hi I am a ${this.type} monster.`);<br/>            console.log(`I have ${this.hitPoints} hitpoints.`);<br/>        }<br/><br/>        return monster;<br/>    }<br/>};<br/><br/>const common = function () {<br/>    this.hitPoints = "25";<br/>};<br/><br/>const rare = function () {<br/>    this.hitPoints = "80";<br/>};<br/><br/>const elite = function () {<br/>    this.hitPoints = "190";<br/>};<br/><br/>const boss = function () {<br/>    this.hitPoints = "970";<br/>};<br/><br/>function run() {<br/><br/>    var monsters = [];<br/>    var factory = new MonsterFactory();<br/><br/>    monsters.push(factory.createMonster("common"));<br/>    monsters.push(factory.createMonster("rare"));<br/>    monsters.push(factory.createMonster("elite"));<br/>    monsters.push(factory.createMonster("boss"));<br/><br/>    for (var i = 0, len = monsters.length; i &lt; len; i++) {<br/>        monsters[i].info();<br/>    }<br/>}<br/><br/>run();</span></pre></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><h1 id="5842" class="lx ly iq bd lz ma nb mc md me nc mg mh jw nd jx mj jz ne ka ml kc nf kd mn mo bi translated">例子2:塔防的怪物工厂</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/25a23f8605969a46a2e65d662011eb56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jtdinbWu0M_Vl0fz"/></div></div></figure><blockquote class="oi oj ok"><p id="6fd6" class="kw kx ls ky b kz la jr lb lc ld ju le ol lg lh li om lk ll lm on lo lp lq lr ij bi translated"><strong class="ky ir">塔防简单来说:</strong>用弹丸对敌人射击。一个关卡有一条行走路线，敌人从A走到b。你可以在这条路线附近放置射击塔，让行走中的敌人的生命值为零，这样他们就会死亡。然而，如果他们达到B，你失去生命，直到你没有更多，游戏结束。敌人蜂拥而至。</p></blockquote><p id="168a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在您将看到这种模式使开发变得多么容易:</p><ul class=""><li id="4f36" class="nh ni iq ky b kz la lc ld lf nj lj nk ln nl lr nm nn no np bi translated">用几行代码产生多个敌人</li><li id="3228" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated">快速修改您的代码以产生不同的结果</li><li id="ec95" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated">甚至更容易添加新的敌人类型到你的公鸡</li><li id="bf5b" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated">很容易创建多个产卵行为，并在不同级别之间切换</li></ul><p id="586c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个例子的目标是每秒产生一个怪物，最多10个怪物作为一个单独的波:</p><ul class=""><li id="8d8d" class="nh ni iq ky b kz la lc ld lf nj lj nk ln nl lr nm nn no np bi translated">7常见</li><li id="73ed" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated">1精英(怪物#6)</li><li id="23fb" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated">1罕见(怪物#8)</li><li id="933b" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated">1个老板(怪物10号)</li></ul><blockquote class="oi oj ok"><p id="8417" class="kw kx ls ky b kz la jr lb lc ld ju le ol lg lh li om lk ll lm on lo lp lq lr ij bi translated">产卵算法是坏的，是出于教育目的:)</p></blockquote><p id="580e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了这里和那里的一些变化外，代码几乎是一样的。我将它们标记为:</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="3ab9" class="oa ly iq lw b be ob oc l od oe">// begin of change<br/>changes<br/>changes<br/>changes<br/>// end of change</span></pre><h2 id="7d5c" class="oo ly iq bd lz op oq dn md or os dp mh lf ot ou mj lj ov ow ml ln ox oy mn oz bi translated">怪物工厂</h2><p id="f234" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">我没有用<code class="fe lt lu lv lw b">monster.info()</code>，而是用了<code class="fe lt lu lv lw b">monster.spawn()</code>，每个怪物都会说出自己的类型和生命值。</p><p id="19f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于一个真正的应用程序，你可以在这里建立一些初始化例程，或者，对于一些独特的怪物，一些初始化动作。</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="5980" class="oa ly iq lw b be ob oc l od oe">const MonsterFactory = function () {<br/>    this.createMonster = function (type) {<br/>        let monster;<br/><br/>        switch (type) {<br/>            case 'common':<br/>                monster = new common();<br/>                break;<br/>            case 'rare':<br/>                monster = new rare();<br/>                break;<br/>            case 'elite':<br/>                monster = new elite();<br/>                break;<br/>            case 'boss':<br/>                monster = new boss();<br/>                break;<br/>        }<br/><br/>        monster.type = type;<br/><br/>        // begin of change<br/>        monster.spawn = function () {<br/>            console.log(`A ${this.type} monster with ${this.hitPoints} HP has been spawned.`);<br/>        }<br/>        // end of change<br/><br/>        return monster;<br/>    }<br/>};</span></pre><h2 id="994f" class="oo ly iq bd lz op oq dn md or os dp mh lf ot ou mj lj ov ow ml ln ox oy mn oz bi translated">产品，又名怪物(不变)</h2><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="78ff" class="oa ly iq lw b be ob oc l od oe">const common = function () {<br/>    this.hitPoints = "25";<br/>};<br/><br/>const rare = function () {<br/>    this.hitPoints = "80";<br/>};<br/><br/>const elite = function () {<br/>    this.hitPoints = "190";<br/>};<br/><br/>const boss = function () {<br/>    this.hitPoints = "970";<br/>};</span></pre><h2 id="500b" class="oo ly iq bd lz op oq dn md or os dp mh lf ot ou mj lj ov ow ml ln ox oy mn oz bi translated">客户</h2><p id="6a42" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">客户端需要一些必要的更新来产生10个怪物。</p><p id="cd73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您使用一个间隔持续时间为1000毫秒的<code class="fe lt lu lv lw b">masterInterval</code>。将它保存到一个变量中可以让你稍后<code class="fe lt lu lv lw b">clearInterval()</code>。否则，它将永远运行下去。</p><pre class="kg kh ki kj gt nw lw nx bn ny nz bi"><span id="cf15" class="oa ly iq lw b be ob oc l od oe">function run() {<br/>    var factory = new MonsterFactory();<br/><br/>    // begin of change<br/>    let counter = 0;<br/>    const masterInterval = setInterval(() =&gt; {<br/><br/>        if (counter === 9) {<br/>            factory.createMonster("boss").spawn();<br/>        }<br/>        else if (counter === 7) {<br/>            factory.createMonster("rare").spawn()<br/>        }<br/>        else if (counter === 5) {<br/>            factory.createMonster("elite").spawn()<br/>        }<br/>        else if (counter &gt;= 0) {<br/>            factory.createMonster("common").spawn()<br/>        }<br/>        counter++;<br/>    }, 1000)<br/><br/>    setTimeout(() =&gt; {<br/>        clearInterval(masterInterval)<br/>    }, 11000)<br/>    // end of change<br/>}<br/><br/>run();</span></pre><p id="63ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在11000毫秒的<code class="fe lt lu lv lw b">setTimeout()</code>中，你可以确保产生10个怪物(7个普通，1个精英，1个稀有，1个boss)。在超时内，你清除间隔，所以产卵停止，你的波发出。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/0fdbc163bf97592f001ca113b6f4cb44.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*820AvjsNiKcadlJAbC31FQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Console Output of Example 2.</figcaption></figure><p id="5724" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每秒都会出现一条新的<code class="fe lt lu lv lw b">console.log()</code>语句，通知您已经生成了什么。</p><p id="9976" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://arnoldcodeacademy.ck.page/26-web-dev-cheat-sheets" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">节省自己大量的时间，专注于非常重要的主题。</em> </strong> </a></p><p id="f5fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">说白了就是io </em> </strong> </a> <em class="ls">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">推特</em> </strong> </a>，<a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">领英</em> </strong> </a> <em class="ls">，</em><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">YouTube</em></strong></a><em class="ls"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">不和</em> </strong> </a> <em class="ls">。对增长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">电路</em> </strong> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>