<html>
<head>
<title>How to Fetch Data After User Input With react-query</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在用户用react-query输入后获取数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-fetch-data-after-user-input-with-react-query-b083d51b5d2d?source=collection_archive---------3-----------------------#2022-10-14">https://javascript.plainenglish.io/how-to-fetch-data-after-user-input-with-react-query-b083d51b5d2d?source=collection_archive---------3-----------------------#2022-10-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a910274cfee5f1cae9f5e5ede5d9bd83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tjpymk8AUxRx3FxKMFgZaw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by Aditya Rathod on Unsplash</figcaption></figure><p id="096e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">react-query是react最广泛使用的查询包，它的大多数例子都描述了如何在组件挂载后立即运行查询，但是如果您想等到某个操作发生后再运行查询，该怎么办呢？</p><h1 id="7618" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">等到动作/输入发生后，再获取反应查询数据</h1><p id="6d9f" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">在这个例子中，我们将只在用户在输入框中输入文本时获取数据，例如在搜索自动完成的情况下。</p><p id="b2e2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">第一步:调用useQuery时，将“enabled”选项设置为false。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="a3d3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在上面的代码中，inputValue是存储用户提交的文本的状态变量。我们将它传递给useQuery的原因是让react-query知道查询响应数据依赖于该值(换句话说:该变量的不同值将返回不同的结果。这暗示了react-query如何缓存响应。)</p><p id="7dd9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">步骤2:使用“refetch”来实际执行查询。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="ff1b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">步骤3:观察返回数据的变化</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="85af" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面的useEffect()钩子监视返回的数据*和* is retrieving变量。否则，如果返回的数据恰好是相同的(例如，对于一个相似的搜索字符串)，钩子将不触发。使用is retrieving作为依赖变量之一可以确保每次重新运行查询时都会触发useEffect()挂钩。</p><p id="fbf2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mg">更多内容请看</em><a class="ae mh" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="mg">plain English . io</em></strong></a><em class="mg">。报名参加我们的</em> <a class="ae mh" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="mg">免费周报</em> </strong> </a> <em class="mg">。关注我们关于</em><a class="ae mh" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="mg">Twitter</em></strong></a><a class="ae mh" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="mg">LinkedIn</em></strong></a><em class="mg"/><a class="ae mh" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="mg">YouTube</em></strong></a><em class="mg"/><a class="ae mh" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="mg">不和</em> </strong> </a> <em class="mg">。对增长黑客感兴趣？检查</em> <a class="ae mh" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="mg">电路</em> </strong> </a> <em class="mg">。</em></p></div></div>    
</body>
</html>