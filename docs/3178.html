<html>
<head>
<title>Understand JavaScript Fetch Response Types</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解JavaScript获取响应类型</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-javascript-fetch-response-types-678ca8204479?source=collection_archive---------5-----------------------#2022-08-06">https://javascript.plainenglish.io/understanding-javascript-fetch-response-types-678ca8204479?source=collection_archive---------5-----------------------#2022-08-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d755" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在这篇文章中，我将带你从一个获取API调用中获得不同类型的响应</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/881cf136f796b98df78766ff5c9bbf36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iYh4kYorFCDliwhTc6VMDg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@jasonstrull?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Jason Strull</a> on <a class="ae kv" href="https://unsplash.com/s/photos/thinking?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2685" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将试着引导您从一个Fetch API调用中获得不同类型的响应——这取决于您的需求是否需要JSON、文本、状态等。正如我们所知，每个API调用都有一个响应对象，它可以包含不同类型的响应对象，下面是一些最常用的响应类型:</p><h2 id="04c8" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">1.response.text()</h2><p id="ffcd" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是当您从服务器获取一行文本时将使用的语法。例如，让我们发送一个包含一些文本的非常简单的响应:</p><p id="2832" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mq mr ms mt b">res.send('Succefully Logged in!')</code></p><p id="888b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要访问此回复，您将使用:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="79a9" class="ls lt iq mt b gy my mz l na nb">const resp = await response.text();<br/>// resp = <!-- -->'Succefully Logged in!'<br/>// Reads the response body as text</span></pre><h2 id="221c" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">2.response.json()</h2><p id="06ba" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是最常用的响应类型，因为它将从任何后端API获得JSON响应。让我们假设从服务器我们想要发送用户名作为JSON的响应:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="3c9d" class="ls lt iq mt b gy my mz l na nb">res.json({ username: 'Jane Doe' })</span></pre><p id="2ca2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保在获取JSON时预先考虑<code class="fe mq mr ms mt b">await</code>,因为它将返回一个承诺。要在前端访问它，我们可以使用:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="1d28" class="ls lt iq mt b gy my mz l na nb">const data = await response.json();<br/>//data = <!-- -->{ username: 'Jane Doe' }</span></pre><h2 id="e5ba" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">3.response.status()</h2><p id="8a19" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">每个响应都有一个HTTP状态，这个特定的类型将为您提供该状态，然后根据状态，您可以像下面这样改变您的语句:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="8dd1" class="ls lt iq mt b gy my mz l na nb">if(response.status() === 200){<br/>  // Do action on success<br/>} else if (response.status() === 400) {<br/>  // Show failure state with 400<br/>} else {<br/>  // Generic error<br/>}</span></pre><h2 id="acff" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">4.response.headers()</h2><p id="6147" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在某些情况下，您可能需要来自标题的数据，在这些情况下，您可以使用此类型:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="f052" class="ls lt iq mt b gy my mz l na nb">if(response.headers.get('Content-Type') === 'application/json'){<br/>   // Do something<br/>}</span></pre><p id="22dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这个语法中，您可以访问响应中出现的各种其他头值。</p><h1 id="20ea" class="nc lt iq bd lu nd ne nf lx ng nh ni ma jw nj jx md jz nk ka mg kc nl kd mj nm bi translated">结论</h1><p id="5f36" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">对于blobs、图像等，您可以获得更多类型的响应。但是本文主要关注那些常用的。我希望你喜欢读它。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="f39f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你有用。请在评论中让我知道你的想法。考虑成为中级<a class="ae kv" href="https://utkarshabakshi.medium.com/membership" rel="noopener">会员</a>，继续阅读我所有的优质文章以及数以千计的其他故事。</p><p id="3730" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nu">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">说白了就是</em> </strong> </a> <em class="nu">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">免费周报</em> </strong> </a> <em class="nu">。关注我们关于</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">推特</em> </strong> </a>，<a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">领英</em> </strong> </a> <em class="nu">，以及</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">不和</em> </strong> </a> <em class="nu">。</em></p></div></div>    
</body>
</html>