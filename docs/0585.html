<html>
<head>
<title>How to Fix Blurry Elements that Have “position: fixed”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复具有“位置:已修复”的模糊元素</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-fix-blurry-elements-that-have-position-fixed-934c707b4e19?source=collection_archive---------17-----------------------#2022-02-01">https://javascript.plainenglish.io/how-to-fix-blurry-elements-that-have-position-fixed-934c707b4e19?source=collection_archive---------17-----------------------#2022-02-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="76cd" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">位置固定时，修复模糊元素的解决方案。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7266bed5e8d762b0b8ea4a4f9f2b251a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jyaU5arvOJEKVF_r"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@timaesthetic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tim Rüßmann</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="390e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我最近遇到了一个有趣的问题，要找到解决方案需要做大量的实验。我有一个模态，它在页面上的位置是“固定的”但是，无论何时打开，莫代尔看起来都很模糊。下面是我的意思的一个例子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lp"><img src="../Images/078bd354e45a5632b87f1890fe1e2215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fZx-7YsWCoLgkImsStDyGA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">An example of the modal appearing blurry</figcaption></figure><p id="d300" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">模态本身有一个绝对的位置，在一个有固定位置的黑暗背景上居中。下面是SCSS:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lq lr l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The SCSS for the modal and its backdrop. Some irrelevant styles removed for succinctness.</figcaption></figure><p id="e6d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我在奇数比例的SVG上遇到过类似的模糊问题，所以我认为要么是模型的宽度/高度，要么是它的位置。我做了研究和实验来确定。</p><p id="50d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里应该注意的是，如果给模型一个<strong class="kv io">相对</strong>位置，给模型面纱一个填充，这整个问题都可以避免。然而，这不会使模态完全集中在屏幕上，所以我想尽可能避免这种解决方案。然而，测试证实了我的怀疑，模糊性与模态的位置有关。</p><p id="011d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您现在还没有猜到，问题是模态以一个奇数的非整数值为中心。检查元素表明这是真的:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/4b09b6a16afe37bee3b10aa4c4f5dd2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*4ElcbfrVbUNKB7gE8lQ0Qw.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The computed styles for the modal</figcaption></figure><p id="f936" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以在这些计算值中看到<code class="fe lt lu lv lw b">height</code>和<code class="fe lt lu lv lw b">top</code>都是非整数值。因此，元素试图在像素之间捕捉，反走样开始，元素变得模糊。理论上，修正这些值应该可以解决抗锯齿问题。</p><p id="9a76" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">经过实验，我确定固定高度足以解决反走样问题，并且<code class="fe lt lu lv lw b">top</code>值似乎对这个问题没有影响。</p><h1 id="d030" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">解决办法</h1><p id="7a57" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">因此，我的解决方案是，一旦打开模式，动态地将高度调整到最近的(偶数)像素。下面是执行此操作的代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="d4d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的函数中，我们首先获取元素本身，使用<code class="fe lt lu lv lw b">getBoundingClientRect()</code>函数获得计算的高度，然后将该值向上舍入到最接近的偶数。元件的<code class="fe lt lu lv lw b">height</code>和<code class="fe lt lu lv lw b">maxHeight</code>然后被设置为这个新的校正值。这个逻辑发生在一个超时内，以便给模态时间来完成它的打开动画。实施此解决方案后，模态现在看起来清晰，并保持在屏幕的中心:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/59443424761873d5b64a3df8d4fe3275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CNoz6D_JgwMKMbV5DZuZJQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The same modal now appearing crisp</figcaption></figure><p id="9309" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我希望有一些正在为同样奇怪的问题奋斗的人会发现这篇文章是有帮助的。下面是一个堆栈溢出问题，它帮助我确定了解决方案:</p><div class="mv mw gp gr mx my"><a href="https://stackoverflow.com/questions/8298696/losing-text-sharpness-blur-when-scaling-div-over-a-fixed-position-element-on" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd io gy z fp nd fr fs ne fu fw im bi translated">在固定位置元素上缩放div时失去文本清晰度(模糊)(在移动safari /…</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">当放大时，固定位置的元素在相对位置的元素后面倾斜，我也有类似的问题…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">stackoverflow.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm km my"/></div></div></a></div><p id="2e74" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在你知道了。感谢您的阅读。</p><p id="233a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nn">更多内容请看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nn">plain English . io</em></strong></a><em class="nn">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nn">免费周报</em> </strong> </a> <em class="nn">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nn">社区</em> </strong> </a> <em class="nn">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>