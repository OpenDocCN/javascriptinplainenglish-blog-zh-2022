<html>
<head>
<title>Create Draggable Components with React-Draggable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React-Draggable创建可拖动组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-draggable-components-with-react-draggable-ed5c97b96937?source=collection_archive---------9-----------------------#2022-04-12">https://javascript.plainenglish.io/create-draggable-components-with-react-draggable-ed5c97b96937?source=collection_archive---------9-----------------------#2022-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d79a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过创建一个包含可拖动组件的任务列表，深入了解React-Draggable。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9197ecf4d6720b2d41b1257869cfb857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cBiu13a2S8UZWUYx.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: <a class="ae kv" href="https://coursework.vschool.io/" rel="noopener ugc nofollow" target="_blank">https://coursework.vschool.io/</a></figcaption></figure><p id="8af4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React-Draggable库使用起来简单明了，它将CSS转换应用到React组件，允许您在UI上拖动组件。使用不同的道具让你改变组件的行为，<a class="ae kv" href="https://github.com/react-grid-layout/react-draggable" rel="noopener ugc nofollow" target="_blank"> React-Draggable </a>是创建直观、用户友好界面的绝佳选择。</p><p id="d719" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我们将通过创建一个带有可拖动组件的任务列表来深入探索React-Draggable。我们开始吧！</p><h1 id="1616" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">安装React-Draggable</h1><p id="1cee" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在安装React-Draggable之前，请确保您的本地计算机上已经设置了React项目。导航到项目并在终端中运行以下命令:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="1cfd" class="mu lt iq mq b gy mv mw l mx my">npm install react-draggable</span></pre><p id="ffee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们将从库中导入<code class="fe mz na nb mq b">&lt;Draggable/&gt;</code>组件。为了给元素或组件添加动作，我们可以简单地将<code class="fe mz na nb mq b">&lt;Draggable/&gt;</code>组件包装在它周围。</p><p id="dfba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将以下代码添加到<code class="fe mz na nb mq b">App.js</code>:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3d0c" class="mu lt iq mq b gy mv mw l mx my">import Draggable from "react-draggable";</span><span id="72d8" class="mu lt iq mq b gy nc mw l mx my">function App() {<br/>  return (<br/> &lt;Draggable&gt;<br/>      &lt;div&gt;I can now be moved around!&lt;/div&gt;<br/>    &lt;/Draggable&gt;<br/>  );<br/>}</span><span id="d4e6" class="mu lt iq mq b gy nc mw l mx my">export default App;</span></pre><p id="df71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码将在浏览器中呈现以下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/d93a3e9d269264c6d48a4167d75917e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zGGs0yqdh_xq9V0n.gif"/></div></div></figure><p id="b422" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你已经知道了React-Draggable库是如何工作的，让我们开始我们的任务列表。</p><h1 id="5431" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置React应用程序</h1><p id="7f01" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">安装了React-Draggable库之后，我们可以为我们的项目设置所需的文件结构，并查看我们将需要的组件。为了给关键组件分配唯一的键，我们需要安装一个<code class="fe mz na nb mq b">UUID()</code>，如下所示:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f02f" class="mu lt iq mq b gy mv mw l mx my">npm i uuid</span></pre><p id="68f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的文件夹结构如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/a76983db9e150b4c1e9f2be8bc4b6ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/0*qUDi9VULJQe0Q1Tt.png"/></div></div></figure><h1 id="db95" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建任务列表</h1><p id="05bd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们已经将项目的逻辑分解为三个不同的部分。我们的任务列表将使用三列来呈现它们各自的任务。</p><p id="43dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将添加一个表单元素来接收用户的输入，并将任务添加到相应的组件中。我们的<code class="fe mz na nb mq b">App.js</code>文件在其状态下处理主任务列表:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d9fd" class="mu lt iq mq b gy mv mw l mx my">import "./App.css";<br/>import { useState } from "react";</span><span id="8de5" class="mu lt iq mq b gy nc mw l mx my">function App() {<br/>const [tasks, setTasks] = useState([]);<br/>  const [addItem, setAddItem] = useState(false);<br/>  const handleSubmit = () =&gt; {<br/>    setAddItem(!addItem);<br/>  };<br/>  const addTask = (task) =&gt; {<br/>    setTasks(task);<br/>  };<br/>  return (<br/>  &lt;div&gt;<br/> &lt;/div&gt;</span><span id="bb17" class="mu lt iq mq b gy nc mw l mx my">  );<br/>}<br/></span><span id="bcd5" class="mu lt iq mq b gy nc mw l mx my">export default App;</span></pre><p id="12e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们添加了以下函数:</p><ul class=""><li id="50c0" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">tasks</code>:保存将在屏幕上呈现的任务数组</li><li id="a42c" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">addItem</code>:显示和隐藏<code class="fe mz na nb mq b">AddForm</code>元素的状态，增加一个任务</li></ul><p id="b532" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经准备好了状态，让我们创建其他组件。</p><h1 id="5c19" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">标题组件</h1><p id="0bbd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">将以下代码添加到<code class="fe mz na nb mq b">Header.js</code>:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="1962" class="mu lt iq mq b gy mv mw l mx my">import React from "react";</span><span id="36f0" class="mu lt iq mq b gy nc mw l mx my">export default function Header({ handleSubmit }) {<br/>  return (<br/>    &lt;div className='header'&gt;<br/>      &lt;button onClick={handleSubmit} className='addButton'&gt;<br/>        Add Task<br/>      &lt;/button&gt;<br/>      &lt;p&gt;Planning&lt;/p&gt;<br/>      &lt;p&gt;In Progress&lt;/p&gt;<br/>      &lt;p&gt;Done&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="0c5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mz na nb mq b">&lt;/button&gt;</code>获取<code class="fe mz na nb mq b">handleSubmit</code>函数作为道具，这将显示<code class="fe mz na nb mq b">AddForm</code>元素。设置好标题后，让我们创建<code class="fe mz na nb mq b">AddForm</code>元素:</p><h1 id="b871" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">AddForm</code>元素</h1><p id="ee34" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">将以下代码添加到<code class="fe mz na nb mq b">AddTaskForm.js</code>:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3b32" class="mu lt iq mq b gy mv mw l mx my">import React, { useState } from "react";<br/>import { v4 as uuidv4 } from "uuid";</span><span id="67fd" class="mu lt iq mq b gy nc mw l mx my">export default function AddTaskForm({ setAddItem, addItem, tasks, setTasks }) {<br/>  const [name, setName] = useState("");<br/>  const [description, setDescription] = useState("");<br/>  const [option, setOption] = useState("");</span><span id="f689" class="mu lt iq mq b gy nc mw l mx my">  const handleSubmit = (e) =&gt; {<br/>    e.preventDefault();<br/>    let newTask = {<br/>      id: uuidv4(),<br/>      name: name,<br/>      description: description,<br/>      timeline: option,<br/>    };<br/>    setTasks([...tasks, newTask]);<br/>    setAddItem(!addItem);<br/>  };<br/>  return (<br/>    &lt;div className='addForm'&gt;<br/>      &lt;form onSubmit={(e) =&gt; handleSubmit(e)}&gt;<br/>        &lt;input<br/>          type='text'<br/>          placeholder='Name'<br/>          onChange={(e) =&gt; setName(e.target.value)}<br/>        /&gt;<br/>        &lt;input<br/>          type='text'<br/>          placeholder='Description'<br/>          onChange={(e) =&gt; setDescription(e.target.value)}<br/>        /&gt;<br/>        &lt;select<br/>          name='timeline'<br/>          id='timeline'<br/>          onChange={(e) =&gt; {<br/>            setOption(e.target.value);<br/>          }}<br/>        &gt;<br/>          &lt;option value=''&gt;&lt;/option&gt;<br/>          &lt;option value='planning'&gt;Planning&lt;/option&gt;<br/>          &lt;option value='inprogress'&gt;In-Progress&lt;/option&gt;<br/>          &lt;option value='done'&gt;Done&lt;/option&gt;<br/>        &lt;/select&gt;<br/>        &lt;button type='submit'&gt;Add&lt;/button&gt;<br/>      &lt;/form&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="3988" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码块中，我们有输入字段，它将接收用户提供的相关数据。每个任务都有一个<code class="fe mz na nb mq b">id</code>、<code class="fe mz na nb mq b">name</code>、<code class="fe mz na nb mq b">date</code>和<code class="fe mz na nb mq b">timeline</code>，由<code class="fe mz na nb mq b">select</code>元素取值。</p><p id="c10d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当提交表单时，每个任务都将被添加到我们在<code class="fe mz na nb mq b">App.js</code>中创建的任务列表中。当表单提交成功后，它将被隐藏。</p><h1 id="6110" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建列</h1><p id="644c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在我们的任务列表中，我们将有三个标题为<code class="fe mz na nb mq b">Planning</code>、<code class="fe mz na nb mq b">In Progress</code>和<code class="fe mz na nb mq b">Done</code>的列。让我们创建这些组件并添加它们各自的代码:</p><h1 id="6240" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">Planning.js</code></h1><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d7d9" class="mu lt iq mq b gy mv mw l mx my">import React from "react";<br/>import Card from "./Card";</span><span id="2eb6" class="mu lt iq mq b gy nc mw l mx my">export default function Planning({ tasks, addTask }) {<br/>  return (<br/>    &lt;&gt;<br/>      {tasks<br/>        .filter((item) =&gt; item.timeline === "planning")<br/>        .map((e) =&gt; (<br/>          &lt;Card currentTask={e} tasks={tasks} addTask={addTask} /&gt;<br/>        ))}<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><h1 id="d8e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">InProgress.js</code></h1><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="bcbd" class="mu lt iq mq b gy mv mw l mx my">import React from "react";<br/>import Card from "./Card";</span><span id="4151" class="mu lt iq mq b gy nc mw l mx my">export default function InProgress({ tasks, addTask }) {<br/>  return (<br/>    &lt;&gt;<br/>      {tasks<br/>        .filter((item) =&gt; item.timeline === "inprogress")<br/>        .map((e) =&gt; (<br/>          &lt;Card currentTask={e} tasks={tasks} addTask={addTask} /&gt;<br/>        ))}<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><h1 id="315e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">Done.js</code></h1><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f1c6" class="mu lt iq mq b gy mv mw l mx my">import React from "react";<br/>import Card from "./Card";</span><span id="438c" class="mu lt iq mq b gy nc mw l mx my">export default function Done({ tasks, addTask }) {<br/>  return (<br/>    &lt;&gt;<br/>      {tasks<br/>        .filter((item) =&gt; item.timeline === "done")<br/>        .map((e) =&gt; (<br/>          &lt;Card currentTask={e} tasks={tasks} addTask={addTask} /&gt;<br/>        ))}<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="8c01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能已经注意到，所有这些组件都有相似的逻辑。我们正在获取任务，并使用<code class="fe mz na nb mq b">tasks.filter()</code>基于它们的时间线对它们进行过滤，这将删除不属于该列的任务对象。</p><p id="f1a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，在planning组件中，<code class="fe mz na nb mq b">filter()</code>将删除其时间线属性中没有<code class="fe mz na nb mq b">planning</code>字符串的每个对象。</p><p id="8d20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数组返回一个结果并呈现一个<code class="fe mz na nb mq b">&lt;Card/&gt;</code>组件。让我们在同一个目录中创建<code class="fe mz na nb mq b">Card.js</code>,并添加下面的代码片段:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="12a7" class="mu lt iq mq b gy mv mw l mx my">import React from "react";<br/>import Draggable from "react-draggable";</span><span id="de77" class="mu lt iq mq b gy nc mw l mx my">export default function Card({ currentTask, tasks, addTask }) {<br/>  return (<br/>    &lt;Draggable grid={[10, 10]} axis='y' bounds='parent'&gt;<br/>      &lt;div className='card' key={currentTask.id}&gt;<br/>        &lt;div className='heading'&gt;<br/>          &lt;h3&gt;{currentTask.name &amp;&amp; currentTask.name}&lt;/h3&gt;<br/>          &lt;img<br/>            onClick={() =&gt; {<br/>              const newTaskList = tasks.filter((item) =&gt; {<br/>                if (item.id != currentTask.id) {<br/>                  return item;<br/>                }<br/>              });<br/>              addTask(newTaskList);<br/>            }}<br/>            src='https://toppng.com/uploads/preview/recycling-bin-vector-delete-icon-png-black-11563002079w1isxqyyiv.png'<br/>            style={{ height: "20px", width: "20px" }}<br/>          /&gt;<br/>        &lt;/div&gt;<br/>        &lt;p&gt;{currentTask.description}&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/Draggable&gt;<br/>  );<br/>}</span></pre><p id="7d9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mz na nb mq b">&lt;Card/&gt;</code>组件得到三个道具，是渲染和删除逻辑所需要的。</p><p id="9d27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">父div <code class="fe mz na nb mq b">&lt;Draggable&gt;</code>是从我们的库中导入的，使得整个卡片是可移动的。默认情况下，您可以将卡片移动到屏幕上的任何位置。然而，为了防止它超出其父元素，我们将为一个<code class="fe mz na nb mq b">bounds</code>道具提供一个值。</p><h1 id="768f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">删除任务</h1><p id="4d4f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要删除任务，请添加以下代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="86ea" class="mu lt iq mq b gy mv mw l mx my">const newTaskList = tasks.filter((item) =&gt; {<br/>    if (item.id != currentTask.id) {<br/>      return item;<br/>    }<br/>  });</span><span id="be4f" class="mu lt iq mq b gy nc mw l mx my">  addTask(newTaskList);</span></pre><p id="dcca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码块从<code class="fe mz na nb mq b">App.js</code>获取整个任务列表，然后创建一个新的列表，其中不包括当前任务。接下来，让我们导入<code class="fe mz na nb mq b">App.js</code>中的每个组件:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="dfc6" class="mu lt iq mq b gy mv mw l mx my">import "./App.css";<br/>import { useState } from "react";<br/>import Header from "./Header";<br/>import Planning from "./Planning";<br/>import InProgress from "./InProgress";<br/>import Done from "./Done";<br/>import AddTaskForm from "./AddTaskForm";<br/>function App() {<br/>  const [tasks, setTasks] = useState([]);<br/>  const [addItem, setAddItem] = useState(false);<br/>  const handleSubmit = () =&gt; {<br/>    setAddItem(!addItem);<br/>  };<br/>  const addTask = (task) =&gt; {<br/>    setTasks(task);<br/>  };<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Header handleSubmit={handleSubmit} /&gt;<br/>      &lt;div className='mainGrid'&gt;<br/>        &lt;div className='column'&gt;<br/>          &lt;Planning tasks={tasks} addTask={addTask} /&gt;<br/>        &lt;/div&gt;<br/>        &lt;div className='column'&gt;<br/>          &lt;InProgress tasks={tasks} addTask={addTask} /&gt;<br/>        &lt;/div&gt;<br/>        &lt;div className='column'&gt;<br/>          &lt;Done tasks={tasks} addTask={addTask} /&gt;<br/>        &lt;/div&gt;<br/>        {addItem &amp;&amp; (<br/>          &lt;AddTaskForm<br/>            addItem={addItem}<br/>            setAddItem={setAddItem}<br/>            tasks={tasks}<br/>            setTasks={addTask}<br/>          /&gt;<br/>        )}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="68c5" class="mu lt iq mq b gy nc mw l mx my">export default App;</span></pre><p id="b1d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将在任务列表中添加样式。在<code class="fe mz na nb mq b">App.css</code>中添加以下代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="ee25" class="mu lt iq mq b gy mv mw l mx my">.mainGrid{<br/>  display: flex;<br/>  flex-direction: row;<br/>  justify-content: space-between;<br/>  flex-wrap: wrap;<br/>  height: 100vh;<br/>}<br/>.header{<br/>  display: flex;<br/>  flex-direction: row;<br/>  justify-content: space-around;<br/>  flex-wrap: wrap;<br/>  background-color: rgb(205, 240, 240)<br/>}<br/>.column{<br/>  width: 32vw;<br/>  display: flex;<br/>  flex-direction: column;<br/>  border: 5px solid grey;<br/>  background-color: azure;<br/>  overflow: hidden;<br/>}<br/>.card{<br/>  border: 1px solid black;<br/>  background-color: white;<br/>}<br/>.card p{<br/>  font-size: 10px;<br/>  width: 30vw;<br/>}<br/>.heading{<br/>  display: flex;<br/>  flex-direction:row;<br/>  align-items: center;<br/>  justify-content: space-between;</span><span id="5712" class="mu lt iq mq b gy nc mw l mx my">}<br/>.addButton{<br/>  position:absolute;<br/>  top: 2.5%;<br/>  left: 0%;<br/>}<br/>.addForm{<br/>  height: 50vh;<br/>  width: 50vw;<br/>  background-color: lightblue;<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;<br/>  flex-direction: column;<br/>  position: absolute;<br/>  top: 25%;<br/>  left: 25%;<br/>}<br/>.addForm form{<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;<br/>  flex-direction: column; <br/>}</span></pre><p id="9299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们运行项目并将一个项目添加到任务列表中时，输出将如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/d17658d48775e1b765c4fa64c2c86bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zkBQFWxdNaQPfPt7.png"/></div></div></figure><p id="7b71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些任务可在其各自的列中移动:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/7d1d58c00e21c4ecbb9c5334cc5cde12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/0*jkbhYZIgYzp2fiJN.gif"/></div></figure><p id="9df7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要删除任务，只需点击<strong class="ky ir">删除</strong>图标。</p><h1 id="5ee8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">可拖动事件侦听器</h1><p id="ab99" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">react-draggable API支持一系列回调方法来跟踪可拖动元素的移动:</p><ul class=""><li id="e085" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">onDrag()</code> —该方法监听<code class="fe mz na nb mq b">drag</code>事件，并在<code class="fe mz na nb mq b">drag</code>正在进行时被触发</li><li id="145a" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">onStart()</code> —该方法监听<code class="fe mz na nb mq b">drag</code>事件，并在拖动开始时被触发</li><li id="19e0" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">onStop()</code> —该方法监听<code class="fe mz na nb mq b">drag</code>事件，并在拖动停止时被触发</li><li id="c942" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">onMouseDown()</code> —当鼠标按在可拖动的元素上时，该方法被触发</li><li id="ece6" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">onMouseUp()</code> —当鼠标在可拖动元素上释放时，该方法被触发</li><li id="587a" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">onTouchStart()</code> —该方法在拖动开始之前在触摸环境中触发</li><li id="f7f0" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">onTouchEnd()</code> —此方法在拖动停止之前在触摸环境中触发</li></ul><h1 id="fc24" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">可拖动组件上的事件侦听器用法</h1><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="e968" class="mu lt iq mq b gy mv mw l mx my">import Draggable, {DraggableCore} from 'react-draggable';<br/>import React from 'react-dom'<br/>function MyDraggableComponent() {<br/>  const eventHandler = (e, data) =&gt; {<br/>    console.log('Event Type', e.type);<br/>    console.log({e, data});<br/>  }</span><span id="12b2" class="mu lt iq mq b gy nc mw l mx my">  return (<br/>    &lt;Draggable<br/>        defaultPosition={{x: 0, y: 0}}<br/>        onMouseDown={eventHandler}<br/>        onStart={eventHandler}<br/>        onDrag={eventHandler}<br/>        onStop={eventHandler}&gt;<br/>        &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;<br/>          &lt;div className="handle"&gt;Drag from here&lt;/div&gt;<br/>          &lt;div&gt;This readme is really dragging on...&lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Draggable&gt;<br/>  )<br/>}</span><span id="68de" class="mu lt iq mq b gy nc mw l mx my">export default MyDraggableComponent;</span></pre><p id="b7e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mz na nb mq b">handler</code>函数接收<code class="fe mz na nb mq b">event</code>和<code class="fe mz na nb mq b">data</code>对象作为参数。</p><p id="37b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，<code class="fe mz na nb mq b">data</code>对象包含关于可拖动组件当前位置的信息。</p><h1 id="5ad7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">可拖动组件道具</h1><h1 id="b1e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">axis</code></h1><p id="9817" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><code class="fe mz na nb mq b">axis</code>支柱决定可拖动物可以在哪个轴上移动。它接收以下字符串值:</p><ul class=""><li id="7a04" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">both</code>允许水平和垂直移动。这是轴的默认值</li><li id="c8b3" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">x</code>限制水平轴的移动</li><li id="a913" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">y</code>限制垂直轴的移动</li><li id="dbb9" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated">停止所有运动</li></ul><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f882" class="mu lt iq mq b gy mv mw l mx my">&lt;Draggable axis="x"&gt;<br/>  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;<br/>    &lt;div className="handle"&gt;Drag from here&lt;/div&gt;<br/>    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/Draggable&gt;</span></pre><h1 id="a341" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">handle</code></h1><p id="f3d0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><code class="fe mz na nb mq b">handle</code>道具定义了一个将被用作拖动手柄的选择器。</p><p id="aebd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有<code class="fe mz na nb mq b">handle</code>支撑，可拖动组件将被用作拖动手柄:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="10d7" class="mu lt iq mq b gy mv mw l mx my">&lt;Draggable handle=".handle"&gt;<br/>  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;<br/>    &lt;div style={{backgroundColor: "green", width: "30%"}} className="handle"&gt;<br/>        Drag from here<br/>    &lt;/div&gt;<br/>    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/Draggable&gt;</span></pre><p id="0655" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用上面的代码片段，我们可以通过单击绿色背景色元素来移动可拖动组件。</p><h1 id="dae6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">defaultPosition</code></h1><p id="88a7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><code class="fe mz na nb mq b">defaultPosition</code>支柱指定被拖动项目应该开始的<code class="fe mz na nb mq b">x</code>和<code class="fe mz na nb mq b">y</code>坐标:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="efad" class="mu lt iq mq b gy mv mw l mx my">&lt;Draggable defaultPosition={{x: 0, y: 0}}&gt;<br/>  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;<br/>    &lt;div className="handle"&gt;Drag from here&lt;/div&gt;<br/>    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/Draggable&gt;</span></pre><h1 id="215c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">disabled</code></h1><p id="8ff3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><code class="fe mz na nb mq b">disabled</code>属性接收一个布尔值。如果<code class="fe mz na nb mq b">true</code>，它将不会调用任何拖动处理程序，使得可拖动组件像一个完全静态的组件一样运行。</p><h1 id="6153" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><code class="fe mz na nb mq b">bounds</code></h1><p id="74ea" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><code class="fe mz na nb mq b">bounds</code>道具指定移动边界。它接收以下字符串值:</p><ul class=""><li id="25da" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated"><code class="fe mz na nb mq b">parent</code>—<code class="fe mz na nb mq b">parent</code>值限制节点的<code class="fe mz na nb mq b">offsetParent</code>(相对或绝对位置的最近节点)内的移动</li><li id="e8a6" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated">一个具有<code class="fe mz na nb mq b">left, top, right, and bottom</code>属性的对象，指示可拖动对象在每个方向上可以移动的距离</li></ul><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="02d2" class="mu lt iq mq b gy mv mw l mx my">&lt;Draggable bounds={{left: 0, top: 0, right: 100, bottom: 200}}&gt;<br/>  &lt;div style={{border: "2px solid red", padding: "1rem", width: "30%"}}&gt;<br/>    &lt;div className="handle"&gt;Drag from here&lt;/div&gt;<br/>    &lt;div&gt;This readme is really dragging on...&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/Draggable&gt;</span></pre><p id="57e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用上面的代码片段，我们的可拖动组件的移动将被限制在指定的值。</p><p id="0bd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有关可拖动道具的更多信息，请查看<a class="ae kv" href="https://www.npmjs.com/package/react-draggable" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="0ee5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">处理<code class="fe mz na nb mq b">findDOMNode</code>弃用错误</h1><p id="5050" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果可拖动组件在React Strict模式下运行，警告<code class="fe mz na nb mq b">ReactDOM.findDOMNode()</code>将被弃用，并将记录在浏览器的控制台上。</p><p id="b451" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">避免此警告的方法是传递一个<code class="fe mz na nb mq b">nodeRef</code>，如下例所示:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="1ca7" class="mu lt iq mq b gy mv mw l mx my">function MyDraggableComponent() {<br/>  const nodeRef = React.useRef(null);<br/>  return (<br/>    &lt;Draggable nodeRef={nodeRef}&gt;<br/>      &lt;div ref={nodeRef}&gt;Example Target&lt;/div&gt;<br/>    &lt;/Draggable&gt;<br/>  );<br/>}</span><span id="41c5" class="mu lt iq mq b gy nc mw l mx my">export default MyDraggableComponent;</span></pre><h1 id="5935" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="0e07" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在你的应用程序中增加组件的移动对你的UI有好处，比如提高视觉兴趣和更好的组织。React-Draggable库因其简单性和功能性是一个很好的选择。</p><p id="71eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我们使用React-Draggable创建了一个任务列表。要了解更多关于React-Draggable的信息，请务必访问GitHub页面。</p><p id="e601" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nu">原帖发布于LogRocket: </em></p><div class="nv nw gp gr nx ny"><a href="https://blog.logrocket.com/create-draggable-components-react-draggable/" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">使用React-Draggable - LogRocket博客创建可拖动组件</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">React-Draggable库简单易用，将CSS转换应用于React组件…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">blog.logrocket.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kp ny"/></div></div></a></div><p id="a923" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nu">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">plain English . io</em></strong></a><em class="nu">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">免费周报</em> </strong> </a> <em class="nu">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">Twitter</em></strong></a><em class="nu">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nu">LinkedIn</em></strong></a><em class="nu">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nu">社区不和谐</em> </strong> </a> <em class="nu">。</em></p></div></div>    
</body>
</html>