<html>
<head>
<title>A Robust Angular Search Bar with RxJs Debounce</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有RxJs去抖功能的鲁棒角度搜索条</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-robust-angular-search-bar-with-rxjs-debounce-29a082d6816e?source=collection_archive---------5-----------------------#2022-08-05">https://javascript.plainenglish.io/a-robust-angular-search-bar-with-rxjs-debounce-29a082d6816e?source=collection_archive---------5-----------------------#2022-08-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/872a269f9ca8f171d386a47a1888a17d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PE5L2I-CQRBSQxyg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@dlerman6?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daniel Lerman</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9a69" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们每天都会在互联网上遇到各种类型的搜索栏和搜索下拉列表。大多数搜索栏会调用后端API来查询基于我们输入的结果。</p><p id="eb8e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">想象一个搜索栏，在你输入的时候显示国家的搜索结果。</p><p id="f67a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设用户想要搜索Columbia，并且用户从键盘键入“col”。如果搜索功能在每次键盘输入时被触发，将会有三个单独的搜索请求“c”、“co”和“col”(见下文)。</p><p id="90bd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，只需要搜索“col”的最后一个请求的结果。对“c”和“co”的搜索请求被发送到API，但是它们的结果没有被使用。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/ce546a8c1e780acebc8c0c8be15f48b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/1*sRTMJuVAeLH75AYN37zM7w.gif"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Unwanted API request are being sent</figcaption></figure><p id="f68f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了防止搜索栏对用户输入的每一个字母发送这样的请求，我们可以在RxJs中使用<strong class="kc io">去抖</strong>操作符。</p><p id="972c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ld">根据定义，只有在由另一个可观测对象确定的特定时间间隔过去而没有另一个源发射之后，去抖动算子才从源可观测对象发射通知。</em> </strong></p><p id="9beb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简而言之，它阻止向API发送请求，直到在一个输入之后经过了配置的时间(比如说500毫秒)，而没有另一个输入。由于用户键入“c”、“o”和“l”时字母之间的时间间隔小于该值，因此不会发送API请求。但是，当用户键入“col”后过了500毫秒，将发送API搜索请求。</p><p id="b275" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在Angular中创建了一个带有去抖功能的示例搜索栏。这里，我将去抖时间配置为500毫秒。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="le lf l"/></div></figure><p id="8835" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">到达去抖时间后，使用搜索词调用<strong class="kc io"> searchRequest() </strong>方法。然后，它将查询API，并将结果作为可观察结果返回。</p><p id="422a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以在下面看到搜索栏的StackBlitz演示。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lg lf l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Demo of the search bar</figcaption></figure><p id="a2e0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">别忘了在Github上查看完整的源代码！</p><div class="lh li gp gr lj lk"><a href="https://github.com/pabasara-mahindapala/search-bar" rel="noopener  ugc nofollow" target="_blank"><div class="ll ab fo"><div class="lm ab ln cl cj lo"><h2 class="bd io gy z fp lp fr fs lq fu fw im bi translated">github-PABA Sara-mahindapala/search-bar:由StackBlitz ⚡️创建</h2><div class="lr l"><p class="bd b dl z fp lp fr fs lq fu fw dk translated">github.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx jt lk"/></div></div></a></div></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><h2 id="fc77" class="mf mg in bd mh mi mj dn mk ml mm dp mn kl mo mp mq kp mr ms mt kt mu mv mw mx bi translated">参考资料:</h2><ol class=""><li id="239a" class="my mz in kc b kd na kh nb kl nc kp nd kt ne kx nf ng nh ni bi translated"><a class="ae jz" href="https://rxjs.dev/api/operators/debounce" rel="noopener ugc nofollow" target="_blank">https://rxjs.dev/api/operators/debounce</a></li></ol><p id="73e0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ld">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ld">plain English . io</em></strong></a><em class="ld">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ld">免费周报</em> </strong> </a> <em class="ld">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ld">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ld">LinkedIn</em></strong></a><em class="ld"/><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ld">YouTube</em></strong></a><em class="ld"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ld">不和</em> </strong> </a> <em class="ld">。</em></p></div></div>    
</body>
</html>