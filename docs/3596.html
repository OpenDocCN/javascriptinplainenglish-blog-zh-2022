<html>
<head>
<title>React Virtual DOM vs Shadow DOM: What’s the Difference?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React虚拟DOM vs阴影DOM:有什么区别？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-virtual-dom-vs-shadow-dom-whats-the-difference-b51a480d2c70?source=collection_archive---------2-----------------------#2022-09-10">https://javascript.plainenglish.io/react-virtual-dom-vs-shadow-dom-whats-the-difference-b51a480d2c70?source=collection_archive---------2-----------------------#2022-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d4a3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">React和Vue.js使用虚拟DOM来优化性能。那么什么是影子王国呢？</h2></div><p id="d61d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您使用React或Vue，您可能会熟悉虚拟DOM(文档对象模型)。这不应该与影子DOM混淆。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/355ab20d6c7113a94d2beeacc2075326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AbJX3bf4gbQx15-L"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Photo by <a class="ae lr" href="https://unsplash.com/@lautaroandreani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8139" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在看虚拟DOM和影子DOM之前，你应该对文档对象模型有一个清晰的了解。</p><p id="252f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，通俗地说，我们会说</p><blockquote class="ls lt lu"><p id="7053" class="kf kg lv kh b ki kj jr kk kl km ju kn lw kp kq kr lx kt ku kv ly kx ky kz la ij bi translated">DOM代表了你的网站的结构。</p></blockquote><p id="899b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想知道更多关于DOM是在哪里创建的，以及HTML、DOM和JavaScript之间的关系，可以考虑阅读<a class="ae lr" rel="noopener ugc nofollow" target="_blank" href="/what-is-dom-in-javascript-c95531731367">什么是DOM？</a></p><p id="88c2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们对DOM有了一些了解，让我们看看什么是虚拟DOM。</p><h1 id="20a0" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">什么是虚拟DOM？</h1><p id="e868" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">简而言之，虚拟DOM (VDOM)是一个编程概念，其中UI的理想或“虚拟”表示保存在内存中，并通过库(如reactjs.org<a class="ae lr" href="https://reactjs.org/docs/faq-internals.html#what-is-the-virtual-dom" rel="noopener ugc nofollow" target="_blank">的react DOM</a>)与“真实”DOM同步。</p><p id="1f91" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">换句话说，React构建了一个逻辑树来表示实际的DOM结构。</p><h2 id="bd74" class="mw ma iq bd mb mx my dn mf mz na dp mj ko nb nc ml ks nd ne mn kw nf ng mp nh bi translated">为什么我们需要虚拟DOMs？</h2><p id="163b" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">虚拟DOM是解决现代网络中常见问题的一种方式。</p><p id="34d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着应用程序变得越来越大，框架和库往往过于频繁地操作和更新DOM。这在很多方面都很昂贵。</p><p id="2e00" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">浏览DOM变得更慢，需要更多的处理能力，最终会影响应用程序的性能。</p><p id="6b95" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，它可以使页面变慢。</p><p id="1596" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有几种方法可以解决这个问题:</p><ul class=""><li id="9aff" class="ni nj iq kh b ki kj kl km ko nk ks nl kw nm la nn no np nq bi translated">React使用一个虚拟DOM，并通过协调过程将其与真实DOM同步。</li><li id="76e6" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nn no np nq bi translated">Angular使用一种<a class="ae lr" href="https://angular.io/guide/change-detection#angular-change-detection-and-runtime-optimization" rel="noopener ugc nofollow" target="_blank">变化检测</a>机制“来查看你的应用程序状态是否已经改变，以及是否有任何DOM需要更新”。</li><li id="cddf" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nn no np nq bi translated">Vue也使用虚拟DOM。通过使用一些diff算法，Vue避免了在新的更改之后重新呈现整个DOM。</li></ul><p id="739c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简而言之，让我们记住虚拟DOM是真实DOM的副本。</p><p id="0536" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过告诉React我们想要实现的最终DOM状态(UI应该是什么样子)，React确保DOM匹配那个状态。</p><h1 id="f944" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">什么是影子DOM？</h1><p id="9e8c" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">影子DOM是一种为封装而设计的浏览器技术，例如，将标记结构、样式和行为隐藏起来，并与页面上的其他代码分开，以便不同部分不会冲突。</p><p id="b84a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">封装隔离了一些代码，使其不会与页面上的其他代码冲突。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nw"><img src="../Images/2d4e83635dea1bd5a115253ebbaf64ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-Bb731QXM4F9Zk8r"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Photo by <a class="ae lr" href="https://unsplash.com/@nickeedoo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nick Tiemeyer</a> on <a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="38db" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">换句话说，由于影子DOM，我们可以将其他元素附加到真正的DOM上，知道新元素不会与真正的DOM本身冲突。</p><p id="6950" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由<a class="ae lr" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM#high-level_view" rel="noopener ugc nofollow" target="_blank"> MDN </a>提出的一个例子是<code class="fe nx ny nz oa b">&lt;video&gt;</code>标签。虽然在DOM中只看到了<code class="fe nx ny nz oa b">&lt;video&gt;</code>标签，但是这个元素在其shadow DOM中包含了一系列按钮和其他控件。</p><h1 id="348a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">虚拟DOM和影子DOM的区别</h1><p id="7467" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">关于虚拟DOM和影子DOM的区别可以说些什么？有点像Java和JavaScript的区别！</p><p id="6499" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管提到了DOM，虚拟DOM和影子DOM是不同的技术。</p><p id="b5f6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React和Vue等库使用虚拟DOM来解决在保持最佳性能的同时更改DOM的问题。</p><p id="34df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虚拟DOM是整个真实DOM的副本，在浏览器API之上实现。</p><p id="979f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">影子DOM是web组件和浏览器API所固有的。因此，在使用React和Vue之类的库或Angular之类的框架时，也可以使用它。</p><p id="9045" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">影子DOM是“隔离”在自己的web组件中的一部分DOM。</p><p id="ef0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相比之下，如果使用普通JavaScript创建应用程序，就不会使用虚拟DOM。</p><div class="ob oc gp gr od oe"><a href="https://medium.com/@lorenzozar/membership" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">通过我的推荐链接加入Medium-Lorenzo Zarantonello</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">如果这个有价值，直接支持我！我的文章大多是免费的。考虑成为会员以示支持…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os ll oe"/></div></div></a></div></div><div class="ab cl ot ou hu ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ij ik il im in"><p id="e57e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lv">更多内容请看</em><a class="ae lr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="lv">plain English . io</em></strong></a><em class="lv">。报名参加我们的</em> <a class="ae lr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="lv">免费周报</em> </strong> </a> <em class="lv">。关注我们关于</em><a class="ae lr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="lv">Twitter</em></strong></a><a class="ae lr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="lv">LinkedIn</em></strong></a><strong class="kh ir"><em class="lv"/></strong><a class="ae lr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="lv">YouTube</em></strong></a><strong class="kh ir"><em class="lv">，以及</em></strong><em class="lv"/><a class="ae lr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="lv">不和</em> </strong> </a>  <em class="lv">对成长黑客感兴趣？检查</em> <a class="ae lr" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="lv">电路</em> </strong> </a> <strong class="kh ir"> <em class="lv">。</em> </strong></p></div></div>    
</body>
</html>