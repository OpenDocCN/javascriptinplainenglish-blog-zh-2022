<html>
<head>
<title>JavaScript’s Hidden Power: Adding Big Numbers Without BigInt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript隐藏的力量:不用BigInt就能添加大数字</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascripts-hidden-power-adding-big-numbers-without-bigint-3a35c16fe710?source=collection_archive---------20-----------------------#2022-12-23">https://javascript.plainenglish.io/javascripts-hidden-power-adding-big-numbers-without-bigint-3a35c16fe710?source=collection_archive---------20-----------------------#2022-12-23</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><h2 id="8f39" class="ip iq ir bd b dl is it iu iv iw ix dk iy translated" aria-label="kicker paragraph">毁灭2022</h2><div class=""/><div class=""><h2 id="421d" class="pw-subtitle-paragraph jx ja ir bd b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dk translated">查看处理大整数的替代方法</h2></div><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/4fdeb3422c575c7b7e7dc68df82c96e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g-6lu9PmPNwO8qzw1U3Jrg.jpeg"/></div></div></figure><p id="5780" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">我们已经到达了这场灾难的终点2022年。为了完美地结束事情，CodeWars为我提出了一个4级kyu问题。像任何困难的问题一样，它表现得很简单，就像2加2。这都是关于和的，但是是非常大，非常巨大，非常巨大的数字的和。这也是JavaScript在处理如此大的数字时的局限性。最后，这是关于回忆我们小时候是如何做算术的。</p><h1 id="b310" class="lx ly ir bd lz ma mb mc md me mf mg mh kg mi kh mj kj mk kk ml km mm kn mn mo bi translated">问题是:把大数字相加</h1><p id="24ab" class="pw-post-body-paragraph lb lc ir ld b le mp kb lg lh mq ke lj lk mr lm ln lo ms lq lr ls mt lu lv lw ik bi translated">链接到<a class="ae mu" href="https://www.codewars.com/kata/525f4206b73515bffb000b21" rel="noopener ugc nofollow" target="_blank">形</a></p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/f1948c9166c98b4ac461ac16ee9da5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i6i81DmyXr7eA-tDt8-63g.jpeg"/></div></div></figure><p id="9f2b" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">我们需要对大数字求和，我们需要你的帮助。</p><p id="3e00" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">编写一个返回两个数之和的函数。输入数字是字符串，函数必须返回一个字符串。</p><p id="0db4" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><strong class="ld jb">举例</strong></p><pre class="kq kr ks kt gu mv mw mx bn my mz bi"><span id="45ff" class="na ly ir mw b be nb nc l nd ne">add("123", "321"); -&gt; "444"<br/>add("11", "99");   -&gt; "110"</span></pre><p id="d2f4" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><strong class="ld jb">注意事项</strong></p><ul class=""><li id="b3c2" class="nf ng ir ld b le lf lh li lk nh lo ni ls nj lw nk nl nm nn bi translated">输入的数字很大。</li><li id="06b0" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">输入是一个只有数字的字符串</li><li id="6ddf" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">这些数字是积极的</li><li id="4ff4" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">你不能使用内置的大整数库(BigInt)</li><li id="1059" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">你不能使用其他库</li></ul><h1 id="8d48" class="lx ly ir bd lz ma mb mc md me mf mg mh kg mi kh mj kj mk kk ml km mm kn mn mo bi translated">人工智能解决方案</h1><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj nt"><img src="../Images/4b4019196e96f9bee117cec75b1880d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAvcifHKqaxxXhbljBn3wA.jpeg"/></div></div></figure><p id="619f" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">我承认我在黑暗中跌跌撞撞。问题是我不能使用BigInt，这是最合理也是最有效的解决方案。在网上搜索了一下没有找到解决方案后，我试着向ChatGPT寻求一些想法。它给了我这个解决方案:</p><pre class="kq kr ks kt gu mv mw mx bn my mz bi"><span id="ee54" class="na ly ir mw b be nb nc l nu ne">function add(a, b) {<br/>  // Initialize result<br/>  let result = "";<br/><br/>  // Initialize digit sum<br/>  let sum = 0;<br/><br/>  // Initialize carry<br/>  let carry = 0;<br/><br/>  // Add digits from right to left<br/>  for (<br/>    let i = a.length - 1, j = b.length - 1;<br/>    i &gt;= 0 || j &gt;= 0 || carry &gt; 0;<br/>    i--, j--<br/>  ) {<br/>    // Get digits from both numbers<br/>    let x = 0;<br/>    let y = 0;<br/>    if (i &gt;= 0) {<br/>      x = a[i] - "0";<br/>    }<br/>    if (j &gt;= 0) {<br/>      y = b[j] - "0";<br/>    }<br/><br/>    // Add digits and carry<br/>    sum = x + y + carry;<br/><br/>    // Update carry<br/>    carry = Math.floor(sum / 10);<br/><br/>    // Update result<br/>    result = (sum % 10) + result;<br/>  }<br/><br/>  // Return result<br/>  return result;<br/>}</span></pre><p id="6da8" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">这段代码定义了一个函数add，它接受两个大整数作为字符串，并将它们的和作为字符串返回。该函数使用以下步骤对两个大整数执行加法运算:</p><ol class=""><li id="6378" class="nf ng ir ld b le lf lh li lk nh lo ni ls nj lw nv nl nm nn bi translated">它将变量result初始化为一个空字符串，该字符串将用于存储加法的结果。</li><li id="913e" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">它将变量sum初始化为0，用于存储当前相加的数字的总和。</li><li id="900b" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">它将变量carry初始化为0，这将用于存储前一次加法运算的结转值。</li><li id="c952" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">然后，它从右向左遍历两个大整数的数字。</li><li id="4f1b" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">对于每次迭代，它从两个大整数中获取当前位数。如果当前索引超出了大整数的长度，则将该数字设置为0。</li><li id="d001" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">然后，它将数字和结转值相加，通过将总和除以10并取结果的下限来更新结转值。</li><li id="e93f" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">然后，它通过将总和除以10后的余数加到字符串的左侧来更新结果变量。</li><li id="6467" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">循环继续，直到处理完所有数字或结转值变为0。</li><li id="e6b9" class="nf ng ir ld b le no lh np lk nq lo nr ls ns lw nv nl nm nn bi translated">最后，该函数返回结果变量，该变量包含两个大整数之和作为一个字符串。</li></ol><h1 id="4493" class="lx ly ir bd lz ma mb mc md me mf mg mh kg mi kh mj kj mk kk ml km mm kn mn mo bi translated">我的解决方案</h1><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj nt"><img src="../Images/37f9aedfe18c44ff0fa81751d177df68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dFwqsCaE2-KJE8iBth2zzQ.jpeg"/></div></div></figure><p id="1f4a" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">提议的解决方案很好，我会很满意的。但是我不喜欢。我不喜欢它，因为用这种方式找到解决方案有点像作弊。最重要的是，它剥夺了发现和研究的乐趣。</p><p id="a150" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">所以，我可以尝试提出自己的解决方案。这是:</p><pre class="kq kr ks kt gu mv mw mx bn my mz bi"><span id="6067" class="na ly ir mw b be nb nc l nu ne">const sum = (x, y = 0, z = 0) =&gt; Number(x) + Number(y) + Number(z);<br/>const dec = (x) =&gt; (Number(x) &gt;= 10 ? 1 : 0);<br/>const unit = (x) =&gt; (Number(x) &gt;= 10 ? Number(x) - 10 : Number(x));<br/><br/>const add = (a, b) =&gt; {<br/>  const max = a.length &gt;= b.length ? a : b;<br/>  const min = a.length &gt;= b.length ? b : a;<br/><br/>  const revA = [...max].reverse();<br/>  const revB = [...min].reverse();<br/><br/>  let decimal = 0;<br/>  const revResult = revA.map((x, i, arr) =&gt; {<br/>    const result = sum(x, revB[i], decimal);<br/>    decimal = dec(result);<br/>    return unit(result);<br/>  });<br/><br/>  return `${decimal &gt; 0 ? decimal : ""}` + revResult.reverse().join("");<br/>};</span></pre><p id="f8fd" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">这段代码定义了一个函数<code class="fe nw nx ny mw b">add</code>,它接受代表正整数的两个字符串<code class="fe nw nx ny mw b">a</code>和<code class="fe nw nx ny mw b">b</code>,并返回代表这两个数字之和的字符串。</p><p id="5d05" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">该函数首先确定两个输入字符串的最大长度，并将较长的字符串赋给变量<code class="fe nw nx ny mw b">max</code>，将较短的字符串赋给变量<code class="fe nw nx ny mw b">min</code>。然后，它使用spread运算符(<code class="fe nw nx ny mw b">...</code>)创建字符串的反向版本，并将它们分别赋给变量<code class="fe nw nx ny mw b">revA</code>和<code class="fe nw nx ny mw b">revB</code>。</p><p id="ed34" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">接下来，该函数定义一个变量<code class="fe nw nx ny mw b">decimal</code>，并将其初始化为<code class="fe nw nx ny mw b">0</code>。然后，它使用<code class="fe nw nx ny mw b">revA</code>上的<code class="fe nw nx ny mw b">map</code>方法迭代数组中的每个元素，并对其应用<code class="fe nw nx ny mw b">sum</code>函数，传入来自<code class="fe nw nx ny mw b">revB</code>的相应元素和decimal的当前值。<code class="fe nw nx ny mw b">sum</code>函数返回其三个参数的和，这些参数都使用Number函数转换成数字。</p><p id="e76a" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">然后将<code class="fe nw nx ny mw b">sum</code>函数的结果传递给<code class="fe nw nx ny mw b">dec</code>函数，如果结果大于或等于<code class="fe nw nx ny mw b">10</code>则返回<code class="fe nw nx ny mw b">1</code>，否则返回<code class="fe nw nx ny mw b">0</code>。然后将该值赋给十进制变量。sum函数的结果也被传递给unit函数，如果大于或等于<code class="fe nw nx ny mw b">10</code>，则返回结果减去<code class="fe nw nx ny mw b">10</code>，否则返回结果本身。</p><p id="e541" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">最后，该函数将<code class="fe nw nx ny mw b">decimal</code>的值(如果它大于<code class="fe nw nx ny mw b">0</code>)与<code class="fe nw nx ny mw b">revResult</code>数组的反转版本连接起来，这是通过对其调用reverse方法获得的。然后结果作为字符串返回。</p><p id="67e1" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">例如，如果输入字符串是<code class="fe nw nx ny mw b">"123"</code>和<code class="fe nw nx ny mw b">"456"</code>，函数将返回字符串<code class="fe nw nx ny mw b">"579"</code>，这是两个数的和。</p><p id="f10f" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">基本上，我建立了一个可以自动累加数字的函数，就像我们在学校里学到的那样。</p><p id="d7fe" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl nz oa hv ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ik il im in io"><p id="9ef0" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><strong class="ld jb"> <em class="og">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae mu" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="ld jb"> <em class="og">中邮箱列表</em> </strong> </a></p><div class="oh oi gq gs oj ok"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="ol ab fp"><div class="om ab on cl cj oo"><h2 class="bd jb gz z fq op fs ft oq fv fx ja bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="or l"><h3 class="bd b gz z fq op fs ft oq fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="os l"><p class="bd b dl z fq op fs ft oq fv fx dk translated">el3um4s.medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy kz ok"/></div></div></a></div></div><div class="ab cl nz oa hv ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ik il im in io"><p id="aa33" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><em class="og">原载于2022年12月23日https://blog.stranianelli.com</em><a class="ae mu" href="https://blog.stranianelli.com/devadvent-2022-23-adding-big-numbers/" rel="noopener ugc nofollow" target="_blank"><em class="og"/></a><em class="og">。</em></p><h2 id="97d3" class="oz ly ir bd lz pa pb dn md pc pd dp mh lk pe pf mj lo pg ph ml ls pi pj mn ix bi translated">更多内容请访问<a class="ae mu" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> PlainEnglish.io </a>。</h2><p id="e8a0" class="pw-post-body-paragraph lb lc ir ld b le mp kb lg lh mq ke lj lk mr lm ln lo ms lq lr ls mt lu lv lw ik bi translated"><em class="og">报名参加我们的</em> <a class="ae mu" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ld jb"> <em class="og">免费每周简讯</em> </strong> </a> <em class="og">。关注我们上</em> <a class="ae mu" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ld jb"> <em class="og">推特</em> </strong> </a>，<a class="ae mu" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="og">LinkedIn</em></strong></a><strong class="ld jb"><em class="og">，</em></strong><a class="ae mu" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="og">YouTube</em></strong></a><strong class="ld jb"><em class="og">，</em></strong><em class="og"><a class="ae mu" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="og">不和</em> </strong></a></em> </p><h2 id="9278" class="oz ly ir bd lz pa pb dn md pc pd dp mh lk pe pf mj lo pg ph ml ls pi pj mn ix bi translated">想扩大你的软件创业规模吗？检查<a class="ae mu" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank">电路</a>。</h2></div></div>    
</body>
</html>