# 一位经验丰富的安全专家审查了我的代码。这三个教训被证明是无价的。

> 原文：<https://javascript.plainenglish.io/a-seasoned-security-specialist-reviewed-my-code-these-3-lessons-proved-to-be-invaluable-37554fcffe3b?source=collection_archive---------13----------------------->

## 关于安全的教训不是通过艰苦的方式学到的。

![](img/05a22b764343f712edfa4cc51c8a90ec.png)

Photo by [Philipp Katzenberger](https://unsplash.com/@fantasyflip?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/security?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

在我的职业生涯中，我经常从事处理客户个人数据的在线应用程序。不言而喻，确保这些敏感数据(如银行账号或地址)的安全是重中之重。因此，安全性一直是代码审查的一个重要部分，笔测试通常是开发过程的一个主要部分。

然而，在常规的 pen 测试中，安全分析师试图从外部进入。他们对应用程序的架构知之甚少，也无法访问源代码。因此，运行了过多的一般测试，其“成功”比率记录在最终报告中。

尽管这种传统的笔式测试可能会暴露漏洞，但从中提取任何持久的教训或根本原因往往更加困难。从长远来看，要使应用程序更安全，就需要更深入、更结构化的关于安全缺陷的知识。

这就是为什么我工作的一家公司聘请了一位观点新颖的安全专家。他没有站在外面试着撬锁，而是把它锯成两半，从里面检查质量。

这位安全专家需要对源代码的完全访问和解释。因为他也曾是一名软件工程师，所以他可以仔细阅读代码，找出可能危及安全的模式。在他分析之后，他与我们的团队会面，不仅让我们修复错误本身，更重要的是，教我们如何在未来防止这种错误。这被证明是非常有见地的。我总结了以下最重要的经验。

## 1.遵循规范

安全应用遵循人们熟知的道路。安全最佳实践和规范之所以存在，是因为它们经过了实战检验。他们通过了时间的考验。因此，当你实现通用功能时——比如授权第三方访问你的 API——寻找通用解决方案——比如 [oauth2](https://oauth.net/2/) 。几乎所有的安全问题都得到了恰当的回答。因此，不要重新发明轮子，而是寻找一个成熟的解决方案/规范，并遵循它。

最好不要自己遵循规范，而是使用维护良好的依赖关系。如果您自己实现一个 oauth2 流，那么您可能会在某个时候误解或偏离规范。

此外，规范不是一成不变的，这意味着您必须不断更新代码以符合规范。使用维护良好且经过测试的依赖项可以降低出错的风险，同时最大限度地减少维护需求。

## 2.使安全性成为依赖项选择不可或缺的一部分

很多安全漏洞不是源于你自己的代码，而是源于你使用的依赖。选择依赖项时，易用性和性能通常是主要标准。但是，如何确保您所选择的依赖项的巨大功能不会伴随着同样巨大的安全风险呢？

首先，检查依赖项本身是否突出了安全性这一特性是一个好主意。如果包的安全性没有被宣传为一种资产，它很可能不是。

其次，应该检查依赖的跟踪记录。该依赖关系在过去有任何值得注意的安全漏洞吗？如果是，这些问题解决的速度和效果如何？如果过去存在一些没有得到充分解决的问题，您应该谨慎地将依赖关系包含到您的项目中。

最后，您应该检查依赖项是否被广泛使用和积极维护。这增加了过早发现和解决问题的机会。

## 3.隔离不安全的操作

web 应用程序中的一些(通常是必要的)过程本质上是不安全的。一个很好的例子是处理/解析从客户端上传的文件。文件可能包含恶意软件、格式错误或在解析时触发不需要的重定向。

使文件上传和文件解析安全是困难的。所以你要给自己留些余地，以防事情出了差错。一个很好的方法是隔离不安全的操作。例如，你可以在一个独立的容器/云函数中处理上传的文件，这个容器/云函数不能访问你的服务器的其他部分。在这种情况下，当火点燃时，它不会那么容易蔓延。所以只要有可能，就隔离危险的操作。

就是这样:来自该领域专家的 3 堂结构安全课。你喜欢这篇文章吗？请务必关注我，了解更多有趣的内容！

*更多内容请看*[***plain English . io***](https://plainenglish.io/)*。报名参加我们的* [***免费周报***](http://newsletter.plainenglish.io/) *。关注我们关于*[***Twitter***](https://twitter.com/inPlainEngHQ)*和*[***LinkedIn***](https://www.linkedin.com/company/inplainenglish/)*。加入我们的* [***社区不和谐***](https://discord.gg/GtDtUAvyhW) *。*