<html>
<head>
<title>Angular Performance Check 2022: You Don’t Want to Miss Out On This</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度性能检查2022:你不想错过这个</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-performance-check-2022-you-dont-want-to-miss-out-on-this-1e0f70008098?source=collection_archive---------6-----------------------#2022-03-09">https://javascript.plainenglish.io/angular-performance-check-2022-you-dont-want-to-miss-out-on-this-1e0f70008098?source=collection_archive---------6-----------------------#2022-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ef65" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">是时候在慢下来之前对你的角度应用性能做一次常规检查了💩堆积起来并引发火灾🔥！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e10dc4c0e3c491bca1cfee61ca606744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GcPMey1PXeKcO0TEPvtb8g.png"/></div></div></figure><h1 id="0f7e" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">1.更改检测:onPush v.s. onDefault</h1><p id="1e65" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们将从查看将组件的<strong class="ll ir">变更检测</strong>策略从<code class="fe mf mg mh mi b">OnDefault</code>变更为<code class="fe mf mg mh mi b">OnPush</code>开始。默认情况下，当您使用<strong class="ll ir"> Angular CLI </strong>创建组件时，默认的<strong class="ll ir"> changeDetection </strong>策略将是<code class="fe mf mg mh mi b">OnDefault</code>，这将使您的DOM在该组件中的数据发生变化时进行更新。角度检查组件树中的更改。因此，如果您的父元素或根元素发生变化，它将触发其子组件和孙组件的DOM更新。</p><p id="1618" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">您可以将您的组件<strong class="ll ir"> changeDetection </strong>策略更新为<code class="fe mf mg mh mi b">OnPush</code>，这样Angular将只在您调用它时检查和更新DOM。</p><p id="b29d" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">将<strong class="ll ir"><em class="mo">changeedetorref</em></strong>注入到您的组件构造函数中，调用<strong class="ll ir"><em class="mo">markForCheck()</em></strong>方法，强制您的组件及其下的子组件检查变更，并相应地更新DOM。此外，如果在这个父/根组件的组件树中有不需要DOM更新而不管数据变化的子组件(哑组件)，您可以选择通过使用<strong class="ll ir"> detach() </strong>方法从组件中分离<strong class="ll ir"> changeDetector </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/7b0b4eec0638f0b61078eb062bde03c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zY_xdnes_G4-Z7bW.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Injecting changeDetectorRef to your component</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/fd7a9edec64ddeadfca43653a3291cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*iuuUKrGhAoADnzTt1qwcKg.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Call detach() method in constructor to detach your component from change detection</figcaption></figure><p id="07c0" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">这个小小的改变可以让你节省大量的内存，优化组件的重新渲染周期。</p><h1 id="63bb" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">2.将trackBy与*ngFor一起使用</h1><p id="44d6" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">指令帮助我们在角度模板中迭代数组。但是，每次数组更新或更改时，整个DOM树都会重新呈现，这可能会带来潜在的性能损失。为了让Angular知道你只需要重新渲染特定的DOM而不是<strong class="ll ir"> ngFor </strong>使用的整个DOM树，我们可以使用<strong class="ll ir"> <em class="mo"> trackBy </em> </strong>来优化我们的<strong class="ll ir"> ngFor </strong>循环性能。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/0674f9ab2fb081fa9f37619afb93c6c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BONpIhE_RYpzf0x7.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Typical trackByFunction for ngFor loops</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/46b83d9f8c2d00ed51c8870cd5922ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-3ohBrh2FZBmt2ZX.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Add trackBy method next to the array with semi-colon separator</figcaption></figure><h1 id="44e9" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">3.使用延迟加载策略</h1><p id="81ea" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">惰性加载组件/页面有助于保持您的Angular应用程序第一次加载时负载较轻，<strong class="ll ir"> <em class="mo">只加载用户当前在</em> </strong>上的那些页面。它优化了web应用程序的加载速度，并为您的用户提供了更好的UX。一旦您模块化了您的特性/页面，您就可以利用延迟加载的能力来优化您的应用程序加载时间和性能。你可以在如下所示的<strong class="ll ir"><em class="mo">app-routing . module . ts</em></strong>文件中设置你的懒加载。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl mv"><img src="../Images/971a8e64ebd5854ee2b576c238f9fee4.png" data-original-src="https://miro.medium.com/v2/format:webp/0*08TxTkHLh_j9r4iV.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Lazy loading from app-routing file</figcaption></figure><p id="9ffc" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">请注意，延迟加载不只是在应用程序路由文件中工作。只要您的项目中有适当的嵌套结构，它也可以在后续的子路由文件中工作。这对于从事微前端工作的大型开发团队来说尤其受欢迎。每个团队在项目的一个模块上工作，将他们的页面模块化，并在一个模块中的嵌套子路由文件中延迟加载它们。</p><p id="7313" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">更多关于角度惰性加载的信息，请访问官方文档。</p><div class="mw mx gp gr my mz"><a href="https://angular.io/guide/lazy-loading-ngmodules" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">有角的</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Angular是一个构建移动和桌面web应用程序的平台。加入数百万开发者的社区…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">angular.io</p></div></div></div></a></div><h1 id="63af" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">4.对于长数据集列表，使用虚拟滚动或无限滚动或分页</h1><p id="bed0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">您是否有一长串需要向管理员用户或客户显示的项目？您的浏览器在您的web应用程序中呈现100多个DOM项目是否需要太长时间？是时候考虑在你的web应用中使用虚拟滚动或无限滚动策略了。虚拟和无限滚动有助于在浏览器中重用和回收DOM元素，以显示用户可查看的项目。列表中隐藏的项目不会出现在DOM中，因此有助于节省web应用程序的渲染时间。这些策略有助于优化在给定的长项目列表中向用户显示的DOM元素的数量，并且不会呈现列表中那些在滚动时不在视图中的项目。我不会用这里的细节来烦你。</p><p id="6b91" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">使用<a class="ae ni" href="https://material.angular.io/cdk/scrolling/overview" rel="noopener ugc nofollow" target="_blank">角材</a>或<a class="ae ni" href="https://www.npmjs.com/package/ngx-virtual-scroller" rel="noopener ugc nofollow" target="_blank"> ngx-virtual-scroll </a>可以了解更多关于虚拟滚动的信息。使用<a class="ae ni" href="https://www.npmjs.com/package/ngx-infinite-scroll" rel="noopener ugc nofollow" target="_blank"> ngx-infinite-scroll </a>可以找到更多关于无限滚动的信息。或者，你可以浏览下面的网站，找到更多的插件和工具来优化你的滚动项目列表。</p><div class="mw mx gp gr my mz"><a href="https://openbase.com/categories/js/best-angular-infinite-scroll-libraries" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">2022年10大最佳角度无限卷轴库| Openbase</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">2022年10大最佳角度无限卷轴库对比:ngx-scrollspy，ng2-scrollspy，od-virtualscroll…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">openbase.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no kp mz"/></div></div></a></div><h1 id="08b0" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">5.优化捆绑和预加载</h1><p id="f271" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">正如我在第三点中提到的，延迟加载模块有助于加快应用程序的加载时间，因为我们将应用程序分成多个包，只有在与它们交互时才延迟加载它们。然而，这种策略的一个缺点是，当用户导航到一个延迟加载的模块时，如果模块很大，可能需要一些时间来加载该模块。</p><p id="43b8" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">为了进一步优化页面加载，您可以选择<strong class="ll ir">预加载</strong>延迟加载的模块，这样当您想要呈现延迟加载的功能模块时，导航就变得即时了。<strong class="ll ir">当用户与应用程序的当前模块/页面交互时，预加载</strong>在后台完成。这可以通过将<strong class="ll ir">预加载策略</strong>至<strong class="ll ir">预加载所有模块</strong>设置为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/31bc80397b801095d2d7c13ed866f8fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*2LT3Uc5itkyJeKJZxQxKDw.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">add preloadingStrategy declaration in RouterModule.forRoot()</figcaption></figure><p id="ac62" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">在加载时，所有的延迟加载模块将在您的第一个画图模块加载后在后台加载，当您想要加载其他功能模块时，您将获得更快的页面加载和即时导航。这甚至可以通过创建您自己的定制<strong class="ll ir">预加载策略</strong>来进一步优化，如下图<a class="ae ni" href="https://vsavkin.com/angular-router-preloading-modules-ba3c75e424cb" rel="noopener ugc nofollow" target="_blank">所示</a>在应用程序初始化时仅加载路线的子集。</p><h1 id="6a69" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">摘要</h1><p id="c382" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">希望这篇文章能让你对如何检查你的Angular应用程序的性能有所了解。使用上面强调的这几个点来确定你的组件或页面的瓶颈，并从那里优化它，使你的Angular应用程序再次快速和高性能！💯</p><p id="4f44" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">如果你有其他有助于优化角度应用的性能检查，请在下面的评论中告诉我。我也很想了解一下。干杯！</p><div class="mw mx gp gr my mz"><a href="https://medium.com/@devjo/membership" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">用我的推荐链接- DevJo加入媒体</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="nq l nl nm nn nj no kp mz"/></div></div></a></div><p id="415b" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated"><em class="mo">更多内容请看</em><a class="ae ni" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mo">plain English . io</em></strong></a><em class="mo">。报名参加我们的</em> <a class="ae ni" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。关注我们关于</em><a class="ae ni" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mo">Twitter</em></strong></a><em class="mo">和</em><a class="ae ni" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mo">LinkedIn</em></strong></a><em class="mo">。加入我们的</em> <a class="ae ni" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="mo">社区不和谐</em> </strong> </a> <em class="mo">。</em></p></div></div>    
</body>
</html>