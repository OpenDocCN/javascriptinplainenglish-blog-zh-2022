<html>
<head>
<title>RxJS in the Wild: How to Create Pop-up Alerts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">野外RxJS:如何创建弹出警报</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/rxjs-in-the-wild-how-to-create-pop-up-alerts-69134162c8b2?source=collection_archive---------3-----------------------#2022-05-13">https://javascript.plainenglish.io/rxjs-in-the-wild-how-to-create-pop-up-alerts-69134162c8b2?source=collection_archive---------3-----------------------#2022-05-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7fbd" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">用RxJS和Angular创建简单、漂亮的弹出警告</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/4b03ca54b8a426242ae6d9d65367c04c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M6GNHNaFh8NpwVN-_PmQQg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">RxJS in the Wild: How to Create Pop-up Alerts (<a class="ae ks" href="https://www.shutterstock.com/image-photo/cute-siberian-tiger-cub-panthera-tigris-15731107" rel="noopener ugc nofollow" target="_blank">Eric Gevaert</a>)</figcaption></figure><h1 id="5264" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">现代教程🐈</h1><p id="d3df" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">教程是一个惊人的生物，能够跨越海洋、山脉、峡谷和沙漠传递大量信息。遗憾的是，现代教程往往是圈养出生；脱离自然和现实世界应用的无菌环境。然而，偶尔会从野外捕捉到一个教程，并将其转移到媒体中，同时保留其完整的威严。</p><h1 id="74d6" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">警报📢</h1><p id="784c" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">向用户提供反馈对于提供良好的用户体验非常重要，显示警告是大多数web应用程序不可或缺的一部分。重要的是让用户知道长时间运行的操作何时成功，或者应用程序何时出现故障，以便他们能够做出相应的反应。</p><p id="3898" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">这篇文章的灵感来自于我们在<a class="ae ks" href="https://bugsplat.com" rel="noopener ugc nofollow" target="_blank"> BugSplat </a>使用的警报控件，当设置更新时，或者当执行网络调用时出现问题时，该控件会显示警报。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">RxJS Alerts on Stack Blitz</figcaption></figure><p id="0e56" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">在本教程中，我们将使用<a class="ae ks" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>、<a class="ae ks" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> Bootstrap </a>和<a class="ae ks" href="https://rxjs.dev/" rel="noopener ugc nofollow" target="_blank"> RxJS </a>构建一个非常简单的警报系统。本文的配套回购可以在<a class="ae ks" href="https://github.com/bobbyg603/rxjs-in-the-wild-alerts" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae ks" href="https://stackblitz.com/edit/github-ms1wfi" rel="noopener ugc nofollow" target="_blank"> StackBlitz </a>上找到。</p><h2 id="0e87" class="mp ku in bd kv mq mr dn kz ms mt dp ld lu mu mv lf ly mw mx lh mc my mz lj na bi translated">警报服务</h2><p id="583f" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我们的警报系统需要一种方法来跟踪显示给用户的所有警报。我们需要允许用户解除警报，我们还希望允许某些警报自动消失。</p><p id="6dfb" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">我们的警报服务是一个有状态的服务，包含一个由警报组件显示的可观察的数组<code class="fe nb nc nd ne b">alerts$</code>。如果应该自动解除警报，我们需要推送警报、解除警报以及在超时后解除警报的方法:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nf mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Alert Service</figcaption></figure><p id="5176" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">我们在<code class="fe nb nc nd ne b">_state</code>中保存了一组警报。我们公开了一个每次<code class="fe nb nc nd ne b">_state</code>更新时都会发出的<code class="fe nb nc nd ne b">alerts$</code>可观察对象。我们将<code class="fe nb nc nd ne b">this._alertSubject.asObservable()</code>的结果保存为私有字段，这样我们就不会直接向消费者公开这个主题，也就不会为每个获取<code class="fe nb nc nd ne b">alerts$</code>的调用创建一个新的可观察对象。</p><p id="f63f" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">函数<code class="fe nb nc nd ne b">dismissAlert</code>、<code class="fe nb nc nd ne b">pushAlert</code>和<code class="fe nb nc nd ne b">pushErrorAlert</code>增加和删除<code class="fe nb nc nd ne b">_state</code>的值，并告诉<code class="fe nb nc nd ne b">_alertSubject</code>发出一个具有更新状态的新事件。为了自动解除警报，我们使用<code class="fe nb nc nd ne b">firstValueFrom</code>和<code class="fe nb nc nd ne b">timer</code>创建一个承诺，在指定时间过后调用<code class="fe nb nc nd ne b">this.removeAlert(alert.id)</code>。</p><h2 id="462d" class="mp ku in bd kv mq mr dn kz ms mt dp ld lu mu mv lf ly mw mx lh mc my mz lj na bi translated">警报组件</h2><p id="3daa" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我们需要向用户显示警报，以便他们可以很容易地被注意到，并在得到确认后被解除。警告通常显示在屏幕的顶部或底部，并覆盖应用程序的其余内容。</p><p id="cb56" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">我们的警报组件需要用适当的消息和颜色显示每个警报。这些警告需要用户可以点击，以便他们可以相应地被解雇。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nf mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Alert Component</figcaption></figure><p id="d080" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">我们的警报组件模板使用<code class="fe nb nc nd ne b">*ngFor</code>和<a class="ae ks" href="https://angular.io/api/common/AsyncPipe" rel="noopener ugc nofollow" target="_blank">异步管道</a>来显示一组警报及其相应的消息。我们使用<code class="fe nb nc nd ne b">alertColorClassName</code>管道将<code class="fe nb nc nd ne b">Alert.color</code>属性转换成一个引导类名。最后，当用户点击警告时，我们调用<code class="fe nb nc nd ne b">onRemoveAlertClick</code>。</p><p id="4780" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">在警报组件样式中，我们添加了<code class="fe nb nc nd ne b">@media</code>查询，在大屏幕上显示宽度为<code class="fe nb nc nd ne b">500px</code>的警报，在小屏幕上显示宽度为<code class="fe nb nc nd ne b">100%</code>的警报。我们还将光标设为<code class="fe nb nc nd ne b">pointer</code>,向用户传达可以通过在任何地方点击来解除警告。我们还删除了一些默认的<code class="fe nb nc nd ne b">ul</code>样式，这样我们就可以整齐地显示警报。</p><p id="06e7" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">支持警报组件的代码非常简单，它公开了一个从警报服务发出新值的<code class="fe nb nc nd ne b">alerts$</code> observable。当用户点击提醒时，我们调用<code class="fe nb nc nd ne b">onRemoveAlertClick</code>处理程序，它调用提醒服务上的<code class="fe nb nc nd ne b">dismissAlert</code>。</p><h2 id="9db2" class="mp ku in bd kv mq mr dn kz ms mt dp ld lu mu mv lf ly mw mx lh mc my mz lj na bi translated">应用程序组件</h2><p id="fa7d" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">要将警报组件显示为整个应用程序的覆盖图，我们只需将警报组件添加到应用程序组件模板中。我们还希望有几个按钮来测试不同类型的错误，以及一个切换开关，使我们能够确定是否应该自动解除新的警报。</p><p id="b2d5" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">最后但同样重要的是，当调用<code class="fe nb nc nd ne b">onShowAlertClick</code>时，我们需要使用App组件中的代码来调用<code class="fe nb nc nd ne b">pushAlert</code>以创建警报并向用户显示它们。我们还需要将<code class="fe nb nc nd ne b">autoDismiss</code>属性暴露给模板，这样它就可以在与NgxToggle组件的双向绑定中使用。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nf mo l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">App Component</figcaption></figure><h1 id="9422" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">恭喜🎉</h1><p id="c5fb" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">在本教程中，您学习了如何使用RxJS、Angular和Bootstrap制作一个简单、优雅的警报组件。如果你做的一切都是正确的，你应该得到类似如下的东西:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/8692f15d4c9f1604c125f61d168ef1e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*Z0AzQcA1SSpoKrcwTBknjA.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Alerts with Angular and RxJS</figcaption></figure><p id="335d" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated">感谢阅读！如果你觉得这篇文章很有趣，你可能也会喜欢Angular开发者的<a class="ae ks" href="https://betterprogramming.pub/ci-cd-for-angular-developers-be9a1485d22b" rel="noopener ugc nofollow" target="_blank">CI/CD</a>，或者用Angular和RxJS 上传的<a class="ae ks" href="https://betterprogramming.pub/file-uploads-with-angular-and-rxjs-34262b3450ae" rel="noopener ugc nofollow" target="_blank">文件。</a></p><pre class="kd ke kf kg gt nh ne ni nj aw nk bi"><span id="4544" class="mp ku in ne b gy nl nm l nn no"><strong class="ne io">Want to Connect?</strong></span><span id="1ad6" class="mp ku in ne b gy np nm l nn no">If you found the information in this tutorial useful please subscribe on <a class="ae ks" href="http://bobbyg603.medium.com" rel="noopener">Medium</a>, follow me on <a class="ae ks" href="https://github.com/bobbyg603" rel="noopener ugc nofollow" target="_blank">GitHub</a>, and/or subscribe to my <a class="ae ks" href="https://www.youtube.com/c/bobbyg603" rel="noopener ugc nofollow" target="_blank">YouTube</a> channel.</span></pre><p id="76e1" class="pw-post-body-paragraph ll lm in ln b lo mi jo lq lr mj jr lt lu mk lw lx ly ml ma mb mc mm me mf mg ig bi translated"><em class="mh">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="mh">说白了。报名参加我们的</em><strong class="ln io"><em class="mh"/></strong><a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="mh">免费周报</em> </strong> </a> <em class="mh">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="mh">Twitter</em></strong></a><em class="mh">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"><em class="mh">LinkedIn</em></strong></a><em class="mh">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="mh">社区不和谐</em> </strong> </a> <em class="mh">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> <em class="mh">人才集体</em> </strong> </a> <em class="mh">。</em></strong></a></p></div></div>    
</body>
</html>