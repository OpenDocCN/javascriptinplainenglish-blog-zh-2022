<html>
<head>
<title>Build A Text-To-Speech App Using Client-Side JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用客户端JavaScript构建一个文本到语音的应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-text-to-speech-app-using-client-side-javascript-98cd72df73bb?source=collection_archive---------10-----------------------#2022-03-15">https://javascript.plainenglish.io/build-a-text-to-speech-app-using-client-side-javascript-98cd72df73bb?source=collection_archive---------10-----------------------#2022-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d909" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">OCR技术(Tesseract.js)和Web语音API的融合。包括完整的代码实现。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b5252aa2c54beaa92919b76ff8ffd262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZYJDSDmKSzqp19W9CTnPVA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by Author</figcaption></figure><p id="41e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在当今的信息时代，数字化转型的影响遍及各行各业。随着全球疫情的到来，医疗保健和金融等多个领域开始认识到数据的重要性，以及对数字工具的需求，以支持这些正在进行的范式转变。</p><h2 id="38b2" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated"><a class="ae mk" href="https://www.techtarget.com/searchcontentmanagement/definition/OCR-optical-character-recognition" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> OCR(光学字符识别)技术</strong> </a></h2><p id="2883" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">特别是，OCR技术已经成为推动这个数字时代的游戏规则改变者，以加强数据驱动的职业，如<strong class="kx ir">数据科学(AI &amp; ML)和数据分析。</strong></p><blockquote class="mq mr ms"><p id="56ea" class="kv kw mt kx b ky kz jr la lb lc ju ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated"><em class="iq">最值得注意的是，OCR技术提取图像中文本内容的能力消除了重新键入文本的大量手动需要，有效地节省了开销成本(时间+人力)。</em></p></blockquote></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="4704" class="ne ls iq bd lt nf ng nh lw ni nj nk lz jw nl jx mc jz nm ka mf kc nn kd mi no bi translated">使用Tesseract OCR构建文本到语音转换应用程序</h1><p id="091a" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">以下实施被分解为<strong class="kx ir"> 2部分</strong> —</p><h2 id="a0cf" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">第一部分.使用Tesseract-OCR提取图像到文本</h2><p id="ab1e" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">一个成熟的开源实用程序是<a class="ae mk" href="https://github.com/tesseract-ocr/tesseract/" rel="noopener ugc nofollow" target="_blank"> Tesseract OCR </a>。衷心感谢媒体作家<a class="np nq ep" href="https://medium.com/u/8d7beadc096e?source=post_page-----98cd72df73bb--------------------------------" rel="noopener" target="_blank"> Jerome Wu </a>，这个(<a class="ae mk" href="https://tesseract.projectnaptha.com/" rel="noopener ugc nofollow" target="_blank"> Tesseract.js </a>)的纯JavaScript版本已经发布到<a class="ae mk" href="https://github.com/naptha/tesseract.js" rel="noopener ugc nofollow" target="_blank">在线社区</a>。</p><blockquote class="mq mr ms"><p id="9347" class="kv kw mt kx b ky kz jr la lb lc ju ld mu lf lg lh mv lj lk ll mw ln lo lp lq ij bi translated"><em class="iq">对于该应用，需要实现一个</em> <strong class="kx ir"> <em class="iq">自托管</em> </strong> <em class="iq">版本的Tesseract.js v2，以支持</em> <strong class="kx ir"> <em class="iq">离线使用</em> </strong> <em class="iq">和</em> <strong class="kx ir"> <em class="iq">移植</em> </strong> <em class="iq">。</em></p></blockquote><h2 id="5b41" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated"><strong class="ak">步骤一。</strong>检索Tesseract.js v2的以下4个文件</h2><p id="c525" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">-<a class="ae mk" href="https://raw.githubusercontent.com/incubated-geek-cc/Text-To-Speech-App/main/js/tesseract/tesseract.min.js" rel="noopener ugc nofollow" target="_blank">tessera CT . min . js</a><br/>-<a class="ae mk" href="https://raw.githubusercontent.com/incubated-geek-cc/Text-To-Speech-App/main/js/tesseract/worker.min.js" rel="noopener ugc nofollow" target="_blank">worker . min . js</a><br/>-<a class="ae mk" href="https://raw.githubusercontent.com/incubated-geek-cc/Text-To-Speech-App/main/js/tesseract/tesseract-core.wasm.js" rel="noopener ugc nofollow" target="_blank">tessera CT-core . wasm . js</a><br/>-<a class="ae mk" href="/incubated-geek-cc/Text-To-Speech-App/blob/main/js/tesseract/lang-data/4.0.0_best/eng.traineddata.gz?raw=true" rel="noopener ugc nofollow" target="_blank">eng.traineddata.gz</a>*</p><p id="8810" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">*为简单起见，所有要提取的文本都假定为<strong class="kx ir">英文</strong></p><ul class=""><li id="28d3" class="nr ns iq kx b ky kz lb lc le nt li nu lm nv lq nw nx ny nz bi translated">导入插件</li></ul><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="e6ac" class="of ls iq ob b be og oh l oi oj">&lt;script src='js/tesseract/tesseract.min.js'&gt;&lt;/script&gt;</span></pre><ul class=""><li id="bc48" class="nr ns iq kx b ky kz lb lc le nt li nu lm nv lq nw nx ny nz bi translated">继续设置工人属性</li></ul><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="f251" class="of ls iq ob b be og oh l oi oj">const worker = Tesseract.createWorker({<br/>  workerPath: 'js/tesseract/worker.min.js',<br/>  langPath: 'js/tesseract/lang-data/4.0.0_best',<br/>  corePath: 'js/tesseract/tesseract-core.wasm.js'<br/>});</span></pre><p id="c454" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">注意:</strong>由于app是自托管的，相对路径需要重新定义为本地相对路径。</p><h2 id="7027" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated"><strong class="ak">第二步。</strong>创建上传图像的用户界面</h2><ul class=""><li id="3f9c" class="nr ns iq kx b ky ml lb mm le ok li ol lm om lq nw nx ny nz bi translated">HTML文件输入</li></ul><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="813a" class="of ls iq ob b be og oh l oi oj">&lt;input id='uploadImg' type='file' /&gt;</span></pre><ul class=""><li id="73a8" class="nr ns iq kx b ky kz lb lc le nt li nu lm nv lq nw nx ny nz bi translated">JavaScript代码片段</li></ul><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="906e" class="of ls iq ob b be og oh l oi oj">var uploadImg=document.getElementById('uploadImg');<br/>function readFileAsDataURL(file) {<br/>  return new Promise((resolve,reject) =&gt; {<br/>    let fileredr = new FileReader();<br/>    fileredr.onload = () =&gt; resolve(fileredr.result);<br/>    fileredr.onerror = () =&gt; reject(fileredr);<br/>    fileredr.readAsDataURL(file);<br/>  });<br/>}<br/>uploadImg.addEventListener('change', (ev) =&gt; {<br/>  const worker = Tesseract.createWorker({<br/>    workerPath: 'js/tesseract/worker.min.js',<br/>    langPath: 'js/tesseract/lang-data/4.0.0_best',<br/>    corePath: 'js/tesseract/tesseract-core.wasm.js'<br/>  });<br/>    <br/>  let file = ev.currentTarget.files[0];<br/>  if(!file) return;<br/>  readFileAsDataURL(file).then((b64str) =&gt; {<br/>    return new Promise((resolve,reject) =&gt; {<br/>      const img = new Image();<br/>      img.onload = () =&gt; resolve(img)<br/>      img.onerror = (err) =&gt; reject(err);<br/>      img.src = b64str;<br/>    });<br/>  }).then((loadedImg) =&gt; {<br/>    /* TO DO LOGIC HERE */ // In Step 3)<br/>  });<br/>}, false);</span></pre><ul class=""><li id="aea5" class="nr ns iq kx b ky kz lb lc le nt li nu lm nv lq nw nx ny nz bi translated">注意，前面实例化<code class="fe on oo op ob b">worker</code>的代码片段已经嵌套在事件函数中。</li><li id="f6a7" class="nr ns iq kx b ky oq lb or le os li ot lm ou lq nw nx ny nz bi translated">由于<code class="fe on oo op ob b">worker</code>只读入一个<code class="fe on oo op ob b">&lt;img&gt;</code>元素，<code class="fe on oo op ob b">new Image()</code>被初始化为src属性，作为上传图像的base64编码数据。</li></ul><h2 id="cdcf" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated"><strong class="ak">第三步。</strong>实现Tesseract API提取图像文本</h2><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="7912" class="of ls iq ob b be og oh l oi oj">(async () =&gt; {<br/>  await worker.load();<br/>  await worker.loadLanguage('eng');<br/>  await worker.initialize('eng');<br/>    <br/>  let result=await worker.recognize(loadedImg);<br/>  let extractedData=result.data;<br/>    <br/>  let wordsArr=extractedData.words;<br/>  let combinedText='';<br/>  for(let w of wordsArr) {<br/>    combinedText+=(w.text)+' ';<br/>  }<br/>  inputTxt.value=combinedText;<br/>  await worker.terminate();<br/>})();</span></pre><h2 id="10bb" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">第一部分实施的预览:</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/806d51f957adff3d7e8983630507e5a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*yv3K9jUTBEoO115r7yXSOQ.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Screencapture by Author | Upon upload of image, Tesseract-OCR processes file and extracts text into the textarea</figcaption></figure><h2 id="d154" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">🚩检查点——如图所示，第一部分利用Tesseract-OCR来实现这个应用程序的图像到文本方面。</h2><h2 id="2783" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">第二部分。使用<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API" rel="noopener ugc nofollow" target="_blank">网络语音API </a>将文本转换为语音</h2><p id="9353" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">为了将web文本转换成浏览器语音，应用程序的第二部分利用了Web API: <a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis" rel="noopener ugc nofollow" target="_blank">语音合成</a></p><p id="6b83" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">重用来自<a class="ae mk" href="https://github.com/mdn/web-speech-api/tree/master/speak-easy-synthesis" rel="noopener ugc nofollow" target="_blank">GitHub Repo we b-Speech-API</a>的JavaScript代码片段，该应用的文本到语音方面呈现如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/6d97e29058f496c4af0e30817e5bfbcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZfYL_Ff-4bp5Vgsdojc2Cg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Illustration by Author | After text extraction from image, selecting the “Play” Button would convert input text to browser speech. | Language Dialect + Speed + Pitch can be customised with displayed form inputs.</figcaption></figure><h2 id="3c1b" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">完整的源代码可以在我的GitHub repo: <a class="ae mk" href="https://github.com/incubated-geek-cc/Text-To-Speech-App" rel="noopener ugc nofollow" target="_blank">文本到语音转换应用</a>或者在<a class="ae mk" href="https://incubated-geek-cc.github.io/Text-To-Speech-App/" rel="noopener ugc nofollow" target="_blank">演示</a>中试用！</h2></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="dc67" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">潜在的使用案例</h2><ul class=""><li id="47ab" class="nr ns iq kx b ky ml lb mm le ok li ol lm om lq nw nx ny nz bi translated">业务文档的数据输入</li><li id="515f" class="nr ns iq kx b ky oq lb or le os li ot lm ou lq nw nx ny nz bi translated">视障者辅助设备</li><li id="b68b" class="nr ns iq kx b ky oq lb or le os li ot lm ou lq nw nx ny nz bi translated">将扫描的文档转换为机器可读的文本以进行数据处理</li></ul></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="07db" class="lr ls iq bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">个人评论</h2><p id="4053" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">虽然对数据分析和人工智能/机器学习等数据驱动领域的期望继续呈指数级增长，但对数字数据收集的需求也在不断增长。</p><p id="f8fb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">随着<a class="ae mk" href="https://webassembly.org/" rel="noopener ugc nofollow" target="_blank"> WASM </a>(例如C/C++到JavaScript)的同步创新与现有工具(例如<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/API" rel="noopener ugc nofollow" target="_blank">JavaScript Web API</a>)的结合使用，这一一次性实现证明了使用客户端JavaScript创建的独立文本到语音(即“朗读”)应用程序是可行的🤩</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="ec1e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">非常感谢你坚持到这篇文章的结尾！❤希望你已经发现这个实现令人敬畏和有见地。如果您想了解更多与GIS、数据分析&amp; Web应用相关的内容，请随时<a class="ae mk" href="https://medium.com/@geek-cc" rel="noopener">关注我的Medium </a>。会非常感激—😀</p><p id="6d47" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">— 🌮请给我买一份玉米卷🎀˶❛◡❛)</p><div class="ox oy gp gr oz pa"><a href="https://geek-cc.medium.com/membership" rel="noopener follow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd ir gy z fp pf fr fs pg fu fw ip bi translated">通过我的推荐链接加入灵媒——李思欣·崔</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">获得李思欣·崔和其他作家在媒体上的所有帖子！😃您的会员费直接…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">geek-cc.medium.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po kp pa"/></div></div></a></div><p id="43a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mt">更多内容看</em> <a class="ae mk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mt">说白了。报名参加我们的</em> <a class="ae mk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mt">免费周报</em> </strong> </a> <em class="mt">。关注我们关于</em><a class="ae mk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="mt">Twitter</em></strong></a><em class="mt">和</em><a class="ae mk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="mt">LinkedIn</em></strong></a><em class="mt">。加入我们的</em> <a class="ae mk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mt">社区</em> </strong> </a> <em class="mt">。</em></strong></a></p></div></div>    
</body>
</html>