<html>
<head>
<title>Get the Value of an Input When the Enter Key is Pressed in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中按下Enter键时获取输入的值</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-get-input-value-on-enter-e634084ef47b?source=collection_archive---------10-----------------------#2022-09-28">https://javascript.plainenglish.io/react-get-input-value-on-enter-e634084ef47b?source=collection_archive---------10-----------------------#2022-09-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="a719" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">一个关于如何在React中按下Enter键时轻松获取输入字段值的教程。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a5160bf3f59bb52f50705543cff78f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tpF38ysNM2zBU8w4nMvqsQ.png"/></div></div></figure><p id="03e0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在React中按下Enter键时获取输入值:</p><ol class=""><li id="4bcb" class="lk ll in kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">创建一个状态变量来存储输入的值。</li><li id="a7fc" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">在输入上设置一个<code class="fe ly lz ma mb b">onChange</code>事件处理程序，以便在输入字段值改变时更新状态变量。</li><li id="19a3" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">在输入上设置一个<code class="fe ly lz ma mb b">onKeyDown</code>事件处理程序。</li><li id="063d" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">在检查按下的键是Enter之后，使用状态变量访问事件处理程序中的输入值。</li></ol><p id="67f5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><p id="c492" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ly lz ma mb b">App.js</code></p><pre class="kd ke kf kg gt mc mb md me aw mf bi"><span id="c7d7" class="mg mh in mb b gy mi mj l mk ml">import { useState } from 'react';</span><span id="2af4" class="mg mh in mb b gy mm mj l mk ml">export default function App() {<br/>  const [message, setMessage] = useState('');</span><span id="c3cb" class="mg mh in mb b gy mm mj l mk ml">  const [updated, setUpdated] = useState('');</span><span id="b907" class="mg mh in mb b gy mm mj l mk ml">  const handleChange = (event) =&gt; {<br/>    setMessage(event.target.value);<br/>  };</span><span id="e485" class="mg mh in mb b gy mm mj l mk ml">  const handleKeyDown = (event) =&gt; {<br/>    if (event.key === 'Enter') {<br/>      // 👇 Get input value<br/>      setUpdated(message);<br/>    }<br/>  };</span><span id="b340" class="mg mh in mb b gy mm mj l mk ml">  return (<br/>    &lt;div&gt;<br/>      &lt;input<br/>        type="text"<br/>        id="message"<br/>        name="message"<br/>        value={message}<br/>        onChange={handleChange}<br/>        onKeyDown={handleKeyDown}<br/>      /&gt;</span><span id="6285" class="mg mh in mb b gy mm mj l mk ml">      &lt;h2&gt;Message: {message}&lt;/h2&gt;</span><span id="f331" class="mg mh in mb b gy mm mj l mk ml">      &lt;h2&gt;Updated: {updated}&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/4d8cbdc25950ec9ce04058aa912134f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/0*ttghk6SkpB1YhKQq.gif"/></div></figure><p id="f96f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用<code class="fe ly lz ma mb b">useState()</code>钩子，我们创建一个状态变量(<code class="fe ly lz ma mb b">message</code>)来存储输入字段的当前值。我们还创建了另一个状态变量(<code class="fe ly lz ma mb b">updated</code>)，当Enter键被按下时，它将被输入字段值更新。</p><p id="4cfd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们在输入字段上设置了一个<code class="fe ly lz ma mb b">onChange</code>事件处理程序，以便在输入值改变时调用这个处理程序。在处理程序中，我们使用<code class="fe ly lz ma mb b">event</code>对象的<code class="fe ly lz ma mb b">target</code>属性来访问表示<code class="fe ly lz ma mb b">input</code>元素的对象。该对象的<code class="fe ly lz ma mb b">value</code>属性包含输入值，因此我们将其传递给<code class="fe ly lz ma mb b">setMessage()</code>以更新<code class="fe ly lz ma mb b">message</code>，这反映在页面上。</p><p id="1b7e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在设置了受控输入之后，我们现在可以在<code class="fe ly lz ma mb b">handleChange</code>处理程序之外使用<code class="fe ly lz ma mb b">message</code>来访问输入字段的当前值。</p><p id="8086" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们使用<code class="fe ly lz ma mb b">event.key</code>属性在<code class="fe ly lz ma mb b">onKeyDown</code>事件处理程序中获取按键。确保该键被输入后，我们使用<code class="fe ly lz ma mb b">setUpdated(message)</code>用当前输入字段值更新<code class="fe ly lz ma mb b">updated</code>变量。</p><h1 id="8fda" class="mo mh in bd mp mq mr ms mt mu mv mw mx jt my ju mz jw na jx nb jz nc ka nd ne bi translated">用<code class="fe ly lz ma mb b">event.target</code>回车获取输入值</h1><p id="b244" class="pw-post-body-paragraph ko kp in kq b kr nf jo kt ku ng jr kw kx nh kz la lb ni ld le lf nj lh li lj ig bi translated">我们还可以使用<code class="fe ly lz ma mb b">Event</code>对象的<code class="fe ly lz ma mb b">target.value</code>属性来获取输入的值。这在我们没有用状态变量跟踪输入值的情况下是有用的，例如，不受控制的输入。</p><pre class="kd ke kf kg gt mc mb md me aw mf bi"><span id="3272" class="mg mh in mb b gy mi mj l mk ml">import { useState } from 'react';</span><span id="9a81" class="mg mh in mb b gy mm mj l mk ml">export default function App() {<br/>  const [updated, setUpdated] = useState('');</span><span id="2460" class="mg mh in mb b gy mm mj l mk ml">  const handleKeyDown = (event) =&gt; {<br/>    if (event.key === 'Enter') {<br/>      setUpdated(event.target.value);<br/>    }<br/>  };</span><span id="77f0" class="mg mh in mb b gy mm mj l mk ml">  return (<br/>    &lt;div&gt;<br/>      &lt;input<br/>        type="text"<br/>        id="message"<br/>        name="message"<br/>        onKeyDown={handleKeyDown}<br/>      /&gt;</span><span id="e79b" class="mg mh in mb b gy mm mj l mk ml">      &lt;h2&gt;Updated: {updated}&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/db404aafa91ef6276bac01632724fb7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/0*q4sHZOOuLoiiNDgw.gif"/></div></figure><h1 id="6b78" class="mo mh in bd mp mq mr ms mt mu mv mw mx jt my ju mz jw na jx nb jz nc ka nd ne bi translated">用ref输入时获取输入值</h1><p id="1a75" class="pw-post-body-paragraph ko kp in kq b kr nf jo kt ku ng jr kw kx nh kz la lb ni ld le lf nj lh li lj ig bi translated">当Enter键被按下时，我们也可以使用ref来获取非受控输入的值。</p><pre class="kd ke kf kg gt mc mb md me aw mf bi"><span id="4db3" class="mg mh in mb b gy mi mj l mk ml">import { useRef, useState } from 'react';</span><span id="99d9" class="mg mh in mb b gy mm mj l mk ml">export default function App() {<br/>  const inputRef = useRef(null);</span><span id="51ec" class="mg mh in mb b gy mm mj l mk ml">  const [updated, setUpdated] = useState('');</span><span id="88fc" class="mg mh in mb b gy mm mj l mk ml">  const handleKeyDown = (event) =&gt; {<br/>    if (event.key === 'Enter') {<br/>      setUpdated(inputRef.current.value);<br/>    }<br/>  };</span><span id="33b8" class="mg mh in mb b gy mm mj l mk ml">  return (<br/>    &lt;div&gt;<br/>      &lt;input<br/>        ref={inputRef}<br/>        type="text"<br/>        id="message"<br/>        name="message"<br/>        onKeyDown={handleKeyDown}<br/>      /&gt;</span><span id="8cee" class="mg mh in mb b gy mm mj l mk ml">      &lt;h2&gt;Updated: {updated}&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="d292" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">受控输入中的数据由React state处理，而非受控输入中的数据由DOM本身处理。这就是为什么上面例子中的<code class="fe ly lz ma mb b">input</code>没有设置<code class="fe ly lz ma mb b">value</code>道具或<code class="fe ly lz ma mb b">onChange</code>事件处理程序。相反，我们使用React ref访问输入字段值。当输入中的文本发生变化时，DOM会更新这个值。</p><p id="e667" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们用<code class="fe ly lz ma mb b">useRef()</code>钩子创建一个ref对象，并将其设置为<code class="fe ly lz ma mb b">input</code>的<code class="fe ly lz ma mb b">ref</code>道具。这样做将ref对象的<code class="fe ly lz ma mb b">current</code>属性设置为表示<code class="fe ly lz ma mb b">input</code>元素的DOM对象。</p><p id="d8f5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ly lz ma mb b">useRef()</code>返回一个可变的ref对象，该对象在组件更新时不改变值。此外，修改该对象的<code class="fe ly lz ma mb b">current</code>属性值不会导致重新渲染。这与从<code class="fe ly lz ma mb b">useState()</code>返回的<code class="fe ly lz ma mb b">setState</code>更新功能相反。</p><p id="9204" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">尽管React文档建议使用受控组件，但非受控组件也有一些优势。如果表单非常简单，不需要即时验证，并且只需要在提交表单时访问值，那么您可能更喜欢使用它们。</p></div><div class="ab cl nk nl hr nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ig ih ii ij ik"><p id="a4f4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nr">最初发表于</em><a class="ae ns" href="https://cbdev.link/c57a52" rel="noopener ugc nofollow" target="_blank"><em class="nr">codingbeautydev.com</em></a></p><h1 id="6738" class="mo mh in bd mp mq mr ms mt mu mv mw mx jt my ju mz jw na jx nb jz nc ka nd ne bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph ko kp in kq b kr nf jo kt ku ng jr kw kx nh kz la lb ni ld le lf nj lh li lj ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae ns" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>