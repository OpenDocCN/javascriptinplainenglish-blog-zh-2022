<html>
<head>
<title>Local Storage Vs. Session Storage in JavaScript — A Comprehensive Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的本地存储与会话存储——综合指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/local-storagevs-session-storage-in-javascript-a-comprehensive-guide-df887398e69?source=collection_archive---------9-----------------------#2022-07-13">https://javascript.plainenglish.io/local-storagevs-session-storage-in-javascript-a-comprehensive-guide-df887398e69?source=collection_archive---------9-----------------------#2022-07-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5ac0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript中的Web存储API</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/30f2585c65cdee872a9b1576419bf053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SNaQhsa09bU0XS9DC_sHyw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by: <a class="ae ks" href="https://unsplash.com/@writecodenow" rel="noopener ugc nofollow" target="_blank"><strong class="bd kt">Boitumelo Phetla</strong></a><strong class="bd kt"> </strong>on <a class="ae ks" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">unsplash</a></figcaption></figure><p id="ac35" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">大多数web应用程序需要在用户的浏览器中存储一些数据。这些数据可能包括用户偏好，如网站颜色主题、深色或浅色模式，以及来自服务器的静态数据。web应用程序将使用这些数据来正常运行。在web浏览器中拥有安全的数据保存机制至关重要。</p><p id="447d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><em class="lq"/><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="lq">Web存储API </em> </strong> </a> <em class="lq">提供了安全机制，通过这些机制，浏览器可以存储键/值对，这比使用</em><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Glossary/Cookie" rel="noopener ugc nofollow" target="_blank"><em class="lq">cookie</em></a><em class="lq">要直观得多。</em></p><p id="7771" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在HTML5之前，应用程序数据必须存储在<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Glossary/Cookie" rel="noopener ugc nofollow" target="_blank">cookie</a>中，包含在每个服务器请求中。与cookies不同，存储限制要大得多(至少5MB ),并且信息永远不会传输到服务器。Web存储是基于源的(基于域和协议)。来自同一个源的所有页面可以存储和访问相同的数据。</p><p id="c69f" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">所有主流浏览器都支持Web存储API。以下是支持Web存储API的最低浏览器版本:</p><ul class=""><li id="76db" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">谷歌浏览器:4</li><li id="6f56" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">火狐浏览器:3.5</li><li id="5b58" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">边缘:12</li><li id="04ca" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">Safari: 4</li><li id="d349" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">歌剧:10.5</li></ul><p id="cdc9" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">Web存储API提供了两个用于在客户端浏览器中保存数据的对象。</p><ol class=""><li id="471c" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp mf lx ly lz bi translated"><code class="fe mg mh mi mj b">window.localStorage</code></li><li id="dcbf" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp mf lx ly lz bi translated"><code class="fe mg mh mi mj b">window.sessionStorage</code></li></ol><p id="78dc" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在浏览器中使用网络存储之前，我们可以按如下方式检查<code class="fe mg mh mi mj b">localStorage</code>和<code class="fe mg mh mi mj b">sessionStorage</code>的浏览器兼容性。</p><pre class="kd ke kf kg gt mk mj ml mm aw mn bi"><span id="4787" class="mo mp in mj b gy mq mr l ms mt">if (typeof Storage !== 'undefined') {<br/>   <em class="lq">// Support Web Storage API<br/></em>} else {<br/>   <em class="lq">// No support<br/></em>}</span></pre><h2 id="3790" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">局部存储器</h2><p id="f0c9" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated"><code class="fe mg mh mi mj b">localStorage</code>对象允许在客户端的浏览器中存储数据，并且没有截止日期。这意味着当浏览器关闭时，数据不会被删除，并且可用于将来的会话。</p><h2 id="c273" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">会话存储</h2><p id="bace" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated"><code class="fe mg mh mi mj b">sessionStorage</code> object允许在客户端浏览器中存储一个会话的数据。当浏览器窗口关闭时，数据被删除。</p></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><p id="142c" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><code class="fe mg mh mi mj b">localStorage</code>和<code class="fe mg mh mi mj b">sessionStorage</code>都提供了五种处理存储数据的方法。</p><ol class=""><li id="b916" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp mf lx ly lz bi translated"><code class="fe mg mh mi mj b">setItem()</code></li><li id="32cb" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp mf lx ly lz bi translated"><code class="fe mg mh mi mj b">getItem()</code></li><li id="45d2" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp mf lx ly lz bi translated"><code class="fe mg mh mi mj b">removeItem()</code></li><li id="d7ca" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp mf lx ly lz bi translated"><code class="fe mg mh mi mj b">clear()</code></li><li id="6985" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp mf lx ly lz bi translated"><code class="fe mg mh mi mj b">key()</code></li></ol><p id="f7bc" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">所有数据将以字符串形式保存到存储器中。如果我们正在保存<code class="fe mg mh mi mj b">Arrays</code>，<code class="fe mg mh mi mj b">Objects</code>..等等，这些数据在保存到存储器之前应该被转换成字符串。</p><h2 id="13eb" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">将数据保存到存储器</h2><p id="dba5" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated">可以使用<code class="fe mg mh mi mj b">setItem()</code>方法将数据保存到存储器中。<code class="fe mg mh mi mj b">setItem() </code>方法接受参数:一个键和一个值。稍后可以引用该键来检索附加到它的值。</p><pre class="kd ke kf kg gt mk mj ml mm aw mn bi"><span id="751d" class="mo mp in mj b gy mq mr l ms mt">const age = 30;<br/>const person = {<br/>  id: 1,<br/>  name: 'John Doe',<br/>};<br/>const names = ['John', 'Mike'];</span><span id="2c15" class="mo mp in mj b gy nx mr l ms mt">sessionStorage.setItem('age', age);<br/>localStorage.setItem('person', JSON.stringify(person));<br/>localStorage.setItem('names', JSON.stringify(names));</span></pre><p id="7629" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">您可以使用浏览器的开发工具查看存储的数据，如下所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ny"><img src="../Images/29b998a3a60f2d11dda598dd588f7606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*flRs0ueLqYe7f9pKVrUztA.png"/></div></div></figure><h2 id="5d23" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">从存储器中检索数据</h2><p id="0086" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated">可以使用<code class="fe mg mh mi mj b">getItem()</code>方法从存储器中检索存储的数据。方法接受一个参数:一个键和与该键相关的值将被返回。</p><p id="8960" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">使用<code class="fe mg mh mi mj b">person</code>键检索我们在上面的代码示例中保存的<code class="fe mg mh mi mj b">person</code>对象。</p><pre class="kd ke kf kg gt mk mj ml mm aw mn bi"><span id="0118" class="mo mp in mj b gy mq mr l ms mt">localStorage.getItem('person');<br/>// "{"id":1,"name":"John Doe"}"</span></pre><p id="26c8" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">由于检索的数据是一个字符串，我们需要在访问<code class="fe mg mh mi mj b">person</code>对象的属性之前将它传递给一个<code class="fe mg mh mi mj b">JSON</code>对象。</p><pre class="kd ke kf kg gt mk mj ml mm aw mn bi"><span id="61d5" class="mo mp in mj b gy mq mr l ms mt">const result = localStorage.getItem('person');<br/>const person = JSON.parse(result);<br/>console.log(person.name); // John Doe</span></pre><h2 id="15ae" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">从存储中删除数据</h2><p id="93c4" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated">使用<code class="fe mg mh mi mj b">removeItem()</code>方法可以删除存储的数据。<code class="fe mg mh mi mj b">removeItem()</code>方法接受一个参数:一个键和与该键相关联的值将从存储中删除(如果存在的话)。如果没有任何项目与给定的键相关联，此方法将不执行任何操作。</p><p id="cfb0" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">从<code class="fe mg mh mi mj b">sessionStorage</code>上取下<code class="fe mg mh mi mj b">age</code>，从<code class="fe mg mh mi mj b">localStorage</code>上取下<code class="fe mg mh mi mj b">person</code>，步骤如下。</p><pre class="kd ke kf kg gt mk mj ml mm aw mn bi"><span id="d528" class="mo mp in mj b gy mq mr l ms mt">sessionStorage.<!-- -->removeItem<!-- -->('age');<br/>localStorage.<!-- -->removeItem<!-- -->('person');</span></pre><h2 id="8d3b" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">从存储器中删除所有数据</h2><p id="1573" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated">使用<code class="fe mg mh mi mj b">clear()</code>方法可以删除所有存储的数据。调用此方法时，会清除该域的所有记录的整个存储。它不接收任何参数。</p><pre class="kd ke kf kg gt mk mj ml mm aw mn bi"><span id="1d53" class="mo mp in mj b gy mq mr l ms mt">sessionStorage.clear();<br/>localStorage.clear();</span></pre><h2 id="305c" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">获取存储对象中特定位置的键的名称</h2><p id="fb51" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated"><code class="fe mg mh mi mj b">key()</code>方法允许获取一个键的名称。<code class="fe mg mh mi mj b">key()</code>方法接受一个参数:number，它是存储对象中特定条目的索引。</p><pre class="kd ke kf kg gt mk mj ml mm aw mn bi"><span id="a1f9" class="mo mp in mj b gy mq mr l ms mt">localStorage.key(index)</span></pre><p id="0712" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在我们需要遍历存储对象的键的情况下，<code class="fe mg mh mi mj b">key()</code>方法非常方便，它允许将一个数字或索引传递给<code class="fe mg mh mi mj b">localStorage</code>或<code class="fe mg mh mi mj b">sessionStorage</code>来检索键的名称。</p></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><p id="dfdc" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io"> <em class="lq">存储Web API很容易使用，也很容易误用。</em> </strong></p><p id="6d3e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><code class="fe mg mh mi mj b">localStorage</code>和<code class="fe mg mh mi mj b">sessionStorage</code>有以下限制。</p><ul class=""><li id="87c5" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">它不能替代基于服务器的数据库，因为信息只存储在浏览器上。</li><li id="7e3f" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">所有主流浏览器的存储空间都被限制在5MB以内。</li><li id="43bf" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">存储是同步的，这意味着每个被调用的操作只会一个接一个地执行。</li></ul><p id="6bbc" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><strong class="kw io"> <em class="lq">请勿</em> </strong> <em class="lq">使用存储来保存敏感数据。原因是，存储是非常不安全的，因为它没有任何形式的数据保护，可以被你网页上的任何代码访问。</em></p><h2 id="1e28" class="mo mp in bd mu mv mw dn mx my mz dp na ld nb nc nd lh ne nf ng ll nh ni nj nk bi translated">结论</h2><p id="5fc6" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated"><code class="fe mg mh mi mj b">localStorage</code>和<code class="fe mg mh mi mj b">sessionStorage</code>都允许在用户的浏览器中存储数据。尽管如此，关闭浏览器窗口/选项卡后，保存在<code class="fe mg mh mi mj b">sessionStorage</code>对象中的数据将被删除。尽管如此，<code class="fe mg mh mi mj b">localStorage</code>关闭浏览器后，数据不会被删除，这些数据也将被保留以供将来的会话使用。</p><p id="50e8" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">感谢阅读。😍</p><h1 id="0d8e" class="nz mp in bd mu oa ob oc mx od oe of na jt og ju nd jw oh jx ng jz oi ka nj oj bi translated">你是JavaScript爱好者吗？</h1><p id="b89b" class="pw-post-body-paragraph ku kv in kw b kx nl jo kz la nm jr lc ld nn lf lg lh no lj lk ll np ln lo lp ig bi translated">请阅读下面我写的文章，了解一些关于JavaScript的令人兴奋的事情。</p><ul class=""><li id="9d8a" class="lr ls in kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><a class="ae ks" href="https://medium.com/@sudarshanadayananda/what-is-a-closure-in-js-eab2fcb68ccc" rel="noopener"> <em class="lq">什么是JavaScript中的闭包——综合指南</em> </a></li><li id="2488" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/arrow-functions-vs-regular-functions-in-js-fa1a1f235c86"> <em class="lq">箭头函数与JavaScript中的常规函数——综合指南</em> </a></li><li id="6525" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><a class="ae ks" href="https://medium.com/javascript-in-plain-english/what-is-strict-mode-in-javascript-a-comprehensive-guide-b3fcd9daa220" rel="noopener"> <em class="lq">什么是JavaScript中的严格模式—综合指南</em> </a></li><li id="8fa8" class="lr ls in kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/javascript-hoisting-a-comprehensive-guide-89211c219d45"> <em class="lq"> JavaScript提升—综合指南</em> </a></li></ul><p id="6c1e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">希望你在阅读这篇文章时能学到一些新东西。请 <a class="ae ks" href="https://medium.com/@sudarshanadayananda" rel="noopener"> <strong class="kw io"> <em class="lq">关注我</em> </strong> </a> <em class="lq">以后阅读这类文章。干杯！</em></p><p id="cd5d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><em class="lq">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="lq">plain English . io</em></strong></a><em class="lq">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="lq">免费周报</em> </strong> </a> <em class="lq">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="lq">Twitter</em></strong></a><strong class="kw io"><em class="lq"/></strong><em class="lq">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="lq">LinkedIn</em></strong></a><em class="lq">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="lq">社区不和谐</em> </strong> </a> <em class="lq">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kw io"> <em class="lq">人才集体</em> </strong> </a> <em class="lq">。</em></p></div></div>    
</body>
</html>