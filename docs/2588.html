<html>
<head>
<title>3 Steps to Convert SVGs to Image File Formats (.PNG) in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将SVG转换为图像文件格式的3个步骤。PNG)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-steps-to-convert-svgs-to-image-file-formats-png-in-javascript-5394bf837185?source=collection_archive---------1-----------------------#2022-06-19">https://javascript.plainenglish.io/3-steps-to-convert-svgs-to-image-file-formats-png-in-javascript-5394bf837185?source=collection_archive---------1-----------------------#2022-06-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3bc8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">包括完整的源代码和用例演示。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/48a725a13484cf3f545725e8232a11ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XYrzJBZmK6_McXggJfQdMA.png"/></div></div></figure><p id="c1e8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在大多数情况下，任何工作场所的任务都需要在日常工作中使用数字技术。因此，基于网络的免安装工具的出现，从<a class="ae ln" href="https://smallpdf.com/edit-pdf" rel="noopener ugc nofollow" target="_blank">在线编辑PDF文件</a>到<a class="ae ln" href="https://www.mindmup.com/" rel="noopener ugc nofollow" target="_blank">思维导图工具</a>，无疑为许多行业和领域的工作者提供了许多便利。</p><h1 id="f9bb" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">基本原理</h1><p id="97f3" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">然而，重要的是要认识到，由于以下(经常被忽视的)原因，属于我们社会关键部分的少数设置不能使用第三方在线资源:</p><ul class=""><li id="1d49" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">实施严格的网络安全协议(禁止在线内容上传)</li><li id="774c" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">互联网连接差或不可用</li></ul><blockquote class="mz"><p id="8e1b" class="na nb iq bd nc nd ne nf ng nh ni lm dk translated">因此，一个实用的解决方法是利用客户端JavaScript来实现所需的功能。</p></blockquote><p id="e065" class="pw-post-body-paragraph kr ks iq kt b ku nj jr kw kx nk ju kz la nl lc ld le nm lg lh li nn lk ll lm ij bi translated">为了构建一个将SVG(可缩放矢量图形)文件转换为PNG(可移植网络图形)文件的工具，所需的<strong class="kt ir"> 3个步骤</strong>将如下所示。</p><h1 id="694b" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">实施细节</h1><h2 id="b428" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated">第一步。检索SVG数据内容</h2><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="08ff" class="of lp iq ob b be og oh l oi oj">function readFileAsText(file) {<br/>   return new Promise((resolve,reject) =&gt; {<br/>      let fileredr = new FileReader();<br/>      fileredr.onload = () =&gt; resolve(fileredr.result);<br/>      fileredr.onerror = () =&gt; reject(fileredr);<br/>      fileredr.readAsText(file);<br/>   });<br/>}<br/>// Upload SVG file (.svg) file input<br/>var uploadFile = document.getElementById('uploadFile');<br/>uploadFile.addEventListener('change', async (evt) =&gt; {<br/>   var file = evt.currentTarget.files[0];<br/>   var svgStr = await readFileAsText(file); // XML String<br/>   var svgData = new Blob([svgStr], {type: 'image/svg+xml'});<br/>   var DOMURL = window.URL || window.webkitURL || window;<br/>   var b64str = DOMURL.createObjectURL(svgData);<br/>}, false);</span></pre><p id="30d2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意要点</strong></p><ul class=""><li id="d1ea" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">SVG文件上传最初被读取为<strong class="kt ir">明文</strong></li><li id="66e6" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">然后，创建的<a class="ae ln" href="https://developer.mozilla.org/en-US/docs/Web/API/Blob" rel="noopener ugc nofollow" target="_blank"> Blob对象</a>被编码为一个<a class="ae ln" href="https://developer.mozilla.org/en-US/docs/Glossary/Base64" rel="noopener ugc nofollow" target="_blank"> Base64字符串</a></li></ul><h2 id="d285" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated"><strong class="ak">第二步。在HTML5画布上渲染图像—第一部分&amp;第二部分</strong></h2><p id="98b5" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated"><strong class="kt ir">部分I. </strong>嵌入HTML &lt; img &gt;元素</p><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="4a21" class="of lp iq ob b be og oh l oi oj">const loadImage = (url) =&gt; new Promise((resolve, reject) =&gt; {<br/>    const img = new Image(); // alt: document.createElement('img')<br/>    img.addEventListener('load', () =&gt; resolve(img));<br/>    img.addEventListener('error', (err) =&gt; reject(err));<br/>    img.src = url;<br/>});<br/>var _img = await loadImage(b64str);<br/>var imgH=_img.naturalHeight; // original file height<br/>var imgW=_img.naturalWidth; // original file width</span></pre><p id="c618" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二部分。在HTML5画布上绘制图像</p><p id="40a6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，当处理画布元素时，确保使用正确的缩放比例，以免渲染低分辨率图像(<strong class="kt ir">重要！</strong>)。</p><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="5aab" class="of lp iq ob b be og oh l oi oj">const scale = window.devicePixelRatio*2;</span></pre><p id="e765" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在声明了所需的像素密度之后，继续实例化Canvas:</p><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="5f1c" class="of lp iq ob b be og oh l oi oj">var _canvas = document.createElement('canvas');<br/>_canvas.width=imgW;<br/>_canvas.height=imgH;<br/>var _ctx = _canvas.getContext('2d');<br/>_canvas['style']['width'] = `${Math.round(imgW/scale)}px`;<br/>_canvas['style']['height'] = `${Math.round(imgH/scale)}px`;<br/>_canvas['style']['margin'] = '0';<br/>_canvas['style']['padding'] = '0';<br/>_ctx.scale(scale, scale);<br/>_ctx.drawImage(_img, 0, 0, Math.round(imgW/scale), Math.round(imgH/scale));</span></pre><p id="e165" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong> <code class="fe ok ol om ob b">_canvas['style']['height']</code>不等同于<code class="fe ok ol om ob b">_canvas.height</code></p><h2 id="e086" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated">第三步。生成下载链接</h2><pre class="kg kh ki kj gt oa ob oc bn od oe bi"><span id="b485" class="of lp iq ob b be og oh l oi oj">var dwnLink=document.createElement('a');     <br/>// Note: fileName = original .svg filename     dwnLink.download=fileName.substr(0,fileName.lastIndexOf('.'))+'.png';<br/>dwnLink.href=_canvas.toDataURL();<br/>dwnLink.innerText='🔗 Link';<br/>document.getElementById('downloadLink').innerHTML=dwnLink.outerHTML;</span></pre><p id="28fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">测试应用程序</strong></p><ul class=""><li id="9ddc" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">样本SVG文件上传</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="on oo l"/></div></figure><ul class=""><li id="1a81" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">HTML界面</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/83f8b60722816976f081fe0479f6488c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkhKOCFCRPnakaOerjj99w.png"/></div></div><figcaption class="oq or gj gh gi os ot bd b be z dk">Image by Author | Minimalistic interface with file input and download link generated for selection</figcaption></figure><p id="e685" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">完整演示</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/20169f75fd9240419d2471d4d1fcb49b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*HCw7EWBI9LSJCM0FlkDVvQ.gif"/></div><figcaption class="oq or gj gh gi os ot bd b be z dk">Screencapture by Author | SVG file is uploaded and download link to .png image is generated</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/2bbf4914995b09b691a8b807764d1e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:322/format:webp/1*7CpdttGcwZg_hyB2tIpzoQ.png"/></div><figcaption class="oq or gj gh gi os ot bd b be z dk">Image by Author | Output from the above demo (.png)</figcaption></figure><h2 id="5dda" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated">请随意在我的GitHub上检索上面的:<a class="ae ln" href="https://gist.githubusercontent.com/incubated-geek-cc/f4de0fbdb1e8488f1ea7adc18ce66ebd/raw/0192b1076ffd73025115db6f615489d8024fbfbd/svg2png.html" rel="noopener ugc nofollow" target="_blank">svg2png.html</a>或者亲自尝试<a class="ae ln" href="https://incubated-geek-cc.github.io/svg2png/" rel="noopener ugc nofollow" target="_blank">这里</a>！</h2></div><div class="ab cl ow ox hu oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="ij ik il im in"><h2 id="f912" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated">个人评论</h2><p id="5408" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">虽然SVG图像有其明显的优势，如调整大小和渲染时的响应速度和无损分辨率，但它通常更适合web图标设计<em class="pd">(参见下文)</em>。</p><div class="pe pf gp gr pg ph"><a href="https://medium.com/weekly-webtips/transforming-svg-files-into-symbols-for-svg-inline-use-no-internet-required-4cd7c9c84bae" rel="noopener follow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">将svg文件转换为svg内嵌使用的符号(不需要互联网)</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">我这辈子都找不到一个python包来完成这项简单的工作——将svg图像转换成……</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">medium.com</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv kp ph"/></div></div></a></div><p id="7202" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，当处理高度详细的图形(如摄影)或常见平台(如在社交媒体上上传头像)时，更适合将数据嵌入到PNG光栅图像文件中，因为内容编辑相对<strong class="kt ir">容易* </strong>且可用的支持平台范围更广。</p><p id="bd3e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">*虽然PNG光栅图形是基于像素的，但是SVG文件通过复杂的数学算法呈现为XML输出</strong></p></div><div class="ab cl ow ox hu oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="ij ik il im in"><p id="46fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在你知道了！非常感谢你坚持到这篇文章的结尾！❤希望你觉得这个指南很有用，如果你想了解更多GIS、数据分析&amp; Web应用相关的内容，请随时<a class="ae ln" href="https://medium.com/@geek-cc" rel="noopener">关注我的Medium </a>。会非常感激—😀</p><p id="1acb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">— 🌮请给我买一份玉米卷🎀˶❛◡❛)</p><div class="pe pf gp gr pg ph"><a href="https://geek-cc.medium.com/membership" rel="noopener follow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">通过我的推荐链接加入灵媒——李思欣·崔</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">获得李思欣·崔和其他作家在媒体上的所有帖子！😃您的会员费直接…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">geek-cc.medium.com</p></div></div><div class="pq l"><div class="pw l ps pt pu pq pv kp ph"/></div></div></a></div></div><div class="ab cl ow ox hu oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="ij ik il im in"><h1 id="c9ed" class="lo lp iq bd lq lr px lt lu lv py lx ly jw pz jx ma jz qa ka mc kc qb kd me mf bi translated">创建JavaScript数字工具的更多教程:</h1><h2 id="5c3e" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated"><strong class="ak">视频编码</strong></h2><div class="pe pf gp gr pg ph"><a rel="noopener  ugc nofollow" target="_blank" href="/video-to-gif-conversion-with-client-side-javascript-decoding-fps-for-gif-bf96b8bc4d7c"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">使用客户端JavaScript将视频转换为GIF—解码GIF的FPS</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">帧速率= FPS。检索视频的FPS和指定GIF的FPS。包括完整的源代码实现。</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pq l"><div class="qc l ps pt pu pq pv kp ph"/></div></div></a></div><h2 id="c586" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated"><strong class="ak">图像相关内容</strong></h2><div class="pe pf gp gr pg ph"><a href="https://medium.com/weekly-webtips/how-to-resize-an-image-using-client-side-javascript-and-html5-canvas-2fff73d15d0" rel="noopener follow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">如何使用客户端JavaScript和HTML5 Canvas调整图像大小</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">输出图像保留其纵横比和分辨率。启用图像导出。包括完整的代码实现。</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">medium.com</p></div></div><div class="pq l"><div class="qd l ps pt pu pq pv kp ph"/></div></div></a></div><div class="pe pf gp gr pg ph"><a href="https://towardsdatascience.com/build-an-image-pdf-text-extraction-tool-with-tesseract-ocr-using-client-side-javascript-6126031001" rel="noopener follow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">使用客户端JavaScript通过Tesseract OCR构建图像和PDF文本提取工具</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">pdf . js+tessera CT . js—OCR和Web技术的融合。包括完整的代码实现。</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">towardsdatascience.com</p></div></div><div class="pq l"><div class="qe l ps pt pu pq pv kp ph"/></div></div></a></div><div class="pe pf gp gr pg ph"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-encode-image-files-in-base64-with-plain-javascript-4927fa08e063"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">如何用普通JavaScript在Base64中编码图像文件</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">代码实现&amp;链接到离线工具包括在内。</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pq l"><div class="qf l ps pt pu pq pv kp ph"/></div></div></a></div><h2 id="8252" class="no lp iq bd lq np nq dn lu nr ns dp ly la nt nu ma le nv nw mc li nx ny me nz bi translated"><strong class="ak">本地SQLite数据库</strong></h2><div class="pe pf gp gr pg ph"><a href="https://medium.com/weekly-webtips/read-export-sqlite-data-in-a-javascript-enabled-browser-locally-b655deda879d" rel="noopener follow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd ir gy z fp pm fr fs pn fu fw ip bi translated">在本地支持JavaScript的浏览器中读取和导出SQLite数据</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">不需要设置服务器。独立于平台。只是🖱️双击HTML文件。包含完整源代码的链接。</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">medium.com</p></div></div><div class="pq l"><div class="qg l ps pt pu pq pv kp ph"/></div></div></a></div><p id="0f05" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="pd">更多内容请看</em><a class="ae ln" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="pd">plain English . io</em></strong></a><em class="pd">。报名参加我们的</em> <a class="ae ln" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="pd">免费周报</em> </strong> </a> <em class="pd">。关注我们关于</em><a class="ae ln" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="pd">Twitter</em></strong></a><em class="pd">和</em><a class="ae ln" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="pd">LinkedIn</em></strong></a><em class="pd">。查看我们的</em> <a class="ae ln" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="pd">社区不和谐</em> </strong> </a> <em class="pd">加入我们的</em> <a class="ae ln" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="pd">人才集体</em> </strong> </a> <em class="pd">。</em></p></div></div>    
</body>
</html>