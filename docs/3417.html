<html>
<head>
<title>All You Need To Know About JavaScript Promises</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于JavaScript承诺，你需要知道的是</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/all-you-need-to-know-about-javascript-promises-e073d1d1bb7b?source=collection_archive---------10-----------------------#2022-08-25">https://javascript.plainenglish.io/all-you-need-to-know-about-javascript-promises-e073d1d1bb7b?source=collection_archive---------10-----------------------#2022-08-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7f22" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript中的承诺是什么，它们的属性，以及解决它们的方法？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/40aaff5265326b629b7a1a37d502b054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sm-GJtOitbyElfgl"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@alfonsmc10?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alfons Morales</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c081" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript承诺是我们比看起来更经常遇到的事情之一。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="c2c3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您在web应用程序中进行了多少次API调用？所有那些你遇到承诺的时候。在您的API调用和从该API调用收到的数据之间的时间里，JavaScript等待该API返回数据。那个API调用向我们保证，要么它将返回数据，要么它将返回一个错误消息。</p><p id="634a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以这个API调用为例，想象JavaScript承诺为一个具有3种状态的对象:</p><ol class=""><li id="4c4e" class="lw lx in kv b kw kx kz la lc ly lg lz lk ma lo mb mc md me bi translated">Pending:这是当您对后端服务器发出一个fetch调用，JavaScript正在等待服务器的响应时的状态。</li><li id="6ffa" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">已实现:这是API返回所需数据的状态。</li><li id="8a0b" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">拒绝:在这种状态下，您的API返回了您没有预料到的数据，或者您遇到了后端错误。</li></ol><p id="8a26" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以让我们试着模拟和上面解释的一样。</p><p id="c782" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们来看看承诺是什么样的:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/12db66d1eac567b4c94d610c6810e1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*_lh6WU4hcUDNOQHQYa8TlQ.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The output of the above code</figcaption></figure><p id="baa2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这里，我们可以清楚地看到这个承诺有3个属性:</p><ol class=""><li id="8f87" class="lw lx in kv b kw kx kz la lc ly lg lz lk ma lo mb mc md me bi translated">第一个是原型。</li><li id="80ee" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">第二个属性是PromiseState，它表明该承诺仍在等待完成。</li><li id="8172" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">第三个是未定义的承诺结果，只有当我们的承诺被履行或拒绝时才会被设定。</li></ol><p id="0f5a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的promise声明中，我们可以看到我们在promise中传递了一个回调函数作为参数。我们想到的第一个问题是这个函数有什么用？因此，传递的函数对于解析或拒绝承诺是有用的。用一个例子会清楚得多。</p><p id="164f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">例如</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="c74a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们可以看到，我们在第1行定义了一个承诺，并且在声明中传递了一个带有两个参数的箭头函数。resolve和reject这两个参数是回调函数，使用参数来执行。让我们详细地看看它们。</p><h2 id="0ec0" class="mn mo in bd mp mq mr dn ms mt mu dp mv lc mw mx my lg mz na nb lk nc nd ne nf bi translated">解决:</h2><p id="db72" class="pw-post-body-paragraph kt ku in kv b kw ng jo ky kz nh jr lb lc ni le lf lg nj li lj lk nk lm ln lo ig bi translated">这个回调函数有一种特殊的能力，可以改变要履行的承诺的状态，并设置它作为结果接受的值。</p><h2 id="35cc" class="mn mo in bd mp mq mr dn ms mt mu dp mv lc mw mx my lg mz na nb lk nc nd ne nf bi translated">拒绝:</h2><p id="3b1d" class="pw-post-body-paragraph kt ku in kv b kw ng jo ky kz nh jr lb lc ni le lf lg nj li lj lk nk lm ln lo ig bi translated">这个回调函数有一种特殊的能力，可以将承诺的状态更改为rejected，并设置它作为结果接受的值。但是当您想要访问剔除结果时，您必须使用catch块。</p><blockquote class="nl nm nn"><p id="8a0e" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated">重要提示:我们只能拒绝或解决一次承诺。将执行第一条要解决或拒绝的语句，其他语句将被丢弃。</p></blockquote><p id="2a71" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有两种方法可以访问承诺数据:</p><ol class=""><li id="fabe" class="lw lx in kv b kw kx kz la lc ly lg lz lk ma lo mb mc md me bi translated">然后/接住</li><li id="29da" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">异步等待</li></ol><p id="4a19" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们举一个调用API的函数的例子。(API调用返回一个承诺。)</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="6cfe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">回应:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/84e0a96a435d68cd59bd78811188f041.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*5RiKC7_c4h2N5hZG3tALOA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Response of the above function</figcaption></figure><p id="bf1f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如我们所看到的，上面的函数返回了一个承诺，它的状态是履行。现在问题来了，我们如何访问API返回的数据。有两种方法可以解决这个问题。让我们逐一看看这两种方法。</p><p id="1f8d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">方法一:(然后/接住)</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/8b5f8d23e0a813357dda3c610188538f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvWguW0MiGElqwOt5zrIEg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Response of the above program</figcaption></figure><p id="0056" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">方法2:(异步/等待)</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/90048599cd4668b6f81741b96eb9dcd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xgGVC5PIUWa5GYQWWNej_g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Response of the above code</figcaption></figure><p id="1ba3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以上两种方法可以应用于任何从API调用返回承诺的函数。</p><p id="6941" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这篇博客中，我们学习了承诺，它们的特性，以及解决它们的方法。我希望说明是清楚的，如果在理解这篇文章的内容方面有任何困难，评论区总是开放供进一步讨论。</p><p id="e441" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你明白我在这里说的任何话，请鼓掌回应并跟我来，因为它帮助我保持动力，并从我的时间表中抽出时间来写这些文章。这不会花你任何钱，但会帮我很多忙</p><p id="13c1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="no">高拉夫·夏尔马是一个狂热的读者和热情的旅行者。他试图通过传播他的知识和他的生活经历来过一个更有意义和目标的生活！跟随他踏上平衡数字生活和现实生活的新旅程。他住在印度的北阿坎德邦。他在Instagram上的</em><a class="ae ks" href="https://www.instagram.com/golf._.sierra/" rel="noopener ugc nofollow" target="_blank"><em class="no">@高尔夫。_.塞拉</em> </a> <em class="no">。</em></p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="979e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="no">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="no">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="no">免费周报</em> </strong> </a> <em class="no">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="no">推特</em> </strong> </a>，<a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="no">LinkedIn</em></strong></a><em class="no">，</em><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="no">YouTube</em></strong></a><em class="no">，以及</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="no">不和</em> </strong> </a> <em class="no">。</em></strong></a></p></div></div>    
</body>
</html>