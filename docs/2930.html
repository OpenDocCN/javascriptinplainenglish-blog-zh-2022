<html>
<head>
<title>File Validation Using The FileList API in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript中的FileList API进行文件验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/file-validation-using-the-filelist-api-in-javascript-ab0373d61ff0?source=collection_archive---------5-----------------------#2022-07-15">https://javascript.plainenglish.io/file-validation-using-the-filelist-api-in-javascript-ab0373d61ff0?source=collection_archive---------5-----------------------#2022-07-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2ebb" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript中的FileList API有什么功能以及如何使用它。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/2897790f0765b3ac185fd26075ebf93a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lRZWKh1bpgty_22JGb1Vxw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by Joan Gamell on Unsplash</figcaption></figure><p id="a49b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">FileList API使您能够完全控制用户选择的文件，通过它，您可以执行文件验证。</p><p id="04c1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我将向您展示一些可以使用FileList API在文件上验证的东西。</p><p id="b79b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">假设我有一个文件输入如下:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="16ff" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当我重新加载我的HTML页面并选择一些图像时，这就是我如何将所选文件作为一个对象进行检索。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="bd53" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">以下是预告:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/40d13bd3f5e46f3efd558a1ae7b370b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/0*vyaHme8_sz3446Wq.png"/></div></figure><p id="4d32" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您可以看到，文件列表是一个内部具有其他属性的对象。</p><p id="6af7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在文件列表对象中:</p><ul class=""><li id="0aeb" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">您可以通过<code class="fe ma mb mc md b">length</code>属性检索用户选择的文件数量。</li><li id="65a6" class="lr ls in ku b kv me ky mf lb mg lf mh lj mi ln lw lx ly lz bi translated">您可以使用数字索引<code class="fe ma mb mc md b">0...(length - 1)</code>获得关于所选文件的更多信息</li></ul><p id="f134" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">从上图中，你可以看到长度是6，这意味着用户选择了<strong class="ku io"> 6个文件</strong>。因此，这些文件的索引为<strong class="ku io"> 0到(6–1)ie 0到5 </strong>。</p><p id="c60f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果您想遍历用户选择的每个文件，这将非常有用。</p><h1 id="40f7" class="mj mk in bd ml mm mn mo mp mq mr ms mt jt mu ju mv jw mw jx mx jz my ka mz na bi translated">文件列表API对象属性</h1><p id="9d03" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb nd ld le lf ne lh li lj nf ll lm ln ig bi translated">现在让我们更多地讨论包含在所选文件中的属性。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/d0903607ce3a725e3a49ed951b75eeea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AFbZiivX-19I4T48.png"/></div></div></figure><ul class=""><li id="ebc5" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">最后修改<code class="fe ma mb mc md b">timestamp</code></li></ul><p id="62a0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这是作为时间戳提供的文件的最后修改日期。</p><p id="dbda" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="nh">为了控制日期，将时间戳传递给日期构造函数。</em></p><ul class=""><li id="b6e7" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">最后修改日期<code class="fe ma mb mc md b">Date</code></li></ul><p id="0d7f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这是文件上次修改的完整日期。</p><ul class=""><li id="0c7b" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">姓名<code class="fe ma mb mc md b">string</code></li></ul><p id="0d6c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这是文件的名称。</p><ul class=""><li id="fc95" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">尺寸<code class="fe ma mb mc md b">integer</code></li></ul><p id="48cc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这是文件的大小，以字节为单位。</p><ul class=""><li id="b026" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">类型<code class="fe ma mb mc md b">string</code></li></ul><p id="f049" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这是文件的MIME类型。</p><p id="3aeb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">概括地说，下面的图片显示了文件列表API的属性:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/bf55ae7333815a44a8fd6e2950bd7af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o_RqRoRxhHei-Zok.png"/></div></div></figure><h1 id="83de" class="mj mk in bd ml mm mn mo mp mq mr ms mt jt mu ju mv jw mw jx mx jz my ka mz na bi translated">循环浏览文件</h1><p id="b425" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb nd ld le lf ne lh li lj nf ll lm ln ig bi translated">现在，让我们学习如何遍历用户选择的每个文件，并对它们执行验证。</p><p id="ce38" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">FileList Api将数据作为对象提供，因此我们需要编写一个循环来遍历这个对象并检索我们需要的数据。</p><p id="132f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果你还没有看过我之前的一篇关于如何在JavaScript中遍历对象的文章，<a class="ae ni" href="https://simon-ugorji.medium.com/how-to-loop-through-an-object-in-javascript-e1625a5bc3e7" rel="noopener">这里有一篇文章</a>的链接。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="b6f8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当您执行上面的代码时，您将看到我们能够遍历对象并输出每个文件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/35896980aab2905b62193e7662519dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1yphav6theVHy24W.png"/></div></div></figure><p id="9529" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在我们已经准备好验证文件了。</p><h1 id="3554" class="mj mk in bd ml mm mn mo mp mq mr ms mt jt mu ju mv jw mw jx mx jz my ka mz na bi translated">确认</h1><h2 id="1b59" class="nk mk in bd ml nl nm dn mp nn no dp mt lb np nq mv lf nr ns mx lj nt nu mz nv bi translated">尺寸验证</h2><p id="2305" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb nd ld le lf ne lh li lj nf ll lm ln ig bi translated">回想一下，特定文件的大小作为<code class="fe ma mb mc md b">bytes</code>返回。</p><p id="1b17" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">假设允许用户选择不超过2MB的文件，这就是我将如何执行验证。</p><ul class=""><li id="edf4" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">将2MB转换为字节。</li><li id="9afe" class="lr ls in ku b kv me ky mf lb mg lf mh lj mi ln lw lx ly lz bi translated">遍历文件并保存它们的大小。</li><li id="5768" class="lr ls in ku b kv me ky mf lb mg lf mh lj mi ln lw lx ly lz bi translated">检查总大小是否大于2MB。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><h2 id="d238" class="nk mk in bd ml nl nm dn mp nn no dp mt lb np nq mv lf nr ns mx lj nt nu mz nv bi translated">类型验证</h2><p id="8d7b" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb nd ld le lf ne lh li lj nf ll lm ln ig bi translated">现在，假设只允许用户选择图像文件，这就是我执行验证的方式。</p><ul class=""><li id="5995" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">创建一个存储图像文件类型的数组。</li><li id="335d" class="lr ls in ku b kv me ky mf lb mg lf mh lj mi ln lw lx ly lz bi translated">遍历文件，检查是否有任何文件不符合所需的类型。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="e11e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当我选择一些不支持的文件时，会发生以下情况。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nw"><img src="../Images/f6c7dde27fd9e3866a398dbb64094f26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5b39z5laJiPAXeEK.png"/></div></div></figure><h2 id="cf92" class="nk mk in bd ml nl nm dn mp nn no dp mt lb np nq mv lf nr ns mx lj nt nu mz nv bi translated">文件扩展名验证</h2><p id="bc3a" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb nd ld le lf ne lh li lj nf ll lm ln ig bi translated">对于我的最后一次验证，我希望用户提供扩展名为”的文件。png，。jpg，。jpeg”，任何与扩展名不匹配的文件都将被标记为不支持的文件类型。</p><p id="6c3a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">为了执行此验证，我将:</p><ul class=""><li id="231b" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">将所需的文件扩展名存储在数组中。</li><li id="fc14" class="lr ls in ku b kv me ky mf lb mg lf mh lj mi ln lw lx ly lz bi translated">遍历文件并检索它们的名称。</li><li id="3b77" class="lr ls in ku b kv me ky mf lb mg lf mh lj mi ln lw lx ly lz bi translated">从名称中提取文件扩展名，然后将其与所需的文件扩展名进行比较。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="a345" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当我选择不支持的文件时，会发生以下情况:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nx"><img src="../Images/a7a130662fcf5afc7bbc735f37aff640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sDY4WzN93kb-cwKP.png"/></div></div></figure><p id="d92d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我希望通过我们在这里做的小练习，您能够完全理解JavaScript中的FileList API的功能，包括如何使用它。</p><p id="18b0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我希望您能为这篇文章做出贡献。</p><h1 id="7bf5" class="mj mk in bd ml mm mn mo mp mq mr ms mt jt mu ju mv jw mw jx mx jz my ka mz na bi translated">额外的</h1><p id="0076" class="pw-post-body-paragraph ks kt in ku b kv nb jo kx ky nc jr la lb nd ld le lf ne lh li lj nf ll lm ln ig bi translated">我在NPM上构建并启动了一个JavaScript库，它能够使用正则表达式、验证规则和表单输入属性来验证您的前端表单。</p><p id="b160" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">使用这个库，您可以验证所有类型的表单输入，包括文件验证和长度验证。</p><ul class=""><li id="e30c" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">看看NPM的这个图书馆:</li></ul><div class="ny nz gp gr oa ob"><a href="https://www.npmjs.com/package/octavalidate" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">octavalidate</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">这个库使用验证规则、复杂的正则表达式和表单输入来帮助验证你的HTML表单…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">www.npmjs.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op km ob"/></div></div></a></div><ul class=""><li id="9b08" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">在GitHub上查看这个库:</li></ul><div class="ny nz gp gr oa ob"><a href="https://github.com/Octagon-simon/octaValidate" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">这个库有助于验证你的HTML表单，使用…</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">这个库使用验证规则、复杂的正则表达式和表单输入来帮助验证你的HTML表单…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">github.com</p></div></div><div class="ok l"><div class="oq l om on oo ok op km ob"/></div></div></a></div><ul class=""><li id="7eab" class="lr ls in ku b kv kw ky kz lb lt lf lu lj lv ln lw lx ly lz bi translated">查看文档:</li></ul><div class="ny nz gp gr oa ob"><a href="https://octagon-simon.github.io/projects/octavalidate/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">octaValidate:入门</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">欢迎来到这个伟大的库，它使用验证规则、复杂的常规…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">八角形-simon.github.io</p></div></div><div class="ok l"><div class="or l om on oo ok op km ob"/></div></div></a></div><p id="f962" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">谢谢你。</p><p id="ced8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="nh">更多内容请看</em><a class="ae ni" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="nh">plain English . io</em></strong></a><em class="nh">。报名参加我们的</em> <a class="ae ni" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="nh">免费周报</em> </strong> </a> <em class="nh">。关注我们关于</em><a class="ae ni" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="nh">Twitter</em></strong></a><strong class="ku io"><em class="nh"/></strong><em class="nh">和</em><a class="ae ni" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="nh">LinkedIn</em></strong></a><em class="nh">。查看我们的</em> <a class="ae ni" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="nh">社区不和谐</em> </strong> </a> <em class="nh">加入我们的</em> <a class="ae ni" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="nh">人才集体</em> </strong> </a> <em class="nh">。</em></p></div></div>    
</body>
</html>