<html>
<head>
<title>How to Set Up &amp; Deploy Fake REST API Server Using JSON Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用JSON服务器设置和部署伪REST API服务器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-deploy-fake-rest-api-server-using-json-server-24e26dc1d120?source=collection_archive---------1-----------------------#2022-11-30">https://javascript.plainenglish.io/how-to-set-up-deploy-fake-rest-api-server-using-json-server-24e26dc1d120?source=collection_archive---------1-----------------------#2022-11-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="70ad" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JSON Server可以用来设置一个完整的假REST API，零编码，不到30秒。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/438d34e0a43fefac165982ecebce7a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m5M6lmYyf50KbcxS.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Rest API (<a class="ae ks" href="https://dataedo.com/asset/img/banners/blog/rest_api.png" rel="noopener ugc nofollow" target="_blank">Source</a>)</figcaption></figure><p id="b524" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您曾经将任何前端应用程序与正在开发的后端API集成在一起，那么您必须意识到在集成API时所面临的各种问题。这可能是因为API没有准备好供前端应用程序使用，也可能是因为端点的一些错误最终阻碍了整个前端团队的工作。</p><p id="1562" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本文中，我将介绍如何使用流行的npm库<code class="fe lp lq lr ls b">json-server</code>并部署到Vercel来建立一个假的REST API服务器。</p><h1 id="2627" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">1.初始化存储库</h1><p id="f92e" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">您需要创建一个新目录并执行<code class="fe lp lq lr ls b">yarn init</code>命令来初始化一个<code class="fe lp lq lr ls b">Node.js</code>项目。你需要回答一系列问题，之后你的项目将被初始化。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mq"><img src="../Images/e62b46f26154817c43f65324a51b0927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sdh7rJU7XZgQ72RhTY_p4w.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Initialize a Node.js project</figcaption></figure><h1 id="122f" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">2.安装JSON服务器</h1><p id="f167" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">为了设置<code class="fe lp lq lr ls b">json-server</code>，让我们使用下面提到的命令将包安装到我们的项目中:</p><pre class="kd ke kf kg gt mr ls ms bn mt mu bi"><span id="c2fc" class="mv lu in ls b be mw mx l my mz">yarn add json-server</span></pre><h1 id="1308" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">3.添加数据库文件</h1><p id="e209" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">一旦安装了这个包，就需要创建一个JSON文件来存储数据库的内容。让我们创建一个<code class="fe lp lq lr ls b">db.json</code>文件，并向其中添加以下示例数据:</p><pre class="kd ke kf kg gt mr ls ms bn mt mu bi"><span id="f55c" class="mv lu in ls b be mw mx l my mz">touch db.json</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Database file for JSON-server</figcaption></figure><h1 id="a77b" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">4.将项目用作模块</h1><p id="d08f" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">因为我们还需要添加对部署的支持，所以我们将该项目作为一个模块与Express一起使用。由于我们使用<code class="fe lp lq lr ls b">db.json</code>文件来维护数据库，由于权限问题，它不能在部署的环境中直接更新。因此，我们修改了设置，这样，如果节点环境是生产环境，请求就不会对数据库文件进行任何更新。您需要创建一个包含以下内容的<code class="fe lp lq lr ls b">server.js</code>文件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Setup JSON Server Project as Module</figcaption></figure><p id="4bb6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果我们想向服务器添加任何身份验证、验证或任何其他行为，我们可以定制同一个文件。</p><h1 id="7f18" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">5.启动服务器</h1><p id="0595" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">要启动服务器，您需要将<code class="fe lp lq lr ls b">start</code>脚本添加到<code class="fe lp lq lr ls b">package.json</code>文件中，这样文件的内容将类似于:</p><pre class="kd ke kf kg gt mr ls ms bn mt mu bi"><span id="bdae" class="mv lu in ls b be mw mx l my mz">{<br/>  "name": "template-json-server",<br/>  "version": "1.0.0",<br/>  "description": "Template for creating a backend using JSON Server",<br/>  "main": "server.js",<br/>  "license": "MIT",<br/>  "scripts": {<br/>    "dev": "NODE_ENV=development node server.js",<br/>    "start": "NODE_ENV=production node server.js",<br/>    "watch": "json-server db.json --port=8000"<br/>  },<br/>  "dependencies": {<br/>    "clone": "^2.1.2",<br/>    "json-server": "^0.17.1"<br/>  }<br/>}</span></pre><p id="114d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，一旦运行了<code class="fe lp lq lr ls b">yarn run watch</code>，后端服务器就应该启动并运行了。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/e7787928bfa7cfb98bdda3f615163472.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*IZPzS5qB2o8TFGaW1rLUeA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">JSON Server Running</figcaption></figure><p id="9fda" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以试着点击<code class="fe lp lq lr ls b"><a class="ae ks" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000</a></code>，你会得到一个类似于所附截图的输出。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/0c3ec2df15c102090dc9270e5337d745.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kztme9vXSOzcuVyCk9DbgA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">JSON Server Landing Page</figcaption></figure><p id="bda3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请随意调整配置，根据您的需要定制设置。</p><h1 id="65da" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">6.添加Vercel配置</h1><p id="59bb" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">为了在部署后进行路由，您需要添加一个包含以下内容的<code class="fe lp lq lr ls b">vercel.json</code>文件。如果您打算只在本地环境中使用服务器，可以跳过这一步。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Configuration File for Vercel</figcaption></figure><h1 id="86e0" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">7.部署到Vercel</h1><p id="1c4b" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">现在您已经设置了JSON服务器，我们可以继续部署部分了。</p><ul class=""><li id="6ba3" class="ne nf in kv b kw kx kz la lc ng lg nh lk ni lo nj nk nl nm bi translated">注册或登录<a class="ae ks" href="https://vercel.com/login" rel="noopener ugc nofollow" target="_blank"> Vercel </a>。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/63567c9a5d8db420790d6583f28a3b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SFFTUC28nIAfkOuxZLJKuQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Vercel Login Page</figcaption></figure><ul class=""><li id="b258" class="ne nf in kv b kw kx kz la lc ng lg nh lk ni lo nj nk nl nm bi translated">从<a class="ae ks" href="https://vercel.com/dashboard" rel="noopener ugc nofollow" target="_blank"> Vercel仪表板</a>中，点击<strong class="kv io">创建一个新项目</strong>，然后通过提供必要的权限来导入您的存储库。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/3c68790b469cd03a462809f34e122ff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hTClRgqo9kcb4HPLeclQMQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Create a New Project for Vercel</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/a1c201d14b6659a797f97f0e1a26d83f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vHe-BFK6ltlhRCxeuhPRjw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Import Project</figcaption></figure><ul class=""><li id="fb20" class="ne nf in kv b kw kx kz la lc ng lg nh lk ni lo nj nk nl nm bi translated">在Configure Project屏幕上，保留所有默认设置，然后单击Deploy。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/beb27c978fc83078588a97dbb3a43105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nwXW0gYj19WwUoDSNiXq4w.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Vercel Configuration Page</figcaption></figure><ul class=""><li id="db2c" class="ne nf in kv b kw kx kz la lc ng lg nh lk ni lo nj nk nl nm bi translated">等到部署完成，您自己的JSON服务器就可以服务了。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/bc8d3f1e7c15c81f62e4dc7bbba383aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*byr4f0TGjPQFtbMvvRrCig.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Deployment Successful</figcaption></figure><ul class=""><li id="ffeb" class="ne nf in kv b kw kx kz la lc ng lg nh lk ni lo nj nk nl nm bi translated">当一个新的提交被推送到项目的默认分支时，Vercel支持自动部署。因此，当添加新的更改时，您不必担心部署问题。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/ac642584e78d56a97d6b008fb2882f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fZ_dqOSFiSBDMBtvnVd1bw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">JSON Server on Deployed Instance</figcaption></figure><h1 id="86e6" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">结论</h1><p id="0f33" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">您已经使用部署到Vercel的<code class="fe lp lq lr ls b">json-server</code>启动并运行了您的伪REST API服务器。您可以在您的前端应用程序中配置API基本URL指向<code class="fe lp lq lr ls b">json-server</code>，并根据他们的文档按照您的要求更新数据库文件。</p><p id="25df" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">和往常一样，下面是Github上完整代码的链接:</p><div class="np nq gp gr nr ns"><a href="https://github.com/eshankvaish/json-server-template" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd io gy z fp nx fr fs ny fu fw im bi translated">GitHub-eshankvaish/JSON-server-Template:用于创建后端API服务器的模板，使用…</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">这个存储库提供了现成的模拟数据服务器。您所需要做的就是根据您的需要更新db.json文件…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og km ns"/></div></div></a></div></div><div class="ab cl oh oi hr oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ig ih ii ij ik"><blockquote class="oo op oq"><p id="966f" class="kt ku or kv b kw kx jo ky kz la jr lb os ld le lf ot lh li lj ou ll lm ln lo ig bi translated"><em class="in">感谢阅读。请分享一下您对为伪Rest APIs设置JSON服务器的想法。另外，如果你觉得这篇文章有用，请在你的圈子里分享。</em></p></blockquote><pre class="kd ke kf kg gt mr ls ms bn mt mu bi"><span id="da54" class="mv lu in ls b be mw mx l ov mz">Want to connect?<br/>Reach out on <a class="ae ks" href="https://twitter.com/eshankvaish" rel="noopener ugc nofollow" target="_blank">Twitter</a>, <a class="ae ks" href="https://www.linkedin.com/in/eshankvaish/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a> or in the comments below!</span></pre><h1 id="e921" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">参考</h1><ul class=""><li id="a84d" class="ne nf in kv b kw ml kz mm lc ow lg ox lk oy lo nj nk nl nm bi translated"><a class="ae ks" href="https://www.npmjs.com/package/json-server" rel="noopener ugc nofollow" target="_blank"> JSON服务器</a></li><li id="4c56" class="ne nf in kv b kw oz kz pa lc pb lg pc lk pd lo nj nk nl nm bi translated"><a class="ae ks" href="https://github.com/kitloong/json-server-vercel" rel="noopener ugc nofollow" target="_blank"> JSON服务器版本</a></li></ul><p id="7b06" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="or">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="or">plain English . io</em></strong></a><em class="or">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="or">免费周报</em> </strong> </a> <em class="or">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="or">Twitter</em></strong></a><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="or">LinkedIn</em></strong></a><em class="or"/><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="or">YouTube</em></strong></a><em class="or"/><a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="or">不和</em> </strong> </a> <em class="or">。对增长黑客感兴趣？检查</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="or">电路</em> </strong> </a> <em class="or">。</em></p></div></div>    
</body>
</html>