<html>
<head>
<title>I Wrote These 10+ Single Lines of JavaScript Code; the Team Lead Praised the Code for Being Elegant</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我写了这10+行JavaScript代码；团队领导称赞代码非常优雅</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/i-wrote-these-10-single-lines-of-javascript-code-the-team-lead-praised-the-code-for-being-elegant-6a9c471a9613?source=collection_archive---------1-----------------------#2022-10-12">https://javascript.plainenglish.io/i-wrote-these-10-single-lines-of-javascript-code-the-team-lead-praised-the-code-for-being-elegant-6a9c471a9613?source=collection_archive---------1-----------------------#2022-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/7401c7c9e83d6f61cf820385118db678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YBWJKKmuGxbCDGq7.png"/></div></figure><p id="f345" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">JavaScript非常大的特点是简单易用，非常灵活，代码实现方式多种多样；有时候一行代码就能解决，尽量不要用两行。</p><p id="6b81" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本文编译了非常有用的一行代码。这些需求在开发中非常普遍。使用一行代码可以帮助你提高工作效率。</p><h1 id="9ec9" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">阵列重复数据消除</h1><p id="6cef" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">有许多方法可以从数组中删除所有重复的值。这里我们将讨论最简单的方法，只需一行代码即可完成:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1426" class="me kt iq ma b gy mf mg l mh mi">const uniqueArr = (arr) =&gt; [...new Set(arr)];console.log(uniqueArr(["Front-end","js","html","js","css","html"]));<br/>// ['Front-end', 'js', 'html', 'css']</span></pre><p id="2abc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">uniqueArr方法将数据转换为一个集合，然后将其解构为一个数组并返回。</p><h1 id="fc75" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">从url获取参数并将它们转换为对象</h1><p id="2cab" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">网页路径的形式往往是:<a class="ae mj" href="http://www.google.com.hk/" rel="noopener ugc nofollow" target="_blank">www.google.com.hk</a>？search=js &amp; xxx=kkk。我们经常需要带参数，可以用第三方qs包实现。如果你只是想删除参数，这句话的代码将它可以实现没有引入qs。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="b276" class="me kt iq ma b gy mf mg l mh mi">const getParameters = URL =&gt; JSON.parse(`{"${decodeURI(URL.split("?")[1]).replace(/"/g, '\\"').replace(/&amp;/g, '","').replace(/=/g, '":"')}"}`<br/>  )getParameters("<a class="ae mj" href="https://www.google.com.hk/search?q=js+md&amp;newwindow=1" rel="noopener ugc nofollow" target="_blank">https://www.google.com.hk/search?q=js+md&amp;newwindow=1</a>");<br/>// {q: 'js+md', newwindow: '1'}</span></pre><h1 id="b58b" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">检查对象是否为空</h1><p id="72b7" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">检查对象是否为空实际上没那么简单。即使对象为空，它每次检查对象是否等于{}时都会返回false。</p><p id="2c5d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">幸运的是，下面这一行代码正是我们想要的。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="6590" class="me kt iq ma b gy mf mg l mh mi">const isEmpty = obj =&gt; Reflect.ownKeys(obj).length === 0 &amp;&amp; obj.constructor === Object;<br/>isEmpty({}) // true<br/>isEmpty({a:"not empty"}) //false</span></pre><h1 id="c866" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">反转绳子</h1><p id="57be" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">使用split结合reverse和join方法可以很容易地实现反转字符串。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="40fe" class="me kt iq ma b gy mf mg l mh mi">const reverse = str =&gt; str.split('').reverse().join('');<br/>reverse('this is reverse');<br/>// esrever si siht</span></pre><h1 id="9afa" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">生成随机十六进制</h1><p id="5681" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">生成随机数我相信你可以做到触手可及，然后随机生成十六进制，比如生成十六进制颜色值。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="3a20" class="me kt iq ma b gy mf mg l mh mi">const randomHexColor = () =&gt; `#${Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, "0")}`<br/>console.log(randomHexColor());<br/>// #a2ce5b</span></pre><h1 id="d0c6" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">检查当前选项卡是否在后台</h1><p id="3e13" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">浏览器使用标签式浏览，任何网页都可能在后台，此时用户并没有在浏览，知道如何快速检测，你的网页是隐藏的还是用户可见的？</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="36ca" class="me kt iq ma b gy mf mg l mh mi">const isTabActive = () =&gt; !document.hidden;isTabActive()<br/>// true|false</span></pre><h1 id="82a5" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">检测元素是否在焦点上</h1><p id="d5e3" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">activeElement属性返回文档中当前获得焦点的元素。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="9b87" class="me kt iq ma b gy mf mg l mh mi">const elementIsInFocus = (el) =&gt; (el === document.activeElement);elementIsInFocus(anyElement)<br/>// Returns true if the element is in focus, otherwise returns false</span></pre><h1 id="b623" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">检查设备类型</h1><p id="a7b5" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">使用navigator.userAgent确定它是移动设备还是计算机设备:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="2fb3" class="me kt iq ma b gy mf mg l mh mi">const judgeDeviceType =<br/>      () =&gt; /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i.test(navigator.userAgent) ? 'Mobile' : 'PC';judgeDeviceType()  // PC | Mobile</span></pre><h1 id="8d8e" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">将文本复制到剪贴板</h1><p id="0e4f" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">Clipboard API它所有的操作都是异步的，返回Promise对象，不会造成页面冻结。此外，它可以将任意内容(如图片)放入剪贴板。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="c42b" class="me kt iq ma b gy mf mg l mh mi">const copyText = async (text) =&gt; await navigator.clipboard.writeText(text)<br/>copyText('One Line of Code Front End World')</span></pre><h1 id="d7dd" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">获取选定的文本</h1><p id="9887" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">使用内置的getSelection获取用户选择的文本:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="9aec" class="me kt iq ma b gy mf mg l mh mi">const getSelectedText = () =&gt; window.getSelection().toString();getSelectedText();<br/>//Return selected content</span></pre><h1 id="8527" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">检查某一天是否是工作日</h1><p id="bd5d" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">当我们编写自己的日历组件来确定一个日期是否是工作日时，我们经常使用它；周一至周五是工作日:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="5f95" class="me kt iq ma b gy mf mg l mh mi">const isWeekday = (date) =&gt; date.getDay() % 6 !== 0;isWeekday(new Date(2022, 03, 11))<br/>// true</span></pre><h1 id="157a" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">转换华氏/摄氏温度</h1><p id="9d71" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">处理温度有时会令人眩晕。这两个函数帮助您将华氏温度转换为摄氏温度，将摄氏温度转换为华氏温度。</p><ul class=""><li id="213d" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">将华氏温度转换为摄氏温度</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="1d50" class="me kt iq ma b gy mf mg l mh mi">const fahrenheitToCelsius = (fahrenheit) =&gt; (fahrenheit - 32) * 5/9;fahrenheitToCelsius(50);<br/>// 10</span></pre><ul class=""><li id="1e0e" class="mk ml iq jw b jx jy kb kc kf mm kj mn kn mo kr mp mq mr ms bi translated">将摄氏温度转换为华氏温度</li></ul><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="58c7" class="me kt iq ma b gy mf mg l mh mi">const celsiusToFahrenheit = (celsius) =&gt; celsius * 9/5 + 32;celsiusToFahrenheit(100)<br/>// 212</span></pre><h1 id="30ef" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">两个日期之间的天数</h1><p id="56f9" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">在日常开发中，我们经常会遇到需要显示剩余天数的情况。通常，我们需要计算两个日期之间的天数差:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="8912" class="me kt iq ma b gy mf mg l mh mi">const dayDiff = (date1, date2) =&gt; Math.ceil(Math.abs(date1.getTime() - date2.getTime()) / 86400000);dayDiff(new Date("2021-10-21"), new Date("2022-02-12"))<br/>// Result: 114</span></pre><h1 id="c031" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">将RGB转换为十六进制</h1><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="04b7" class="me kt iq ma b gy mf mg l mh mi">const rgbToHex = (r, g, b) =&gt;   "#" + ((1 &lt;&lt; 24) + (r &lt;&lt; 16) + (g &lt;&lt; 8) + b).toString(16).slice(1);rgbToHex(255, 255, 255); <br/>//  #ffffff</span></pre><h1 id="fdad" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">计算数组的平均值</h1><p id="651d" class="pw-post-body-paragraph ju jv iq jw b jx lq jz ka kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr ij bi translated">平均值的计算方法有很多种，计算的逻辑都是一样的，只是实现方法不同。实现了一行简单的代码:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="fc69" class="me kt iq ma b gy mf mg l mh mi">const average = (arr) =&gt; arr.reduce((a, b) =&gt; a + b) / arr.length;<br/>average([1,9,18,36]) //16</span></pre><p id="383d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="mt">更多内容请看</em><a class="ae mj" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir"><em class="mt">plain English . io</em></strong></a><em class="mt">。报名参加我们的</em> <a class="ae mj" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> <em class="mt">免费周报</em> </strong> </a> <em class="mt">。关注我们关于</em><a class="ae mj" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir"><em class="mt">Twitter</em></strong></a><a class="ae mj" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir"><em class="mt">LinkedIn</em></strong></a><strong class="jw ir"><em class="mt"/></strong><a class="ae mj" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir"><em class="mt">YouTube</em></strong></a><strong class="jw ir"><em class="mt">，以及</em></strong><em class="mt"/><a class="ae mj" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir"><em class="mt">不和</em> </strong> </a>  <em class="mt">对成长黑客感兴趣？检查</em> <a class="ae mj" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir"> <em class="mt">电路</em> </strong> </a> <strong class="jw ir"> <em class="mt">。</em> </strong></p></div></div>    
</body>
</html>