<html>
<head>
<title>5 Ways To Detect Mobile Browsers in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript检测移动浏览器的5种方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-ways-to-detect-mobile-browsers-in-javascript-86c38982a5b?source=collection_archive---------5-----------------------#2022-10-05">https://javascript.plainenglish.io/5-ways-to-detect-mobile-browsers-in-javascript-86c38982a5b?source=collection_archive---------5-----------------------#2022-10-05</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="b621" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">响应式网页设计不仅仅是关于CSS</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/61acfe7179b452d06e05424ad7c34c92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Uz-FDsoYpXmZaqJx21RJA.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Image from <a class="ae kw" href="https://wallhaven.cc/w/dp3lrj" rel="noopener ugc nofollow" target="_blank">Wallhaven</a></figcaption></figure><p id="ec7c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">响应式网站设计不是可选的。</p><p id="b3e4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是必须的。</p><p id="f9e9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因为这不仅关乎用户体验，还关乎SEO。如果一个网站不支持移动设备，你永远也做不出一个足够好的网站。</p><p id="1a76" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">好消息是，在许多情况下，开发一个响应式网站并不太难。我们只需要CSS媒体查询来改变不同屏幕尺寸的表示。</p><p id="0cdb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">例如，当视区等于或小于600像素时，下面的代码更改按钮的样式。由于大多数手机的宽度不会超过600像素，这已经足够适合手机了。</p><pre class="kh ki kj kk gu lt lu lv lw aw lx bi"><span id="d325" class="ly lz ir lu b gz ma mb l mc md">.btn{<br/>/*some style*/<br/>}</span><span id="300a" class="ly lz ir lu b gz me mb l mc md">@media only screen and (max-width: 600px) {<br/>    .btn {/*some style for mobile*/}<br/>}</span></pre><p id="3bb4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是，你不可避免地会遇到更复杂的场景。</p><p id="a276" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">来看一个前端开发者的面试问题:</p><blockquote class="mf mg mh"><p id="008e" class="kx ky mi kz b la lb js lc ld le jv lf mj lh li lj mk ll lm ln ml lp lq lr ls ik bi translated">你的网站上有一个下载应用程序的按钮。</p><p id="37cb" class="kx ky mi kz b la lb js lc ld le jv lf mj lh li lj mk ll lm ln ml lp lq lr ls ik bi translated">请为它编写一个<code class="fe mm mn mo lu b">onClick()</code>函数，它应该:</p><p id="7d35" class="kx ky mi kz b la lb js lc ld le jv lf mj lh li lj mk ll lm ln ml lp lq lr ls ik bi translated">-在iPhones上点击App Store时打开它</p><p id="8aed" class="kx ky mi kz b la lb js lc ld le jv lf mj lh li lj mk ll lm ln ml lp lq lr ls ik bi translated">-在安卓手机上点击谷歌Play商店时打开它</p><p id="6c6b" class="kx ky mi kz b la lb js lc ld le jv lf mj lh li lj mk ll lm ln ml lp lq lr ls ik bi translated">-在桌面浏览器中点击下载网站时打开该网站</p></blockquote><p id="a561" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是不可能用纯CSS来实现的。</p><p id="af01" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以，这就是我们今天的话题:如何用JavaScript检测手机浏览器？</p><p id="357d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">本文将总结5种使用JavaScript技巧识别移动设备的方法。看完，上面的问题对你来说会超级简单。🙂</p><h1 id="4e50" class="mp lz ir bd mq mr ms mt mu mv mw mx my jx mz jy na ka nb kb nc kd nd ke ne nf bi translated">1.从UserAgent属性获取设备信息</h1><p id="ebce" class="pw-post-body-paragraph kx ky ir kz b la ng js lc ld nh jv lf lg ni li lj lk nj lm ln lo nk lq lr ls ik bi translated">现代浏览器有一个特殊的属性——<code class="fe mm mn mo lu b">navigator.userAgent</code>，它包含设备信息。</p><p id="9da7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">例如，下面的屏幕截图显示了我的Mac上的信息:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nl"><img src="../Images/4ad89da8ed769edcd6b9a25688478669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cD4P3WhX_MOlgZaQl6yxQA.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">The content of the userAgent property</figcaption></figure><p id="92ba" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因此，使用JavaScript通过该属性获取设备信息是一种直观的想法。</p><p id="812f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因此<code class="fe mm mn mo lu b">onClick()</code>函数对于前面的采访函数可以如下:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h1 id="3964" class="mp lz ir bd mq mr ms mt mu mv mw mx my jx mz jy na ka nb kb nc kd nd ke ne nf bi translated">2.检查屏幕的宽度</h1><p id="eb10" class="pw-post-body-paragraph kx ky ir kz b la ng js lc ld nh jv lf lg ni li lj lk nj lm ln lo nk lq lr ls ik bi translated">这和CSS媒体查询的想法是一样的。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="0b0b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如上所示，如果<code class="fe mm mn mo lu b">window.screen.width</code>属性小于600像素，我们的<code class="fe mm mn mo lu b">onClick()</code>函数会将当前浏览器视为移动浏览器。</p><p id="b91c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果你是一个React开发者，这一招在JSX也非常有用。例如基于屏幕宽度呈现不同的UI组件:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h1 id="c4c7" class="mp lz ir bd mq mr ms mt mu mv mw mx my jx mz jy na ka nb kb nc kd nd ke ne nf bi translated">3.检查CSS媒体查询是否正常工作</h1><p id="b635" class="pw-post-body-paragraph kx ky ir kz b la ng js lc ld nh jv lf lg ni li lj lk nj lm ln lo nk lq lr ls ik bi translated">在我们已经有CSS媒体查询的情况下，我们可以使用JavaScript来检查它们是否工作，以检测移动浏览器:</p><pre class="kh ki kj kk gu lt lu lv lw aw lx bi"><span id="cdf9" class="ly lz ir lu b gz ma mb l mc md">let isMobile = window.matchMedia("only screen and (max-width: 600px)").matches;</span></pre><p id="3567" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如上面的代码所示，<code class="fe mm mn mo lu b">window.matchMedia()</code>函数是识别CSS媒体查询是否有效的关键。</p><h1 id="3438" class="mp lz ir bd mq mr ms mt mu mv mw mx my jx mz jy na ka nb kb nc kd nd ke ne nf bi translated">4.使用触摸事件检测移动浏览器</h1><p id="c17e" class="pw-post-body-paragraph kx ky ir kz b la ng js lc ld nh jv lf lg ni li lj lk nj lm ln lo nk lq lr ls ik bi translated">移动设备支持触摸事件，桌面浏览器不支持。所以这也是一个很好的检测手机浏览器的点。</p><p id="9fbb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们可以编写如下函数:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="f034" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">上面的逻辑是正确的，因为桌面浏览器不能给对象添加<code class="fe mm mn mo lu b">touchstart</code>事件。</p><h1 id="4663" class="mp lz ir bd mq mr ms mt mu mv mw mx my jx mz jy na ka nb kb nc kd nd ke ne nf bi translated">5.检查屏幕的方向</h1><p id="a28f" class="pw-post-body-paragraph kx ky ir kz b la ng js lc ld nh jv lf lg ni li lj lk nj lm ln lo nk lq lr ls ik bi translated">除了触摸事件之外，移动设备还有一个特殊的功能——它们的屏幕可以非常容易地旋转。</p><p id="29d6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因此，<code class="fe mm mn mo lu b">window.orientation</code>属性是移动专用的。在桌面浏览器上是<code class="fe mm mn mo lu b">undefined</code>。所以我们可以用它来检测移动设备:</p><pre class="kh ki kj kk gu lt lu lv lw aw lx bi"><span id="550c" class="ly lz ir lu b gz ma mb l mc md">if (window.orientation !== 'undefined') {<br/>  // this is a mobile browser<br/>}</span></pre><h1 id="d0c1" class="mp lz ir bd mq mr ms mt mu mv mw mx my jx mz jy na ka nb kb nc kd nd ke ne nf bi translated">结论</h1><p id="6dbb" class="pw-post-body-paragraph kx ky ir kz b la ng js lc ld nh jv lf lg ni li lj lk nj lm ln lo nk lq lr ls ik bi translated">一个现代化的网站应该是移动友好的。但是响应式网页设计不仅仅是关于CSS的。JavaScript对于一些复杂的场景是必不可少的。</p><p id="c65e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="mi">感谢阅读。</em> </strong></p><p id="2e91" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="mi">通过我的推荐链接加入Medium，访问数百万篇精彩文章:</em> </strong></p><div class="no np gq gs nq nr"><a href="https://yangzhou1993.medium.com/membership" rel="noopener follow" target="_blank"><div class="ns ab fp"><div class="nt ab nu cl cj nv"><h2 class="bd is gz z fq nw fs ft nx fv fx iq bi translated">通过我的推荐链接-周扬加入媒体</h2><div class="ny l"><h3 class="bd b gz z fq nw fs ft nx fv fx dk translated">阅读周扬的每一个故事(以及媒体上成千上万的其他作家)。你的会费直接支持杨…</h3></div><div class="nz l"><p class="bd b dl z fq nw fs ft nx fv fx dk translated">yangzhou1993.medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kq nr"/></div></div></a></div><p id="3f78" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="mi">关于JavaScript的更多信息:</em></p><div class="no np gq gs nq"><div role="button" tabindex="0" class="ab bv gw cb fq og oh bn oi kq ex"><div class="oj l"><div class="ab q"><div class="l di"><img alt="Yang Zhou" class="l de bw ok ol fe" src="../Images/88be074a657a20c98e27d87f5dea0f22.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/2*LGEGZoQWcwrCYPOxGsacCg.jpeg"/><div class="fb bw l ok ol fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://yangzhou1993.medium.com/?source=post_page-----86c38982a5b--------------------------------" rel="noopener follow" target="_top">周扬</a></p></div></div><div class="oo op gx l"><h2 class="bd is ub uc fq ud fs ft nx fv fx iq bi translated">升级JavaScript</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi ue au uf ug uh qo ui an eh ei uj uk ul el em eo de bk ep" href="https://yangzhou1993.medium.com/list/level-up-javascript-f47e7346b9d4?source=post_page-----86c38982a5b--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="um l fp"><span class="bd b dl z dk">4 stories</span></div></div></div><div class="pb dh pc fq ab pd fp di"><div class="di ot bv ou ov"><div class="dh l"><img alt="A mobile phone in a cartoon style" class="dh" src="../Images/8dcd107232bdf4921c7c7ebb4c340d2c.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*6Uz-FDsoYpXmZaqJx21RJA.png"/></div></div><div class="di ot bv ow ox oy"><div class="dh l"><img alt="4 Ways To Write For Loops in JavaScript" class="dh" src="../Images/8180fc3d0e65da98b7eab674cb14bff2.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*GKIlwzMRsP88-knP"/></div></div><div class="di bv oz pa oy"><div class="dh l"><img alt="3 Uses of the Three Dots in JavaScript" class="dh" src="../Images/83c62104150e76640418cfbf1beca8a8.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*VG43hlLBa9ZTMaYD"/></div></div></div></div></div><p id="76ea" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="mi">关于CSS的更多信息:</em></p><div class="no np gq gs nq"><div role="button" tabindex="0" class="ab bv gw cb fq og oh bn oi kq ex"><div class="oj l"><div class="ab q"><div class="l di"><img alt="Yang Zhou" class="l de bw ok ol fe" src="../Images/88be074a657a20c98e27d87f5dea0f22.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/2*LGEGZoQWcwrCYPOxGsacCg.jpeg"/><div class="fb bw l ok ol fc n aw fd"/></div><div class="hi l fp"><p class="bd b dl z fq fr fs ft fu fv fw fx dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://yangzhou1993.medium.com/?source=post_page-----86c38982a5b--------------------------------" rel="noopener follow" target="_top">周扬</a></p></div></div><div class="oo op gx l"><h2 class="bd is ub uc fq ud fs ft nx fv fx iq bi translated">超赞的CSS</h2></div><div class="ab q"><div class="l fp"><a class="bd b be z bi ue au uf ug uh qo ui an eh ei uj uk ul el em eo de bk ep" href="https://yangzhou1993.medium.com/list/awesome-css-0ef666aac091?source=post_page-----86c38982a5b--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="um l fp"><span class="bd b dl z dk">5 stories</span></div></div></div><div class="pb dh pc fq ab pd fp di"><div class="di ot bv ou ov"><div class="dh l"><img alt="5 Levels of Using CSS Variables" class="dh" src="../Images/a6011a1f837ada5c34525ed017d31edc.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*fJsc8_lrWmaeQkoY"/></div></div><div class="di ot bv ow ox oy"><div class="dh l"><img alt="CSS Position: Locate Your HTML Elements Like a Guru" class="dh" src="../Images/32b19951cf85853b9f64ad02c99e5982.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*iCmbsH3wZqy5ji6d"/></div></div><div class="di bv oz pa oy"><div class="dh l"><img alt="CSS Box Model: 5 Steps To Turn an Element into a Box" class="dh" src="../Images/9036934fc97c3eb0bd9d8ee1d6b07bf0.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*MkXIwCypQC_sSttW"/></div></div></div></div></div></div><div class="ab cl ph pi hv pj" role="separator"><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm"/></div><div class="ik il im in io"><p id="7ce1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="mi">更多内容请看</em><a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="mi">plain English . io</em></strong></a><em class="mi">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="mi">免费周报</em> </strong> </a> <em class="mi">。关注我们关于</em><a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="mi">Twitter</em></strong></a><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="mi">LinkedIn</em></strong></a><strong class="kz is"><em class="mi"/></strong><a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="mi">YouTube</em></strong></a><strong class="kz is"><em class="mi">，以及</em></strong><em class="mi"/><a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="mi">不和</em> </strong> </a>  <em class="mi">对成长黑客感兴趣？检查</em> <a class="ae kw" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="mi">电路</em> </strong> </a> <strong class="kz is"> <em class="mi">。</em> </strong></p></div></div>    
</body>
</html>