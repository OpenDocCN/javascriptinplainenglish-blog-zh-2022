<html>
<head>
<title>As a Front-End Engineer: The Magic Behind “Event Emitter” in JavaScript That You Should Know About</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为一名前端工程师:你应该知道的JavaScript中“事件发射器”背后的魔力</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/as-a-front-end-engineer-the-magic-behind-event-emitter-in-javascript-that-you-should-know-about-d30a62bc4bce?source=collection_archive---------0-----------------------#2022-11-03">https://javascript.plainenglish.io/as-a-front-end-engineer-the-magic-behind-event-emitter-in-javascript-that-you-should-know-about-d30a62bc4bce?source=collection_archive---------0-----------------------#2022-11-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="61e6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">实现事件发射器的5行代码。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/33099ee9d5c6a63ddefae9a1333fc54c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rQIHoUIFDXpSuLbI"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@miklevasilyev?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mikhail Vasilyev</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="28d7" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">什么是“事件发射器”？</h1><p id="8b7c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">朋友们，作为一名软件工程师，你们一定用过<code class="fe mk ml mm mn b">Event Emitter</code>。我们经常用它来处理跨组件的通信场景。</p><p id="20d7" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><strong class="lq ir">它触发一个人人都可以听的事件，当事件被触发时它可以发送数据。</strong></p><p id="bc47" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">不同的库提供不同的实现，用于不同的目的，但基本思想是提供一个发布和订阅事件的框架。</p><p id="08b0" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><strong class="lq ir">你想知道它背后的魔力吗？本文将与您分享一个非常简单的解决方案来实现它。</strong></p><h1 id="73b0" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">试一试</h1><p id="1750" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">请暂时看一下这个例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="436f" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">当你点击<code class="fe mk ml mm mn b">Please send me data</code>按钮时，你会看到<code class="fe mk ml mm mn b">count</code>的值越来越大，但是当你点击<code class="fe mk ml mm mn b">Cut off contact</code>后，它就不再变化了。</p><p id="2290" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">这个例子很简单，但足以说明关于<code class="fe mk ml mm mn b">Event Emitter</code>的一切。</p><h1 id="2426" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">我们开始吧</h1><p id="50f5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">很神奇的是<code class="fe mk ml mm mn b">Event Emitter</code>只用几行代码就能搞定。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mu l"/></div></figure><ol class=""><li id="127e" class="mw mx iq lq b lr mo lu mp lx my mb mz mf na mj nb nc nd ne bi translated"><strong class="lq ir">监听事件</strong></li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mu l"/></div></figure><p id="d5b5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><strong class="lq ir"> 2。发布事件</strong></p><p id="a07d" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">eventCallback将打印数据两次，因为我们发布了两次<code class="fe mk ml mm mn b">event-xxx</code>事件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/8fe892ce0888759be3ac16137bad79e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1Sz-Z4v-4_jhu2aT.png"/></div></div></figure><p id="fdd4" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><strong class="lq ir"> 3。解除事件</strong></p><p id="9667" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">当我们解除<code class="fe mk ml mm mn b">event-xxx</code>事件时，<code class="fe mk ml mm mn b">medium and fatfish</code>将不再被打印。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/04abd1c487f3b6ee83f5e7fcbe5dda03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Oa0mSvXxmAP_N_7U.png"/></div></div></figure><h1 id="265a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">CustomEvent是这个难题的答案</h1><p id="7b75" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">实现<code class="fe mk ml mm mn b">EventEmitter</code>的关键是<code class="fe mk ml mm mn b">CustomEvent</code>和浏览器的事件机制，你可以从<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent" rel="noopener ugc nofollow" target="_blank">这里</a>得到。</p><p id="e6bd" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">(来自<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent" rel="noopener ugc nofollow" target="_blank">MDN</a>)CustomEvent()构造函数创建一个新的CustomEvent对象。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/fe0c75d70b3a5318bb2fd7453eccdafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*F_KqaXXeokoBdXeZ.png"/></div></div></figure><h1 id="384e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">实现事件发射器的另一种方式</h1><p id="4379" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">尽管这种方法很简单，但它依赖于浏览器环境。有没有其他更好的解决办法？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mu l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/8f4742eff2daebf5ea0eba24a825019e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I643qqKP6T4TAwJ8.png"/></div></div></figure><h1 id="6827" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">最后</h1><p id="f09b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">感谢阅读。我期待着您的关注和阅读更多高质量的文章。</p><div class="nj nk gp gr nl nm"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-can-a-1-a-2-a-3-ever-evaluate-to-true-in-javascript-d2329e693cde"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">记者:在JavaScript中(a==1 &amp;&amp; a==2 &amp;&amp; a==3)能计算为真吗？</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">是的，这可能是真的，而且有6种方式——太神奇了！</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa kp nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener  ugc nofollow" target="_blank" href="/i-lost-a-job-opportunity-just-because-of-promise-all-be396f6efe87"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">“我失去了一个工作机会，只是因为承诺。所有”</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">一次让我好难过的面试经历。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa kp nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-what-happened-to-npm-run-xxx-cdcb37dbaf44"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">采访者:“npm跑xxx”怎么了？</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">一个大多数人都不知道的秘密。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nv l"><div class="oc l nx ny nz nv oa kp nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener  ugc nofollow" target="_blank" href="/interviewer-can-x-x-return-true-in-javascript-7e1d1fa7b5cd"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">面试官:可以“x！== x "在JavaScript中返回True？</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">你可能不知道的五个神奇的JavaScript知识点！</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nv l"><div class="od l nx ny nz nv oa kp nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener  ugc nofollow" target="_blank" href="/its-2022-don-t-abuse-the-arrow-function-anymore-905862a9c668"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">现在是2022年，不要再滥用箭头功能了</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">不应该使用箭头函数的4种情况。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nv l"><div class="oe l nx ny nz nv oa kp nm"/></div></div></a></div><p id="137d" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><em class="of">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="of">plain English . io</em></strong></a><em class="of">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="of">免费周报</em> </strong> </a> <em class="of">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="of">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="of">LinkedIn</em></strong></a><strong class="lq ir"><em class="of"/></strong><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="of">YouTube</em></strong></a><strong class="lq ir"><em class="of">，以及</em></strong><em class="of"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="of">不和</em> </strong> </a>  <em class="of">对成长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="of">电路</em> </strong> </a> <strong class="lq ir"> <em class="of">。</em> </strong></p></div></div>    
</body>
</html>