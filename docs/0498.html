<html>
<head>
<title>How to Use Environment Variables in Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Next.js中使用环境变量</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-environment-variables-in-next-js-353824614686?source=collection_archive---------2-----------------------#2022-01-28">https://javascript.plainenglish.io/how-to-use-environment-variables-in-next-js-353824614686?source=collection_archive---------2-----------------------#2022-01-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d07a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">看看如何在Next.js中使用环境变量。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/9e8a22d27ca1885731aad5aa1ec8abae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rcL8KrkxUtLDbU_3"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@lautaroandreani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7772" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">next . js——这个名字对于任何使用React的开发人员来说都不陌生。由于有多条路线，水疗中心的发展变得很容易。由于其服务器端渲染方法，它也有助于搜索引擎优化。</p><p id="9ce0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">作为开发者，Next.js通过在引擎盖下做繁重的工作，为我们提供了许多特性。在Next.js提供给我们的众多特性中，我个人最喜欢的一个是对环境变量的<em class="lp">内置支持。</em></p><p id="7135" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">环境变量是存储应用程序敏感信息的好方法。API键和数据库密码是作为环境变量存储得最多的值，但是您可以存储任何东西。</p><p id="1de3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">整个应用程序都可以访问这些变量，它们不会暴露给浏览器，只存储在服务器上。这就是环境变量如此特殊的原因。</p><p id="03e8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因为Next.js为我们提供了内置支持，所以我们不必依赖外部包来使用项目中的环境变量。</p></div><div class="ab cl lq lr hr ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ig ih ii ij ik"><p id="4eb9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要在Next.js项目中使用环境变量，请在项目目录的根目录下创建一个名为<code class="fe lx ly lz ma b">.env.local</code>的文件。我们可以在这个文件中存储与我们的应用程序相关的所有敏感值。</p><p id="b0be" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lx ly lz ma b">.env.local</code>内的变量:</p><pre class="kd ke kf kg gt mb ma mc md aw me bi"><span id="3c4b" class="mf mg in ma b gy mh mi l mj mk">// inside '.env.local' file<br/>NAME=test123</span></pre><p id="313e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，我们有一个名为“NAME”的变量，其值为“test123”。如你所见，‘test 123’是一个字符串，但是我们没有把它存储在单引号或双引号中。</p><p id="bfe0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们在这个文件中创建的所有变量都以这种格式存储。</p><p id="ac45" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Next.js环境变量的默认行为是这些变量只能在Node.js环境中访问。</p><blockquote class="ml mm mn"><p id="fb8e" class="kt ku lp kv b kw kx jo ky kz la jr lb mo ld le lf mp lh li lj mq ll lm ln lo ig bi translated"><em class="in">“getStaticProps”</em>和<em class="in">“getServerSideProps”</em>是Next.js提供给我们的两个方法，它们给了我们一个Node.js环境，有助于数据抓取和服务器端渲染。如果你不知道这些方法，我推荐你在这里阅读它们，以便更好地理解这篇文章。</p></blockquote><p id="a07a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这两个函数都支持节点<code class="fe lx ly lz ma b">process</code>模型，这是一个全局对象，意味着它可以在不使用“require”的情况下使用。在这些函数中，您可以编写常规的Node.js代码。因为这些函数支持Node.js，所以可以使用“process.env”来访问环境变量。</p><p id="e808" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，这些函数返回一个对象，这个对象有一个“道具”键，这个键也是一个对象，这个对象包含了我们在应用程序中想要使用的所有道具。</p><p id="a8bf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">看看下面的例子:</p><pre class="kd ke kf kg gt mb ma mc md aw me bi"><span id="1274" class="mf mg in ma b gy mh mi l mj mk">// pages/index.js (inside the pages directory, rendering "index.js")<br/>export default function Home(props) {</span><span id="5a2a" class="mf mg in ma b gy mr mi l mj mk">return &lt;h1&gt;{props.secret}&lt;/h1&gt;;</span><span id="ecf2" class="mf mg in ma b gy mr mi l mj mk">}</span><span id="2b44" class="mf mg in ma b gy mr mi l mj mk">function getStaticProps() {<br/> return {<br/>  props: {<br/>   secret: props.env.NAME<br/>  }<br/> }<br/>}</span></pre><p id="c071" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，当我们请求" index.js "页面时，<strong class="kv io"> "getStaticProps "将在" Home "功能组件</strong>之前首先运行，返回" Props "对象，该对象将保存一个名为" secret "的道具，其值是我们从前面设置的环境变量中获取的。</p><p id="7af9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个函数完成后，我们可以访问“Home”组件中的“秘密”道具。这样，我们的秘密仍然安全，我们的应用程序也像以前一样工作。</p><p id="fe53" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我建议学习更多关于getStaticProps和getServerSide props的知识，因为它们可以做更多的事情，而不仅仅是帮助处理环境变量。看看他们的官方文件<a class="ae ks" href="https://nextjs.org/docs/basic-features/data-fetching/get-static-props" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h1 id="2bc9" class="ms mg in bd mt mu mv mw mx my mz na nb jt nc ju nd jw ne jx nf jz ng ka nh ni bi translated">结论:</h1><p id="91c2" class="pw-post-body-paragraph kt ku in kv b kw nj jo ky kz nk jr lb lc nl le lf lg nm li lj lk nn lm ln lo ig bi translated">对于React来说，Next.js是一个非常令人印象深刻的框架，可以用来制作一个生产就绪的应用程序。它不仅提供了环境变量，还提供了更多。你可以在这里看看他们的官方文件<a class="ae ks" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="72df" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">作为一名开发人员，有时会需要将一些信息存储在不对最终用户公开的地方，使用环境变量有助于我们实现这一点。</p><p id="b41b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">更多内容看</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">说白了就是io </em> </strong> </a> <em class="lp">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">免费周报</em> </strong> </a> <em class="lp">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="lp">。</em></p></div></div>    
</body>
</html>