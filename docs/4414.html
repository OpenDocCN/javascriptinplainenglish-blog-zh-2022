<html>
<head>
<title>Angular’s ngFor Is Not Just For Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular的ngFor不仅仅用于数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angulars-ngfor-is-not-just-for-arrays-89a3a07a6e1?source=collection_archive---------0-----------------------#2022-12-01">https://javascript.plainenglish.io/angulars-ngfor-is-not-just-for-arrays-89a3a07a6e1?source=collection_archive---------0-----------------------#2022-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7747" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于<code class="fe kf kg kh ki b">ngFor</code>指令及其所有特性(如<code class="fe kf kg kh ki b">trackBy</code>等)的指南。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/90933ee22e64d951b8f3c3fb7d092020.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xjhHks-SwPvG9yVR"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@malcoo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tomáš Malík</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8766" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">使用<code class="fe kf kg kh ki b">*ngFor</code>指令，一个HTML模板的一部分为一个可迭代列表(集合)中的每一项重复一次。与AngularJS中的<code class="fe kf kg kh ki b">ngRepeat</code>类似，<code class="fe kf kg kh ki b">ngFor</code>是Angular的结构指令。<code class="fe kf kg kh ki b">ngFor</code>指令导出一些局部变量，如Index、First、Last、odd和even。</p><p id="39e2" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">修改DOM的结构，因为它是一个结构指令。</p><p id="71ac" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它的目的是为数组中的每个值重复运行一个预定的HTML模板，每次发送数组值作为任何字符串插值或绑定的上下文。</p><h2 id="5b66" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">我们可以用<code class="fe kf kg kh ki b">ngFor</code>做什么？</h2><p id="f726" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">我们可以使用基本指令<code class="fe kf kg kh ki b">ngFor</code>在HTML模板中创建数据表示列表和表格。让我们以下面的信息为例:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="fff9" class="my lx iq ki b be mz na l nb nc">const HEROES= [<br/>    {id: 1, name:'Superman'},<br/>    {id: 2, name:'Batman'},<br/>    {id: 5, name:'BatGirl'},<br/>    {id: 3, name:'Robin'},<br/>    {id: 4, name:'Flash'}<br/>];</span></pre><p id="a7ec" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">通过创建类似这样的HTML，我们可以使用<code class="fe kf kg kh ki b">ngFor</code>在屏幕上以数据表的形式打印这些数据:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="40ac" class="my lx iq ki b be mz na l nb nc">&lt;table&gt;<br/>    &lt;thead&gt;<br/>        &lt;th&gt;Name&lt;/th&gt;<br/>    &lt;/thead&gt;<br/>    &lt;tbody&gt;<br/>      &lt;tr&gt;<br/>           &lt;td&gt;Superman&lt;/td&gt;<br/>       &lt;/tr&gt;<br/>       &lt;tr&gt;<br/>           &lt;td&gt;Batman&lt;/td&gt;<br/>       &lt;/tr&gt;<br/>       ...<br/>       &lt;/tbody&gt;<br/>&lt;/table&gt;</span></pre><h2 id="6686" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated"><code class="fe kf kg kh ki b">ngFor</code>的语法是什么？</h2><p id="5782" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">让我们构建一个与<code class="fe kf kg kh ki b">ngFor</code>一起使用的组件，这样我们就可以有一个功能性的HTML模板:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="c67b" class="my lx iq ki b be mz na l nb nc">@Component({<br/>    selector:'heroes',<br/>    template: `<br/>    &lt;table&gt;<br/>        &lt;thead&gt;<br/>            &lt;th&gt;Name&lt;/th&gt;<br/>            &lt;th&gt;Index&lt;/th&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>            &lt;tr *ngFor="let hero of heroes"&gt;<br/>                &lt;td&gt;{{hero.name}}&lt;/td&gt;<br/>            &lt;/tr&gt;<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>`<br/>})<br/>export class Heroes {<br/>  <br/>    heroes = HEROES;<br/><br/>}</span></pre></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><h2 id="6761" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">对扩展您的软件启动感兴趣吗？检查<a class="ae kz" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank">电路</a>。</h2><p id="fa1a" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">我们刚刚显示的HTML表将由这个模板生成。这个例子显示了使用<code class="fe kf kg kh ki b">ngFor</code>的(最典型的)语法:</p><ul class=""><li id="c7c1" class="nk nl iq lc b ld le lg lh lj nm ln nn lr no lv np nq nr ns bi translated">我们正在为<code class="fe kf kg kh ki b">ngFor</code>提供一个迭代表达式</li><li id="d2b2" class="nk nl iq lc b ld nt lg nu lj nv ln nw lr nx lv np nq nr ns bi translated">Javascript语法后面是使用关键字<code class="fe kf kg kh ki b">let</code>来定义循环变量<code class="fe kf kg kh ki b">hero</code></li><li id="7a01" class="nk nl iq lc b ld nt lg nu lj nv ln nw lr nx lv np nq nr ns bi translated">该表达式遵循Javascript <code class="fe kf kg kh ki b">of</code>迭代功能，并采用<code class="fe kf kg kh ki b">var i of items</code>的形式</li></ul><h2 id="bac5" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">可变能见度</h2><p id="5ea8" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">请记住，循环变量<code class="fe kf kg kh ki b">hero</code>只能在循环中访问；在<code class="fe kf kg kh ki b">ngFor</code>部分之外是不可访问的。</p><h2 id="eea9" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">要注意的常见<code class="fe kf kg kh ki b">ngFor</code>错误</h2><p id="5922" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">如果您来自AngularJs背景，在您习惯新的Angular语法之前，以下错误会出现几次:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="c8a0" class="my lx iq ki b be mz na l ny nc">Can't bind to 'ngFor' since it isn't a known property of 'tr'</span></pre><p id="a6ed" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">您可能无意中键入了<code class="fe kf kg kh ki b">item in items</code>而不是<code class="fe kf kg kh ki b">item of items</code>，或者忘记在语句的开头包含<code class="fe kf kg kh ki b">let</code>关键字，这就是发生这种情况的原因:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="b384" class="my lx iq ki b be mz na l nb nc">&lt;tr *ngFor=" hero in heroes"&gt;<br/>    &lt;td&gt;{{hero.name}}&lt;/td&gt;<br/>&lt;/tr&gt;</span></pre><h2 id="89c9" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">查找列表元素的索引</h2><p id="349a" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">添加列表元素的数字索引位置是一个非常典型的需求。使用<code class="fe kf kg kh ki b">index</code>变量，我们可以确定元素的当前索引:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="1191" class="my lx iq ki b be mz na l nb nc"><br/>&lt;tr *ngFor="let hero of heroes; let i = index"&gt;<br/>    &lt;td&gt;{{hero.name}}&lt;/td&gt;<br/>    &lt;td&gt;{{i}}&lt;/td&gt;<br/>&lt;/tr&gt;</span></pre><p id="4b57" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">要获得索引的值，注意必须使用<code class="fe kf kg kh ki b">let</code>关键字；否则，您将收到类似以下内容的错误:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="3d92" class="my lx iq ki b be mz na l ny nc">Parser Error: Unexpected token = at column ...</span></pre><p id="5899" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">经过这一修改，现在生成的HTML如下所示:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="ac63" class="my lx iq ki b be mz na l nb nc">&lt;table&gt;<br/>    &lt;thead&gt;<br/>        &lt;th&gt;Name&lt;/th&gt;<br/>        &lt;th&gt;Index&lt;/th&gt;<br/>    &lt;/thead&gt;<br/>    &lt;tbody&gt;<br/>      &lt;tr&gt;<br/>           &lt;td&gt;Superman&lt;/td&gt;<br/>           &lt;td&gt;0&lt;/td&gt;<br/>       &lt;/tr&gt;<br/>       &lt;tr&gt;<br/>           &lt;td&gt;Batman&lt;/td&gt;<br/>            &lt;td&gt;1&lt;/td&gt;<br/>       &lt;/tr&gt;<br/>       ...<br/>       &lt;/tbody&gt;<br/>&lt;/table&gt;</span></pre><h2 id="9d3c" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">如何使用<code class="fe kf kg kh ki b">even</code>和<code class="fe kf kg kh ki b">odd</code>对表格进行分条</h2><p id="8fc6" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">通过向偶数或奇数行添加不同的CSS类来对表进行条带化的能力是创建表时另一个经常需要的特性。</p><p id="6511" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">假设我们想在上表中添加一个CSS类<code class="fe kf kg kh ki b">even</code>，如果是偶数行，添加一个CSS类<code class="fe kf kg kh ki b">odd</code>。</p><p id="cbe3" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们有两个变量——<code class="fe kf kg kh ki b">even</code>和<code class="fe kf kg kh ki b">odd</code>——可以在使用<code class="fe kf kg kh ki b">ngClass</code>的下列组合中使用，以实现这一点:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="4a97" class="my lx iq ki b be mz na l nb nc">&lt;tr *ngFor="let hero of heroes; let even = even; let odd = odd" <br/>    [ngClass]="{ odd: odd, even: even }"&gt;<br/>    &lt;td&gt;{{hero.name}}&lt;/td&gt;<br/>&lt;/tr&gt;</span></pre><p id="3a2f" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">让我们看看这个模板生成的HTML:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="5fdb" class="my lx iq ki b be mz na l nb nc">&lt;table&gt;<br/>        &lt;thead&gt;<br/>            &lt;th&gt;Name&lt;/th&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>            &lt;tr class="even"&gt;<br/>                &lt;td&gt;Superman&lt;/td&gt;<br/>            &lt;/tr&gt;<br/>            &lt;tr class="odd"&gt;<br/>                &lt;td&gt;Batman&lt;/td&gt;<br/>            &lt;/tr&gt;<br/>            ...<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;</span></pre><p id="e899" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们可以看到，正如预期的那样，<code class="fe kf kg kh ki b">ngClass</code>将CSS类添加到了右边的行中。</p><h2 id="eb3f" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">识别列表的<code class="fe kf kg kh ki b">first</code>和<code class="fe kf kg kh ki b">last</code>元素</h2><p id="4792" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">除了偶数和奇数功能之外，还有两个附加变量可用于确定列表的第一个和最后一个元素:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="0e68" class="my lx iq ki b be mz na l nb nc">&lt;tr *ngFor="let hero of heroes; let first = first; let last = last" <br/>    [ngClass]="{ first: first, last: last }"&gt;<br/>    &lt;td&gt;{{hero.name}}&lt;/td&gt;<br/>&lt;/tr&gt;</span></pre><p id="b010" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这会将名为<code class="fe kf kg kh ki b">first</code>的CSS类添加到列表的第一个元素中，并将名为<code class="fe kf kg kh ki b">last</code>的CSS类添加到列表的最后一个元素中:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="edc3" class="my lx iq ki b be mz na l nb nc">&lt;table&gt;<br/>    &lt;thead&gt;<br/>        &lt;th&gt;Name&lt;/th&gt;<br/>    &lt;/thead&gt;<br/>    &lt;tbody&gt;<br/>      &lt;tr class='first'&gt;<br/>           &lt;td&gt;Superman&lt;/td&gt;<br/>       &lt;/tr&gt;<br/>       ...<br/>      &lt;tr class='last'&gt;<br/>           &lt;td&gt;Flash&lt;/td&gt;<br/>       &lt;/tr&gt;      <br/>       &lt;/tbody&gt;<br/>&lt;/table&gt;</span></pre><h2 id="3ecf" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">当我们在列表中添加或删除元素时<code class="fe kf kg kh ki b">ngFor</code>是如何工作的？</h2><p id="68bb" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">随着输入列表的改变，<code class="fe kf kg kh ki b">ngFor</code>将努力避免重复创建和销毁列表的DOM元素，因为这样做是一个昂贵的过程。此外，传递给<code class="fe kf kg kh ki b">ngFor</code>的新列表不一定需要完全重建列表的DOM。</p><p id="363f" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">对列表中的每个元素独立地做出决定。许多现有的DOM元素将被重用，只有其中的一些值将被覆盖。</p><p id="804d" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">因为，例如，如果我们以不同的顺序传入一个新的列表，Angular将尝试识别元素并重新排序列表中的DOM元素，而不删除和重新创建它们，所以Angular有必要唯一地识别每个列表元素，以便做出决定。</p><h2 id="da4f" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">默认情况下如何跟踪列表项？</h2><p id="08d0" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">默认情况下，<code class="fe kf kg kh ki b">ngFor</code>使用对象标识来跟踪列表项。这意味着，如果您从与前一个列表完全相同的值开始创建一个全新的对象列表，并将这个新创建的列表提供给<code class="fe kf kg kh ki b">ngFor</code>，Angular将无法检测特定的列表项目是否已经存在。</p><p id="8296" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">从对象标识的角度来看，新列表中的元素与旧列表中的元素完全不同。例如，如果我们从后端重新查询数据，就会出现这种情况。</p><p id="de97" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">由于Angular缺乏关于对象的知识，默认情况下最好通过对象标识进行跟踪，因为它无法确定使用哪个属性进行跟踪。</p><h2 id="9b6d" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">为什么这对性能很重要？</h2><p id="8d98" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">正如我们所见，<code class="fe kf kg kh ki b">ngFor</code>已经默认执行了许多优化，试图尽可能多地重用现有的DOM元素，但是它将这些优化基于对象标识。</p><p id="f513" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">即使进行了这些更改，我们仍然会遇到性能问题，并且会注意到，对于包含巨大列表的模板，或者由于大量DOM元素被创建和销毁而占据了屏幕很大一部分的列表，UI会很慢。</p><p id="301a" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果是这种情况，我们可以设置<code class="fe kf kg kh ki b">ngFor</code>使用不同于对象识别的方法来跟踪对象。</p><h2 id="56b6" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">如何使用<code class="fe kf kg kh ki b">trackBy</code>？</h2><p id="41a6" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">使用<code class="fe kf kg kh ki b">trackBy</code>，我们可以创建自己的系统来跟踪列表中的项目。必须向<code class="fe kf kg kh ki b">trackBy</code>传递一个将索引和当前选择的项目作为参数的方法:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="1bed" class="my lx iq ki b be mz na l nb nc">@Component({<br/>    selector:'heroes',<br/>    template: `<br/>    &lt;table&gt;<br/>        &lt;thead&gt;<br/>            &lt;th&gt;Name&lt;/th&gt;<br/>        &lt;/thead&gt;<br/>        &lt;tbody&gt;<br/>            &lt;tr *ngFor="let hero of heroes; trackBy: trackHero" &gt;<br/>                &lt;td&gt;{{hero.name}}&lt;/td&gt;<br/>            &lt;/tr&gt;<br/>        &lt;/tbody&gt;<br/>    &lt;/table&gt;<br/>`<br/>})<br/>export class Heroes {<br/><br/>    heroes = HEROES;<br/><br/>    trackHero(index, hero) {<br/>        console.log(hero);<br/>        return hero ? hero.id : undefined;<br/><br/>    }<br/><br/><br/>}</span></pre><p id="5245" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">跟踪将使用这个实现的<code class="fe kf kg kh ki b">id</code>属性来执行。</p><h2 id="a97c" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">何时使用trackBy？</h2><p id="9215" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">利用<code class="fe kf kg kh ki b">trackBy</code>是因为它是一种性能优化，默认情况下通常不需要，理论上，只有出现性能问题时才需要。</p><p id="0e3b" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果您使用过时的移动浏览器，考虑在较大的表格中使用<code class="fe kf kg kh ki b">trackBy</code>作为预防措施，但这实际上取决于您的系统和用例。</p><h2 id="a195" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated"><code class="fe kf kg kh ki b">ngFor</code>只针对数组吗？</h2><p id="48a0" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">在这个例子中，我们已经向<code class="fe kf kg kh ki b">ngFor</code>发送了一个Javascript对象数组，但是这并不是它运行所必需的；我们可以只传递一个对象给<code class="fe kf kg kh ki b">ngFor</code>。</p><p id="e398" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">任何类型的Javascript Iterable都可以传递给它，包括框架本身产生的那些。我们将为名为<code class="fe kf kg kh ki b">hero</code>的配置元素定义一个指令来演示这一点。</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="ad8a" class="my lx iq ki b be mz na l nb nc">import {Directive, Input} from "@angular/core";<br/><br/>@Directive({<br/>    selector: 'hero',<br/>})<br/>export class Hero {<br/><br/>    @Input()<br/>    id: number;<br/><br/>    @Input()<br/>    name:string;<br/>}</span></pre><p id="1a92" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这个配置元素现在可以在我们的模板中以下列方式使用:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="7d95" class="my lx iq ki b be mz na l nb nc">&lt;heroes&gt;<br/>    &lt;hero id="1" name="Superman"&gt;&lt;/hero&gt;<br/>    &lt;hero id="2" name="Batman"&gt;&lt;/hero&gt;<br/>    &lt;hero id="3" name="Batgirl"&gt;&lt;/hero&gt;<br/>    &lt;hero id="3" name="Robin"&gt;&lt;/hero&gt;<br/>    &lt;hero id="4" name="Flash"&gt;&lt;/hero&gt;<br/>    &lt;hero id="5" name="Green Lantern"&gt;&lt;/hero&gt;<br/>&lt;/heroes&gt;</span></pre><p id="6b81" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在让我们使用<code class="fe kf kg kh ki b">@ContentChildren</code>从配置元素中查询该信息:</p><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="2f8a" class="my lx iq ki b be mz na l nb nc">export class Heroes {<br/><br/>     @ContentChildren(Hero)<br/>     heroes: QueryList&lt;Hero&gt;;<br/><br/>}</span></pre><p id="cff1" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">你知道这里发生了什么吗？原来<code class="fe kf kg kh ki b">QueryList</code>是Angular中的一个类，它本身是可迭代的！因此，除了在组件类中以编程方式使用它之外，我们还可以选择将它直接传递给<code class="fe kf kg kh ki b">ngFor</code>并在那里迭代。</p><p id="eae3" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们程序中的任何其他iterable也可以以同样的方式使用。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><h2 id="3d10" class="lw lx iq bd ly lz ma dn mb mc md dp me lj mf mg mh ln mi mj mk lr ml mm mn mo bi translated">结论</h2><p id="bed2" class="pw-post-body-paragraph la lb iq lc b ld mp jr lf lg mq ju li lj mr ll lm ln ms lp lq lr mt lt lu lv ij bi translated">我们已经了解了<code class="fe kf kg kh ki b">ngFor</code>和它在Angular中的特性，以及我们如何在需要的地方改进它的性能。希望对你有用。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><pre class="kk kl km kn gt mu ki mv bn mw mx bi"><span id="e951" class="my lx iq ki b be mz na l ny nc">Want to Connect?<br/><br/>Connect with me on <a class="ae kz" href="https://www.linkedin.com/in/gouravkajal/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>.</span></pre><p id="c0f9" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">感谢阅读！</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="fe08" class="pw-post-body-paragraph la lb iq lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="nz">更多内容看</em> <a class="ae kz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ir"> <em class="nz">说白了就是io </em> </strong> </a> <em class="nz">。报名参加我们的</em> <a class="ae kz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ir"> <em class="nz">免费周报</em> </strong> </a> <em class="nz">。关注我们关于</em><a class="ae kz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lc ir"><em class="nz">Twitter</em></strong></a>，<a class="ae kz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lc ir"><em class="nz">LinkedIn</em></strong></a><em class="nz">，</em><a class="ae kz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lc ir"><em class="nz">YouTube</em></strong></a><em class="nz">，</em> <a class="ae kz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ir"> <em class="nz">不和</em> </strong> </a> <em class="nz">。对增长黑客感兴趣？检查</em> <a class="ae kz" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ir"> <em class="nz">电路</em> </strong> </a> <em class="nz">。</em></p></div></div>    
</body>
</html>