<html>
<head>
<title>Create a Perfect React Project With Vite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vite创建一个完美的React项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-perfect-react-project-with-vite-30298b005333?source=collection_archive---------2-----------------------#2022-08-26">https://javascript.plainenglish.io/create-a-perfect-react-project-with-vite-30298b005333?source=collection_archive---------2-----------------------#2022-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8cb1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用Vite建立一个React项目以获得100%的Lighthouse分数</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cab204bea46615348bbebdfc52e5ea28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Tk_FeZd169MIMgcdpjAtQ.png"/></div></div></figure><h1 id="f7a1" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">介绍</h1><p id="58cc" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">作为Next.js的忠实粉丝，我创建了一个存储库，用Next.js框架作为我其他项目的样板，实现了100%的lighthouse评分。整个旅程被记录在一个中型故事中。如果你感兴趣的话，可以随意看看这个帖子。</p><div class="mf mg gp gr mh mi"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-set-up-next-js-with-typescript-to-get-a-100-score-in-google-lighthouse-and-vercel-analytics-6f97501a91c7"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">如何用TypeScript设置Next.js在Google Lighthouse和Vercel Analytics中获得100分</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">建立一个PWA来获得Google Lighthouse、Vercel Analytics和Webpagetest.org安全公司的许可</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw kp mi"/></div></div></a></div><p id="ec44" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">在玩了几次Vite之后，我发现如果我用Vite和react-ts模板创建一个项目来获得100%的lighthouse分数，那也会很有趣。</p><p id="f5bc" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">在这个故事中，我们将逐步配置一个Vite react-ts项目，以便在Google Lighthouse审计中获得满分。</p><h1 id="447d" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">初始基准</h1><p id="6776" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">让我们看看它在Google Lighthouse中的表现，如果我们只是使用Vite搭建项目，而不做任何更改。</p><h2 id="81ec" class="nc ks iq bd kt nd ne dn kx nf ng dp lb ls nh ni ld lw nj nk lf ma nl nm lh nn bi translated">搭建一个Vite应用</h2><p id="54fe" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们首先用命令行创建一个新的Vite项目。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="f332" class="nc ks iq np b gy nt nu l nv nw"># yarn create vite vite-react-ts-100 –template react-ts</span></pre><p id="f964" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">Vite在大约1.5秒内搭建一个新项目。包括用yarn install命令进行包安装，我们在本地机器上运行一个新项目大约需要4秒。</p><h2 id="e701" class="nc ks iq bd kt nd ne dn kx nf ng dp lb ls nh ni ld lw nj nk lf ma nl nm lh nn bi translated">运行灯塔审计</h2><p id="d910" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">一旦项目搭建完成，我们就可以用</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="b93f" class="nc ks iq np b gy nt nu l nv nw"># yarn dev</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/313ee67e5ef60d08118103eaafc11a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RYk2FtHqPLYIEdjzN1D8hQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 1</strong> Lighthouse report for the fresh project in development mode</figcaption></figure><p id="8d52" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">您会注意到性能分数相当低，这提醒了我总是在产品构建上运行lighthouse审计。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="6dc8" class="nc ks iq np b gy nt nu l nv nw"># yarn build &amp;&amp; yarn preview</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/21580436d84cd45ded2678bded6e440f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XZeNqtQw2evi4SL83lp4w.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 2</strong> Lighthouse report for the fresh project in a production build</figcaption></figure><p id="5c82" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">报告中整体分数都是绿色的。然而，我们的目标是在所有类别中都达到100分。</p><h1 id="6743" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">提高绩效得分</h1><p id="fa09" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">现在让我们从性能类别得分开始。根据诊断，消息<code class="fe od oe of np b">Image elements do not have explicit width and height</code>表明我们可以通过添加宽度和高度属性来解决这个问题。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/b60c9ee1e674b5404153e8da17733d4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nU2ucuU638jrxiQMsgIFRQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 3</strong> <code class="fe od oe of np b">Image elements do not have explicit width and height</code></figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">./src/App.tsx</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/4fa72e076b3519af234378baaa6fa261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8s5ncUnArlEZ2zWQAK4og.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 4</strong> Lighthouse report after improving the performance score</figcaption></figure><p id="408e" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">很高兴看到绩效圈上的100分和所有绩效指标都是绿色的。</p><h1 id="0ef2" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">提高可访问性得分</h1><p id="9073" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">可访问性类别分数表明所有用户能否有效地访问内容和浏览您的网站。请注意，只有可访问性问题的一个子集可以被自动检测，所以也鼓励手动测试。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/47ea63183975ce32c05c19e6f2bd9f24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6jLLrNN2wzRw_87XPYdtfw.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 5</strong> Background and foreground colors do not have a sufficient contrast ratio</figcaption></figure><p id="0505" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">前景和背景之间的颜色对比是可访问性的度量之一。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">./src/App.css</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/369f83acf5307e4fe65acb779ae71027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LqC6F5AT-9C2qP-buALsbg.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 6</strong> Lighthouse report after improving the accessibility score</figcaption></figure><h1 id="6de1" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">提高SEO分数</h1><p id="a1f1" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">SEO指标显示了网站或应用程序被搜索引擎抓取并显示在搜索结果中的效果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/6786813e7148f3914fa6ca21da70618b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VYkBe-EgUUb7DzQ_n3q_gQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 7 </strong>Document does not have a meta description</figcaption></figure><p id="bbf3" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">接下来，我们需要为我们的SEO分数向文档<code class="fe od oe of np b">&lt;head&gt;</code>添加元描述。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">./index.html</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/fbc84fdc2eece724bfdf403e5f2073a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*epfECV39ttoAdL3R8IGBEA.gif"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 8</strong> Lighthouse report after improving the SEO score</figcaption></figure><p id="96cc" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">正如你所看到的，经过上述曲调，该项目可以获得所有100点和绿色的灯塔报告。</p><h1 id="be6f" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">设置PWA</h1><p id="b6f6" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">启用所有渐进式Web应用程序标准后，用户将能够将应用程序添加到他们的主屏幕上，并且可以离线或在低质量网络上访问。</p><p id="8ed0" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><code class="fe od oe of np b">vite-plugin-pwa</code>包是Vite项目的零配置PWA插件。</p><div class="mf mg gp gr mh mi"><a href="https://github.com/antfu/vite-plugin-pwa" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">GitHub-ant fu/Vite-plugin-pwa:Vite的零配置PWA</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">Vite的零配置PWA。在GitHub上创建一个帐户，为antfu/vite-plugin-pwa开发做贡献。</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">github.com</p></div></div><div class="mr l"><div class="oi l mt mu mv mr mw kp mi"/></div></div></a></div><p id="21e7" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">安装插件，在<code class="fe od oe of np b">vite.config.ts</code>中添加插件。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="a323" class="nc ks iq np b gy nt nu l nv nw"># yarn add -D vite-plugin-pwa</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">./vite.config.ts</figcaption></figure><p id="73ed" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">这不是为Vite项目设置PWA的唯一步骤。我们需要<a class="ae oj" href="https://favicon.io/favicon-converter/" rel="noopener ugc nofollow" target="_blank">为应用程序生成图标</a>，并将它们添加到<code class="fe od oe of np b">public</code>文件夹中。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="b7ba" class="nc ks iq np b gy nt nu l nv nw">node_modules/<br/>public/<br/> ├── <strong class="np ir">android-chrome-192x192.png</strong><br/> ├── <strong class="np ir">android-chrome-512x512.png</strong><br/> ├── <strong class="np ir">apple-touch-icon.png</strong><br/> ├── <strong class="np ir">favicon-16x16.png</strong><br/> ├── <strong class="np ir">favicon-32x32.png</strong><br/> ├── <strong class="np ir">favicon.ico</strong><br/> └── vite.svg<br/>src/<br/>...</span></pre><p id="29e9" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">然而，我们不能仅仅将清单文件<code class="fe od oe of np b">site.webmanifest</code>复制到公共文件夹。这个<code class="fe od oe of np b">vite-plugin-pwa</code>包将生成一个<code class="fe od oe of np b">manifest.webmanifest</code>并在应用程序根中服务。更改清单文件的方法是通过<code class="fe od oe of np b">vite.config.ts</code>中的<code class="fe od oe of np b">vite-plugin-pwa</code>包自定义清单。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">./vite.config.ts</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/b31b0e320e511f3368ad61a4a199bfd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9bfxPhhaZI7JSvzCCWf-1g.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 9</strong> No `&lt;meta name=”theme-color”&gt;` tag found &amp; valid `apple-touch-icon`</figcaption></figure><p id="e749" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">我们快到了。是时候在head标签中为PWA添加一些meta标签了。<br/>因为<code class="fe od oe of np b">apple-touch-icon</code>已经在上一步生成。让我们为图标添加meta标签。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="og oh l"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">./index.html</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/abb0b0f7b5c407097e7c7b8363112e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vMR19OLRz19XBnadhyEoWw.gif"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><strong class="bd oc">Figure 10</strong> Lighthouse report 100% PWA</figcaption></figure><p id="a8bc" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">恭喜你！干得好！</p><p id="28c1" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">这就是我们如何改进Vite React TS项目模板，使其成为您的高性能样板。</p><h1 id="fe83" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">结论</h1><p id="2b56" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">Vite是下一代前端开发工具，旨在为开发者提供更好的开发体验。不仅可以生成React应用，Vite还可以支持Vue应用和普通JS应用。你会在<a class="ae oj" href="https://vitejs.dev/" rel="noopener ugc nofollow" target="_blank"> Vite网站</a>上发现更多优秀的功能。</p><p id="0c07" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">上面的源代码被提交到GitHub存储库中，并部署到Vercel<a class="ae oj" href="https://vite-react-ts-100.vercel.app/" rel="noopener ugc nofollow" target="_blank">vite-react-ts-100</a>。</p><p id="95e7" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">请随意在下面的链接中派生或导入存储库。</p><div class="mf mg gp gr mh mi"><a href="https://github.com/rockyliyanlok/vite-react-ts-100" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">GitHub-rockyliyanlok/vite-react-ts-100:构建一个PWA，在Google Lighthouse中实现100%用…</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">github.com</p></div></div><div class="mr l"><div class="ok l mt mu mv mr mw kp mi"/></div></div></a></div><p id="021d" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">编码快乐！💻</p></div><div class="ab cl ol om hu on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ij ik il im in"><p id="a3b0" class="pw-post-body-paragraph lj lk iq ll b lm mx jr lo lp my ju lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><em class="os">更多内容请看</em><a class="ae oj" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="os">plain English . io</em></strong></a><em class="os">。报名参加我们的</em> <a class="ae oj" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="os">免费周报</em> </strong> </a> <em class="os">。关注我们关于</em><a class="ae oj" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="os">Twitter</em></strong></a><a class="ae oj" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="os">LinkedIn</em></strong></a><em class="os"/><a class="ae oj" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="os">YouTube</em></strong></a><em class="os"/><a class="ae oj" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="os">不和</em> </strong> </a> <em class="os">。</em></p></div></div>    
</body>
</html>