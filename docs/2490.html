<html>
<head>
<title>How to Convert JSON to a Map in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript将JSON转换成地图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-convert-json-to-map-49f95e4a6d21?source=collection_archive---------9-----------------------#2022-06-10">https://javascript.plainenglish.io/javascript-convert-json-to-map-49f95e4a6d21?source=collection_archive---------9-----------------------#2022-06-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="833b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何在JavaScript中将JSON字符串快速转换为地图。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/945e8163ce29cdece9c7c5f19d48da09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EcBPa8Eof2vlgYaEkhswFA.png"/></div></div></figure><p id="0521" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在JavaScript中将JSON转换成<code class="fe lk ll lm ln b">Map</code>:</p><ol class=""><li id="8cbb" class="lo lp in kq b kr ks ku kv kx lq lb lr lf ls lj lt lu lv lw bi translated">用<code class="fe lk ll lm ln b">JSON.parse() </code>方法将JSON字符串解析成一个对象。</li><li id="3db4" class="lo lp in kq b kr lx ku ly kx lz lb ma lf mb lj lt lu lv lw bi translated">用这个对象作为参数调用<code class="fe lk ll lm ln b">Object.entries()</code>。</li><li id="1fa1" class="lo lp in kq b kr lx ku ly kx lz lb ma lf mb lj lt lu lv lw bi translated">将<code class="fe lk ll lm ln b">Object.entries()</code>的结果传递给<code class="fe lk ll lm ln b">Map()</code>构造函数。</li></ol><p id="2d7a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><pre class="kd ke kf kg gt mc ln md me aw mf bi"><span id="35bd" class="mg mh in ln b gy mi mj l mk ml">const json =<br/>  '{"user1":"John","user2":"Kate","user3":"Peter"}';</span><span id="26b2" class="mg mh in ln b gy mm mj l mk ml">const map = new Map(Object.entries(JSON.parse(json)));</span><span id="fde4" class="mg mh in ln b gy mm mj l mk ml">// Map(3) { 'user1' =&gt; 'John', 'user2' =&gt; 'Kate', 'user3' =&gt; 'Peter' }<br/>console.log(map);</span></pre><p id="dde5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们首先将字符串转换为对象，然后转换为数组，因为我们不能将JSON字符串直接解析为<code class="fe lk ll lm ln b">Map</code>。<code class="fe lk ll lm ln b">Object.entries()</code>方法获取一个对象并返回一个键值对列表，这些键值对对应于对象的每个属性的键和值:</p><pre class="kd ke kf kg gt mc ln md me aw mf bi"><span id="1f9f" class="mg mh in ln b gy mi mj l mk ml">const obj = {<br/>  user1: 'John',<br/>  user2: 'Kate',<br/>  user3: 'Peter',<br/>};</span><span id="be9a" class="mg mh in ln b gy mm mj l mk ml">const arr = Object.entries(obj);</span><span id="cfad" class="mg mh in ln b gy mm mj l mk ml">// [ [ 'user1', 'John' ], [ 'user2', 'Kate' ], [ 'user3', 'Peter' ] ]<br/>console.log(arr);</span></pre><p id="07aa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">Map()</code>构造函数可以接受一个键值对的iterable来创建<code class="fe lk ll lm ln b">Map</code>元素，所以我们将<code class="fe lk ll lm ln b">Object.entries()</code>的结果直接传递给它。</p><h1 id="b264" class="mn mh in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">将地图转换为JSON</h1><p id="a1ee" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">要将<code class="fe lk ll lm ln b">Map</code>转换回JSON字符串，使用Map作为参数调用<code class="fe lk ll lm ln b">Object.fromEntries()</code>方法，并将结果传递给<code class="fe lk ll lm ln b">JSON.stringify()</code>方法:</p><pre class="kd ke kf kg gt mc ln md me aw mf bi"><span id="8fe4" class="mg mh in ln b gy mi mj l mk ml">const json =<br/>  '{"user1":"John","user2":"Kate","user3":"Peter"}';</span><span id="0d8b" class="mg mh in ln b gy mm mj l mk ml">const map = new Map(Object.entries(JSON.parse(json)));</span><span id="aad3" class="mg mh in ln b gy mm mj l mk ml">const jsonFromMap = JSON.stringify(Object.fromEntries(map));</span><span id="1393" class="mg mh in ln b gy mm mj l mk ml">// {"user1":"John","user2":"Kate","user3":"Peter"}<br/>console.log(jsonFromMap);</span></pre><p id="2fd9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们首先用<code class="fe lk ll lm ln b">Object.fromEntries()</code>转换<code class="fe lk ll lm ln b">Map</code>，因为我们不能直接将<code class="fe lk ll lm ln b">Map</code>序列化为JSON字符串。<code class="fe lk ll lm ln b">Object.fromEntries()</code>方法将任何键值对列表转换成一个对象:</p><pre class="kd ke kf kg gt mc ln md me aw mf bi"><span id="aa42" class="mg mh in ln b gy mi mj l mk ml">const map = new Map([<br/>  ['user1', 'John'],<br/>  ['user2', 'Kate'],<br/>  ['user3', 'Peter'],<br/>]);</span><span id="169b" class="mg mh in ln b gy mm mj l mk ml">const obj = Object.fromEntries(map);</span><span id="14eb" class="mg mh in ln b gy mm mj l mk ml">// { user1: 'John', user2: 'Kate', user3: 'Peter' }<br/>console.log(obj);</span></pre></div><div class="ab cl nj nk hr nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ig ih ii ij ik"><p id="908d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nq">更新于:</em><a class="ae nr" href="https://cbdev.link/d97dc9" rel="noopener ugc nofollow" target="_blank"><em class="nq">codingbeautydev.com</em></a></p><p id="0f0b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">每周获取新的web开发技巧和教程</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/b8db4799ac3fa2b55b41c7ca714bdf64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KLG9Wxq6Sqt3jxTaL00Tnw.png"/></div></div></figure><p id="1b06" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nr" href="https://codingbeautydev.com/newsletter" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">订阅</strong> </a></p><p id="1318" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nq">更多内容看</em><a class="ae nr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nq"/></strong><em class="nq">o</em></a><em class="nq">。报名参加我们的</em> <a class="ae nr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nq">免费周报</em> </strong> </a> <em class="nq">。关注我们关于</em><a class="ae nr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nq">Twitter</em></strong></a><em class="nq">和</em><a class="ae nr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nq">LinkedIn</em></strong></a><em class="nq">。查看我们的</em> <a class="ae nr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nq">社区不和谐</em> </strong> </a> <em class="nq">，加入我们的</em> <a class="ae nr" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nq">人才集体</em> </strong> </a> <em class="nq">。</em></p></div></div>    
</body>
</html>