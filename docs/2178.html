<html>
<head>
<title>TypeScript with React: A Retrospective (TL;DR — It’s Awesome!)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带React的TypeScript:回顾(TL；博士——太棒了！)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-react-a-retrospective-tl-dr-its-awesome-bffb1c2c448c?source=collection_archive---------12-----------------------#2022-05-19">https://javascript.plainenglish.io/typescript-react-a-retrospective-tl-dr-its-awesome-bffb1c2c448c?source=collection_archive---------12-----------------------#2022-05-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0099" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">我从领导一个由8名开发人员组成的团队，将Angular应用程序转换为React和TypeScript中学到了什么。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d2d59ef541157bc86d4281dee964c276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bAR9FykjHZ5ornMW"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/es/@lautaroandreani?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lautaro Andreani</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4bbe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我第一次开始写JavaScript时，来自C++，我的头脑被炸了。</p><p id="053d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我离开军队重新加入“真实世界”时，我也有同样的感觉—在我在已知的、有纪律的、直截了当的、定义明确的环境中度过了这么长时间之后，我努力去理解这个看似混乱的丛林。</p><p id="796a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我不是唯一的。有些人失去了理智:</p><blockquote class="lp lq lr"><p id="502d" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">戴夫:给我-</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/18883eb8c04d931b6179df89791906de.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/0*YScYeuNxMPlq7oPH"/></div></figure><blockquote class="lp lq lr"><p id="20c6" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">JavaScript: <br/>嗯……当然，你是老板！</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/dcd60b929eb6b3f6cd8b9b1cd7af39d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/0*Fvic5q-ncoZJrrDD"/></div></figure><blockquote class="lp lq lr"><p id="5c0e" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">C++:</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/2e95c5aa51caaad693410e1280401c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/0*CIaqpqHxaCaw6qV7"/></div></figure><p id="dae5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其他人吓坏了，跑回来，再也看不见了。</p><p id="f647" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">幸运的是，很快我开始与Angular合作，它为我介绍了所有问题的完美解决方案——TypeScript——它给了我渴望的结构和纪律，但又能根据我的需要灵活地使用这些品质。我被卖了。</p></div><div class="ab cl lz ma hr mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ig ih ii ij ik"><p id="a2f3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">几年后，我的团队负责用新的设计和新的框架——React——重写我们的整个Angular UI。一个新的丛林，但这次我有了解决方案！</p><p id="e81d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我的经理思想开放，非常友好，让我在那个项目上尝试使用TypeScript，尽管他不喜欢TS(至少可以这么说)，我们的大多数高级开发人员都和他有同样的感受。</p><p id="b7bb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我在这里停下来说明一下——讨厌TS的开发人员，或者至少看不到使用它的意义。我见过很多这样的人，我把他们分为四类:</p><ul class=""><li id="4f52" class="mg mh in kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">真正不需要它的开发人员，因为他们要么是非常优秀和有经验的，要么是更面向后端的开发人员，或者两者都是(是的，我说的是你，前一段的队友和经理)。</li><li id="cf1c" class="mg mh in kv b kw mp kz mq lc mr lg ms lk mt lo ml mm mn mo bi translated">“快速行动，打破常规”的开发人员，他们更喜欢“把事情做完”，以后再解决。</li><li id="ebac" class="mg mh in kv b kw mp kz mq lc mr lg ms lk mt lo ml mm mn mo bi translated">开发人员认为他们不喜欢TS，因为他们还没有真正使用过它，或者他们受到了某人的创伤，他强迫他们滥用它，并以错误和复杂的方式使用它(是的，它肯定会被误用，成为一场噩梦)。</li><li id="f3b5" class="mg mh in kv b kw mp kz mq lc mr lg ms lk mt lo ml mm mn mo bi translated">糟糕/懒惰的开发人员，他们只想一个人写他们糟糕的错误代码。(我明显是在开玩笑，没有不好的开发者，我们都很棒！)</li></ul><p id="c557" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，经过几个月的紧张工作，带领一个由来自各个层次的8名开发人员组成的团队——从经验丰富的顾问到资历很浅的新员工——我认为这个实验非常成功。事实上，我真的无法想象如何(以及为什么？！)你会不会在你的React应用中不使用TS，下面是原因。</p><h1 id="2583" class="mu mv in bd mw mx my mz na nb nc nd ne jt nf ju ng jw nh jx ni jz nj ka nk nl bi translated"><strong class="ak"> 1。更少的bug……</strong></h1><p id="5a50" class="pw-post-body-paragraph kt ku in kv b kw nm jo ky kz nn jr lb lc no le lf lg np li lj lk nq lm ln lo ig bi translated">让我们做一个小实验——打开React应用程序，向其中添加一个<strong class="kv io"> tsconfig </strong>文件，配置为对JS文件进行类型检查。</p><p id="1250" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这非常容易做到(有许多文章将带您完成这个简单的过程，我将在本文的结尾添加一些说明),并有效地将ts设置为您项目的linter。</p><p id="64b7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我可以100%保证，在任何一个适当大小的应用程序中，这将暴露出几十个问题，如果不是几百个的话，从使用第三方包的错误属性开始，通过使用实际上不在你的类对象上的类名，一直到使用你从未初始化的变量，在某些情况下可能是未定义的变量。所有这些都很难调试，但是很容易避免。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nr"><img src="../Images/0732504bc0ac92adabe3ec8c31abe079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXWplXJKlir9ewxwdyjjlA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Oops, we used the wrong prop name on our own component!</figcaption></figure><p id="cb30" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">是的，这些bug中的一些有可能通过React的“PropTypes”解决，但是在运行时发现问题总是不如在开发时发现问题理想，并且考虑到使用PropTypes会增加相同数量的样板代码，为什么不使用TS并享受许多其他好处呢？</p><h1 id="06a5" class="mu mv in bd mw mx my mz na nb nc nd ne jt nf ju ng jw nh jx ni jz nj ka nk nl bi translated"><strong class="ak"> 2。组件+ API文档，这是动态的和自我实施的</strong></h1><p id="dbfa" class="pw-post-body-paragraph kt ku in kv b kw nm jo ky kz nn jr lb lc no le lf lg np li lj lk nq lm ln lo ig bi translated">在任何大规模的项目中，当编写任何React组件时，您必然会使用许多其他组件，项目越大，您很好地了解这些其他组件的机会就越小。</p><p id="dd42" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每当我在没有TS的情况下编写React时，我发现自己在几个不同的组件之间来回切换，要么试图记住每个组件有哪些属性，要么有时将所有属性复制到我当前正在处理的组件的底部，只是为了避免这种切换。</p><p id="beeb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有了TS，你甚至不需要打开这些组件，它们的接口就在那里。绝大多数第三方组件包都暴露了一个TS接口(有人说Material-UI吗？).只是让大家的生活简单多了。</p><p id="ac71" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你的开发组织有自己的共享组件库，而很少团队/产品在使用，这就变得更加重要了。有一个清晰的文档化的契约，每个人都可以不用进入代码就可以使用。这使得沟通更好，维护团队的生活更容易。</p><p id="36d1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当涉及到API文档时，它甚至更加重要。正如我提到的，我们正在转换现有的Angular应用程序以进行反应，这意味着整个后端已经构建好了，不需要进行更改。团队中有一半人根本不了解应用和后端，但他们需要开始使用的只是API响应的TS模型，他们可以从Angular应用中复制粘贴，并确保这是他们将得到的响应。想象一下，只需将TS模型(或其链接)添加到故事/票证，而不是添加API的URL和描述，这是多么简单，即使这样，开发人员仍然需要进入后端代码来查看响应的结构，或者调用它并在控制台记录结果。</p><p id="3172" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用TS进行文档编制的最大好处是，与我使用过的任何其他文档编制工具不同，如果有人在不更新文档的情况下更改API/组件，它实际上就变得毫无用处，如果不更新TS模型，您就无法更改代码，因此它总是准确和最新的。我们的应用程序的某些部分是在2年前编写的，但开发人员仍然可以依靠ts模型来准确地表示响应结构。</p><h1 id="ad73" class="mu mv in bd mw mx my mz na nb nc nd ne jt nf ju ng jw nh jx ni jz nj ka nk nl bi translated"><strong class="ak"> 3。</strong> <strong class="ak">反应状态结构</strong></h1><p id="e6b7" class="pw-post-body-paragraph kt ku in kv b kw nm jo ky kz nn jr lb lc no le lf lg np li lj lk nq lm ln lo ig bi translated">作为我们正在编写的新React应用程序的一部分，我们使用了Redux。这也是我觉得TS大放异彩的另一个地方。</p><p id="0a1d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Redux状态很容易变得非常大和复杂，大多数时候，即使查看reducer也不会真正帮助您理解完整的结构，因为每个操作只处理该状态片段的一个(或几个)属性。为了完全理解这个结构，你需要在你的头脑中(或在纸上)一点一点地从减速器的所有动作中构建它。</p><p id="ce00" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用状态的TS模型将立即揭示状态片的完整结构(或者完整状态，如果您需要的话)，因此您可以很容易地知道作为消费者您可以使用什么。</p><p id="e059" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">建立Redux商店是我强烈感觉到的一点，对我来说，没有ts几乎不可能建立一个React应用程序。</p><h1 id="1f1a" class="mu mv in bd mw mx my mz na nb nc nd ne jt nf ju ng jw nh jx ni jz nj ka nk nl bi translated"><strong class="ak"> 4。</strong> <strong class="ak">发展速度</strong></h1><p id="aee5" class="pw-post-body-paragraph kt ku in kv b kw nm jo ky kz nn jr lb lc no le lf lg np li lj lk nq lm ln lo ig bi translated">这一点有点争议，因为有些人会说TS会降低速度，因为它需要额外的代码，但从我的经验来看，它很快就有了回报。</p><p id="c323" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如以上段落中提到的，TS通过帮助您避免错误、定义和记录合同、节省您一次又一次钻研现有代码的需要等方式来节省您的时间。</p><p id="c766" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有了TS和您最喜欢的IDE，只需开始输入或悬停在组件、函数、变量或状态片段上，您需要的所有信息就在那里。</p></div><div class="ab cl lz ma hr mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ig ih ii ij ik"><p id="9a67" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，关于“滥用”TS的一个重要注意事项是</p><p id="a70e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在构建应用程序时，我们都有不同的目标、技能和时间表。</p><p id="6958" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">没有一种TS范式适合所有人。</p><p id="706a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有些人不使用它，因为他们认为它强迫你使用面向对象编程，并创建了一个继承地狱。</p><p id="9d6f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有些人认为学习和掌握的时间太长，因为他们看到了使用泛型和组合类型来覆盖所有可能情况的高级示例。</p><p id="fbd5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我曾经认为你永远不应该在你的代码中使用“任何”类型，但是当你有最后期限时，你开始以不同的方式看待事情，并且你开始理解有99%的代码是类型化的比没有类型要好。</p><p id="e943" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我所能建议的是，从最简单的形式开始使用它——向简单的变量和不复杂的对象(如组件道具)添加类型。一旦掌握了窍门，您就可以决定您希望您的TS范型有多严格(或不严格)和复杂(或不复杂)。</p></div><div class="ab cl lz ma hr mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ig ih ii ij ik"><p id="6988" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">附录——将打字稿设置为短打</strong></p><ul class=""><li id="e4e0" class="mg mh in kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">在React应用程序中，安装这些包和类型:</li></ul><pre class="kd ke kf kg gt ns nt nu nv aw nw bi"><span id="3730" class="nx mv in nt b gy ny nz l oa ob">npm install <!-- -->--save-dev<!-- --> typescript @types/node @types/react @types/react-dom @types/jest <!-- -->@tsconfig/create-react-app</span></pre><ul class=""><li id="98c2" class="mg mh in kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">接下来，在项目的根文件夹中创建一个名为“tsconfig.json”的文件，内容如下:</li></ul><pre class="kd ke kf kg gt ns nt nu nv aw nw bi"><span id="39c6" class="nx mv in nt b gy ny nz l oa ob">{<br/>  "extends": "@tsconfig/create-react-app/tsconfig.json",<br/>  "compilerOptions": {<br/>    "skipLibCheck": true,<br/>    "noImplicitAny": false,<br/>    "noEmit": true,<br/>    "allowJs": true,<br/>    "checkJs": true<br/>  },<br/>  "include": ["src/**/*"],<br/>  "exclude": ["node_modules", "**/*.test.js"]<br/>}</span></pre><ul class=""><li id="2f80" class="mg mh in kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">在您的<code class="fe oc od oe nt b">package.json</code>文件中，将这个脚本添加到<code class="fe oc od oe nt b">scripts</code>部分:</li></ul><pre class="kd ke kf kg gt ns nt nu nv aw nw bi"><span id="3e87" class="nx mv in nt b gy ny nz l oa ob">"ts-as-lint": "tsc"</span></pre><ul class=""><li id="ecc2" class="mg mh in kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">跑<code class="fe oc od oe nt b">npm run ts-as-lint</code></li></ul></div><div class="ab cl lz ma hr mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ig ih ii ij ik"><p id="9ff8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ls">更多内容尽在</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">说白了. io </em> </strong> </a> <em class="ls">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">推特</em> </strong> </a> <em class="ls">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ls">LinkedIn</em></strong></a><em class="ls">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">社区不和谐</em> </strong> </a> <em class="ls">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">人才集体</em> </strong> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>