<html>
<head>
<title>Angular Dependency Injection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度依赖注入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-dependency-injection-a12e1582486d?source=collection_archive---------6-----------------------#2022-10-22">https://javascript.plainenglish.io/angular-dependency-injection-a12e1582486d?source=collection_archive---------6-----------------------#2022-10-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="645b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简单地说，依赖注入指的是引用其他类的类。这是一种允许单个类从其他来源请求依赖项的设计模式。</p><p id="1919" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我们将构建一个使用依赖注入的示例学生列表Angular 12应用程序。</p><h1 id="aabb" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">教程要求</h1><ul class=""><li id="6cef" class="lj lk iq jp b jq ll ju lm jy ln kc lo kg lp kk lq lr ls lt bi translated">安装在本地开发环境中的Angular CLI(首选最新版本)。</li><li id="72af" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">角度的基本知识。</li><li id="8d8b" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">有JavaScript或TypeScript方面的知识。</li></ul><h1 id="01dc" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">期待结果</h1><p id="ee82" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">本教程旨在让你开始使用Angular 12依赖注入。通过阅读本教程，您将对DI有一个深入的了解，在您实现自己的项目时，您可能会有所进步。</p><h1 id="97ce" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">角度依赖注入入门</h1><p id="9be5" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">依赖注入是关于资源共享的。</p><p id="25b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">比方说，您有一个显示学校学生列表的<code class="fe mc md me mf b">StudentService</code>和<code class="fe mc md me mf b">StudentComponent</code>。我们可能会认为组件类依赖于服务类来显示数据，因为我们使用服务从API获取数据，这将在下一节中看到。</p><p id="3134" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，一定要记住，依赖注入是一种编程方式，它使开发人员能够编写相互通信的代码。</p><p id="385f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，举例来说，当一个类没有给定的资源时，它可以很快地从另一个有资源的类中得到它，以此类推。</p><h1 id="300d" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">创建角度服务</h1><p id="e857" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">现在我们已经有了DI的背景知识，让我们创建一个服务，我们将使用它返回给定公司的实习生名单。</p><blockquote class="mg mh mi"><p id="d9b8" class="jn jo mj jp b jq jr js jt ju jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj kk ij bi translated"><em class="iq">服务是编程中广泛使用的一个术语，尤其是在微服务领域。它只是用于处理特定任务的一个函数或一组方法。</em></p></blockquote><p id="d8b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们首先创建一个学生模型，如下所示:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="6f8f" class="mv km iq mf b gy mw mx l my mz">cd injectionExample<br/>ng g i student</span></pre><p id="13d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输出:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="6d9b" class="mv km iq mf b gy mw mx l my mz">CREATE src/app/student.ts (29 bytes)</span></pre><p id="6a6f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，将以下内容复制并添加到该模型中，如下所示:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="bb84" class="mv km iq mf b gy mw mx l my mz">export interface Student {<br/>  studentFirstName: string;<br/>  studentLastName: string;<br/>  studentRegistrationNumber: string;<br/>  studentCourse: string;<br/>  studentYearOfStudy: number;<br/>  reportingDate: string;<br/>  college: string;<br/>}</span></pre><p id="07bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了模型，让我们继续创建一个包含显示学生列表的函数的服务。</p><blockquote class="mg mh mi"><p id="84dc" class="jn jo mj jp b jq jr js jt ju jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj kk ij bi translated">需要注意的是，我们创建这些服务的原因是为了松散地耦合我们的应用程序，并考虑到可重用性。</p></blockquote><p id="a4fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行以下命令创建<code class="fe mc md me mf b">studentListService</code>。</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="3724" class="mv km iq mf b gy mw mx l my mz">ng g service student-list</span></pre><p id="e306" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输出:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="95c2" class="mv km iq mf b gy mw mx l my mz">CREATE src/app/student-list.service.spec.ts (359 bytes)<br/>CREATE src/app/student-list.service.ts (140 bytes)</span></pre><p id="fab4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了一个服务，让我们添加一个函数，该函数返回实习生列表以及他们各自的详细信息。</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="e1ae" class="mv km iq mf b gy mw mx l my mz">import { Injectable } from '@angular/core';<br/>import {Student} from './student';</span><span id="6a25" class="mv km iq mf b gy na mx l my mz">@Injectable({<br/>  providedIn: 'root'<br/>})<br/>export class StudentListService {</span><span id="3f94" class="mv km iq mf b gy na mx l my mz">  getInternsDetails(): Student[] {<br/>    return [<br/>      {<br/>        studentFirstName: 'John',<br/>        studentLastName: 'Doe',<br/>        studentRegistrationNumber: 'TRD12345STR',<br/>        studentCourse: 'Computer Science',<br/>        studentYearOfStudy: 1,<br/>        reportingDate: '2019-07-20',<br/>        college: 'University of Test1',<br/>      },<br/>      {<br/>        studentFirstName: 'Alice',<br/>        studentLastName: 'Liz',<br/>        studentRegistrationNumber: 'DRTRD12345STR',<br/>        studentCourse: 'Software Engineering',<br/>        studentYearOfStudy: 1,<br/>        reportingDate: '2020-07-19',<br/>        college: 'University of Test2',<br/>      },<br/>      {<br/>        studentFirstName: 'Bob',<br/>        studentLastName: 'Miro',<br/>        studentRegistrationNumber: 'YR6353',<br/>        studentCourse: 'Information technology',<br/>        studentYearOfStudy: 1,<br/>        reportingDate: '2019-07-20',<br/>        college: 'University of Test3',<br/>      },<br/>      {<br/>        studentFirstName: 'Jakob',<br/>        studentLastName: 'Jack',<br/>        studentRegistrationNumber: 'YTT64749EJFHR',<br/>        studentCourse: 'Computer Engineering',<br/>        studentYearOfStudy: 1,<br/>        reportingDate: '2019-02-10',<br/>        college: 'University of Test7',<br/>      },<br/>      {<br/>        studentFirstName: 'Prince',<br/>        studentLastName: 'Sawoo',<br/>        studentRegistrationNumber: 'ETRHDDIE857EHD',<br/>        studentCourse: 'Computer Science',<br/>        studentYearOfStudy: 1,<br/>        reportingDate: '2019-03-30',<br/>        college: 'University of Test10',<br/>      }<br/>    ];<br/>  }<br/>}</span></pre><p id="573b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们分析一下上面的服务:</p><ul class=""><li id="a2cb" class="lj lk iq jp b jq jr ju jv jy nb kc nc kg nd kk lq lr ls lt bi translated"><strong class="jp ir">第1行</strong> —我们正在导入<code class="fe mc md me mf b">injectable</code>装饰机。没有这个装饰器，其他应用程序组件就不能注入(请求)这个服务。</li><li id="a3af" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><strong class="jp ir">线2 </strong> — <code class="fe mc md me mf b">Student</code>模型从<code class="fe mc md me mf b">./student</code>导入。通常的做法是将所有服务保存在一个<code class="fe mc md me mf b">service</code>目录中。请随意测试。</li><li id="0a9f" class="lj lk iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><strong class="jp ir">线5</strong>——我们有一个<code class="fe mc md me mf b">StudentListService</code>班。在这个类中，我们定义了返回一组<code class="fe mc md me mf b">Student</code>信息的<code class="fe mc md me mf b">getInternsDetails()</code>方法。</li></ul><h1 id="80fa" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">如何在组件内部注入服务</h1><p id="7070" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">现在我们已经有了一个可以使用的服务，让我们继续执行以下命令来创建一个学生组件:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="25fc" class="mv km iq mf b gy mw mx l my mz">ng g c student</span></pre><p id="8c40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输出:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="41c1" class="mv km iq mf b gy mw mx l my mz">CREATE src/app/student/student.component.css (0 bytes)<br/>CREATE src/app/student/student.component.html (26 bytes)<br/>CREATE src/app/student/student.component.spec.ts (635 bytes)<br/>CREATE src/app/student/student.component.ts (273 bytes)<br/>UPDATE src/app/app.module.ts (400 bytes)</span></pre><p id="39d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编辑<code class="fe mc md me mf b">src/app/student/student.component.ts</code>，如下图所示:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="a9b9" class="mv km iq mf b gy mw mx l my mz">import { Component, OnInit } from '@angular/core';<br/>import {StudentListService} from '../student-list.service';<br/>import {Student} from '../student';</span><span id="d20d" class="mv km iq mf b gy na mx l my mz">@Component({<br/>  selector: 'app-student',<br/>  templateUrl: './student.component.html',<br/>  styleUrls: ['./student.component.css']<br/>})<br/>export class StudentComponent implements OnInit {</span><span id="69c8" class="mv km iq mf b gy na mx l my mz">// local array tohold the list of students<br/>  students: Student[];<br/>  // we're injecting the studentListService (this is Dependency injection in action)<br/>  constructor(private studentListService: StudentListService) { }</span><span id="825a" class="mv km iq mf b gy na mx l my mz">  ngOnInit() {<br/>    this.getStudentsList();<br/>  }<br/>  //getting the list of students and assigning the list to students array<br/>  getStudentsList() {<br/>    this.students = this.studentListService.getInternsDetails();<br/>  }<br/>}</span></pre><p id="8a29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的组件类中，我们定义了用于保存学生列表的<code class="fe mc md me mf b">students</code>数组。</p><p id="cafb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们注入之前创建的<code class="fe mc md me mf b">StudentListService</code>。这就是依赖注入在Angular中的实现方式。</p><p id="7858" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还创建了用于从服务中获取学生详细信息的<code class="fe mc md me mf b">getStudentsList()</code>方法。我们将结果分配给本地创建的学生数组。我们在<code class="fe mc md me mf b">ngOnInit()</code>方法中调用这个方法来获取学生关于页面负载的详细信息。</p><h1 id="6108" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">显示来自服务的数据</h1><p id="cd50" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">既然我们已经使用了我们的服务，让我们继续在浏览器上显示这些数据。</p><p id="9377" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如下图所示编辑<code class="fe mc md me mf b">src/app/student/student.component.html</code>:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="99f0" class="mv km iq mf b gy mw mx l my mz">&lt;div&gt;<br/>&lt;table class="table table-stripped table-active"&gt;<br/>  &lt;thead class="thead-light"&gt;<br/>  &lt;th&gt;#&lt;/th&gt;<br/>  &lt;th&gt;First Name&lt;/th&gt;<br/>  &lt;th&gt;Last Name&lt;/th&gt;<br/>  &lt;th&gt;Admission Number&lt;/th&gt;<br/>  &lt;th&gt;Course&lt;/th&gt;<br/>  &lt;th&gt;Year Of Study&lt;/th&gt;<br/>  &lt;th&gt;Reported On&lt;/th&gt;<br/>  &lt;th&gt;College&lt;/th&gt;<br/>  &lt;/thead&gt;<br/>  &lt;tbody&gt;<br/>  &lt;tr *ngFor="let student of students;let i=index"&gt;<br/>    &lt;td&gt;{{i+1}}&lt;/td&gt;<br/>    &lt;td&gt;{{student.studentFirstName}}&lt;/td&gt;<br/>    &lt;td&gt;{{student.studentLastName}}&lt;/td&gt;<br/>    &lt;td&gt;{{student.studentRegistrationNumber}}&lt;/td&gt;<br/>    &lt;td&gt;{{student.studentCourse}}&lt;/td&gt;<br/>    &lt;td&gt;{{student.studentYearOfStudy}}&lt;/td&gt;<br/>    &lt;td&gt;{{student.reportingDate}}&lt;/td&gt;<br/>    &lt;td&gt;{{student.college}}&lt;/td&gt;<br/>  &lt;/tr&gt;<br/>  &lt;/tbody&gt;<br/>&lt;/table&gt;<br/>&lt;/div&gt;</span></pre><p id="9fe4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，通过在应用程序的根目录下执行以下命令来运行Angular应用程序:</p><pre class="mn mo mp mq gt mr mf ms mt aw mu bi"><span id="eb7f" class="mv km iq mf b gy mw mx l my mz">ng serve --port 4200</span></pre><p id="b51e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">预期产出:</p><figure class="mn mo mp mq gt nf gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi ne"><img src="../Images/fc6b1084f8d82b747ef5fe94c2bcbd4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ON3Zb_bhCRVCCFQM.png"/></div></div></figure><h1 id="a385" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">结论</h1><p id="7652" class="pw-post-body-paragraph jn jo iq jp b jq ll js jt ju lm jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">在本教程中，我们通过示例讨论了角度DI的广泛概念。我们已经看到了如何在一个组件中创建和消费服务。我们还更进一步，在浏览器上测试了我们的应用。</p><p id="2ed5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编码快乐！</p><p id="165f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mj">更多内容请看</em><a class="ae nm" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mj">plain English . io</em></strong></a><em class="mj">。报名参加我们的</em> <a class="ae nm" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mj">免费周报</em> </strong> </a> <em class="mj">。关注我们关于</em><a class="ae nm" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mj">Twitter</em></strong></a><a class="ae nm" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mj">LinkedIn</em></strong></a><em class="mj"/><a class="ae nm" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mj">YouTube</em></strong></a><em class="mj"/><a class="ae nm" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mj">不和</em> </strong> </a> <strong class="jp ir"> <em class="mj">。</em>T49】</strong></p><p id="55f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="mj">对缩放您的软件启动感兴趣</em> </strong> <em class="mj">？检查</em> <a class="ae nm" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mj">电路</em> </strong> </a> <em class="mj">。</em></p></div></div>    
</body>
</html>