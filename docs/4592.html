<html>
<head>
<title>The Persistence Bugger Problem: From Intimidation to Understanding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">持久性问题:从恐吓到理解</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-persistence-bugger-problem-from-intimidation-to-understanding-bf70cf78c282?source=collection_archive---------9-----------------------#2022-12-16">https://javascript.plainenglish.io/the-persistence-bugger-problem-from-intimidation-to-understanding-bf70cf78c282?source=collection_archive---------9-----------------------#2022-12-16</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><h2 id="5e0d" class="ip iq ir bd b dl is it iu iv iw ix dk iy translated" aria-label="kicker paragraph">毁灭2022</h2><div class=""/><div class=""><h2 id="9832" class="pw-subtitle-paragraph jx ja ir bd b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dk translated">用JavaScript计算持久性的初学者指南</h2></div><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/bb8481e4b87590d90e9ac99aad36f0af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vtjeO_HtK6W3em8n4aeevA.jpeg"/></div></div></figure><p id="88a2" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">今天的命题涉及一个我不熟悉的数学概念:一个数的持久性。这让我有点担心。但在理解了底层概念之后，我意识到了一些事情:除了它的数学公式之外，这个练习真的很简单。不过还是从问题正文开始吧。</p><h1 id="731b" class="lx ly ir bd lz ma mb mc md me mf mg mh kg mi kh mj kj mk kk ml km mm kn mn mo bi translated">问题:顽固的家伙</h1><p id="30df" class="pw-post-body-paragraph lb lc ir ld b le mp kb lg lh mq ke lj lk mr lm ln lo ms lq lr ls mt lu lv lw ik bi translated">链接到<a class="ae mu" href="https://www.codewars.com/kata/55bf01e5a717a0d57e0000ec" rel="noopener ugc nofollow" target="_blank">形</a></p><p id="d0de" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">编写一个函数<code class="fe mv mw mx my b">persistence</code>，它接受一个正参数<code class="fe mv mw mx my b">num</code>，并返回它的乘法持久性，即你必须将<code class="fe mv mw mx my b">num</code>中的数字相乘直到达到一位数的次数。</p><p id="3755" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">例如(输入→输出):</p><pre class="kq kr ks kt gu mz my na bn nb nc bi"><span id="a525" class="nd ly ir my b be ne nf l ng nh">39 --&gt; 3 (because 3*9 = 27, 2*7 = 14, 1*4 = 4 and 4 has only one digit)<br/>999 --&gt; 4 (because 9*9*9 = 729, 7*2*9 = 126, 1*2*6 = 12, and finally 1*2 = 2)<br/>4 --&gt; 0 (because 4 is already a one-digit number)</span></pre><h1 id="56cd" class="lx ly ir bd lz ma mb mc md me mf mg mh kg mi kh mj kj mk kk ml km mm kn mn mo bi translated">我的解决方案</h1><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/e5db7cbbaacc25d09ccbc3d1c84708b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qsj-F5rKs9quEyR7E9NJhw.jpeg"/></div></div></figure><p id="c535" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">先说‘乘法持续’的定义。根据<a class="ae mu" href="https://en.wikipedia.org/wiki/Persistence_of_a_number" rel="noopener ugc nofollow" target="_blank">维基百科</a>，<code class="fe mv mw mx my b">persistence of a number</code>定义为在达到一个固定点之前，该操作必须应用于该整数的次数，在该点，该操作不再改变该数字。通常，这涉及一个非负整数的加法或乘法持久性，这是一个人必须用数字的和或积替换数字直到达到一个位数的频率。</p><p id="5c39" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">我们如何解决这个问题？像往常一样，最好把它分解成更小的步骤。但是首先，我们需要做一个小的概念抽象。乍一看，运算的自变量是一个数(like number)。但如果我们思考问题，我们对作为数学实体的数不感兴趣。我们感兴趣的是作为数字列表的数字。换句话说，我们感兴趣的是作为序列数字数组的数字。</p><pre class="kq kr ks kt gu mz my na bn nb nc bi"><span id="c498" class="nd ly ir my b be ne nf l ni nh">const digits = (n: number): number[] =&gt; [...("" + n)].map(Number);</span></pre><p id="912e" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">为什么把数字看成数组对我们有用？因为这样我们可以使用JavaScript的预定义方法来处理每一个数字。在这种情况下，我发现<a class="ae mu" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="noopener ugc nofollow" target="_blank"> Array.reduce() </a>方法很有用。我可以用它将每个数字乘以之前乘法的结果。唯一要注意的是设置一个起始值(这里是<code class="fe mv mw mx my b">1</code>):默认情况下，第一个值总是<code class="fe mv mw mx my b">0</code>，乘以<code class="fe mv mw mx my b">0</code>总是得到<code class="fe mv mw mx my b">0</code>。</p><pre class="kq kr ks kt gu mz my na bn nb nc bi"><span id="8c78" class="nd ly ir my b be ne nf l ni nh">const multiplice = (n: number): number =&gt; digits(n).reduce((a, v) =&gt; a * v, 1);</span></pre><p id="c37f" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">这个函数只计算一次每个数字的乘法运算。我们必须重复操作几次，直到出现一个位数。我们可以使用循环(例如while)或递归函数。但是在决定之前，让我们考虑一下退出条件。</p><p id="c116" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">我们可以使用<code class="fe mv mw mx my b">String.length</code>或<code class="fe mv mw mx my b">Array.length</code>来计算数字的长度。当这个值等于1时，那么我们要做的操作就结束了。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/de38f1c3df9c3f3036523c23102e1884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UyYAcM9n007r547s-JjXCw.jpeg"/></div></div></figure><p id="1192" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">但是有一种更快的方法可以得到同样的结果。因为我们使用的是正整数，所以任何小于<code class="fe mv mw mx my b">10</code>的数都只有一位。所以我们只需要一个类似于:<code class="fe mv mw mx my b">n &lt; 10</code>的条件来退出循环。</p><p id="8c45" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">现在我有了解决问题的所有方法。我可以用一个<code class="fe mv mw mx my b">while</code>循环来实现:</p><pre class="kq kr ks kt gu mz my na bn nb nc bi"><span id="60b1" class="nd ly ir my b be ne nf l ni nh">const digits = (n: number): number[] =&gt; [...("" + n)].map(Number);<br/>const multiplice = (n: number): number =&gt; digits(n).reduce((a, v) =&gt; a * v, 1);<br/><br/>const persistence = (n: number): number =&gt; {<br/>  let i = 0;<br/>  while (n &gt;= 10) {<br/>    n = multiplice(n);<br/>    i++;<br/>  }<br/>  return i;<br/>};</span></pre><p id="843d" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">我也可以使用一个<code class="fe mv mw mx my b">recursive </code>函数来得到相同的结果:</p><pre class="kq kr ks kt gu mz my na bn nb nc bi"><span id="9b1c" class="nd ly ir my b be ne nf l ni nh">const digits = (n: number): number[] =&gt; [...("" + n)].map(Number);<br/>const multiplice = (n: number): number =&gt; digits(n).reduce((a, v) =&gt; a * v, 1);<br/><br/>const persistence = (n: number, i: number = 0): number =&gt;<br/>  n &lt; 10 ? i : persistence(multiplice(n), ++i);</span></pre><p id="da3b" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">就个人而言，我喜欢后一种解决方案:它简短、简单且相当清晰。但是我们可以更进一步，把一切都简化成一个函数。</p><pre class="kq kr ks kt gu mz my na bn nb nc bi"><span id="fd17" class="nd ly ir my b be ne nf l ni nh">const persistence = (n: number, i: number = 0): number =&gt;<br/>  n &lt; 10<br/>    ? i<br/>    : persistence(<br/>        [...("" + n)].reduce((a, v) =&gt; a * +v, 1),<br/>        ++i<br/>      );</span></pre><p id="5e93" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">结果有点神秘；我更喜欢避免太“聪明”的代码:我未来的自己可能看不懂。然而，看看JavaScript(和TypeScript)如何用几个字符解决一个数学问题仍然很有趣。</p><p id="00af" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl nj nk hv nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ik il im in io"><p id="9ef0" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><strong class="ld jb"> <em class="nq">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae mu" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="ld jb"> <em class="nq">中邮箱列表</em> </strong> </a></p><div class="nr ns gq gs nt nu"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd jb gz z fq nz fs ft oa fv fx ja bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">el3um4s.medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kz nu"/></div></div></a></div></div><div class="ab cl nj nk hv nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ik il im in io"><h2 id="37b8" class="oj ly ir bd lz ok ol dn md om on dp mh lk oo op mj lo oq or ml ls os ot mn ix bi translated">PS:</h2><p id="1546" class="pw-post-body-paragraph lb lc ir ld b le mp kb lg lh mq ke lj lk mr lm ln lo ms lq lr ls mt lu lv lw ik bi translated">我让ChatGPT(它是一种人工智能)来解决同样的问题。这是它给我的回复:</p><pre class="kq kr ks kt gu mz my na bn nb nc bi"><span id="3980" class="nd ly ir my b be ne nf l ni nh">function persistence(num: number): number {<br/>  let persistence = 0;<br/>  while (num &gt;= 10) {<br/>    num = num<br/>      .toString()<br/>      .split('')<br/>      .map(Number)<br/>      .reduce((a, b) =&gt; a * b);<br/>    persistence++;<br/>  }<br/>  return persistence;<br/>}</span></pre><p id="7c9e" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">这个函数接受一个正数<code class="fe mv mw mx my b">num</code>并返回它的乘法持久性。它首先将变量<code class="fe mv mw mx my b">persistence</code>设置为0，这将记录我们需要将数字相乘的次数。然后，它进入一个循环，只要<code class="fe mv mw mx my b">num</code>大于或等于10，该循环就会继续。在循环内部，它将<code class="fe mv mw mx my b">num</code>转换成一个字符串，将其拆分成一个数字数组，将这些数字映射成数字，并通过将所有数字相乘将数组简化为一个数字。然后，它将变量<code class="fe mv mw mx my b">persistence</code>递增1。当循环退出时，它返回<code class="fe mv mw mx my b">persistence</code>的最终值。</p><p id="4abf" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">比如我们调用<code class="fe mv mw mx my b">persistence(39)</code>，函数会先把<code class="fe mv mw mx my b">persistence</code>设置为0。然后，它将进入循环并执行以下操作:</p><ol class=""><li id="ea92" class="ou ov ir ld b le lf lh li lk ow lo ox ls oy lw oz pa pb pc bi translated">将<code class="fe mv mw mx my b">num</code>转换为字符串:<code class="fe mv mw mx my b">"39"</code></li><li id="cc57" class="ou ov ir ld b le pd lh pe lk pf lo pg ls ph lw oz pa pb pc bi translated">将字符串拆分成一个数字数组:<code class="fe mv mw mx my b">["3", "9"]</code></li><li id="0396" class="ou ov ir ld b le pd lh pe lk pf lo pg ls ph lw oz pa pb pc bi translated">将数字映射到数字:<code class="fe mv mw mx my b">[3, 9]</code></li><li id="35fd" class="ou ov ir ld b le pd lh pe lk pf lo pg ls ph lw oz pa pb pc bi translated">通过将所有数字相乘，将数组简化为一个数字:<code class="fe mv mw mx my b">27</code></li><li id="d49e" class="ou ov ir ld b le pd lh pe lk pf lo pg ls ph lw oz pa pb pc bi translated">将<code class="fe mv mw mx my b">persistence</code>变量增加1: <code class="fe mv mw mx my b">1</code></li></ol><p id="a9a6" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">然后，将<code class="fe mv mw mx my b">num</code>设置为<code class="fe mv mw mx my b">27</code>，循环将继续。它将执行与之前相同的操作，导致<code class="fe mv mw mx my b">num</code>被设置为<code class="fe mv mw mx my b">4</code>并且<code class="fe mv mw mx my b">persistence</code>被递增为<code class="fe mv mw mx my b">2</code>。最后，循环会退出，因为<code class="fe mv mw mx my b">num</code>现在小于10，函数会返回<code class="fe mv mw mx my b">2</code>，这是<code class="fe mv mw mx my b">39</code>的乘法持久性。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/7eeb3ad76bcb0e76540d5140c6cad849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VvUPK7GdXtJ5tbdlv3X52w.jpeg"/></div></div></figure><p id="5363" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">结果是正确的，尽管它没有我的解决方案优雅(没有虚假的谦虚)。但是，有一件事让我很惊讶。AI将构造函数编号传递给Array.map()方法，不带任何参数。这将一个字符串转换成一个数字。</p><p id="18ad" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">ChatGPT和其他人工智能有了很大的进步。至少在我所做的测试中，他们的能力随着每次更新而提高。然而，有一样东西是他们无法取代的:解决数学或编程难题的智力乐趣。正是这种快乐促使我接受这场灾难。这让我想在圣诞节后继续写这种类型的帖子。</p><p id="b33b" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><em class="nq">更多内容请看</em><a class="ae mu" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="nq">plain English . io</em></strong></a><em class="nq">。报名参加我们的</em> <a class="ae mu" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ld jb"> <em class="nq">免费周报</em> </strong> </a> <em class="nq">。关注我们关于</em><a class="ae mu" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="nq">Twitter</em></strong></a><a class="ae mu" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="nq">LinkedIn</em></strong></a><em class="nq"/><a class="ae mu" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="nq">YouTube</em></strong></a><em class="nq"/><a class="ae mu" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="nq">不和</em> </strong> </a> <strong class="ld jb"> <em class="nq">。</em>T49】</strong></p><p id="c8c4" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><strong class="ld jb"> <em class="nq">对缩放您的软件启动感兴趣</em> </strong> <em class="nq">？检查</em> <a class="ae mu" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="ld jb"> <em class="nq">电路</em> </strong> </a> <em class="nq">。</em></p></div></div>    
</body>
</html>