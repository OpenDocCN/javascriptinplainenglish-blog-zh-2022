<html>
<head>
<title>How To Make a System/Light/Dark Theme Selector</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何制作一个系统/亮/暗主题选择器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-make-a-system-light-dark-theme-selector-4e70322205d7?source=collection_archive---------11-----------------------#2022-09-12">https://javascript.plainenglish.io/how-to-make-a-system-light-dark-theme-selector-4e70322205d7?source=collection_archive---------11-----------------------#2022-09-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0b0c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何只用HTML、CSS和JavaScript为你的网站或应用程序创建主题选择器的教程</h2></div><p id="ec08" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这篇文章是关于如何在现代应用程序中创建一个非常常见的功能，这是一个主题选择器，允许用户只使用HTML、CSS和JavaScript为你的网站或应用程序选择亮、暗或系统管理的主题。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/1c99d6f9b6062e6adc3f57ca75199358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hENya-JPKMK7VqPo"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Photo by <a class="ae lo" href="https://unsplash.com/@afgprogrammer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mohammad Rahmani</a> on <a class="ae lo" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="367a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如今，几乎每个应用都允许用户选择他们最喜欢的主题，这对于用户体验来说是一个很好的改善(UX)，但作为开发者，我们需要非常小心，这样我们才不会弄乱预期的设计。</p><p id="ba64" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，在运行Android 12的手机中，如果应用程序没有呈现正确的深色主题，系统会尽最大努力在手机运行深色模式时应用一个，但这通常只是改变黑色和白色，会破坏应用程序的可读性和许多组件的对比度，严重损害用户体验和界面(UX/UI)。</p><p id="1078" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另一个常见的问题是，当设置CSS配置来支持系统主题时，用户就失去了选择不同于系统主题的主题的可能性。</p><p id="429c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以我将向您展示一种简单的方法来避免这些问题，只使用HTML、CSS和普通的JavaScript，由于不需要插件或包，这种技术可以在任何JS框架上使用！</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="6620" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本例中，我们将创建一个简单的HTML页面，如下所示:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi lw"><img src="../Images/282b0aaa057ba76e53568803ff1297cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzRhzv97xrOIvyYJmIlo1g.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">HTML template for this example.</figcaption></figure><p id="c311" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">到目前为止，没有什么奇怪的，唯一需要注意的是meta标签<code class="fe lx ly lz ma b">&lt;meta name=”color-scheme” content="light dark" /&gt;</code>,它告诉系统我们的应用程序支持明暗主题，所以它使用我们的CSS样式，而不是黑色和白色的自动转换。我们将使用三个按钮来选择每个主题。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="eec0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后在我们的CSS上:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mb"><img src="../Images/cb8e68284a89b9bfd57c42a77a49b591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MXx0YQDg4g_jcAHL1AHmpA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">CSS root style.</figcaption></figure><p id="e99f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在根元素上，我们将使用默认主题设置变量，在本例中是Light主题。然后我们将使用这些变量来设置每个元素的颜色，不允许硬编码的颜色！</p><p id="d4a4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，在按钮上，我们会这样做！</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mc"><img src="../Images/5b9f663a106a97d4b5a03a5708b1a48f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_LlsV_vVS-X_2cPufxjHoA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">CSS style using predetermined variables.</figcaption></figure><p id="7c68" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后我们将为我们的黑暗主题添加一个类:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mb"><img src="../Images/9f1614f6d96ebe3b475bcb3be3709ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1uAEbuJ10uOUBd-sQG-HQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">CSS dark theme.</figcaption></figure><p id="9d11" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如你所见，这里我们将变量的值改为深色背景和浅色文本，所以如果我们将这个类添加到页面主体元素中，这些值将应用到我们的元素中。</p><p id="7ad3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在此之前，一切都很标准，现在让我们进入系统管理主题:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi md"><img src="../Images/6a0de592afde107bb851177d7cf05925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i8fvxikkExoH70i5NOGClQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">CSS system dark theme style.</figcaption></figure><p id="2eb8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我们使用一个<code class="fe lx ly lz ma b">@media (prefers-color-scheme: dark)</code>来使用我们设备的系统在黑暗主题上运行时的一组规则。正是在这一部分，通常你会遇到用户丢失他们选择的系统正在使用的主题的问题，因为在几乎所有的教程中，建议使用<code class="fe lx ly lz ma b">:root</code>元素来设置系统的黑暗主题，但这只会引发每次我们的系统主题改变为黑暗，我们的<code class="fe lx ly lz ma b">:root</code>元素将改变我们的变量的值，这样，我们就完全失去了对主题的控制。这个想法是使用一个类来设置样式，所以不管系统是否处于黑暗模式，只有当用户选择使用系统的主题时，主题才会被应用，因此这个类被附加到我们的body元素上。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="cf33" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将使用JavaScript来更改附加到body元素的类，然后控制我们应用什么主题:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi me"><img src="../Images/70e8596b20908c8af6b7c59299282af9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYqkRUOTYjp8drmjWXVfOw.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">JavaScript Theme Selector functionality.</figcaption></figure><p id="bccf" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了便于开发，我们首先捕获body元素和三个按钮，然后为每个按钮添加一个click事件侦听器，将每个按钮的主题传递给setTheme函数。我们可以用我们所有的主题做一个数组来进行某种验证。然后，我们将我们选择的主题保存到我们的本地存储中，这样当用户再次打开我们的应用程序时，它将使用loadTheme功能自动获得其首选主题。然后，为了保持整洁，我们从body元素中删除了所有与主题相关的类，并向其中添加了我们想要的类。</p><p id="a3db" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是我们需要在我们的应用程序上有一个功能主题选择，这将与我们的系统主题，但不会损害我们的用户偏好。</p><p id="913b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，您可以添加尽可能多的主题，甚至创建一个自定义的颜色主题创建功能。在我的下一篇文章中会有相关的教程。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="51de" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是一个可用的Codepen示例。如果需要，您可以使用相同的代码:</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mf mg l"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Theme selector example.</figcaption></figure><p id="373e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望我把一切都解释清楚了，这对你有帮助。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="4195" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mh">更多内容请看</em><a class="ae lo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mh">plain English . io</em></strong></a><em class="mh">。报名参加我们的</em> <a class="ae lo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mh">免费周报</em> </strong> </a> <em class="mh">。关注我们关于</em><a class="ae lo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mh">Twitter</em></strong></a><a class="ae lo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mh">LinkedIn</em></strong></a><em class="mh"/><a class="ae lo" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mh">YouTube</em></strong></a><em class="mh"/><a class="ae lo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mh">不和</em> </strong> </a> <em class="mh">。对增长黑客感兴趣？检查</em> <a class="ae lo" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mh">电路</em> </strong> </a> <em class="mh">。</em></p></div></div>    
</body>
</html>