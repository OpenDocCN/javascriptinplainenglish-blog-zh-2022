<html>
<head>
<title>Controlled and Uncontrolled Components in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的受控和非受控组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/controlled-and-uncontrolled-components-in-react-d5ddf4158bf8?source=collection_archive---------14-----------------------#2022-01-06">https://javascript.plainenglish.io/controlled-and-uncontrolled-components-in-react-d5ddf4158bf8?source=collection_archive---------14-----------------------#2022-01-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/683f1c96a2d04b8cf8d00e10bdb205e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dnqNdjswJ-r2NqeK"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@jakub_si?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jakub Sisulak</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0c8b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您使用React，您可能听说过受控组件和非受控组件。如果不是，你将会了解它们到底是什么，以及为什么一个比另一个更受欢迎。</p><h1 id="6427" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">受控组件</h1><p id="f90b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">受控组件是一种反应式组件，其中组件内的数据由状态更改/控制。</p><p id="7870" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看一下登录组件:</p><figure class="mb mc md me gt jo"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="173b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我们有一个<code class="fe mh mi mj mk b">username</code>和<code class="fe mh mi mj mk b">password</code>作为输入字段。这些字段有一个绑定到状态变量的值属性，比如<code class="fe mh mi mj mk b">creds.username</code>和<code class="fe mh mi mj mk b">creds.password</code>。当用户在用户名或密码字段上输入时，输入字段的onChange函数被触发。</p><p id="aeb8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们刚刚描述了什么是受控组件。</p><p id="bca6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">等等，什么？这些输入字段如何使组件成为受控组件？</p><p id="686f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们试着去理解什么是受控组件。</p><p id="b1c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">受控组件包含表单数据，如input和textarea，其中的数据以React状态的形式维护。</p><p id="0b9b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">嗯。那是什么意思？</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/dd4c280e57eb4b88c3d0153ed8ecd7cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*V6uVUb7uA9_mA8xGotF7hQ.gif"/></div></div></figure><p id="d257" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这意味着，如果我们有绑定到状态变量(<code class="fe mh mi mj mk b">creds.username</code>)的输入字段，当我们输入值时，状态的值会反映在输入字段中。</p><h1 id="920b" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">不受控制的组件</h1><p id="6fb2" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">对于不受控制的组件，来自输入字段的数据存储在dom中，而不是由状态维护。换句话说，我们使用ref从DOM中检索值。如果我们保存任何值，我们也直接修改DOM来存储这些值。</p><p id="85c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看下面的例子:</p><figure class="mb mc md me gt jo"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="9913" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我们在构造组件时创建一个ref。在初始渲染时，创建的ref将被附加到输入标签上。当用户输入内容时，我们可以简单地解析<code class="fe mh mi mj mk b">handleChange</code>回调中的输入值。请注意，我们没有在状态中存储值或设置输入的值。相反，我们创建一个ref并保存在HTML DOM中。任何值的变化都要经过DOM。</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/a8c33976d85de6e0f1570582721d9985.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*26-ycQKICcj_Zw9x"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@chne_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tachina Lee</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7c47" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有人会问:使用受控组件相对于非受控组件的真正优势是什么？</p><p id="6927" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">受控组件的优点:</p><ul class=""><li id="9e96" class="mn mo in kc b kd ke kh ki kl mp kp mq kt mr kx ms mt mu mv bi translated">对状态变量的即时访问</li><li id="1bc0" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">由于易于访问状态变量，因此易于验证检查</li><li id="9be5" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">易于测试组件，因为一切都保持在一个状态。</li></ul><p id="a9fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">受控部件的缺点:</p><ul class=""><li id="ccf7" class="mn mo in kc b kd ke kh ki kl mp kp mq kt mr kx ms mt mu mv bi translated">需要维护表单中每个输入字段的附加状态。</li></ul><p id="da31" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">非受控组件的优点:</p><ul class=""><li id="811e" class="mn mo in kc b kd ke kh ki kl mp kp mq kt mr kx ms mt mu mv bi translated">可以为refs使用更多的自定义行为(直接改变输入，onBlur或者甚至关注refs)</li><li id="a720" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">可以扩展或开发任何组件，而不用担心维护多种状态。</li><li id="6ae9" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">很容易与其他用不同语言编写的应用程序集成</li></ul><p id="00b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不受控制的组件的缺点:</p><ul class=""><li id="5850" class="mn mo in kc b kd ke kh ki kl mp kp mq kt mr kx ms mt mu mv bi translated">很难测试，因为没有真正要测试的状态。</li><li id="9a46" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">与只使用反应状态相比，共享组件的状态更加困难。</li></ul><p id="b9ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">每种方法都有利弊。如果你在寻找可读性更强、更容易测试的东西，那就选择受控组件。如果你想构建一些更加定制的东西，那么就使用不受控制的组件。</p><p id="93e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就是这样！当您尝试不同的方法时，请随意控制您的编码世界。</p><p id="62b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nb">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nb">说白了。报名参加我们的</em> </a><a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nb">免费每周简讯</em> </a> <em class="nb">。在我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="nb">社区</em> </a> <em class="nb">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>