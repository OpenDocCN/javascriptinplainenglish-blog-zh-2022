<html>
<head>
<title>How to Get the Window’s Width on Resize in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中调整窗口的宽度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-get-window-width-on-resize-f50871b93216?source=collection_archive---------6-----------------------#2022-12-10">https://javascript.plainenglish.io/react-get-window-width-on-resize-f50871b93216?source=collection_archive---------6-----------------------#2022-12-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/71aee02236967b82c241f33a648cec1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fgPAnldnwJECVYUSbtGFzQ.png"/></div></div></figure><p id="59dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在React中调整浏览器窗口的宽度，添加一个<code class="fe kt ku kv kw b">resize</code>事件监听器到<code class="fe kt ku kv kw b">window</code>对象，然后访问监听器中的<code class="fe kt ku kv kw b">innerWidth</code>属性。</p><p id="0c80" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如:</p><p id="3c13" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">JavaScript</code></p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="f7f6" class="lf lg in kw b be lh li l lj lk">import { useState, useEffect } from 'react';<br/><br/>export default function App() {<br/>  const [windowWidth, setWindowWidth] = useState(window.innerWidth);<br/>  useEffect(() =&gt; {<br/>    const handleWindowResize = () =&gt; {<br/>      setWindowWidth(window.innerWidth);<br/>    };<br/>    window.addEventListener('resize', handleWindowResize);<br/>    return () =&gt; {<br/>      window.removeEventListener('resize', handleWindowResize);<br/>    };<br/>  });<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h2&gt;Width: {windowWidth}&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/33eae0c1d274e9a64d17e806c25d4911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EPp8YugPsdBUzoCb.gif"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">The text is updated with the width of the window when it is resized.</figcaption></figure><p id="fc11" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">属性以像素为单位返回窗口的内部宽度，包括垂直滚动条的宽度，如果它存在的话。</p><p id="9bb1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每当窗口/文档视图的宽度或高度改变时，就会触发<code class="fe kt ku kv kw b">resize</code>事件。</p><p id="c708" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们使用<code class="fe kt ku kv kw b">useState</code> React钩子来创建一个状态变量，当窗口的宽度改变时，这个变量就会更新。</p><p id="3b6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b"><a class="ae lq" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">useState</a></code>钩子返回两个值的数组。第一个是存储状态的变量，第二个是在被调用时更新状态的函数。</p><p id="fe1a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">useEffect</code>钩子用于在组件第一次呈现时，以及一个或多个指定的依赖关系改变时执行一个动作。在我们的例子中，动作是用<code class="fe kt ku kv kw b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener" rel="noopener ugc nofollow" target="_blank">addEventListener()</a></code>方法为<code class="fe kt ku kv kw b">resize</code>钩子添加事件监听器。</p><p id="a801" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将一个空的依赖数组传递给<code class="fe kt ku kv kw b"><a class="ae lq" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">useEffect</a></code>，这样它在组件的生命周期中只被调用一次，并且<code class="fe kt ku kv kw b">resize</code>事件监听器只被注册一次——当组件第一次呈现时。</p><p id="dbd4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">JavaScript</code></p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="d1e5" class="lf lg in kw b be lh li l lj lk">useEffect(() =&gt; {<br/>    const handleWindowResize = () =&gt; {<br/>      setWindowWidth(window.innerWidth);<br/>    };<br/><br/>    window.addEventListener('resize', handleWindowResize);<br/>    return () =&gt; {<br/>      window.removeEventListener('resize', handleWindowResize);<br/>    };<br/>  });</span></pre><p id="5644" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe kt ku kv kw b">resize</code>事件监听器中，我们用新的窗口宽度更新状态变量。</p><p id="75da" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong> : <code class="fe kt ku kv kw b">useEffect</code>的清理功能在每次重新渲染 后运行<a class="ae lq" href="https://reactjs.org/docs/hooks-effect.html#explanation-why-effects-run-on-each-update" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">，而不仅仅是在组件卸载时。这可以防止当一个可观察属性改变值而组件中的观察者没有取消订阅之前的可观察值时发生的内存泄漏。</strong></a></p><h1 id="183f" class="lr lg in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">调整大小时获取窗口高度</h1><p id="2f91" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">我们可以做类似的事情，在调整大小时获取窗口的高度，但是我们将在<code class="fe kt ku kv kw b">resize</code>事件监听器中使用<code class="fe kt ku kv kw b">window</code>对象的<code class="fe kt ku kv kw b">innerHeight</code>属性:</p><p id="dfd8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">JavaScript</code></p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="dcd9" class="lf lg in kw b be lh li l lj lk">import { useState, useEffect } from 'react';<br/><br/>export default function App() {<br/>  const [windowHeight, setWindowHeight] = useState(window.innerHeight);<br/>  useEffect(() =&gt; {<br/>    const handleWindowResize = () =&gt; {<br/>      setWindowHeight(window.innerHeight);<br/>    };<br/>    window.addEventListener('resize', handleWindowResize);<br/>    return () =&gt; {<br/>      window.removeEventListener('resize', handleWindowResize);<br/>    };<br/>  });<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h2&gt;Height: {windowHeight}&lt;/h2&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/e06d86cad184e5ca0863f11d19bea773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*trmMIEVvuQos3yzM.gif"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">The text is updated with the height of the window when it is resized.</figcaption></figure><p id="9de0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/innerHeight" rel="noopener ugc nofollow" target="_blank">innerHeight</a></code>属性以像素为单位返回窗口的内部高度，包括水平滚动条的高度(如果有)。</p></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><p id="3dff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="na">原载于</em><a class="ae lq" href="https://cbdev.link/59f6a8" rel="noopener ugc nofollow" target="_blank"><em class="na"/></a></p><h1 id="1d22" class="lr lg in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">JavaScript做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">一本关于JavaScript微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae lq" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">报名</strong> </a>立即免费领取一份。</p><h2 id="9f73" class="nc lg in bd ls nd ne dn lw nf ng dp ma kg nh ni me kk nj nk mi ko nl nm mm nn bi translated">更多内容请访问<a class="ae lq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> PlainEnglish.io </a>。</h2><p id="0d44" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">报名参加我们的<a class="ae lq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">免费每周简讯</strong> </a>。关注我们<a class="ae lq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">推特</strong></a><a class="ae lq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">LinkedIn</strong></a><strong class="jx io"/><a class="ae lq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">YouTube</strong></a><strong class="jx io">，以及</strong> <a class="ae lq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">不和谐</strong> </a> <strong class="jx io">。</strong></p><h2 id="3d1e" class="nc lg in bd ls nd ne dn lw nf ng dp ma kg nh ni me kk nj nk mi ko nl nm mm nn bi translated">想用内容来扩展你的科技创业吗？检查<a class="ae lq" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank">电路</a>。</h2><p id="aac5" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">我们提供免费的专家建议和定制解决方案，帮助您建立对您的技术产品或服务的认知和采用。</p></div></div>    
</body>
</html>