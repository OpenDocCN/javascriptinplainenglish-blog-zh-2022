<html>
<head>
<title>npm install — How To Minimize Its Use Under Specific Conditions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">npm安装—如何在特定条件下最大限度地减少其使用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/npm-install-how-to-minimize-its-use-under-specific-conditions-1e6dada6fa61?source=collection_archive---------13-----------------------#2022-04-11">https://javascript.plainenglish.io/npm-install-how-to-minimize-its-use-under-specific-conditions-1e6dada6fa61?source=collection_archive---------13-----------------------#2022-04-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8b14" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">从长远来看可以节省时间。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/9acf349ad7f435108a0c754e619a5394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QzuBlKXBdi9qQ0ozbro_Vw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://www.istockphoto.com/portfolio/Natali_Mis" rel="noopener ugc nofollow" target="_blank">Natali_Mis</a></figcaption></figure><h2 id="e7b0" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">要求:</h2><ol class=""><li id="35ca" class="lp lq in lr b ls lt lu lv lc lw lg lx lk ly lz ma mb mc md bi translated">你在做一个项目吗？</li><li id="79a9" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">每次创建新的分支都必须运行<code class="fe mj mk ml mm b">npm install</code>吗？</li><li id="33f8" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">是否需要看似短暂的永恒才能完成？</li><li id="1a95" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">你是否受够了，想要节省时间？</li></ol><p id="fd3f" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated">如果你对这些问题的回答是肯定的，那么这是给你的！</p></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h1 id="b3ec" class="nj ku in bd kv nk nl nm ky nn no np lb jt nq ju lf jw nr jx lj jz ns ka ln nt bi translated"><strong class="ak">救援的象征性链接</strong></h1><p id="1a08" class="pw-post-body-paragraph mn mo in lr b ls lt jo mq lu lv jr ms lc nu mu mv lg nv mx my lk nw na nb lz ig bi translated">我们可以将依赖项保存在一个单独的中心文件夹中，而不是每次创建新的分支时都安装依赖项。然后，我们可以在中心文件夹中创建指向<code class="fe mj mk ml mm b">node_modules</code>的符号链接:</p><ol class=""><li id="46ad" class="lp lq in lr b ls mp lu mr lc nx lg ny lk nz lz ma mb mc md bi translated">运行<code class="fe mj mk ml mm b">npm install</code>生成<code class="fe mj mk ml mm b">node_modules</code>。</li><li id="6f6e" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">在不同的位置创建一个文件夹，比如说Windows的<code class="fe mj mk ml mm b">C:\project-deps</code><strong class="lr io"/>或者Linux的<code class="fe mj mk ml mm b">/home/project-deps</code>。</li><li id="1df0" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">剪切粘贴<code class="fe mj mk ml mm b">node_modules</code>到那个文件夹。</li><li id="4da4" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">在分支的文件夹位置打开PowerShell或命令提示符(或Linux的终端)。</li><li id="c18f" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">创建符号链接。<br/> <strong class="lr io">对于Windows(PowerShell):</strong><code class="fe mj mk ml mm b">cmd /c mklink /J node_modules C:\project-deps\node_modules<br/></code><strong class="lr io">对于Windows(命令提示符):</strong> <code class="fe mj mk ml mm b">mklink /J node_modules C:\project-deps\node_modules<br/></code> <strong class="lr io">对于Linux: </strong> <code class="fe mj mk ml mm b">ln -s /home/project-deps/node_modules node_modules</code></li></ol><p id="dcab" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated">就是这样！NodeJS会将<code class="fe mj mk ml mm b">node_modules</code>视为位于您的分支文件夹中。从现在开始，您只需要检查一个分支，运行命令来创建符号链接，就可以开始了！</p><h1 id="9ec0" class="nj ku in bd kv nk oa nm ky nn ob np lb jt oc ju lf jw od jx lj jz oe ka ln nt bi translated">维护依赖关系</h1><p id="adb4" class="pw-post-body-paragraph mn mo in lr b ls lt jo mq lu lv jr ms lc nu mu mv lg nv mx my lk nw na nb lz ig bi translated">在某些时候，您或团队的其他成员可能会添加新的依赖项。不幸的是，通过符号链接从我们分支的文件夹中安装新的依赖项并不像我们希望的那样工作。</p><p id="33af" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated">虽然<code class="fe mj mk ml mm b">node_modules</code>被NodeJS识别为执行，但不被识别为安装。它将安装所有东西，就像<code class="fe mj mk ml mm b">node_modules</code>不存在一样。</p><p id="86ba" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated">如果您需要安装新的依赖项:</p><ol class=""><li id="d425" class="lp lq in lr b ls mp lu mr lc nx lg ny lk nz lz ma mb mc md bi translated">将新的<code class="fe mj mk ml mm b">package.json</code>文件复制粘贴到中心文件夹中。</li><li id="91ec" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">如果存在旧版本，选择覆盖。</li><li id="c770" class="lp lq in lr b ls me lu mf lc mg lg mh lk mi lz ma mb mc md bi translated">运行<code class="fe mj mk ml mm b">npm install</code>。</li></ol><p id="af49" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated">对于一个相对较小的项目，第一次运行生成<code class="fe mj mk ml mm b">node_modules</code>花费了250.145秒。后续运行花费的时间要少得多(大约25秒)，但是这完全取决于所安装的依赖项的大小。</p><p id="2333" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated">最后，在删除合并的分支时，我们也节省了时间——要删除的文件越少，意味着删除速度越快。</p></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h1 id="7444" class="nj ku in bd kv nk nl nm ky nn no np lb jt nq ju lf jw nr jx lj jz ns ka ln nt bi translated">结论</h1><p id="3855" class="pw-post-body-paragraph mn mo in lr b ls lt jo mq lu lv jr ms lc nu mu mv lg nv mx my lk nw na nb lz ig bi translated">在本文中，我们看到了如何通过使用符号链接来跳过运行<code class="fe mj mk ml mm b">npm install</code>并节省时间。我希望这有助于加快你的进度。</p><p id="6f53" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated">编码快乐！</p><p id="505c" class="pw-post-body-paragraph mn mo in lr b ls mp jo mq lu mr jr ms lc mt mu mv lg mw mx my lk mz na nb lz ig bi translated"><em class="of">更多内容尽在</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="of">说白了. io </em> </strong> </a> <em class="of">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="of">免费周报</em> </strong> </a> <em class="of">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="of">推特</em> </strong> </a> <em class="of">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lr io"><em class="of">LinkedIn</em></strong></a><em class="of">。加入我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io"> <em class="of">社区不和谐</em> </strong> </a> <em class="of">。</em></p></div></div>    
</body>
</html>