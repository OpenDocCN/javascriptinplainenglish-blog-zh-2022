<html>
<head>
<title>Use Nodemailer to Edit Custom Dynamic Email Templates Created with HTML, CSS, and Handlebars</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Nodemailer编辑用HTML、CSS和Handlebars创建的自定义动态电子邮件模板</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nodemailer-custom-dynamic-email-templates-with-html-css-and-handlebars-9b72283575d9?source=collection_archive---------2-----------------------#2022-04-05">https://javascript.plainenglish.io/nodemailer-custom-dynamic-email-templates-with-html-css-and-handlebars-9b72283575d9?source=collection_archive---------2-----------------------#2022-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ae77" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何使用Nodemailer来编辑已经用HTML和CSS创建的自定义动态电子邮件模板的教程。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6a4d4ac140b5ec8cf0b758750302fd18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FV9rEVasDhmgpEYI"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@purzlbaum?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Claudio Schwarz</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ba4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Nodemailer是Node.js应用程序的最佳邮件库之一。我使用Nodemailer已经很久了。将Nodemailer添加到您现有的应用程序中非常容易。</p><p id="70c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Nodemailer是Node.js中使用最多的邮件库，它成为了大多数Node.js用户发送电子邮件的解决方案。</p><p id="ac6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天我将解释如何将Nodemailer用于已经用HTML和CSS创建的定制HTML模板。我将在本教程中介绍的另一个主题是编辑这些电子邮件中的动态区域。</p><p id="20a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设有一个用户注册了您的应用程序，您希望向该用户发送一封电子邮件，并在邮件中写上他们的姓名。您将在本教程中学习如何做到这一点。</p><p id="304a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您以前从未使用过Nodemailer，我建议您阅读另一篇关于Nodemailer的文章，对它有一个基本的了解。</p><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-send-email-with-nodemailer-with-examples-356b348dccac"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如何用Nodemailer发送电子邮件并举例说明</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">如何使用Nodemailer通过Node.js发送电子邮件:TypeScript中带有示例代码的教程。</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><h1 id="887b" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">我们开始吧</h1><p id="614c" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">首先，如果你有一个现有的应用程序，或者如果你刚刚开始一个新的服务器，我们需要安装我们想要使用的软件包。</p><p id="5ef2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在这里，您可以使用npm或yarn进行安装。</p><p id="37c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">如何安装节点邮件器</strong></p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="95fa" class="nm ml iq ni b gy nn no l np nq">npm install nodemailer</span><span id="90c9" class="nm ml iq ni b gy nr no l np nq">yarn add nodemailer</span></pre><p id="43c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将Nodemailer安装到您的应用程序后，您就可以立即发送电子邮件了！</p><h2 id="1f92" class="nm ml iq bd mm ns nt dn mq nu nv dp mu lf nw nx mw lj ny nz my ln oa ob na oc bi translated">发送电子邮件</h2><p id="6ef2" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">以下是发送电子邮件的要点示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="db35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您在这里看到的，HTML部分只包含:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="ca6f" class="nm ml iq ni b gy nn no l np nq">html: "&lt;strong&gt;Hello world?&lt;/strong&gt;"</span></pre><p id="fbdf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果我们想要发送已经创建并实际存储为一个<code class="fe of og oh ni b">HTML</code>文件的HTML消息呢？</p><h2 id="2908" class="nm ml iq bd mm ns nt dn mq nu nv dp mu lf nw nx mw lj ny nz my ln oa ob na oc bi translated">创建带手柄的动态HTML模板</h2><p id="e033" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">首先，我们需要用Node.js文件系统读取该文件。如果您还没有创建一个<code class="fe of og oh ni b">HTML</code>文件，您可以创建一个用于测试的如下文件。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="d19d" class="nm ml iq ni b gy nn no l np nq">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;body&gt;<br/><br/>&lt;h1&gt;My First Heading&lt;/h1&gt;</span><span id="fc1d" class="nm ml iq ni b gy nr no l np nq">&lt;p&gt;My first paragraph.&lt;/p&gt;</span><span id="5eaf" class="nm ml iq ni b gy nr no l np nq">&lt;p&gt;Hello world, {{username}} &lt;/p&gt;</span><span id="8ebb" class="nm ml iq ni b gy nr no l np nq">&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="7bf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你在那个例子中注意到的，我们也在HTML文件中添加了一些变量<code class="fe of og oh ni b">{{username}}</code>是我们在发送电子邮件时可以动态改变的变量。</p><h2 id="7f98" class="nm ml iq bd mm ns nt dn mq nu nv dp mu lf nw nx mw lj ny nz my ln oa ob na oc bi translated">安装把手和编辑HTML模板</h2><p id="fee0" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">在继续之前，我们需要将<code class="fe of og oh ni b">handlebars</code>包安装到我们的应用程序中，以动态编辑用户名变量。<br/>更多信息:</p><div class="ls lt gp gr lu lv"><a href="https://handlebarsjs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">把手</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">类固醇上的最小模板开始→手柄提供必要的力量让你建立语义…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">handlebarsjs.com</p></div></div><div class="me l"><div class="oi l mg mh mi me mj kp lv"/></div></div></a></div><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="869f" class="nm ml iq ni b gy nn no l np nq">npm install handlebars</span><span id="7ef7" class="nm ml iq ni b gy nr no l np nq">yarn add handlebars </span></pre><p id="9acc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">成功完成车把安装后，我们可以在Node.js中编译HTML代码，并根据需要更改变量。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="55ba" class="nm ml iq ni b gy nn no l np nq">const filePath = path.join(__dirname, '../emails/template.html');<br/>const source = fs.readFileSync(filePath, 'utf-8').toString();<br/>const template = handlebars.compile(source);<br/>const replacements = {<br/>    username: "Darth Vader"<br/>};<br/>const htmlToSend = template(replacements);</span></pre><h2 id="6e81" class="nm ml iq bd mm ns nt dn mq nu nv dp mu lf nw nx mw lj ny nz my ln oa ob na oc bi translated">发送电子邮件模板</h2><p id="5564" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">在成功编译和替换我们的HTML模板后，它就可以发送了。我们可以用<code class="fe of og oh ni b">htmlToSend</code>替换HTML值，而不是在<code class="fe of og oh ni b">transporter.sendMail</code>函数中传递静态HTML文本。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="d7d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oj">如果你觉得这篇文章很有帮助，你</em> <a class="ae kv" href="https://medium.com/@melihyumak" rel="noopener"> <strong class="ky ir"> <em class="oj">可以通过使用我的推荐链接注册一个</em> <a class="ae kv" href="https://melihyumak.medium.com/membership" rel="noopener"> <strong class="ky ir"> <em class="oj">中级会员来访问类似的</em> </strong> </a> <em class="oj">。</em> </strong> </a></p><p id="bedb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="oj">跟我上</em> </strong> <a class="ae kv" href="https://twitter.com/hadnazzar" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">推特</strong> </a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/e09adde9fd734db2f987c8df72839da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*NxeTL1qQlC1dv9-b.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Subscribe for more on <a class="ae kv" href="https://www.youtube.com/c/TechnologyandSoftware?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">Youtube</a></figcaption></figure><h1 id="8d23" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">编码快乐！</h1><p id="d50c" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">梅利赫</p><p id="a095" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oj">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">plain English . io</em></strong></a><em class="oj">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="oj">免费周报</em> </strong> </a> <em class="oj">。关注我们</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">Twitter</em></strong></a><em class="oj">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">LinkedIn</em></strong></a><em class="oj">。加入我们的</em><strong class="ky ir"><em class="oj"/></strong><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="oj">社区不和谐</em> </strong> </a> <em class="oj">。</em></p></div></div>    
</body>
</html>