<html>
<head>
<title>How to Easily Reuse React Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何轻松重用React组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-easily-reuse-react-components-e9c8a9466038?source=collection_archive---------4-----------------------#2022-07-12">https://javascript.plainenglish.io/how-to-easily-reuse-react-components-e9c8a9466038?source=collection_archive---------4-----------------------#2022-07-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="258b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">以简单、快速和可伸缩的方式跨项目和应用程序重用React组件。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/69d82bb904c090292b2af3792b039f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x3sWI_e2hBZPFDuGWbDBNw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">can be easier and more scalable than you think</figcaption></figure><p id="dc5b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在项目和应用程序之间共享可重用的React组件是加速开发和构建一致体验的一种非常强大的方式。然而，在过去，设计和分离可以重用、定制和管理的组件需要大量的工作和开销。</p><p id="1f81" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在本教程中，基于<a class="ae lo" href="https://bit.cloud/blog/how-to-reuse-react-components-across-your-projects-l4pz83f4" rel="noopener ugc nofollow" target="_blank">这个精彩的例子</a>，我将带你经历一个非常简单但可扩展的方法，以一种受管理的方式跨项目重用React组件。本教程中我们的堆栈将只是一些开源工具<a class="ae lo" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae lo" href="https://bit.dev" rel="noopener ugc nofollow" target="_blank"> Bit </a>、MDX等等。</p><p id="c369" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在本教程结束时，您将在一个项目中创建一个组件，对其进行版本控制、导出，然后在另一个项目中使用。</p><p id="df2b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您还将拥有可重用React组件工具箱中的第一批组件，您可以在任何新项目中使用这些组件，并与他人共享，以加速和改进整个团队的开发。</p><p id="bde9" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们开始吧。</p><h1 id="b8d1" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">1.设置工作区</h1><p id="1920" class="pw-post-body-paragraph ks kt in ku b kv mh jo kx ky mi jr la lb mj ld le lf mk lh li lj ml ll lm ln ig bi translated">首先，我们将<a class="ae lo" href="https://bit.dev/docs/getting-started/installing-bit/installing-bit" rel="noopener ugc nofollow" target="_blank">安装钻头</a>。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="9b4d" class="mr lq in mn b gy ms mt l mu mv">npx @teambit/bvm install</span></pre><p id="14ed" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">接下来我们要做的是创建一个<a class="ae lo" href="https://bit.dev/docs/getting-started/installing-bit/start-bit-workspace" rel="noopener ugc nofollow" target="_blank">位工作空间</a>。</p><p id="a81c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">工作区充当组件的开发和登台区。我们创建新的组件，检索和修改现有的组件，并组合它们。它基本上是一个供您构建和组合组件的地方。</p><p id="2ccc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">每个组件都是“独立的”——这意味着它有自己的开发环境、版本、依赖项、包等等。workspace使这成为可能，并自动化了大部分配置和相关开销。</p><p id="e76c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">正如你所猜测的那样，通过使组件“独立”，Bit使它们“开箱”即可重复使用，就像乐高一样，它们可以在任何数量的项目中消费和使用，几乎不需要额外的努力。</p><p id="4412" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">为了避免以后需要配置它，我们将把遥控器的细节添加到我们的工作区创建命令中，让Bit知道它应该是默认的。</p><p id="0ad1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您可以创建一个远程作用域来托管任何远程服务器上的组件，但是对于本教程，为了简单起见，让我们使用<a class="ae lo" href="https://bit.cloud" rel="noopener ugc nofollow" target="_blank"> bit.cloud </a>。它对所有开发者和开源软件都是免费的，所以我们只需要创建一个帐户和一个范围。</p><p id="b1ec" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在项目的根目录下，用React模板初始化一个<a class="ae lo" href="https://bit.dev/docs/workspace/workspace-overview" rel="noopener ugc nofollow" target="_blank">位工作空间</a>:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="756f" class="mr lq in mn b gy ms mt l mu mv">bit new react reusing-react-components --empty --skip-git --default-scope [your-bit.cloud-user-name].[your-scope-name]</span><span id="4bb4" class="mr lq in mn b gy mw mt l mu mv">cd reusing-react-components</span></pre><ul class=""><li id="7eaa" class="mx my in ku b kv kw ky kz lb mz lf na lj nb ln nc nd ne nf bi translated">花点时间<a class="ae lo" href="https://bit.dev/docs/getting-started/installing-bit/start-bit-workspace#workspace-files-and-directories" rel="noopener ugc nofollow" target="_blank">看看这里的工作空间</a>。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><a href="https://bit.dev/docs/getting-started/installing-bit/start-bit-workspace#workspace-files-and-directories"><div class="gh gi ng"><img src="../Images/c120b7efbaf75231828705a9909e2cae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_q2HlLuXEAw7gacaN1mOw.png"/></div></a></figure><h1 id="4eb9" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">2.创建一个反应组件</h1><p id="e35b" class="pw-post-body-paragraph ks kt in ku b kv mh jo kx ky mi jr la lb mj ld le lf mk lh li lj ml ll lm ln ig bi translated">让我们制作第一个可重用的React组件！</p><p id="032e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在工作空间中，我们可以<a class="ae lo" href="https://bit.dev/docs/getting-started/composing/creating-components" rel="noopener ugc nofollow" target="_blank">创建组件</a>，甚至使用模板——或者创建我们自己的模板——来创建组件。</p><p id="761f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们使用bit create命令创建一个组件，并添加标志“react”来告诉bit为该组件使用react-environment，并为该组件添加一个名称空间/名称。在这种情况下，输入:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="4777" class="mr lq in mn b gy ms mt l mu mv">bit create react ui/input</span></pre><p id="8da7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您可以将文件从<a class="ae lo" href="https://static.bit.dev/blog/blog-posts/reusing-react-components/files/Input.zip" rel="noopener ugc nofollow" target="_blank">文件夹</a>中复制到生成的文件夹(UI/input)中。遵循本指南，将片段复制到文件中。</p><p id="e7f3" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">以下是<a class="ae lo" href="https://bit.cloud/nitsan770/reuse-components/ui/input/~code/input.tsx" rel="noopener ugc nofollow" target="_blank">输入实现</a>的源代码:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="6127" class="mr lq in mn b gy ms mt l mu mv">import React from 'react';<br/>import { Button } from '@nitsan770/reuse-components.ui.button';<br/>import classNames from 'classnames';<br/>import styles from './input.module.scss';</span><span id="705e" class="mr lq in mn b gy mw mt l mu mv">export type InputProps = {<br/>  buttonText: string;<br/>} &amp; React.InputHTMLAttributes&lt;HTMLInputElement&gt;;</span><span id="eef2" class="mr lq in mn b gy mw mt l mu mv">export function Input({ buttonText, className, ...rest }: InputProps) {<br/>  return (<br/>    &lt;div className={classNames(styles.inputContainer, className)}&gt;<br/>      &lt;input {...rest} className={styles.inputText}&gt;&lt;/input&gt;<br/>      &lt;Button className={styles.button} children={buttonText} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="b684" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">因为我们有<code class="fe nh ni nj mn b">Button</code>和类名作为依赖项，所以我们必须将它们安装在我们的工作空间中:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="0989" class="mr lq in mn b gy ms mt l mu mv">bit install @nitsan770/reuse-components.ui.button classnames</span></pre><p id="8710" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在生成的文件夹中，创建一个名为<code class="fe nh ni nj mn b">input.moudle.scss</code>的文件，并插入<a class="ae lo" href="https://bit.cloud/nitsan770/reuse-components/ui/input/~code/input.module.scss" rel="noopener ugc nofollow" target="_blank">这个CSS </a>:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="71a3" class="mr lq in mn b gy ms mt l mu mv">.inputContainer {<br/>  height: 56px;<br/>  min-width: 320px;<br/>  display: flex;<br/>  flex-direction: column;<br/>  justify-content: stretch;<br/>  align-items: stretch;<br/>  position: relative;<br/>  .button {<br/>    position: absolute;<br/>    width: 103px;<br/>    height: 40px;<br/>    right: 8px;<br/>    top: 8px;<br/>    width: 30%;<br/>  }<br/>  .inputText {<br/>    border: none;<br/>    background-color: var(--bit-bg-dent, #f6f6f6) !important;<br/>    color: var(--bit-text-color-heavy, #2b2b2b);<br/>    height: 100%;<br/>    width: 100%;<br/>    border-radius: 8px;<br/>    &amp;.error {<br/>      border: var(--bit-error-color, #e62e5c) 1px solid;<br/>      background-color: var(--bit-error-color, #e62e5c);<br/>    }<br/>    &amp;:focus,<br/>    &amp;:active,<br/>    &amp;:hover {<br/>      border: var(--bit-accent-color, #6c5ce7) 1px solid;<br/>    }<br/>  }<br/>}</span><span id="cb44" class="mr lq in mn b gy mw mt l mu mv">.disabled {<br/>  opacity: 0.5;<br/>}</span></pre><p id="5cdd" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">注意，组件将被添加到工作区的<code class="fe nh ni nj mn b">.bitmap</code>文件中。打开来看一看:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="5c64" class="mr lq in mn b gy ms mt l mu mv">"ui/input": {<br/>  "scope": "",<br/>  "version": "",<br/>  "defaultScope": "nitsan770.reuse-components",<br/>  "mainFile": "index.ts",<br/>  "rootDir": "ui/input",<br/>},</span></pre><p id="3b4c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">接下来让我们看看工作区UI中可爱的独立组件:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="216f" class="mr lq in mn b gy ms mt l mu mv">bit start</span></pre><p id="915e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">开发服务器已经启动并运行了！然而，我们什么也看不见😔。这是因为我们还没有为新创建的组件创建任何组合。</p><p id="d492" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">组合允许在不同的变化中模拟组件。这些可以用于测试、可视化和可发现性。</p><p id="1ab6" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们为我们的组件创建一个组合:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="2c59" class="mr lq in mn b gy ms mt l mu mv">import React from 'react';</span><span id="cc53" class="mr lq in mn b gy mw mt l mu mv">import { Input } from './Input';</span><span id="ab84" class="mr lq in mn b gy mw mt l mu mv">export const BasicInput = () =&gt; &lt;Input buttonText="Submit" /&gt;;</span></pre><p id="7f35" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在，我们可以在工作区UI中看到该组件:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/91f2894aaf6492ffc52e659469c8db96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pLZS8jUXQPLmVLCB.png"/></div></div></figure><p id="f259" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在，作为负责任的开发人员，让我们添加一些文档。</p><p id="376c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Bit组件的文档写在<a class="ae lo" href="https://mdxjs.com/" rel="noopener ugc nofollow" target="_blank"> MDX </a>中。您可以嵌入任何您想要的东西，使您的组件在视觉上更吸引人，更易于使用。</p><p id="d3ac" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们试试<a class="ae lo" href="https://bit.cloud/nitsan770/reuse-components/ui/input/~code/input.docs.mdx" rel="noopener ugc nofollow" target="_blank">这个</a>:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="64cd" class="mr lq in mn b gy ms mt l mu mv">---<br/>description: An input element with a built-in button.</span><span id="c8e9" class="mr lq in mn b gy mw mt l mu mv">labels: ["input", "submit form"]<br/>---</span><span id="cbb7" class="mr lq in mn b gy mw mt l mu mv">import { Input } from "./input";</span><span id="6f67" class="mr lq in mn b gy mw mt l mu mv">### Modify the text on the button</span><span id="8903" class="mr lq in mn b gy mw mt l mu mv">'''js live</span><span id="f806" class="mr lq in mn b gy mw mt l mu mv">&lt;Input buttonText="Go" /&gt;</span><span id="8a91" class="mr lq in mn b gy mw mt l mu mv">'''</span></pre><p id="1b70" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在看起来好多了，消费者可以在安装前试用该组件:</p><p id="393a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">最后但同样重要的是，一个好的组件是经过充分测试的。使用Bit，每个组件都可以在任何特定的上下文之外独立测试。这是非常有用的，因为你可以很容易地了解什么打破了每一个变化。</p><p id="51fa" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">你可以使用任何你喜欢的工具来测试组件，比如Jest。</p><p id="139b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">下面是为组件添加的测试<a class="ae lo" href="https://bit.cloud/nitsan770/reuse-components/ui/input/~code/input.spec.tsx" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="cd47" class="mr lq in mn b gy ms mt l mu mv">import React from 'react';<br/>import { screen, render } from '@testing-library/react';<br/>import { BasicInput } from './input.composition';</span><span id="8af1" class="mr lq in mn b gy mw mt l mu mv">it('Renders the input', () =&gt; {<br/>  render(&lt;BasicInput /&gt;);<br/>  const input = screen.getByRole('textbox');<br/>  expect(input).toBeInTheDocument();<br/>});</span><span id="c04a" class="mr lq in mn b gy mw mt l mu mv">it('Renders the button', () =&gt; {<br/>  render(&lt;BasicInput /&gt;);<br/>  const button = screen.getByRole('button');<br/>  expect(button).toBeInTheDocument();<br/>});</span><span id="47e3" class="mr lq in mn b gy mw mt l mu mv">it('Renders the button text', () =&gt; {<br/>  render(&lt;BasicInput /&gt;);<br/>  const button = screen.getByRole('button');<br/>  expect(button).toHaveTextContent('Submit');<br/>});</span></pre><p id="fc38" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们进行测试:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="dd99" class="mr lq in mn b gy ms mt l mu mv">bit test</span></pre><p id="1761" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">所有测试都通过了。🎉</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="2da1" class="mr lq in mn b gy ms mt l mu mv">PASS src/input/input.spec.tsx<br/>  ✓ Renders the input (67 ms)<br/>  ✓ Renders the button (19 ms)<br/>  ✓ Renders the button text (12 ms)</span><span id="ff92" class="mr lq in mn b gy mw mt l mu mv">Test Suites: 1 passed, 1 total<br/>Tests: 3 passed, 3 total<br/>Snapshots: 0 total<br/>Time: 5.549 s<br/>Ran all test suites.<br/>test has been completed in 13.718 seconds.</span></pre><h1 id="96cb" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">3.将组件版本化并“导出”到远程</h1><p id="ad93" class="pw-post-body-paragraph ks kt in ku b kv mh jo kx ky mi jr la lb mj ld le lf mk lh li lj ml ll lm ln ig bi translated">我们的组件现在已经在工作区中启动并运行了。多亏了bit，我们现在可以给它一个版本，并将其导出到bit.cloud或本地托管的远程范围，然后安装或“Bit导入”到新项目中。</p><p id="6fc0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们用组件的第一个版本来标记组件。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="956c" class="mr lq in mn b gy ms mt l mu mv">bit tag -m "first version"</span></pre><p id="cb10" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当一个组件被标记时，除了锁定源文件的当前状态之外，它还将经历一个构建过程。</p><p id="b25f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">请注意，如果您现在运行bit start并查看本地UI，您可以查看组件的版本历史——这在以后会非常方便，甚至可以使用<a class="ae lo" href="https://bit.cloud/blog/introducing-component-compare-easily-review-component-changes-l4qyxtoo" rel="noopener ugc nofollow" target="_blank"> component-compare </a>来比较版本。</p><p id="89dc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在这个过程中，组件将被编译成可分发的格式，并打包成一个tar文件。</p><p id="eabd" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">一旦组件被标记，就该发布它了:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="8796" class="mr lq in mn b gy ms mt l mu mv">bit login</span><span id="c0fe" class="mr lq in mn b gy mw mt l mu mv">bit export</span></pre><p id="9e13" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">该组件将被导出到bit.cloud上的远程作用域，如本例中的<a class="ae lo" href="https://bit.cloud/nitsan770/reuse-components" rel="noopener ugc nofollow" target="_blank">所示</a>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><a href="https://bit.cloud/nitsan770/reuse-components"><div class="gh gi nl"><img src="../Images/81d305f96934d3e11e4349bea5d5ad49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k9oPpIQBplgZEPeIXyEGhw.png"/></div></a></figure><h1 id="d0e1" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">4.安装和重复使用组件</h1><p id="e8c9" class="pw-post-body-paragraph ks kt in ku b kv mh jo kx ky mi jr la lb mj ld le lf mk lh li lj ml ll lm ln ig bi translated">现在我们的组件已经被导出，我们可以通过多种方式使用它，包括使用npm/yarn/pnpm客户端作为一个包。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><a href="https://bit.cloud/nitsan770/reuse-components/ui/input"><div class="gh gi nm"><img src="../Images/ea41e7e86345cc7837f7708a6e598c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*097pv0Ken8QiEIgs.png"/></div></a></figure><p id="95aa" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我们来试试吧！</p><p id="b878" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">打开另一个React项目:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="30ec" class="mr lq in mn b gy ms mt l mu mv">npx create-react-app another-project</span></pre><p id="8dcf" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们使用通常最快的<code class="fe nh ni nj mn b">pnpm</code>:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="0bb7" class="mr lq in mn b gy ms mt l mu mv">pnpm i @nitsan770/reuse-components.ui.input<br/>## if you haven't yet, remember to add your bit.cloud account as a scoped registry:<br/># npm config set '@nitsan770:registry' <a class="ae lo" href="https://node.bit.cloud" rel="noopener ugc nofollow" target="_blank">https://node.bit.cloud</a></span></pre><p id="8023" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我们现在可以使用<code class="fe nh ni nj mn b">app.js</code>文件中的组件:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="6f0d" class="mr lq in mn b gy ms mt l mu mv">import logo from './logo.svg';<br/>import { Input } from '@nitsan770/reuse-components.ui.input';<br/>import './App.css';</span><span id="4111" class="mr lq in mn b gy mw mt l mu mv">function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;header className="App-header"&gt;<br/>        &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>        &lt;Input buttonText="Submit" /&gt;<br/>        &lt;p&gt;<br/>          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>        &lt;/p&gt;<br/>        &lt;a<br/>          className="App-link"<br/>          href="https://reactjs.org"<br/>          target="_blank"<br/>          rel="noopener noreferrer"<br/>        &gt;<br/>          Learn React<br/>        &lt;/a&gt;<br/>      &lt;/header&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="759a" class="mr lq in mn b gy mw mt l mu mv">export default App;</span></pre><p id="ad57" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们运行开发服务器:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="36b6" class="mr lq in mn b gy ms mt l mu mv">npm start</span></pre><p id="55b0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">简直绝配！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/8d155a80d51a2b314a8b8560580a2e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SEiQayJxQRyUVZvk.png"/></div></div></figure><p id="2669" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在大多数情况下，这就足够了——您可以使用这种方法将所有组件创建为像这样的可重复使用的乐高积木，并在您的远程范围内收集它们，您也可以与您的团队共享这些组件。</p><h1 id="62f4" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">5.从新上下文中导入和编辑组件</h1><p id="025f" class="pw-post-body-paragraph ks kt in ku b kv mh jo kx ky mi jr la lb mj ld le lf mk lh li lj ml ll lm ln ig bi translated">当你想在一个新的上下文中使用一个组件——一个项目或者一个应用程序——但是你需要做一些改变并且可能创建一个组件的新版本时，会发生什么呢？</p><p id="d667" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">使用“Bit import”命令，bit使得在新的上下文中直接编辑组件和版本变得非常容易。</p><p id="60ff" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">“位导入”允许我们将任何组件检索到我们的本地工作区中，编辑它，然后用新版本标记和导出它。想象一下，你现在可以编辑任何节点模块的依赖关系…</p><p id="1cd8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们创建一个新的工作区，向其中导入一个组件，然后开始工作。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="4357" class="mr lq in mn b gy ms mt l mu mv">bit new react new-workspace --empty --skip-git --default-scope [your-cloud-user-name].[your-scope-name]</span><span id="8982" class="mr lq in mn b gy mw mt l mu mv">cd new-workspace</span></pre><p id="b369" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">将组件检索到我们新创建的工作区只需要运行一个命令:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="dd2b" class="mr lq in mn b gy ms mt l mu mv">bit import nitsan770.reuse-components/ui/inpu</span></pre><p id="0589" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">使用位导入，我们可以将任何组件检索到我们的本地工作区中，编辑它和标签，并使用新版本导出它。</p><p id="e094" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们<a class="ae lo" href="https://bit.cloud/nitsan770/reuse-components/ui/input/~code/input.tsx" rel="noopener ugc nofollow" target="_blank">添加一个新的道具</a>到我们的输入组件(在TSX文件中):</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="a0dc" class="mr lq in mn b gy ms mt l mu mv">import React from 'react';<br/>import { Button } from '@nitsan770/reuse-components.ui.button';<br/>import classNames from 'classnames';<br/>import styles from './input.module.scss';</span><span id="eb40" class="mr lq in mn b gy mw mt l mu mv">export type InputProps = {<br/>  buttonText: string;<br/>  disabled?: boolean;<br/>} &amp; React.InputHTMLAttributes&lt;HTMLInputElement&gt;;</span><span id="aee3" class="mr lq in mn b gy mw mt l mu mv">export function Input({<br/>  buttonText,<br/>  disabled,<br/>  className,<br/>  ...rest<br/>}: InputProps) {<br/>  return (<br/>    &lt;div className={classNames(styles.inputContainer, className)}&gt;<br/>      &lt;input {...rest} disabled={disabled} className={styles.inputText}&gt;&lt;/input&gt;<br/>      &lt;Button className={styles.button} children={buttonText} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="df00" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在，我们的工作空间中有了修改后的组件，我们决定喜欢它，并希望将这个新版本添加到我们的工具箱中。让我们用一个新版本来标记这些变化:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="fbd1" class="mr lq in mn b gy ms mt l mu mv">bit tag -m "added the disabled prop"</span></pre><p id="8c9b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">当然，一定要导出来，让大家都能体验到这种奇妙的变化:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="8c93" class="mr lq in mn b gy ms mt l mu mv">bit export</span></pre><p id="93ee" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">但是等等…如果现在我们想要在原始工作区中使用新版本呢？</p><p id="b2c7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">一旦我们回到原来的工作区，我们可以使用<code class="fe nh ni nj mn b">bit import</code>进行更新:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="5ff2" class="mr lq in mn b gy ms mt l mu mv">cd reusing-react-components<br/>bit import</span></pre><p id="3208" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">要查看源文件中的更改，我们还需要签出最新版本:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="a03d" class="mr lq in mn b gy ms mt l mu mv">bit checkout latest -a</span></pre><p id="92b8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在我们与新的更新:D同步</p><p id="9129" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我们现在还可以更新React项目中的组件，因为每次我们标记组件时，Bit都会发布一个新的包:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="87ee" class="mr lq in mn b gy ms mt l mu mv">cd another-project<br/>pnpm update @nitsan770/reuse-components.ui.input</span></pre><p id="77fb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我们现在在原来的React项目中有了更新的按钮:)</p><h1 id="71d0" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">6.共享并添加到您的可重用组件工具箱</h1><p id="965e" class="pw-post-body-paragraph ks kt in ku b kv mh jo kx ky mi jr la lb mj ld le lf mk lh li lj ml ll lm ln ig bi translated">随着时间的推移，您在不同应用程序甚至设计系统中创建的每个组件都将被版本化并添加到您的可重用工具箱中。</p><p id="7f8a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您可以创建组件，将它们组合在一起构建应用程序和体验，并获得您所做的一切的复合价值，就像用模块化和可重复使用的乐高积木一样。</p><p id="1f54" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这意味着您和您的团队将能够更快地构建、共享组件和协作，并保持同步。像设计系统或微前端这样的问题也变得相当容易解决。</p><p id="3892" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">顺便说一下，这个工作流并不局限于React甚至前端组件。你可以对任何JS代码做同样的事情，甚至在组件中构建整个<a class="ae lo" href="https://www.youtube.com/watch?v=5wxyDLXRho4" rel="noopener ugc nofollow" target="_blank">微服务。</a></p><p id="53f7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">感谢阅读🍻</p><p id="f15a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="no">更多内容请看</em><a class="ae lo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="no">plain English . io</em></strong></a><em class="no">。报名参加我们的</em> <a class="ae lo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="no">免费周报</em> </strong> </a> <em class="no">。关注我们关于</em><a class="ae lo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="no">Twitter</em></strong></a><strong class="ku io"><em class="no"/></strong><em class="no">和</em><a class="ae lo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"><em class="no">LinkedIn</em></strong></a><em class="no">。查看我们的</em> <a class="ae lo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="no">社区不和谐</em> </strong> </a> <em class="no">加入我们的</em> <a class="ae lo" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> <em class="no">人才集体</em> </strong> </a> <em class="no">。</em></p></div></div>    
</body>
</html>