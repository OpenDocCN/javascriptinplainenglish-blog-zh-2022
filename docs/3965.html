<html>
<head>
<title>Broadcast Channel API 🔊</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">广播频道API🔊</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/broadcast-channel-api-af9b9f1b145c?source=collection_archive---------11-----------------------#2022-10-13">https://javascript.plainenglish.io/broadcast-channel-api-af9b9f1b145c?source=collection_archive---------11-----------------------#2022-10-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="13ae" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">网络的黑魔法——Ep1</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/fcaef6a062fe11554ff3f6cc261e3c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYCKye26ywiu_trnm3QKkw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/es/@nikolasnoonan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Nikolas Noonan</a> on <a class="ae ks" href="https://unsplash.com/s/photos/dark?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0437" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那是一个漆黑的夜晚。月亮睡着了。🌑</p><p id="2623" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">街道空无一人。🛣️</p><p id="1d72" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在大风中嚎叫的狗。🐕‍🦺</p><p id="e125" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">突然，一片死寂…🤫</p><p id="7b5f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一根黑魔法棒从灰色烟雾中出现…💨</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Potter using the Broadcastro petronum spell 🪄</figcaption></figure><p id="6544" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">魔杖包含不同的魔法咒语(API ),我们将在这个系列中一个接一个地看到。</p><h1 id="4dc2" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">🪄石油公司</h1><blockquote class="mj mk ml"><p id="b0bb" class="kt ku mm kv b kw kx jo ky kz la jr lb mn ld le lf mo lh li lj mp ll lm ln lo ig bi translated">第一个咒语是最危险的。如果<strong class="kv io">和</strong>来自同一个<strong class="kv io">，它可以用来<strong class="kv io">在两个【】浏览上下文</strong>之间传递信息</strong>(数据)。</p></blockquote><p id="ef91" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Broadcastro petronum是<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API" rel="noopener ugc nofollow" target="_blank">广播通道API </a>，它允许我们跨窗口、标签、iframes或web workers广播数据(字符串/对象/甚至blobs ),如果它们是同源的话。同源是指具有相同的协议、url和端口。</p><p id="83d7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好吧！理论上的定义已经够多了。我们可以从创建一个彩色应用程序开始🎨</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/812afb012f730b55920a33d7320ec720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*kkJ6XAQwAF-ciWeMN7kL1A.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">3 browser tabs which syncs background color</figcaption></figure><h2 id="852a" class="mr ls in bd lt ms mt dn lx mu mv dp mb lc mw mx md lg my mz mf lk na nb mh nc bi translated">让我们编码！</h2><p id="92fc" class="pw-post-body-paragraph kt ku in kv b kw nd jo ky kz ne jr lb lc nf le lf lg ng li lj lk nh lm ln lo ig bi translated">我们将制作一个<strong class="kv io">颜色同步应用</strong>，所有标签的背景颜色代码将被同步。将下面的代码复制并粘贴到你最喜欢的代码编辑器(不是vim)中，然后启动一个服务器。</p><blockquote class="mj mk ml"><p id="7e29" class="kt ku mm kv b kw kx jo ky kz la jr lb mn ld le lf mo lh li lj mp ll lm ln lo ig bi translated">低语.."使用vscode "</p></blockquote><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ni lq l"/></div></figure><p id="109c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">创建一个js文件broadcast_api.js，并将其嵌入到html文件中。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ni lq l"/></div></figure><p id="af04" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在多个标签中打开live服务器，当你在一个标签中改变背景颜色时，它将与所有其他标签同步，具有broadcastro petronum咒语的魔力😍。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/ffb6a9285eac3bb660e6d42aad6d8cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hm-NTVjOe8FMVT_n72tzmQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Final output of the spell</figcaption></figure><h2 id="a02c" class="mr ls in bd lt ms mt dn lx mu mv dp mb lc mw mx md lg my mz mf lk na nb mh nc bi translated">让我们理解工作</h2><p id="6213" class="pw-post-body-paragraph kt ku in kv b kw nd jo ky kz ne jr lb lc nf le lf lg ng li lj lk nh lm ln lo ig bi translated">🪄我们正在使用输入标签创建一个颜色选择器，并使用<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/color" rel="noopener ugc nofollow" target="_blank"> addEventListener </a>监听颜色变化事件。</p><p id="166b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">🪄广播频道在每个选项卡中使用唯一的名称创建。</p><pre class="kd ke kf kg gt nk nl nm nn aw no bi"><span id="b70b" class="mr ls in nl b gy np nq l nr ns">broadcastChannel = new BroadcastChannel(“color_sync”);</span></pre><p id="fdc9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">🪄使用频道我们已经发送了一个postMessage到其他活跃的标签，这些标签在广播频道上收听。一旦接收到颜色代码，背景就被同步。</p><pre class="kd ke kf kg gt nk nl nm nn aw no bi"><span id="ea0d" class="mr ls in nl b gy np nq l nr ns">broadcastChannel.postMessage(message);</span></pre><blockquote class="mj mk ml"><p id="812d" class="kt ku mm kv b kw kx jo ky kz la jr lb mn ld le lf mo lh li lj mp ll lm ln lo ig bi translated">注意:postMessage不会在发送它的同一上下文中接收</p></blockquote><p id="2b02" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那太简单快捷了吧😍</p><p id="ade7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Web API是令人敬畏的，除非它的浏览器支持表是绿色的。这里不用担心，因为大多数现代浏览器都支持广播频道API。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/06ee48d3509929f2beca5d1dc2b162b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tWO_lsw8Z_vycgVeuqafFg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Browser support for broadcast channel API</figcaption></figure></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><p id="ff5a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">广播频道API在实时应用程序中非常有用，在这些应用程序中，大量数据需要跨选项卡同步。它是提供多种服务的应用程序的救命稻草，比如谷歌，它提供了一套在多个标签上运行的商业应用程序。</p><p id="b28f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以用它来同步服务器响应，避免不必要的网络使用。可以编写微模块，并在浏览器上下文之间共享，以执行性能密集型任务。有许多这样的用例。</p><p id="7835" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果使用得当，一个非常小的代码也能创造奇迹。请在下面评论您计划如何在您的项目中使用Broadcast Petronum。下集网络黑魔法咒语再见。😉</p></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><h2 id="f272" class="mr ls in bd lt ms mt dn lx mu mv dp mb lc mw mx md lg my mz mf lk na nb mh nc bi translated">过帐学分</h2><p id="bcc3" class="pw-post-body-paragraph kt ku in kv b kw nd jo ky kz ne jr lb lc nf le lf lg ng li lj lk nh lm ln lo ig bi translated">黑魔法在空气中渗出了更多的咒语。这次听起来像Webardium Composa…😯</p><p id="ccd1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在medium上关注我并订阅电子邮件以接收即时通知。</p><p id="8f9d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mm">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mm">plain English . io</em></strong></a><em class="mm">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mm">免费周报</em> </strong> </a> <em class="mm">。关注我们上</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mm">Twitter</em></strong></a><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mm">LinkedIn</em></strong></a><strong class="kv io"><em class="mm"/></strong><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mm">YouTube</em></strong></a><strong class="kv io"><em class="mm"/></strong><em class="mm">和</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mm">不和</em> </strong> </a>  <em class="mm">对成长黑客感兴趣？检查</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mm">电路</em> </strong> </a> <strong class="kv io"> <em class="mm">。</em> </strong></p></div></div>    
</body>
</html>