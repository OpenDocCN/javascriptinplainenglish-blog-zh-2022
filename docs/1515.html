<html>
<head>
<title>Temporal API: JavaScript Dates, but better</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时态API: JavaScript日期，但更好</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/temporal-api-javascript-dates-but-better-a5f3d75250bc?source=collection_archive---------2-----------------------#2022-03-30">https://javascript.plainenglish.io/temporal-api-javascript-dates-but-better-a5f3d75250bc?source=collection_archive---------2-----------------------#2022-03-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/14a174b7d5a733433abe90695c8a2f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OzCuyNC25q7K-kJto6AlpQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@aronvisuals?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Aron Visuals</a> on <a class="ae kc" href="https://unsplash.com/s/photos/time?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3dd9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你曾经在JavaScript中处理过日期，你肯定知道处理它们有多麻烦和困难；这就是为什么，最近，有一个全新的工作方式的建议，你已经猜到了——时态API。</p><p id="17d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，这是什么？</p><p id="d67c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们利用他们提供的介绍性信息，</p><blockquote class="lb lc ld"><p id="9e9c" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><code class="fe li lj lk ll b">Date</code>一直是ECMAScript长期以来的痛点。这是对<code class="fe li lj lk ll b">Temporal</code>的提议，它是一个充当顶级名称空间的全局<code class="fe li lj lk ll b">Object</code>(就像<code class="fe li lj lk ll b">Math</code>)，为ECMAScript语言带来了一个现代的日期/时间API。要详细了解<code class="fe li lj lk ll b">Date</code>的一些问题，以及时态的动机，请参见:<a class="ae kc" href="https://maggiepint.com/2017/04/09/fixing-javascript-date-getting-started/" rel="noopener ugc nofollow" target="_blank">修复JavaScript日期</a>。</p></blockquote></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h2 id="1db2" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">你为什么想用它？</h2><p id="ca20" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">嗯，有几个原因，比如:</p><ul class=""><li id="5507" class="mr ms iq kf b kg kh kk kl ko mt ks mu kw mv la mw mx my mz bi translated">一个更容易使用的API，包括时间和日期</li><li id="4bd0" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">直观的命名约定(<code class="fe li lj lk ll b">Plain</code> / <code class="fe li lj lk ll b">Zoned</code>，取决于您是否需要时区不可知论)</li><li id="1b53" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">提取时间/日期差异的简易性</li><li id="84c1" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">字符串和对象格式之间的互操作性</li><li id="c8c3" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">只需要处理代表时间或日期的对象</li></ul></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="94dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我相信新的时态API为我们提供了很多以前JS Dates所缺乏的实用程序(必须通过库来弥补，如<a class="ae kc" href="https://momentjs.com" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="le">moment . JS</em></strong></a>或<a class="ae kc" href="https://date-fns.org" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="le">date-fns</em></strong></a>)，以及一种更好的处理单个全局日期对象(<code class="fe li lj lk ll b">Temporal</code>)的方式。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h2 id="32de" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">时态API数据类型</h2><p id="8c54" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">使用时态API时要考虑的一个重要因素是，它提供的数据类型被分成<code class="fe li lj lk ll b">Plain</code> &amp; <code class="fe li lj lk ll b">Zoned</code>:</p><ul class=""><li id="e21d" class="mr ms iq kf b kg kh kk kl ko mt ks mu kw mv la mw mx my mz bi translated"><code class="fe li lj lk ll b"><strong class="kf ir">Plain</strong></code>，不提供时区信息</li><li id="0ce7" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe li lj lk ll b"><strong class="kf ir">Zoned</strong></code>，表示日期/时间，信息绑定到特定时区；它最适合于需要处理特定时区内的特定时间的场景，或者需要进行格式化，或者执行考虑时区特定信息的时间/日期差异/加法运算的场景</li></ul><p id="2215" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您最有可能使用的一些关键数据类型:</p><h2 id="9363" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated"><strong class="ak"> 1。普通日期时间</strong></h2><p id="9b7e" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">这是最容易理解的方法之一，因为它表示一个没有附加时区信息的日期和时间对象。您可以通过使用<code class="fe li lj lk ll b">Temporal.Now.plainDateTimeISO</code>方法简单地创建一个实例。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="0193" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个方法创建一个新的使用本地时区日期&amp;时间的<code class="fe li lj lk ll b">PlainDateTime</code>对象，除非没有其他时区参数传递给这个方法。</p><h2 id="449d" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">2.普通约会</h2><p id="e0bf" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">该对象包含没有附加时区数据的日期信息。它最适合不需要任何时间信息的情况。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="f4a5" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">3.哀怨</h2><p id="46bc" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">一个<code class="fe li lj lk ll b">PlainTime</code>对象表示一个没有日期或时区信息的时间。关于这种数据类型，需要注意的是没有关联的<code class="fe li lj lk ll b">Temporal.Now.plainTime</code>方法，因为对于<code class="fe li lj lk ll b">PlainTime</code>对象来说，没有特定的日历上下文。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="2605" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">4.ZonedDateTime</h2><p id="20f1" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated"><code class="fe li lj lk ll b">ZonedDateTime</code>对象是一个datetime对象，它打包了所有与时区相关的信息，这使得它非常适合需要夏令时的情况。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="b3d6" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">5.瞬间</h2><p id="31ea" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">在表示特定时间点方面，<code class="fe li lj lk ll b">Instant</code>对象类似于<code class="fe li lj lk ll b">ZonedDateTime</code>对象，但是不同之处在于它总是包含UTC时间，并且不引用特定的日历。</p><p id="cc08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您也不能将一个对象传递给<code class="fe li lj lk ll b">Instant</code>的<code class="fe li lj lk ll b">from</code>方法(我将在一秒钟内解决这个问题),当您将一个字符串传递给<code class="fe li lj lk ll b">from</code>方法时，它必须包含时区信息。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="a148" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">6.<code class="fe li lj lk ll b">PlainMonthDay</code></h2><p id="a5e8" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">一个<code class="fe li lj lk ll b">PlainMonthDay</code>就像一个<code class="fe li lj lk ll b">PlainDate</code>，唯一的区别是它不包括任何年份信息。这在处理节假日(12月25日)等总是在同一天的事情时尤其有用。</p><p id="4904" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为这是一种不太常见的数据类型，所以创建它的唯一方法是使用<code class="fe li lj lk ll b">from</code>方法和构造函数。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="2f1b" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">7.平年月份</h2><p id="fa41" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">与<code class="fe li lj lk ll b">PlainMonthDay</code>类似，<code class="fe li lj lk ll b">PlainYearMonth</code>对象具有完全相同的效用，除了这次您处理的是月份&amp;年份。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h2 id="75d5" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">时态API提供的实用方法</h2><p id="c7cb" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">如果我们只有这些数据类型而没有其他，那有什么好处呢？这就是为什么Temporal API附带了各种非常有用的实用方法来弥补JavaScript Dates目前所缺乏的功能。</p><h2 id="847a" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">1.加/减</h2><p id="1ea5" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">在JavaScript中添加或减去日期的一部分确实很烦人，但是使用时态API，我们到目前为止讨论的所有数据类型都内置了<code class="fe li lj lk ll b">add</code>和<code class="fe li lj lk ll b">subtract</code>方法，这让事情变得非常简单。</p><p id="16d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两个函数有完全相同的参数，唯一的区别是一个是加法，而另一个是减法。</p><p id="b207" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用这些方法最简单的方法是通过向<code class="fe li lj lk ll b">add</code> / <code class="fe li lj lk ll b">subtract</code>方法传递一个对象，该对象带有您想要进行的更改的属性。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="5cb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些函数的另一个好处是它们会自动处理溢出。</p><p id="8911" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果您尝试在1月31日的日期上加1个月，结果会是不存在的2月31日。默认情况下，这些结果将被固定到最近的有效日期，因此它将返回2月28日。</p><p id="b43e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您也可以禁用这种行为，不过要使用第二个选项参数。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="bcb9" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">2.自/直到</h2><p id="38b9" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated"><code class="fe li lj lk ll b">since</code>和<code class="fe li lj lk ll b">until</code>方法将确定当前时态日期对象和另一个时态日期对象之间的时间距离。</p><p id="c684" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类似于<code class="fe li lj lk ll b">add</code>和<code class="fe li lj lk ll b">subtract</code>,<code class="fe li lj lk ll b">since</code>和<code class="fe li lj lk ll b">until</code>方法彼此相反，并采用完全相同的参数。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="477e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些方法返回的值是一个<code class="fe li lj lk ll b">Temporal.Duration</code>对象。此外，您可以向这些方法传递一个选项参数，以真正微调您希望如何计算持续时间。</p><p id="e1c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您指定了<code class="fe li lj lk ll b">largestUnit</code>，那么将使用该单位作为最大值而不是默认值来指定持续时间。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="8a71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您指定了<code class="fe li lj lk ll b">smallestUnit</code>，那么将使用该单位作为最小值而不是默认值来指定持续时间。这可能导致舍入，可通过<code class="fe li lj lk ll b">roundingIncrement</code>和<code class="fe li lj lk ll b">roundingMode</code>选项进一步定制。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="1a9e" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">3.等于</h2><p id="83de" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">最后的方法有点复杂，所以让我们看看一个非常简单的方法。</p><p id="ecdd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果两个时态日期对象具有完全相同的字段，则<code class="fe li lj lk ll b">equals</code>方法将返回true。这是必要的，因为从技术上讲，用<code class="fe li lj lk ll b">==</code>或<code class="fe li lj lk ll b">===</code>进行的任何比较都是假的，除非这两个对象是同一个实例。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="1e76" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">4.随着</h2><p id="d300" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">这是我最喜欢的助手方法之一，因为它覆盖了JavaScript日期中的一个巨大弱点。<code class="fe li lj lk ll b">with</code>方法接受一个字段对象来覆盖当前日期对象。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="dc5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，关于这个方法需要知道的重要的一点是，它实际上并不改变它所调用的时态日期对象。相反，它返回一个新的时态日期对象，并对其应用更改。</p><h2 id="f543" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">5.轮次</h2><p id="d39f" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated"><code class="fe li lj lk ll b">Round</code>是一个方法，当在一个类似于<code class="fe li lj lk ll b">Temporal</code>的对象上调用时，它返回一个新的日期/时间对象，该对象由参数指定的特定单位舍入。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="8fb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想修改舍入的执行方式，您可以传递一个带有<code class="fe li lj lk ll b">smallestUnit</code>、<code class="fe li lj lk ll b">roundingIncrement</code>和<code class="fe li lj lk ll b">roundingMode</code>参数的对象。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="3416" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">6.比较</h2><p id="5a9f" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">我想谈的最后一个方法是<code class="fe li lj lk ll b">compare</code>方法，它适用于实际的数据类型，而不是对象实例。这种方法非常常用于简化日期排序。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h2 id="6a13" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">其他数据类型</h2><p id="579f" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">到目前为止，我们已经查看了该节目的明星，但还有一些数据类型，虽然您可能不会经常使用，但了解这些数据类型是很有用的。</p><h2 id="90e4" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">1.持续时间</h2><p id="f50a" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">我们在本文中提到过几次的<code class="fe li lj lk ll b">Duration</code>数据类型。这种数据类型只是表示一段时间，通常不是您自己构建的，而是在比较日期时需要处理的。但是，如果您愿意，可以用构造函数或<code class="fe li lj lk ll b">from</code>方法创建一个新的持续时间。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="c8fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与前面提到的其他数据类型类似，您也可以对持续时间使用<code class="fe li lj lk ll b">add</code>、<code class="fe li lj lk ll b">subtract</code>、<code class="fe li lj lk ll b">with</code>和<code class="fe li lj lk ll b">round</code>方法。还有一些您想知道的额外的帮助器方法:</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="cfc1" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">2.时区</h2><p id="e940" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated"><code class="fe li lj lk ll b">TimeZone</code>数据类型用于表示特定的时区。您最可能使用它的场景是使用<code class="fe li lj lk ll b">from</code>方法或<code class="fe li lj lk ll b">Temporal.Now.timeZone</code>方法，但是您也可以使用构造函数。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="3254" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该数据类型最重要的助手函数是<code class="fe li lj lk ll b">getNextTransition</code>和<code class="fe li lj lk ll b">getPreviousTransition</code>，它们将返回下一次/上一次夏令时转换的日期/时间。</p><h2 id="e7b4" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">3.日历</h2><p id="f0a3" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated"><code class="fe li lj lk ll b">Calendar</code>数据类型是您需要知道的最后一种数据类型，可能也是最没用的。您可以使用<code class="fe li lj lk ll b">from</code>方法创建一个日历，或者如果您愿意，也可以使用构造函数。</p><figure class="nf ng nh ni gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="e0ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这种数据类型，您真的不需要知道什么重要的函数，因为您真的不太可能经常使用它。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h2 id="ed88" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">浏览器支持</h2><p id="e88b" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">希望在阅读完所有这些之后，您会兴奋地开始尝试时态API。我得到的唯一坏消息是这个API还不可用，因为它还在提议阶段3。目前还没有浏览器支持这个API，但是如果你想现在就开始使用这个API，你可以使用一个polyfill。</p><p id="ce9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个API有多个polyfill，但是我发现<a class="ae kc" href="https://www.npmjs.com/package/@js-temporal/polyfill" rel="noopener ugc nofollow" target="_blank"> @js-temporal/polyfill </a>是一个很好的选择。一旦你安装了这个库，你就可以立即开始使用时态API。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><h2 id="aba4" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">最后一句话</h2><p id="094c" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">我们都知道JavaScript Dates可以好得多，我真的相信时态API是一个巨大的进步，也是一条路要走。我很高兴我们可以选择试用Stage 3时态API版本，因为它提供了一些关于一个非常有前途的、可能包含在JavaScript未来版本中的项目的见解。</p><p id="9274" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望这篇文章对您有用，并且激发了您对用JavaScript处理日期的新方法的兴趣。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="59f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你愿意支持我当作家，可以考虑报名成为<a class="ae kc" href="https://vlad-mihet.medium.com/membership" rel="noopener"> <strong class="kf ir"> <em class="le">中等会员</em> </strong> </a>。每月只需5美元，你就可以无限制地阅读我和其他作家在Medium上的所有文章。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="f076" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你喜欢看这篇文章，你也可以在这里给我买杯咖啡来支持我。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="6a17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="le">你可能会感兴趣的我的其他一些故事:</em> </strong></p><p id="bffb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://vlad-mihet.medium.com/the-3-most-important-things-that-you-can-learn-51825ccb8dde" rel="noopener"> <em class="le">你可以学到的3件最重要的事情</em> </a></p><p id="c50d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://vlad-mihet.medium.com/when-is-creativity-needed-in-software-development-b97ed53311a5" rel="noopener"> <em class="le">软件开发什么时候需要创造力？</em> </a></p><p id="f998" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://vlad-mihet.medium.com/6-months-as-a-software-engineer-coming-from-freelancing-d4f6626b01ab" rel="noopener"><em class="le"/></a>自由职业6个月软件工程师</p><p id="d570" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://vlad-mihet.medium.com/web-dev-freelancing/why-do-i-think-all-developers-should-have-a-taste-of-freelancing-465a58d8d2ce" rel="noopener"> <em class="le">为什么我觉得所有的开发者都应该有自由职业的味道？</em> </a></p><p id="92d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://vlad-mihet.medium.com/what-do-i-do-whenever-i-lose-motivation-for-improvement-in-my-career-a4c076ae3413" rel="noopener"> <em class="le">每当我在职业生涯中失去提升的动力时，我会怎么做？</em> </a></p><p id="5c24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="le">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="le">plain English . io</em></strong></a><em class="le">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="le">免费周报</em> </strong> </a> <em class="le">。关注我们上</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="le">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="le">LinkedIn</em></strong></a><strong class="kf ir"><em class="le"/></strong><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="le">YouTube</em></strong></a><strong class="kf ir"><em class="le"/></strong><em class="le">和</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="le">不和</em> </strong> </a>  <em class="le">对成长黑客感兴趣？检查</em> <a class="ae kc" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="le">电路</em> </strong> </a> <strong class="kf ir"> <em class="le">。</em> </strong></p></div></div>    
</body>
</html>