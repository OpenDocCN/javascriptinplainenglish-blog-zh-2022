<html>
<head>
<title>How updating Array &amp; Object in state</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何更新状态中的数组和对象</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-updating-array-object-in-state-e471e1cd605d?source=collection_archive---------9-----------------------#2022-12-05">https://javascript.plainenglish.io/how-updating-array-object-in-state-e471e1cd605d?source=collection_archive---------9-----------------------#2022-12-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/e9cc4418e7ec0fb593eca867b47705cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*_gkQqlksqe3MS3YL9ubQ7A.png"/></div></figure><p id="a98a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在本教程中，我们将看到如何使用<strong class="jt io"> React JS </strong>来处理数组。我们可以在<strong class="jt io"> React Native </strong>中使用JavaScript标准数组函数。然而，我们必须做一些额外的工作来操作<strong class="jt io"> React Native </strong>中的数组，这是因为<strong class="jt io"> React Native </strong>使用<strong class="jt io"> useState </strong>钩子来更新变量值。</p><p id="2765" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在本教程中，我们将看到以下主题。</p><ol class=""><li id="3699" class="kp kq in jt b ju jv jy jz kc kr kg ks kk kt ko ku kv kw kx bi translated">向数组中添加新行。</li><li id="d1e3" class="kp kq in jt b ju ky jy kz kc la kg lb kk lc ko ku kv kw kx bi translated">更新数组中的一行。</li><li id="9348" class="kp kq in jt b ju ky jy kz kc la kg lb kk lc ko ku kv kw kx bi translated">删除数组中的一行。</li><li id="fca3" class="kp kq in jt b ju ky jy kz kc la kg lb kk lc ko ku kv kw kx bi translated">Fatch数组中的一行。</li><li id="dc8a" class="kp kq in jt b ju ky jy kz kc la kg lb kk lc ko ku kv kw kx bi translated">将数组从一个屏幕导航或传递到另一个屏幕</li><li id="3eff" class="kp kq in jt b ju ky jy kz kc la kg lb kk lc ko ku kv kw kx bi translated">使用状态数组中的搜索功能</li></ol><p id="20e7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">申报</p><p id="0932" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">首先，我们将看到如何遍历数组并在UI中显示它。</p><p id="7472" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用useState钩子在你的<strong class="jt io"> App.js </strong>文件中使用下面的代码创建一个新的字符串数组。</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="71e9" class="lm ln in li b be lo lp l lq lr">  const [artists, setArtists] = useState([]);</span></pre><ol class=""><li id="f379" class="kp kq in jt b ju jv jy jz kc kr kg ks kk kt ko ku kv kw kx bi translated"><strong class="jt io">向数组添加新行。</strong></li></ol><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="6500" class="lm ln in li b be lo lp l lq lr">setArtists([<br/>                ...artists,<br/>                {<br/>                  id: item.id,<br/>                  name: item.name,<br/>                  price: item.price,<br/>                  image: item.image,<br/>                  qantity: 1,<br/>                  type: "normal",<br/>                },<br/>              ])</span></pre><p id="be4c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">2.<strong class="jt io">更新数组中的一行。</strong></p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="3f31" class="lm ln in li b be lo lp l lq lr">setArtists([...artists.filter((x) =&gt; x.id !== item.id),<br/>                      {<br/>                        id: item.id,<br/>                        name: item.name,<br/>                        type: item.type,<br/>                        price: item.price,<br/>                        image: item.image,<br/>                        product_id: 0,<br/>                        qantity:<br/>                          [...artists].find((a) =&gt; a.id === item.id).qantity -<br/>                          1, //If increment + 1 &amp; decrement - 1 <br/>                      },<br/>                    ])</span></pre><p id="768f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> 3。删除数组中的一行。</strong></p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="17be" class="lm ln in li b be lo lp l lq lr">setArtists([...artists.filter((x) =&gt; x.id !== item.id)])</span></pre><p id="2648" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">4.<strong class="jt io"> Fatch数组中的一行。</strong></p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="c7eb" class="lm ln in li b be lo lp l lq lr">setArtists([...artists.filter((x) =&gt; x.id !== item.id)])</span></pre><p id="c125" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> 5。导航或将数组从一个屏幕传递到另一个屏幕</strong></p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="7391" class="lm ln in li b be lo lp l lq lr">navigation.navigate(screenB, { art: artists, }) </span></pre><p id="64ca" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当更新和执行CRUD并返回屏幕时，创建焦点。所以不需要API调用就可以更新数据</p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="ce9d" class="lm ln in li b be lo lp l lq lr">import { useIsFocused } from "@react-navigation/native";<br/><br/><br/>const isFocused = useIsFocused();<br/><br/>  useEffect(() =&gt; {<br/> // Call only when screen open or when back on screen <br/>    if(isFocused){ <br/>      fetchData();<br/>    }<br/>  }, [isFocused]);</span></pre><p id="7e45" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">注意:</strong>有些时候用户回来，而不是api调用，这时候使用吸种挂钩。</p><p id="3e66" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">6.<strong class="jt io">使用状态数组搜索特征</strong></p><pre class="ld le lf lg gt lh li lj bn lk ll bi"><span id="3957" class="lm ln in li b be lo lp l lq lr"> const handleSearch = (text) =&gt; {<br/>    setsearch(text);<br/>    console.log(<br/>      "Artists Array",<br/>      [...artists].find((a) =&gt; a.name === text)<br/>    );<br/><br/>    let newData = artists.filter((item) =&gt; {<br/>      const itemData = `${item.name.toUpperCase()}`;<br/>      const textData = text.toUpperCase();<br/>      if (text.length &gt; 0) {<br/>        return itemData.indexOf(textData) &gt; -1;<br/>      }<br/>    });<br/>    setSearchArtists(newData);<br/>  };</span></pre><p id="e95f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">参考</p><div class="ls lt gp gr lu lv"><a href="https://beta.reactjs.org/learn/updating-arrays-in-state" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd io gy z fp ma fr fs mb fu fw im bi translated">更新状态中的数组</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">数组在JavaScript中是可变的，但是当您在state中存储它们时，应该将它们视为不可变的。就像…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">beta.reactjs.org</p></div></div><div class="me l"><div class="mf l mg mh mi me mj jp lv"/></div></div></a></div><p id="8b2f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="mk">更多内容请看</em><a class="ae ml" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="mk">plain English . io</em></strong></a><em class="mk">。</em></p><p id="22eb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="mk">报名参加我们的</em> <a class="ae ml" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="mk">免费周报</em> </strong> </a> <em class="mk">。关注我们上</em> <a class="ae ml" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="mk">推特</em> </strong> </a>，<a class="ae ml" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="mk">领英</em> </strong> </a> <strong class="jt io"> <em class="mk">，</em></strong><a class="ae ml" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="mk">YouTube</em></strong></a><strong class="jt io"><em class="mk">，以及</em></strong><em class="mk"/><a class="ae ml" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="mk">不和</em> </strong> </a>T47】</p><p id="00da" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="mk">想看看你的软件启动规模</em> </strong> <em class="mk">？检查</em> <a class="ae ml" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="mk">电路</em> </strong> </a> <em class="mk">。</em></p></div></div>    
</body>
</html>