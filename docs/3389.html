<html>
<head>
<title>How to Make an Input Only Accept Integers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使输入只接受整数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-make-an-input-only-accept-integers-9cc54f6217ad?source=collection_archive---------7-----------------------#2022-08-24">https://javascript.plainenglish.io/how-to-make-an-input-only-accept-integers-9cc54f6217ad?source=collection_archive---------7-----------------------#2022-08-24</a></blockquote><div><div class="fc ic id ie if ig"/><div class="ih ii ij ik il"><div class=""/><div class=""><h2 id="515a" class="pw-subtitle-paragraph jl in io bd b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dk translated">两种实现方式。</h2></div><figure class="ke kf kg kh gu ki gi gj paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gi gj kd"><img src="../Images/35193faad7724ef790b5980dd1301584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K4QjtLALQpgnCHECl3v3zw.png"/></div></div></figure><h2 id="e4be" class="kp kq io bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">前言</h2><p id="e3d5" class="pw-post-body-paragraph ll lm io ln b lo lp jp lq lr ls js lt ky lu lv lw lc lx ly lz lg ma mb mc md ih bi translated">输入是一个非常常见的HTML标签，用于收集用户数据。我们可以将它用于文本、数字和文件，但是用户输入的数据是不可信的。有时我们期望一个数字，用户可能输入一个字符串或其他字符。因此，我们的web应用程序可能无法很好地处理错误的数据类型。上周，我的React应用程序遇到了这个问题，因为输入接受除整数之外的浮点类型。在本文中，我将介绍两种实现只接受整数的输入的方法。</p><p id="733b" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">首先，让我们分析从用户输入到存储数据的步骤:</p><figure class="ke kf kg kh gu ki gi gj paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gi gj mj"><img src="../Images/a1391b3e43f0c728b4dd0c392a6f533e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wm14eLTh2FJj9pVFqJVUEg.png"/></div></div></figure><p id="ce1d" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">主要有两个步骤:</p><ol class=""><li id="f283" class="mk ml io ln b lo me lr mf ky mm lc mn lg mo md mp mq mr ms bi translated">用户通过使用键盘输入数据；</li><li id="1010" class="mk ml io ln b lo mt lr mu ky mv lc mw lg mx md mp mq mr ms bi translated">应用程序收集数据；</li></ol><p id="3fab" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">我们可以做一些事情，使输入在每一步都采用正确的数据。</p><h2 id="3b35" class="kp kq io bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">验证数据并给出反馈</h2><p id="bba1" class="pw-post-body-paragraph ll lm io ln b lo lp jp lq lr ls js lt ky lu lv lw lc lx ly lz lg ma mb mc md ih bi translated">我们必须收集用户输入的数据。因此，简单的方法是检查数据，如果不满足关于数据类型的条件，则向用户提供反馈。</p><p id="da91" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">如果我们只想接受整数输入，我们可以使用下面的正则表达式来检查数据:</p><pre class="ke kf kg kh gu my mz na nb aw nc bi"><span id="8101" class="kp kq io mz b gz nd ne l nf ng">/^\d+$/</span></pre><p id="3979" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">我们可以通过使用输入<code class="fe nh ni nj mz b">blur</code>事件来检查它:</p><figure class="ke kf kg kh gu ki"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="70fb" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">它工作得很好，但是<strong class="ln ip">你可以只使用HTML来检查输入数据。</strong>输入标签支持<code class="fe nh ni nj mz b">pattern</code>属性，该属性可以是一个正则表达式，我们可以通过<code class="fe nh ni nj mz b">:valid</code>、<code class="fe nh ni nj mz b">:invalid</code>伪元素了解其有效性状态。</p><figure class="ke kf kg kh gu ki"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="1b28" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">通过使用<code class="fe nh ni nj mz b">pattern</code>属性，用户数据将在输入过程中被自动检查，我们可以通过使用input元素的<code class="fe nh ni nj mz b">validity</code>属性来获得状态。如果您想使用该功能，可以参考<a class="ae nm" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#client-side_validation" rel="noopener ugc nofollow" target="_blank">&lt;Input&gt;:Input(表单输入)元素— HTML:超文本标记语言| MDN(mozilla.org)</a>了解更多信息。</p><h2 id="c995" class="kp kq io bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">防止输入过程中出现意外字符</h2><p id="3f1a" class="pw-post-body-paragraph ll lm io ln b lo lp jp lq lr ls js lt ky lu lv lw lc lx ly lz lg ma mb mc md ih bi translated">在一些只需要整数的众所周知的场景中，比如楼层号和星期几，我们可以通过防止输入意外字符来做到这一点。</p><p id="50de" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">在Chrome中，我们可以使用<code class="fe nh ni nj mz b">keydown</code>事件来阻止动作，其他事件如<code class="fe nh ni nj mz b">keypress</code> <code class="fe nh ni nj mz b">input</code>可能对已经设置的输入值不起作用。并且我们可以使用<code class="fe nh ni nj mz b">typeof number</code>来防止输入使用字符串字符。</p><figure class="ke kf kg kh gu ki"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="4d89" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">这种解决方案可能会导致用户的一些误解，没有任何反馈，这可能被认为是一个bug。您可以在输入元素下面放置一些提示，让用户知道原因。</p><h2 id="15d8" class="kp kq io bd kr ks kt dn ku kv kw dp kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">结论</h2><p id="515b" class="pw-post-body-paragraph ll lm io ln b lo lp jp lq lr ls js lt ky lu lv lw lc lx ly lz lg ma mb mc md ih bi translated">在本文中，我们了解了只接受整数作为输入的两种方法——简单的方法是给出错误反馈，另一种方法是防止输入意外的字符。在大多数情况下，我们可以使用错误反馈的方式，让用户知道原因。这是Codepen.io上的一个演示:</p><figure class="ke kf kg kh gu ki"><div class="bz fq l di"><div class="nn nl l"/></div></figure></div><div class="ab cl no np hs nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ih ii ij ik il"><p id="781f" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated">这是一项实用技能。如果你想在手机上输入只接受整数，你可以用<code class="fe nh ni nj mz b">tel</code>设置type属性，它只会触发数字键盘。</p></div><div class="ab cl no np hs nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ih ii ij ik il"><p id="f1ad" class="pw-post-body-paragraph ll lm io ln b lo me jp lq lr mf js lt ky mg lv lw lc mh ly lz lg mi mb mc md ih bi translated"><em class="nv">更多内容尽在</em> <a class="ae nm" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln ip"> <em class="nv">说白了. io </em> </strong> </a> <em class="nv">。报名参加我们的</em> <a class="ae nm" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln ip"> <em class="nv">免费周报</em> </strong> </a> <em class="nv">。关注我们关于</em> <a class="ae nm" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ln ip"> <em class="nv">推特</em> </strong> </a>，<a class="ae nm" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ln ip"><em class="nv">LinkedIn</em></strong></a><em class="nv">，</em><a class="ae nm" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ln ip"><em class="nv">YouTube</em></strong></a><em class="nv">，</em> <a class="ae nm" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ln ip"> <em class="nv">不和</em> </strong> </a> <em class="nv">。</em></p></div></div>    
</body>
</html>