<html>
<head>
<title>Astro: Evaluating the New Kid on the Block</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿斯特罗:评估街区的新成员</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/astro-evaluating-the-new-kid-on-the-block-c3fec119df1?source=collection_archive---------14-----------------------#2022-11-14">https://javascript.plainenglish.io/astro-evaluating-the-new-kid-on-the-block-c3fec119df1?source=collection_archive---------14-----------------------#2022-11-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2cff7b211c296c8eb70e12c4ac8676f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mKQeT4Juf6jgBH23.png"/></div></div></figure><p id="8be8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">近年来，大规模<a class="ae kt" href="https://www.itmagination.com/blog/what-are-micro-frontend-web-applications-mfes" rel="noopener ugc nofollow" target="_blank">微前端应用(MFEs) </a>和<a class="ae kt" href="https://www.itmagination.com/clients-scope/web-application-development" rel="noopener ugc nofollow" target="_blank">高性能多页面应用(MPAs) </a>的使用和需求不断增加。尽管许多技术爱好者对此类应用程序的一些概念还很陌生，但今天，有大量的工具可以高效、广泛地开发可伸缩的、更高效的前端应用程序。</p><p id="dd49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将关注Astro，这是一个多页面应用程序(MPA)开发框架，它引入了新的令人兴奋的方法，使用一个称为“Astro Islands”的概念来更好地处理前端应用程序中的多个前端模块和独立组件。</p><p id="47bd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将详细介绍使用Astro构建大规模多框架前端项目或者简单地将现有套件、门户或web应用程序迁移到运行在Astro上的MFE架构的一些挑战和可能性。目的是提出新的静态站点生成器作为大、中、小型项目的潜在选择，同时概述潜在的问题和挑战。由于我们将使用Astro集成多个框架，我们将尽量不要深入复杂的细节，以保持阅读简短，同时仍然让您的时间物有所值。</p><h1 id="ae6f" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Astro很少做与同行不同的事情</h1><p id="5989" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Astro中有一些特性和功能值得一提，因为大多数人可能习惯于使用其他技术和架构构建大型应用程序，这里有一些Astro与其他框架和库不同的地方。</p><h1 id="5fea" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">组织、编译和呈现组件的多页方法(MPA)</h1><p id="ce06" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">虽然多页面应用程序(MPAs)并不是一个新概念，但今天的许多web应用程序都是单页面应用程序(spa)，尤其是基于React、Angular或Vue的应用程序。复杂的MFE组件和项目从MPA架构中受益匪浅，因为它降低了复杂性，并在渲染、优化、安全、路由和应用程序的其他方面提高了应用程序的整体性能，因为默认情况下Astro带有服务器端渲染(SSR)并在幕后处理大量进程。这反过来又减少了浏览器做出基本决策的时间。然而，值得注意的是，并非所有的应用程序都受益于MPA架构，在投入时间之前，应该理解两者的区别。</p><h2 id="70ab" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">阿斯特罗群岛</h2><p id="442e" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Astro引入了一个概念，叫做“Astro岛”。该特性和其他功能允许框架将来自不同框架的组件合并到一个页面中，而不会出现一个框架或库影响另一个框架或库的冲突或问题。</p><h2 id="2f64" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">基于默认文件结构的路由支持</h2><p id="3dd0" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">创建项目后，无需任何额外设置的内置默认路由设置。没有额外的配置文件或任何设置来启动和运行基本路由。无需专门定义路由或配置路径；一切都基于您拥有的页面以及它们在各自文件夹中的命名/放置方式。如果需要配置更复杂的路由情况，Astro确实为开发人员提供了一种轻松定制路由的方法。总的来说，仅仅通过使用这个特性就可以加速建立Astro项目的过程。</p><h2 id="7d0e" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">大量集成</h2><p id="b5a5" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Astro为开发人员提供了一系列官方插件，这些插件支持与第三方库、工具、框架和无服务器解决方案的集成。添加对React、Vue和Netlify等工具的支持就像使用Astro命令行工具运行命令一样简单。</p><h2 id="372b" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">Astro命令行界面(CLI)</h2><p id="933a" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">虽然命令行工具不是最创新的东西，但值得一提的是Astro CLI不仅仅是构建和创建新项目。它还为开发人员提供了一些命令，如添加对第三方工具的支持、服务于项目、类型检查和其他用于日常开发的有用命令。</p><h1 id="b4b2" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Astro如何让开发复杂应用程序的过程变得更简单？</h1><ul class=""><li id="4fd1" class="mj mk in jx b jy ls kc lt kg ml kk mm ko mn ks mo mp mq mr bi translated">Astro自带命令行工具Astro CLI，与Angular类似</li><li id="0b9a" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">Astro为他们的项目提供了优秀的、有组织的文档，你可以在这里找到<a class="ae kt" href="https://docs.astro.build/en/getting-started/" rel="noopener ugc nofollow" target="_blank">https://docs.astro.build/en/getting-started/</a></li><li id="75c0" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">Astro提供了多种方式来管理项目中的样式，并额外考虑了动态样式、范围以及管理和填充项目中样式变量的有趣方式。</li><li id="ea63" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">使用文件结构/目录的自动路由确保您做最少的工作来使您的项目路由到位，尽管Astro提供了定制路由和行为的机会，但许多项目可能不需要在这方面做任何事情。</li><li id="563f" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">出色的数据绑定，通过Astro指令、参数和数据注入生成静态和动态内容，在不同的应用领域提供，并完成数组和其他复杂对象的自动渲染。</li><li id="bc4e" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">一个易于使用的API通信接口，通过内置的获取支持来请求内容和数据</li></ul><h1 id="754e" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用Astro有哪些缺点？</h1><ul class=""><li id="43a9" class="mj mk in jx b jy ls kc lt kg ml kk mm ko mn ks mo mp mq mr bi translated"><em class="mx">。astro </em>文件是灵活的、可定制的和可扩展的，以支持多种框架、变量、CSS变量的加载和许多其他事情。当谈到利用阿童木的超能力，你想用。阿斯特罗尽可能多地归档那些<em class="mx">可能需要一点时间来适应的东西。</em></li><li id="868f" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">VS代码完全支持编辑。astro文件；WebStorm和其他一些编辑器还不支持。在撰写本文时(2022年11月4日)。</li><li id="39e5" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">Astro可能还没有正式支持你喜欢的框架、工具或库。需要使用第三方解决方案集成的角形组件就是一个例子</li></ul><p id="d96c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于那些已经熟悉MPA的人来说，如果你理解在MPA中利用cookies、本地和会话存储、缓存、查询/路径变量以及通常只存储你需要的基本内容来处理数据的概念，你会同意我的观点，这一点并不是一个很大的缺点。从架构的角度来看，这也是一件好事，因为它鼓励你的独立组件“真正独立”。</p><h1 id="6cbf" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">建立一个天文项目</h1><p id="944a" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">建立一个Astro项目很容易，部分原因是命令行工具可用。其中一个可用的命令是创建命令，它提供了创建一个新项目的可能性<em class="mx"> npm create astro@latest </em>一旦该命令被执行，一个新的项目就会生成，它为您提供了一个开始工作的模板。如果您不需要starter模板，可以很容易地选择空白项目选项，默认情况下，支持。天文文件，。html文件和自定义web组件从一开始就包含在基本的Astro项目中。</p><h1 id="5662" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">构建大型多框架项目</h1><p id="d3be" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">使用Astro，可以将多个框架合并到一个项目中。这个想法对许多人来说可能会觉得奇怪。这种实现有很多用例，<strong class="jx io">尤其是</strong>包含各种独立功能的产品，或者多个团队开发需要在同一个包装器项目中一起工作的独特功能的产品。在大多数情况下，公司可能使用相似的技术，在其他情况下，在特性的第一次迭代和当前迭代中使用的技术可能有很大的差异。在大多数情况下，当涉及到一个大型产品时，Astro隔离组件的“孤岛”方法有助于正确分离许多独立组件。这个功能是如此强大，以至于我可以说它使得在一个Astro wrapper项目中使用不同的框架/技术成为可能。</p><ul class=""><li id="85fb" class="mj mk in jx b jy jz kc kd kg my kk mz ko na ks mo mp mq mr bi translated">Astro自己的组件</li><li id="b6b1" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">纯Html，CSS，JS文件</li><li id="713f" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">本机Web组件</li><li id="916c" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">发光元件组件</li><li id="025b" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">反应组分</li><li id="e079" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">Vue组件</li><li id="203c" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">角度分量</li></ul><p id="601c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于我们的示例，我们将考虑将使用以下技术的项目捆绑到我们的示例Astro wrapper项目中:</p><p id="3a18" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于Astro组件，我们使用starter模板附带的默认组件，并添加了一些简单的html页面和JS。Astro在渲染自己的组件或处理常规html、css和js文件时没有任何问题。代码样本可以在<a class="ae kt" href="https://github.com/itmaginationdemos/astro-multiframework-demo" rel="noopener ugc nofollow" target="_blank">https://github . com/itmaginationdemos/astro-multi framework-demo</a>上看到。</p><h2 id="592c" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">本机Web组件支持</h2><p id="be01" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">使用<em class="mx"> create-astro </em>命令行工具，一个新项目很快就生成了。由于Astro使用文件结构提供了内置的路由，因此在pages子文件夹下创建了一个新文件夹。</p><p id="db53" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们不需要安装任何额外的插件来使用astro中的自定义web组件，因为它是默认支持的。创建新项目后，我们可以继续创建一个定制的web组件及其html、css和js代码，并将其添加到。页面/web组件子文件夹下的astro文件。</p><pre class="nb nc nd ne gt nf ng nh bn ni nj bi"><span id="36ba" class="nk kv in ng b be nl nm l nn no">--- <br/>import Card from '../../components/Card.astro';<br/>import { CustomWebComponent } from '../../components/custom-web-component.js';<br/>--- <br/>&lt;script src="./src/components/custom-web-component.js" type="module"&gt;&lt;/script&gt;<br/>&lt;main&gt; <br/>  &lt;Card <br/>    href="/" <br/>    title="Back to home page" <br/>    body="navigates back to /pages and loads the default index file"<br/>  /&gt;<br/>  &lt;custom-web-component count="2"&gt;&lt;/custom-web-component&gt; <br/>&lt;/main&gt;</span></pre><p id="c381" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该项目编译成功，我们可以看到组件呈现的功能工作。</p><p id="c1af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注:</strong> <em class="mx">同。只要astro.config.mjs中没有添加其他框架支持，astro文件、Web组件就可以正确导入和渲染。如果为任何框架添加了额外的支持，例如React或Vue，自定义组件就会受到影响，astro会尝试预渲染它，导致它遇到与DOM相关的问题，特别是在使用windows类的方法时。在这种情况下，使用registered标记而不是imported类应该可以永久地解决这个问题。</em></p><p id="9e79" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">结论</strong> <br/>开箱即用的路由工作得非常好，通过属性将数据传递给组件的工作如预期一样。使用内置组件方法也可以。通过注册的标记名以及Astro导入的类来呈现定制组件很容易。</p><h1 id="e044" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Lit元素支持</h1><p id="a1e2" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">使用astro add lit命令，可以将lit元素支持自动添加到项目中。还有一个添加lit支持的手册指南，其中包括astro.config.mjs文件中要添加的包和要更改的配置。Lit元素组件和Astro组件可以在同一个。astro文件以及单独的html文件。</p><pre class="nb nc nd ne gt nf ng nh bn ni nj bi"><span id="2cec" class="nk kv in ng b be nl nm l nn no">--- <br/>import Card from '../../components/Card.astro'; <br/>import GenericStyle from '../../styles/GenericStyle.astro'; <br/>import {CustomLitComponent} from '../../components/custom-lit-component'; <br/>--- <br/>&lt;main&gt; <br/>  &lt;Card <br/>    href="/" <br/>    title="Back to home page" <br/>    body="navigates back to /pages and loads the default index file" <br/>  /&gt; <br/>  &lt;CustomLitComponent count="1"/&gt; <br/>  &lt;CustomLitComponent count="2"/&gt; <br/>  &lt;custom-lit-component count="3"&gt;&lt;/custom-lit-component&gt; <br/>&lt;/main&gt;</span></pre><p id="eeae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:</strong> <em class="mx">对于Lit元素，注释和带注释的属性不能开箱即用，需要额外的努力使它们可压缩。相反，我们的例子中使用了静态属性。</em></p><p id="cb0d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">判决</strong></p><p id="fdb3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">关键特性看起来是开箱即用的，但是，在将组件包含到Astro项目中时，有一些陷阱需要注意，其中大多数都记录在Astro网站上的指南中。我们发现不支持添加现成的注释，需要做一些额外的工作才能让它们工作。</p><h1 id="38fa" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">反应组件支持</h1><p id="055d" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Astro支持<a class="ae kt" href="https://www.itmagination.com/blog/react-18-what-changes-does-it-bring" rel="noopener ugc nofollow" target="_blank">反作用</a>组件。使用MFA框架和您现有的<a class="ae kt" href="https://www.itmagination.com/career-paths/react" rel="noopener ugc nofollow" target="_blank"> react </a>组件非常简单，因为我们可以使用astro add react添加对React的支持，它设置了使用React组件所需的一切。</p><pre class="nb nc nd ne gt nf ng nh bn ni nj bi"><span id="f3da" class="nk kv in ng b be nl nm l nn no">--- <br/>import Card from '../../components/Card.astro';<br/>import GenericStyle from '../../styles/GenericStyle.astro';<br/>import { CustomReactTodoApp } from '../../components/custom-react-component';<br/>--- <br/>&lt;main&gt; <br/>  &lt;Card <br/>    href="/" <br/>    title="Back to home page" <br/>    body="navigates back to /pages and loads the default index file"<br/>  /&gt; <br/>  &lt;CustomReactTodoApp count="1" client:idle="react"&gt;&lt;/CustomReactTodoApp&gt; <br/>  &lt;CustomReactTodoApp count="2"&gt;&lt;/CustomReactTodoApp&gt; <br/>  &lt;CustomReactTodoApp client:only="react"&gt;&lt;/CustomReactTodoApp&gt; <br/>&lt;/main&gt;</span></pre><p id="9691" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:</strong> <em class="mx">您可能需要禁用使用客户端的服务器端呈现:仅在特定情况下='react ',其中组件需要以服务器端呈现不支持的动态方式传递props或呈现对内部组件的更新。这些情况可能很少见，甚至不会持续太久，因为Astro开发人员正在积极改进平台。</em></p><p id="1812" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">判决</strong></p><p id="7f04" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">似乎开发人员对React集成非常关注，因为React组件可以与Astro无缝协作，并且目前存在的错误/集成挑战最少。对于react样本设置过程的大部分，react功能都很容易实现，如上面的Todo列表示例所示。</p><h1 id="fd4c" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Vue组件支持</h1><p id="9c04" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">正如Lit或React的情况一样，添加<a class="ae kt" href="https://www.itmagination.com/career-paths/vue" rel="noopener ugc nofollow" target="_blank"> Vue </a>是一个无摩擦的过程。你所需要做的就是执行astro add vue命令，对vue组件的支持将被添加。在中使用Vue组件。天文文件和独立的。基于下面的例子，Astro项目中的html文件是成功的。</p><pre class="nb nc nd ne gt nf ng nh bn ni nj bi"><span id="d3df" class="nk kv in ng b be nl nm l nn no">--- <br/>import Card from '../../components/Card.astro'; <br/>import GenericStyle from '../../styles/GenericStyle.astro'; <br/>import CustomVueComponent from '../../components/CustomVueComponent.vue' <br/>--- <br/>&lt;main&gt; <br/>  &lt;Card <br/>    href="/" <br/>    title="Back to home page" <br/>    body="navigates back to /pages and loads the default index file"<br/>  /&gt; <br/>  &lt;CustomVueComponent count="1" client:visible&gt; &lt;/CustomVueComponent&gt; <br/>&lt;/main&gt;</span></pre><p id="7d31" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">判决</strong></p><p id="b31b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">支持Vue组件、特性和方法，并且集成Vue和Astro没有什么大问题。</p><h1 id="0725" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">角形部件支架</h1><p id="578f" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">astro没有官方插件来桥接Astro的<a class="ae kt" href="https://www.itmagination.com/career-paths/angular" rel="noopener ugc nofollow" target="_blank"> Angular </a>组件，但Astro官方网站上列出了一个名为analogjs的第三方插件。这个插件允许我们将角度组件集成到我们的astro项目中，使用内置命令<em class="mx">Astro add @ analogjs/Astro-Angular</em>我们可以将对角度组件的支持添加到我们的Astro wrapper项目中。</p><p id="c175" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">乍一看，似乎angular包在安装时添加了最多数量的依赖项，这可能部分是因为angular模块/组件不是以原始/未编译的形式设计为可拆卸并添加到第三方项目中的，因此需要组成完整功能angular项目的所有附加依赖项，这也可能与通过第三方框架/库(analogjs)提供支持的事实有关，并且由于库的构建方式，它需要所有附加包。由于在本文中我们不涉及更小的细节，我们将把想法留给评论。</p><p id="f54a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在Astro中创建和使用Angular组件需要添加一个TypeScript配置文件<em class="mx"> tsconfig.app.json </em>，组件代码也要用<em class="mx">编写。ts </em>文件，因为这是此类项目的默认设置。在这里添加TS支持还表明Astro wrapper项目中的其他组件也可以用TypeScript编写，如果它们的配置正确的话。</p><p id="ccf0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">初始设置后，角度组件的变化检测不起作用,“astro run dev”命令停止工作。经过进一步调查，我们发现:</p><p id="d951" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">1.与没有Angular的Astro相比，Angular + Astro项目似乎更慢，这是你设法让它工作的时候，正如Brandon Roberts【https://github.com/brandonroberts/angular-astro-islands】T4的例子所示</p><p id="fe51" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.Astro run dev命令在尝试访问网站时出现错误，例如内存不足，这发生在使用多个框架但在一个项目中仅使用Angular和Astro无法重现的情况下。</p><pre class="nb nc nd ne gt nf ng nh bn ni nj bi"><span id="3eb0" class="nk kv in ng b be nl nm l nn no">--- <br/>import Card from '../../components/Card.astro';<br/>import GenericStyle from '../../styles/GenericStyle.astro';<br/>--- <br/>&lt;script src="/angular_assets/runtime.f12b6390b6dfe9bc.js" type="module"&gt;&lt;/script&gt;<br/>&lt;script src="/angular_assets/polyfills.cd4b02e8647d32c8.js" type="module"&gt;&lt;/script&gt;<br/>&lt;script src="/angular_assets/main.28c576b20400a3a6.js" type="module"&gt;&lt;/script&gt; <br/><br/>&lt;main&gt; <br/>  &lt;Card <br/>    href="/" <br/>    title="Back to home page" <br/>    body="navigates back to /pages and loads the default index file"<br/>  /&gt; <br/>  &lt;app-root count="1"&gt;&lt;/app-root&gt; <br/>&lt;/main&gt;</span></pre><p id="ca7f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:</strong> <em class="mx">如brandon roberts的文章所述，角度积分支持渲染独立组件。对于在angular framework中独立组件支持的开发和发布之前构建的所有Angular项目，在项目可以与Astro紧密结合之前还有工作要做。</em></p><p id="8eb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">判决结果</strong></p><p id="dd17" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">角度分量。astro文件有点功能性。除了明显的挑战之外，在astro中使用angular确实是可能的，但是如果你的astro项目还将托管来自其他库的组件，那么在当前的设置中不推荐使用angular。目前，在多框架天文项目中，Angular框架是最大的挑战。可能有一些方法可以解决这个问题，比如构建最终的Angular项目，并将其作为编译后的html、js和css文件添加到Astro项目中，这些文件在我们的示例中可以正常工作，但是试图直接使用组件，<strong class="jx io">尤其是</strong>当使用一个利用多个框架的健壮项目时，会带来一些挑战和困难。</p><p id="1060" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">值得注意的是，Angular并不是在集成过程中面临挑战的唯一框架，正如在以前的框架中看到的那样，迁移和添加功能的过程中总会有一些缺点，但迄今为止，Astro中对大型应用程序的TypeScript框架的支持是最没有希望的。</p><p id="60e7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，通过使用新的静态站点生成器，我们解决了JAMStack上的角度问题。Scully已经解决了这个问题，尽管Astro.js给了我们更多的灵活性。</p><h2 id="8272" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">在一页上使用所有组件</h2><p id="e8fe" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">在实现了各种框架之后，将它们组合起来用于Astro项目中的任何地方是最容易的部分。组件被导入到。astro文件和该文件的html部分中引用的自定义元素标记。构建或渲染这个没有问题。astro文件，使以这种方式使用Astro的裁决是积极的。</p><pre class="nb nc nd ne gt nf ng nh bn ni nj bi"><span id="c22c" class="nk kv in ng b be nl nm l nn no">--- <br/>import Card from '../../components/Card.astro'; <br/>import GenericStyle from '../../styles/GenericStyle.astro'; <br/>import {CustomLitComponent} from '../../components/custom-lit-component'; <br/>import AngularComponentWrapper from '../../components/AngularComponentWrapper.astro';<br/>import { CustomReactTodoApp } from '../../components/custom-react-component'; <br/>import CustomVueComponent from '../../components/CustomVueComponent.vue' <br/>--- <br/>&lt;script src="./src/components/custom-web-component.js" type="module"&gt;&lt;/script&gt; <br/>&lt;main&gt; <br/>  &lt;h1&gt;All components in one project&lt;/h1&gt; <br/>  &lt;div class="component-block"&gt; <br/>    &lt;Card <br/>      href="https://docs.astro.build/" <br/>      title="Astro Component" <br/>      body="Learn how Astro works and explore the official API docs."<br/>    /&gt; <br/>    &lt;AngularComponentWrapper count="1"/&gt; <br/>    &lt;CustomVueComponent count="1" client:visible/&gt; <br/>    &lt;CustomReactTodoApp count="1" client:idle="react"/&gt; <br/>    &lt;CustomLitComponent count="1"/&gt; <br/>    &lt;custom-web-component&gt;&lt;/custom-web-component&gt; <br/>  &lt;/div&gt; <br/>&lt;/main&gt;</span></pre><h1 id="6871" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="0df7" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Astro像冠军一样处理了大部分集成工作，展示了迄今为止制作平台的出色工程技术。坦率地说，我们对结果印象深刻。</p><p id="8926" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在中使用组件有一些不同。astro文件并在。html文件。其中一个区别是将组件从JS或自己的框架文件导入到。html文件，这对每个项目都是一个挑战，因为它们要么需要作为Astro支持的模块加载，要么保存在公共文件夹中，以便能够通过引用源代码(例如使用script标签)正确导入它们。</p><p id="9d2f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这可能会对项目组织造成限制，尽管它可能是可定制的，但是大多数组件在它们自己的html文件中呈现的示例现在都以单个组件为特色，所有需要的代码都捆绑在。html文件。我们会说这种限制是设计出来的，因为岛的概念反映在这种行为中，并迫使开发人员通过相关代码的组织和逻辑的正确封装来确保组件尽可能独立。</p><p id="5993" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一般来说，我们建议使用。astro文件，以减少正确配置这些项目以符合Astro所需的工作量。非常坦率地说，您可以放弃所有其他JS库和框架，只使用Astro的原生文件，尽管有时情况并非如此。</p><p id="db28" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Astro在示例项目的整个开发过程中展示了很好的前景，希望它得到更多的采用和开发时间。为这个项目制作的代码样本可以在https://github . com/itmaginationdemos/astro-multi framework-demo找到。反馈是最受欢迎的，你可以通过Twitter<a class="ae kt" href="https://twitter.com/zinoadidi" rel="noopener ugc nofollow" target="_blank">@ zino addi</a>联系到本文和演示的作者。</p><p id="e964" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">‍</p></div><div class="ab cl np nq hr nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ig ih ii ij ik"><p id="8fbd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mx">最初发表于</em><a class="ae kt" href="https://www.itmagination.com/blog/astro-micro-frontends" rel="noopener ugc nofollow" target="_blank"><em class="mx">【https://www.itmagination.com】</em></a><em class="mx">。</em></p><p id="31dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mx">更多内容看</em> <a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mx">说白了。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mx">免费周报</em> </strong> </a> <em class="mx">。关注我们上</em><a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mx">Twitter</em></strong></a>，<a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mx">LinkedIn</em></strong></a><strong class="jx io"><em class="mx">，</em></strong><a class="ae kt" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mx">YouTube</em></strong></a><strong class="jx io"><em class="mx">，</em> </strong> <em class="mx">和<a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mx">不和</em> </strong> </a></em> </strong> <em class="mx">对成长黑客感兴趣？检查出</em> </a><a class="ae kt" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mx">电路</em> </strong> </a> <strong class="jx io"> <em class="mx">。</em>T75】</strong></p></div></div>    
</body>
</html>