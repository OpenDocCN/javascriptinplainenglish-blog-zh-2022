<html>
<head>
<title>JavaScript Anti-Patterns We Do Every Day</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们每天都在做的JavaScript反模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-anti-patterns-we-do-every-day-3d0086e2910?source=collection_archive---------0-----------------------#2022-09-07">https://javascript.plainenglish.io/javascript-anti-patterns-we-do-every-day-3d0086e2910?source=collection_archive---------0-----------------------#2022-09-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="fa8a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript开发人员经常犯的最常见错误——您应该避免这些错误，以编写干净、合理和正确的代码。</h2></div><p id="85c2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">编写代码很容易，但编写干净、合理和正确的代码是一种棘手的技能，我们需要通过熟悉大量代码和最佳实践来发展。在本文中，我们将看看JavaScript开发人员最常犯的错误。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/c95b916c24cfe76a7c3883a78844d6a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K3waZ1VC1oVeYVsMCoyb9A.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Credits to <a class="ae lo" href="https://performancemanagementcompanyblog.wordpress.com/" rel="noopener ugc nofollow" target="_blank">Performance Management Company Blog</a></figcaption></figure><h1 id="935a" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">什么是反模式？</h1><p id="27ac" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">想象一下，你是一名战争中的士兵&amp;你应该用枪和与军队相关的东西杀死你的敌人，但你选择用剪刀杀死你的敌人，最终你可能杀死你的敌人，实现你的目标和加入战争的理由，但你以错误的方式这样做！你让这项工作变得更难、更乱、更没有条理。</p><p id="f591" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这在软件工程世界中几乎是一样的，你可能每天都在做这件事，却没有真正被告知，我将帮助你在JS中找到这些反模式。</p><p id="6f14" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请注意，我们不能在这里指出JS的所有反模式，因为它实际上是基于你和你是多么糟糕和不研究的家伙。如果你研究得不够好，你的代码库中会有越来越多的反模式。:)</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h2 id="27a3" class="mt lq in bd lr mu mv dn lv mw mx dp lz kl my mz mb kp na nb md kt nc nd mf ne bi translated">1.JavaScript循环</h2><p id="7837" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">我可以肯定地说，我们在代码中犯的最常见的反模式与循环相关的事情和错误地选择<strong class="ke io"> for…of、forEach和map有关。</strong></p><p id="c75a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们从一个糟糕的JS地图用法开始:</p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="bb37" class="mt lq in ng b gy nk nl l nm nn">[1,2,3].map(i =&gt; console.log(`Logged to console ${i} times`))</span><span id="7785" class="mt lq in ng b gy no nl l nm nn">// log<br/>Logged to console 1 times<br/>Logged to console 2 times<br/>Logged to console 3 times</span></pre><p id="64f9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">看，我们从这个循环中得到了正确的输出和行为！那到底怎么了？</p><p id="8116" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">JavaScript map是一个数组方法，用于循环遍历一个数组，并将一个数组作为输出和结果返回给您！根据MDN的描述，`<strong class="ke io"/><code class="fe np nq nr ng b"><strong class="ke io">map()</strong></code><strong class="ke io">方法创建一个新的数组，其中填充了对调用数组中的每个元素调用所提供的函数的结果。这意味着当你想要一个数组作为输出时，你可以像下面的例子一样使用这个方法:</strong></p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="1e32" class="mt lq in ng b gy nk nl l nm nn">const myArray = [1, 4, 9, 16];</span><span id="99cb" class="mt lq in ng b gy no nl l nm nn">const myMap = myArray.map(x =&gt; x * 2);</span><span id="b9b6" class="mt lq in ng b gy no nl l nm nn">console.log(myMap);<br/>// expected output: Array [2, 8, 18, 32]</span></pre><p id="7d77" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么登录控制台5次是什么模式呢？当你在思考这个问题的时候，你记起了你以前在代码中记忆和使用过的一个方法或HOF，请简单地搜索和阅读官方网站的文档，看看这个方法的目的是什么，以及如何以你能做到的最好的方式使用它，例如，我们可以简单地用JavaScript中的for…of登录控制台</p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="00f3" class="mt lq in ng b gy nk nl l nm nn">for (let step = 0; step &lt; 3; step++) {<br/>  // Runs 3 times<br/>  <!-- -->console.log(`Logged to console ${step + 1} times`)<br/>}</span><span id="255e" class="mt lq in ng b gy no nl l nm nn">// log<br/>Logged to console 1 times<br/>Logged to console 2 times<br/>Logged to console 3 times</span></pre></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h2 id="f37e" class="mt lq in bd lr mu mv dn lv mw mx dp lz kl my mz mb kp na nb md kt nc nd mf ne bi translated">2.常量、变量和let</h2><p id="71de" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">看起来很简单，不是吗？如果您在使用它们之前没有阅读它们的用途和文档，请确保您在这方面也犯了一个错误。</p><p id="ab13" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">与循环部分不同，这个主题更容易学习和适应最佳实践。</p><p id="7658" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先是棘手的<code class="fe np nq nr ng b">var</code>关键字，该语句将声明一个函数作用域或全局作用域的变量，由于提升行为，不建议在局部作用域变量中使用它。并且它们是在任何代码执行之前被处理的，所以您可能会犯错误，直到应用程序运行时才注意到它们。这可能需要几个小时的调试，因为你不会得到一个未定义的错误，而是一个未定义的变量值！</p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="dfe5" class="mt lq in ng b gy nk nl l nm nn">{ <br/>   var greeting= "Hello" <br/>}</span><span id="b9c6" class="mt lq in ng b gy no nl l nm nn">console.log(greeting);</span><span id="db15" class="mt lq in ng b gy no nl l nm nn">// log<br/>Hello !!!!!!!!</span></pre><p id="977a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那怎么办呢？这里只需简单地使用块范围的关键字，如<strong class="ke io"> const </strong>和<strong class="ke io"> let。</strong></p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="16ad" class="mt lq in ng b gy nk nl l nm nn">{ <br/>   let greeting= "Hello" <br/>}</span><span id="1e66" class="mt lq in ng b gy no nl l nm nn">console.log(greeting);</span><span id="ae5d" class="mt lq in ng b gy no nl l nm nn">// log<br/>Uncaught ReferenceError: greetings is not defined</span></pre><p id="4cda" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">好了，现在我们从var开始，还没轮到<code class="fe np nq nr ng b">const</code>和<code class="fe np nq nr ng b">let</code>，这里的规则很简单，只是请不要使用<code class="fe np nq nr ng b">let</code>来声明不应该在将来编辑和更改的变量，你可能会说，<strong class="ke io">“好吧，我不会给它赋值和编辑，但为什么不在这里使用</strong> <code class="fe np nq nr ng b"><strong class="ke io">let</strong></code> <strong class="ke io">？”这正是人们在代码中生成反模式的原因。</strong></p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="e8e0" class="mt lq in ng b gy nk nl l nm nn">// Correct<br/>const THIS_VARIABLE_WILL_NOT_CHANGE = "JS is not weird";</span><span id="b3ed" class="mt lq in ng b gy no nl l nm nn">// Wrong<br/>let THIS_VARIABLE_WILL_NOT_CHANGE = "JS is not weird";</span></pre><h2 id="ef37" class="mt lq in bd lr mu mv dn lv mw mx dp lz kl my mz mb kp na nb md kt nc nd mf ne bi translated">3.U <code class="fe np nq nr ng b">nnecessary nesting</code></h2><p id="27fb" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">这个话题有点复杂，在某些方面可能有点抽象，因为我们可能在不同的条件下面临这个错误，但让我们看看其中的一些！</p><p id="02b4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="ke io">承诺下使用许多嵌套步骤可能会使你的代码变得混乱和反模式。让我用一个例子来说明这一点:</strong></p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="07c6" class="mt lq in ng b gy nk nl l nm nn">// Bad example! Spot 3 mistakes!<br/><br/>doSomething()<br/>  .then(function (result) {<br/>    // Forgot to return promise from inner chain<br/>    // unnecessary nesting</span><span id="8f78" class="mt lq in ng b gy no nl l nm nn">    doSomethingElse(result)<br/>      .then((newResult) =&gt; doThirdThing(newResult));<br/>  })<br/>  .then(() =&gt; doFourthThing());<br/>// Forgot to terminate chain with a catch!</span></pre><p id="f9f7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们让这个错误的例子看起来正确并且模式友好:</p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="c02d" class="mt lq in ng b gy nk nl l nm nn">doSomething()<br/>  .then(function (result) {<br/>    return doSomethingElse(result);<br/>  })<br/>  .then((/* result ignored */) =&gt; doFourthThing())<br/>  .catch((error) =&gt; console.error(error));</span></pre><p id="4e82" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以从MDN文档中了解更多<a class="ae lo" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises#common_mistakes" rel="noopener ugc nofollow" target="_blank">承诺常见错误。</a></p><p id="5476" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当你忘记JavaScript中的<code class="fe np nq nr ng b">return</code>和<code class="fe np nq nr ng b">break</code>时，通常会发生其他不必要的嵌套事情！</p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="598b" class="mt lq in ng b gy nk nl l nm nn">function is_old_aged(age) {<br/>  if (age) {<br/>     if (age &gt; 60) { <br/>      return 'old' <br/>     } else {<br/>      return 'young'<br/>     };<br/>  }<br/>}</span></pre><p id="ace0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我讨厌这些嵌套层次的条件，因为你的代码在2层嵌套条件后会变得很糟糕，而且没有人能肯定地读懂你的代码，但是该怎么办呢？</p><pre class="kz la lb lc gt nf ng nh ni aw nj bi"><span id="6a9e" class="mt lq in ng b gy nk nl l nm nn">function is_old_aged(age) {</span><span id="d176" class="mt lq in ng b gy no nl l nm nn">  if (!age) {<br/>     return false;<br/>  }</span><span id="7f0e" class="mt lq in ng b gy no nl l nm nn">  return age &gt; 60 ? 'old' : 'young'<br/>}</span></pre><p id="c661" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">干净多了，不是吗？</p><h1 id="b6df" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">包扎</h1><p id="3932" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">正如我在开始时提到的，本文的主要观点并不是指出编写JavaScript代码的所有错误和反模式，而是鼓励您在编写代码之前研究、阅读并渴望了解编程语言模式的主要用途。您可以通过从可靠来源或官方文档中学习来做到这一点。</p><p id="43b0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以在<a class="ae lo" href="https://developer.mozilla.org/en-US/" rel="noopener ugc nofollow" target="_blank"> MDN官方网站</a>上阅读更多关于所有JavaScript函数和方法的内容。</p><p id="e6ea" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以通过下面的链接阅读我的其他文章:</p><p id="fa09" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">加速JS:</p><div class="ns nt gp gr nu nv"><a rel="noopener  ugc nofollow" target="_blank" href="/how-i-make-my-javascript-applications-2-times-faster-dbbfd7e5ceec"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd io gy z fp oa fr fs ob fu fw im bi translated">我如何让我的JavaScript应用程序速度提高两倍</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">在本文中，我们将快速浏览一下可以用来尽快创建web应用程序的技巧。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oe l"><div class="of l og oh oi oe oj li nv"/></div></div></a></div><p id="1f3b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">核心网络要素:</p><div class="ns nt gp gr nu nv"><a rel="noopener  ugc nofollow" target="_blank" href="/core-web-vitals-boosting-your-websites-speed-a2ea4d595f0d"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd io gy z fp oa fr fs ob fu fw im bi translated">核心网站要害&amp;提高网站速度！</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">在这篇文章中，我们将快速浏览一下web关键点&amp;使用它们来提高我们的Web应用程序性能</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oe l"><div class="ok l og oh oi oe oj li nv"/></div></div></a></div></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="3ea3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ol">更多内容请看</em><a class="ae lo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="ol">plain English . io</em></strong></a><em class="ol">。报名参加我们的</em> <a class="ae lo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="ol">免费周报</em> </strong> </a> <em class="ol">。关注我们关于</em><a class="ae lo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="ol">Twitter</em></strong></a><a class="ae lo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="ol">LinkedIn</em></strong></a><em class="ol"/><a class="ae lo" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="ol">YouTube</em></strong></a><em class="ol"/><a class="ae lo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="ol">不和</em> </strong> </a> <em class="ol">。</em></p></div></div>    
</body>
</html>