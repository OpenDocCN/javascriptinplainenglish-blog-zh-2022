<html>
<head>
<title>How to Build a Fully Functional HTML Form Using JavaScript, Node.js, Express, and Nodemailer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用JavaScript、Node.js、Express和Nodemailer构建一个功能完整的HTML表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/contact-form-using-javascript-6bfb562d382d?source=collection_archive---------3-----------------------#2022-01-25">https://javascript.plainenglish.io/contact-form-using-javascript-6bfb562d382d?source=collection_archive---------3-----------------------#2022-01-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0760" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第1部分:关于如何使用JavaScript、Node.js、Express和Nodemailer构建功能完整的HTML表单的指南。</h2></div><p id="0517" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">先决条件</strong>:带有所需字段的HTML表单，并使用CSS或任何选择的样式框架/库对其进行样式化以弹出它。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/918f229c71e6b9a9627b7c0220394175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qvyqD4tB9ykxlyH4ye9fFA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Form written with html &amp; css</figcaption></figure><p id="c03a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将跳过HTML &amp; CSS部分，直接进入我们需要完成的步骤。我们走吧！</p><p id="f46a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">甲方:客户端</strong></p><ul class=""><li id="fe51" class="lo lp in ke b kf kg ki kj kl lq kp lr kt ls kx lt lu lv lw bi translated">从输入字段和选定字段读取值— JavaScript(客户端)。— <em class="lx">如果未填写必填字段，提示用户填写— HTML现在通过使用</em> <code class="fe ly lz ma mb b"><em class="lx">required</em></code> <em class="lx">属性来处理此问题。通过检查输入的格式来验证它，例如电子邮件应该有</em> <code class="fe ly lz ma mb b"><em class="lx">@</em></code> <em class="lx"> — HTML通过使用</em> <code class="fe ly lz ma mb b"><em class="lx">type=email</em></code>来处理它</li><li id="d72f" class="lo lp in ke b kf mc ki md kl me kp mf kt mg kx lt lu lv lw bi translated">检测用户动作，即点击按钮</li><li id="96c3" class="lo lp in ke b kf mc ki md kl me kp mf kt mg kx lt lu lv lw bi translated">将数据从客户端表单发送到服务器</li></ul><p id="4315" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">B部分:服务器端</p><ul class=""><li id="7e8f" class="lo lp in ke b kf kg ki kj kl lq kp lr kt ls kx lt lu lv lw bi translated">从客户端接收数据</li><li id="5c8a" class="lo lp in ke b kf mc ki md kl me kp mf kt mg kx lt lu lv lw bi translated">将数据从服务器发送到电子邮件</li><li id="747e" class="lo lp in ke b kf mc ki md kl me kp mf kt mg kx lt lu lv lw bi translated">在客户端显示成功消息</li></ul><p id="c65f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lx">链接代码文件:</em></p><p id="dc34" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为我们使用的是javascript，所以让我们将脚本移动到一个单独的文件夹，并拥有脚本文件，以便分离关注点。<code class="fe ly lz ma mb b">js/script.js</code></p><p id="4657" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">链接这个脚本文件和它在body标签中的完整路径，在<code class="fe ly lz ma mb b">contact.html</code>文件body标签关闭之前的底部。</p><p id="e7ad" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">&lt;script src="assets/js/script.js"&gt;&lt;/script&gt;</code></p><p id="7b2b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">A部分—客户端:从浏览器读取字段中键入的值</strong></p><p id="ed1f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们如何使用JavaScript与浏览器交互？</p><p id="5d72" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">浏览器是窗口对象。我们需要从表单对象访问HTML输入。</p><p id="602d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们还希望在用户提交表单时，在单击发送按钮时获取输入值。</p><p id="b96e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">1.<em class="lx">在按钮标签</em>上创建一个函数 <code class="fe ly lz ma mb b"><em class="lx">sendQuote</em></code> <em class="lx">，在按钮点击时触发。该函数还将使用Fetch Web API将邮件发送到表单元素的action属性中的URL <code class="fe ly lz ma mb b">send</code>。</em></p><p id="ab0c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.<em class="lx">为<code class="fe ly lz ma mb b">contact.html</code>文件中联系表</em>中的每个值赋予id，我们需要使用id属性访问这些值:</p><p id="c4d1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">id="contact-form", id="name", id="email", etc</code></p><p id="2290" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">示例:</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="6ac3" class="ml mm in mb b gy mn mo l mp mq">&lt;input type="text" name="name" id="name" value="" placeholder="Naam" required/&gt;</span></pre><p id="212f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.<em class="lx">在输入元素</em>中添加 <code class="fe ly lz ma mb b"><em class="lx">name</em></code> <em class="lx">属性。这些表现为键，而<code class="fe ly lz ma mb b">value</code>作为javascript要获取的属性将是属性。我们的数据存储在从DOM读取的对象中。</em></p><p id="3594" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.<em class="lx">添加表单标签属性</em> <code class="fe ly lz ma mb b">method='post'</code>，<code class="fe ly lz ma mb b">action='send'</code>是我们要发送数据到的<strong class="ke io"> <em class="lx"> URL </em> </strong>，<code class="fe ly lz ma mb b">enctype='multipart/form-data'</code>是要发送数据的格式。</p><p id="93d7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">注意</strong>:这个“发送”将被提供给获取web API的基本URL <code class="fe ly lz ma mb b">https://website.com</code>。</p><p id="5fdd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">属性值执行以下操作:</p><p id="0ae2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">action</code>属性将指示向何处(URL/route)发送(张贴)您提交的数据。</p><p id="7d0d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">post</code>是<strong class="ke io">匿名发送</strong>数据(即数据不会在浏览器URL中显示为查询字符串)的默认方法，因为<code class="fe ly lz ma mb b">post</code>请求要求服务器在提交网站表单时接受请求正文中包含的数据。<code class="fe ly lz ma mb b">get</code>方法使用查询字符串。<code class="fe ly lz ma mb b">get</code>在<strong class="ke io">获取</strong>数据时使用，不发送。</p><p id="efa9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">enctype</code>是默认的<a class="ae mr" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/enctype" rel="noopener ugc nofollow" target="_blank">类型的内容</a>向服务器提交表单。</p><p id="5165" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">5.<em class="lx">创建一个按钮作为输入</em>，它位于表单元素内部，带有用于提交表单的<code class="fe ly lz ma mb b">type='submit'</code>和作为该输入值的<code class="fe ly lz ma mb b">value='Versturen'</code>。</p><p id="e8cc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">6.<em class="lx">为提交类型输入/按钮</em>制作2个属性:</p><p id="99f0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">I .来自全局EventHandler的<code class="fe ly lz ma mb b">onclick</code>属性，用于处理按钮元素上的<code class="fe ly lz ma mb b">click</code>事件，在<code class="fe ly lz ma mb b">contact.html</code>文件中。当用户提交表单时会发生此事件。</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="a6f9" class="ml mm in mb b gy mn mo l mp mq">&lt;li&gt;&lt;input type="submit" value="Versturen" class="primary" onclick="sendQuote();" /&gt;&lt;/li&gt;</span></pre><p id="2913" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">二。从类型文本输入的名称属性中读取id值的<code class="fe ly lz ma mb b">value</code>属性。这是它在脚本文件中的使用方式:</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="2feb" class="ml mm in mb b gy mn mo l mp mq">let nameElement = document.getElementById("name");<br/>let nameValue = nameElement.value;<br/>console.log(nameValue);</span></pre><p id="212b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，onclick函数使用<code class="fe ly lz ma mb b">names</code>属性收集<code class="fe ly lz ma mb b">input</code>值。</p><p id="f66b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe ly lz ma mb b">contact.html</code>中，你的表单元素应该是这样的:</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="ab98" class="ml mm in mb b gy mn mo l mp mq">&lt;form id="contact-form" method="post" action="send" enctype="multipart/form-data"&gt;</span><span id="08a1" class="ml mm in mb b gy ms mo l mp mq">&lt;input type="text" name="name" id="name" value="" placeholder="Naam" required/&gt;</span><span id="ee28" class="ml mm in mb b gy ms mo l mp mq">&lt;input type="email" name="email" id="email" value="" placeholder="E-mail" required/&gt;</span><span id="34b8" class="ml mm in mb b gy ms mo l mp mq">&lt;textarea name="message" id="message" placeholder="Voer uw bericht in" rows="6"&gt;&lt;/textarea&gt;</span><span id="d58b" class="ml mm in mb b gy ms mo l mp mq">&lt;ul class="actions"&gt;<br/>&lt;li&gt;&lt;input type="submit" value="Versturen" class="primary" onclick="sendQuote();" /&gt;&lt;/li&gt;<br/>&lt;li&gt;&lt;input type="reset" value="Resetten" /&gt;&lt;/li&gt;<br/>&lt;/ul&gt;</span><span id="9819" class="ml mm in mb b gy ms mo l mp mq">&lt;/form&gt;</span></pre><p id="6566" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">7.<em class="lx">处理POST请求— </em>发出一个HTTP调用请求，从表单向服务器发送(POST)数据，这样服务器就能够从后端的客户机接收(获取)数据。</p><ul class=""><li id="ca8c" class="lo lp in ke b kf kg ki kj kl lq kp lr kt ls kx lt lu lv lw bi translated">可以用JavaScript 做出<a class="ae mr" href="https://www.freecodecamp.org/news/here-is-the-most-popular-ways-to-make-an-http-request-in-javascript-954ce8c95aaa/" rel="noopener ugc nofollow" target="_blank">不同类型的HTTP请求:用ajax配合JavaScript或jquery，fetch web API，axios库，</a></li><li id="c758" class="lo lp in ke b kf mc ki md kl me kp mf kt mg kx lt lu lv lw bi translated">这里，我们将使用fetch API向服务器发送数据。所以在<code class="fe ly lz ma mb b">script.js</code>函数中添加这个，以便将表单值发送到我们的服务器</li></ul><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="34b2" class="ml mm in mb b gy mn mo l mp mq">fetch(url, { // returns a promise<br/>method: "post", // specify method as post<br/>body: mail, // specify body as mail to send to request<br/>})<br/>.then(<em class="lx">response</em> <em class="lx">=&gt;</em> response.json()) // converting promise to JSON<br/>.then(<em class="lx">res</em> <em class="lx">=&gt;</em> console.log(res)) // view the response from server<br/>.catch(<em class="lx">error=&gt;</em>console.log(error))</span></pre><p id="82f8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">8.<em class="lx">在脚本文件中创建一个名为</em> <code class="fe ly lz ma mb b"><em class="lx">mail</em></code>的对象，存储不同的值，这样我们就可以将它们打包发送到服务器。</p><p id="8b14" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe ly lz ma mb b">script.js</code>中，你的函数应该是这样的:</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="0b55" class="ml mm in mb b gy mn mo l mp mq"># Listen to event on form when user clicks SendQuote</span><span id="da11" class="ml mm in mb b gy ms mo l mp mq"><em class="lx">function</em> sendQuote() {<br/><em class="lx">let</em> formElement = document.getElementById("contact-form");</span><span id="47d1" class="ml mm in mb b gy ms mo l mp mq"># Get values from the form<br/><em class="lx">let</em> nameElement = document.getElementById("name");<br/><em class="lx">let</em> nameValue = nameElement.value;</span><span id="f633" class="ml mm in mb b gy ms mo l mp mq">console.log('name: ', nameValue);</span><span id="fa68" class="ml mm in mb b gy ms mo l mp mq"><em class="lx">let</em> emailElement = document.getElementById("email");<br/><em class="lx">let</em> emailValue = emailElement.value;</span><span id="80f9" class="ml mm in mb b gy ms mo l mp mq">console.log('email: ', emailValue);</span><span id="a754" class="ml mm in mb b gy ms mo l mp mq"><em class="lx">let</em> gebouwElement = document.getElementById("gebouw"); // error reading value using value property</span><span id="1438" class="ml mm in mb b gy ms mo l mp mq"><em class="lx">let</em> messageElement = document.getElementById("message");<br/><em class="lx">let</em> messageValue = messageElement.value;</span><span id="cb06" class="ml mm in mb b gy ms mo l mp mq">console.log('message: ', messageValue);</span><span id="434e" class="ml mm in mb b gy ms mo l mp mq"># Store input values in an object<br/><em class="lx">const</em> mail = { nameValue, emailValue, messageValue };<br/>console.log('function works: type mail below ');</span><span id="e9d5" class="ml mm in mb b gy ms mo l mp mq">console.log(mail);</span><span id="6799" class="ml mm in mb b gy ms mo l mp mq">// send data from form to server using base url localhost:3000 <br/>// or https://gloriousclean.be/contact.html</span><span id="4cbf" class="ml mm in mb b gy ms mo l mp mq">// const url = 'https://gloriousclean.be/contact.html/send';<br/><em class="lx">const</em> url = 'http://localhost:3000/contact.html/send'</span><span id="7ebe" class="ml mm in mb b gy ms mo l mp mq">// const otherPara = {<br/>//   headers: {<br/>//     "content-type":"application/json"; charset=UTF-8<br/>//   },<br/>//   body: data,<br/>//   method: "POST"<br/>// };</span><span id="1db0" class="ml mm in mb b gy ms mo l mp mq">fetch(url, { // returns a promise<br/>method: "post", // specify method as post<br/>body: mail, // specify body as mail to send to request<br/>})</span><span id="dc53" class="ml mm in mb b gy ms mo l mp mq">.then(<em class="lx">response</em> <em class="lx">=&gt;</em> response.json()) // converting promise to JSON<br/>.then(<em class="lx">res</em> <em class="lx">=&gt;</em> console.log(res)) // view the response from server, later after our express server is set<br/>.catch(<em class="lx">error=&gt;</em>console.log(error))<br/>}</span></pre><p id="ebce" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将只发送文本类型的<code class="fe ly lz ma mb b">input</code>元素和<code class="fe ly lz ma mb b">textarea </code>元素的值(即姓名、电子邮件和消息)。“类型”复选框的输入元素有不同的读法。我们稍后会看到。</p><p id="fc6d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">客户端完成了。通过填写表格并点击提交/发送，尝试看看它是如何工作的。</p><p id="3537" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">提交表单后，您应该会在控制台上看到以下内容</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mt"><img src="../Images/94b9ae2797b3abe593273a8b3630c08b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R0-CY3h7fk11MOg-_lNMeA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">console.log</figcaption></figure><p id="8786" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">*** <strong class="ke io"/></p><p id="3fa0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可能还在想我们如何用JavaScript来做这件事，因为JavaScript既适用于客户端也适用于服务器端。对于服务器端，我们切换到服务器端JavaScript—node . js。node . js将处理我们的<code class="fe ly lz ma mb b">post</code>请求。</p><p id="ad02" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">NB</strong>:node . js也可以用于客户端，它不仅是服务器端语言，也可以用于客户端。</p><p id="1aa3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">注意</strong>:你可能想用其他服务器语言代替<code class="fe ly lz ma mb b">nodejs</code>的有:PHP、Python、Perl等。</p><p id="7684" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">B部分—服务器端:在服务器中接收来自客户端的表单数据</strong></p><p id="89cf" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们设置node-express服务器来接收表单，并使用Nodemailer发送电子邮件。</p><p id="d3ed" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">先决条件</strong>:您的机器上已经安装了<code class="fe ly lz ma mb b">npm</code>和<code class="fe ly lz ma mb b"><a class="ae mr" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">node</a></code>。</p><p id="01b1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于npm，您需要在您的终端中运行<code class="fe ly lz ma mb b">npm install</code>。您可能希望通过在终端中键入<code class="fe ly lz ma mb b">npm -v</code>或<code class="fe ly lz ma mb b">npm -version</code>或<code class="fe ly lz ma mb b">npm --version</code>来确认安装。</p><p id="bb93" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于node，请在链接中查看他们的<a class="ae mr" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">官方文档</a>，并安装最新的LTS版本。在终端中输入<code class="fe ly lz ma mb b">node -v</code>或<code class="fe ly lz ma mb b">node --version</code>进行确认。</p><ol class=""><li id="9e40" class="lo lp in ke b kf kg ki kj kl lq kp lr kt ls kx mu lu lv lw bi translated"><em class="lx">初始化项目根目录下的package.json </em></li></ol><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="9391" class="ml mm in mb b gy mn mo l mp mq">npm init -y</span></pre><p id="9931" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.安装依赖项 <code class="fe ly lz ma mb b">express, nodemon, nodemailer, dotenv, multiparty, nodemailer-mailgun-transport</code>并将它们保存为依赖项。</p><p id="266c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">express</code>是一个web应用框架</p><p id="8dc9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b"><a class="ae mr" href="https://www.npmjs.com/package/nodemon" rel="noopener ugc nofollow" target="_blank">nodemon</a></code>是一个Node.js模块，在你更新文件时自动重启你的节点应用。而不是在每次对节点项目进行更改时停止并重新运行服务器</p><p id="f890" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">nodemailer</code>是一个发送邮件的Node.js模块</p><p id="bbe3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">dotenv</code>是一个Node.js模块，用于访问我们应用程序上的环境变量</p><p id="cc0c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">multiparty</code>是Node.js应用程序的Node.js模块多部分/表单数据解析器</p><p id="4c50" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">nodemailer-mailgun-transport</code>是Node.js应用内发送邮件的节点模块。它是一个传输插件，与Nodemailer一起使用Mailgun发送电子邮件。</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="ed5a" class="ml mm in mb b gy mn mo l mp mq">npm install express nodemon nodemailer dotenv multiparty nodemailer-mailgun-transport -S</span></pre><p id="474d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.<em class="lx">在你的根目录下创建</em> <code class="fe ly lz ma mb b"><em class="lx">server.js</em></code> <em class="lx">文件</em>，或者<code class="fe ly lz ma mb b">app.js</code>，随便你怎么叫。您可以在您的终端中键入<code class="fe ly lz ma mb b">touch server.js</code>这里是我们的服务器JavaScript代码将被编写的地方。</p><p id="b609" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.<em class="lx">在您的express app中导入依赖关系</em>:</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="e243" class="ml mm in mb b gy mn mo l mp mq"><em class="lx">const</em> express = require('express');<br/><em class="lx">const</em> nodemailer = require('nodemailer');<br/><em class="lx">const</em> multiparty = require('multiparty');<br/>require('dotenv').config();</span></pre><p id="327c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">5.<em class="lx">在server.js中初始化您的express app </em></p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="7ac8" class="ml mm in mb b gy mn mo l mp mq"><em class="lx">const</em> app = express();</span></pre><p id="f137" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">6.<em class="lx">测试服务器</em>看它是否在一个端口上工作，通过回调来定义和监听端口。</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="5ff4" class="ml mm in mb b gy mn mo l mp mq"># define port<br/><em class="lx">const</em> port = 3000;<br/><em class="lx">const</em> PORT = process.env.PORT || port;<br/><em class="lx">const</em> log = console.log;</span><span id="7f41" class="ml mm in mb b gy ms mo l mp mq"># listen to port<br/>app.listen(PORT, () <em class="lx">=&gt; </em>log(`Server app is starting at http://localhost:${PORT}`));</span></pre><p id="9bb5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">7.<em class="lx">使用Nodemon <code class="fe ly lz ma mb b">nodemon server.js</code>在您的终端中运行服务器</em></p><p id="6b47" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">8.<em class="lx">配置路径</em>来渲染你的HTML，使用<code class="fe ly lz ma mb b">path</code>如果你希望我现在在这里。</p><p id="7b03" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lx">处理GET请求— </em> Node.js，Express。</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="7eb3" class="ml mm in mb b gy mn mo l mp mq"># get express module and other dependencies<br/><em class="lx">const</em> express = require('express');<br/><em class="lx">const</em> nodemailer = require('nodemailer');<br/><em class="lx">const</em> multiparty = require('multiparty');<br/>require('dotenv').config();</span><span id="df44" class="ml mm in mb b gy ms mo l mp mq"># define express app<br/>const app = express();</span><span id="1707" class="ml mm in mb b gy ms mo l mp mq">const port = 3000;<br/>const log = console.log;</span><span id="c191" class="ml mm in mb b gy ms mo l mp mq"># define path<br/>const path = require('path');</span><span id="43c4" class="ml mm in mb b gy ms mo l mp mq"># create route to send the html(index) into it<br/># app.get('/', (req, res) =&gt; { res.sendFile(path.join(__dirname, 'index.html'))});</span><span id="cad6" class="ml mm in mb b gy ms mo l mp mq"># listen to port<br/>app.listen(port, () =&gt; log(`Server app is starting at http://localhost:${port}/contact`));</span></pre><p id="4567" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">用<code class="fe ly lz ma mb b">ctrl + C</code>停止服务器，然后用<code class="fe ly lz ma mb b">node server.js</code>重新运行</p><p id="5d30" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">9.<a class="ae mr" href="https://stackoverflow.com/questions/23259168/what-are-express-json-and-express-urlencoded" rel="noopener ugc nofollow" target="_blank">通过解析来准备传入数据，以便能够发布它</a>。</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="73d4" class="ml mm in mb b gy mn mo l mp mq"># Parse data for processing<br/>app.use(express.urlencoded)({ extended: false})});<br/>app.use(express.json());</span></pre><p id="3d10" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">10.将数据从HTML发送到我们的服务器。</p><pre class="kz la lb lc gt mh mb mi mj aw mk bi"><span id="7f4e" class="ml mm in mb b gy mn mo l mp mq"># send email<br/>app.post('/email', (<em class="lx">req</em>, <em class="lx">res</em>) <em class="lx">=&gt;</em> { <br/># access the incoming data and display it<br/>console.log('Data: ', req.body);<br/># send msg back to client<br/>res.json({message: 'Message received !!'})});</span><span id="c824" class="ml mm in mb b gy ms mo l mp mq">// !!! Encounter <!-- -->type error: cant read property 'headersSent' of undefined</span></pre><p id="fbe9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">9.从我们的服务器获取数据并将其发送到电子邮件——接下来！</p><p id="064a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> PS </strong>:我是边编码边写这篇文章，为了更好的叙述步骤。所以它现在是不完整的…我会在编码时完成它。</p><p id="600e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">资源</strong> : <a class="ae mr" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>，W3- JavaScript，&amp;codebrainer.com，<a class="ae mr" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>，<a class="ae mr" href="https://nodemailer.com/usage/" rel="noopener ugc nofollow" target="_blank"> Nodemailer </a>。</p><p id="c54a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lx">更多内容看</em> <a class="ae mr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="lx">说白了。报名参加我们的</em> <a class="ae mr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="lx">免费周报</em> </strong> </a> <em class="lx">。在我们的</em> <a class="ae mr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="lx">社区不和谐</em> </strong> </a> <em class="lx">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>