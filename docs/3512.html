<html>
<head>
<title>How to Detect Clicks into an Iframe Using JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用JavaScript检测对Iframe的点击？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-detect-clicks-into-an-iframe-using-javascript-e70685bbe5ea?source=collection_archive---------1-----------------------#2022-09-03">https://javascript.plainenglish.io/how-to-detect-clicks-into-an-iframe-using-javascript-e70685bbe5ea?source=collection_archive---------1-----------------------#2022-09-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/407c530b90d5c46573a7f163c2b5ece2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pB_U3JOfCOSeNPz1"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sigmund</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dcef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们想检查用户是否使用JavaScript点击了iframe。</p><p id="d3db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用JavaScript检测对iframe的点击。</p><h1 id="141d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">聚焦于主窗口，然后在窗口中添加一个模糊事件监听器</h1><p id="64d5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以关注主窗口，然后在窗口中添加一个<code class="fe me mf mg mh b">blur</code>事件监听器，看看窗口发出<code class="fe me mf mg mh b">blur</code>事件后哪个元素被激活了。</p><p id="012e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下iframe:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4ce7" class="mq lc iq mh b gy mr ms l mt mu">&lt;iframe src='https://example.com'&gt;</span><span id="dd17" class="mq lc iq mh b gy mv ms l mt mu">&lt;/iframe&gt;</span></pre><p id="c8a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以把焦点放在窗口上，并通过编写以下代码向它添加一个<code class="fe me mf mg mh b">blur</code>监听器:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="06e6" class="mq lc iq mh b gy mr ms l mt mu">focus();<br/>const listener = window.addEventListener('blur', () =&gt; {<br/>  if (document.activeElement === document.querySelector('iframe')) {<br/>    console.log('clicked on iframe')<br/>  }<br/>  window.removeEventListener('blur', listener);<br/>});</span></pre><p id="99ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">focus</code>来关注主窗口。</p><p id="9705" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">window.addEventListener</code>向窗口添加一个<code class="fe me mf mg mh b">blur</code>事件监听器。</p><p id="e8ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在事件监听器中，我们检查<code class="fe me mf mg mh b">document.activeElement</code>是否是iframe，以检查iframe是否是我们关注的元素。</p><p id="4391" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是，那么我们记录一条消息。</p><p id="7277" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们立即移除<code class="fe me mf mg mh b">blur</code>事件监听器。</p><p id="44b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们单击iframe时，我们应该会看到记录的“clicked on iframe”消息。</p><h1 id="ae64" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="da57" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过监听窗口上的<code class="fe me mf mg mh b">blur</code>事件来检测带有JavaScript的iframe中的点击。</p><p id="d0e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em> <a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">说白了。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">免费周报</em> </strong> </a> <em class="mw">。关注我们关于</em> <a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">推特</em> </strong> </a>，<a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">LinkedIn</em></strong></a><em class="mw">，</em><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">YouTube</em></strong></a><em class="mw">，</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">不和</em> </strong> </a> <em class="mw">。</em></strong></a></p></div></div>    
</body>
</html>