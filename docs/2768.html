<html>
<head>
<title>Use ES Modules in Node.js &amp; Fix “cannot use import statement outside a module” Error</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js中使用ES模块&amp;修复“不能在模块外使用导入语句”错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-es-modules-in-nodejs-fix-cannot-use-import-statement-outside-a-module-error-33c61e5089ac?source=collection_archive---------2-----------------------#2022-07-03">https://javascript.plainenglish.io/using-es-modules-in-nodejs-fix-cannot-use-import-statement-outside-a-module-error-33c61e5089ac?source=collection_archive---------2-----------------------#2022-07-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ee59" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Node.js中的ECMAScript模块，如何在Node.js中使用导入和导出模块&amp;修复“不能在模块外使用导入语句”错误</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cce3fb42c74cbcad6cacb7c841f529d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pMB0sehbyWc0GBF5.png"/></div></div></figure><p id="c058" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文解释了Node.js中的ECMAScript模块，以及如何使用Node.js中的<strong class="kt ir">导入</strong>和<strong class="kt ir">导出模块</strong>，修复Node.js开发中的<code class="fe ln lo lp lq b">cannot use import statement outside a module</code>错误</p><h1 id="8750" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">介绍</h1><p id="0526" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">模块是Node.js中可重用代码的主要部分之一。这些模块可以从npm下载或由开发人员创建。</p><p id="1b76" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ECMAScript模块(或es模块)改变了我们在Node.js中导入和导出模块的方式，模块可以用<code class="fe ln lo lp lq b">import</code>关键字导入，用<code class="fe ln lo lp lq b">export</code>关键字导出。ES模块之前Node.js的模块类型是<code class="fe ln lo lp lq b">commonJS</code>。</p><p id="3fab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本教程中，我们将通过从头创建一个Node.js应用程序来了解如何在Node.js应用程序中使用ES模块。</p><h1 id="107d" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">先决条件</h1><p id="0818" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">创建我们今天要解释的示例代码需要Node.js的最新版本。您可以按照本教程在本地设备上安装节点版本管理器(NVM)和Node.js。</p><div class="mo mp gp gr mq mr"><a rel="noopener  ugc nofollow" target="_blank" href="/install-node-js-to-your-computer-with-nvm-effortlessly-switch-between-node-versions-529d75c1850"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd ir gy z fp mw fr fs mx fu fw ip bi translated">将Node.js安装到装有NVM的计算机上(在节点版本之间轻松切换)</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">管理Node.js从未像使用节点版本管理器(NVM)那样简单。如果您将Node.js用于您的…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="na l"><div class="nb l nc nd ne na nf kp mr"/></div></div></a></div><p id="b11f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在成功地将Node.js安装到我们的环境中之后，我们可以用ES模块创建Node.js应用程序。</p><h1 id="3057" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">使用“类型”:“模块”创建Node.js应用程序</h1><p id="38da" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">我们将使用以下命令创建一个示例Node.js应用程序:</p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="9814" class="nk ls iq lq b gy nl nm l nn no">mkdir nodejs-esmodules</span><span id="5809" class="nk ls iq lq b gy np nm l nn no">cd nodejs-esmodules</span><span id="2c38" class="nk ls iq lq b gy np nm l nn no">npm init -y</span><span id="6815" class="nk ls iq lq b gy np nm l nn no">// Output</span><span id="7273" class="nk ls iq lq b gy np nm l nn no">{<br/>  "name": "nodejs-esmodules",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC"<br/>}</span></pre><p id="a825" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如您所见，我们已经在nodejs-esmodules文件夹中创建了一个Node.js应用程序。</p><p id="f9c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您可以在代码编辑器中打开代码。</p><p id="3356" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<strong class="kt ir"> package.json </strong>文件中，我们需要在以<code class="fe ln lo lp lq b">.js</code>结尾的文件中添加<code class="fe ln lo lp lq b"><strong class="kt ir">"type": "module"</strong></code>来使用Node.js应用中的ES模块。</p><p id="668f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> package.json </strong></p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="c8b6" class="nk ls iq lq b gy nl nm l nn no"><strong class="lq ir">{<br/>  "type": "module"<br/>}</strong></span></pre><p id="fd03" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加<code class="fe ln lo lp lq b"><strong class="kt ir">"type": "module"</strong></code> <strong class="kt ir"> </strong>定义了我们想要在Node.js中使用的模块格式。</p><h1 id="d37f" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">在Node.js中创建index.js</h1><p id="837c" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">成功创建应用程序后，我们需要创建一个<code class="fe ln lo lp lq b">index.js</code>来运行我们的应用程序。</p><p id="c410" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> index.js </strong></p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="0ca1" class="nk ls iq lq b gy nl nm l nn no">console.log('I am nodejs application')</span></pre><p id="a542" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我们将启动脚本添加到package.json来启动代码时:</p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="cfeb" class="nk ls iq lq b gy nl nm l nn no">{<br/>  "name": "nodejs-esmodules",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "start": "node index.js",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC",<br/>  "type": "module"<br/>}</span></pre><p id="cd47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在在我们的终端中，我们可以用</p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="03e7" class="nk ls iq lq b gy nl nm l nn no">npm start</span><span id="8e80" class="nk ls iq lq b gy np nm l nn no">// Output<br/>// I am nodejs application</span></pre><h1 id="66ae" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">在Node.js应用程序中创建模块</h1><p id="4678" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">让我们为日志程序创建另一个文件。</p><p id="7e66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> logger.js </strong></p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="38fa" class="nk ls iq lq b gy nl nm l nn no">export const log = (message) =&gt; {<br/>    console.log(message)<br/>}</span></pre><p id="c3ee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们可以将log函数导入index.js。</p><p id="b8c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> index.js </strong></p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="76a5" class="nk ls iq lq b gy nl nm l nn no">import { log } from './logger.js';</span><span id="c1e3" class="nk ls iq lq b gy np nm l nn no">log('I am nodejs application with ESModules')</span></pre><p id="b3dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我们用<code class="fe ln lo lp lq b">npm start</code>运行应用程序时，它将创建如下日志:</p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="eeab" class="nk ls iq lq b gy nl nm l nn no">I am nodejs application with ESModules</span></pre><p id="7293" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你在上面的例子中看到的，我们用<code class="fe ln lo lp lq b">import ... from ...</code>将<code class="fe ln lo lp lq b">log</code>函数导入index.js，而不是使用require关键字。</p><h1 id="088c" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">导入外部模块</h1><p id="1654" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">现在让我们将npm模块安装到我们的项目中，并直接在logger.js中导入它。</p><p id="ce9c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将在应用程序中使用Node.js中的内置url模块来记录URL。</p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="a71d" class="nk ls iq lq b gy nl nm l nn no">import url from 'url'</span></pre><p id="7a77" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> logger.js </strong></p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="2196" class="nk ls iq lq b gy nl nm l nn no">import url from 'url'</span><span id="b427" class="nk ls iq lq b gy np nm l nn no">var address = '<a class="ae nq" href="http://localhost:8080/'" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/'</a>;<br/>var q = url.parse(address, true);</span><span id="a687" class="nk ls iq lq b gy np nm l nn no">export const log = (message) =&gt; {<br/>    console.log(message)<br/>    console.log(q.host); //returns 'localhost:8080'<br/>}</span></pre><p id="84f7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我们用<code class="fe ln lo lp lq b">npm start</code>运行应用程序时，它将创建一个日志，如下所示:</p><pre class="kg kh ki kj gt ng lq nh ni aw nj bi"><span id="e92f" class="nk ls iq lq b gy nl nm l nn no">I am nodejs application with ESModules<br/>localhost:8080</span></pre><p id="2279" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你在这里看到的，我们使用了<strong class="kt ir"> url </strong>模块。我们已经在<code class="fe ln lo lp lq b">logger.js</code>文件中导入了<strong class="kt ir"> url </strong>模块，并将主机地址添加到日志消息中。</p><p id="dcc3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你也可以导入你用NPM下载的模块，没有任何问题。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="80c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是关于在Node.js中使用ECMAScript模块的全部内容。在我看来，它使开发速度更快。</p><p id="f2cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望在您阅读完这篇文章之后，您可以使用ES模块创建您的Node.js应用程序并开始开发。</p><p id="60e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以从<a class="ae nq" href="https://github.com/hadnazzar/nodejs-with-esmodules" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">GitHub URL</strong></a><strong class="kt ir">访问该项目。</strong></p><p id="88c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ny">如果你觉得这篇文章很有帮助，你</em> <a class="ae nq" href="https://medium.com/@melihyumak" rel="noopener"> <strong class="kt ir"> <em class="ny">可以通过使用我的推荐链接注册一个</em> <a class="ae nq" href="https://melihyumak.medium.com/membership" rel="noopener"> <strong class="kt ir"> <em class="ny">中级会员来访问类似的</em> </strong> </a> <em class="ny">。</em>T31</strong></a></p><p id="ecfd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="ny">关注我的</em> </strong> <a class="ae nq" href="https://twitter.com/hadnazzar" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">推特</strong> </a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://www.youtube.com/c/TechnologyandSoftware"><div class="gh gi nz"><img src="../Images/c012fae801a3ab846a63dc560d09ff17.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*dbjgfMVqPih09kJM.png"/></div></a><figcaption class="oa ob gj gh gi oc od bd b be z dk">Subscribe for more on <a class="ae nq" href="https://www.youtube.com/c/TechnologyandSoftware?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"><strong class="bd oe">Youtube</strong></a></figcaption></figure><h1 id="6b54" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">编码快乐！</h1><p id="fddd" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">梅利赫</p><p id="220e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ny">更多内容请看</em><a class="ae nq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">plain English . io</em></strong></a><em class="ny">。报名参加我们的</em><strong class="kt ir"><em class="ny"/></strong><a class="ae nq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">免费周报</em> </strong> </a> <em class="ny">。关注我们关于</em> <a class="ae nq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ny">推特</em></strong></a><strong class="kt ir"><em class="ny"/></strong><em class="ny">和</em><a class="ae nq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ny">LinkedIn</em></strong></a><em class="ny">。查看我们的</em> <a class="ae nq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ny">社区不和谐</em> </strong> </a> <em class="ny">加入我们的</em> <a class="ae nq" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ny">人才集体</em> </strong> </a> <em class="ny">。</em></p></div></div>    
</body>
</html>