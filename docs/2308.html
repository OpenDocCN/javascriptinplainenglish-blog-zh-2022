<html>
<head>
<title>Stop the Horrible Clash Between Single and Double Clicks in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止在Angular中单击和双击之间的可怕冲突</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stop-the-horrible-clash-between-single-and-double-clicks-in-angular-5798ce90fd1a?source=collection_archive---------3-----------------------#2022-05-30">https://javascript.plainenglish.io/stop-the-horrible-clash-between-single-and-double-clicks-in-angular-5798ce90fd1a?source=collection_archive---------3-----------------------#2022-05-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c74d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于如何使用RxJS主题解决事件冒泡的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/da8a94819110bdfd4fccb718116c525b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Lmykj9r_Uaq8pnVv"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@drew_hays?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Drew Hays</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cea8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你曾经希望你的应用程序在单击和双击时有不同的表现吗？听起来很容易实现，对吗？不对！</p><p id="8ffe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">问题是，浏览器将双击解释为两次单击，导致两个<strong class="kv io"> <em class="lp">事件处理程序都触发，导致流血和破坏😭</em></strong></p><p id="e6cd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以通过使用<a class="ae ks" href="https://rxjs.dev/guide/subject" rel="noopener ugc nofollow" target="_blank"> RxJS Subjects </a>的能力和使用人体工程学指令防止事件冒泡来巧妙地解决这个问题:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lq lr l"/></div></figure><h2 id="b7d4" class="ls lt in bd lu lv lw dn lx ly lz dp ma lc mb mc md lg me mf mg lk mh mi mj mk bi translated">解释:</h2><ul class=""><li id="e8cf" class="ml mm in kv b kw mn kz mo lc mp lg mq lk mr lo ms mt mu mv bi translated">我们已经将点击处理策略转移到一个指令中，这样我们就可以在Angular模板中的任何DOM节点上轻松地重用它</li><li id="b8ab" class="ml mm in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">我们已经声明了一个<code class="fe nb nc nd ne b">Subject</code>来保存我们的点击事件流</li><li id="ec28" class="ml mm in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">通过使用指令<code class="fe nb nc nd ne b"><a class="ae ks" href="https://angular.io/api/core/HostListener" rel="noopener ugc nofollow" target="_blank">HostListener</a></code>绑定到这两个事件，我们防止了这些事件的冒泡和默认行为，并将事件注入到我们的点击主题中</li><li id="74d7" class="ml mm in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">问题是<code class="fe nb nc nd ne b">click</code>和<code class="fe nb nc nd ne b">dblclick</code>事件都向上冒泡，所以双击时，单击处理程序将触发两次，然后双击处理程序将触发一次。我们需要停止这种冒泡！</li><li id="5d67" class="ml mm in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated"><a class="ae ks" href="https://w3c.github.io/uievents/#:~:text=This%20event%20type%20MUST%20be%20dispatched%20after%20the%20event%20type%20click%20if%20a%20click%20and%20double%20click%20occur%20simultaneously%2C" rel="noopener ugc nofollow" target="_blank">浏览器规格</a>保证了<code class="fe nb nc nd ne b">dblclick</code>事件总是在<code class="fe nb nc nd ne b">click</code>事件之后<strong class="kv io"> <em class="lp">发生的顺序。因此，通过使用<code class="fe nb nc nd ne b">debounceTime</code>操作符，我们可以控制双击的“速度”。这将帮助我们区分<code class="fe nb nc nd ne b">click</code>和<code class="fe nb nc nd ne b">dblclick</code>事件。在去抖窗口之后，如果clicks主体发出的值不是双击，那么肯定是单击。</em></strong></li><li id="fe59" class="ml mm in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">该指令的“选择器”也匹配输出事件名称。这使得我们的使用API符合人体工程学，简洁明了，如下所示:</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="ffa5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们结束了🎉🎉🎉</p><p id="6f8c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">希望你觉得这有用</p><p id="ff42" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">快乐工程！</p></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><p id="b0e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="lp">如需更多此类文章更新请订阅</em> </strong> <a class="ae ks" href="https://www.bytelimes.com/#/portal/signup/free" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">我的免费简讯</em> </strong> </a> <strong class="kv io"> <em class="lp">。</em>T13】</strong></p><p id="a727" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">说白了就是</em> </strong> </a> <em class="lp">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">免费周报</em> </strong> </a> <em class="lp">。关注我们</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">推特</em> </strong> </a> <em class="lp">和</em><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="lp">LinkedIn</em></strong></a><em class="lp">。查看我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">社区不和谐</em> </strong> </a> <em class="lp">加入我们的</em> <a class="ae ks" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">人才集体</em> </strong> </a> <em class="lp">。</em></p></div></div>    
</body>
</html>