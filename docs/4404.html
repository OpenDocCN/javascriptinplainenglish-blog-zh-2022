<html>
<head>
<title>Create a Full-Fledged Web App With Everyone’s Favorite Svelkit and Django Rest Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用每个人都喜欢的Svelkit和Django Rest框架创建一个成熟的Web应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-full-fledged-web-app-with-everyones-favorite-svelkit-and-django-rest-framework-79c5b72b9293?source=collection_archive---------2-----------------------#2022-11-30">https://javascript.plainenglish.io/creating-a-full-fledged-web-app-with-everyones-favorite-svelkit-and-django-rest-framework-79c5b72b9293?source=collection_archive---------2-----------------------#2022-11-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c468" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">嘿，德夫斯！是的，我使用SvelteKit进行生产。</h2></div><p id="4e7e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我是一名Django开发者，在网上学习了很多新东西，而Svelte是相当新的。我最近将我的基于Django的web应用程序迁移到了SvelteKit，使用的是基于Django Rest框架的web应用程序。</p><p id="cd66" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在发展的过程中，老实说，我少挣扎了，你知道为什么吗？因为Svelte的简单……以及它提供的开箱即用的功能实在是太酷了。</p><p id="ea93" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">今天，我将向你展示Svelte拥有的一些好的特性，我如何将<strong class="ke io"> Django Rest框架与SvelteKit </strong>一起使用，为什么SvelteKit对我来说是“最好的”前端/全栈JS框架，以及为什么我将在我的新独立项目中使用它？</p><p id="20be" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我从它(苗条身材)的酷的内置功能和它的特色开始</p><ul class=""><li id="5e22" class="ky kz in ke b kf kg ki kj kl la kp lb kt lc kx ld le lf lg bi translated">过渡和动画效果，根据条件，只需一行代码</li><li id="c025" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">使添加扩展、包和库变得容易；比如顺风CSS。</li><li id="39ef" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">Svelte极其简单，非常在意“DX”[开发者体验]</li><li id="48f3" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">Svelte以非常小的构建尺寸进行渲染的速度非常快</li><li id="b312" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">Svelte提供内置适配器或自定义适配器，您可以使用它们来部署您的web应用程序</li><li id="90ac" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">有了所有的特性，你就真正拥有了代码，你不会失去控制</li><li id="a798" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">HTML、CSS和JS部分在同一个<code class="fe lm ln lo lp b">.svelte</code>文件中协同工作，这使得编写代码更加容易，可读性也得到了增强。</li></ul><p id="ad20" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这样的例子不胜枚举。所以，这些是我认为苗条很棒的一些基本原因。</p><p id="4904" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不仅如此，SvelteKit提供了额外的功能，使您的开发过程顺利进行；包括前端和后端。</p><p id="15a5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Svelte和SvelteKit有什么区别？<a class="ae lq" href="https://joyofcode.xyz/learn-how-sveltekit-works" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> Kit不是建立在Svelte </strong> </a> <strong class="ke io">之上，而是一个后端web框架，Svelte被用作视图层，或者说是组件处理程序。</strong></p><p id="c8ec" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，正如我已经提到的，我要谈谈“我是如何将DRF [Django Rest框架]与SvelteKit结合使用的？”</p><h2 id="0bab" class="lr ls in bd lt lu lv dn lw lx ly dp lz kl ma mb mc kp md me mf kt mg mh mi mj bi translated">我如何使用DRF [Django Rest框架]与SvelteKit？</h2><p id="2c1f" class="pw-post-body-paragraph kc kd in ke b kf mk jo kh ki ml jr kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">在我谈论上面的话题之前，我想和你谈谈，“为什么我用SvelteKit做网站开发？”嗯，说实话，感觉很酷。为了解释清楚，以下是我使用SvelteKit的一些原因…</p><ul class=""><li id="05ad" class="ky kz in ke b kf kg ki kj kl la kp lb kt lc kx ld le lf lg bi translated">SvelteKit提供了<code class="fe lm ln lo lp b"><a class="ae lq" href="https://kit.svelte.dev/docs/form-actions" rel="noopener ugc nofollow" target="_blank">form-actions</a></code>,我可以用它轻松安全地提交安全的、基于授权的表单。</li><li id="c1ce" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">SvelteKit与Tailwind CSS配合得很好，因为它有一个用于这项任务的<code class="fe lm ln lo lp b">svelte-add</code>。即使Tailwind CSS IntelliSense无法与超级最新版本配合使用。</li><li id="af86" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">Svelte提供了漂亮的内置过渡、效果和动画，我可以很容易地在我的SvelteKit项目中使用它们。</li><li id="d1d1" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">SvelteKit有在每个HTTP调用中执行的<code class="fe lm ln lo lp b">hooks.server.ts</code>,在这里我们可以编写我们的认证逻辑/算法。而<code class="fe lm ln lo lp b">hooks.server.ts</code>可以在所有组件上返回值，可以超级轻松地抓取。</li><li id="869a" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">SvelteKit有<code class="fe lm ln lo lp b">+page.server.ts</code>和<code class="fe lm ln lo lp b">+page.ts</code>，我可以在那里写一些<code class="fe lm ln lo lp b">load</code>函数和“表单动作”。在页面加载到浏览器之前，<code class="fe lm ln lo lp b">load</code>函数在服务器中执行。它主要用于向基于SSR(服务器端呈现)的页面发送数据。</li><li id="cf53" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated"><strong class="ke io">苗条</strong>有简单的上下文/商店处理，【<code class="fe lm ln lo lp b"><a class="ae lq" href="https://svelte.dev/tutorial/writable-stores" rel="noopener ugc nofollow" target="_blank">writables</a></code>苗条】</li></ul><p id="1828" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以是的，这就是为什么我用了SvelteKit。</p><p id="d4e6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，最初，我已经有了一个生产运行的Django项目，使用PostgreSQL作为它的数据库。我有代码，我调整它使它与Django Rest框架兼容。</p><p id="f9c0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我必须添加一些序列化器，并为新特性在模型中添加一些新字段。我这样做了，并用PostMan和DRF提供的<code class="fe lm ln lo lp b">APITestCase</code>类进行了测试。</p><p id="ff38" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，轮到认证了。对于认证，我使用了一个名为<code class="fe lm ln lo lp b"><a class="ae lq" href="https://django-rest-framework-simplejwt.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">Django Simple JWT</a></code>的库，它工作得相当好。<code class="fe lm ln lo lp b">TokenObtainPairView</code>、<code class="fe lm ln lo lp b">TokenRefreshView</code>、<code class="fe lm ln lo lp b">TokenVerifyView</code>分别用于URL<code class="fe lm ln lo lp b">login/</code>、<code class="fe lm ln lo lp b">refresh/</code>和<code class="fe lm ln lo lp b">verify/</code>。</p><p id="6ae4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我使用<code class="fe lm ln lo lp b">+page.server.ts</code>向Django后端请求，并将响应返回给SvelteKit的前端。基本上，SvelteKit就像后端一样存储cookies和JWT令牌，中间端到达实际的API并将响应返回给前端。</p><p id="5ed5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我会做一篇“如何用Django认证/授权SvelteKit”的描述性文章。</p><p id="c6a7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">完成开发后，是时候从基于Django的系统迁移/部署到基于SvelteKit / Django Rest框架的系统了。</p><p id="18de" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我正在配置迁移时，AWS Lightsail服务器突然卡住了，我不得不重启服务器系统。服务器重启后，失去了PostgreSQL的DB集群。我试着恢复了两天…没有成功。我失去了3000+用户的数据库，存储了7400+网址。</p><p id="fdb7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可能会想到备份/快照，我将制作一个新的故事“我是如何失去3000多个用户的数据库的？”</p><p id="2e06" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我刚刚创建了一个新的PostgreSQL DB实例，带有一个新表。并将其与DRF后端连接起来。我用pm2和<code class="fe lm ln lo lp b">@sveltejs/adapter-node</code>部署了SvelteKit应用程序，进行得相当顺利。</p><p id="b190" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Django后端使用了<code class="fe lm ln lo lp b">nginx</code>和<code class="fe lm ln lo lp b">gunicorn</code>来托管它。</p><p id="8292" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，这是最终产品，它被称为<a class="ae lq" href="https://xoomato.com/" rel="noopener ugc nofollow" target="_blank"> Xoomato网址卫士</a>。它通常是为想要在社交媒体上安全地分享他们的网站的Adsense发布者准备的。</p><p id="7702" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">未完待续…</p><p id="7364" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mp">更多内容看</em> <a class="ae lq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mp">说白了就是io </em> </strong> </a> <em class="mp">。报名参加我们的</em> <a class="ae lq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mp">免费周报</em> </strong> </a> <em class="mp">。关注我们关于</em><a class="ae lq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">Twitter</em></strong></a>，<a class="ae lq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">LinkedIn</em></strong></a><em class="mp">，</em><a class="ae lq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">YouTube</em></strong></a><em class="mp">，</em> <a class="ae lq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mp">不和</em> </strong> </a> <em class="mp">。对增长黑客感兴趣？检查</em> <a class="ae lq" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mp">电路</em> </strong> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>