<html>
<head>
<title>Super Simple Global State in Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js中的超级简单全局状态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/super-simple-global-state-in-vue-js-2022-9a307a13f556?source=collection_archive---------4-----------------------#2022-04-19">https://javascript.plainenglish.io/super-simple-global-state-in-vue-js-2022-9a307a13f556?source=collection_archive---------4-----------------------#2022-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="baad" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在多个组件之间共享状态</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/51331c16ae925cbf76a290039954773d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JDNiImanhBfhijZfc_FWww.jpeg"/></div></div></figure><p id="1152" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">管理状态是任何应用程序的一个重要方面。在Vue.js中，我们有几个在组件之间共享状态的选项。我们可以使用prop drilling、提升状态、使用provide/inject或像Pinia或Vuex这样状态管理库。<br/>今天我们将看看如何利用Vue.js的composition API并创建一个带有全局状态的简单定制钩子。让我们深入研究一下。</p><p id="6923" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我正在开发的一个应用程序中，有一个可以折叠的侧边栏。根据这种折叠状态，我们希望更新多个组件的布局。此外，我们希望能够从多个组件折叠侧边栏。让我们看看如何将这种全球状态付诸行动:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ln"><img src="../Images/f3c8bce96c934e97895088f8e195e232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-EMK1RmCPPJVysANFbDaNg.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">useSidebar hook</figcaption></figure><p id="75ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们更深入地了解一下这里发生了什么。通过在<em class="ls"> useSidebar </em>函数之外重新定位我们的reactive<em class="ls">isSidebarCollapsed</em>变量，我们利用了单例模式。</p><p id="4aa8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ls">单例模式将特定对象的实例数量限制为一个。这个单独的实例称为单例。</em></p><p id="efb2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这意味着我们只创建了一个reactive<em class="ls">isSidebarCollapsed</em>变量的实例。在我们的<em class="ls"> useSidebar </em>钩子中，我们将<em class="ls"> isSidebarCollapsed </em>变量返回为只读。这样做是为了避免变量直接从组件变异而来。直接从组件改变全局状态是一种不好的做法，随着时间的推移会变得难以调试。<br/>为了更新<em class="ls"> isSidebarCollapsed </em>状态，我们还创建了一个<em class="ls"> toggleSidebarCollapse </em>(想不出更好的名字了😅)<em class="ls"> </em>功能并导出该功能。我们现在可以从任何地方切换折叠状态。</p><p id="ac10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">钩子在行动<br/> </strong>让我们看看如何实现钩子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ln"><img src="../Images/58594fd43438a38b563176fce284155a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q5vJ_PoOcayF5ewWglaRXQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Hook implementation</figcaption></figure><p id="f324" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在可以通过从useSidebar钩子中析构我们的<em class="ls"> isSidebarCollapsed </em>和<em class="ls"> toggleSidebarCollapse </em>来使用我们的钩子，并在我们的模板中使用它们。就这么简单。</p><p id="e00d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望你喜欢这篇文章。如果你有，你可能也会喜欢我写的这篇关于如何在Vue.js中创建一个基本的useFetch钩子的文章:</p><div class="lt lu gp gr lv lw"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-basic-usefetch-hook-in-vue-b3ff113872d7"><div class="lx ab fo"><div class="ly ab lz cl cj ma"><h2 class="bd ir gy z fp mb fr fs mc fu fw ip bi translated">在Vue.js中创建一个基本的useFetch钩子</h2><div class="md l"><h3 class="bd b gy z fp mb fr fs mc fu fw dk translated">胜利的Vue合成API！</h3></div><div class="me l"><p class="bd b dl z fp mb fr fs mc fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk kp lw"/></div></div></a></div><p id="39b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ls">更多内容请看</em><a class="ae ml" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ls">plain English . io</em></strong></a><em class="ls">。报名参加我们的</em> <a class="ae ml" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em><a class="ae ml" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ls">Twitter</em></strong></a><em class="ls">和</em><strong class="kt ir"><em class="ls"/></strong><a class="ae ml" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ls">LinkedIn</em></strong></a><em class="ls">。加入我们的</em> <a class="ae ml" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ls">社区</em> </strong> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>