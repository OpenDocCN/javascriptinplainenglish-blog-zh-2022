# 你应该知道的 React 的 5 个优化技巧

> 原文：<https://javascript.plainenglish.io/5-optimization-tips-for-react-you-should-know-2f7e316bdd05?source=collection_archive---------0----------------------->

## 这些技巧可以帮助您更好地优化 React 项目。

![](img/47f218e59cab47e442431d93a051db5b.png)

我工作多年，接手过很多历史项目。大部分项目都可以用“屎山”来形容。如何接手并优化它们？

我从项目的生命周期来讲。

# 1.优化 Babel、Webpack 配置项目

首先是编译阶段。当我们使用`create-react-app`或者`webpack`来构建一个 react 项目的时候，你有没有想过一个问题，我们的配置是否可以让我们的项目构建更快，规模更小，项目结构更简单清晰

随着我们的项目越做越大，项目依赖越来越多，项目结构越来越复杂，项目体量会越来越大，建设时间会越来越长，久而久之就会成为一个大而重的项目，所以我们要学会适当地为项目‘减负’。

*   `include`或`exclude`来限制`loader`的范围

*   `Happypack`多流程编译

*   缓存 babel 编译的文件

*   按需加载，按需导入

最佳化的

```
Compilation time: 20.4s => 6.89s
Project volume: 7.3M => 4.1M
```

# 2.路由延迟加载

`react`路由延迟加载基于`import`函数路由延迟加载。众所周知，`import`执行会返回一个`Promise`作为异步加载的手段。我们可以用这个来实现`react`异步加载路由。

# 3.独立请求服务提供单元

然后是渲染阶段，建立一个独立的请求渲染单元。直接的理解就是，如果我们把页面分为请求数据显示部分(通过调用后端接口获取数据)，和基础部分(没有请求数据，已经直接写好了 OK)，对于一些逻辑交互不是很复杂的数据显示部分，我推荐使用独立组件，独立请求数据，独立控制呈现方式。

# 4.合理使用状态管理

然后是国家管理。国家管理要解决什么问题？状态管理可以解决的问题主要分为两个方面，一是解决跨级组件通信的问题，二是缓存一些全局公共状态。
我们的 redux 系列状态管理就是一个例子。

# 错误的用法

这样，页面请求数据，当数据被更新时，这一切都发生在当前组件中。我不推荐这种写作方式。这时候数据经过状态管理，最后回到组件本身，很没味道，起不到作用。就性能优化而言，最好直接在组件内部请求数据。

# 5.海量数据优化

然后就是海量数据源，长列表渲染，虚拟列表是解决长列表渲染的最佳方案。
虚拟列表(virtual list)是一种按需显示技术，根据用户的滚动，不必呈现所有的列表项，而只呈现可视区域中的一部分列表元素。正常的虚拟列表分为渲染区、缓冲区和虚拟列表区。
为了防止大量 DOM 的存在影响性能，我们只渲染渲染区和缓冲区的数据，虚拟列表区没有真正的 DOM。缓冲器的作用是防止快速滑动或向上滑动过程中出现空白现象。

# 微小虚拟列表

是一个相对轻量级的组件，实现了虚拟列表。

# 最后

**感谢阅读。**我期待着您的关注和阅读更多高质量的文章。

*更多内容看* [***说白了。报名参加我们的***](https://plainenglish.io/) **[***免费周报***](http://newsletter.plainenglish.io/) *。关注我们关于* [***推特***](https://twitter.com/inPlainEngHQ) ，[***LinkedIn***](https://www.linkedin.com/company/inplainenglish/)*，*[***YouTube***](https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw)*，* [***不和***](https://discord.gg/GtDtUAvyhW) *。***