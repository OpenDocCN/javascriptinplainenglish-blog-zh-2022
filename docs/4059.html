<html>
<head>
<title>Add Event Listener to Multiple Elements in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向JavaScript中的多个元素添加事件监听器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-event-listener-to-multiple-elements-in-javascript-e9ff28411992?source=collection_archive---------4-----------------------#2022-10-21">https://javascript.plainenglish.io/add-event-listener-to-multiple-elements-in-javascript-e9ff28411992?source=collection_archive---------4-----------------------#2022-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f77b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">默认情况下，addEventListener仅向一个HTML DOM元素添加事件。让我们看看如何向多个DOM元素添加事件。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ac1a8a2ef4a7bbfe5f86ce581c90460b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YUows4mWEVkk_nR5Ed2uZw.png"/></div></div></figure><p id="a838" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您曾经使用过普通的Javascript，您可能熟悉使用以下公式向元素添加事件侦听器:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="99d7" class="ls lt iq lo b gy lu lv l lw lx">let element = document.querySelector('#button');</span><span id="7435" class="ls lt iq lo b gy ly lv l lw lx">element.addEventListener('click', () =&gt; {<br/>    console.log('some event content here...')<br/>})</span></pre><p id="728c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，上面的代码会触发一个函数，这个函数在<code class="fe lz ma mb lo b">#button</code>被触发时触发。但是，有时您需要向多个元素添加一个事件侦听器——比如，页面上存在的每个按钮。您可能会发现，即使一个页面上有多个元素，上面的方法也只是将事件添加到一个元素中——第一个元素。怎么回事？</p><p id="d7f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">问题是<code class="fe lz ma mb lo b">addEventListener</code>只适合向一个DOM元素添加事件，而<code class="fe lz ma mb lo b">querySelector</code>也只匹配一个元素。那么，如何向页面上的多个元素添加事件侦听器呢？我们来看看解决方案。</p><h1 id="9a77" class="mc lt iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">向多个元素添加事件侦听器</h1><p id="e19d" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我们将使用<code class="fe lz ma mb lo b">querySelectorAll</code>来匹配页面上的所有元素，而不是使用<code class="fe lz ma mb lo b">querySelector</code>。下面的代码返回一个类型为<code class="fe lz ma mb lo b">NodeList</code>的项目，由所有匹配<code class="fe lz ma mb lo b">.button</code>的DOM元素组成。<strong class="kt ir">为了给每个元素</strong>添加事件，我们需要遍历来自<code class="fe lz ma mb lo b">querySelector</code>的每个匹配元素，并给每个元素添加事件:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="63a9" class="ls lt iq lo b gy lu lv l lw lx">let elements = document.querySelectorAll('.button');</span></pre><p id="01ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Javascript很奇怪，因为它不将DOM元素作为简单的数组返回——而是作为<code class="fe lz ma mb lo b">NodeList</code>返回。<a class="ae my" href="https://fjolt.com/article/javascript-foreach-on-queryselectorall" rel="noopener ugc nofollow" target="_blank">如果你想更详细地了解节点列表，请在这里阅读我的指南。</a></p><p id="07db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在现代浏览器中，<code class="fe lz ma mb lo b">NodeList</code>的行为很像数组，所以我们可以使用<code class="fe lz ma mb lo b">forEach</code>遍历每个数组。为了给每个<code class="fe lz ma mb lo b">.button</code>添加一个事件，我们需要使用<code class="fe lz ma mb lo b">forEach</code>遍历它。所以向所有的<code class="fe lz ma mb lo b">.button</code>元素添加一个<code class="fe lz ma mb lo b">click</code>事件看起来像这样:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="713c" class="ls lt iq lo b gy lu lv l lw lx">let elements = document.querySelectorAll('.button');</span><span id="3af3" class="ls lt iq lo b gy ly lv l lw lx">elements.forEach((item) =&gt; {<br/>    item.addEventListener('click', () =&gt; {<br/>        console.log('some event content here...')<br/>    })<br/>});</span></pre><p id="f049" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">然而</strong>，在像Internet Explorer这样的老浏览器中，<code class="fe lz ma mb lo b">forEach</code>在<code class="fe lz ma mb lo b">NodeList</code> s上是不存在的，虽然这在当今并不是问题，但你可能会找到将<code class="fe lz ma mb lo b">querySelectorAll</code>的结果转换成数组并循环的代码。这实现了同样的事情，但是这意味着我们在数组中循环，而不是在。</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="b88f" class="ls lt iq lo b gy lu lv l lw lx">let elements = document.querySelectorAll('.button');<br/>Array.prototype.forEach.call(elements, (item) =&gt; {<br/>    item.addEventListener('click', function(e) {<br/>        console.log('some event content here...')<br/>    });<br/>});</span></pre></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="144e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ng">更多内容请看</em><a class="ae my" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ng">plain English . io</em></strong></a><em class="ng">。报名参加我们的</em> <a class="ae my" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ng">免费周报</em> </strong> </a> <em class="ng">。关注我们关于</em><a class="ae my" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ng">Twitter</em></strong></a><a class="ae my" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ng">LinkedIn</em></strong></a><em class="ng"/><a class="ae my" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ng">YouTube</em></strong></a><em class="ng"/><a class="ae my" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ng">不和</em> </strong> </a> <em class="ng">。对增长黑客感兴趣？检查</em> <a class="ae my" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ng">电路</em> </strong> </a> <em class="ng">。</em></p></div></div>    
</body>
</html>