<html>
<head>
<title>What Are JavaScript Closures?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是JavaScript闭包？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-are-javascript-closures-d27a5ed7a79f?source=collection_archive---------16-----------------------#2022-06-15">https://javascript.plainenglish.io/what-are-javascript-closures-d27a5ed7a79f?source=collection_archive---------16-----------------------#2022-06-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f18cdeab9681886453603ab310ead7f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-MxlWB5OOSGwEkBO"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@christinhumephoto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christin Hume</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6a32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在编程的世界里，闭包是那些似乎会给初学者带来很多困惑的事物之一。但是一旦你理解了它们，它们就是你编程武库中的一个强大工具。在这篇博文中，我们将讨论什么是闭包，以及它们在JavaScript中是如何工作的。</p><h2 id="e679" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">什么是闭包？</h2><p id="05f8" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">简单来说，闭包就是嵌套函数使用外部函数中的变量。内部函数可以访问外部函数中的变量，即使外部函数已经返回。这是可能的，因为当你返回一个函数时，你实际上是在返回对那个函数的引用。即使外部函数不再运行，内部函数仍然可以访问外部作用域中的变量。这可能没有多大意义，所以让我们来看一些例子。</p><h2 id="e6d7" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">闭包的例子</h2><p id="bbb3" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">假设我们想写一个函数，它有两个参数并返回这些参数的和。我们可以这样写这个函数:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="fd6f" class="lb lc iq me b gy mi mj l mk ml">function add(x, y) {</span><span id="0392" class="lb lc iq me b gy mm mj l mk ml">  return x + y;</span><span id="8e68" class="lb lc iq me b gy mm mj l mk ml">}</span></pre><p id="4ad5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在假设我们想创建一个函数，它总是返回两个数的和，不管这两个数是什么。我们可以通过使用闭包来实现这一点:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="5860" class="lb lc iq me b gy mi mj l mk ml">function makeAdder() {</span><span id="a129" class="lb lc iq me b gy mm mj l mk ml">  let x = 0;</span><span id="a31f" class="lb lc iq me b gy mm mj l mk ml">  let y = 1;</span><span id="85d1" class="lb lc iq me b gy mm mj l mk ml">  return function() {</span><span id="5c3d" class="lb lc iq me b gy mm mj l mk ml">    return x + y;</span><span id="dcd6" class="lb lc iq me b gy mm mj l mk ml">  };</span><span id="dde1" class="lb lc iq me b gy mm mj l mk ml">}</span><span id="a05a" class="lb lc iq me b gy mm mj l mk ml">let adder = makeAdder();</span><span id="b189" class="lb lc iq me b gy mm mj l mk ml">adder(); // returns 1</span></pre><p id="8ba9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了一个函数，加法器，它能记住传递给它的x和y的值。这是一个闭包的例子。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/907e12850a1c2e6db5165e1dc8f4c837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rSIIwQO6qMbabKqN"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@surface?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Surface</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="10eb" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">闭包在JavaScript中的实际应用</h2><p id="8ab0" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">闭包通常用在JavaScript中，比如创建需要记住创建环境信息的函数。例如，当您创建一个事件侦听器时，事件发生时调用的函数需要记住它附加到了什么元素。这可以使用闭包来完成:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f701" class="lb lc iq me b gy mi mj l mk ml">document.getElementById(‘some-element’).addEventListener(‘click’, function() {</span><span id="5fba" class="lb lc iq me b gy mm mj l mk ml">// this function has access to someElement</span><span id="cfc2" class="lb lc iq me b gy mm mj l mk ml">});</span></pre><p id="8ba2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在此示例中，传递给addEventListener的函数可以访问someElement，即使someElement没有显式传递给该函数。</p><p id="08b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">闭包的另一个常见用途是创建需要私有变量的函数。这可以通过在另一个函数中创建闭包来实现:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="40c9" class="lb lc iq me b gy mi mj l mk ml">function createCounter() {</span><span id="db6b" class="lb lc iq me b gy mm mj l mk ml">  let count = 0;</span><span id="d022" class="lb lc iq me b gy mm mj l mk ml">  return function() {</span><span id="7a1e" class="lb lc iq me b gy mm mj l mk ml">    count++;</span><span id="7056" class="lb lc iq me b gy mm mj l mk ml">    return count;</span><span id="6f3d" class="lb lc iq me b gy mm mj l mk ml">  };</span><span id="2861" class="lb lc iq me b gy mm mj l mk ml">}</span><span id="11e9" class="lb lc iq me b gy mm mj l mk ml">let counter = createCounter();</span><span id="224c" class="lb lc iq me b gy mm mj l mk ml">console.log(counter()); // 1</span><span id="2750" class="lb lc iq me b gy mm mj l mk ml">console.log(counter()); // 2</span><span id="72ba" class="lb lc iq me b gy mm mj l mk ml">counter.count; // undefined</span></pre><p id="d2f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如您所看到的，createCounter返回的函数可以访问变量count，即使该变量没有显式地传递给函数。然而，状态是私有的，我们不能访问count变量。</p><p id="2048" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是对闭包的简单介绍，以及它们在JavaScript中是如何工作的。如果您是闭包的新手，我建议您阅读更多关于闭包的内容，并做一些练习。通过一些理解和实践，闭包可以成为您编程武库中的一个强大工具。编码快乐！</p><p id="91c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mo">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">plain English . io</em></strong></a><em class="mo">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">Twitter</em></strong></a><em class="mo">和</em><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">LinkedIn</em></strong></a><em class="mo">。查看我们的</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mo">社区不和谐</em> </strong> </a> <em class="mo">加入我们的</em> <a class="ae kc" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mo">人才集体</em> </strong> </a> <em class="mo">。</em></p></div></div>    
</body>
</html>