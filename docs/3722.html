<html>
<head>
<title>How to Set Focus on an Input in Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Vue.js中设置输入焦点</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-focus-input-8bf54c2419a3?source=collection_archive---------7-----------------------#2022-09-20">https://javascript.plainenglish.io/vue-focus-input-8bf54c2419a3?source=collection_archive---------7-----------------------#2022-09-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="baaa" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于如何在Vue.js中轻松设置输入元素焦点的教程。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8694c1522d5941afc023180641414174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ijQ-6ZBorApr67-KEk4Jvg.png"/></div></div></figure><p id="56e9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在Vue.js中设置输入焦点:</p><ol class=""><li id="1e55" class="lk ll in kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">在<code class="fe lt lu lv lw b">input</code>元素上设置一个ref。</li><li id="df41" class="lk ll in kq b kr lx ku ly kx lz lb ma lf mb lj lp lq lr ls bi translated">从Vue实例的<code class="fe lt lu lv lw b">$refs</code>属性访问新的ref。</li><li id="7059" class="lk ll in kq b kr lx ku ly kx lz lb ma lf mb lj lp lq lr ls bi translated">在ref元素对象上调用<code class="fe lt lu lv lw b">focus()</code>方法。</li></ol><h1 id="dc18" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">在单击按钮时设置输入焦点</h1><p id="2788" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">例如:</p><p id="3f02" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lt lu lv lw b">App.js</code></p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="b893" class="nd md in lw b gy ne nf l ng nh">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;input<br/>      ref="name"<br/>      placeholder="Name"<br/>    /&gt;{{ ' ' }}<br/>    &lt;button @click="focusInput"&gt;Focus&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="f980" class="nd md in lw b gy ni nf l ng nh">&lt;script&gt;<br/>export default {<br/>  methods: {<br/>    focusInput() {<br/>      this.$refs.name.focus();<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/cffe2d449504bbf03127f3dd84782792.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/0*e5w9SKrfz8ArdvMq.gif"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">Clicking the button sets focus on the input</figcaption></figure><p id="b4d1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，我们通过将<code class="fe lt lu lv lw b">input</code> <code class="fe lt lu lv lw b">ref</code>属性设置为一个值(<code class="fe lt lu lv lw b">name</code>)来创建一个新的Vue实例ref。</p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="a003" class="nd md in lw b gy ne nf l ng nh">&lt;input<br/>  ref="name"<br/>  placeholder="Name"<br/>/&gt;</span></pre><p id="1a0a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这样做之后，我们就能够访问Vue实例的<code class="fe lt lu lv lw b">$refs</code>属性来访问表示输入元素的对象。然后我们调用这个对象上的<code class="fe lt lu lv lw b">focus()</code>方法来设置输入的焦点。</p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="f5e0" class="nd md in lw b gy ne nf l ng nh">this.$refs.name.focus();</span></pre><p id="a64e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们将<code class="fe lt lu lv lw b">focusInput()</code>方法设置为<code class="fe lt lu lv lw b">Focus</code>按钮的<code class="fe lt lu lv lw b">click</code>事件的处理程序。所以当点击按钮时，<code class="fe lt lu lv lw b">focusInput()</code>被调用，<code class="fe lt lu lv lw b">input</code>获得焦点。</p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="b0e5" class="nd md in lw b gy ne nf l ng nh">&lt;button @click="focusInput"&gt;Focus&lt;/button&gt;</span></pre><h1 id="6705" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">将焦点设置在自定义输入组件上</h1><p id="5bd9" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">定制输入组件对于抽象围绕<code class="fe lt lu lv lw b">input</code>元素构建的逻辑和重用以特定方式设计的<code class="fe lt lu lv lw b">input</code>元素非常有用。</p><p id="33e3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于定制组件，在其ref对象上调用<code class="fe lt lu lv lw b">focus()</code>将导致错误。为了让它工作，我们需要向自定义组件添加一个<code class="fe lt lu lv lw b">focus()</code>方法，该方法调用其根<code class="fe lt lu lv lw b">input</code>元素的<code class="fe lt lu lv lw b">focus()</code>方法。</p><p id="594e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><p id="c5b6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lt lu lv lw b">components/CustomInput.vue</code></p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="42e1" class="nd md in lw b gy ne nf l ng nh">&lt;template&gt;<br/>  &lt;input<br/>    placeholder="Name"<br/>    class="custom-input"<br/>    ref="input"<br/>  /&gt;<br/>&lt;/template&gt;</span><span id="b0a2" class="nd md in lw b gy ni nf l ng nh">&lt;script&gt;<br/>export default {<br/>  methods: {<br/>    // 👇 Create custom "focus" method<br/>    focus() {<br/>      this.$refs.input.focus();<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span><span id="7209" class="nd md in lw b gy ni nf l ng nh">&lt;style scoped&gt;<br/>.custom-input {<br/>  font-family: 'Segoe UI';<br/>  font-weight: bold;<br/>  font-size: 16px;<br/>  color: blue;<br/>  height: 30px;<br/>  width: 200px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="41a0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lt lu lv lw b">App.js</code></p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="2dd5" class="nd md in lw b gy ne nf l ng nh">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;custom-input ref="name"&gt;&lt;/custom-input&gt;<br/>    &lt;br /&gt;<br/>    &lt;br /&gt;<br/>    &lt;button @click="focusInput"&gt;Focus&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="a68a" class="nd md in lw b gy ni nf l ng nh">&lt;script&gt;<br/>import CustomInput from './components/CustomInput.vue';</span><span id="ceb2" class="nd md in lw b gy ni nf l ng nh">export default {<br/>  methods: {<br/>    focusInput() {<br/>      // 👇 call custom "focus" method<br/>      this.$refs.name.focus();<br/>    },<br/>  },<br/>  components: { CustomInput },<br/>};<br/>&lt;/script&gt;</span></pre><p id="60c0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们可以在单击按钮时将焦点设置在自定义输入组件上。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi no"><img src="../Images/17cb1251c72acd2c996cc80d80c9e425.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/0*T1Ac1E9X8Bl54zkx.gif"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">Clicking the button sets focus on the custom input component</figcaption></figure><h1 id="285a" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">页面加载后将焦点设置在输入上</h1><p id="332f" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">为了在页面加载后立即给出输入焦点，我们可以使用输入ref从Vue实例的<code class="fe lt lu lv lw b">mounted</code>生命周期钩子中调用<code class="fe lt lu lv lw b">focus()</code>方法。在组件被添加到DOM后，调用<code class="fe lt lu lv lw b">mounted</code>方法，这发生在页面加载时。</p><p id="d5e5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><p id="97a4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lt lu lv lw b">App.js</code></p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="b9ff" class="nd md in lw b gy ne nf l ng nh">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;input<br/>      ref="name"<br/>      placeholder="Name"<br/>    /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="ec4b" class="nd md in lw b gy ni nf l ng nh">&lt;script&gt;<br/>export default {<br/>  mounted() {<br/>    this.focusInput();<br/>  },<br/>  methods: {<br/>    focusInput() {<br/>      this.$refs.name.focus();<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi np"><img src="../Images/864f07870fde1f5b9e3ddd73e528df98.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/0*MnI1A309u03bPimd.gif"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">The input gains focus after the page loads.</figcaption></figure><h1 id="d552" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">重新渲染后将焦点设置在输入上</h1><p id="88eb" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">有些情况下，我们需要等待DOM更新后再调用<code class="fe lt lu lv lw b">focus()</code>来获得输入元素的焦点。</p><p id="04b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如，我们可能使用一个布尔变量来确定输入元素是否应该出现在DOM中。</p><p id="c7b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因为Vue批处理状态更新，input元素可能不会立即添加到DOM中，我们也不能立即访问它的ref。</p><p id="8804" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们可以使用<code class="fe lt lu lv lw b">nextTick()</code>实例方法来确保在调用<code class="fe lt lu lv lw b">focus()</code>之前修改布尔变量之后，DOM已经被更新为包含输入。</p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="d9d4" class="nd md in lw b gy ne nf l ng nh">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;!-- 👇 conditional rendering with "v-if" directive --&gt;<br/>    &lt;input<br/>      v-if="showInput"<br/>      ref="name"<br/>      placeholder="Name"<br/>    /&gt;<br/>    &lt;br /&gt;&lt;br /&gt;<br/>    &lt;button @click="focusInput"&gt;Show and focus&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="3a58" class="nd md in lw b gy ni nf l ng nh">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      showInput: false,<br/>    };<br/>  },<br/>  methods: {<br/>    focusInput() {<br/>      // 👇 Set boolean variable to show input<br/>      this.showInput = true;</span><span id="5e5a" class="nd md in lw b gy ni nf l ng nh">      this.$nextTick(() =&gt; {<br/>        // This callback will only be called after the<br/>        // DOM has been updated<br/>        this.$refs.name.focus();<br/>      });<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/634080604ddeb6fe13a8728149828d5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/0*BACCBquOTytouqcb.gif"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">The input gains focus after the DOM is updated to include it.</figcaption></figure><h1 id="7576" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">按Enter键后，将焦点设置在下一个输入上</h1><p id="bb81" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">假设我们有多个需要在页面上填充的输入元素。我们可以通过在用户按下回车键以表示他们完成了一次输入时，将注意力集中在随后的文本输入上来改进UX。</p><p id="a19a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们通过在第一个输入中为<code class="fe lt lu lv lw b">keypress</code>事件分配一个监听器来实现这一点。因为有了<code class="fe lt lu lv lw b">enter</code>事件修饰符，事件监听器只有在按下某个键并按下Enter键时才会被调用。</p><p id="f99e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们为第二个输入创建一个ref，在<code class="fe lt lu lv lw b">keypress.enter</code>事件监听器中，我们调用ref对象上的<code class="fe lt lu lv lw b">focus()</code>方法来设置第二个输入的焦点。</p><pre class="kd ke kf kg gt mz lw na nb aw nc bi"><span id="9a3d" class="nd md in lw b gy ne nf l ng nh">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;form&gt;<br/>      &lt;input<br/>        placeholder="1st name"<br/>        @keypress.enter="focusName2"<br/>      /&gt;<br/>      &lt;br /&gt;&lt;br /&gt;<br/>      &lt;input<br/>        ref="name2"<br/>        placeholder="2nd name"<br/>      /&gt;<br/>    &lt;/form&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="b1fe" class="nd md in lw b gy ni nf l ng nh">&lt;script&gt;<br/>export default {<br/>  methods: {<br/>    focusName2() {<br/>      this.$refs.name2.focus();<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/e11d7b8cfe5771c87e8ee0a877f2fca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/0*CnAzPqnF2kAOoKMg.gif"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">Pressing Enter sets focus on the next input</figcaption></figure></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><p id="44aa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ny">原载于</em><a class="ae nz" href="https://cbdev.link/769e3f" rel="noopener ugc nofollow" target="_blank"><em class="ny">codingbeautydev.com</em></a></p><h1 id="7df9" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">ES13中11个惊人的新JavaScript特性</h1><p id="bfde" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">本指南将带您了解ECMAScript 13中添加的所有最新功能。这些强大的新特性将会用更短、更富于表现力的代码来更新您的JavaScript。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/75a56482761ab63cfc081ad691d70d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*WqVjQY7sKZh3wld5WzkfTw.png"/></div></figure><p id="b288" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nz" href="https://cbdev.link/900477" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>