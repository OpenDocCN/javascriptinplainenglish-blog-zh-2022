<html>
<head>
<title>Understanding the Network Information API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解网络信息API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-the-network-information-api-c362a9feab98?source=collection_archive---------3-----------------------#2022-10-02">https://javascript.plainenglish.io/understanding-the-network-information-api-c362a9feab98?source=collection_archive---------3-----------------------#2022-10-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c002" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">下面是浏览器网络信息API的简短描述和一些例子。真正的规格可以在这里找到<a class="ae kc" href="https://wicg.github.io/netinfo/" rel="noopener ugc nofollow" target="_blank"/>。</h2></div><p id="4ba5" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我以前写过其他浏览器API，特别是<a class="ae kc" href="https://betterprogramming.pub/understanding-the-mutationobserver-api-f9ac9f93d1a2?source=your_stories_page-------------------------------------" rel="noopener ugc nofollow" target="_blank">变异观察器API </a>和<a class="ae kc" href="https://betterprogramming.pub/the-intersectionobserver-b19fca5a194e?source=your_stories_page-------------------------------------" rel="noopener ugc nofollow" target="_blank">交叉观察器API </a>。</p><p id="a267" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">并非所有的新浏览器都支持网络信息API，但是我们仍然可以在支持它的浏览器上使用它。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/89e2f90bb67aaffe042fc98a44d66117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YhE-qEKgdbWa1b5raT2x3A.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Device connection speed and type</figcaption></figure><h2 id="5350" class="lp lq in bd lr ls lt dn lu lv lw dp lx km ly lz ma kq mb mc md ku me mf mg mh bi translated">总之</h2><p id="677f" class="pw-post-body-paragraph kd ke in kf b kg mi jo ki kj mj jr kl km mk ko kp kq ml ks kt ku mm kw kx ky ig bi translated">API为您提供了关于客户端当前连接的信息。像这样简单的调用:<code class="fe mn mo mp mq b">navigator.connection</code>将为您提供如下结果:</p><pre class="la lb lc ld gt mr mq ms mt aw mu bi"><span id="1d31" class="lp lq in mq b gy mv mw l mx my">{<br/>   downlink: 10,<br/>   effectiveType: "4g",<br/>   onchange: null,<br/>   rtt: 50,<br/>   saveData: false<br/>}</span></pre><p id="6f16" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">这个对象在上面被简化了，但是你明白了。<br/>您将收到有关用户连接的信息。是一个非常简单的API，只有一种方法可以使用。</p><p id="d2da" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">您可以做的是附加一个事件侦听器，每当连接发生变化时，它就会“回叫您”。<br/>看起来是这样的:</p><div class="mz na gp gr nb nc"><a href="https://stackblitz.com/edit/vue-ags4fb?embed=1&amp;file=src/components/HelloWorld.vue" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">网络信息Api - StackBlitz</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">Vue.js的启动项目</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">stackblitz.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq lj nc"/></div></div></a></div><h1 id="dfd6" class="nr lq in bd lr ns nt nu lu nv nw nx lx jt ny ju ma jw nz jx md jz oa ka mg ob bi translated">用例</h1><p id="5fa4" class="pw-post-body-paragraph kd ke in kf b kg mi jo ki kj mj jr kl km mk ko kp kq ml ks kt ku mm kw kx ky ig bi translated">我能想到一些这个API有用的用例。其中之一就是我如何发现API的。</p><h2 id="31b5" class="lp lq in bd lr ls lt dn lu lv lw dp lx km ly lz ma kq mb mc md ku me mf mg mh bi translated">提供不同的内容</h2><p id="c1a3" class="pw-post-body-paragraph kd ke in kf b kg mi jo ki kj mj jr kl km mk ko kp kq ml ks kt ku mm kw kx ky ig bi translated">一些网站会从向连接不良的用户显示较小版本的应用程序中受益。这非常符合现代PWA网站的理念，你可以根据可用的速度，使用有关连接的信息做出许多不同的选择。</p><h2 id="03c7" class="lp lq in bd lr ls lt dn lu lv lw dp lx km ly lz ma kq mb mc md ku me mf mg mh bi translated">衡量绩效</h2><p id="759d" class="pw-post-body-paragraph kd ke in kf b kg mi jo ki kj mj jr kl km mk ko kp kq ml ks kt ku mm kw kx ky ig bi translated">最近，我不得不衡量许多网站的表现。我在代码中定义了许多测量点，并将它们报告给中央系统进行分析。有了最初的数据，我意识到，有了连接速度可以帮助我过滤掉连接不好的设备。对于调试非常有帮助，它也让我决定如何处理慢速连接的用户。</p><h1 id="3898" class="nr lq in bd lr ns nt nu lu nv nw nx lx jt ny ju ma jw nz jx md jz oa ka mg ob bi translated">考虑</h1><p id="6f47" class="pw-post-body-paragraph kd ke in kf b kg mi jo ki kj mj jr kl km mk ko kp kq ml ks kt ku mm kw kx ky ig bi translated">由于该API通常无法在所有浏览器上使用，因此仍应谨慎使用。然而，我确实认为在工具箱中有一个很好的小API，用于您想要区分或使用连接信息来改变您的逻辑的情况。</p><p id="4f22" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><em class="oc">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="oc">plain English . io</em></strong></a><em class="oc">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf io"> <em class="oc">免费周报</em> </strong> </a> <em class="oc">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="oc">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="oc">LinkedIn</em></strong></a><strong class="kf io"><em class="oc"/></strong><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="oc">YouTube</em></strong></a><strong class="kf io"><em class="oc">，以及</em></strong><em class="oc"/><a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf io"><em class="oc">不和</em> </strong> </a>  <em class="oc">对成长黑客感兴趣？检查</em> <a class="ae kc" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf io"> <em class="oc">电路</em> </strong> </a> <strong class="kf io"> <em class="oc">。</em> </strong></p></div></div>    
</body>
</html>