<html>
<head>
<title>Understanding the Basic Concepts of React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解React钩子的基本概念</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/fundamental-concepts-of-react-hooks-259d2d5aa901?source=collection_archive---------12-----------------------#2022-10-06">https://javascript.plainenglish.io/fundamental-concepts-of-react-hooks-259d2d5aa901?source=collection_archive---------12-----------------------#2022-10-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1beb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">React 16.8引入了一种叫做钩子的新模式，使用功能组件来处理状态和其他React特性。在React版之前，开发人员只能使用类组件来处理状态和生命周期。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/764af090f13168f36f5d1aeff294da77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s9lCCoLh4ubvUSAlZRyiIQ.jpeg"/></div></div></figure><blockquote class="ku"><p id="b1e7" class="kv kw in bd kx ky kz la lb lc ld kh dk translated"><em class="le">钩子让你一直使用函数，而不是在函数、类、hoc、渲染道具之间切换。</em></p></blockquote><p id="e007" class="pw-post-body-paragraph jk jl in jm b jn lf jp jq jr lg jt ju jv lh jx jy jz li kb kc kd lj kf kg kh ig bi translated">开始使用React钩子的最好方法是学习如何使用它们。在这篇文章中，我将分享“在使用钩子时你应该做什么和不应该做什么”，以避免任何含糊不清。最后，我补充了几点来帮助你理解Hook在第三方库中的支持。</p><h1 id="bdc0" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><strong class="ak"> 1。遵循挂钩规则</strong></h1><blockquote class="mi mj mk"><p id="7b0e" class="jk jl ml jm b jn jo jp jq jr js jt ju mm jw jx jy mn ka kb kc mo ke kf kg kh ig bi translated"><strong class="jm io">总是在React函数的顶层使用钩子</strong></p></blockquote><ol class=""><li id="af9b" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh mu mv mw mx bi translated">不要在循环、条件或嵌套函数中调用钩子。</li></ol><p id="e812" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.在任何提前返回之前，总是使用钩子。</p><p id="292d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.钩子在每次渲染时都以同样的顺序被调用。</p><p id="773a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过遵循这条规则，您可以确保每次组件呈现时都以相同的顺序调用钩子。这允许React正确地保存多个<code class="fe my mz na nb b">useState</code>和<code class="fe my mz na nb b">useEffect</code>调用之间的钩子状态。</p><blockquote class="mi mj mk"><p id="9177" class="jk jl ml jm b jn jo jp jq jr js jt ju mm jw jx jy mn ka kb kc mo ke kf kg kh ig bi translated">不要从常规的JavaScript函数中调用钩子。</p></blockquote><p id="c3d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">相反:</p><p id="7f7e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">1.您可以从React函数组件调用挂钩</p><p id="d275" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.您可以从自定义挂钩中调用挂钩</p><h1 id="afcc" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">2.自定义<strong class="ak">挂钩名称必须以“</strong> <code class="fe my mz na nb b"><strong class="ak">use"</strong></code> <strong class="ak">开头，后跟一个大写字母</strong></h1><p id="1780" class="pw-post-body-paragraph jk jl in jm b jn nc jp jq jr nd jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">像useState(内置)或useUserStatus，这是非常重要的。没有它，React就不能自动检查对Hook规则的违反</p><h1 id="c276" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><strong class="ak"> 3。使用名为eslint-plugin-react-hooks的ESLint插件来执行钩子的</strong>规则</h1><p id="2263" class="pw-post-body-paragraph jk jl in jm b jn nc jp jq jr nd jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">要在您的项目中设置它，请遵循以下说明</p><p id="c11b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">假设您已经安装了ESLint，运行:</p><pre class="kj kk kl km gt nh nb ni nj aw nk bi"><span id="8672" class="nl ll in nb b gy nm nn l no np"># npm<br/>npm install eslint-plugin-react-hooks --save-dev</span><span id="bfbe" class="nl ll in nb b gy nq nn l no np"># yarn<br/>yarn add eslint-plugin-react-hooks --dev</span></pre><p id="7509" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后扩展推荐的eslint配置:</p><pre class="kj kk kl km gt nh nb ni nj aw nk bi"><span id="8c86" class="nl ll in nb b gy nm nn l no np">{<br/>  "extends": [<br/>    // ...<br/>    "plugin:react-hooks/recommended"<br/>  ]<br/>}</span></pre><p id="e2e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于自定义/高级配置，请遵循此处提到的详细信息<a class="ae nr" href="https://www.npmjs.com/package/eslint-plugin-react-hooks" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">eslint-plugin-react-hooks</strong></a></p><p id="b821" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ml">注:该插件默认包含在</em><a class="ae nr" href="https://reactjs.org/docs/create-a-new-react-app.html#create-react-app" rel="noopener ugc nofollow" target="_blank"><em class="ml">Create React App</em></a><em class="ml">中。</em></p><h1 id="9ffd" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">4.你不能在类组件中使用钩子<em class="le">，</em></h1><p id="a986" class="pw-post-body-paragraph jk jl in jm b jn nc jp jq jr nd jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">但是你绝对可以在同一个项目中用钩子混合类和函数组件。</p><h1 id="189a" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">5.自定义挂钩中的状态和效果是完全隔离的</h1><p id="cb9e" class="pw-post-body-paragraph jk jl in jm b jn nc jp jq jr nd jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">使用同一个钩子的两个组件不能共享状态和效果。但是你可以在钩子之间传递信息。</p><h2 id="370c" class="nl ll in bd lm ns nt dn lq nu nv dp lu jv nw nx ly jz ny nz mc kd oa ob mg oc bi translated">如果你已经走了这么远，非常感谢你阅读我的帖子，这里有一些奖励点给你</h2><ol class=""><li id="05f5" class="mp mq in jm b jn nc jr nd jv od jz oe kd of kh mu mv mw mx bi translated">与componentDidMount、componentDidUpdate、componentWillUnmount相关的用例可以由<a class="ae nr" href="https://reactjs.org/docs/hooks-reference.html#useeffect" rel="noopener ugc nofollow" target="_blank"> useEffect挂钩</a>覆盖</li></ol><p id="743d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.还没有钩子来覆盖getSnapshotBeforeUpdate、getDerivedStateFromError和componentDidCatch生命周期。</p><p id="1cdd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.从7.1.0版开始，React Redux中增加了钩子支持</p><p id="be7e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">4.React路由器<a class="ae nr" href="https://reacttraining.com/react-router/web/api/Hooks" rel="noopener ugc nofollow" target="_blank">从v5.1开始支持钩子</a></p><p id="4abd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望这篇文章能帮助你学习React钩子的规则以及如何正确使用它们。如果你喜欢这篇文章，请使用👏按钮。关注我，获取更多关于React、React Native、JavaScript和软件开发的文章。</p><p id="d595" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ml">更多内容看</em> <a class="ae nr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ml">说白了就是</em> </strong> </a> <em class="ml">。报名参加我们的</em> <a class="ae nr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ml">免费周报</em> </strong> </a> <em class="ml">。关注我们关于</em> <a class="ae nr" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ml">推特</em> </strong> </a>，<a class="ae nr" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ml">领英</em> </strong> </a> <strong class="jm io"> <em class="ml">，</em></strong><a class="ae nr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ml">YouTube</em></strong></a><strong class="jm io"><em class="ml">，以及</em></strong><em class="ml"/><a class="ae nr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ml">不和</em> </strong> </a>  <em class="ml">对成长黑客感兴趣？检查出</em> <a class="ae nr" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ml">电路</em> </strong> </a> <strong class="jm io"> <em class="ml">。</em>T71】</strong></p></div></div>    
</body>
</html>