<html>
<head>
<title>Patterns of JavaScript: Builder Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript模式:构建器模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/patterns-of-javascript-builder-pattern-fb6cd3aca35b?source=collection_archive---------4-----------------------#2022-12-01">https://javascript.plainenglish.io/patterns-of-javascript-builder-pattern-fb6cd3aca35b?source=collection_archive---------4-----------------------#2022-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="66f1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用一个自动填充的战利品箱来解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/93bfe03f86e76b8b69f49998d7bd111f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ul5ZT5L00w-olZF-oV5vyw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com/" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><p id="b472" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用JavaScript开发时，很快就很难创建复杂的对象。随着时间的推移，当你的应用程序增长时，它会很快变得令人不知所措。</p><p id="fe28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">构建器设计模式将帮助你把这个复杂的</em> </strong>分解成简单的小步骤。本文中有两个<em class="ls">操作指南</em>和详细示例。</p><h1 id="7862" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">简而言之，构建器模式</h1><p id="9750" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这种模式让调用代码(客户端)通过指定类型和内容来构造一个复杂的对象。所有构造细节都被隐藏。</p><h1 id="6472" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">何时&amp;为什么使用构建器模式</h1><p id="0007" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">许多人使用<em class="ls"> Builder </em>来简化创建复杂对象的客户端代码。客户仍然可以告诉做什么，但不知道细节。</p><p id="8d13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最好的例子是一个重复但也非常复杂的复合对象。有了构建器，你就获得了封装的力量(<a class="ae kv" href="https://www.gofpatterns.com/" rel="noopener ugc nofollow" target="_blank"> GoF模式</a>)。</p><p id="b8b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，最后一步会创建新的对象，因此<em class="ls">构建者</em>很容易参与到流畅的接口中，这将多个方法调用链接在一起。</p><p id="e6e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">经验法则</em> </strong> <em class="ls">:如果你的对象很复杂，它的构造器需要很多参数，你最好用一个构造器。</em></p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="3724" class="lt lu iq bd lv lw mx ly lz ma my mc md jw mz jx mf jz na ka mh kc nb kd mj mk bi translated">模式概述</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/d9ee6c15b8ec0106f4608574c1f1939e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGfRYbZYP1Xb8Q0iMxRWNA.png"/></div></div></figure><p id="8ded" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">该模式涉及:</strong></p><ul class=""><li id="d742" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><strong class="ky ir"> Director: </strong> <em class="ls">一个类，可以用来定义方法，确保步骤按照特定的顺序执行，构建日常对象(可选)。</em></li><li id="451a" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir">抽象构建器→具体构建器:</strong> <em class="ls">多步构建器接口。组装产品并维护它。返回新创建的产品。例1中的</em> <code class="fe nr ns nt nu b">class PotionBuilder</code> <em class="ls">。(由于没有抽象构建者，具体构建者是抽象构建者和构建者的混合体)</em></li><li id="fec1" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir">产品:</strong>组装起来的复杂物件。在示例代码<code class="fe nr ns nt nu b">Potion</code>中。</li></ul><h1 id="16ba" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">示例1:简单的药剂生成器</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/02a68ae175a55b28b687b120739e7ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vsMmtW_uDmwSC-gTfM7pxQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com/" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><h2 id="314c" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">产品</h2><p id="7f2c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">让我们从我们渴望的产品开始:一个<code class="fe nr ns nt nu b">Potion</code>:</p><p id="2bdc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">定义一个有意义的药剂，需要一个<code class="fe nr ns nt nu b">name</code>、一个<code class="fe nr ns nt nu b">restoreValue</code>和一个<code class="fe nr ns nt nu b">unit</code>被药剂恢复(<em class="ls">生命值、法力值或者耐力值</em>)。</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="922e" class="om lu iq nu b be on oo l op oq">class Potion {<br/>    constructor(name, restoreValue, unit) {<br/>        this.name = name<br/>        this.restoreValue = restoreValue // in lbs<br/>        this.unit = unit<br/>    }<br/><br/>    drink() {<br/>        console.log(`Consuming: ${this.name}. It restored ${this.restoreValue} ${this.unit}.`)<br/>    }<br/>}</span></pre><p id="9354" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于演示的目的，它有方法<code class="fe nr ns nt nu b">drink()</code>在以后使用它并得到一个漂亮的<code class="fe nr ns nt nu b">console</code>打印输出。</p><h2 id="4bc4" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">混凝土建筑商/建筑商</h2><p id="9216" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">构建器</em> </strong>被称为<code class="fe nr ns nt nu b">PotionBuilder</code>，分别执行每个构建步骤。你将能够锁住它们。</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="a589" class="om lu iq nu b be on oo l op oq">class PotionBuilder {<br/>    constructor(name) {<br/>        this.name = name;<br/>    }<br/><br/>    setRestoreValue(value) {<br/>        this.restore = value;<br/>        return this<br/>    }<br/><br/>    setUnitToRestore(unit) {<br/>        this.unit = unit;<br/>        return this;<br/>    }<br/><br/>    build() {<br/>        if (!('restore' in this)) {<br/>            throw new Error('Restore value is missing')<br/>        }<br/>        if (!('unit' in this)) {<br/>            throw new Error('Unit to restore is missing')<br/>        }<br/>        return new Potion(this.name, this.restore, this.unit)<br/>    }<br/>}</span></pre><p id="c7e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它有一个构造函数来给药剂命名，还有两个方法来设置创建过程的值:<code class="fe nr ns nt nu b">setRestoreValue()</code>和<code class="fe nr ns nt nu b">setUnitToRestore()</code>。</p><p id="85a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只要不调用<code class="fe nr ns nt nu b">build()</code>方法，药剂就存在于构建器的字段中，可以被下一次调用覆盖。<code class="fe nr ns nt nu b">build()</code>是返回药剂实例的方法。</p><p id="0ba1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您在设置<code class="fe nr ns nt nu b">restoreValue</code>或<code class="fe nr ns nt nu b">unit</code>之前继续<code class="fe nr ns nt nu b">build()</code>，则会抛出一个错误，通知您缺少值。</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="5f0d" class="om lu iq nu b be on oo l op oq">throw new Error('Restore value is missing')<br/><br/>// snip<br/><br/>throw new Error('Unit to restore is missing')</span></pre><h2 id="1910" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">抽象生成器</h2><p id="6e77" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">由于JavaScript不支持抽象类，你不能创建<strong class="ky ir"><em class="ls">abstract builder</em></strong>。</p><blockquote class="or os ot"><p id="e0fa" class="kw kx ls ky b kz la jr lb lc ld ju le ou lg lh li ov lk ll lm ow lo lp lq lr ij bi translated">如果您想为自己构建一个控制器，请确保所有的<strong class="ky ir"> <em class="iq">构建器</em> </strong>为<strong class="ky ir"> <em class="iq">控制器</em> </strong>的工作实现相同的多步骤接口。</p></blockquote><h2 id="b459" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">客户，也就是通话代码</h2><p id="2386" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">要有效地调用构建器并根据需要链接步骤，只需创建一个新的构建器实例并链接所有必要的步骤。</p><p id="21a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建对象后，调用<code class="fe nr ns nt nu b">build()</code>返回对象。</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="ce68" class="om lu iq nu b be on oo l op oq">const potion = new PotionBuilder('Minor Mana Potion')<br/>    .setRestoreValue(25)<br/>    .setUnitToRestore('MP')<br/>    .build()</span></pre><p id="3f55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种药剂会有以下效果:</p><ul class=""><li id="5ef0" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">名称</em> </strong>:少量法力药剂</li><li id="6dab" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">恢复</em> </strong> : 25</li><li id="8a24" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">单位恢复:</em> </strong>法力点(MP)</li></ul><h1 id="f306" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">运行代码</h1><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="c4f9" class="om lu iq nu b be on oo l op oq">class PotionBuilder {<br/>    constructor(name) {<br/>        this.name = name;<br/>    }<br/><br/>    setRestoreValue(value) {<br/>        this.restore = value;<br/>        return this<br/>    }<br/><br/>    setUnitToRestore(unit) {<br/>        this.unit = unit;<br/>        return this;<br/>    }<br/><br/>    build() {<br/>        if (!('restore' in this)) {<br/>            throw new Error('Restore value is missing')<br/>        }<br/>        if (!('unit' in this)) {<br/>            throw new Error('Unit to restore is missing')<br/>        }<br/>        return new Potion(this.name, this.restore, this.unit)<br/>    }<br/>}<br/><br/>class Potion {<br/>    constructor(name, restoreValue, unit) {<br/>        this.name = name<br/>        this.restoreValue = restoreValue // in lbs<br/>        this.unit = unit<br/>    }<br/><br/>    drink() {<br/>        console.log(`Consuming: ${this.name}. It restored ${this.restoreValue} ${this.unit}.`)<br/>    }<br/>}<br/><br/>const potion = new PotionBuilder('Minor Mana Potion')<br/>    .setRestoreValue(25)<br/>    .setUnitToRestore('MP')<br/>    .build()<br/><br/><br/>potion.drink()</span></pre><p id="a399" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">包括<code class="fe nr ns nt nu b">potion.drink()</code>的最后一行，你立即喝完饮料，得到以下打印结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/4a2d72967a0548d1ca0dad1f312e91e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*P2oz0a48TlQYhh6ffpW9xA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Printout for Example 1</figcaption></figure></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="5b1b" class="lt lu iq bd lv lw mx ly lz ma my mc md jw mz jx mf jz na ka mh kc nb kd mj mk bi translated">例2:自填式百宝箱</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/357c6ab028f22c347c76737e1c486ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xocLPKR_4KYMWC6PQ3eDNQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image made by the <a class="ae kv" href="http://www.arnoldcode.com/" rel="noopener ugc nofollow" target="_blank">Author</a> via Canva.com</figcaption></figure><p id="a604" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">虽然什么都说了</em><strong class="ky ir"/><em class="ls"/><strong class="ky ir">但是我要给你看一个很酷的东西</strong> <em class="ls">。</em></p><p id="dd86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想给你看一个能自己创造内容的箱子。</p><p id="4f1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">软件开发</em>的主要目标是创造:</p><blockquote class="oy"><p id="4b3a" class="oz pa iq bd pb pc pd pe pf pg ph lr dk translated">消耗配置文件的代码</p><p id="4c97" class="oz pa iq bd pb pc pd pe pf pg ph lr dk translated">产生你想要的任何结果。</p></blockquote><figure class="pj pk pl pm pn kk gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/3997992ccfde44c68b341c7f063d6b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*Xp5e4ll6Ty_iDXIfIIAvqg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Printout for Example 2</figcaption></figure><p id="15ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那你需要什么？</p><ul class=""><li id="308e" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">代码从<code class="fe nr ns nt nu b">Example 1</code>开始没有任何变化</li><li id="d033" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">可以说，一个“导演”将是一个新的类别<code class="fe nr ns nt nu b">Chest</code></li><li id="c6c1" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">几个<code class="fe nr ns nt nu b">random</code>数字</li><li id="a78a" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><em class="ls">记忆跨度短，要遵循指令</em>😉</li></ul><h2 id="27f6" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">步骤1:创建配置</h2><p id="6c78" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">正如我之前说过的，我想要的圣诞礼物就是一个配置(<code class="fe nr ns nt nu b">options</code>):</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="94bf" class="om lu iq nu b be on oo l op oq">options = {<br/>    kinds: ['Health', 'Mana', 'Sprint'],<br/>    units: ['HP', 'MP', 'EN'],<br/>    prefixes: ['Minor', 'Small', 'Lesser', '', 'Greater', 'Superior', 'Legendary'],<br/>    restoreValues: [25, 50, 75, 100, 125, 200, 400],<br/>}</span></pre><h2 id="5984" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">步骤2:将配置添加到新的控制器类</h2><p id="0a37" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">config是我们类中的一个字段。<code class="fe nr ns nt nu b">Chest</code>:</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="9f6a" class="om lu iq nu b be on oo l op oq">class Chest {<br/>    options = {<br/>        kinds: ['Health', 'Mana', 'Sprint'],<br/>        units: ['HP', 'MP', 'EN'],<br/>        prefixes: ['Minor', 'Small', 'Lesser', '', 'Greater', 'Superior', 'Legendary'],<br/>        restoreValues: [25, 50, 75, 100, 125, 200, 400],<br/>    }<br/>}</span></pre><h2 id="bd4b" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">步骤3:自主创建内容</h2><p id="ef2b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">修改该类，使其具有一个名为<code class="fe nr ns nt nu b">content</code>的字段来存储可查询的项目。在<code class="fe nr ns nt nu b">constructor</code>中，一个新的方法<code class="fe nr ns nt nu b">createLoot()</code>将被调用:</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="15c9" class="om lu iq nu b be on oo l op oq">class Chest {<br/>    options = {<br/>        kinds: ['Health', 'Mana', 'Sprint'],<br/>        units: ['HP', 'MP', 'EN'],<br/>        prefixes: ['Minor', 'Small', 'Lesser', '', 'Greater', 'Superior', 'Legendary'],<br/>        restoreValues: [25, 50, 75, 100, 125, 200, 400],<br/>    }<br/><br/>    content = [];<br/><br/><br/>    constructor() {<br/>        this.createLoot();<br/>    }<br/>}</span></pre><p id="3119" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">解释:</p><ul class=""><li id="72e9" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">种类</em> </strong>:建造药剂的种类</li><li id="e11b" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">单位</em> </strong>:恢复的种类(必须与<em class="ls">种类</em>有相同的索引链接)</li><li id="c80d" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">前缀</em> </strong>:表示药剂恢复多少的名称</li><li id="f488" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">恢复值</em> </strong>:与前缀挂钩的索引，保证少量药剂不会恢复400单位的HP/MP/EN(durance)</li></ul><p id="8de3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">结果可能各不相同，所以这里有几个例子</em></p><ul class=""><li id="15e5" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated">次要生命药剂恢复25点生命</li><li id="754c" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">传奇法力药水恢复400 MP</li><li id="e6ba" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">小冲刺药水回复50 EN</li></ul><h2 id="7b7d" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">第四步:随机生成器</h2><p id="721f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在你需要一些随机物品来制造大量的药剂:</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="980c" class="om lu iq nu b be on oo l op oq">createLoot() {<br/>    const lootCount = Math.floor(Math.random() * 100);<br/><br/>    for (let i = 0; i &lt; lootCount; i++) {<br/>        const randomKind = Math.floor(Math.random() * this.options.kinds.length);<br/>        const randomPrefix = Math.floor(Math.random() * this.options.prefixes.length);<br/><br/>        const potionName = this.options.prefixes[randomPrefix] + ' ' + this.options.kinds[randomKind] + ' Potion';<br/>        const unit = this.options.units[randomKind];<br/>        const restoreValue = this.options.restoreValues[randomPrefix];<br/><br/>        const potion =<br/>            new PotionBuilder(potionName)<br/>                .setUnitToRestore(unit)<br/>                .setRestoreValue(restoreValue)<br/>                .build()<br/>        this.content.push(potion)<br/>    }<br/>}</span></pre><p id="ed9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">他们都是做什么的？</em> </strong></p><ul class=""><li id="07aa" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls"> lootCount </em> </strong>:指定箱子要装多少物品</li><li id="16f7" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls"> for循环</em> </strong>:迭代<code class="fe nr ns nt nu b">lootCount</code>用<em class="ls"> PotionBuilder </em>构建每一项</li><li id="c63c" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls"> randomKind </em> </strong>:访问<code class="fe nr ns nt nu b">options</code>配置和数组的数字。准确地说是<code class="fe nr ns nt nu b">options.kinds</code>和<code class="fe nr ns nt nu b">options.units</code>(记住它们需要相同的索引)</li><li id="85cb" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls"> randomPrefix </em> </strong>:访问<code class="fe nr ns nt nu b">options</code>配置和数组的数字。<br/>准确地说是<code class="fe nr ns nt nu b">options.prefixes</code>和<code class="fe nr ns nt nu b">options.restoreValues</code>(记住它们需要相同的索引)</li><li id="7d85" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">药剂名称</em> </strong>:随机生成的药剂名称</li><li id="89d1" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">单位</em> </strong>:它将恢复的随机生成的单位</li><li id="8961" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">恢复值</em> </strong>:药剂将恢复的随机生成值</li><li id="92bb" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><strong class="ky ir"> <em class="ls">药水</em> </strong>:每次迭代使用<code class="fe nr ns nt nu b">PotionBuilder</code>实例并根据方法设置值而创建的药水</li><li id="856b" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated">最后，每种药剂都会被推入箱子的<code class="fe nr ns nt nu b">content</code>阵列中</li></ul><h2 id="7088" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">第五步:打开箱子</h2><p id="3de9" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">您需要为箱子添加一个处理方法，以决定打开箱子时会发生什么:</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="4972" class="om lu iq nu b be on oo l op oq">open() {<br/>    console.log(`You found ${this.content.length} items!`);<br/>    this.content.forEach(item =&gt; console.log(item))<br/>}</span></pre><h2 id="d28a" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">第六步:保持概述</h2><p id="f668" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是整个班级:</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="c4cb" class="om lu iq nu b be on oo l op oq">class Chest {<br/>    options = {<br/>        kinds: ['Health', 'Mana', 'Sprint'],<br/>        units: ['HP', 'MP', 'EN'],<br/>        prefixes: ['Minor', 'Small', 'Lesser', '', 'Greater', 'Superior', 'Legendary'],<br/>        restoreValues: [25, 50, 75, 100, 125, 200, 400],<br/>    }<br/><br/>    content = [];<br/><br/><br/>    constructor() {<br/>        this.createLoot();<br/>    }<br/><br/>    createLoot() {<br/>        const lootCount = Math.floor(Math.random() * 100);<br/><br/>        for (let i = 0; i &lt; lootCount; i++) {<br/>            const randomKind = Math.floor(Math.random() * this.options.kinds.length);<br/>            const randomPrefix = Math.floor(Math.random() * this.options.prefixes.length);<br/><br/>            const potionName = this.options.prefixes[randomPrefix] + ' ' + this.options.kinds[randomKind] + ' Potion';<br/>            const unit = this.options.units[randomKind];<br/>            const restoreValue = this.options.restoreValues[randomPrefix];<br/><br/>            const potion =<br/>                new PotionBuilder(potionName)<br/>                    .setUnitToRestore(unit)<br/>                    .setRestoreValue(restoreValue)<br/>                    .build()<br/>            this.content.push(potion)<br/>        }<br/>    }<br/><br/>    open() {<br/>        console.log(`You found ${this.content.length} items!`);<br/>        this.content.forEach(item =&gt; console.log(item))<br/>    }<br/><br/>}</span></pre><h2 id="d4e9" class="nw lu iq bd lv nx ny dn lz nz oa dp md lf ob oc mf lj od oe mh ln of og mj oh bi translated">最后一步:运行代码</h2><p id="863d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">如果所有内容都在同一个文件中，那么只需添加以下代码:</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="a407" class="om lu iq nu b be on oo l op oq">const bossLoot = new Chest();<br/>bossLoot.open();</span></pre><p id="f1b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行JS文件:</p><pre class="kg kh ki kj gt oi nu oj bn ok ol bi"><span id="0f6a" class="om lu iq nu b be on oo l po oq">node builder_pattern.js</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/cf16aa9dbd9514f11b269111202dce6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*zp3Rx6K4jKsUnHVbit2z3w.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Printout for Example 2</figcaption></figure><h1 id="37b0" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">如果您希望将类和执行代码分开:</h1><div class="pq pr gp gr ps pt"><a href="https://medium.com/nerd-for-tech/esmodules-in-javascript-3-minute-guide-04-3e7c7240c5d4" rel="noopener follow" target="_blank"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd ir gy z fp py fr fs pz fu fw ip bi translated">JavaScript中的ESModules分钟指南#04</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">获取备忘单&amp;学习如何用ES模块导入和导出JS代码</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">medium.com</p></div></div><div class="qc l"><div class="qd l qe qf qg qc qh kp pt"/></div></div></a></div><p id="8055" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://arnoldcodeacademy.ck.page/26-web-dev-cheat-sheets" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">节省自己大量的时间，专注于重要的主题。</em> </strong> </a></p><p id="89ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">说白了就是io </em> </strong> </a> <em class="ls">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">推特</em> </strong> </a>，<a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">领英</em> </strong> </a> <em class="ls">，</em><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">YouTube</em></strong></a><em class="ls"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">不和</em> </strong> </a> <em class="ls">。对增长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">电路</em> </strong> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>