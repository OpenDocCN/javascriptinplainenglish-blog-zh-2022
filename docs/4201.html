<html>
<head>
<title>Create a Virtual Assistant in 100 Lines of JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨100è¡ŒJavaScriptåˆ›å»ºä¸€ä¸ªè™šæ‹ŸåŠ©æ‰‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/create-a-complete-ai-assistant-in-100-lines-of-javascript-a80a40a8dfa9?source=collection_archive---------5-----------------------#2022-11-08">https://javascript.plainenglish.io/create-a-complete-ai-assistant-in-100-lines-of-javascript-a80a40a8dfa9?source=collection_archive---------5-----------------------#2022-11-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c67c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ç”¨Webè¯­éŸ³APIæ„å»ºä¸€ä¸ªç®€å•çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/718446d19d19aa678d4a05aebdeccd8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XAa4i4pbV4uy_Sl6"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="https://unsplash.com/photos/OYzbqk2y26c" rel="noopener ugc nofollow" target="_blank">Photo</a> on Unsplash</figcaption></figure><p id="929e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨å‡ è¡ŒJavaScriptåœ¨æµè§ˆå™¨ä¸­åˆ›å»ºä¸€ä¸ªåä¸º<strong class="kv io">ç´¢å°¼å¨…</strong>çš„è™šæ‹ŸåŠ©æ‰‹(å°±åƒSiriæˆ–Cortanaä¸€æ ·)ã€‚è¿™ä¸ªæœºå™¨äººä¼šå¬ç”¨æˆ·çš„è¯­éŸ³å‘½ä»¤ï¼Œå¹¶ç”¨åˆæˆè¯­éŸ³åšå‡ºå›åº”ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åªä½¿ç”¨<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API" rel="noopener ugc nofollow" target="_blank">ç½‘ç»œè¯­éŸ³API </a>ï¼Œåœ¨ä¸ç‰ºç‰²å¤ªå¤šåŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œè®©åº”ç”¨ç¨‹åºå°½å¯èƒ½ç®€å•ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæµ‹è¯•app <a class="ae ks" href="https://nasosg.github.io/sonya-assistant-medium/" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><h1 id="cd32" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">æ‚¨éœ€è¦çš„å·¥å…·</h1><ul class=""><li id="00f6" class="mh mi in kv b kw mj kz mk lc ml lg mm lk mn lo mo mp mq mr bi translated"><a class="ae ks" href="https://www.google.com/chrome/" rel="noopener ugc nofollow" target="_blank">è°·æ­Œæµè§ˆå™¨</a></li><li id="9069" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated">æ‚¨é€‰æ‹©çš„æ–‡æœ¬ç¼–è¾‘å™¨</li></ul></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="3b54" class="lp lq in bd lr ls ne lu lv lw nf ly lz jt ng ju mb jw nh jx md jz ni ka mf mg bi translated">è¯­éŸ³åˆ°æ–‡æœ¬åŠŸèƒ½çš„API</h1><p id="5718" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå°†æ–‡æœ¬å’Œè¯­éŸ³ç›¸äº’è½¬æ¢çš„APIã€‚å¸Œæœ›è¿™ä¸ªå·¥å…·å­˜åœ¨ï¼Œå®ƒå°±æ˜¯<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API" rel="noopener ugc nofollow" target="_blank"> Webè¯­éŸ³API </a>ï¼Œå®ƒæä¾›äº†ä¸¤ä¸ªä¸åŒçš„åŠŸèƒ½é¢†åŸŸâ€”â€”è¯­éŸ³è¯†åˆ«å’Œè¯­éŸ³åˆæˆ(æ–‡æœ¬åˆ°è¯­éŸ³)ã€‚æˆ‘ä»¬å°†åœ¨è¿™ä¸ªæ•…äº‹ä¸­æ¢ç´¢è¿™ä¸¤ä¸ªé¢†åŸŸã€‚</p><blockquote class="nm nn no"><p id="18ef" class="kt ku np kv b kw kx jo ky kz la jr lb nq ld le lf nr lh li lj ns ll lm ln lo ig bi translated">Web Speech APIä»å¤„äºè¯•éªŒé˜¶æ®µï¼Œå› æ­¤è¯¥åº”ç”¨å¯ä»¥åœ¨è®¸å¤šæµè§ˆå™¨ä¸­è¿è¡Œï¼Œä½†ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨ã€‚æˆªè‡³ç›®å‰ï¼Œå®ƒå¯ä»¥åœ¨æœ€æ–°ç‰ˆæœ¬çš„Chromeã€Edgeã€Operaå’ŒSafariä¸­å·¥ä½œã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒåœ¨Firefoxä¸­è¿˜ä¸èƒ½å®Œå…¨å·¥ä½œ<em class="in">ğŸ˜”</em>ã€‚</p></blockquote></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="b140" class="lp lq in bd lr ls ne lu lv lw nf ly lz jt ng ju mb jw nh jx md jz ni ka mf mg bi translated">æˆ‘ä»¬éœ€è¦å®ç°ä»€ä¹ˆ</h1><p id="71a9" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">ä¸ºäº†æ„å»ºè¿™ä¸ªwebåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦å®ç°å››ä¸ªç»„ä»¶:</p><ol class=""><li id="8d22" class="mh mi in kv b kw kx kz la lc nt lg nu lk nv lo nw mp mq mr bi translated">è¦æ˜¾ç¤ºçš„ç®€å•èŠå¤©UI:</li></ol><ul class=""><li id="fb1b" class="mh mi in kv b kw kx kz la lc nt lg nu lk nv lo mo mp mq mr bi translated">ç”¨æˆ·æ€ä¹ˆè¯´</li><li id="3821" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated">åŠ©ç†çš„å›ç­”</li><li id="8811" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated">ä¸€ä¸ªè§¦å‘åŠ©æ‰‹çš„æŒ‰é’®(æ¯”å¦‚â€œå˜¿Siriâ€å‘½ä»¤)</li><li id="287f" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated">é¡¶éƒ¨æœ‰ä¸€ä¸ªå°çš„å¸®åŠ©åŒºåŸŸï¼Œå‘ç”¨æˆ·è§£é‡Šä¸€äº›äº‹æƒ…</li></ul><p id="c7d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.å°†ç”¨æˆ·çš„è¯­éŸ³è½¬æ¢æˆæ–‡æœ¬(ä½¿ç”¨<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API" rel="noopener ugc nofollow" target="_blank">ç½‘ç»œè¯­éŸ³API </a></p><p id="f74e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.å¤„ç†æ–‡æœ¬å¹¶æ ¹æ®æ–‡æœ¬æ‰§è¡Œæ“ä½œ</p><p id="9b8a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.å°†æ–‡æœ¬è½¬æ¢å›è¯­éŸ³ï¼Œæ”¹å˜Sonyaçš„å£°éŸ³å’ŒéŸ³è°ƒ</p></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="c7a8" class="lp lq in bd lr ls ne lu lv lw nf ly lz jt ng ju mb jw nh jx md jz ni ka mf mg bi translated">ç”¨æˆ·ç•Œé¢</h1><p id="76bf" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªç®€å•çš„UIã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª<code class="fe nx ny nz oa b">button</code>æ¥è§¦å‘åŠ©æ‰‹ï¼Œå¹¶ä¸”åœ¨é¡¶éƒ¨æœ‰ä¸€ä¸ªå°çš„å¸®åŠ©åŒºåŸŸå‘ç”¨æˆ·æ˜¾ç¤ºä¸€äº›å¯ç”¨çš„å‘½ä»¤ã€‚æˆ‘ä»¬è¿˜å°†åˆ›å»ºä¸€ä¸ª<code class="fe nx ny nz oa b">div</code>å…ƒç´ æ¥æ˜¾ç¤ºç”¨æˆ·è¯´äº†ä»€ä¹ˆå’ŒSonyaå›å¤äº†ä»€ä¹ˆï¼Œå¹¶åˆ›å»ºä¸€ä¸ª<code class="fe nx ny nz oa b">p</code>å…ƒç´ æ¥æ˜¾ç¤ºå¤„ç†ä¿¡æ¯ã€‚åœ¨JavaScriptä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å…ƒç´ å¯¹è±¡çš„å”¯ä¸€idå±æ€§æ¥æ£€ç´¢å®ƒä»¬ã€‚</p><p id="2a5f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> HTML </strong></p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="a118" class="of lq in oa b be og oh l oi oj">&lt;html&gt;<br/>&lt;head&gt;<br/>  ...<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;div id="content"&gt;<br/>    &lt;h1&gt;Sonya&lt;/h1&gt;<br/>    &lt;p&gt;Give it a try with 'hi/hello', 'how are you', 'joke', 'coin <br/>    flip', 'what's your name', 'what time is it', 'bye/stop'&lt;/p&gt;<br/>    &lt;p&gt;You can also try 'play despacito' &amp;#128516;. It will play <br/>    on Youtube. Note: the pop-up may be blocked by your browser&lt;/p&gt;<br/>  &lt;/div&gt;<br/>  &lt;button id="startBtn"&gt;Start listening&lt;/button&gt;<br/>  &lt;div id="result"&gt;&lt;/div&gt;<br/>  &lt;p id="processing"&gt;&lt;/p&gt;<br/>  &lt;script src="script.js"&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3a35" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> JavaScript </strong></p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="34db" class="of lq in oa b be og oh l oi oj">const startBtn = document.getElementById("startBtn");<br/>const result = document.getElementById("result");<br/>const processing = document.getElementById("processing");</span></pre></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="e212" class="lp lq in bd lr ls ne lu lv lw nf ly lz jt ng ju mb jw nh jx md jz ni ka mf mg bi translated">è¯­éŸ³è½¬æ–‡æœ¬</h1><p id="c46e" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">è®©æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ•è·è¯­éŸ³å‘½ä»¤å¹¶å°†å…¶è½¬æ¢ä¸ºæ–‡æœ¬ä»¥ä¾›è¿›ä¸€æ­¥å¤„ç†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<code class="fe nx ny nz oa b">SpeechRecognition </code>æ¥å£ã€‚ç”±äºè¯¥APIä»…åœ¨å—æ”¯æŒçš„æµè§ˆå™¨ä¸­å¯ç”¨ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºä¸€æ¡è­¦å‘Šæ¶ˆæ¯ï¼Œå¹¶é˜»æ­¢å¼€å§‹æŒ‰é’®åœ¨ä¸å—æ”¯æŒçš„æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚</p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="7d71" class="of lq in oa b be og oh l oi oj">const SpeechRecognition = window.SpeechRecognition <br/>                          || window.webkitSpeechRecognition;<br/>let toggleBtn = null;<br/>if (typeof SpeechRecognition === "undefined") {<br/>  startBtn.remove();<br/>  result.innerHTML = "Your browser doesn't support Speech API. <br/>                      Please download latest Chrome version.";<br/>}</span></pre><p id="356d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<code class="fe nx ny nz oa b">SpeechRecognition</code>çš„å®ä¾‹ï¼Œå¹¶è®¾ç½®ä¸€äº›<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition" rel="noopener ugc nofollow" target="_blank">å±æ€§</a>æ¥å®šåˆ¶è¯­éŸ³è¯†åˆ«ã€‚æˆ‘ä»¬ä¼šå°†<code class="fe nx ny nz oa b">continuous</code>å’Œ<code class="fe nx ny nz oa b">interimResults</code>è®¾ç½®ä¸º<code class="fe nx ny nz oa b">true</code>ï¼Œä»¥å®æ—¶æ˜¾ç¤ºå£è¿°æ–‡æœ¬ï¼Œå³ä½¿ç”¨æˆ·ç¨æœ‰åœé¡¿ï¼Œä¹Ÿä¼šç»§ç»­å½•åˆ¶<strong class="kv io">ã€‚</strong>å½“<code class="fe nx ny nz oa b">continuous</code>è®¾ç½®ä¸ºçœŸæ—¶ï¼Œæš‚åœæ—¶é—´ä¸º<strong class="kv io"> </strong>çº¦15ç§’ã€‚</p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="36a3" class="of lq in oa b be og oh l oi oj">const recognition = new SpeechRecognition();<br/>recognition.continuous = true;<br/>recognition.interimResults = true;</span></pre><p id="38c1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç„¶åï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå¥æŸ„æ¥å¤„ç†æ¥è‡ªè¯­éŸ³APIçš„<code class="fe nx ny nz oa b">onresult</code>äº‹ä»¶ã€‚æ¯å½“è¯­éŸ³APIæ•è·ä¸€è¡Œä»£ç æ—¶ï¼Œ<code class="fe nx ny nz oa b">onresult</code>ä¸­çš„è¿™æ®µä»£ç å°±ä¼šè¢«è°ƒç”¨<strong class="kv io">ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ•è·çš„æ‰€æœ‰è¡Œéƒ½ä¿å­˜åœ¨<code class="fe nx ny nz oa b">event</code>ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ª<code class="fe nx ny nz oa b">SpeechRecognitionEvent</code>å¯¹è±¡ã€‚å› ä¸ºæˆ‘ä»¬åªéœ€è¦å½“å‰è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code class="fe nx ny nz oa b">resultIndex</code>å±æ€§æ¥è·å–å·²ç»æ”¹å˜çš„<code class="fe nx ny nz oa b"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognitionResultList" rel="noopener ugc nofollow" target="_blank">SpeechRecognitionResultList</a></code>æ•°ç»„ä¸­ç´¢å¼•å€¼æœ€ä½çš„ç»“æœã€‚</strong></p><p id="fd3b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æœ€åï¼Œæˆ‘ä»¬å¾—åˆ°ç”¨æˆ·æ‰€è¯´å†…å®¹çš„æ–‡æœ¬<code class="fe nx ny nz oa b">transcript</code>ã€‚è¯¥æ–‡æœ¬ç»è¿‡ä¸€ä¸ª<code class="fe nx ny nz oa b">process</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°è¢«è°ƒç”¨æ¥å¤„ç†ç”¨æˆ·çš„é—®é¢˜å¹¶æ‰¾åˆ°ç­”æ¡ˆã€‚ç„¶åè°ƒç”¨<code class="fe nx ny nz oa b">readOutLoud</code>å‡½æ•°è¯»å‡ºç­”æ¡ˆã€‚<code class="fe nx ny nz oa b">readOutLoud</code>å’Œ<code class="fe nx ny nz oa b">process</code>åŠŸèƒ½å°†åœ¨æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸­æ‰§è¡Œã€‚ç”¨æˆ·å’ŒåŠ©ç†çš„è¯­éŸ³å‘½ä»¤ä¹Ÿæ˜¾ç¤ºä¸ºæ–‡æœ¬ã€‚</p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="95f1" class="of lq in oa b be og oh l oi oj">recognition.onresult = event =&gt; {<br/>  const current = event.resultIndex;<br/>  const recognitionResult = event.results[current];<br/>  const recognitionText = recognitionResult[0].transcript;<br/> <br/>  if (recognitionResult.isFinal) {<br/>    processing.innerHTML = "processing ...";<br/><br/>    const response = process(recognitionText);<br/>    const p = document.createElement("p");<br/>    p.innerHTML = `&lt;strong&gt;You said:&lt;/strong&gt; ${recognitionText} <br/>                   &lt;/br&gt;&lt;strong&gt;Sonya said:&lt;/strong&gt; ${response}`;<br/>    processing.innerHTML = "";<br/>    result.appendChild(p);<br/>    <br/>    readOutLoud(response);<br/>  } else {<br/>    processing.innerHTML = `listening: ${recognitionText}`;<br/>  }<br/>};</span></pre><p id="3505" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬è¿˜éœ€è¦å°†è¯†åˆ«ä½œä¸ºä¸€ä¸ªå¼€å…³æ¥åˆ‡æ¢ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€æ·»åŠ ä¸€ä¸ªclickäº‹ä»¶ï¼Œå¹¶å°†UI <code class="fe nx ny nz oa b">button</code>ä¸<code class="fe nx ny nz oa b">recognition</code>å¯¹è±¡ç›¸å…³è”ï¼Œè¿™æ ·ï¼Œå½“å•å‡»<code class="fe nx ny nz oa b">button</code>æ—¶ï¼Œè¯­éŸ³è¯†åˆ«æœåŠ¡å°†åœæ­¢æˆ–å¼€å§‹ä¾¦å¬ä¼ å…¥çš„éŸ³é¢‘ï¼ŒæŒ‰é’®çš„æ–‡æœ¬ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><blockquote class="nm nn no"><p id="4dca" class="kt ku np kv b kw kx jo ky kz la jr lb nq ld le lf nr lh li lj ns ll lm ln lo ig bi translated"><code class="fe nx ny nz oa b">start()</code>æ–¹æ³•å¯åŠ¨è¯­éŸ³è¯†åˆ«æœåŠ¡ï¼Œç›‘å¬è¾“å…¥çš„éŸ³é¢‘ä»¥è¯†åˆ«ä¸å½“å‰<code class="fe nx ny nz oa b"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition" rel="noopener ugc nofollow" target="_blank">SpeechRecognition</a></code>ç›¸å…³çš„è¯­æ³•ã€‚</p><p id="dfd9" class="kt ku np kv b kw kx jo ky kz la jr lb nq ld le lf nr lh li lj ns ll lm ln lo ig bi translated"><code class="fe nx ny nz oa b">stop()</code>æ–¹æ³•åœæ­¢è¯­éŸ³è¯†åˆ«æœåŠ¡çš„ç›‘å¬ï¼Œå¹¶å°è¯•ä½¿ç”¨ç›®å‰æ•è·çš„éŸ³é¢‘è¿”å›ç»“æœã€‚</p></blockquote><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="761f" class="of lq in oa b be og oh l oi oj">let listening = false;<br/><br/>toggleBtn = () =&gt; {<br/>  if (listening) {<br/>    recognition.stop();<br/>    startBtn.textContent = "Start listening";<br/>  } else {<br/>    recognition.start();<br/>    startBtn.textContent = "Stop listening";<br/>  }<br/>  listening = !listening;<br/>};<br/><br/>startBtn.addEventListener("click", toggleBtn);</span></pre></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="9a03" class="lp lq in bd lr ls ne lu lv lw nf ly lz jt ng ju mb jw nh jx md jz ni ka mf mg bi translated">å¤„ç†æ–‡æœ¬å¹¶æ‰§è¡Œæ“ä½œ</h1><p id="59ea" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„å¯¹è¯é€»è¾‘å¹¶å¤„ç†ä¸€äº›åŸºæœ¬æ“ä½œã€‚è™½ç„¶å¤„ç†å™¨æ˜¯Sonyaçš„å¤§è„‘ï¼Œä½†å®ƒåªæ˜¯ä¸€ä¸ªæ¡ä»¶è¯­å¥çš„ä¾‹å­ï¼Œå…è®¸Sonyaå“åº”å‘½ä»¤<code class="fe nx ny nz oa b">hi</code>ã€<code class="fe nx ny nz oa b">how are you</code>ã€<code class="fe nx ny nz oa b">what's your name</code>ã€<code class="fe nx ny nz oa b">joke</code>ã€<code class="fe nx ny nz oa b">coin flip</code>ã€<code class="fe nx ny nz oa b">what time is it</code>ç­‰ç­‰ã€‚å¦‚æœSonyaä¸çŸ¥é“ç­”æ¡ˆï¼Œå¥¹å°†æ‰“å¼€ä¸€ä¸ªæ–°æ ‡ç­¾ï¼Œé€šè¿‡è°·æ­Œæœç´¢ã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯´<code class="fe nx ny nz oa b">bye</code>æˆ–è€…<code class="fe nx ny nz oa b">stop</code>æ¥é˜»æ­¢å¥¹å¬ã€‚</p><p id="5094" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¦åˆ›å»ºä¸€ä¸ªç®€å•çš„<code class="fe nx ny nz oa b">process</code>ï¼Œåªéœ€è€ƒè™‘æ‚¨å¸Œæœ›Sonyaåšä»€ä¹ˆï¼Œå¹¶ä¸ºå…¶æ·»åŠ ä¸€ä¸ªif caseã€‚å¦‚æœæ·»åŠ æ›´å¤šçš„æ¡ä»¶ï¼ŒSonyaå¯ä»¥æ‰§è¡Œæ›´å¤šçš„ä»»åŠ¡ã€‚ä½ å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•è¿™ä¸ª<code class="fe nx ny nz oa b">process</code>åŠŸèƒ½ï¼Œä½¿ç”¨APIæˆ–è€…AIåº“ï¼Œè®©åŠ©æ‰‹å˜å¾—éšå¿ƒæ‰€æ¬²çš„æ™ºèƒ½ã€‚</p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="3c4b" class="of lq in oa b be og oh l oi oj">function process(rawText) {<br/>  let text = rawText.replace(/\s/g, "").replace(/\'/g, "");<br/>  text = text.toLowerCase();<br/>  let response = null;<br/><br/>  if (text.includes("hello") || text.trim() == "hi" || text.includes("hey")) {<br/>    response = getRandomItemFromArray(hello);<br/>  } else if (text.includes("your name")) {<br/>    response = "My name's Sonya.";<br/>  } else if (text.includes("howareyou")||text.includes("whatsup")) {<br/>    response = "I'm fine. How about you?";<br/>  } else if (text.includes("whattimeisit")) {<br/>    response = new Date().toLocaleTimeString();<br/>  } else if (text.includes("joke")) {<br/>    response = getRandomItemFromArray(joke);<br/>  } else if (text.includes("play")) &amp;&amp; text.includes("despacito")) {<br/>    response = "Opened it in another tab";<br/>    window.open("https://www.youtube.com/watch?v=kJQP7kiw5Fk",<br/>                "_blank", "noopener");<br/>  } else if (text.includes("flip") &amp;&amp; text.includes("coin")) {<br/>    response = Math.random() &lt; 0.5 ? 'heads' : 'tails';<br/>  } else if (text.includes("bye") || text.includes("stop")) {<br/>    response = "Bye!!";<br/>    toggleBtn();<br/>  }<br/><br/>  if (!response) {<br/>    window.open(`http://google.com/search?q=${rawText.replace("search", "")}`,<br/>                "_blank");<br/>    return `I found some information for ${rawText}`;<br/>  }<br/><br/>  return response;<br/>}</span></pre><h2 id="48b4" class="ok lq in bd lr ol om dn lv on oo dp lz lc op oq mb lg or os md lk ot ou mf ov bi translated">*è¯·æ³¨æ„ï¼Œåœ¨æ–°çª—å£ä¸­æ‰“å¼€çš„å¼¹å‡ºçª—å£å¯èƒ½ä¼šè¢«æµè§ˆå™¨é˜»æ­¢ï¼Œæ‚¨éœ€è¦å…è®¸è®¿é—®ã€‚</h2><h2 id="ae5c" class="ok lq in bd lr ol om dn lv on oo dp lz lc op oq mb lg or os md lk ot ou mf ov bi translated">éšæœºç­”æ¡ˆ</h2><p id="2c80" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">å¯¹äºæŸäº›ç­”æ¡ˆï¼ŒSonyaä¼šæ ¹æ®ä¸€ä¸ªæ•°ç»„ä¸­æŒ‡å®šçš„ä¸€ç»„å›å¤ç»™å‡ºä¸€ä¸ªéšæœºç­”æ¡ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¯´â€œä½ å¥½â€ï¼ŒSonyaä¼šä»ä¸€ç»„é—®å€™ä¸­éšæœºé€‰æ‹©ä¸€é¡¹ä½œä¸ºå›åº”ã€‚ä¸ºäº†å¾—åˆ°è¿™äº›ç­”æ¡ˆï¼Œå®ç°äº†getRandomItemFromArrayå‡½æ•°ã€‚</p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="5f0d" class="of lq in oa b be og oh l oi oj">function getRandomItemFromArray(array) {<br/>  const randomItem = array[Math.floor(Math.random() * array.length)];<br/>  return randomItem;<br/>};</span></pre></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="8197" class="lp lq in bd lr ls ne lu lv lw nf ly lz jt ng ju mb jw nh jx md jz ni ka mf mg bi translated">æ–‡æœ¬åˆ°è¯­éŸ³</h1><p id="9803" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨Web Speech APIçš„<code class="fe nx ny nz oa b">speechSynthesis</code>æ§åˆ¶å™¨ç»™æˆ‘ä»¬çš„åŠ©æ‰‹ä¸€ä¸ªå£°éŸ³ã€‚åŠ è½½å£°éŸ³åï¼Œæˆ‘ç”¨æ›´å¥½çš„å£°éŸ³æ›¿æ¢äº†æ¡‘å¨…çš„å£°éŸ³ã€‚å¦‚æœä½ æƒ³çœ‹åˆ°æ›´å¤šçš„å£°éŸ³ï¼ŒæŸ¥çœ‹æ–‡æ¡£ã€‚æˆ‘è¿˜æ”¹å˜äº†ä¸€ç‚¹è¯´è¯çš„éŸ³è°ƒå’Œè¯­é€Ÿã€‚</p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="366b" class="of lq in oa b be og oh l oi oj">function readOutLoud(message) {<br/>  const speech = new SpeechSynthesisUtterance();<br/>  <br/>  speech.text = message;<br/>  speech.volume = 1;<br/>  speech.rate = 1;<br/>  speech.pitch = 1.8;<br/>  speech.voice = voices[3];<br/><br/>  window.speechSynthesis.speak(speech);<br/>}</span></pre><h1 id="5b39" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">æ–‡æœ¬åˆ°è¯­éŸ³å‚æ•°</h1><h2 id="0c97" class="ok lq in bd lr ol om dn lv on oo dp lz lc op oq mb lg or os md lk ot ou mf ov bi translated"><strong class="ak">å£°éŸ³</strong></h2><p id="ccdc" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">ä»å£°éŸ³å¼€å§‹ï¼Œæˆ‘æƒ³æŠŠSonyaçš„é»˜è®¤å£°éŸ³æ”¹ä¸ºæ›´å¥³æ€§åŒ–çš„å£°éŸ³ï¼Œç±»ä¼¼äºSiriæˆ–Cortanaç­‰å…¶ä»–åŠ©æ‰‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘å¿…é¡»ç”¨<code class="fe nx ny nz oa b">getVoices()</code>æ–¹æ³•æ£€ç´¢æ‰€æœ‰å¯ç”¨çš„å£°éŸ³ï¼Œå¹¶ä»ä¸­é€‰æ‹©ä¸€ä¸ªã€‚ä¸€å¼€å§‹æˆ‘æŠŠæ‰€æœ‰çš„å£°éŸ³éƒ½åŒ…æ‹¬è¿›æ¥ï¼Œè®©ç”¨æˆ·è‡ªå·±é€‰æ‹©ï¼Œä½†åæ¥æˆ‘è§‰å¾—æ²¡å¿…è¦è¿™æ ·ã€‚</p><p id="aec7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¯·æ³¨æ„ï¼Œæ ¹æ®<a class="ae ks" href="https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi-errata.html" rel="noopener ugc nofollow" target="_blank"> Web Speech APIå‹˜è¯¯è¡¨</a>(E11 2013â€“10â€“17)ï¼Œè¯­éŸ³åˆ—è¡¨åœ¨é¡µé¢ä¸Šå¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½æ—¶ä¼šè§¦å‘ä¸€ä¸ª<code class="fe nx ny nz oa b">onvoiceschanged</code>äº‹ä»¶ã€‚æ‰€ä»¥æˆ‘ç”¨è¿™ä¸ªäº‹ä»¶æ¥è®¾å®šå£°éŸ³ã€‚</p><pre class="kd ke kf kg gt ob oa oc bn od oe bi"><span id="1015" class="of lq in oa b be og oh l oi oj">// wait on voices to be loaded before fetching list<br/>window.speechSynthesis.onvoiceschanged = function() {<br/>    voices = window.speechSynthesis.getVoices();<br/>};</span></pre><blockquote class="nm nn no"><p id="7886" class="kt ku np kv b kw kx jo ky kz la jr lb nq ld le lf nr lh li lj ns ll lm ln lo ig bi translated"><strong class="kv io"> voiceschanged </strong>:å½“<strong class="kv io"> getVoices() </strong>è¿”å›çš„SpeechSynthesisVoiceListçš„å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ã€‚<strong class="kv io">ä¾‹å¦‚</strong>:æœåŠ¡å™¨ç«¯åˆæˆï¼Œå…¶ä¸­<em class="in">åˆ—è¡¨è¢«å¼‚æ­¥ç¡®å®šï¼Œæˆ–è€…å½“å®¢æˆ·ç«¯è¯­éŸ³è¢«å®‰è£…(å¸è½½)æ—¶ã€‚</em></p></blockquote><h2 id="0c1a" class="ok lq in bd lr ol om dn lv on oo dp lz lc op oq mb lg or os md lk ot ou mf ov bi translated"><strong class="ak">éŸ³è°ƒã€é€Ÿç‡å’ŒéŸ³é‡</strong></h2><p id="f6da" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc nj le lf lg nk li lj lk nl lm ln lo ig bi translated">æˆ‘ä½¿ç”¨çš„å…¶ä»–å‚æ•°æ˜¯<strong class="kv io">éŸ³è°ƒã€é€Ÿç‡å’ŒéŸ³é‡ï¼Œ</strong>è¿™äº›éƒ½æ˜¯<code class="fe nx ny nz oa b"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance" rel="noopener ugc nofollow" target="_blank">SpeechSynthesisUtterance</a></code>æ¥å£çš„å±æ€§ï¼Œç”¨äºè·å–å’Œè®¾ç½®è¯´è¯æ—¶çš„éŸ³è°ƒã€é€Ÿç‡æˆ–éŸ³é‡ã€‚</p><p id="c210" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç”¨äºè¿™äº›å‚æ•°çš„å€¼å¦‚ä¸‹:</p><p id="9595" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">èºè·= 1.8 </strong>:ä»‹äº<strong class="kv io"> 0 </strong>å’Œ<strong class="kv io"> 2 </strong>ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œå…¶ä¸­1ä¸ºå½“å‰é»˜è®¤èºè·ã€‚<strong class="kv io">ç›´è§‰ä¸Šï¼ŒéŸ³é«˜æ˜¯å…³äºéŸ³é¢‘çš„ã€‚é«˜é¢‘å£°éŸ³è¢«æ„ŸçŸ¥ä¸ºé«˜éŸ³ï¼Œä½é¢‘å£°éŸ³è¢«æ„ŸçŸ¥ä¸ºä½éŸ³ã€‚æ‰€ä»¥æˆ‘é€‰æ‹©äº†æ›´é«˜çš„éŸ³è°ƒï¼Œå› ä¸ºå¥³æ€§è¯´è¯çš„éŸ³è°ƒæ›´é«˜ï¼ŒåŠ©ç†çš„å£°éŸ³ä¹Ÿæ›´å¥³æ€§åŒ–ã€‚</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/3bd932c46437ebfe8b3890840353b73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/1*i-0kEpZ-GaxTYrJSdB8wbg.gif"/></div></figure><p id="5e1d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> rate = 1 </strong>:è¯­é€Ÿç®€å•æ¥è¯´å°±æ˜¯åŠ©ç†è¯´è¯çš„é€Ÿåº¦(æ¯åˆ†é’Ÿè¯´å‡ºçš„å­—æ•°)ã€‚å®ƒæ˜¯ä¸€ä¸ªæµ®åŠ¨å€¼ï¼ŒèŒƒå›´ä»0.1åˆ°10ï¼Œé»˜è®¤æ±‡ç‡ä¸º<strong class="kv io"> 1 </strong>ã€‚1åˆ°1.5ä¹‹é—´çš„å€¼ç›¸å½“äºæ­£å¸¸çš„è¯­é€Ÿã€‚</p><p id="8355" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> volume = 1 </strong>:æœºå™¨äººçš„å£°éŸ³æœ‰å¤šå¤§ã€‚å®ƒæ˜¯ä¸€ä¸ªä»‹äº0å’Œ1ä¹‹é—´çš„æµ®ç‚¹æ•°ã€‚</p><p id="6edd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">é‚£éƒ½æ˜¯ä¹¡äº²ä»¬ï¼ï¼ï¼æˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ˆé…·çš„åŠ©æ‰‹ï¼Œåªæœ‰100è¡Œä»£ç ã€‚ä»£ç å¯ä»¥åœ¨è¿™ä¸ªGitHub <a class="ae ks" href="https://github.com/NasosG/sonya-assistant-medium" rel="noopener ugc nofollow" target="_blank">åº“</a>æ‰¾åˆ°ï¼Œæ¼”ç¤ºå¯ä»¥åœ¨<a class="ae ks" href="https://nasosg.github.io/sonya-assistant-medium/" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>æŸ¥çœ‹ã€‚</p></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><p id="18d6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ<a class="ae ks" href="https://medium.com/@gthanos" rel="noopener">åœ¨Mediumä¸Šå…³æ³¨æˆ‘</a>æˆä¸ºç¬¬ä¸€ä¸ªé˜…è¯»æˆ‘çš„æ•…äº‹çš„äººã€‚</p></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><p id="c431" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="np">æ›´å¤šå†…å®¹çœ‹</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="np">è¯´ç™½äº†ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="np">å…è´¹å‘¨æŠ¥</em> </strong> </a> <em class="np">ã€‚å…³æ³¨æˆ‘ä»¬å…³äº</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="np">æ¨ç‰¹</em></strong></a><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="np">LinkedIn</em></strong></a><em class="np"/><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="np">YouTube</em></strong></a><em class="np"/><a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="np">ä¸å’Œ</em> </strong> </a> <em class="np">ã€‚å¯¹å¢é•¿é»‘å®¢æ„Ÿå…´è¶£ï¼Ÿæ£€æŸ¥</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="np">ç”µè·¯</em> </strong> </a> <em class="np">ã€‚</em></strong></a></p></div></div>    
</body>
</html>