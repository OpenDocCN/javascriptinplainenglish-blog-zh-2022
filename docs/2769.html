<html>
<head>
<title>What’s New in Next.js 12.2?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js 12.2有什么新功能？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/whats-new-in-next-js-12-2-e5cae2db0b4c?source=collection_archive---------3-----------------------#2022-07-03">https://javascript.plainenglish.io/whats-new-in-next-js-12-2-e5cae2db0b4c?source=collection_archive---------3-----------------------#2022-07-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/657aade65c40fd9694ed2176527f6968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VrZijRuSBSuDoYtf"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@clark_fransa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Arnold Francisca</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7233" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">js是一个React框架，可以帮助你构建块。<br/>当你在React中开发一个块时，有很多事情需要控制(用户界面、数据获取、路由、渲染性能等)。Next.js有助于解决这些常见的应用程序需求。现在我们来看看12.2版本的新特性。</p><h1 id="ff3f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">中间件稳定</h1><p id="ae0b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">该属性于2021年10月发布(Next.js 12.0)，并一直处于测试阶段，直到新版本的framework 12.2。中间件是一段简单的代码，它允许我们在请求完成之前改变对请求的响应。概括地说，新的变化是:</p><ul class=""><li id="105e" class="mb mc in kc b kd ke kh ki kl md kp me kt mf kx mg mh mi mj bi translated">中间件不再能产生响应体。(为了尊重客户端和服务器端导航的差异，并帮助确保开发人员不会构建不安全的中间件，我们正在移除在中间件中发送响应主体的能力。这确保了中间件仅用于“重写”、“重定向”或修改传入的请求。)</li><li id="fa38" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">如果你的中间件<em class="mp">没有</em>用一个主体来响应，将会抛出一个运行时错误。</li><li id="9246" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">迁移到使用<code class="fe mq mr ms mt b">rewrite</code> / <code class="fe mq mr ms mt b">redirect</code>来处理响应的页面/API。</li></ul><h1 id="e63e" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">边缘</h1><p id="9ebe" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">应用程序的性能会受到不同原因的影响，例如用户的位置或服务器的位置。借助轻量级Edge运行时，许多组件被卸载到全球分布式Edge基础设施，从而提高了性能和用户体验。</p><h1 id="e065" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">SWC</h1><p id="7b48" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">使用<a class="ae jz" href="http://swc.rs/" rel="noopener ugc nofollow" target="_blank"> SWC </a>用Rust编写的Next.js编译器，允许Next.js转换和精简你的JavaScript代码用于生产。这取代了单独文件的Babel和缩小输出包的Terser。<br/>我们选择以SWC为基础有几个原因:</p><ul class=""><li id="012d" class="mb mc in kc b kd ke kh ki kl md kp me kt mf kx mg mh mi mj bi translated">可扩展性:SWC可以在Next.js中用作板条箱，而不必派生库或变通设计约束。</li><li id="b8f8" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">性能:通过切换到SWC，我们在Next.js中实现了大约3倍的快速刷新速度和大约5倍的构建速度，并且仍有更多的优化空间。</li><li id="d6fc" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">WebAssembly: Rust对WASM的支持对于支持所有可能的平台和在任何地方进行Next.js开发都是必不可少的。</li><li id="9e74" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">社区:Rust社区和生态系统令人惊叹，并且仍在增长。</li></ul><h1 id="aeb3" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">按需增量静态再生(稳定)</strong></h1><p id="762f" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">一个工作日内你可以重新部署多少次？按需增量静态再生(ISR)允许您更新站点上的内容，而无需重新部署。这使得当您的headless CMS或商务平台中的数据发生变化时，可以很容易地立即更新您的站点。这是社区中请求最多的功能之一，我们很高兴它现在已经稳定了。</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mu"><img src="../Images/3760358ccff6c7e19b3c83730cb7b5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Iay3Jawn0rcqS63b797rA.png"/></div></div></figure><p id="a0bb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">增量静态再生适用于任何支持<a class="ae jz" href="https://nextjs.org/docs/deployment#nextjs-build-api" rel="noopener ugc nofollow" target="_blank"> Next.js构建API </a> ( <code class="fe mq mr ms mt b">next build</code>)的提供者。当部署到<a class="ae jz" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>时，当将页面推到边缘时，按需重新验证会在大约300毫秒内传播到全球。</p><h1 id="7c31" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">其他改进</strong></h1><ul class=""><li id="8e99" class="mb mc in kc b kd lw kh lx kl mz kp na kt nb kx mg mh mi mj bi translated">在Next.js编译器中支持情感转换。现在支持<code class="fe mq mr ms mt b">@emotion/babel-plugin</code>的大部分功能，除非你用的是<code class="fe mq mr ms mt b">importMap</code>，否则可以移除。欲了解更多信息，请查阅文档。</li><li id="6fdc" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">通过允许定制默认选项，包括<code class="fe mq mr ms mt b">cssProp</code>选项，更好地支持Next.js编译器中的<code class="fe mq mr ms mt b">styled-components</code>转换。更多信息，请查阅文档。</li><li id="3e76" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">更好地支持JavaScript ES模块，所以像<code class="fe mq mr ms mt b">next/image</code>和<code class="fe mq mr ms mt b">next/link</code>这样的组件可以正确地<code class="fe mq mr ms mt b">import</code> ed。</li><li id="652f" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated"><code class="fe mq mr ms mt b">next/link</code>不再需要手动添加<code class="fe mq mr ms mt b">&lt;a&gt;</code>作为子节点。你现在可以通过向后兼容的方式选择这种行为。</li><li id="59f8" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">我们已经通过修改<code class="fe mq mr ms mt b">browsersList</code>添加了只发布现代JavaScript的实验性支持。您可以通过在<code class="fe mq mr ms mt b">next.config.js</code>的<code class="fe mq mr ms mt b">experimental</code>选项中设置<code class="fe mq mr ms mt b">browsersListForSwc: true</code>和<code class="fe mq mr ms mt b">legacyBrowsers: false</code>来选择此行为。</li><li id="3109" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">新的<code class="fe mq mr ms mt b">@swc/helpers</code>优化防止了捆绑包之间的重复，在最小配置中减少了大约<code class="fe mq mr ms mt b">2KB</code>的捆绑包大小，在较大的应用上更多</li><li id="fe9e" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">我们已经显著减小了Next.js的安装规模。我们通过将monorepo移动到<code class="fe mq mr ms mt b">pnpm</code>来做到这一点，这允许我们在创建我们使用的预编译版本时删除重复的包。这导致安装大小减少了14MB。</li></ul></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h2 id="5599" class="nj kz in bd la nk nl dn le nm nn dp li kl no np lm kp nq nr lq kt ns nt lu nu bi translated">进一步阅读</h2><div class="nv nw gp gr nx ny"><a rel="noopener  ugc nofollow" target="_blank" href="/data-fetching-with-next-js-13s-bleeding-edge-features-a-primer-a60ddd3f7570"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd io gy z fp od fr fs oe fu fw im bi translated">使用Next.js 13的前沿特性获取数据——入门</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">NextJS 13中的数据获取使用了应用程序目录、流、暂挂以及混合服务器和客户端组件。</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om jt ny"/></div></div></a></div><p id="a940" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mp">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mp">plain English . io</em></strong></a><em class="mp">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mp">免费周报</em> </strong> </a> <em class="mp">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mp">Twitter</em></strong></a><em class="mp">和</em><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mp">LinkedIn</em></strong></a><em class="mp">。查看我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mp">社区不和谐</em> </strong> </a> <em class="mp">加入我们的</em> <a class="ae jz" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mp">人才集体</em> </strong> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>