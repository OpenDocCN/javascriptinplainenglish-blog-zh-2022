<html>
<head>
<title>Test Your Library Locally with npm Link</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用npm链接在本地测试您的库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/test-your-library-locally-with-npm-link-a5aa79d07270?source=collection_archive---------2-----------------------#2022-05-31">https://javascript.plainenglish.io/test-your-library-locally-with-npm-link-a5aa79d07270?source=collection_archive---------2-----------------------#2022-05-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d446" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何测试您的库而不必将其上传到npm</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/14f441cb601a9c8d825d6ba668186731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDXg3GFeIEAmzILVbLUBnQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Mike B: <a class="ae kv" href="https://www.pexels.com/photo/silver-chain-145683/" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/photo/silver-chain-145683/</a></figcaption></figure><p id="6e82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Npm是一个非常强大的工具。多年来，它最终落后于它的“竞争对手”yarn，但自从npm 7的到来，它又回到了舞台的前面！</p><p id="7ae7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将对npm的一个特殊特性感兴趣:<strong class="ky ir"> link。</strong></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="c059" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Npm link是一个命令，允许你<strong class="ky ir">将一个特定的Npm项目链接到另一个</strong>。差不多就是这样！</p><p id="4b76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它主要用于在项目中测试一个库，而不必将库发布到npm中。</p><p id="12e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">开发一个库可能很难，npm团队有一个好主意，让我们用一种非常简单的方式来测试它们。</p><p id="017f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看它是如何工作的。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1094" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">设置我们的环境</h1><p id="5e83" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了完成这项工作，我们必须创建两个npm项目。为了本文的清晰，我将创建一个名为“应用程序”的项目和另一个名为“库”的项目</p><p id="2e29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mw">提醒一下，您可以使用命令</em> <code class="fe mx my mz na b"><em class="mw">npm init -y</em></code> <em class="mw">创建一个npm项目，该项目将采用其文件夹的名称。</em></p><h2 id="d405" class="nb ma iq bd mb nc nd dn mf ne nf dp mj lf ng nh ml lj ni nj mn ln nk nl mp nm bi translated">创建我们的图书馆</h2><p id="6372" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">一旦创建了库项目，创建一个<code class="fe mx my mz na b">index.js</code>文件并粘贴以下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/7b406e14af8a6cab5feb8e5f003c6077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DhLKPkiYek-3HuTkdiHdPQ.png"/></div></div></figure><p id="3e1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里的目标是创建一个<strong class="ky ir">非常简单的库</strong>，基本上只打印“Hello world ”,仅此而已！</p><p id="da9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经完成了库的设置，让我们继续应用程序</p><h2 id="ee08" class="nb ma iq bd mb nc nd dn mf ne nf dp mj lf ng nh ml lj ni nj mn ln nk nl mp nm bi translated">创建我们的应用程序</h2><p id="ff14" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在应用程序文件夹中，创建一个npm项目(如果尚未创建)。</p><p id="7f6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们将定义对库的依赖。在<code class="fe mx my mz na b">package.json</code>中，定义依赖关系如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/d7617312e61718125a57f28debe89f0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z_1vbqrOdpxbesP3ykHa7A.png"/></div></div></figure><p id="2284" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意我是如何将版本设置为1.0.0的。这是因为 <strong class="ky ir"> <em class="mw">版本应该与库项目中的package.json </em> </strong> <em class="mw">版本相匹配。</em></p><p id="ce36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很好！现在创建一个<code class="fe mx my mz na b">index.js</code>文件，导入这个库，并使用它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/ebbd32b9e6d9f04d75b646188ec76849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YQAO_eRAE1_JpWP-l5Gobg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Using our library</figcaption></figure><p id="384d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果你现在运行代码，<strong class="ky ir">它就不会工作了</strong>。另外，不要尝试<code class="fe mx my mz na b">npm install</code>，因为它会尝试安装真正的<code class="fe mx my mz na b">library</code> npm包(我们不希望这样！)</p><h1 id="cac2" class="lz ma iq bd mb mc nq me mf mg nr mi mj jw ns jx ml jz nt ka mn kc nu kd mp mq bi translated">将库链接到我们的应用程序</h1><p id="77f6" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在让我们把一切联系起来！</p><p id="3cae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到<strong class="ky ir">库文件夹</strong>，运行命令:</p><pre class="kg kh ki kj gt nv na nw nx aw ny bi"><span id="a5b6" class="nb ma iq na b gy nz oa l ob oc">npm link</span></pre><p id="b87f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个命令将通知npm存在一个可用于npm链接的<code class="fe mx my mz na b">library</code>包。只要你<strong class="ky ir">不重启你的电脑</strong>，这种情况就会发生。</p><p id="eb3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很好，现在让我们回到我们的应用程序，用下面的命令链接这个库:</p><pre class="kg kh ki kj gt nv na nw nx aw ny bi"><span id="30f0" class="nb ma iq na b gy nz oa l ob oc">npm link library</span></pre><p id="0d11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mw">如果你的库被不同地调用，用它的实际名称</em>替换 <code class="fe mx my mz na b"><em class="mw">library</em></code> <em class="mw"/></p><p id="f595" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mw">你会在你的package.json (name) </em>中找到你的库名</p><p id="8221" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将产生两个影响:</p><ul class=""><li id="9394" class="od oe iq ky b kz la lc ld lf of lj og ln oh lr oi oj ok ol bi translated">第一个正在运行<code class="fe mx my mz na b">npm install</code>，但是它不会有太大的用处，因为我们在这里没有任何外部依赖。</li><li id="fdc9" class="od oe iq ky b kz om lc on lf oo lj op ln oq lr oi oj ok ol bi translated">第二个效果是<strong class="ky ir">将库链接到我们的项目</strong>。这意味着现在，我们能够使用它了！</li></ul><p id="3fb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单地运行应用程序文件夹中的<code class="fe mx my mz na b">node index.js</code>，你应该会看到一个“你好世界”出现在你的控制台上！</p><h1 id="9b21" class="lz ma iq bd mb mc nq me mf mg nr mi mj jw ns jx ml jz nt ka mn kc nu kd mp mq bi translated">编辑库并刷新链接</h1><p id="947d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">好消息是，没有什么事可做！如果您将“Hello world”更改为库中的其他内容，只需在您的应用程序中再次运行<code class="fe mx my mz na b">node index.js</code>，您将立即看到更改。</p><p id="030b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是因为npm链接正在创建所谓的<a class="ae kv" href="https://en.wikipedia.org/wiki/Symbolic_link" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">符号链接</strong> </a>。</p><h1 id="3394" class="lz ma iq bd mb mc nq me mf mg nr mi mj jw ns jx ml jz nt ka mn kc nu kd mp mq bi translated">手动取消链接</h1><p id="9807" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">有两种方法可以解除库的链接。</p><p id="20bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个是重启电脑。</p><p id="d110" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二种方法是使用命令</p><pre class="kg kh ki kj gt nv na nw nx aw ny bi"><span id="4d28" class="nb ma iq na b gy nz oa l ob oc">npm unlink library</span></pre><p id="3745" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你的库有另一个名字，在命令中用它替换<code class="fe mx my mz na b">library</code>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="104f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">差不多就是这样！您现在已经掌握了使用npm link所需的所有知识，并且不必发布42个alpha版本的库来用您的应用程序测试它！</p><p id="17ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望你喜欢这篇文章，如果是的话，不要犹豫留下掌声或关注！</p><p id="fcc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mw">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mw">plain English . io</em></strong></a><em class="mw">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mw">免费周报</em> </strong> </a> <em class="mw">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mw">Twitter</em></strong></a><em class="mw">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mw">LinkedIn</em></strong></a><em class="mw">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mw">社区不和谐</em> </strong> </a> <em class="mw">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mw">人才集体</em> </strong> </a> <em class="mw">。</em></p></div></div>    
</body>
</html>