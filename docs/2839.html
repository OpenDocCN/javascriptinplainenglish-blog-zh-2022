<html>
<head>
<title>Build an Audio and Video Recorder in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中构建一个音频和视频记录器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-an-audio-and-video-recorder-in-react-a452ab6c1ce6?source=collection_archive---------3-----------------------#2022-07-08">https://javascript.plainenglish.io/build-an-audio-and-video-recorder-in-react-a452ab6c1ce6?source=collection_archive---------3-----------------------#2022-07-08</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="0946" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">如何捕获视频和记录音频，并保存到本地存储器。</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/4e617eda3f3bac49fcc377ff9c873d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lDHSi1h9VKvXbdgEBbKseA.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@rupixen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">rupixen.com</a> on <a class="ae kw" href="https://unsplash.com/s/photos/technology?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7a4a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于许多应用程序来说，使用浏览器应用程序录制音频和视频是一个相当常见的用例。尤其是笔记应用。</p><p id="c44b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为了实现这些特性，我们已经有了一个名为<a class="ae kw" href="https://www.npmjs.com/package/recordrtc" rel="noopener ugc nofollow" target="_blank"> recordrtc </a>的不错的库。让我们看看如何在React应用程序中使用它。</p><h1 id="659e" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">安装依赖项</h1><p id="385d" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">首先，安装依赖项。</p><pre class="kh ki kj kk gu mq mr ms mt aw mu bi"><span id="6988" class="mv lu ir mr b gz mw mx l my mz">yarn add recordrtc</span></pre><h1 id="50b2" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">获得许可</h1><p id="0ea7" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">为了使用React应用程序录制音频或视频，您必须获得用户的许可。</p><p id="46e7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们的recordrtc库让这一切变得简单。只需创建一个函数来获取权限并初始化记录器的实例。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="na nb l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">permission</figcaption></figure><p id="f228" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们甚至可以把它做成可重复使用的挂钩。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="na nb l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">hook for permission</figcaption></figure><p id="0326" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">注意我们在钩子内部传递了一个<code class="fe nc nd ne mr b">recordingType</code>参数。这将决定我们是否试图记录音频或视频或其他东西。</p><p id="566b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们可以像这样在组件内部使用它。</p><pre class="kh ki kj kk gu mq mr ms mt aw mu bi"><span id="7b42" class="mv lu ir mr b gz mw mx l my mz">const recorder = useRecorderPermission("audio");</span></pre><h1 id="1e1c" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">来录音吧！</h1><p id="d864" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在我们有了一个钩子，它从用户那里获得许可，启动一个记录器对象，并把它返回给我们。</p><p id="b3f7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们写两个函数来开始和停止记录。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="na nb l"/></div></figure><p id="21fc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">注意，我们正在使用我们的记录器<code class="fe nc nd ne mr b">startRecording</code>和<code class="fe nc nd ne mr b">stopRecording</code>功能。我们还从名为invokeSaveAsDialog的库中获得了一个额外的函数，它允许我们指定要保存的文件的名称。</p><h1 id="a4f2" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">使用计时器记录。</h1><p id="ba14" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">假设您想要录制特定时间段的录像。每当点击一个按钮时，您希望记录20秒钟的录像。您可以使用下面的代码来做到这一点。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="na nb l"/></div></figure><p id="16b1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">注意我们是如何通过从父节点传递一个属性来定制文件名的。此外，您还可以看到录像剩余的秒数。</p><h1 id="3123" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">显像记录</h1><p id="514d" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">如果你想录制一段屏幕的视频，那么只需通过我们的<code class="fe nc nd ne mr b">useRecorderPermission</code>钩子里面的<code class="fe nc nd ne mr b">video</code>而不是<code class="fe nc nd ne mr b">audio</code>，就可以了！</p><p id="4b86" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">就是这样。我希望你今天学到了新东西！</p><pre class="kh ki kj kk gu mq mr ms mt aw mu bi"><span id="b533" class="mv lu ir mr b gz mw mx l my mz"><strong class="mr is">Want to Connect?</strong></span><span id="e216" class="mv lu ir mr b gz nf mx l my mz">You can reach out to me via <a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="mr is">LinkedIN</strong></a> or my <a class="ae kw" href="https://www.mohammadfaisal.dev/blog" rel="noopener ugc nofollow" target="_blank"><strong class="mr is">Personal Website</strong></a></span></pre><h2 id="d6fe" class="mv lu ir bd lv ng nh dn lz ni nj dp md lg nk nl mf lk nm nn mh lo no np mj nq bi translated">Github资源库:</h2><div class="nr ns gq gs nt nu"><a href="https://github.com/Mohammad-Faisal/react-audio-video-record-demo" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd is gz z fq nz fs ft oa fv fx iq bi translated">GitHub-Mohammad-fais al/react-音频-视频-记录-演示</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">使用浏览器应用程序录制音频和视频是许多应用程序的常见用例。尤其是…</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">github.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kq nu"/></div></div></a></div><p id="0cff" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="oj">更内容于</em> <a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="oj">普通英语</em> </strong> </a> <em class="oj">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="oj">免费周报</em> </strong> </a> <em class="oj">。</em> <a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="oj">推特</em> </strong> </a> <em class="oj">和</em><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="oj">LinkedIn</em></strong></a><em class="oj">追随我们。查看我们的</em> <a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="oj">社区不和</em> </strong> </a> <em class="oj">并加入我们的</em> <a class="ae kw" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="oj">人才集体</em> </strong> </a> <em class="oj">。</em></p></div></div>    
</body>
</html>