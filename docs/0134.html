<html>
<head>
<title>Understanding Remix by Building an Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过构建应用程序理解混音</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-remix-by-building-an-application-cf8a38c49631?source=collection_archive---------6-----------------------#2022-01-09">https://javascript.plainenglish.io/understanding-remix-by-building-an-application-cf8a38c49631?source=collection_archive---------6-----------------------#2022-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2d54" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Prisma，Tailwind，多份表格，验证。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0022b26cb8a70855a7ff89a09dad6aa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YKCoUwp8_5QIbWIu"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@clark_fransa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Arnold Francisca</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="20e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你好，开发人员👋👋。我们有一个新产品<a class="ae kv" href="https://doneo.io/" rel="noopener ugc nofollow" target="_blank"> Doneo </a>要开发，我们的团队决定使用Remix。我开始使用Remix已经有一个月了。我想分享我的知识，希望它能让我更容易开始使用混音。</p><p id="e44c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将构建一个简单的Remix应用程序，如下图所示。在这一篇之后会有更多的文章报道更多的其他领域。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/d87051f99432352c678fc8a8d1ce656f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/1*SnT9wcdsX3qPUiKVAdSzAw.gif"/></div></figure><h1 id="e005" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">我们开始吧</h1><p id="1ace" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">让我们从创建一个全新的混音应用程序开始。运行:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="8ba1" class="mv lu iq mr b gy mw mx l my mz">npx create-remix@latest</span></pre><p id="6f12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我选择<strong class="ky ir"> Remix应用服务器</strong>作为部署目标，选择<strong class="ky ir">类型脚本。</strong>您可以根据自己的要求和喜好进行选择。</p><p id="fdf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行命令<code class="fe na nb nc mr b">yarn dev</code>启动您的服务器。</p><h2 id="8e93" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">顺风和后CSS设置</h2><p id="9229" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">顺风设置请遵照<a class="ae kv" href="https://dipesh-kc.medium.com/styling-remix-app-with-tailwind-c3e064eace8f" rel="noopener"/>条。我在本文发表之前就已经写好了，所以一次只关注一件事是很好的。</p><h2 id="e9f7" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">核标准情报中心</h2><p id="bd0d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我在本文中使用了<strong class="ky ir"> heroicons </strong>图标。您可以使用您偏好的其他图标。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="6a56" class="mv lu iq mr b gy mw mx l my mz">yarn add <a class="ae kv" href="http://twitter.com/heroicons/react" rel="noopener ugc nofollow" target="_blank">@heroicons/react</a></span></pre><h2 id="9716" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">数据库ˌ资料库</h2><p id="f60e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我将使用<a class="ae kv" href="https://sqlite.org/index.html" rel="noopener ugc nofollow" target="_blank"> SQLite </a>数据库，这样每个人都可以很容易地了解。我也将使用<a class="ae kv" href="https://www.prisma.io/" rel="noopener ugc nofollow" target="_blank"> Prisma </a> ORM。</p><p id="4603" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装所需的软件包:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="5963" class="mv lu iq mr b gy mw mx l my mz">yarn add -D prisma<br/>yarn add <a class="ae kv" href="http://twitter.com/prisma/client" rel="noopener ugc nofollow" target="_blank">@prisma/client</a></span></pre><p id="7a59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以用SQLite初始化Prisma:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2c1d" class="mv lu iq mr b gy mw mx l my mz">npx prisma init --datasource-provider sqlite</span></pre><p id="baee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将生成:</p><ul class=""><li id="b814" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated"><code class="fe na nb nc mr b">schema.prisma</code>文件根目录下的<code class="fe na nb nc mr b">prisma</code>文件夹包含SQLite配置。</li><li id="360c" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated"><code class="fe na nb nc mr b">.env</code>文件用<code class="fe na nb nc mr b">DATABASE_URL</code>指向我们的文件数据库。</li></ul><h2 id="b71e" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">添加模型</h2><blockquote class="oc od oe"><p id="71a1" class="kw kx of ky b kz la jr lb lc ld ju le og lg lh li oh lk ll lm oi lo lp lq lr ij bi translated">地点:prisma/schema.prisma</p></blockquote><p id="6e63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将只需要这个演示的一个模型，即任务模型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="1f3f" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">准备Prisma客户</h2><p id="64f8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在这里，我们要确保我们不会在每次实时重新加载(任何代码更改)时创建到数据库的新连接，并且最终在开发环境中用完连接。所以下面的代码是为了在每次重新加载时重用相同的连接。</p><blockquote class="oc od oe"><p id="9482" class="kw kx of ky b kz la jr lb lc ld ju le og lg lh li oh lk ll lm oi lo lp lq lr ij bi translated">位置:app/utils/db.server.ts</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="1825" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">我们演示应用程序的背景</h2><p id="b78d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们的演示应用程序允许我们向任务列表中添加新任务并将其删除(或标记为完成)。</p><p id="c378" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们需要:</p><ul class=""><li id="ebe6" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">一个加载器给我们任务列表(<strong class="ky ir"> GET </strong>)</li><li id="1ed4" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">两个动作，其中一个动作用于创建新任务(<strong class="ky ir"> POST </strong>)，另一个动作用于删除任务(<strong class="ky ir"> DELETE </strong>)。在这里，我们可以创建一个动作，检查它是Post请求还是Delete请求，并相应地执行。但是我喜欢将不同关注点的代码分开，这使得代码易于管理。</li></ul><h2 id="f032" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">文件夹结构</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/a6f5283507868ca40275339c4959ae4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*sKrKk06chRQmJk0TIdD23Q.png"/></div></figure><ul class=""><li id="3832" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">在<code class="fe na nb nc mr b">routes/api/task</code>下，我们有3个文件(1个加载器和2个动作)</li><li id="5f4a" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">在<code class="fe na nb nc mr b">routes/index.tsx</code>下，我们有1个UI文件</li></ul><h2 id="e32f" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">装货设备</h2><blockquote class="oc od oe"><p id="330a" class="kw kx of ky b kz la jr lb lc ld ju le og lg lh li oh lk ll lm oi lo lp lq lr ij bi translated">位置:路线/API/任务/获取</p></blockquote><p id="5f19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这很简单。我们从utils文件夹中获取之前设置的Prisma客户端，并使用它来获取所有可用的任务。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="d941" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">行动</h2><blockquote class="oc od oe"><p id="0fd9" class="kw kx of ky b kz la jr lb lc ld ju le og lg lh li oh lk ll lm oi lo lp lq lr ij bi translated">位置:路线/API/任务/新</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="70de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我用下面几行简单解释一下:</p><ul class=""><li id="c423" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">[Line 4–14]:这是从该动作返回的数据的<strong class="ky ir">类型</strong>。<code class="fe na nb nc mr b">formError</code>在行动中掌握任何一般的错误。<code class="fe na nb nc mr b">fieldErrors</code>保存任何字段中的任何验证错误。<code class="fe na nb nc mr b">fields</code>保存提交的值，<code class="fe na nb nc mr b">ok</code>表示操作成功。</li><li id="d31a" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[Line 22–31]:这里我们从请求中接收数据，并将接收到的值设置为<code class="fe na nb nc mr b">fields</code>变量。</li><li id="455a" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[第33–39行]:这里我们做简单的验证。</li><li id="750d" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[Line 41–55]:这里我们将任务添加到数据库中。</li></ul><blockquote class="oc od oe"><p id="3f9b" class="kw kx of ky b kz la jr lb lc ld ju le og lg lh li oh lk ll lm oi lo lp lq lr ij bi translated">位置:路线/API/任务/删除</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="3022" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这有一个类似的代码风格。这里我们从数据库中删除一个任务。另一个要知道的区别是我们在这里返回<strong class="ky ir"> <em class="of">重定向到首页</em> </strong> <em class="of"> </em>。原因是这不是我们在页面上的默认加载器。(上面创建的<strong class="ky ir"><em class="of">add task-Loader</em></strong>将是我们的默认加载器)。因此，我们需要手动重定向到此加载程序来执行删除操作，此操作应该会将我们重定向回主页(任务列表)。</p><h2 id="429b" class="mv lu iq bd lv nd ne dn lz nf ng dp md lf nh ni mf lj nj nk mh ln nl nm mj nn bi translated">主文件</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="03a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这主要包含设计代码。我简单解释一下部分。</p><p id="8e13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有两种形式。一个用于添加新任务，另一个用于删除任务。</p><ul class=""><li id="d718" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">[第8–9行]:这里我们定义了这个页面的默认加载器和动作。</li><li id="0fb7" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[第12行]:我们从之前创建的加载器中获取任务列表。</li><li id="0d5f" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[第13行]:这里，我们在提交表单以添加新任务后，从操作中获得响应。</li><li id="6c87" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[第14–21行]:这是一个提交后重置输入字段的逻辑。否则，如果旧的提交值保留在输入字段中，就会很烦人。</li><li id="a76a" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[Line 33]:这是我们用来添加新任务的第一个<strong class="ky ir">表单</strong><strong class="ky ir"/>。因为我们没有提供任何action参数，所以它使用我们的默认加载器。</li><li id="171b" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">[第75行]:这是我们用来删除任务的第二个<strong class="ky ir">表单</strong>，这里我们提供动作参数来表示删除加载器存在的位置。</li></ul><h1 id="dcfb" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">结论</h1><p id="2bce" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">如果你在任何地方迷路了，你可以检查我的Github项目。</p><div class="om on gp gr oo op"><a href="https://github.com/dipeshhkc/learning-remix-crud" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">GitHub-dipeshkc/Learning-remix-crud:通过构建CRUD应用程序学习Remix</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">github.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd kp op"/></div></div></a></div><p id="a384" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我们创建一个简单的应用程序来开始使用Remix的短暂旅程的结束。希望这对你的项目有所帮助。我将在未来几天创造更多的混音文章。敬请关注。任何建议都是非常值得的。快乐编码☺.</p><p id="653f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="of">更多内容看</em> <a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="of">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="of">免费周报</em> </strong> </a> <em class="of">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="of">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="of">。</em></strong></a></p></div></div>    
</body>
</html>