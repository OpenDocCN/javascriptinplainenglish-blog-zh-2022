<html>
<head>
<title>Nginx URL matching, location, and whether proxy_pass ends with /</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Nginx URL匹配、位置以及proxy_pass是否以/结尾</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nginx-url-matching-location-and-whether-proxy-pass-ends-with-383361c2eba?source=collection_archive---------17-----------------------#2022-12-27">https://javascript.plainenglish.io/nginx-url-matching-location-and-whether-proxy-pass-ends-with-383361c2eba?source=collection_archive---------17-----------------------#2022-12-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2539c5cabd47b245bcd4b816c06cfefb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R-riyNe_g4CN2L2ji1fbbw.png"/></div></div></figure><p id="8988" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文用来记录nginx和proxy_pass的位置是否以/结尾的匹配规则</p><h2 id="a395" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">1.位置</h2><p id="8648" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">位置仅确定它是模糊匹配还是精确匹配</p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="6262" class="md kx iq lz b be me mf l mg mh">1) When there is no "/" at the end, location /abc/def can match the request of /abc/defghi, or match /abc/def/ghi......<br/>2) When there is "/" at the end, the location /abc/def/ cannot match the request of /abc/defghi, it can only match the request of /abc/def/ghi exactly</span></pre><h2 id="58de" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">2.代理_通行证</h2><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="821b" class="md kx iq lz b be me mf l mg mh">1.When there is / at the end of the url in the proxy_pass configuration, the content of the original uri except the location matching expression will be spliced after the url in the proxy_pass<br/><br/>2.</span></pre><p id="27a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">访问网址:<a class="ae mi" href="http://blog.com/proxy/login.html" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"/>http://blog.com/proxy/login.html</a></p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="72de" class="md kx iq lz b be me mf l mg mh">#Case 1<br/>location /proxy/ {<br/> proxy_pass http://myblog.com:8000/;<br/>}<br/># The final address of proxy_pass is: http://myblog.com:8000/login.html Because proxy_pass ends with / and represents an absolute path, no proxy matching the location will be added<br/><br/>#Case 2<br/>location /proxy/ {<br/> proxy_pass http://myblog.com:8000;<br/>}<br/>#proxy_pass proxy to http://myblog.com:8000/proxy/login.html<br/><br/>#Case 3<br/>location /proxy/ {<br/> proxy_pass http://myblog.com:8000/disquz/;<br/>}<br/>#proxy_pass proxy to http://myblog.com:8000/disquz/login.html<br/><br/>#Case 4<br/>location /proxy/ {<br/> proxy_pass http://myblog.com:8000/disquz;<br/>}<br/>#proxy_pass proxy to http://myblog.com:8000/disquzlogin.html</span></pre><h2 id="903e" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">总结:</h2><p id="ee59" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">当proxy_pass配置中的url末尾有/时</p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="d85f" class="md kx iq lz b be me mf l mg mh">1. the content of the original uri except the location matching expression will be spliced after the url in the proxy_pass</span></pre><p id="ee9c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当proxy_pass配置中的URL末尾没有/时</p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="4545" class="md kx iq lz b be me mf l mg mh"><br/>1. If the url does not contain a path, the original url is directly spliced after the url in proxy_pass<br/>2. If the url does not contain a path, the content of the original uri except the location matching expression is spliced after the url in proxy_pass</span></pre><p id="75d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mj">更多内容看</em> <a class="ae mi" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="mj">说白了就是</em> </strong> </a> <em class="mj">。报名参加我们的</em> <a class="ae mi" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="mj">免费周报</em> </strong> </a> <em class="mj">。关注我们关于</em> <a class="ae mi" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="mj">推特</em> </strong> </a>，<a class="ae mi" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="mj">领英</em> </strong> </a> <strong class="ka ir"> <em class="mj">，</em></strong><a class="ae mi" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mj">YouTube</em></strong></a><strong class="ka ir"><em class="mj">，以及</em></strong><em class="mj"/><a class="ae mi" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="mj">不和</em> </strong> </a>  <em class="mj">对成长黑客感兴趣？检查出</em> <a class="ae mi" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="mj">电路</em> </strong> </a> <strong class="ka ir"> <em class="mj">。</em>T71】</strong></p></div></div>    
</body>
</html>