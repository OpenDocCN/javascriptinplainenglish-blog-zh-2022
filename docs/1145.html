<html>
<head>
<title>How to Build a Simple In-Browser Full Text Search Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建一个简单的浏览器内全文搜索引擎</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-simple-in-browser-search-engine-d87c86ac3261?source=collection_archive---------0-----------------------#2022-03-06">https://javascript.plainenglish.io/building-a-simple-in-browser-search-engine-d87c86ac3261?source=collection_archive---------0-----------------------#2022-03-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2ff7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">因为有时候官僚主义会碍事。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dc132ee44dd456c6cd6e7f7451d51779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WX6PthIE_2rtkOcm-retzA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ruchindra?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ruchindra Gunasekara</a> on <a class="ae kv" href="https://unsplash.com/s/photos/warehouse?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="79d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几年前，我被要求为一个气隙<a class="ae kv" href="https://anaconda.org/conda-forge" rel="noopener ugc nofollow" target="_blank"> conda存储库</a>创建一个文件存储库。这个想法是，出于安全原因，我们将在非常昂贵的安全环境中有一个允许的库的列表，并且只有那些库。这是一个<a class="ae kv" href="https://anaconda.org/conda-forge/conda-mirror" rel="noopener ugc nofollow" target="_blank">相当简单的设置</a>，只需要大量的存储空间和一个简单的静态web服务器来传递它们。</p><p id="84cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的过滤镜像使我们能够更快地响应用户需求，并快速地在安全环境中添加或删除库。这意味着安全团队更愿意让包进入环境，因为他们知道删除它们只需几个小时，而不是几个月或几年。</p><ul class=""><li id="ea44" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">他们太激动了，我们开始使用模式来允许包。</li><li id="d0b1" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">我们很快从几十个包变成了几千个。</li><li id="bf97" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">用户开发了一个新问题，可以打电话询问:</li></ul><blockquote class="mg"><p id="668f" class="mh mi iq bd mj mk ml mm mn mo mp lr dk translated">有哪些图书馆？</p></blockquote><p id="4429" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">可用库的列表少于官方库，但明显大于一个人可以合理地期望通读，它也分布在几个文件夹中。总而言之，这是很难保持跟踪。</p><p id="6ba9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用户需要的是一个搜索引擎，像Anaconda.org，但仅限于我们的组织可用的软件包。</p><blockquote class="mv mw mx"><p id="355a" class="kw kx my ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated"><strong class="ky ir">旁白</strong></p><p id="b789" class="kw kx my ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated">就在这个时候，在我们的故事中，我发现自己因公离开了家。在魁北克加蒂诺的一家酒吧参加了一个关于利用技术系统影响社会变革的晚间讲座，喝了几杯酒后，我发现自己在加拿大隆冬时节独自走回了酒店。为了不被冻死，并找出我的酒店在哪里，我开始思考搜索问题。当我回到酒店时，我无法入睡，所以开始实施解决方案。</p><p id="534e" class="kw kx my ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated">啊…程序员的生活。</p></blockquote><p id="8731" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，官僚主义阻碍了发展。获得静态HTTP服务器是一个谈判的壮举。为了通过HTTP共享文件系统，我已经明确声明只打开静态渲染。这让我们跳过了几个月的安全评估，没有服务器端处理意味着网络没有安全风险。</p><p id="0a97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了适应对搜索引擎的需求和服务器端处理的缺乏，我在浏览器内部构建了一个简单的搜索引擎。</p><h1 id="4915" class="nc nd iq bd ne nf ng nh ni nj nk nl nm jw nn jx no jz np ka nq kc nr kd ns nt bi translated">履行</h1><p id="05e8" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">事实上，我以前已经这样做过几次了。在我的职业生涯中，有几个例子表明，获得工具和计算机对于一个简单的数据处理引擎来说是很大的障碍。这里的关键是，您可以将一个简单的<code class="fe nz oa ob oc b">html</code>文件放到您的服务位置，然后它可以查找存储在服务器上的数据。</p><p id="5439" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了读者的利益，我有一个简单的例子工作，索引中情局世界概况，然后提供内容的搜索。搜索结果提供了一个到中情局网站实际页面的链接。</p><div class="od oe gp gr of og"><a href="https://gitlab.com/jefferey-cave/simple-search-demo/-/tree/main" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd ir gy z fp ol fr fs om fu fw ip bi translated">文件主Jeff Cave /简单搜索演示</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">GitLab.com</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">gitlab.com</p></div></div><div class="op l"><div class="oq l or os ot op ou kp og"/></div></div></a></div><h2 id="9d73" class="ov nd iq bd ne ow ox dn ni oy oz dp nm lf pa pb no lj pc pd nq ln pe pf ns pg bi translated">自动索引和加载</h2><p id="10b2" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">关键是要确保某种形式的自动索引开启。服务器必须通告要处理的可用数据集，以便客户端发现它们需要处理。有几种方法可以实现这一点，最简单的是在服务器上打开服务。</p><p id="47db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在类似的系统中，我还使用了“bash”或“PowerShell”脚本来列出所有存在的数据集:没有关于它们的信息，只是说它们存在</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="dc6b" class="ov nd iq oc b gy pl pm l pn po">ls --format=single-column ./data/* &gt; <strong class="oc ir">index.txt</strong></span></pre><p id="f832" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，可以将该文件的位置传递给脚本，作为收集所有信息的起点</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="5669" class="ov nd iq oc b gy pl pm l pn po">const basePath = window.location;<br/>const datasets = `${basePath}/<strong class="oc ir">index.txt</strong>`;</span></pre><p id="fdc8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们有了要聚合的数据列表，我们就可以开始下载、解析和存储的过程。</p><p id="2bc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我们使用了PouchDB，我们可以立即开始将文本加载到本地数据库中。</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="60de" class="ov nd iq oc b gy pl pm l pn po">const db = new PouchDB('searcher');<br/>async function LoadDB(){<br/>    let recs = await fetch('./index.txt');<br/>    recs = await rec.text();<br/>    recs = rec.split('\n');<br/>    for(let loc of recs){<br/>      let content = await fetch(loc);<br/>      let nRec = {<br/>          _id: loc,<br/>          text: nRec<br/>      };</span><span id="4be9" class="ov nd iq oc b gy pp pm l pn po">      let oRec = await db.get(loc);<br/>      if(RecordsDiffer(nRec,oRec)){<br/>          db.put(nRec);<br/>      }<br/>    }<br/>}</span></pre><p id="1b71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">全文现在存储在数据库中，供用户将来使用。建议定期对此进行扫描，以查看是否发生了任何变化。(<a class="ae kv" href="https://gitlab.com/jefferey-cave/simple-search-demo/-/blob/main/scripts/loader.js#L80-109" rel="noopener ugc nofollow" target="_blank"> loader.js </a>)</p><h2 id="e5dd" class="ov nd iq bd ne ow ox dn ni oy oz dp nm lf pa pb no lj pc pd nq ln pe pf ns pg bi translated">净化文本</h2><p id="5111" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">在数据库开发和搜索中，索引可以被认为是快速参考。在手动搜索的时代，卡片目录提供了按主题排序的字母搜索，这允许快速查找。你可以在一个盒子里浏览一个更小的目录，而不必浏览整栋楼里的每本书。</p><p id="dbcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">少即是多，小即是快。</p><p id="a8ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于讨论的目的，有几个我们想要搜索的文档是很有用的:</p><blockquote class="mv mw mx"><p id="3ffd" class="kw kx my ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated">事实21:问题复杂性每增加25 %,软件解决方案的复杂性就会增加100%。这不是一个试图改变的条件(尽管降低复杂性总是一件值得做的事情)；事情就是这样。</p><p id="7386" class="kw kx my ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated">事实22:80%的软件工作是脑力劳动。相当一部分是创造性的。很少是文书工作。</p><p id="a54b" class="kw kx my ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated">—罗伯特·l·格拉斯,《软件工程的事实和谬误》</p></blockquote><p id="7f8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们讨论的示例将围绕着对Glass事实的文本进行索引，以便快速查找。这可能有助于安装在办公室的麦克风上，然后根据正在讨论的内容显示适当的“事实”。</p><p id="7726" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个事实可以放在一个单独的记录中，供我们以后索引时使用。这将允许我们把每个事实当作一个不同的实体。</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="a0b4" class="ov nd iq oc b gy pl pm l pn po">./data/fact-01.txt<br/>./data/fact-02.txt<br/>./data/fact-03.txt</span></pre><p id="61a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">诸如此类的文本的一个问题是，许多文本实际上毫无意义，或者至少意义不大。应该执行某种级别的转换来删除不必要的信息。</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="1dde" class="ov nd iq oc b gy pl pm l pn po">function sanitize(text){<br/>    text = text.toLowerCase();<br/>    text = text.replace(/[^a-z]/g,'.');<br/>    text = text.split('.');<br/>    text = text.filter(d=&gt;{return d.length &gt; 3;});<br/>    return text;<br/>}</span><span id="edcc" class="ov nd iq oc b gy pp pm l pn po">let sanitized = sanitize(facts[21]);</span></pre><p id="3336" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为索引事实21的一部分，我们删除了</p><ul class=""><li id="fb70" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">情况</li><li id="3a67" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">非文本</li><li id="c6b2" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">短词(三字，又名:<a class="ae kv" href="https://en.wikipedia.org/wiki/Stop_word" rel="noopener ugc nofollow" target="_blank">停词</a>)</li></ul><p id="2797" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从而产生净化的单词列表。(<a class="ae kv" href="https://gitlab.com/jefferey-cave/simple-search-demo/-/blob/main/scripts/crepo.js#L31-42" rel="noopener ugc nofollow" target="_blank"> crepo.js </a>)</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="a013" class="ov nd iq oc b gy pl pm l pn po">[ 'every', 'percent', 'increase', 'problem', 'complexity', 'there', 'percent', 'increase', 'complexity', 'software', 'solution', 'that', 'condition', 'change', 'even', 'though', 'reducing', 'complexity', 'always', 'desirable', 'thing', 'that', 'just' ]<!-- --> </span></pre><p id="b2ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过注意重复的单词，可以进一步减少列表。字数统计是衡量搜索项价值的一种有用方式</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="7d0e" class="ov nd iq oc b gy pl pm l pn po">function WordCount(list){<br/>    let count = {};<br/>    for(let word of list){<br/>        count[word] = count[word] || 0;<br/>        count[word]++;<br/>    }<br/>    return count;<br/>}<br/>let count = WordCount(sanitized);</span></pre><h2 id="0031" class="ov nd iq bd ne ow ox dn ni oy oz dp nm lf pa pb no lj pc pd nq ln pe pf ns pg bi translated">创建索引</h2><p id="87d6" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">出于搜索的目的，我选择对每个单词进行匹配。这样做是为了简单，因为它允许无序搜索单词。</p><p id="0341" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望用户能够使用的搜索类型示例:</p><ul class=""><li id="3b3e" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">` complexity `:一个过于复杂的单词(可能是<code class="fe nz oa ob oc b">complex</code>)</li><li id="c2a7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">` ompl `:部分匹配的单词</li><li id="c72d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">`软件olut `:多个单词</li><li id="982b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">`解决方案软件`:单词顺序不对</li></ul><p id="4558" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些例子代表了我们需要处理的几种不同的情况。最有趣的是“部分匹配”场景。</p><p id="947f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了创建一个索引，我们需要一个基于查找值的列表</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="fb54" class="ov nd iq oc b gy pl pm l pn po">| key      | score | document |<br/>| -------- | ----- | -------- | <br/>| database |   100 |  &lt;url&gt;   | <br/>| atabase  |    99 |  &lt;url&gt;   | <br/>| tabase   |    98 |  &lt;url&gt;   | <br/>| abase    |    97 |  &lt;url&gt;   | <br/>| base     |    96 |  &lt;url&gt;   |<br/>| ase      |    95 |  &lt;url&gt;   | <br/>| databas  |    99 |   ...    | <br/>| databa   |    98 |   ...    |<br/>| ...      |   ... |   ...    |</span></pre><p id="bd98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你搜索“数据搜索”时，它会找到</p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="2dde" class="ov nd iq oc b gy pl pm l pn po">document 1 <br/>data 97 <br/>document 1 <br/>search 100</span></pre><p id="9669" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总计197分，然后按得分最高的文档排序(代码:<a class="ae kv" href="https://gitlab.com/jefferey-cave/simple-search-demo/-/blob/main/scripts/search.js#L97-116" rel="noopener ugc nofollow" target="_blank"> search.js </a>)</p><h1 id="abff" class="nc nd iq bd ne nf ng nh ni nj nk nl nm jw nn jx no jz np ka nq kc nr kd ns nt bi translated">临时演员</h1><h2 id="d95d" class="ov nd iq bd ne ow ox dn ni oy oz dp nm lf pa pb no lj pc pd nq ln pe pf ns pg bi translated">词汇化</h2><p id="0f8f" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">作为另一层，我们可以考虑引理。词汇化指的是一个词所代表的最基本的词。例如，<code class="fe nz oa ob oc b">intellectual</code>可以认为与<code class="fe nz oa ob oc b">intellect</code>相同。这将有助于减少以后可能出现的印刷差异，例如，一个记得<code class="fe nz oa ob oc b">that is</code>的人应该找到<code class="fe nz oa ob oc b">that's</code>，想起来了，<code class="fe nz oa ob oc b">is</code>是一个短词。</p><p id="78f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/michmech/lemmatization-lists/blob/master/lemmatization-en.txt" rel="noopener ugc nofollow" target="_blank">https://github . com/mich mech/lemma tization-lists/blob/master/lemma tization-en . txt</a></p><pre class="kg kh ki kj gt ph oc pi pj aw pk bi"><span id="9a0b" class="ov nd iq oc b gy pl pm l pn po">every 25 <strong class="oc ir">percent </strong>increase problem <strong class="oc ir">complex </strong>there 100 <strong class="oc ir">percent </strong>increase <strong class="oc ir">complex </strong>software solution <strong class="oc ir">that </strong>condition change even though <strong class="oc ir">reduce complex </strong>always <strong class="oc ir">desire </strong>thing <strong class="oc ir">that </strong>just</span></pre><p id="1feb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个更简单的文本版本，它将减少信息熵的数量(也就是在记忆时大脑中可能出错的事情)。</p><p id="c46a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章已经整理好了，可以做索引了。</p><h1 id="c69c" class="nc nd iq bd ne nf ng nh ni nj nk nl nm jw nn jx no jz np ka nq kc nr kd ns nt bi translated">结论</h1><p id="1352" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">第二天早上，写完解决方案后，我对自己有了一个完整的解决方案感到非常满意，我可以通过电子邮件将它发送给我的主要客户(整个组织中的一些数据科学经理)。我非常高兴，把它展示给了一位同事，他帮我优化了索引。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/f1495b73d469dcae333edb794a5259bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*zvSURY8_96f2ky9W0VjUMA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://www.buymeacoffee.com/jeffereycave" rel="noopener ugc nofollow" target="_blank">Found this Intersting? Leave a Tip…. it helps</a></figcaption></figure><p id="f112" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">多年后，这仍然是该组织跟踪可用的康达软件包的方式。</p><p id="198e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">公平地说，我能够在一夜之间完成这件事的唯一原因是我已经实现了很多次。我已经使用浏览器端索引实现了用于回归测试、员工工作分配、个人博客搜索和古腾堡项目搜索引擎的仪表板。它甚至成为我教授的一门JavaScript入门课的基础。</p><p id="0903" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我喜欢JavaScript的原因之一:它总是可用于数据处理，<a class="ae kv" href="https://ai.plainenglish.io/fun-with-markov-network-brains-8041c35ca883" rel="noopener ugc nofollow" target="_blank">无论你在那个时刻碰巧有什么疯狂的想法</a>。</p><p id="3108" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自从最初写这篇文章以来，我发现Lawson实际上已经为PouchDB 写了一个<a class="ae kv" href="https://github.com/pouchdb-community/pouchdb-quick-search" rel="noopener ugc nofollow" target="_blank">全文搜索。你应该使用他基于</a><a class="ae kv" href="https://github.com/olivernn/lunr.js" rel="noopener ugc nofollow" target="_blank"> lunr引擎</a>的解决方案。</p><h2 id="c4f8" class="ov nd iq bd ne ow ox dn ni oy oz dp nm lf pa pb no lj pc pd nq ln pe pf ns pg bi translated">非最佳的</h2><p id="7ca4" class="pw-post-body-paragraph kw kx iq ky b kz nu jr lb lc nv ju le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">这不是最佳解决方案。</p><p id="866f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，搜索引擎的每个用户都必须下载并生成自己的索引实例。这要求客户端第一次为他们使用的每个浏览器下载整个数据集(增加网络流量)。</p><p id="443b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在回归测试仪表板中，测试结果的初始下载和解析花费了大约3个小时。缓存意味着如果你每天保持更新，它几乎是即时的，但是第一次加载是很大的。</p><p id="d7ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">服务器端处理的一个关键优势是能够获取入站数据，并为所有客户生成一次索引。您可以通过在服务器上生成索引并让客户端下载构建的索引来消除这种差异。这将在用于中央数据的中央处理器和用于单独搜索的分布式处理之间分割处理负载。</p><p id="8c7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这暗示了共享和分布式处理之间有趣的平衡。使用支持CouchDB交换协议的数据库(<a class="ae kv" href="https://en.wikipedia.org/wiki/Couchbase_Server" rel="noopener ugc nofollow" target="_blank"> CouchBase </a>、<a class="ae kv" href="https://en.wikipedia.org/wiki/Apache_CouchDB" rel="noopener ugc nofollow" target="_blank"> CouchDB </a>、<a class="ae kv" href="https://pouchdb.com/" rel="noopener ugc nofollow" target="_blank"> PouchDB </a>、<a class="ae kv" href="https://en.wikipedia.org/wiki/Cloudant" rel="noopener ugc nofollow" target="_blank"> CloudAnt </a>)，每个用户都可以在发现新数据时对其进行处理，而且还可以将结果共享回中央池，供下一个人使用。这种数据处理的延迟加载形式在理论上有一些优势(在可信环境中),因为它需要很少的中央处理(昂贵),而是依赖于已经在使用的工作站。同时，它将分担工作负载，以确保没有一台计算机承担全部计算的压力。</p><p id="9812" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，如果这个解决方案引起了您的兴趣，您应该看看为CouchDB提供的基于Lucene的搜索，它包含在所有商业产品中。</p></div><div class="ab cl pr ps hu pt" role="separator"><span class="pu bw bk pv pw px"/><span class="pu bw bk pv pw px"/><span class="pu bw bk pv pw"/></div><div class="ij ik il im in"><p id="5af1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请留下评论或提出问题，如果您发现此内容有价值，请记得<a class="ae kv" href="https://jefferey-cave.medium.com/" rel="noopener">点击关注</a>。</p><p id="6ada" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="my">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="my">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="my">免费周报</em> </strong> </a> <em class="my">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="my">Twitter</em></strong></a><em class="my">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="my">LinkedIn</em></strong></a><em class="my">。加入我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="my">社区不和谐</em> </strong> </a> <em class="my">。</em></strong></a></p></div></div>    
</body>
</html>