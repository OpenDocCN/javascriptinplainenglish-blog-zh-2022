<html>
<head>
<title>Why I Ditched Heroku and Now Use Render</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我放弃了Heroku，现在使用渲染</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-i-ditched-heroku-and-now-use-render-d70bd387edc0?source=collection_archive---------0-----------------------#2022-06-27">https://javascript.plainenglish.io/why-i-ditched-heroku-and-now-use-render-d70bd387edc0?source=collection_archive---------0-----------------------#2022-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="63c0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我使用Render而不是Heroku的10个原因</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ec46b9f82ff95c0acce2b1cb6c90ba03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oBFEkh_axk_SE4gkwqEl7g.png"/></div></div></figure><p id="4895" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，您希望使用NodeJS、Ruby、Python或Java创建一个简单的网站或在线服务。你知道如何使用大多数AWS产品，但你不需要任何花哨的东西。即使你有十万活跃用户，AWS的工作量也太大了。</p><p id="f70a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您想要一个简单的解决方案来托管您的站点，但是AWS需要太多的设置和基础设施。在这一点上，大多数人会求助于Heroku。设置和集成GitHub很容易，并且您的代码会通过pull请求自动部署到您的<code class="fe ln lo lp lq b">main</code>或<code class="fe ln lo lp lq b">master</code>分支。Heroku很容易，简单，没有废话…当你需要它时，它可以毫不费力地扩大规模。</p><p id="3689" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">如果Heroku如此简单，那么开发者为什么还要使用其他东西呢？</strong> Heroku并不是唯一易于使用的托管服务。Render是一个相对较新的主机提供商，于2019年4月问世。它应该是最容易访问的主机提供商，然而它却拥有如此强大的功能。</p><p id="812f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是我从Heroku搬来的十个原因。</p><h1 id="1163" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">惊人的用户界面/UX</h1><p id="3e74" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">当涉及到开发人员的工具时，用户界面和用户体验经常被忽略——毕竟，我们是开发人员，应该只关心功能。我认为这种心态是错误的。用户界面和体验在你<em class="mo">是否希望</em>使用该软件中扮演着重要角色。</p><p id="3d89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">AWS挺丑但是很先进。Heroku没有AWS复杂，但用户体验比AWS好得多。但是移动渲染让我更想用。你得到一个漂亮的用户界面，用户体验令人印象深刻，任何应用程序的设置只需要两分钟。</p><p id="bd0e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个按钮和部分都有很好的衬垫，非常容易看。我们经常忘记开发者也是用户，当有更直接的选择时，我们不应该处理丑陋的ui或难以使用的软件。</p><h1 id="1cbe" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">HTTP请求超时</h1><p id="8a96" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">有时应用程序需要很长时间才能得到响应。例如，我正在积极开发一个抓取网页的工具。当用户输入一个查询时，它会在搜索引擎结果页面(SERP)中搜索20多个不同的搜索引擎，抓取每个结果，并将其存储在数据库中，然后返回一个响应。对于50000个唯一的结果，这个过程需要4到5分钟。</p><p id="6b3d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Heroku将硬响应超时设置为30秒。如果服务器在这段时间内没有响应，它将自动关闭连接—这不能在您的服务设置中配置(即使您为Dynos付费)。</p><p id="5efb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一方面，Render允许在100分钟内自动关闭连接。任何响应都不会花费100分钟来完成，因此这是一个更合理的响应超时上限。</p><p id="539b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据您的应用程序，请求超时的上限可能是一个障碍，这使得Render成为一个更好的选择。</p><h1 id="c7ca" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">不变数据</h1><p id="f7dc" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">假设您有一个完整的后端设置，包括服务器和数据库。如果您正在编写一个NodeJS应用程序，您的服务器将使用NodeJS运行，但是您的数据库将运行MongoDB。</p><p id="8d30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在Heroku上，不能运行MongoDB实例，因为数据在两次部署之间不会持久化。<em class="mo">这是什么意思？</em>每当您重新部署应用程序时，Heroku都会擦除驱动器，提取新代码，构建新代码，然后运行它。所有保存的文件都将被删除，所有缓存都将被移除，在新部署中唯一能找到的是源代码和构建文件。</p><p id="9f0e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，在渲染时，数据可以在部署之间保持不变。因此，如果您将任何文件保存到文件系统，当您重新部署时，它们将会在那里。如果您有一个正在运行的MongoDB或MySQL实例，它仍然会在那里。</p><p id="4273" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这对你有什么好处？你不需要注册第三方数据库提供商。你不需要付钱给任何人来托管你的数据库。它包含在渲染计划的存储空间中。</p><p id="0d24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将数据库托管在运行服务器的同一平台上的另一个好处是，网络调用留在网络内，而不必到互联网上。这加快了在数据库中插入或更新文档的时间以及数据检索时间。</p><h1 id="29e6" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">你想怎么建就怎么建</h1><p id="3add" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">Heroku对应用程序的构建和运行有严格的规则。以NodeJS为例。在Heroku上部署NodeJS应用程序时，您<strong class="kt ir">必须</strong>提供npm <code class="fe ln lo lp lq b">build</code>脚本。</p><p id="13ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您正在编写一个纯JavaScript服务器，不需要构建，因此npm <code class="fe ln lo lp lq b">build</code>脚本没有用处。你还需要提供一个<code class="fe ln lo lp lq b">.Procfile</code>或者一个npm <code class="fe ln lo lp lq b">start</code>脚本。</p><p id="66bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Render允许你以任何你想要的方式构建，无论是一个shell脚本，一个JavaScript文件，<code class="fe ln lo lp lq b">mvn</code>，或者根本不构建。</p><h1 id="594b" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">HTTPS和HTTP/2(和HTTP/3)</h1><p id="6e1e" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">Heroku在传输协议方面已经过时了。各大浏览器(<a class="ae mp" href="https://medium.com/@thesoggywaffle/the-interesting-history-of-web-browsers-29c37604923b" rel="noopener"> Chrome、Firefox、Safari及其衍生</a>)从2015年开始支持<a class="ae mp" href="https://www.wikiwand.com/en/HTTP/2" rel="noopener ugc nofollow" target="_blank"> HTTP/2 </a>。Heroku的落后之处在于只支持<strong class="kt ir"> HTTP/1.1。</strong></p><p id="a210" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Render在HTTP/2上提供内容，并尽可能在HTTP/3上提供。但是这有什么关系呢？HTTP/2要快得多。它使用二进制而不是明文，这使得它比以前的HTTP版本更安全、更快。</p><p id="b457" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一点是HTTPS。Heroku允许你用你的网络服务器配置HTTPS，但是有一个主要的缺点:你必须配置它。使用Render，默认情况下，所有站点都在HTTPS服务器上运行；不需要任何配置。如果您想添加您的SSL证书，您可以这样做。你想做的配置和定制的数量在你的手中。</p><h1 id="d1f5" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">高级DDoS保护</h1><p id="91b2" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">DDoS(分布式拒绝服务)攻击是黑客入侵网站最常见和最容易的方法。本质上，一堆计算机向同一个服务器发送许多请求。它占用带宽，强迫服务器毫无理由地执行一堆代码；这会导致服务器崩溃。</p><p id="e7d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Heroku有一个原始的DDoS保护设置。然而，他们的文档建议使用第三方DDoS保护来应对复杂的攻击。</p><p id="96d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">大部分Heroku用户会使用Cloudflare进行DDoS防护；Cloudflare很优秀，Render用了。Cloudflare的高级DDoS保护可保护Render上托管的所有网站。这可以保护您的服务器免受最复杂的DDoS攻击。Render在其平台上的所有服务器上都启用了该功能，无需任何设置。</p><h1 id="e275" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">负载平衡</h1><p id="4c1d" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">负载平衡是高级托管平台和计划中的一项功能。在某一点上，您的应用程序将有太多的用户，任何一台服务器都无法处理。这是可伸缩性的问题。</p><p id="e2b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">负载平衡器将所有用户分组，并使用不同的服务器为其他组提供服务。集团通常按地区(美国东部、美国西部、东欧等)定义。)，而且每个组都有专门的服务器。</p><p id="4c55" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这使得您的应用程序可以扩展以处理更大的用户池。用Heroku设置负载平衡是一件痛苦的事情——用AWS设置甚至是一件痛苦的事情。自动渲染负载平衡您的应用程序。</p><p id="9062" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Render的负载平衡器也对HTTP响应使用高端加密。这增加了加载时间，并改善了用户在移动和慢速互联网连接上的体验。</p><h1 id="365f" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">零停机部署</h1><p id="c01b" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">对于大多数应用而言，零停机时间至关重要。零停机时间意味着服务器将一直不间断地运行。这一点很重要，因为用户会日夜不停地使用你的应用程序。</p><p id="78fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Heroku每24小时重启一次你的服务器。这意味着内存状态被清除。所有变量、数据库连接和WebSockets都将被重置。这会影响应用程序的稳定性和用户体验。你必须付出高昂的代价来阻止Heroku自动重启。</p><p id="831d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">渲染永远不会重新启动或关闭您的应用程序，除非您选择手动这样做。</p><h1 id="8d10" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">健康检查</h1><p id="33ca" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">Heroku不为<strong class="kt ir">提供</strong>健康检查。每个托管平台都应该自动检查服务器是否正常运行。</p><p id="d271" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Render允许您定义一个自定义路径，该路径应该总是返回一个HTTP <code class="fe ln lo lp lq b">200</code>成功代码。如果此路径没有提供成功代码，Render会识别健康检查失败，并将自动重新启动应用程序。</p><h1 id="e9b5" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">定价</h1><p id="ad8e" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la ml lc ld le mm lg lh li mn lk ll lm ij bi translated">许多人会在Render上使用Heroku <em class="mo">和</em>的免费计划来托管他们的应用程序。我对大多数申请都这样做，直到我认真对待它们。如果您想要更多的内存或存储空间并使用更多的功能，您将需要一个高级计划。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/3a395b126ff38051d2e3b9f33348b4b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3tv7vJsXtaieITAx1H3D7g.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk">Pricing comparison from Render’s website</figcaption></figure><p id="4f9f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Heroku的定价高得离谱，尤其是当你扩大应用规模的时候。你可能最终为100，000个每日活跃用户每月支付超过一万美元。</p><p id="4e75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mo">更多内容尽在</em> <a class="ae mp" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mo">说白了. io </em> </strong> </a> <em class="mo">。报名参加我们的</em> <a class="ae mp" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。关注我们关于</em> <a class="ae mp" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mo">推特</em> </strong> </a> <em class="mo">和</em><a class="ae mp" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="mo">LinkedIn</em></strong></a><em class="mo">。查看我们的</em> <a class="ae mp" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mo">社区不和谐</em> </strong> </a> <em class="mo">加入我们的</em> <a class="ae mp" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mo">人才集体</em> </strong> </a> <em class="mo">。</em></p></div></div>    
</body>
</html>