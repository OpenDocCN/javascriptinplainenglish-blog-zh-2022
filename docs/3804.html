<html>
<head>
<title>How to Get the Value of an Input At the Click of a Button in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中点击一个按钮获得输入的值</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-get-input-value-on-button-click-aceb59fb6217?source=collection_archive---------2-----------------------#2022-09-28">https://javascript.plainenglish.io/react-get-input-value-on-button-click-aceb59fb6217?source=collection_archive---------2-----------------------#2022-09-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1da3" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在React中点击按钮时，如何轻松获取输入字段值的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/70d03d842dc8acfe5b762a0dfe521d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4dRcqYa_E2gRKTg8xgpqdg.png"/></div></div></figure><p id="3e4f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要在React中获取按钮单击的输入值:</p><ol class=""><li id="9175" class="lk ll in kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">创建一个状态变量来存储输入字段的值。</li><li id="6acb" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">在输入上设置一个<code class="fe ly lz ma mb b">onChange</code>事件处理程序，以便在输入字段值改变时更新状态变量。</li><li id="cd6f" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">在按钮元素上设置一个<code class="fe ly lz ma mb b">onClick</code>事件处理程序。</li><li id="ff3a" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">访问事件处理程序中的状态变量。</li></ol><p id="ef37" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><p id="a47f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ly lz ma mb b">App.js</code></p><pre class="kd ke kf kg gt mc mb md me aw mf bi"><span id="b77c" class="mg mh in mb b gy mi mj l mk ml">import { useState } from 'react';</span><span id="8a0a" class="mg mh in mb b gy mm mj l mk ml">export default function App() {<br/>  const [message, setMessage] = useState('');</span><span id="cc19" class="mg mh in mb b gy mm mj l mk ml">  const [updated, setUpdated] = useState(message);</span><span id="7107" class="mg mh in mb b gy mm mj l mk ml">  const handleChange = (event) =&gt; {<br/>    setMessage(event.target.value);<br/>  };</span><span id="7e43" class="mg mh in mb b gy mm mj l mk ml">  const handleClick = () =&gt; {<br/>    // 👇 "message" stores input field value<br/>    setUpdated(message);<br/>  };</span><span id="ed94" class="mg mh in mb b gy mm mj l mk ml">  return (<br/>    &lt;div&gt;<br/>      &lt;input<br/>        type="text"<br/>        id="message"<br/>        name="message"<br/>        onChange={handleChange}<br/>        value={message}<br/>      /&gt;</span><span id="0a7a" class="mg mh in mb b gy mm mj l mk ml">      &lt;h2&gt;Message: {message}&lt;/h2&gt;</span><span id="53b9" class="mg mh in mb b gy mm mj l mk ml">      &lt;h2&gt;Updated: {updated}&lt;/h2&gt;</span><span id="845e" class="mg mh in mb b gy mm mj l mk ml">      &lt;button onClick={handleClick}&gt;Update&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/c809c4f7bf0ce610d6c6e680c28f32ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/0*gon9rX0QtCJLgwzO.gif"/></div></figure><p id="68db" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用<code class="fe ly lz ma mb b">useState()</code>钩子，我们创建一个状态变量(<code class="fe ly lz ma mb b">message</code>)来存储输入字段的当前值。我们还创建了另一个状态变量(<code class="fe ly lz ma mb b">updated</code>)，当按钮被点击时，它将被输入字段值更新。</p><p id="1e2e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们在输入字段上设置了一个<code class="fe ly lz ma mb b">onChange</code>事件处理程序，以便在输入值改变时调用这个处理程序。在处理程序中，我们使用<code class="fe ly lz ma mb b">event.target</code>属性来访问表示<code class="fe ly lz ma mb b">input</code>元素的对象。这个对象的<code class="fe ly lz ma mb b">value</code>属性包含输入值，所以我们将它传递给<code class="fe ly lz ma mb b">setMessage()</code>来更新<code class="fe ly lz ma mb b">message</code>，这反映在页面上。</p><p id="965a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在设置了受控输入之后，我们现在可以在<code class="fe ly lz ma mb b">handleChange</code>处理程序之外使用<code class="fe ly lz ma mb b">message</code>来访问输入字段的当前值。</p><p id="0e77" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，在我们对<code class="fe ly lz ma mb b">button</code>设置的<code class="fe ly lz ma mb b">onClick</code>事件处理程序中，我们使用<code class="fe ly lz ma mb b">setUpdated(message)</code>用当前输入字段值更新<code class="fe ly lz ma mb b">updated</code>变量。</p><h1 id="805d" class="mo mh in bd mp mq mr ms mt mu mv mw mx jt my ju mz jw na jx nb jz nc ka nd ne bi translated">获取按钮点击时非受控输入的值</h1><p id="3595" class="pw-post-body-paragraph ko kp in kq b kr nf jo kt ku ng jr kw kx nh kz la lb ni ld le lf nj lh li lj ig bi translated">要在React中获取按钮单击时不受控制的输入的值:</p><ol class=""><li id="c24f" class="lk ll in kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">为输入字段创建一个引用</li><li id="8cdf" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">在<code class="fe ly lz ma mb b">button</code>上设置一个<code class="fe ly lz ma mb b">onClick</code>事件处理程序。</li><li id="2446" class="lk ll in kq b kr lt ku lu kx lv lb lw lf lx lj lp lq lr ls bi translated">使用ref对象访问事件处理程序中的当前输入值。</li></ol><p id="273c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">例如:</p><p id="506b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ly lz ma mb b">App.js</code></p><pre class="kd ke kf kg gt mc mb md me aw mf bi"><span id="259a" class="mg mh in mb b gy mi mj l mk ml">import { useRef, useState } from 'react';</span><span id="154c" class="mg mh in mb b gy mm mj l mk ml">export default function App() {<br/>  const inputRef = useRef(null);</span><span id="d17e" class="mg mh in mb b gy mm mj l mk ml">  const [updated, setUpdated] = useState('');</span><span id="4768" class="mg mh in mb b gy mm mj l mk ml">  const handleClick = () =&gt; {<br/>    // 👇 "inputRef.current.value" is input value<br/>    setUpdated(inputRef.current.value);<br/>  };</span><span id="c361" class="mg mh in mb b gy mm mj l mk ml">  return (<br/>    &lt;div&gt;<br/>      &lt;input<br/>        ref={inputRef}<br/>        type="text"<br/>        id="message"<br/>        name="message"<br/>      /&gt;</span><span id="0587" class="mg mh in mb b gy mm mj l mk ml">      &lt;h2&gt;Updated: {updated}&lt;/h2&gt;</span><span id="5856" class="mg mh in mb b gy mm mj l mk ml">      &lt;button onClick={handleClick}&gt;Update&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/4d1f2505048ab8f5f85b3d992c150e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/0*g0CVqWhcNjXUaRSk.gif"/></div></figure><p id="54c8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">受控输入中的数据由React state处理，而非受控输入中的数据由DOM本身处理。这就是为什么上面例子中的<code class="fe ly lz ma mb b">input</code>没有设置<code class="fe ly lz ma mb b">value</code>道具或<code class="fe ly lz ma mb b">onChange</code>事件处理程序。相反，我们使用React ref访问输入字段值。当输入中的文本发生变化时，DOM会更新这个值。</p><p id="e30e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们用<code class="fe ly lz ma mb b">useRef()</code>钩子创建一个ref对象，并将其设置为<code class="fe ly lz ma mb b">input</code>的<code class="fe ly lz ma mb b">ref</code>道具。这样做将ref对象的<code class="fe ly lz ma mb b">current</code>属性设置为表示<code class="fe ly lz ma mb b">input</code>元素的DOM对象。</p><p id="43b4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ly lz ma mb b">useRef()</code>返回一个可变的ref对象，该对象在组件更新时不改变值。此外，修改该对象的<code class="fe ly lz ma mb b">current</code>属性值不会导致重新渲染。这与从<code class="fe ly lz ma mb b">useState()</code>返回的<code class="fe ly lz ma mb b">setState</code>更新功能相反。</p><p id="437f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">尽管React文档建议使用受控组件，但非受控组件也有一些优势。如果表单非常简单，不需要即时验证，并且只需要在提交表单时访问值，那么您可能更喜欢使用它们。</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><p id="6d45" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ns">最初发表于</em><a class="ae nt" href="https://cbdev.link/7a9289" rel="noopener ugc nofollow" target="_blank"><em class="ns">codingbeautydev.com</em></a></p><h1 id="104e" class="mo mh in bd mp mq mr ms mt mu mv mw mx jt my ju mz jw na jx nb jz nc ka nd ne bi translated">ES13中11个惊人的新JavaScript特性</h1><p id="bfde" class="pw-post-body-paragraph ko kp in kq b kr nf jo kt ku ng jr kw kx nh kz la lb ni ld le lf nj lh li lj ig bi translated">本指南将带您快速了解ECMAScript 13中添加的所有最新功能。这些强大的新特性将会用更短、更富于表现力的代码来更新您的JavaScript。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/75a56482761ab63cfc081ad691d70d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*WqVjQY7sKZh3wld5WzkfTw.png"/></div></figure><p id="b288" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nt" href="https://cbdev.link/900477" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>