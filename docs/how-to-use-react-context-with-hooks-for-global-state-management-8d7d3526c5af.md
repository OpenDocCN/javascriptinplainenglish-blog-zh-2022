# å¦‚ä½•ä½¿ç”¨å¸¦æœ‰é’©å­çš„ React ä¸Šä¸‹æ–‡è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/how-to-use-react-context-with-hooks-for-global-state-management-8d7d3526c5af?source=collection_archive---------0----------------------->

## ç”¨ React çš„ useContext åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ä¸Šä¸‹æ–‡æŒ‚é’©

![](img/75f13f1117b70ecb0bbce464eedda7f9.png)

# å†…å®¹

1.  **ä¸ºä»€ä¹ˆ**æ‚¨å¸Œæœ›ä½¿ç”¨ React çš„ä¸Šä¸‹æ–‡ API è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Ÿ
2.  ååº”ä¸Šä¸‹æ–‡èƒ½ä»£æ›¿ **Redux** å—ï¼Ÿ
3.  **ä»€ä¹ˆæ—¶å€™**æˆ‘åº”è¯¥ä½¿ç”¨ React ä¸Šä¸‹æ–‡ï¼Ÿ
4.  å¦‚ä½•ä½¿ç”¨ React ä¸Šä¸‹æ–‡:æ˜¾ç¤ºä»£ç 

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ React çš„ä¸Šä¸‹æ–‡ API è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Ÿ

ç­”æ¡ˆå¾ˆç®€å•ï¼Œå°½ç®¡æ‚¨å¯ä»¥é€šè¿‡ *props* å°†çŠ¶æ€ä»ä¸»çˆ¶ç»„ä»¶ä¸€ç›´ä¼ é€’åˆ°æ‰€æœ‰å­ç»„ä»¶ï¼Œä½†åœ¨ 2 çº§= > **æ·±åº¦ props drilling**ä¹‹åï¼Œè¿™å°†å˜å¾—éå¸¸éº»çƒ¦ï¼Œè¿™æ˜¯ä¸€ç§ç³Ÿç³•çš„åšæ³•ï¼Œä¼šå¯¼è‡´ä»£ç éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚è¿™æ—¶ä½ åº”è¯¥çœ‹çœ‹çŠ¶æ€ç®¡ç†åº“(ä¾‹å¦‚ **Redux** æˆ–å†…ç½® **React Context** )ã€‚

## React ä¸Šä¸‹æ–‡èƒ½ä»£æ›¿ Redux å—ï¼Ÿ

å—¯ï¼Œçœ‹æƒ…å†µã€‚ã€Redux å’Œ React ä¸Šä¸‹æ–‡åœ¨ React åº”ç”¨ä¸­ä»ç„¶æœ‰å…¶åˆç†çš„ä½ç½®ï¼Œç”¨äºä¸åŒçš„ç›®çš„ã€‚Redux æ˜¯ React æœ€æµè¡Œçš„çŠ¶æ€ç®¡ç†åº“ï¼Œä½†å®ƒä¸æ˜¯ React çš„ä¸€éƒ¨åˆ†ã€‚å¦ä¸€æ–¹é¢ï¼ŒReact Context æ˜¯ä¸€ä¸ªå†…ç½®çš„ React APIï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚Redux æ—¨åœ¨ç”¨äºæ›´åŠ¨æ€çš„æ•°æ®ï¼Œè€Œ **React Context åº”è¯¥ç”¨äºä¸ç»å¸¸æ”¹å˜çš„é™æ€æ•°æ®**ï¼Œä¾‹å¦‚ä¸»é¢˜ã€è¯­è¨€ã€åŒºåŸŸè®¾ç½®ã€‚ä¸ç®€å•çš„ React ä¸Šä¸‹æ–‡ç›¸æ¯”ï¼ŒRedux å¯èƒ½éœ€è¦ä¸€äº›åˆå§‹æ ·æ¿æ–‡ä»¶ï¼Œåœ¨æ‚¨ä¹ æƒ¯è¿™ç§æ¨¡å¼ä¹‹å‰å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚æ‰€ä»¥ï¼Œ **Redux å’Œ React è¯­å¢ƒä¸æ˜¯åŒä¸€ä¸ª**ã€‚

æ­¤å¤–ï¼Œ **Redux æä¾›äº†ä¸€äº›ç°æˆçš„å¥½å¤„**ã€‚é¦–å…ˆï¼Œä½¿ç”¨ Redux å­˜å‚¨ä¸­çš„çŠ¶æ€çš„ç»„ä»¶åªæœ‰åœ¨è¿æ¥éƒ¨åˆ†å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°å‘ˆç°ã€‚ä¸ React ä¸Šä¸‹æ–‡ä¸åŒï¼Œ**ç”±æ‚¨æ¥ä¼˜åŒ–è®¢é˜… React ä¸Šä¸‹æ–‡**çš„ç»„ä»¶ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡ç”¨ [*useMem* o()](https://reactjs.org/docs/hooks-reference.html#usememo) æˆ– [*React.memo()*](https://reactjs.org/docs/react-api.html#reactmemo) æ¥è®°å¿†å®ƒä»¬ã€‚å…¶æ¬¡ï¼ŒRedux ä¸º [DevTools æä¾›äº†æ—¶é—´æ—…è¡Œè°ƒè¯•](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en)ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå¦‚æœä½ ä½¿ç”¨ React Context å’Œ [*useReducer* ()](https://reactjs.org/docs/hooks-reference.html#usereducer) é’©å­ï¼Œä¸€ä¸ªç±»ä¼¼çš„é¡¹ç›®å«åš [react-rewind](https://github.com/reactrewind/react-rewind) æ˜¯å¯ç”¨çš„ã€‚

## ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ React ä¸Šä¸‹æ–‡ï¼Ÿ

æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œå¯¹äºä¸ç»å¸¸æ”¹å˜å¹¶ä¸”çœŸæ­£æ˜¯å…¨çƒæ€§çš„(ä¾‹å¦‚ï¼Œä¸»é¢˜ã€è¯­è¨€ã€åœ°åŒº)çš„**æ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å¦åˆ™ï¼Œè®©çŠ¶æ€åªå±€é™äºå®ƒæ‰€å±çš„ç»„ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ Redux å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚**

# å¦‚ä½•ä½¿ç”¨ React ä¸Šä¸‹æ–‡:æ˜¾ç¤ºä»£ç 

ä¸‹é¢ä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸ª gif å›¾ç‰‡ï¼Œå±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å°†æ„å»ºå®ƒæ¥æŸ¥çœ‹ React ä¸Šä¸‹æ–‡çš„è¿è¡Œæƒ…å†µã€‚è¿™å°†æ˜¯ä¸€ä¸ªæœ€å°çš„[*create-react-app*](https://reactjs.org/docs/create-a-new-react-app.html)é¡¹ç›®ï¼Œæœ‰ä¸€ç‚¹å°å°çš„å˜åŒ–â€”â€”æˆ‘ä»¬å°†ç”¨ä¸¤ä¸ªä¸»é¢˜(äº®å’Œæš—)ä½¿å®ƒä¸»é¢˜åŒ–ï¼Œå…¶ä¸­å½“å‰çš„**ä¸»é¢˜é€šè¿‡ä¸Šä¸‹æ–‡**å…±äº«ã€‚

![](img/9da808872783703d8363671b3da16761.png)

Themeable React app with a custom context hook

è™½ç„¶ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™ç¯‡æ–‡ç« åªå±•ç¤ºäº†æœ€é‡è¦ä»£ç çš„è¦ç‚¹ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºå¹¶ä»”ç»†çœ‹çœ‹ï¼Œä½ å¯ä»¥åœ¨ GitHub ä¸Šçœ‹åˆ°å®Œæ•´çš„æ¼”ç¤º:

[](https://github.com/pixochi/react-context-theme-example) [## GitHub-pix ochi/react-context-theme-example:ä¸€ä¸ª React åº”ç”¨ç¨‹åºï¼Œå±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨â€¦

### ä½ å¯ä»¥åœ¨ Medium ä¸Šæ‰¾åˆ°å®Œæ•´çš„è§£é‡Šã€‚åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œæ‚¨å¯ä»¥è¿è¡Œ:åœ¨å¼€å‘ä¸­è¿è¡Œåº”ç”¨ç¨‹åºâ€¦

github.com](https://github.com/pixochi/react-context-theme-example) 

## ä½¿ç”¨ React ä¸Šä¸‹æ–‡çš„ 5 ä¸ªæ­¥éª¤

ä¸‹é¢ä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªè¦ç‚¹ï¼Œå®ƒå±•ç¤ºäº†åœ¨ä½ çš„åº”ç”¨ä¸­å¼€å§‹ä½¿ç”¨ React ä¸Šä¸‹æ–‡æ‰€éœ€çš„æ‰€æœ‰(æœ€å°‘)ä»£ç ã€‚gist ä¸­çš„æ³¨é‡Šæ›´è¯¦ç»†åœ°è§£é‡Šäº†ä»£ç ï¼Œä½†å¯ä»¥æ€»ç»“ä¸º **5 ä¸ªç®€å•çš„æ­¥éª¤**:

1.  åˆ›å»ºä¸€ä¸ª*ä¸Šä¸‹æ–‡å¯¹è±¡*(ç¬¬ 5 è¡Œ)ã€‚
2.  åˆ›å»º*ä¸€ä¸ªå®šåˆ¶é’©å­*ï¼Œç”¨äºä»¥ååœ¨å…¶ä»–ç»„ä»¶ä¸­æ¶ˆè´¹*ä¸Šä¸‹æ–‡*çš„å€¼(ç¬¬ 8 è¡Œ)ã€‚
3.  ä¸º*ä¸Šä¸‹æ–‡æä¾›è€…*åˆ›å»ºä¸€ä¸ªåŒ…è£…å™¨(ç¬¬ 12â€“20 è¡Œ)ã€‚
4.  ç”¨*ä¸Šä¸‹æ–‡æä¾›è€…*åŒ…è£…åº”ç”¨ç¨‹åºï¼Œè¿™æ ·æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥è®¿é—®ä¸Šä¸‹æ–‡å€¼(ç¬¬ 38â€“40 è¡Œ)ã€‚
5.  åœ¨ä»»ä½•éœ€è¦è®¿é—®*ä¸Šä¸‹æ–‡*çš„ç»„ä»¶ä¸­ä½¿ç”¨*å®šåˆ¶é’©å­*(ç¬¬ 52 è¡Œ)ã€‚

é‚£ä¹ˆå‰©ä¸‹å”¯ä¸€è¦åšçš„äº‹æƒ…å°±æ˜¯ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„å€¼ï¼Œå°±åƒç¬¬ 58ã€64â€“65 å’Œ 71 è¡Œçš„è¦ç‚¹æ‰€ç¤ºã€‚

Code with React Context for sharing the current theme

ç°åœ¨ï¼Œæ‚¨å¯ä»¥å¯¹éœ€è¦åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«çš„ä»»ä½•æ•°æ®ä½¿ç”¨ç›¸åŒçš„ React Provider æ¨¡å¼ï¼ğŸ‰

## **å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·å…³æ³¨æˆ‘ï¼Œäº†è§£æ›´å¤šå…³äº Reactã€JavaScriptã€TypeScript ç­‰å¼€å‘çš„æŠ€å·§:ã€‘**

![](img/58169394fda55f6cbde8487504ee1975.png)

## æˆä¸ºä¼šå‘˜

*å¦‚æœä½ å–œæ¬¢çœ‹è¿™æ ·çš„æ•…äº‹ï¼Œæƒ³æ”¯æŒæˆ‘è¿™ä¸ªä½œå®¶ï¼Œ* [*è€ƒè™‘æŠ¥åæˆä¸ºä¸­ä¼šå‘˜*](https://jakub-kozak.medium.com/membership) *ã€‚ä¸€ä¸ªæœˆ 5 ç¾å…ƒï¼Œç»™ä½ * ***æ— é™åˆ¶è®¿é—®*** *åª’ä½“ä¸Šçš„æ•…äº‹ã€‚å¦‚æœä½ ç”¨æˆ‘çš„é“¾æ¥* *æ³¨å†Œï¼Œæˆ‘ä¼šèµšä¸€å°ç¬”ä½£é‡‘*ğŸ™Œ

[](https://jakub-kozak.medium.com/membership) [## é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥ Medium é›…å„å¸ƒÂ·ç§‘è¨å…‹

### é˜…è¯»é›…å„å¸ƒÂ·ç§‘è¨å…‹(ä»¥åŠåª’ä½“ä¸Šæˆåƒä¸Šä¸‡çš„å…¶ä»–ä½œå®¶)çš„æ¯ä¸€ä¸ªæ•…äº‹ã€‚æ‚¨çš„ä¼šå‘˜è´¹ç›´æ¥æ”¯æŒâ€¦

jakub-kozak.medium.com](https://jakub-kozak.medium.com/membership) 

## å·¥ä½œæœºä¼šâ€”â€”æ¥åŠ å…¥æˆ‘å§

æˆ‘åœ¨ Tjekvik çš„å›¢é˜Ÿæ­£åœ¨å¯»æ‰¾æ›´å¤šçš„å¼€å‘è€…ï¼ä½ æœ‰ä½¿ç”¨ React å’Œ Ruby on Rails çš„ç»éªŒå—ï¼Ÿé‚£å°±ä¸è¦çŠ¹è±«ï¼Œé©¬ä¸Šåœ¨è¿™é‡Œç”³è¯·:[https://www.tjekvik.com/careers](https://www.tjekvik.com/careers)ã€‚ä½ å¯ä»¥åœ¨æ¬§æ´²çš„ä»»ä½•åœ°æ–¹å·¥ä½œï¼ğŸŒ

[](https://jakub-kozak.medium.com/stop-using-for-conditional-rendering-in-react-a0f7b96200f8) [## åœæ­¢åœ¨ React ä¸­ä½¿ç”¨â€œ&&â€è¿›è¡Œæ¡ä»¶æ¸²æŸ“

### é€šè¿‡åœ¨ React ç»„ä»¶ä¸­ä¸ä½¿ç”¨` && 'æ¥é¿å…é”™è¯¯

jakub-kozak.medium.com](https://jakub-kozak.medium.com/stop-using-for-conditional-rendering-in-react-a0f7b96200f8) [](/react-hooks-when-to-use-uselayouteffect-instead-of-useeffect-3271a96d881a) [## React æŒ‚é’©â€”ä½•æ—¶ä½¿ç”¨ useLayoutEffect è€Œä¸æ˜¯ useEffect

### useEffect å’Œ useLayoutEffect çš„åŒºåˆ«â€”â€”ç”¨ä¸€ä¸ªçœŸå®çš„ä¾‹å­æ¥è§£é‡Šã€‚

javascript.plainenglish.io](/react-hooks-when-to-use-uselayouteffect-instead-of-useeffect-3271a96d881a) [](https://medium.com/swlh/how-to-build-a-chrome-extension-with-react-typescript-and-webpack-92e806ce2e16) [## å¦‚ä½•ä½¿ç”¨ Reactã€TypeScript å’Œ Webpack æ„å»º Chrome æ‰©å±•

### ä»åˆ›å»ºæ ·æ¿æ–‡ä»¶åˆ°å‘å¸ƒ Chrome ç½‘ç»œå•†åº—çš„å®Œæ•´æ‰©å±•

medium.com](https://medium.com/swlh/how-to-build-a-chrome-extension-with-react-typescript-and-webpack-92e806ce2e16) [](https://medium.com/swlh/best-moment-js-alternatives-5dfa6861a1eb) [## æœ€ä½³æ—¶åˆ»ã€‚JS æ›¿ä»£æ–¹æ¡ˆ

### æ¯”è¾ƒå¤§å°ã€æ€§èƒ½ã€ç±»å‹è„šæœ¬æ”¯æŒç­‰

medium.com](https://medium.com/swlh/best-moment-js-alternatives-5dfa6861a1eb) 

*æ›´å¤šå†…å®¹è¯·çœ‹*[***plain English . io***](https://plainenglish.io/)*ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„* [***å…è´¹å‘¨æŠ¥***](http://newsletter.plainenglish.io/) *ã€‚å…³æ³¨æˆ‘ä»¬å…³äº*[***Twitter***](https://twitter.com/inPlainEngHQ)*å’Œ*[***LinkedIn***](https://www.linkedin.com/company/inplainenglish/)*ã€‚æŸ¥çœ‹æˆ‘ä»¬çš„* [***ç¤¾åŒºä¸å’Œè°***](https://discord.gg/GtDtUAvyhW) *åŠ å…¥æˆ‘ä»¬çš„* [***äººæ‰é›†ä½“***](https://inplainenglish.pallet.com/talent/welcome) *ã€‚*