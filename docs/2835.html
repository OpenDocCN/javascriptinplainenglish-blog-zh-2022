<html>
<head>
<title>3 Ways to Repeat a String in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中重复字符串的3种方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-ways-to-repeat-a-string-in-javascript-766984ef96f9?source=collection_archive---------13-----------------------#2022-07-07">https://javascript.plainenglish.io/3-ways-to-repeat-a-string-in-javascript-766984ef96f9?source=collection_archive---------13-----------------------#2022-07-07</a></blockquote><div><div class="fc ic id ie if ig"/><div class="ih ii ij ik il"><div class=""/><div class=""><h2 id="1bef" class="pw-subtitle-paragraph jl in io bd b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dk translated">重复一个字符串可以提高开发效率</h2></div><figure class="ke kf kg kh gu ki gi gj paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gi gj kd"><img src="../Images/b9e53e8b383cb13863a1571ffdc9736e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uPETpfxQBa7cQWJq"/></div></div><figcaption class="kp kq gk gi gj kr ks bd b be z dk">Photo by <a class="ae kt" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kelly Sikkema</a> on <a class="ae kt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="af95" class="ku kv io bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">前言</h1><p id="86c1" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">我们在开发页面的时候，需要测试在文字特别长的情况下，页面的显示是否正常。例如，在列表页面上，如果文本太长，就需要截断文本。</p><p id="b8a9" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated">所以我们需要不同长度的文本数据，本文将介绍3种重复文本字符串的方法。</p><h1 id="7624" class="ku kv io bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">String的repeat()方法</h1><p id="da67" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">在ES6中，String增加了一个<code class="fe mn mo mp mq b"><a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat" rel="noopener ugc nofollow" target="_blank">repeat()</a></code>方法，通过指定count返回一个新的字符串。</p><pre class="ke kf kg kh gu mr mq ms mt aw mu bi"><span id="4b36" class="mv kv io mq b gz mw mx l my mz">const user = 'bitbug';<br/>console.log(user.repeat(3));</span></pre><p id="2c58" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated">它会输出<code class="fe mn mo mp mq b">bitbugbitbugbitbug</code>。</p><figure class="ke kf kg kh gu ki gi gj paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gi gj na"><img src="../Images/66fe2720b4ceb320d4c09e43e60322f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vxxE_HUHf-cjNmSUOd69ng.png"/></div></div></figure><p id="5d21" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated">使用repeat方法可以很容易地创建重复字符串，但是IE11不支持这种方法。</p><h1 id="e661" class="ku kv io bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">使用数组的API</h1><p id="2f42" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">Array有很多API，所以会有很多实现。但步骤都差不多，先构造一个指定长度的空数组，然后填充字符串，最后转换成字符串。</p><h2 id="6f45" class="mv kv io bd kw nb nc dn la nd ne dp le lv nf ng lg lz nh ni li md nj nk lk nl bi translated">使用数组的fill()方法</h2><p id="9b8a" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">如果我们想重复一个字符串，我们可以用<code class="fe mn mo mp mq b">fill()</code>方法将字符串填充到数组实例中，然后将其转换为字符串</p><pre class="ke kf kg kh gu mr mq ms mt aw mu bi"><span id="fe77" class="mv kv io mq b gz mw mx l my mz">function repeatString(string, count) {<br/>    return Array(count).fill(string).join('');<br/>}</span></pre><p id="5331" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated">我们可以通过重复<code class="fe mn mo mp mq b">bitbug</code> 3次来测试它:</p><figure class="ke kf kg kh gu ki gi gj paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gi gj nm"><img src="../Images/f37706846e1621fce831cd897f1bef09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1YwG5VibwMAdPcPyziN6Q.png"/></div></div></figure><h2 id="0c0d" class="mv kv io bd kw nb nc dn la nd ne dp le lv nf ng lg lz nh ni li md nj nk lk nl bi translated">使用数组的join()方法</h2><p id="1a95" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">将数组转换成字符串时，可以使用<code class="fe mn mo mp mq b">join()</code>方法。<code class="fe mn mo mp mq b">join()</code>方法将通过分隔符连接数组中的所有元素。我们可以使用需要重复的字符串自定义分隔符。</p><pre class="ke kf kg kh gu mr mq ms mt aw mu bi"><span id="e6ce" class="mv kv io mq b gz mw mx l my mz">function repeatString(string, count) {<br/>    return Array(count + 1).join(string);<br/>}</span></pre><p id="4bbb" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated">请注意，构造的数组的长度需要大于重复字符串的数量。</p><h2 id="e762" class="mv kv io bd kw nb nc dn la nd ne dp le lv nf ng lg lz nh ni li md nj nk lk nl bi translated">使用数组的reduce()方法</h2><p id="35d2" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">我们可以使用Array的iterator方法通过迭代数组的所有元素来构造一个新的字符串。</p><pre class="ke kf kg kh gu mr mq ms mt aw mu bi"><span id="10ca" class="mv kv io mq b gz mw mx l my mz">function repeatString(string, count) {<br/>    return Array(count).toString().split(',').reduce(pre =&gt; pre + string, '');<br/>}</span></pre><p id="3f12" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated">需要注意的是，如果数组为空，则不会执行<code class="fe mn mo mp mq b">reduce()</code>方法，所以需要用空字符串填充。</p><h1 id="7cbd" class="ku kv io bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">用while循环重复一个字符串</h1><p id="09f2" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">只要指定的条件评估为true，while语句就会执行其语句。</p><pre class="ke kf kg kh gu mr mq ms mt aw mu bi"><span id="f741" class="mv kv io mq b gz mw mx l my mz">function repeatString(string, count) {<br/>    let result = '';<br/>    while (count) {<br/>        result+= string;<br/>        count--;<br/>    }<br/>    return result;<br/>}</span></pre><p id="5997" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated">当数据量相对较大时，可以使用二分法优化while循环。详细请参考<a class="ae kt" href="https://github.com/lodash/lodash/blob/master/repeat.js" rel="noopener ugc nofollow" target="_blank"> loadsh的重复</a>的实现或者参考<a class="ae kt" href="https://github.com/mathiasbynens/String.prototype.repeat/blob/master/implementation.js" rel="noopener ugc nofollow" target="_blank">这个实现</a>。</p><pre class="ke kf kg kh gu mr mq ms mt aw mu bi"><span id="01a7" class="mv kv io mq b gz mw mx l my mz">// Code from  <a class="ae kt" href="https://github.com/mathiasbynens/String.prototype.repeat/blob/master/implementation.js" rel="noopener ugc nofollow" target="_blank">https://github.com/mathiasbynens/String.prototype.repeat/blob/master/implementation.js</a></span><span id="8416" class="mv kv io mq b gz nn mx l my mz">function repeatString(string, count) {<br/>  let result = '';<br/>  while (count) {<br/>    if (count % 2 === 1) {<br/>      result += string;<br/>    }<br/>    if (count &gt; 1) {<br/>      string += string;<br/>    }<br/>    count &gt;&gt;= 1;<br/>  }<br/>  return result;<br/>}</span></pre><h1 id="c729" class="ku kv io bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">结论</h1><p id="4110" class="pw-post-body-paragraph lm ln io lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ih bi translated">虽然介绍了三种重复字符串的方法，但是推荐使用原生的<code class="fe mn mo mp mq b">repeat()</code>方法。如果需要在生产环境中使用，需要注意是否需要兼容IE11，选择相应的解决方案。</p><p id="97c7" class="pw-post-body-paragraph lm ln io lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ih bi translated"><em class="no">更多内容尽在</em> <a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lo ip"> <em class="no">说白了. io </em> </strong> </a> <em class="no">。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lo ip"> <em class="no">免费周报</em> </strong> </a> <em class="no">。关注我们关于</em> <a class="ae kt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="lo ip"> <em class="no">推特</em></strong></a><strong class="lo ip"><em class="no"/></strong><em class="no">和</em><a class="ae kt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lo ip"><em class="no">LinkedIn</em></strong></a><em class="no">。查看我们的</em><strong class="lo ip"><em class="no"/></strong><a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="lo ip"><em class="no">社区不和谐</em> </strong> </a> <em class="no">加入我们的</em> <a class="ae kt" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="lo ip"> <em class="no">人才集体</em> </strong> </a> <em class="no">。</em></p></div></div>    
</body>
</html>