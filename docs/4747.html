<html>
<head>
<title>How to return response from an asynchronous call in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中从异步调用返回响应</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-return-response-from-an-asynchronous-call-in-javascript-ee70abb1c51?source=collection_archive---------6-----------------------#2022-12-29">https://javascript.plainenglish.io/how-to-return-response-from-an-asynchronous-call-in-javascript-ee70abb1c51?source=collection_archive---------6-----------------------#2022-12-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/15336aae87c59f34052fd08b135375a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wT1YK97eThk141-m"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@dan__burton?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dan Burton</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b239" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以使用async/await语法使foo函数异步，如下所示:</p><pre class="lb lc ld le gt lf lg lh bn li lj bi"><span id="3ba0" class="lk ll iq lg b be lm ln l lo lp">async function foo() {<br/>    try {<br/>        const response = await axios.get('...');<br/>        return response.data;<br/>    } catch (error) {<br/>        console.error(error);<br/>    }<br/>}</span></pre><p id="3d9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码使用axios.get方法向指定的URL发送get请求，并使用await关键字等待响应。response.data属性包含服务器返回的实际数据。</p><p id="b335" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您喜欢基于回调的方法，可以使用以下代码:</p><pre class="lb lc ld le gt lf lg lh bn li lj bi"><span id="f3f8" class="lk ll iq lg b be lm ln l lo lp">function foo() {<br/>    return new Promise((resolve, reject) =&gt; {<br/>        axios.get('...')<br/>            .then(response =&gt; resolve(response.data))<br/>            .catch(error =&gt; reject(error));<br/>    });<br/>}<br/></span></pre><p id="20b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码返回一个新的承诺，该承诺用服务器返回的数据进行解析，或者如果请求失败，则用错误拒绝。您可以使用then和catch方法分别处理已解析或已拒绝的承诺。</p><p id="2410" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如:</p><pre class="lb lc ld le gt lf lg lh bn li lj bi"><span id="2c90" class="lk ll iq lg b be lm ln l lo lp">foo().then(data =&gt; console.log(data)).catch(error =&gt; console.error(error));</span></pre><p id="1929" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码记录服务器返回到控制台的数据，或者在请求失败时记录错误。</p><p id="9776" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用async/await语法使foo函数异步的另一个例子是，您可以执行以下操作:</p><pre class="lb lc ld le gt lf lg lh bn li lj bi"><span id="2351" class="lk ll iq lg b be lm ln l lo lp">async function foo() {<br/>  try {<br/>    const response = await axios.post(‘/some/endpoint’, { some: ‘data’ });<br/>    console.log(response.data);<br/>    return response.data;<br/>  } catch (error) {<br/>    console.error(error);<br/>  }<br/>}</span></pre><p id="cd94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将使用axios库向/some/端点发送一个POST请求，并在继续下一行代码之前等待响应。如果请求成功，response.data将被记录到控制台。如果有错误，它将被捕获并记录到控制台。</p><p id="81d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一篇文章提到:</p><div class="lq lr gp gr ls lt"><a rel="noopener  ugc nofollow" target="_blank" href="/promises-and-async-await-are-powerful-tools-for-handling-asynchronous-code-in-javascript-cf3463a4def8"><div class="lu ab fo"><div class="lv ab lw cl cj lx"><h2 class="bd ir gy z fp ly fr fs lz fu fw ip bi translated">Promises和async/await是JavaScript中处理异步代码的强大工具</h2><div class="ma l"><h3 class="bd b gy z fp ly fr fs lz fu fw dk translated">Promises和async/await是JavaScript中处理异步代码的强大工具，它们在工作时特别有用…</h3></div><div class="mb l"><p class="bd b dl z fp ly fr fs lz fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mc l"><div class="md l me mf mg mc mh jw lt"/></div></div></a></div><p id="ca11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mi">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mi">plain English . io</em></strong></a><em class="mi">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mi">免费周报</em> </strong> </a> <em class="mi">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mi">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mi">LinkedIn</em></strong></a><em class="mi"/><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mi">YouTube</em></strong></a><em class="mi"/><a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mi">不和</em> </strong> </a> <strong class="kf ir"> <em class="mi">。</em>T49】</strong></p><p id="fba0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mi">有兴趣规模化你的软件创业</em> </strong> <em class="mi">？检查</em> <a class="ae kc" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mi">电路</em> </strong> </a> <em class="mi">。</em></p></div></div>    
</body>
</html>