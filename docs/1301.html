<html>
<head>
<title>Build Twitter Clone using React and Solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React和Solidity构建Twitter克隆</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-twitter-clone-using-react-and-solidity-8aa8a1715186?source=collection_archive---------4-----------------------#2022-03-15">https://javascript.plainenglish.io/build-a-twitter-clone-using-react-and-solidity-8aa8a1715186?source=collection_archive---------4-----------------------#2022-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4490f30f706d01c43ef395918ba42847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ObQkM_CnYf8lLlSp4C-g6g.png"/></div></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="e2ca" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">先决条件</h1><p id="fbab" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">请确保您了解以下内容:</p><ul class=""><li id="5a33" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma mi mj mk ml bi translated"><a class="ae mm" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>安装在你的机器上。</li><li id="ae97" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma mi mj mk ml bi translated"><a class="ae mm" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> Metamask </strong> </a>钱包扩展安装完毕。</li><li id="2289" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma mi mj mk ml bi translated">关于<a class="ae mm" href="https://ethereum.org/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> ETH区块链</strong> </a>如何工作的知识。</li></ul></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="d23b" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">资源</h1><ul class=""><li id="fa6a" class="mb mc iq lf b lg lh lk ll lo ms ls mt lw mu ma mi mj mk ml bi translated"><a class="ae mm" href="https://docs.soliditylang.org/en/v0.8.11/" rel="noopener ugc nofollow" target="_blank">坚固性概述</a></li><li id="c888" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma mi mj mk ml bi translated">关注我的YouTube频道<a class="ae mm" href="https://www.youtube.com/channel/UCV-_hzlbVSlobkekurpLOZw" rel="noopener ugc nofollow" target="_blank">了解即将推出的课程</a></li></ul></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="351e" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">项目概述</h1><p id="dcaa" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本文中，我们将首先编写自己的基于Solidity的智能合约，在区块链联邦理工学院部署该智能合约，然后构建一个Twitter克隆web应用程序，允许我们发布和查看所有推文。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/2ea6fce628a0b31d0c761b9356aba624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwF0d7r2qs62xcgMCAUkWw.png"/></div></div></figure><ul class=""><li id="1e0b" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma mi mj mk ml bi translated">要查看有关该项目的详细视频:</li></ul><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><ul class=""><li id="7e2d" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma mi mj mk ml bi translated">要查看该项目的完整源代码，这里是<a class="ae mm" href="https://github.com/Kavit900/twitter_clone_react_solidity_dapp" rel="noopener ugc nofollow" target="_blank">库</a>。</li></ul></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="6c83" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">后端项目设置</h1><p id="38b1" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">要开始，我们需要创建一个安全帽项目。为此，请打开您的终端。创建或更改到一个新的空目录，并运行以下命令:</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="dc2a" class="nh kg iq nd b gy ni nj l nk nl">npm install ethers hardhat @nomiclabs/hardhat-waffle \<br/>ethereum-waffle chai @nomiclabs/hardhat-ethers \<br/>@openzeppelin/contracts dotenv</span></pre><p id="e0cf" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">接下来，让我们初始化一个新的开发环境，为此，我们将使用hardhat命令:</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="2d03" class="nh kg iq nd b gy ni nj l nk nl">npx hardhat</span></pre><p id="f53d" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">运行此命令后，我们将得到一堆设置问题，只需选择<code class="fe np nq nr nd b">Create a basic sample project</code>选项，其他选项按<code class="fe np nq nr nd b">yes</code>。</p><p id="4d6d" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">现在，您应该可以在根目录中看到为您创建的以下文件和文件夹:</p><p id="13d9" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated"><strong class="lf ir"> hardhat.config.js </strong> —您的整个hardhat设置(即您的配置、插件和自定义任务)都包含在这个文件中。</p><p id="07a0" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated"><strong class="lf ir">脚本</strong> —包含名为sample-script.js的脚本的文件夹，该脚本将在执行时部署您的智能合约。</p><p id="53c7" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated"><strong class="lf ir"> test — </strong>一个包含测试脚本示例的文件夹。</p><p id="973d" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated"><strong class="lf ir">合同</strong> —保存示例Solidity智能合同的文件夹。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="cbd6" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">使用炼金术获取以太坊API密钥</h1><p id="2e01" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Alchemy是一个区块链开发者平台，致力于简化区块链开发。他们构建了一套开发人员工具、增强的API和卓越的节点基础设施，以无缝地构建和运行区块链应用程序。</p><p id="33c0" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">要创建API，请遵循以下步骤:-</p><ol class=""><li id="7673" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma ns mj mk ml bi translated">在<a class="ae mm" href="https://www.alchemy.com/" rel="noopener ugc nofollow" target="_blank">炼金术</a>报名。</li></ol><p id="94e2" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">2.转到<a class="ae mm" href="https://dashboard.alchemyapi.io/" rel="noopener ugc nofollow" target="_blank">仪表板</a>。</p><p id="6060" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">3.选择网络作为rinkeby。</p><p id="72f2" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">4.在这之后，在alchemy上创建app之后复制HTTP key。</p><p id="efd0" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">完成上述步骤后，在项目根目录下创建一个<code class="fe np nq nr nd b">.env</code>文件，并将这个HTTP密钥存储为:</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="3471" class="nh kg iq nd b gy ni nj l nk nl">ALCHEMY_RINKEBY_URL = "ALCHEMY_HTTP_API_KEY"</span></pre></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="6699" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">从元掩码获取您的帐户私钥</h1><p id="173d" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这个私有帐户密钥是我们的智能合同部署脚本所需要的，以便执行它并从我们的钱包中取出煤气费。</p><ol class=""><li id="8a2b" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma ns mj mk ml bi translated">点击图标</li><li id="6a41" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">选择您想要导出的帐户</li><li id="19a9" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">在账户页面上，点击右上角的菜单(三个点):</li></ol><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nt"><img src="../Images/afa53b62457b3e5b07a174076d1d6577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JCipkqPBymZ0UbqV.png"/></div></div></figure><p id="c651" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">4.点击“账户详情”按钮</p><p id="5761" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">5.单击“导出私钥”:</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/116d8d3d3c81b68270ab611f91e8dac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9ZjFNQyhmzDuZdfj.png"/></div></div></figure><p id="3e89" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">6.输入您的密码并点击“确认”</p><p id="bb1a" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">7.你的私钥泄露了。单击以复制它，并将其保存在安全的地方。</p><p id="d28f" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">8.点击“完成”关闭屏幕:</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/686eeb615e25a200d5b2525fe035c4ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kYP4I-RtST2PiFHc.png"/></div></div></figure><p id="14c7" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">现在，一旦你有了你的私有密匙，把它复制并粘贴到你的<code class="fe np nq nr nd b">.env</code>文件中。</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="e6ed" class="nh kg iq nd b gy ni nj l nk nl">ACCOUNT_KEY = "YOUR_ACCOUNT_PRIVATE_KEY</span></pre><p id="6322" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated"><strong class="lf ir">重要提示</strong>:不要将<code class="fe np nq nr nd b">.env</code>文件推送到GitHub，因为它包含你的私人数据。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="6152" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">更新hardhat.config.js</h1><p id="e0b8" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">此后，用以下内容更新<strong class="lf ir"> hardhat.config.js </strong>中的配置:</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="2121" class="nh kg iq nd b gy ni nj l nk nl">require("<a class="ae mm" href="http://twitter.com/nomiclabs/hardhat-waffle" rel="noopener ugc nofollow" target="_blank">@nomiclabs/hardhat-waffle</a>");<br/>require('dotenv').config()module.exports = {<br/>  solidity: "0.8.4",<br/>  networks: {<br/>    rinkeby: {<br/>      url: process.env.ALCHEMY_RINKEBY_URL,<br/>      accounts: [process.env.ACCOUNT_PRIVATE_KEY],<br/>    }<br/>  }<br/>};</span></pre></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="fc80" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">创建智能合同逻辑</h1><p id="07ba" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">接下来，我们将创建我们的智能合约！我们将为Twitter创建一个智能合同，以保存我们在区块链联邦理工学院的推文。</p><p id="7577" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">在contracts目录中创建一个名为<code class="fe np nq nr nd b">TwitterContract.sol</code>的新文件。在这里，添加以下代码:</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nw nb l"/></div></figure><p id="cfa0" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">我不会详细介绍如何在<code class="fe np nq nr nd b">solidity</code>中编码，但很快我会在<code class="fe np nq nr nd b">solidity</code>上制作视频教程。敬请期待！</p><h2 id="7890" class="nh kg iq bd kh nx ny dn kl nz oa dp kp lo ob oc kt ls od oe kx lw of og lb oh bi translated">合同细节</h2><ol class=""><li id="7768" class="mb mc iq lf b lg lh lk ll lo ms ls mt lw mu ma ns mj mk ml bi translated">我们首先创建一个名为tweet的结构，它为我们存储了4个字段:- <br/> (i) id(存储tweet id) <br/> (ii) username(存储发Tweet的人的钱包地址)<br/> (iii) tweetText(存储该人的实际Tweet)<br/>(iv)is deleted(跟踪Tweet是否被删除的标志)。</li><li id="f707" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">函数<strong class="lf ir"> addTweet() </strong>接受两个参数<strong class="lf ir"> tweetText </strong>和<strong class="lf ir"> isDeleted </strong>。我们基本上是将推文添加到我们的列表中，跟踪所有推文，并且还有一个存储<strong class="lf ir">推文Id </strong> = &gt; <strong class="lf ir">推文所有者</strong>的全球地图。之后，我们发出一个名为<strong class="lf ir"> AddTweet </strong>的事件，基本上就是给区块链添加一个新的区块。</li><li id="f187" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">函数<strong class="lf ir"> getAllTweets() </strong>非常简单，它返回到目前为止发生的所有推文。我们在这里检查的一件事是，一条推文是否被删除，并基于此将其添加到我们的推文结果列表中。</li><li id="f6b4" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">函数<strong class="lf ir"> getMyTweets() </strong>，类似于<strong class="lf ir"> getAllTweets() </strong>，除了一个额外的东西，我们检查tweet是否属于请求它的人。</li><li id="d838" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">最后一个函数<strong class="lf ir"> deleteTweet() </strong>接受两个参数，<strong class="lf ir"> TweetId </strong>和<strong class="lf ir"> isDeleted </strong>标志，我们检查该tweet是否属于当前试图删除它的人，然后我们发出一个deleteTweet()事件以在区块链级别进行更改。</li></ol></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="6048" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">测试智能合约</h1><p id="84f7" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在智能合约代码已经完成，我们可以尝试使用<code class="fe np nq nr nd b">unit tests</code>进行测试。</p><p id="5e3b" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">要创建一个<code class="fe np nq nr nd b">unit test</code>，创建并打开<code class="fe np nq nr nd b">test/TwitterContractTest.js</code>，用下面的代码更新它:</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nw nb l"/></div></figure><p id="0466" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">现在我们可以使用下面的命令运行<code class="fe np nq nr nd b">unit test</code></p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="d149" class="nh kg iq nd b gy ni nj l nk nl">npx hardhat test</span></pre><p id="9c6d" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">所有的单元测试都是不言自明的，所以我不会详述。查看视频以获得更深入的理解。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="0cc8" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">在Rinkeby网络上部署智能合约</h1><p id="fee3" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，我们已经创建了我们的智能合同，并且已经过单元测试，我们有信心将其部署到我们的区块链联邦理工学院。</p><p id="0af7" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">要部署合同，在<code class="fe np nq nr nd b">scripts</code>文件夹中创建一个名为<code class="fe np nq nr nd b">deploy.js</code>的<code class="fe np nq nr nd b">file</code>，并添加以下内容:-</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="5c37" class="nh kg iq nd b gy ni nj l nk nl">const main = async() =&gt; {<br/>  const twitterContractFactory = await ethers.getContractFactory('TwitterContract')<br/>  const twitterContract = await twitterContractFactory.deploy()<br/>  await twitterContract.deployed()console.log("Contract deployed to: ", twitterContract.address)<br/>}const runMain = async() =&gt; {<br/>  try {<br/>    await main()<br/>    process.exit(0)<br/>  } catch(error) {<br/>    console.log(error)<br/>    process.exit(1)<br/>  }<br/>}runMain()</span></pre><p id="0124" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">当我们运行以下脚本时，它将使用<code class="fe np nq nr nd b">ethers.js</code>包获取<strong class="lf ir"> TwitterContract </strong>合同，然后我们将使用<code class="fe np nq nr nd b">deploy()</code>内置方法部署它。</p><p id="5421" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">要运行该脚本，请使用以下命令:-</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="0098" class="nh kg iq nd b gy ni nj l nk nl">npx hardhat run scripts/deploy.js --network rinkeby</span></pre><p id="de1d" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">现在，我们脚本中的<code class="fe np nq nr nd b">console</code>命令将显示我们的契约被部署的<code class="fe np nq nr nd b">address</code>。</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="4965" class="nh kg iq nd b gy ni nj l nk nl">console.log("Contract deployed to: ", twitterContract.address)</span></pre><p id="abcb" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">将那个<code class="fe np nq nr nd b">contract address</code>复制并粘贴到一个安全的地方，因为我们将在前端文件中使用它。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="e38f" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">前端设置</h1><p id="8c29" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，我们需要为<strong class="lf ir"> Dapp </strong>的前端创建一个新的<strong class="lf ir"> React.js </strong>项目。为此，请在终端中运行以下命令:</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="4d4c" class="nh kg iq nd b gy ni nj l nk nl">npx create-react-app client </span></pre><p id="8771" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">这将在文件夹<code class="fe np nq nr nd b">client</code>中创建一个新的React项目。</p><p id="92ed" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">在此之后，在<code class="fe np nq nr nd b">client</code>文件夹中安装前端的依赖项。为此，请在终端中运行以下命令:</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="c269" class="nh kg iq nd b gy ni nj l nk nl">cd client <br/>npm install axios ethers <br/>npm install avataaars @material-ui/core @material-ui/icons<br/>npm install react-twitter-embed react-flip-move</span></pre></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="2a7b" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">构建前端</h1><p id="cc07" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在<strong class="lf ir">智能契约</strong>正在工作，我们可以开始构建UI了。</p><p id="0f9b" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">首先，我们需要在<strong class="lf ir">前端</strong>和<strong class="lf ir">智能契约</strong>之间建立一个连接，这样它就可以利用契约中的函数与来自区块链的数据进行交互。</p><p id="73d0" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">现在，为了让前端知道基于用户交互调用什么函数，我们需要从文件夹<code class="fe np nq nr nd b">artifacts/contracts/TwitterContract.sol</code>中导入一个<code class="fe np nq nr nd b">TwitterContract.json</code>文件，并将这个文件放在<code class="fe np nq nr nd b">client</code>文件夹中一个新的<code class="fe np nq nr nd b">utils</code>文件夹中。</p><p id="7486" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">接下来，在<code class="fe np nq nr nd b">client</code>文件夹的根目录下创建一个<code class="fe np nq nr nd b">config.js</code>文件，并将<code class="fe np nq nr nd b">contract</code>部署地址粘贴为:-</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="5464" class="nh kg iq nd b gy ni nj l nk nl">export const TwitterContractAddress = "DEPLOYED_CONTRACT_ADDRES"</span></pre><p id="19b4" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">现在，让我们再次看看Twitter用户界面模拟</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/2ea6fce628a0b31d0c761b9356aba624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwF0d7r2qs62xcgMCAUkWw.png"/></div></div></figure><p id="c73e" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">如果你清楚地看到，我们有三个部分:-</p><ol class=""><li id="d220" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma ns mj mk ml bi translated">最左边的叫做<strong class="lf ir">侧边栏</strong>，它显示了在页面中移动的导航按钮。</li><li id="f067" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">中间的一个叫做<strong class="lf ir"> Feed </strong>，显示所有最新的推文</li><li id="e487" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">最右边的一个叫做<strong class="lf ir"> Widgets </strong>，它显示了所有的流行标签和相关的东西。</li></ol></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h2 id="c9c7" class="nh kg iq bd kh nx ny dn kl nz oa dp kp lo ob oc kt ls od oe kx lw of og lb oh bi translated">侧栏组件</h2><p id="1b3b" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，让我们来看看，我们在顶部有一个twitter的标志，然后我们有一系列的导航按钮:-主页，探索，通知等。</p><p id="9656" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">下面是我们的<strong class="lf ir">侧栏</strong>组件的实现:-</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nw nb l"/></div></figure><p id="74e0" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">让我们简单看一下<strong class="lf ir"> Sidebar.js </strong>文件中发生了什么:-</p><ol class=""><li id="8926" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma ns mj mk ml bi translated">我们使用另一个名为<strong class="lf ir"> SidebarOption </strong>的自定义React组件来显示图标和旁边的描述文本。</li><li id="b627" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">我们使用内置图标的材质UI包。</li></ol><h2 id="cb44" class="nh kg iq bd kh nx ny dn kl nz oa dp kp lo ob oc kt ls od oe kx lw of og lb oh bi translated">饲料成分</h2><p id="7a63" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">从UI模拟中可以看出，中间的组件将是我们的Feed React组件，它包含所有用户的所有最新推文。</p><p id="2bb6" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">下面是<strong class="lf ir"> Feed </strong>组件的实现:-</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nw nb l"/></div></figure><p id="9ba9" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">让我们简单看看<strong class="lf ir"> Feed.js </strong>文件里面发生了什么:-</p><ol class=""><li id="972c" class="mb mc iq lf b lg md lk me lo mf ls mg lw mh ma ns mj mk ml bi translated">我们在这个文件中有两个方法，其中一个是<strong class="lf ir"> getAllTweets() </strong>，它基本上意味着使用<strong class="lf ir"> ethers.js </strong> npm模块与区块链联邦理工学院进行交互，然后点击我们作为智能合约的一部分实现的<strong class="lf ir"> getAllTweets() </strong>方法。</li><li id="4c86" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">类似于<strong class="lf ir"> getAllTweets() </strong>方法，我们有<strong class="lf ir"> deleteTweet() </strong>，这个方法基本上被调用，当用户点击他们拥有的Tweet的删除图标时，它然后使用<strong class="lf ir"> ethers.js </strong> npm模块与ETH区块链交互，然后添加一个新块，其中包含所选tweet被删除的信息。</li><li id="7f07" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">在我们的<strong class="lf ir"> getAllTweets() </strong>中，我们为我们的<strong class="lf ir"> posts </strong>变量设置值，然后我们使用该变量进行迭代，并使用<strong class="lf ir"> Post </strong>组件来显示推文。</li><li id="103d" class="mb mc iq lf b lg mn lk mo lo mp ls mq lw mr ma ns mj mk ml bi translated">我们还有一个<strong class="lf ir"> TweetBox </strong>组件，用于用户创建新的tweet。</li></ol><p id="5095" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">下面是<strong class="lf ir"> TweetBox </strong>组件的实现</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nw nb l"/></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h2 id="a906" class="nh kg iq bd kh nx ny dn kl nz oa dp kp lo ob oc kt ls od oe kx lw of og lb oh bi translated">小部件组件</h2><p id="02ca" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">从UI模拟中可以看出，最右边的组件是我们的Widget组件，它包含所有最新的热门推文和标签。目前为了简单起见，我只显示我发布的推文。</p><p id="c0de" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">下面是<strong class="lf ir"> Widgets </strong>组件的实现</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nw nb l"/></div></figure><p id="3de0" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">上面的组件非常简单，不言自明。</p><p id="4c37" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">要在浏览器中测试dapp，请在终端中运行以下命令:</p><pre class="mw mx my mz gt nc nd ne nf aw ng bi"><span id="e12a" class="nh kg iq nd b gy ni nj l nk nl">cd client<br/>npm run dev</span></pre></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="dae4" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">结论</h1><p id="9a68" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">恭喜你！将您的Twitter智能合约部署到区块链联邦理工学院，并创建Dapp来显示和创建新的推文。</p><p id="626e" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">与我联系:-</p><p id="7902" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">推特👦🏻:-<a class="ae mm" href="https://twitter.com/kmmtmm92" rel="noopener ugc nofollow" target="_blank">https://twitter.com/kmmtmm92</a></p><p id="6917" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">油管（国外视频网站）📹:-<a class="ae mm" href="https://www.youtube.com/channel/UCV-_hzlbVSlobkekurpLOZw/about" rel="noopener ugc nofollow" target="_blank">https://www . YouTube . com/channel/UCV-_ hzlbVSlobkekurpLOZw/关于</a></p><p id="c8fd" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">开源代码库💭:-<a class="ae mm" href="https://github.com/Kavit900" rel="noopener ugc nofollow" target="_blank">https://github.com/Kavit900</a></p><p id="4dfc" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated">照片墙📸:-<a class="ae mm" href="https://www.instagram.com/code_with_kavit/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/code_with_kavit/</a></p><p id="0216" class="pw-post-body-paragraph ld le iq lf b lg md li lj lk me lm ln lo nm lq lr ls nn lu lv lw no ly lz ma ij bi translated"><em class="oi">更多内容看</em> <a class="ae mm" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> <em class="oi">说白了就是</em> </strong> </a> <em class="oi">。报名参加我们的</em> <a class="ae mm" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> <em class="oi">免费周报</em> </strong> </a> <em class="oi">。关注我们</em> <a class="ae mm" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> <em class="oi">推特</em> </strong> </a> <em class="oi">和</em><a class="ae mm" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lf ir"><em class="oi">LinkedIn</em></strong></a><em class="oi">。加入我们的</em> <a class="ae mm" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> <em class="oi">社区不和谐</em> </strong> </a> <em class="oi">。</em></p></div></div>    
</body>
</html>