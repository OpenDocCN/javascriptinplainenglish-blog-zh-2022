<html>
<head>
<title>Create a Ping Pong Game Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript创建一个乒乓球游戏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-ping-pong-game-using-javascript-2688f83785d5?source=collection_archive---------1-----------------------#2022-08-25">https://javascript.plainenglish.io/create-a-ping-pong-game-using-javascript-2688f83785d5?source=collection_archive---------1-----------------------#2022-08-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9ec9" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">学习如何用JavaScript和HTML制作乒乓球游戏</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/56b24cec44a1e80b236841ee8a8de119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*613j2DwmAsoyIn3A"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@keepsakes_and_daydreams?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Steven Skerritt</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0ade" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Pong是一款双人乒乓球主题游戏。它包括一个移动的球和两个桨。球员上下移动球拍，以确保球击中它，并将其送回另一名球员的方向。如果一个人没接到球，另一个人就得一分。第一个达到获胜所需分数的人将赢得比赛。</p><p id="fd80" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们使用HTML5 canvas和JavaScript来实现这个游戏。我们来看看游戏逻辑是如何运作的。</p><ol class=""><li id="e05a" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">我们将部署一个初速度和方向都在中心的球。</li><li id="66ca" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">我们用键盘上的键上下移动桨。<strong class="kv io"> W </strong> &amp; <strong class="kv io"> S </strong>供左边玩家分别上下移动。<strong class="kv io">向上</strong>&amp;T6】向下方向键为右边的玩家分别上下移动。</li><li id="61fd" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">当球接触到球拍时，球的方向会改变，速度会增加一点。</li><li id="d2c1" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">当球击中时，画布的上下边界将反映球。</li><li id="ecd9" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">一旦一名球员错过了球，另一名球员的得分增加一。检查玩家是否达到获胜所需的分数，如果达到，则玩家获胜，游戏结束。</li><li id="2035" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">游戏继续进行，直到玩家获胜。</li></ol><h1 id="dd10" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">使用的技术</h1><ul class=""><li id="1173" class="lp lq in kv b kw mv kz mw lc mx lg my lk mz lo na lv lw lx bi translated">超文本标记语言</li><li id="575a" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo na lv lw lx bi translated">半铸钢ˌ钢性铸铁(Cast Semi-Steel)</li><li id="b7c5" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo na lv lw lx bi translated">Java Script语言</li></ul><h1 id="29db" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">源代码解释</h1><p id="92d9" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc nb le lf lg nc li lj lk nd lm ln lo ig bi translated">让我们仔细阅读代码，更好地理解逻辑，看看如何构建乒乓。</p><ol class=""><li id="6ce6" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">首先，我们需要创建一个带有画布的HTML页面来运行游戏。</li></ol><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="7aa1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们有一个画布来呈现游戏，两个段落标签来显示分数。小型设备类的障碍是禁用游戏并在小屏幕上显示消息，因为没有键盘控制。</p><p id="72c2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">CSS文件<strong class="kv io"> <em class="ng"> style.css </em> </strong>和JavaScript文件<strong class="kv io"> <em class="ng"> script.js </em> </strong>链接到这个HTML文件。</p><p id="e1db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.现在我们必须给我们的页面添加一些样式，使它看起来更漂亮。页面的外观和感觉也是一个重要的部分。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="4228" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">风格很简单，我们把画布放在中间，分数显示在黑板的两边。现在，我们也有一个霓虹灯效果，我们的游戏使用了框阴影。</p><p id="279d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.现在是使用JavaScript构建游戏逻辑的时候了。我们必须初始化画布、球和两个玩家。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="7767" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们已经创建了画布，并将获胜者存储在会话存储中，到目前为止，获胜者被设置为none。</p><p id="9049" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">球、左边的球员<em class="ng">(左拍)</em>和右边的球员<em class="ng">(右拍)</em>被初始化为必要的属性，如高度、宽度、x &amp; y位置、颜色、球员姓名、速度等。球会有x和y的速度。</p><p id="aa5c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.现在我们必须创建一个游戏状态，并处理按键和按键状态。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="d5c9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们将在游戏对象中跟踪每个玩家的分数。它还包含获胜所需的分数、触发球速度增加的命中数等。</p><p id="5fb7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们有一个按键状态来记录一次按下了哪些按键。事件监听器设置为更新<strong class="kv io"> <em class="ng">键上的按键状态，按下</em> </strong>和<strong class="kv io"> <em class="ng">键上的</em> </strong>。</p><p id="cc3c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">5.现在我们必须编写函数来将球和球员绘制到画布上<em class="ng">。</em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="3b99" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">球员和球是根据对象的属性绘制的。定义了一个函数来清除画布并将所有对象绘制到屏幕上。</p><p id="e692" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">6.我们必须处理调整窗口大小和更新大小的值。当我们调整屏幕大小时，画布需要调整大小，画布中的对象必须重新定位以匹配新的画布大小。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="ac1a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每次我们调整屏幕大小时，以及在程序开始时，都会调用resize处理函数来组织画布和对象的位置。当屏幕尺寸低于<strong class="kv io"> <em class="ng"> 560px </em> </strong>时，它还会禁用带有覆盖的游戏。</p><p id="4bb2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">7.现在，当按下相应的键时，我们必须更新拨片的位置。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="9a20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们根据按键和画布的边界来更新玩家的位置。</p><p id="89b1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">8.一些实用函数在每个玩家得分后重置球的位置，一个函数设置玩家的得分并在页面上显示，一个函数在游戏结束后重置游戏。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="b6b8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">重置球时，我会改变球的方向，因为得到一分的人会得到下一击。设置分数的函数检查是否满足所有条件来更新分数。它将球重置到中心，并更新页面上显示的分数。重置游戏功能会重置所有的分数，并将物体的所有状态更新到默认位置，本质上是重置游戏。</p><p id="561a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">9.是时候写一个函数来检查是否有人赢了</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="f068" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">游戏结束功能检查是否有人获胜，并将获胜者保存在会话存储器中。页面被重定向到<strong class="kv io"><em class="ng">winner.html</em></strong>，后者从会话存储器中取出获胜者并显示出来。</p><p id="0ab8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">10.现在我们要实现球的碰撞，方向的改变，速度的增加等等。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="1a5a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当球接触到画布的顶部和底部时，更新状态的函数会将球的Y速度改变到相反的方向。如果它接触到拨片，X速度会改变，名为<strong class="kv io"><em class="ng">collision time lag()</em></strong>的函数被调用。碰撞时间使对象的碰撞停止1秒钟，以防止任何类型的碰撞错误(如碰撞时多次更新状态)。在停用期间，不会检测到碰撞(在此期间也没有碰撞的机会)</p><p id="2c7e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">调用设置分数和检查游戏是否结束的功能，以确保游戏正确更新。当我们超过我们在对象中指定的命中次数以增加速度时，速度会增加。</p><p id="a283" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最重要的是，球的位置通过增加速度来改变。</p><p id="aa45" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">11.现在让我们实现运行游戏的主游戏循环。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="3503" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个游戏循环将更新按键，更新状态，并根据我们的计算机资源以每秒大约60次的速度持续绘制所有内容。<strong class="kv io"><em class="ng">request animation frame</em></strong>是用JavaScript制作动画的一种高效方式。随着我们的游戏循环运行和状态更新，我们的游戏将运行顺利。</p><p id="dda2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="ng">瞧！我们制作了一款乒乓球游戏</em> </strong> 🥳</p></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><p id="3e3a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以在我的<a class="ae ks" href="https://github.com/ajmalmohad/ping-pong" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> Github资源库</strong> </a> <strong class="kv io">找到游戏的全部代码。</strong>您可以随意使用它，享受乐趣，调整事物并添加新功能。</p></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><h2 id="8a51" class="no me in bd mf np nq dn mj nr ns dp mn lc nt nu mp lg nv nw mr lk nx ny mt nz bi translated">想要连接吗？</h2><p id="2ccc" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc nb le lf lg nc li lj lk nd lm ln lo ig bi translated">在Twitter上关注我。 </p></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><p id="1ffe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ng">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ng">说白了。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ng">免费每周简讯</em> </strong> </a> <em class="ng">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ng">推特</em> </strong> </a>，<a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ng">LinkedIn</em></strong></a><em class="ng">，</em><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ng">YouTube</em></strong></a><em class="ng">，</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ng">不和</em> </strong> </a> <em class="ng">。</em></strong></a></p></div></div>    
</body>
</html>