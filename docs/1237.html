<html>
<head>
<title>Create an RxJS Observable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建RxJS可观察值</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-an-rxjs-observable-98b90ecfda8e?source=collection_archive---------15-----------------------#2022-03-10">https://javascript.plainenglish.io/create-an-rxjs-observable-98b90ecfda8e?source=collection_archive---------15-----------------------#2022-03-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="ffd3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将创建一个简单的从零开始计数的可观察对象。我们将在Angular中创建它，并在React中链接一个示例，但请记住，RxJS与框架和库无关。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3eff48432120a56f96cbc414176c7c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wX5E5_Yf-D5m_FBWWFA8lw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Create an RxJS Observable</figcaption></figure><p id="0f55" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，有更好的方法来创造一个可观的。</p><p id="9bf4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">建议使用内置的创建函数。正如在<a class="ae ky" href="https://rxjs.dev/guide/observable#creating-observables" rel="noopener ugc nofollow" target="_blank">文档</a>中所报告的，“最常见的是，使用创建函数来创建可观测量，比如of、from、interval等”。然而，为了简单起见，我们将使用新的可观测值，稍后我们将看一看创造函数。</p><h1 id="3700" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创造一个可观察的</h1><p id="211c" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">创建一个可观察对象的过程相当简单。</p><p id="d4c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们需要从rxjs导入可观察的。</p><p id="6a1a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我们通过调用接受一个参数的新的可观察构造函数来创建一个可观察对象。在下面的示例中，我们创建了一个每秒钟向订阅者发送一个数字的可观察对象。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="d43c" class="mh la in md b gy mi mj l mk ml">// app.component.ts</span><span id="1360" class="mh la in md b gy mm mj l mk ml">import { Component } from '@angular/core';<br/>import { Observable } from 'rxjs';</span><span id="c105" class="mh la in md b gy mm mj l mk ml">const myObservable = new Observable((observer) =&gt; {<br/>  let count = 0;</span><span id="ceb1" class="mh la in md b gy mm mj l mk ml">  setInterval(() =&gt; {<br/>    observer.next(count);<br/>    count++;<br/>  }, 1000);<br/>});</span><span id="155a" class="mh la in md b gy mm mj l mk ml">@Component({<br/>  selector: 'my-app',<br/>  templateUrl: './app.component.html',<br/>})<br/>export class AppComponent {}</span></pre><p id="3161" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">事实上，什么都不会发生，因为我们需要订阅一个可观察对象来消费它的值。</p><h1 id="4b6d" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">订阅可观察的</h1><p id="9a1e" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">第一步需要我们创造一个可观察的。现在，我们希望将来自这个可观察对象的值记录到控制台。</p><p id="9734" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请记住，可观察对象向观察者传递三种类型的通知:</p><ul class=""><li id="92a8" class="mn mo in jm b jn jo jr js jv mp jz mq kd mr kh ms mt mu mv bi translated"><strong class="jm io">下一个</strong>:发送数据(即数字、字符串、对象等。)</li><li id="d2d3" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><strong class="jm io">错误</strong>:发送一个JavaScript错误或异常。之后不会再有其他东西送来了。</li><li id="7457" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><strong class="jm io">完成</strong>:不发送数值。之后不会再有其他东西送来了。我们将从订阅可观察对象开始。</li></ul><p id="368f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每次我们调用observable.subscribe时，调用都会触发一个独立于给定订户的执行。</p><p id="3407" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">换句话说，“订阅调用只是一种启动‘可观察的执行’并将值或事件交付给该执行的观察者的方式”，<a class="ae ky" href="https://rxjs.dev/guide/observable#creating-observables" rel="noopener ugc nofollow" target="_blank"> rxjs.dev </a>。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="a4df" class="mh la in md b gy mi mj l mk ml">mySubscription = myObservable.subscribe(data =&gt; console.log(data));</span></pre><p id="c05d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我们看一下控制台，我们会注意到我们已经记录了来自可观察对象的值。但是，准确的说，我们应该说这是执行一个可观测的结果。“随着时间的推移，执行同步或异步地产生多个值”。</p><p id="666c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，您可以在这里找到<a class="ae ky" href="https://github.com/lorenzojkrl/rxjs-primer/blob/1d9c235397579f8839484b8426487ccc98a43847/hands-on-1/app-component.ts" rel="noopener ugc nofollow" target="_blank">角度代码</a>和<a class="ae ky" href="https://github.com/lorenzojkrl/rxjs-primer/blob/1d9c235397579f8839484b8426487ccc98a43847/hands-on-1/index.tsx" rel="noopener ugc nofollow" target="_blank">反应代码</a>。由于您需要一个服务器(Angular或React应用程序)来运行代码，因此您也可以在StackBlitz ( <a class="ae ky" href="https://stackblitz.com/edit/angular-ivy-69rya5" rel="noopener ugc nofollow" target="_blank"> Angular </a>，<a class="ae ky" href="https://stackblitz.com/edit/react-ts-vmok1c" rel="noopener ugc nofollow" target="_blank"> React </a>)上看到代码的实时运行。</p><p id="4d87" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是开始使用Observables时你需要知道的。如果你想知道更多，这篇文章有一个<a class="ae ky" href="https://www.vitainbeta.org/2022/02/15/hands-on-1-create-an-observable/" rel="noopener ugc nofollow" target="_blank">扩展，我们用next、error和complete向观察者添加更多内容。</a></p><p id="cb7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来:<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/create-an-rxjs-observable-with-interval-669f1ef48b26">创建一个间隔为</a>的RxJS可观察值</p><p id="3d46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nb">更多内容看</em> <a class="ae ky" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="nb">说白了。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="nb">免费周报</em> </strong> </a> <em class="nb">。关注我们</em><a class="ae ky" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="nb">Twitter</em></strong></a><em class="nb">和</em><a class="ae ky" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="nb">LinkedIn</em></strong></a><em class="nb">。加入我们的</em> <a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="nb">社区</em> </strong> </a> <em class="nb">。</em></strong></a></p></div></div>    
</body>
</html>