<html>
<head>
<title>How to Sign In with Google in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Node.js中登录Google</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/authentication-with-google-sign-in-in-node-js-419640f07b56?source=collection_archive---------2-----------------------#2022-04-18">https://javascript.plainenglish.io/authentication-with-google-sign-in-in-node-js-419640f07b56?source=collection_archive---------2-----------------------#2022-04-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1449" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于如何登录用JavaScript创建的网站的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/68477f387d986b0b47065544d80ef398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WY5anMfUTxD7O2VBKCRWvQ.png"/></div></div></figure><p id="087f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你不想花太多时间设置安全认证，Google Sign-In正是你需要的。Google为你自己的应用程序的用户提供了一种安全、有用和简单的方式来共享他们的个人资料信息。</p><p id="5148" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我将介绍使用<strong class="kq io"> JavaScript </strong>创建的网站使用和登录<strong class="kq io"> </strong> <a class="ae lk" href="https://developers.google.com/identity/sign-in/web/sign-in" rel="noopener ugc nofollow" target="_blank">和<strong class="kq io">的方法。</strong></a></p><p id="738a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我将使用<strong class="kq io"> VS代码</strong>作为<strong class="kq io"> IDE </strong>并且我假设你对；</p><ul class=""><li id="d819" class="ll lm in kq b kr ks ku kv kx ln lb lo lf lp lj lq lr ls lt bi translated"><strong class="kq io"> <em class="lu"> HTML，</em> </strong></li><li id="acf2" class="ll lm in kq b kr lv ku lw kx lx lb ly lf lz lj lq lr ls lt bi translated"><strong class="kq io"><em class="lu">Express-node . js web</em></strong><strong class="kq io"><em class="lu">应用</em> </strong>，</li><li id="089f" class="ll lm in kq b kr lv ku lw kx lx lb ly lf lz lj lq lr ls lt bi translated"><a class="ae lk" href="https://ejs.co/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lu">【嵌入式JavaScript(EJS)</em></strong></a><strong class="kq io"><em class="lu"/></strong></li><li id="4a0a" class="ll lm in kq b kr lv ku lw kx lx lb ly lf lz lj lq lr ls lt bi translated"><strong class="kq io"> <em class="lu"> RESTful API </em> </strong></li></ul><p id="4e18" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们从初始化一个新的<strong class="kq io"> Node.js </strong>项目开始。为此，在刚刚为项目创建的目录中打开命令提示符，并运行:</p><pre class="kd ke kf kg gt ma mb mc md aw me bi"><span id="0925" class="mf mg in mb b gy mh mi l mj mk">npm init -y</span></pre><p id="fa9f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在文件<strong class="kq io"> package.json </strong>中，我在脚本范围中添加了这一行:</p><pre class="kd ke kf kg gt ma mb mc md aw me bi"><span id="b78b" class="mf mg in mb b gy mh mi l mj mk">“start”: “nodemon server.js”</span></pre><p id="e2b7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我安装依赖项:</p><pre class="kd ke kf kg gt ma mb mc md aw me bi"><span id="0fab" class="mf mg in mb b gy mh mi l mj mk">npm install express ejs dotenv nodemon</span></pre><p id="196e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">安装完相关的包之后，<strong class="kq io"> package.json </strong>应该是这样的:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/0cf185ab893c6d0dd583f2b779293b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTSv78cNJBgz4MzPR-EHwg.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">package.json</figcaption></figure><p id="b24f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我设置了<strong class="kq io"> REST API </strong>结构。为此，我创建了文件<strong class="kq io"> server.js </strong>并添加了以下代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="a517" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们必须在客户端向用户显示<strong class="kq io">谷歌按钮</strong>。所以，我们需要HTML代码。而现在“<strong class="kq io"> ejs </strong>”开始发挥作用。</p><p id="3052" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> EJS </strong> ( <em class="lu">嵌入式JavaScript </em>)允许我们在服务器端项目中使用<strong class="kq io"> HTML </strong>。因此，我将文件<strong class="kq io"> <em class="lu"> </em> login.ejs </strong>添加到项目中，并将<strong class="kq io"> HTML </strong>基础结构添加到其中。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="ed09" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这个文件中，我在<strong class="kq io"> head标签</strong>中添加了三个<strong class="kq io"> meta标签</strong>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="9818" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">meta标签为我们提供了<strong class="kq io">谷歌认证</strong>。但是在这里，有一些非常重要的东西。我们必须有一个<strong class="kq io">客户端ID </strong>。为此，我们去了https://console.cloud.google.com。我们创建了一个新项目:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ms"><img src="../Images/5fe0174a786dcc09455883544a43a066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yEoX68x4oZ5qbwDYVt_-Lw.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">creating a new Google Cloud project</figcaption></figure><p id="4192" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我点击侧边菜单上的相关选项，进入<strong class="kq io">API&amp;服务</strong>页面。我在<strong class="kq io"> OAuth同意屏幕</strong>页面上点击<strong class="kq io">外部</strong>选项作为<strong class="kq io">用户类型。</strong>我点击<strong class="kq io">创建</strong>按钮。然后是<strong class="kq io">编辑app注册</strong>页面。在这里，我必须填写表格来注册该应用程序。</p><p id="0ede" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">注册后，我点击侧面菜单上的<strong class="kq io">凭证</strong>按钮。在此页面上，我单击下面指定的按钮:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mt"><img src="../Images/913009e33b35f81a74a731ee8d6e6f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o1wioBVVMutArI3-vYNaQA.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">create credentials button</figcaption></figure><p id="c1b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我在接下来的菜单上选择<strong class="kq io"> OAuth客户端ID </strong>选项。又来了一份菜单。在该菜单中，我选择<strong class="kq io">网络应用</strong>选项并填写表格。最后，我们可以获得客户端id:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/7e9cc8070e87cac14c2ed147ca45a5f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CeqhSP0DmoF7c5ufXSun8Q.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">client id</figcaption></figure><p id="3432" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们复制客户机id，并将其粘贴到<strong class="kq io"> login.ejs </strong>文件上的相关元标记中。然后，我们将魔法按钮和<strong class="kq io">登录</strong>和<strong class="kq io">注销</strong>方法添加到该文件中。现在,<strong class="kq io"> login.ejs </strong>文件必须看起来像下面这样:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="f2b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我必须向server.js添加一个中间件方法和<strong class="kq io"> /login </strong>路由，以便能够显示google按钮:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="a170" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，当我们在浏览器上点击链接<a class="ae lk" href="http://localhost:5000/login," rel="noopener ugc nofollow" target="_blank"><strong class="kq io">http://localhost:5000/log in</strong>，</a>时，我们可以看到下面的页面。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mv"><img src="../Images/b90f37228469fc1ea353a0f17824db23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qEgmfBpDuR6xuTPbbD4n-w.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">login.ejs</figcaption></figure><h2 id="bf87" class="mf mg in bd mw mx my dn mz na nb dp nc kx nd ne nf lb ng nh ni lf nj nk nl nm bi translated">结论</h2><p id="1db0" class="pw-post-body-paragraph ko kp in kq b kr nn jo kt ku no jr kw kx np kz la lb nq ld le lf nr lh li lj ig bi translated">在Node.js项目中使用EJS页面，我们可以用Google-Authentication-Popup创建更简单、更安全的网页。</p><p id="8a2f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你可以通过<a class="ae lk" href="https://github.com/azizkale/google-signin-nodejs-project" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">这个链接</strong> </a> <strong class="kq io">到达项目。</strong></p><p id="690c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这个题目到此为止。感谢您的阅读。</p><p id="8520" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="lu">更多内容请看</em><a class="ae lk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lu">plain English . io</em></strong></a><em class="lu">。报名参加我们的</em><strong class="kq io"><em class="lu"/></strong><a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lu">免费周报</em> </strong> </a> <em class="lu">。关注我们关于</em><a class="ae lk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lu">Twitter</em></strong></a><em class="lu">和</em><a class="ae lk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="lu">LinkedIn</em></strong></a><em class="lu">。加入我们的</em> <a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="lu">社区</em> </strong> </a> <em class="lu">。</em></p></div></div>    
</body>
</html>