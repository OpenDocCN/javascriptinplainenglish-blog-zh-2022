# 基本前端安全指南

> 原文：<https://javascript.plainenglish.io/essential-front-end-security-guide-3c32576b38cc?source=collection_archive---------16----------------------->

## 2022 年如何让你的 app 更安全

![](img/3526db1ac5ba3d69d1395d575cc1d656.png)

Photo by [Stillness InMotion](https://unsplash.com/@stillnes_in_motion?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

Web 安全性已经成为 web 开发人员的一项基本技能。我们都试图尽可能地记住已知的风险。但不幸的是，各种各样的攻击只取决于黑客的想象力和好奇心来伤害你的客户。我们必须抵制这种行为。

当我们考虑产品中的漏洞时，记住一点是至关重要的:它们甚至可能存在于那些不会让你怀疑的代码中。因此，在一篇文章中，不可能描述所有这些，但我会努力强调其中最危险的。此外，我将分享一个工具列表，我们可以使用它来避免代码中的已知问题，即使看起来是安全的。

# 跨站点请求伪造

CSRF(跨站点请求伪造)是一种由欺诈性网站或脚本实施的网站攻击，它会导致用户的浏览器在用户登录的受信任站点上执行不必要的操作。

在大多数情况下，这种攻击需要用户点击一个虚假的链接(隐藏在一个链接缩写中)。

例如，一个在银行网站上被授权的人检查他的邮件。他可能会点击一个钓鱼链接，要求他将钱转到骗子的帐户。

因为他在银行的网站上被授权，所以他将处理转账请求。

我们能做什么？

**反 CSRF 令牌** 令牌(或同步器令牌)是一种保护服务器端的方式。服务器为用户的浏览器生成一个唯一的令牌，并对每个请求进行验证。

**使用两个令牌** 这个方法的意义是我们使用两个令牌:第一个存储在 cookies 中，第二个保存在其中一个响应参数中。

在这种情况下，接收到一个不安全请求的服务器必须检查两个令牌。

**在 cookies 中使用同站点标志** 该标志标记特定域的 Cookies。

**需要用户确认** 敏感操作，如转账或更改密码，需要用户额外的努力(输入验证码或确认码)。

# XSS(跨站点脚本)

今天我们知道 3 种类型的 XSS:反射的(反射攻击)、存储的(存储攻击)和对 DOM 的攻击。该列表可能会随时更改。例如，对 DOM 的攻击只是在最近五年才变得活跃起来，所以其他攻击可能会在几年内发生。

*   反射 XSS 是最常见的非持续性攻击类型，需要用户采取一些措施。
*   存储(持续 XSS) —一种永久性的攻击类型，会在服务器上引入恶意代码，不需要用户干预。
*   基于 DOM 的 XSS 攻击试图从 JavaScript 操纵文档对象模型。如果存储和反射的 XSS 到达服务器，它的保护就能识别它们。但是这里的情况更糟，因为基于 DOM 的 XSS 根本无法到达服务器。

你可以在谷歌开发的优秀 [XSS 游戏上查看所有 XSS 攻击的例子，练习寻找 XSS 攻击。试试这个游戏，只有 6 个关卡。您需要在所有级别找到一个漏洞。就是这样，明白怎么把自己的恶意代码注入别人的页面，自己去发现这样的漏洞。](https://xss-game.appspot.com)

我们能做什么？

*   净化一切—输入、参数、链接、来自响应的 HTML 代码
*   使用现代框架，避免在 JS 中使用 innerHTML 属性
*   检查使用 Web 应用程序防火墙的能力。
*   正确遵守安全标题(`Content-Security-Policy`、`Strict-Transport-Security`、`X-Frame-Options`和`Access-Control-Allow-Origin`)

# 使用第三方库

找到一个完全符合你要求的库是非常好的，但是我们并不总是检查那个库的每一个特性。这可能会导致我们在以后的系统中不小心出现漏洞。

问题可能是错误地包含在包中，或者是出于自私的目的在以后添加的。

例如，一个开发人员创建了一个免费的库，但是后来，他发现他的包变得很受欢迎，并在许多项目中使用。于是他决定赚点钱，加了个加密货币挖矿脚本。

**我们能做什么？**

*   仅使用受信任的库和框架
*   在`package.json`修复测试包版本
*   尝试使用`npm audit`命令获取已知漏洞的报告

# 身份验证、cookies 和表单的问题

如果不加注意，写得不好的表单以及身份验证和授权系统的任何问题都可能是危险的。

我们能做什么？

*   使用仅 HTTPS 协议来确保 cookies 被加密
*   不要在 cookies 中保存明文用户凭证
*   为您的 cookie/会话设置到期时间
*   要求您的用户有一个强密码
*   实施多次失败的帐户锁定可以防止暴力攻击
*   用户登录时需要多因素身份验证
*   使用 SSO 身份验证根本不用保存用户密码
*   一个好的做法是要求用户定期更改密码

# 用于分析潜在漏洞的软件

即使知道基本的安全规则也不能保护我们免受所有攻击。每天都可以在任何一段代码中发现新的漏洞。因此，我们需要定期审查代码，避免新的问题，以更加安全。手动进行审查是不可取的。

幸运的是，我们有扫描项目的软件。

漏洞扫描提供了一种在依赖关系或内部开发的应用程序中发现应用程序后门、恶意代码和其他威胁的方法。

我们可以将 SAST(静态应用程序安全测试)工具添加到 IDE 或管道中。这些技术可以帮助你在软件开发过程中发现问题。在我有机会工作的项目中，我们主要使用 Veracode 或 SonarQube。你可以在 OWASP 网站上找到大量的 SAST 项目。

# 让我们回顾一下！

*   网络应用程序从来都不是 100%安全的**。**
*   净化一切——输入、参数、链接、来自响应的 HTML 代码。
*   使用 HTTPS，有限的会议。
*   正确遵守安全标头
*   仅使用受信任的库和框架。
*   确保您的登录过程是安全的。
*   需要多因素身份认证。
*   定期使用静态分析工具来发现已知的漏洞和代码气味。

**感谢阅读，注意安全！**

*更多内容看* [***说白了就是 io***](http://plainenglish.io/) *。报名参加我们的* [***免费周报***](http://newsletter.plainenglish.io/) *。在我们的* [***社区获得独家访问写作机会和建议***](https://discord.gg/GtDtUAvyhW) *。*