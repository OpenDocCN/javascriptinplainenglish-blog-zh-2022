<html>
<head>
<title>What is New in Node.js 18</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js 18的新特性是什么</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-new-in-node-js-18-456c9ea652eb?source=collection_archive---------0-----------------------#2022-04-23">https://javascript.plainenglish.io/what-is-new-in-node-js-18-456c9ea652eb?source=collection_archive---------0-----------------------#2022-04-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3d53" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解Node.js最新版本中的新特性。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/559ba3a24a9d958d0429d195167fe47a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ScEndK_5DrnZM77tOeVoaw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photoillustration by David Fekke</figcaption></figure><p id="dd24" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">原发布于</em><a class="ae ls" href="https://fek.io/blog/what-is-new-in-node-js-18/" rel="noopener ugc nofollow" target="_blank"><em class="lr">https://fek . io</em></a><em class="lr">。</em></p><p id="df0c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Node.js基金会刚刚发布了Node <a class="ae ls" href="https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V18.md#18.0.0" rel="noopener ugc nofollow" target="_blank"> v18.0.0 </a>的第一个版本。Node.js foundation维护多个版本，包括当前版本和长期支持(LTS)版本。当前的v18版本将在2022年10月的某个时候成为LTS版本。这是节点的正常发布时间表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/9b905dde34e5894146fe0c81426779f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XZDyPTIlLz2Nf6yZ.png"/></div></div></figure><h1 id="e7e0" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">取得</h1><p id="e852" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">备受关注的新特性之一是新的<code class="fe mr ms mt mu b">fetch</code> API。Fetch在浏览器中已经存在了一段时间，并且是一个可以通过运行<code class="fe mr ms mt mu b">npm install node-fetch</code>添加到Node.js项目中的模块。有人抱怨这两者不能完全互操作。</p><blockquote class="mv mw mx"><p id="f8d4" class="kv kw lr kx b ky kz jr la lb lc ju ld my lf lg lh mz lj lk ll na ln lo lp lq ij bi translated"><em class="iq"> fetch()已经在Node中发布，现在人们抱怨它不能像node-fetch一样工作🤦‍♂️.然而，每个人都说他们希望Node.js提供更多符合标准的API</em></p><p id="77a8" class="kv kw lr kx b ky kz jr la lb lc ju ld my lf lg lh mz lj lk ll na ln lo lp lq ij bi translated"><em class="iq"> -马泰奥·科里纳(@ Matteo Collina)</em><a class="ae ls" href="https://twitter.com/matteocollina/status/1517617719838973953?ref_src=twsrc%5Etfw" rel="noopener ugc nofollow" target="_blank"><em class="iq">2022年4月22日</em> </a></p></blockquote><p id="90aa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Fetch API为基于客户机的HTTP请求提供了一个简单的基于promise的API。以前，您必须使用<code class="fe mr ms mt mu b">XMLHttpRequest</code> API来发出HTTP请求，这需要编写多行代码来发出请求。现在，使用Fetch API，可以像下面的示例一样简单地发出HTTP请求:</p><pre class="kg kh ki kj gt nb mu nc nd aw ne bi"><span id="f8ab" class="nf lv iq mu b gy ng nh l ni nj">const response = await fetch('https://swapi.dev/api/people/1');<br/>const data = await response.json();<br/>console.log(data);</span></pre><h1 id="8ad3" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">HTTP超时</h1><p id="d805" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">Node.js v18中的<code class="fe mr ms mt mu b">http.server</code>超时已经更改。默认情况下，<code class="fe mr ms mt mu b">headersTimeout</code>设置为60000毫秒(60秒)，<code class="fe mr ms mt mu b">requestTimeout</code>设置为300000毫秒(5分钟)。<code class="fe mr ms mt mu b">headersTimeout</code>是允许解析HTTP请求报头的时间。<code class="fe mr ms mt mu b">requestTimeout</code>是用于HTTP请求的超时。</p><h1 id="46d7" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">测试转轮模块</h1><p id="a46a" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">虽然在Node.js中有很多流行的单元测试选项，但是Node从来没有内置的测试运行器。节点v18现在包括一个<code class="fe mr ms mt mu b">node:test</code>模块。下面的例子显示了如何设置测试和断言。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="2ca6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以在https://nodejs.org/dist/latest-v18.x/docs/api/test.html<a class="ae ls" href="https://nodejs.org/dist/latest-v18.x/docs/api/test.html" rel="noopener ugc nofollow" target="_blank">的文档中读到更多关于新测试的信息。</a></p><h1 id="9722" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">Web流API</h1><p id="5e92" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">新的Web Streams API现在在全局范围内全局公开。虽然流从一开始就是Node.js API的一部分，但这个API是在浏览器和Node.js之间共享的，尽管这被认为是Node中的一个实验性功能。</p><p id="f65a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Web流支持ReadableStream和WriteableStream读取器、写入器和控制器。这些可以与新的<code class="fe mr ms mt mu b">fetch</code> API结合使用。</p><p id="9037" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下API对象现在在节点v18中全局可用:</p><ul class=""><li id="b9bb" class="nm nn iq kx b ky kz lb lc le no li np lm nq lq nr ns nt nu bi translated">可读流</li><li id="5e09" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">ReadableStreamDefaultReader</li><li id="0117" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">ReadableStreamBYOBReader</li><li id="b97d" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">readablestreamboyobrequest</li><li id="0583" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">ReadableByteStreamController</li><li id="15f6" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">ReadableStreamDefaultController</li><li id="84ce" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">转换流</li><li id="1ff9" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">TransformStreamDefaultController</li><li id="5567" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">可写流</li><li id="097f" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">WritableStreamDefaultWriter</li><li id="8192" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">WritableStreamDefaultController</li><li id="5b9c" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">ByteLengthQueuingStrategy</li><li id="8e07" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">对策</li><li id="92f0" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">TextEncoderStream</li><li id="7e76" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">TextDecoderStream</li><li id="42f6" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">压缩流</li><li id="d024" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">解压缩流</li></ul><h1 id="cba1" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">V8 10.1</h1><p id="fbfc" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">V8 10.1有三个显著的变化。其中一个新增功能是寻找数组的最后一个元素和索引的新数组方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="65e4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">V8的另一个改进是国际化支持。添加了<code class="fe mr ms mt mu b">Intl.Locale</code>和<code class="fe mr ms mt mu b">Intl.supportedValuesOf</code>函数后，您现在可以检索某个位置的日历、货币、编号以及时区数据，如下例所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="37a8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">V8引擎在提高类字段和私有类方法的性能方面也取得了长足的进步。<code class="fe mr ms mt mu b">v8.serialize</code>函数的数据格式已经改变，不会向后兼容Node.js的早期版本。</p><h1 id="9440" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">工具链和编译器</h1><p id="947b" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">Node的Linux版本现在构建在Red Hat Enterprise Linux上，与glibc 2.28或更高版本兼容。macOS的预构建二进制文件不需要macOS 10.15 (Catalina)或更高版本。现在，AIX支持的最低架构是Power 8。</p><p id="5834" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于V8更新，32位Windows的预构建二进制文件目前不可用，但如果32位支持重新添加到V8，可能会恢复。</p><h1 id="91a5" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">结论</h1><p id="4f35" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le mo lg lh li mp lk ll lm mq lo lp lq ij bi translated">Node.js的18版本包含了一些简洁的特性，在LTS发布之前应该会有更多的特性。由于V8运行时升级了新特性，Node在新版本的V8中获得了这些特性。我期待着10月份LTS的发布，因为我相信其他节点开发者也会如此。</p><p id="7e64" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">更多内容请看</em><a class="ae ls" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">plain English . io</em></strong></a><em class="lr">。报名参加我们的</em> <a class="ae ls" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="lr">免费周报</em> </strong> </a> <em class="lr">。关注我们关于</em><a class="ae ls" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">Twitter</em></strong></a><em class="lr">和</em><a class="ae ls" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">LinkedIn</em></strong></a><em class="lr">。加入我们的</em> <a class="ae ls" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="lr">社区不和谐</em> </strong> </a> <em class="lr">。</em></p></div></div>    
</body>
</html>