<html>
<head>
<title>Why is your JavaScript slow on your client's browsers?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么你的JavaScript在客户端浏览器上运行缓慢？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/determine-and-solve-javascript-speed-in-the-browser-3a5bde2f579b?source=collection_archive---------3-----------------------#2022-10-08">https://javascript.plainenglish.io/determine-and-solve-javascript-speed-in-the-browser-3a5bde2f579b?source=collection_archive---------3-----------------------#2022-10-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3f27" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">我最近去了回答题目所需的兔子洞。我将在本文中尝试分享我的一些发现，这可能会帮助您节省一些时间。</h2></div><p id="13a0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<a class="ae ky" href="https://betterprogramming.pub/increasing-the-lowest-common-denominator-for-web-performance-2f0f782955c4" rel="noopener ugc nofollow" target="_blank">的另一篇文章</a>中，我描述了如果每个涉众都更好地理解一个系统的一些更技术性的方面是多么有帮助。<br/>一些系统的性能很容易衡量，而另一些则复杂得多。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/819f3896dc5977fca181893af06007a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ps1MUSI0uLVGv4BtGcu6XA.gif"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Loading animation</figcaption></figure><h1 id="8f35" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">介绍</h1><p id="976c" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">如果您必须测量您的web服务器的性能，那么应该已经有了可以用来确定平均响应时间等的指标。<br/>通过这种方法，您可以跟踪您对web服务器代码所做的任何改进，并监控它对平均响应时间的影响。</p><p id="0e1f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">酷，所以现在web服务器正在被监控，如果我们认为响应时间太慢，我们可以做一些改进。太好了！</p><p id="1acf" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们想象我们向一个网站交付一个第三方脚本，那应该在他们的网站上显示一些东西(广告)。突然，客户(网站所有者)抱怨我们的脚本太慢，广告显示太慢！</p><blockquote class="mm mn mo"><p id="1414" class="kc kd mp ke b kf kg jo kh ki kj jr kk mq km kn ko mr kq kr ks ms ku kv kw kx ig bi translated">你的脚本很慢，请修改它！</p></blockquote><p id="71fd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">好吧，我认为这是任何其他问题或“错误”的报告。我快速浏览了一下网站，发现它运行得很快，正如我所料。</p><h1 id="3877" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">问题是</h1><p id="a261" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">在意识到它在我的设置(台式机、笔记本电脑和移动设备)上运行良好后，我决定排除在没有量化数据(实数)的情况下讨论事情的基本问题，也排除任何个人在他们自己的系统(客户端)上可能存在的任何异常。</p><p id="885e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">尤其是UI性能可能是高度“宗教性的”和非常主观的。因此，要解决的第一个问题是收集一些数据，这样我们就可以采取一些明智的行动，而不是试图解决一个人又旧又慢的手机的问题。</p><p id="9301" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">调试客户端问题时，我们必须处理各种各样的浏览器、计算机、操作系统、网络连接、屏幕分辨率、防火墙、广告拦截器、设备设置等…</p><p id="0650" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以问题的核心是确定是否真的有一个普遍的问题，如果有，确定到底是什么问题。</p><h1 id="2322" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">解决方案</h1><p id="1ae6" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">数字！还有很多。如果我们要分析主观体验，如果我们有一些实际的数据来谈论，我们会好很多。</p><p id="b735" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，对于提出的问题，我认为解决问题的最简单方法是将整个“加载”过程分解成逻辑步骤，并测量每个步骤对总“加载时间”的贡献。</p><p id="83fe" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面是最终“产品”,它应该有助于量化前面提到的问题。事实上，它很少需要如此复杂。甚至谷歌工作表中的快速图表也可以做到这一点。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mt"><img src="../Images/28cd8280478f405f4f2151a2eebb1f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CMh0LteEoDDr6QRuRQX6eQ.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Timing point for loading of ads</figcaption></figure><p id="0475" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以上图表是由AWS Timestream和Grafana(以及与本文无关的其他部分)混合而成的。</p><p id="cd88" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的图表给你的是</p><ol class=""><li id="8616" class="mu mv in ke b kf kg ki kj kl mw kp mx kt my kx mz na nb nc bi translated">讨论速度(或任何你感兴趣的指标)的起点</li><li id="1128" class="mu mv in ke b kf nd ki ne kl nf kp ng kt nh kx mz na nb nc bi translated">非开发人员了解有助于整体性能的技术步骤的一种方式，这样他们就可以对未来的开发领域做出决定。</li><li id="89e0" class="mu mv in ke b kf nd ki ne kl nf kp ng kt nh kx mz na nb nc bi translated">创建一个基线，以便与其他站点和/或在进行优化时进行比较。</li></ol><h1 id="a187" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">如何提高总体绩效</h1><p id="745b" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">当分析上面的数字时，有几件事我认为是对这一组问题的更通用的解决方案，类似于所描述的(慢速广告)。</p><h1 id="4ccd" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">做实际的改进</h1><p id="a915" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">在某些情况下，有实际的技术问题可以改进，这将直接提高性能。在上述情况下，通常可以将它们进一步分成两组</p><h2 id="99b0" class="ni lq in bd lr nj nk dn lv nl nm dp lz kl nn no mb kp np nq md kt nr ns mf nt bi translated">1.实际问题/错误</h2><p id="769d" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">这些都是可以改进的bug或实现技术，以提高系统的整体性能。例如，如果您使用<code class="fe nu nv nw nx b">setTimeout</code>函数，延迟为500毫秒，但您实际上可以使用<code class="fe nu nv nw nx b">MutationObserver</code>解决问题，因此不必总是等待500毫秒</p><h2 id="8df7" class="ni lq in bd lr nj nk dn lv nl nm dp lz kl nn no mb kp np nq md kt nr ns mf nt bi translated">2.权衡</h2><p id="953c" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">就广告而言，你可以做很多权衡，但是在大多数系统中，如果你牺牲了其他东西，也有一些权衡可以让你调整系统的性能。广告技术领域中一个常见权衡的简单例子是prebid的使用。</p><p id="c50c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Prebid通常是一种提高广告收入的方式，但它会固有地增加任何广告的加载时间。<br/>所以如果表现是衡量成功的唯一标准，你就不应该使用prebid(或者展示广告)。</p><p id="3425" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">总会有权衡，如果你能为利益相关者概述它们，你就能做出他们的决定，而不是你的决定:)</p><h1 id="25a0" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">假装</h1><p id="01a5" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">就浏览器中的东西而言，它通常必须转换成在屏幕上显示给最终用户的东西。<br/>制造速度幻觉的一种常见方式是简单地展示其他东西，直到你的东西准备好展示。这可以是一个加载图标或虚拟图片或其他东西。</p><p id="d900" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是展示一些东西(尽管不那么相关)通常比等待一些缓慢加载的东西要好。</p><blockquote class="mm mn mo"><p id="d4f5" class="kc kd mp ke b kf kg jo kh ki kj jr kk mq km kn ko mr kq kr ks ms ku kv kw kx ig bi translated">记住这都是相对的！</p></blockquote></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><p id="f886" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mp">更多内容请看</em><a class="ae ky" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">plain English . io</em></strong></a><em class="mp">。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mp">免费周报</em> </strong> </a> <em class="mp">。关注我们关于</em><a class="ae ky" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">Twitter</em></strong></a><a class="ae ky" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">LinkedIn</em></strong></a><em class="mp"/><a class="ae ky" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">YouTube</em></strong></a><em class="mp"/><a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="mp">不和</em> </strong> </a> <em class="mp">。对增长黑客感兴趣？检查</em> <a class="ae ky" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> <em class="mp">电路</em> </strong> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>