<html>
<head>
<title>How to Encode a Javascript Object into a Query String?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将一个Javascript对象编码成查询字符串？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-encode-a-javascript-object-into-a-query-string-ab56554107cb?source=collection_archive---------11-----------------------#2022-01-07">https://javascript.plainenglish.io/how-to-encode-a-javascript-object-into-a-query-string-ab56554107cb?source=collection_archive---------11-----------------------#2022-01-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d4e899b20415cfbaf0a3561fb19233d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mIqr-FGV0UBz51zt"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@cebbbinghaus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christopher Robin Ebbinghaus</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="616e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们不得不将JavaScript对象的数据转换成查询字符串，我们可以用它来发出HTTP请求。</p><p id="8ad5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何将JavaScript对象编码成查询字符串。</p><h1 id="b491" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">URLSearchParams Constructor</code></h1><p id="2932" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用<code class="fe lz ma mb mc b">URLSearchParams</code>构造函数轻松地从JavaScript对象创建查询字符串。</p><p id="23d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它适用于当前大多数浏览器。</p><p id="5dcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="2022" class="mq lc iq mc b gy mr ms l mt mu">const object = {<br/>  a: 1,<br/>  b: 2,<br/>  c: undefined,<br/>  d: null<br/>}<br/>const queryString = new URLSearchParams(object).toString()<br/>console.log(queryString)</span></pre><p id="7564" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将想要转换成查询字符串的<code class="fe lz ma mb mc b">object</code>直接传入<code class="fe lz ma mb mc b">URLSearchParams</code>构造函数。</p><p id="8972" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe lz ma mb mc b">toString</code>来返回查询字符串。</p><p id="766d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe lz ma mb mc b">queryString</code>是:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="e220" class="mq lc iq mc b gy mr ms l mt mu">'a=1&amp;b=2&amp;c=undefined&amp;d=null'</span></pre><p id="7687" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">undefined</code>和<code class="fe lz ma mb mc b">null</code>都转换成字符串。</p><p id="37c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性名用作键，属性值用作值。</p><p id="88b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以遍历对象，用<code class="fe lz ma mb mc b">append</code>方法插入查询参数:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="8f34" class="mq lc iq mc b gy mr ms l mt mu">const object = {<br/>  a: 1,<br/>  b: 2,<br/>  c: undefined,<br/>  d: null<br/>}<br/>const searchParams = new URLSearchParams()<br/>Object.keys(object).forEach(key =&gt; {<br/>  searchParams.append(key, object[key])<br/>});<br/>const queryString = searchParams.toString()<br/>console.log(queryString)</span></pre><p id="47e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe lz ma mb mc b">Object.keys</code>来获取<code class="fe lz ma mb mc b">object</code>中的密钥。</p><p id="6c1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe lz ma mb mc b">key</code>调用<code class="fe lz ma mb mc b">forEach</code>从<code class="fe lz ma mb mc b">object</code>获取密钥。</p><p id="4048" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后调用<code class="fe lz ma mb mc b">append</code>分别添加键和值作为参数。</p><p id="6250" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe lz ma mb mc b">searchParams.toString</code>来返回查询字符串。</p><p id="439a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，对于<code class="fe lz ma mb mc b">queryString</code>，我们得到与之前相同的结果。</p><p id="3e2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以简单地用<code class="fe lz ma mb mc b">Object.entries</code>方法调用<code class="fe lz ma mb mc b">forEach</code>来获得一个键值对的数组。</p><p id="9840" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们写道:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="870f" class="mq lc iq mc b gy mr ms l mt mu">const object = {<br/>  a: 1,<br/>  b: 2,<br/>  c: undefined,<br/>  d: null<br/>}<br/>const searchParams = new URLSearchParams()<br/>Object.entries(object).forEach(([key, value]) =&gt; {<br/>  searchParams.append(key, value)<br/>});<br/>const queryString = searchParams.toString()<br/>console.log(queryString)</span></pre><p id="255f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建查询字符串。</p><p id="f666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe lz ma mb mc b">forEach</code>回调中，我们用参数构造的<code class="fe lz ma mb mc b">key</code>和<code class="fe lz ma mb mc b">value</code>调用<code class="fe lz ma mb mc b">append</code>来插入查询参数。</p><p id="2b8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们得到了和以前一样的结果。</p><h1 id="cba3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b5ca" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以用大多数浏览器都有的<code class="fe lz ma mb mc b">URLSeacrhParams</code>构造函数将JavaScript对象编码成查询字符串。</p><p id="355d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mv">更多内容看</em> <a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mv">说白了。报名参加我们的</em> </a><a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mv">免费每周简讯</em> </a> <em class="mv">。在我们的</em> <a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="mv">社区</em> </a> <em class="mv">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>