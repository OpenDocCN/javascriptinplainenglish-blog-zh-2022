<html>
<head>
<title>How to Resolve Git Merge Conflicts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何解决Git合并冲突</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-resolve-git-merge-conflicts-be4617a02691?source=collection_archive---------15-----------------------#2022-10-24">https://javascript.plainenglish.io/how-to-resolve-git-merge-conflicts-be4617a02691?source=collection_archive---------15-----------------------#2022-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5cc9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Git合并冲突是使用Git不可避免的一部分。让我们看看如何在终端中或通过GUI解决这些问题。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/325c9a21ee706becc2c59cd756a37d83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gahlVHrANKf87vx23mK6jg.png"/></div></div></figure><p id="b954" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">合并冲突通常是复杂开发项目工作中的一部分。在本指南中，我们将看看如何处理它们，以及它们何时会发生。</p><h1 id="b517" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">什么时候会发生合并冲突？</h1><p id="be66" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果您对您所在的分支和您试图合并到的分支上的同一个文件进行了更改，那么在Git中就会发生合并冲突。在这种情况下，Git不知道应该使用哪一个——所以它会抛出一个合并冲突错误。</p><p id="8284" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">考虑对<code class="fe mk ml mm mn b">main</code>分支和<code class="fe mk ml mm mn b">my-branch</code>中的<code class="fe mk ml mm mn b">file.md</code>进行更改的场景。当我们检查<code class="fe mk ml mm mn b">main</code>并试图将<code class="fe mk ml mm mn b">my-branch</code>合并到<code class="fe mk ml mm mn b">main</code>时，我们会遇到以下错误:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="a6b7" class="ms lo iq mn b gy mt mu l mv mw">git merge my-branch</span><span id="cd6a" class="ms lo iq mn b gy mx mu l mv mw">Auto-merging file.md<br/>CONFLICT (content): Merge conflict in file.md<br/>Automatic merge failed; fix conflicts and then commit the result.</span></pre><p id="d269" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Git不知道在这里做什么，所以我们的工作就是尝试并解决它。</p><h1 id="40d8" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">稳定当前分支</h1><p id="7f8e" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">有时，当我们试图合并一个文件时，合并会完全失败:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="45be" class="ms lo iq mn b gy mt mu l mv mw">error: Your local changes to the following files would be overwritten by merge:<br/>        file.md<br/>Please commit your changes or stash them before you merge.</span></pre><p id="20f5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是因为我们在当前分支上有未提交的变更。在合并之前，我们需要关闭当前分支上的所有更改。为此，您可以运行<code class="fe mk ml mm mn b">git stash</code> ( <a class="ae my" href="https://fjolt.com/article/git-mastering-stash" rel="noopener ugc nofollow" target="_blank">我在这里更详细地介绍了git stash</a>)，或者您可以简单地在这个分支上提交您的更改以稳定它:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="ce91" class="ms lo iq mn b gy mt mu l mv mw">git add -A<br/>git commit -m "My commit message"</span></pre><p id="faef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们的分支已经稳定，我们可以尝试运行<code class="fe mk ml mm mn b">git merge my-branch</code>(其中<code class="fe mk ml mm mn b">my-branch</code>是您的分支)来将我们的分支合并回<code class="fe mk ml mm mn b">main</code>。如果我们现在遇到合并冲突，我们需要解决它们。</p><h1 id="6fad" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">如何通过GUI解决git中的合并冲突</h1><p id="44fe" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果您正在使用像Visual Studio代码这样的现代代码编辑器，那么合并冲突将出现在GUI中，您可以在GUI中接受传入的更改或接受分支上的当前更改。这为解决冲突提供了一个非常简单的方法。在Visual Studio代码中，这通过下面显示的GUI表示在冲突文件中。你有很多选择:</p><ul class=""><li id="9670" class="mz na iq kt b ku kv kx ky la nb le nc li nd lm ne nf ng nh bi translated">“接受当前更改”—这将使用您当前分支的内容。</li><li id="0db7" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">“接受传入的更改”——这将使用您正在合并的分支中的内容。</li><li id="73b9" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">“接受两个改变”——这将保持两个，一个在另一个下面。</li><li id="a9f9" class="mz na iq kt b ku ni kx nj la nk le nl li nm lm ne nf ng nh bi translated">“比较更改”—这将打开一个额外的屏幕，以便并排比较更改。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/10fd596484f3bdd3acc5cd04f248feea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m82KEJhfM6HXDhYD.png"/></div></div></figure><p id="28a5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">检查完所有冲突后，您可以添加文件并正常提交:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="c462" class="ms lo iq mn b gy mt mu l mv mw">git add -A<br/>git commit -m "My commit message"</span></pre><h1 id="23de" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">如何通过终端解决git中的合并冲突</h1><p id="39cb" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在某些情况下，您可能没有GUI来解决合并冲突。您可以使用许多命令。</p><p id="0052" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">首先</strong>，<code class="fe mk ml mm mn b">git status</code>会告诉你受影响的文件:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="6737" class="ms lo iq mn b gy mt mu l mv mw">git status<br/>On branch my-branch<br/>You have unmerged paths.<br/>  (fix conflicts and run "git commit")<br/>  (use "git merge --abort" to abort the merge)</span><span id="10ec" class="ms lo iq mn b gy mx mu l mv mw">Unmerged paths:<br/>  (use "git add &lt;file&gt;..." to mark resolution)<br/>        both modified:   file.md</span><span id="1f1c" class="ms lo iq mn b gy mx mu l mv mw">no changes added to commit (use "git add" and/or "git commit -a")</span></pre><p id="6824" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以看到，只有<code class="fe mk ml mm mn b">file.md</code>受到影响。接下来，我们可以使用<code class="fe mk ml mm mn b">git diff</code>来查看这个分支和我们要合并的分支之间的区别:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="9b58" class="ms lo iq mn b gy mt mu l mv mw">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br/> +Some  a<br/> +Some b<br/> +Some conflict c <br/> +Some conflict d<br/> +Some e<br/>++=======<br/>+ Some conflict 1<br/>+ Some b<br/>+ Some conflict c<br/>+ Some conflict 2<br/> -Some f<br/>++Some f<br/>++&gt;&gt;&gt;&gt;&gt;&gt;&gt; main</span></pre><p id="fb38" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里，<code class="fe mk ml mm mn b">++&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>之后、<code class="fe mk ml mm mn b">++=======</code>之前的一切代表当前的分支变更，而<code class="fe mk ml mm mn b">++=======</code>之后、<code class="fe mk ml mm mn b">++&gt;&gt;&gt;&gt;&gt;&gt;&gt; main</code>之前的一切代表您正在合并的分支。</p><p id="18db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们还可以通过运行<code class="fe mk ml mm mn b">git log --merge</code>来查看冲突的提交</p><h1 id="20bb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">在合并冲突期间中止合并</h1><p id="59ad" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">有时你会意识到你在合并冲突中陷得有点太深——在这种情况下，你可以通过运行<code class="fe mk ml mm mn b">git merge --abort</code>来撤销它。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="124d" class="ms lo iq mn b gy mt mu l mv mw">git merge --abort</span></pre><p id="a5ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将使我们回到非合并状态，这样我们就可以在尝试再次合并之前，手动解决两个分支中的合并冲突。</p><h1 id="b216" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">通过接受传入的或当前的更改来解决</h1><p id="c4d7" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">解决某些文件合并冲突的另一个简单方法是使用<code class="fe mk ml mm mn b">git checkout</code>上的<code class="fe mk ml mm mn b">--theirs</code>和<code class="fe mk ml mm mn b">--ours</code>选项。我们的合并冲突发生在<code class="fe mk ml mm mn b">file.md</code>。如果我想接受来自我试图合并的分支的<code class="fe mk ml mm mn b">file.md</code>的所有变更，我可以写:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="f3b5" class="ms lo iq mn b gy mt mu l mv mw">git checkout --theirs file.md</span></pre><p id="87f8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将从“他们的”代码版本中签出<code class="fe mk ml mm mn b">file.md</code>。如果我想在我当前的分支中使用这个版本，我会使用<code class="fe mk ml mm mn b">--ours</code>。<code class="fe mk ml mm mn b">--ours</code>和<code class="fe mk ml mm mn b">--theirs</code>都期望一个文件作为参数——所以这必须在一个文件接一个文件的基础上完成。</p><p id="51b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">很简单，对吧？这对于合并整个文件来说很好，但是如果我们在一个文件中有多个合并冲突呢？</p><h1 id="987b" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">通过编辑文件本身来解决</h1><p id="2c2d" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">记住，当你创建一个git合并冲突时，当我们运行<code class="fe mk ml mm mn b">git diff</code>时，我们最终得到的内容是这样的？</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="92d1" class="ms lo iq mn b gy mt mu l mv mw">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br/> +Some  a<br/> +Some b<br/> +Some conflict c <br/> +Some conflict d<br/> +Some e<br/>++=======<br/>+ Some conflict 1<br/>+ Some b<br/>+ Some conflict c<br/>+ Some conflict 2<br/> -Some f<br/>++Some f<br/>++&gt;&gt;&gt;&gt;&gt;&gt;&gt; main</span></pre><p id="cd42" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该内容也存在于发生冲突的文件中(当然没有T0和T1)。当您想在没有任何GUI帮助的情况下解决合并冲突时，最简单的方法是转到有问题的文件，简单地删除您不想接受的部分。这只是意味着如果你想接受电流，删除<code class="fe mk ml mm mn b">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code>和<code class="fe mk ml mm mn b">=======</code>之间的文本，或者如果你想接受输入，删除<code class="fe mk ml mm mn b">=======</code>和<code class="fe mk ml mm mn b">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>之间的文本。</p><h1 id="f93e" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">添加并提交您的更改</h1><p id="25d1" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">一旦您解决了您的合并冲突，不要忘记在当前分支上添加并提交您的更改，以便它们保持保存状态:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="6117" class="ms lo iq mn b gy mt mu l mv mw">git add -A<br/>git commit -m "Merge message"</span></pre><h1 id="9b4f" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结论</h1><p id="8c13" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们的代码编辑器中有强大的工具来解决合并冲突。话虽如此，有时环境的限制意味着我们必须解决自己的git合并错误——或者我们可能更喜欢从终端完成这项工作。一些特定的边缘情况也可能意味着我们必须从终端完成这项工作。</p><p id="b665" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在任何情况下，合并冲突都是git开发的一部分，只需从存在冲突的文件中删除我们不想要的内容就可以解决。我们还可以使用<code class="fe mk ml mm mn b">git checkout --theirs</code>或<code class="fe mk ml mm mn b">git checkout --ours</code>更快地解决问题。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="caa1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nv">更多内容请看</em><a class="ae my" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nv">plain English . io</em></strong></a><em class="nv">。报名参加我们的</em> <a class="ae my" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nv">免费周报</em> </strong> </a> <em class="nv">。关注我们关于</em><a class="ae my" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nv">Twitter</em></strong></a><a class="ae my" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nv">LinkedIn</em></strong></a><em class="nv"/><a class="ae my" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nv">YouTube</em></strong></a><em class="nv"/><a class="ae my" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nv">不和</em> </strong> </a> <em class="nv">。对增长黑客感兴趣？检查</em> <a class="ae my" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nv">电路</em> </strong> </a> <em class="nv">。</em></p></div></div>    
</body>
</html>