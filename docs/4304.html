<html>
<head>
<title>Module Design Pattern vs Classes in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模块设计模式与JavaScript中的类</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/module-design-pattern-vs-classes-in-javascript-45568e74ad2a?source=collection_archive---------5-----------------------#2022-11-18">https://javascript.plainenglish.io/module-design-pattern-vs-classes-in-javascript-45568e74ad2a?source=collection_archive---------5-----------------------#2022-11-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3f04" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">几个关于JavaScript中模块模式和类的用法和区别的例子。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/0a7887306b5506f84b55fddf57debf8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhrszUZ_ImWyOHGpP7Y4rA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">JavaScript class and Module Pattern examples side by side.</figcaption></figure><h2 id="d45e" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">现代JavaScript的最佳实践是什么，模块模式还是类？</h2><p id="4bc0" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">因此，我想说的第一件事是，我没有这个问题的答案，对我来说，一切都取决于你试图解决的问题，以及其他一些事情，比如，如果你的老板喜欢函数式编程，讨厌面向对象编程，这只是一个例子！但是有一点我很清楚，为了能够使用你需要的那个，你需要知道它们的区别，当然你需要理解它们并且能够自己实现它们，而不是仅仅从StackOverflow复制它…</p><h2 id="5e0e" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">首先让我们了解一些课程的背景:</h2><p id="7fd1" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">类是面向对象编程的主要特征之一，也是语言的重要组成部分，它强烈支持这种方法。</p><p id="306a" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">正如我们在Mozilla开发者网站上看到的那样。</p><blockquote class="mn mo mp"><p id="5b5c" class="lo lp mq lq b lr mh jo lt lu mi jr lw mr mj ly lz ms mk mb mc mt ml me mf mg ig bi translated">类是创建对象的模板。他们用代码封装数据来处理这些数据。</p></blockquote><p id="7cb2" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">然而在JavaScript中，直到最近我们才拥有类。</p><blockquote class="mn mo mp"><p id="1e72" class="lo lp mq lq b lr mh jo lt lu mi jr lw mr mj ly lz ms mk mb mc mt ml me mf mg ig bi translated">JS中的类是建立在原型之上的，但是也有一些语法和语义是ES5类语义所没有的。</p></blockquote><p id="0aac" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">有了这个新特性，我们就有可能使用封装了属性和方法的类作为模板来编写OOP，从而创建共享公共逻辑的新对象，这样可以节省大量的时间和资源。</p><pre class="kd ke kf kg gt mu mv mw bn mx my bi"><span id="ab44" class="mz kt in mv b be na nb l nc nd">// JavaScript Class<br/>class Person {<br/>  // Private Properties<br/>  #name<br/>  #lastName<br/>  constructor(name, lastName) {<br/>    this.#name = name;<br/>    this.#lastName = lastName;<br/>  }<br/>  // Public Properties<br/>  getFullName() { return `${this.#name} ${this.#lastName}` }<br/>}<br/><br/>const client = new Person('Hermione', 'G.');<br/>console.log(client.getFullName()); // Hermione G.<br/>console.log(client.#name) <br/>// Property '#name' is not accessible outside class 'Person'<br/>// because it has a private identifier.</span></pre><p id="5aca" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">因此，正如我们在这个例子中看到的，一个类作为一个模板工作，稍后将用于创建对象，然后将信息添加到创建的模板中。</p><p id="8973" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">然而，我们在这里看到的私有属性只是在今年年初才被添加到ES2022的JavaScript中(本文正是在这一年撰写的)！正如我们在<a class="ae mm" href="https://caniuse.com/?search=javascript%20private" rel="noopener ugc nofollow" target="_blank">我能使用</a>中看到的，仍在使用的旧浏览器仍然存在兼容性问题。</p><p id="9edc" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">保护类中属性的范围是本身支持类的语言的一个主要特性，但是JavaScript类并不是真正的类！</p><blockquote class="mn mo mp"><p id="9ed3" class="lo lp mq lq b lr mh jo lt lu mi jr lw mr mj ly lz ms mk mb mc mt ml me mf mg ig bi translated">类实际上是“特殊函数”</p></blockquote><p id="354b" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">所以这就提出了一个问题！正如我们在这段代码中看到的。</p><pre class="kd ke kf kg gt mu mv mw bn mx my bi"><span id="7075" class="mz kt in mv b be na nb l nc nd">// TypeScript Class<br/>class Person {<br/>  private name: string;<br/>  private lastName: string;<br/>  constructor(name: string, lastName: string) {<br/>    this.name = name;<br/>    this.lastName = lastName;<br/>  }<br/>  public fullName(): string { return `${this.name} ${this.lastName}`; }<br/>}<br/><br/>const dev = new Person('Andrew', 'W.');<br/>console.log(dev.fullName()); // Andrew W.<br/>console.log(dev.name) <br/>// Property 'name' is private and only accessible<br/>// within class 'Person'.</span></pre><p id="3d6d" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">在这里，我们可以编写更常规的私有和公共属性或方法，当我们在处理我们的TypeScript文件时，如果我们试图访问私有属性，我们会得到一个错误，这是TypeScript的奇迹之一。</p><p id="2bd7" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">但是当我们把这段代码编译成JavaScript时会发生什么呢？</p><pre class="kd ke kf kg gt mu mv mw bn mx my bi"><span id="050c" class="mz kt in mv b be na nb l nc nd">"use strict";<br/>// TypeScript Class compiled into JavaScript<br/>class Person {<br/>  constructor(name, lastName) {<br/>    this.name = name;<br/>    this.lastName = lastName;<br/>  }<br/>  fullName() { return `${this.name} ${this.lastName}`; }<br/>}<br/>const dev = new Person('Armando', 'Peña');<br/>console.log(dev.fullName()); // Armando Peña<br/>// Supposedly the 'name' property should be private<br/>// according to the TypeScript file but, we can still access it.<br/>console.log(dev.name); // Armando</span></pre><p id="c1a8" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">这里我们立刻失去了我们私有财产的隐私范围。这可能成为一个问题！</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><h2 id="bdf3" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">现在模块设计模式:</h2><p id="cd3c" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">最基础的模块是任何健壮应用程序的基础部分，因为它有助于保持代码的整洁、分离和组织。提高可伸缩性和维护性。</p><p id="7280" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">现在在JavaScript中，我们有几种方法来管理模块。模块模式就是其中之一，它被用来模拟类的概念，但包括公共/私有属性和方法，通过使用闭包来保护某些部分不受全局范围的影响。使用这种模式，我们获得了一个清晰的问题解决方案，并且只返回一个公共Api，其他的都被隐藏和保护起来。</p><pre class="kd ke kf kg gt mu mv mw bn mx my bi"><span id="f6e5" class="mz kt in mv b be na nb l nc nd">// JavaScript Module Pattern<br/>const Person = (function () {<br/>  /**<br/>   * Private Properties<br/>   * Even if we declare this variables as var instead of let,<br/>   * they still are not accessible.<br/>   */<br/>  let name;<br/>  let lastName;<br/>  return {<br/>    /**<br/>     * Public Properties<br/>     * Everything inside the returned object will be accessible.<br/>     */<br/>    setName: function (_name, _lastName) {<br/>      name = _name;<br/>      lastName = _lastName;<br/>    },<br/>    fullName: function () { return `${name} ${lastName}` }<br/>  }<br/>})();<br/><br/>const client = Person;<br/><br/>client.setName('John', 'S.');<br/>console.log(client.fullName()); // John S.<br/>// The name property is not accessible.<br/>console.log(client.name); // undefined</span></pre><p id="e7c8" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">正如我们在这里看到的，一切都与一个立即调用的函数表达式(IIFE)一起工作，记住JavaScript类只是函数，它声明了一组私有属性(在这个例子中是<em class="mq">中的<em class="mq">名</em>和<em class="mq">姓</em>)</em>，现在不要混淆，即使这些属性是用<em class="mq">变量</em>而不是<em class="mq"> let </em>声明的，它们仍然是私有的！在那之后，函数返回一个带有影响私有属性的方法的对象，但是没有办法直接影响或获取私有属性，至少你可以有意地尝试破解它，但是这不是重点！在那之后，你可以像导出模块一样导出对象，或者按照你想要的方式使用它，你将能够安全地使用实际上没有兼容性问题的私有属性。</p><p id="1344" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">审视这种模式的另一种方式叫做揭示模块模式。</p><pre class="kd ke kf kg gt mu mv mw bn mx my bi"><span id="573c" class="mz kt in mv b be na nb l nc nd">// JavaScript Revealing Module Pattern<br/>const Person = (function () {<br/>  // Private Properties<br/>  let name;<br/>  let lastName;<br/><br/>  function publicSetName(_name, _lastName) {<br/>    name = _name;<br/>    lastName = _lastName;<br/>  }<br/><br/>  function publicGetName() { return `${name} ${lastName}` }<br/><br/>  /**<br/>   * Reveal public pointers to <br/>   * private functions and properties<br/>   */<br/>  return {<br/>    setName: publicSetName,<br/>    getName: publicGetName<br/>  }<br/>})();<br/><br/>const client = Person;<br/><br/>client.setName('Harry', 'P.');<br/>console.log(client.getName()); // Harry P.<br/>// The name property is not accessible.<br/>console.log(client.name); // undefined</span></pre><p id="760d" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">这两者之间最大的区别是，在这种模式中，我们在生命中声明的所有东西都是私有的，我们只返回一个指向我们想要向全局范围公开的属性或方法的指针。</p><p id="4418" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">支持私有数据是一个非常好的优势，也有助于来自面向对象编程背景的开发人员有一个更干净的开始。</p><h2 id="665a" class="ks kt in bd ku kv kw dn kx ky kz dp la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">抓住了！</h2><p id="c5ef" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw lb lx ly lz lf ma mb mc lj md me mf mg ig bi translated">尝试这种模式时，需要考虑一些事情。</p><p id="234b" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">例如:</p><p id="1acf" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">私有属性的单元测试有额外的困难。</p><p id="c35d" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">找到并纠正私有部分的错误是一项挑战。</p><p id="c95e" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">如果使用显示模块模式，一个私有函数引用一个公共函数，那么公共函数不能被修补，因为私有函数将继续引用函数的私有版本，不会受到修补的影响！</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="d41a" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">既然我们已经了解了每种方法的工作原理，我们就可以自己决定在什么条件下实施这种或那种方法更好。</p><p id="775a" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">我不认为自己是设计模式方面的专家，事实上，这篇文章是我目前正在做的调查的一部分，目的是提高我对这个主题的理解，成为一名更好的软件工程师。因此，如果你看到任何你不同意的地方，我们非常欢迎你留下评论，这样我们就可以讨论它了。</p><p id="e1ab" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">如果你想更多地了解这个主题，我推荐你。</p><p id="e431" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">看看这个Youtube频道。</p><div class="nl nm gp gr nn no"><a href="https://www.youtube.com/@DevSage" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">发展</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">学习不应该是一场斗争！DevSage提供在线Web开发和编程教程…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">www.youtube.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc km no"/></div></div></a></div><p id="6b7e" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">读这本书。</p><div class="nl nm gp gr nn no"><a href="https://www.patterns.dev/posts/classic-design-patterns/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">学习JavaScript设计模式</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">设计模式是软件设计中常见问题的可重用解决方案。它们既令人兴奋又是一个…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">www.patterns.dev</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc km no"/></div></div></a></div><p id="f1f4" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">他们都没有给我任何报酬，我只是觉得他们在这件事上很有一套。</p><p id="9860" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">我也有一个Github库，我会在上面上传我做的所有关于设计模式的代码样本。我将主要使用JavaScript、TypeScript并去那里，所以如果你感兴趣的话可以去看看。</p><div class="nl nm gp gr nn no"><a href="https://github.com/Armando284/design_patterns" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">GitHub-Armando 284/design _ patterns:不同语言的设计模式研究</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="oe l nz oa ob nx oc km no"/></div></div></a></div><p id="0d0a" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated">我希望这篇文章对你有帮助，如果你对这个主题感兴趣，我计划每周继续写其他不同的模式。</p><p id="1d6c" class="pw-post-body-paragraph lo lp in lq b lr mh jo lt lu mi jr lw lb mj ly lz lf mk mb mc lj ml me mf mg ig bi translated"><em class="mq">更多内容请看</em><a class="ae mm" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="mq">plain English . io</em></strong></a><em class="mq">。报名参加我们的</em> <a class="ae mm" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="mq">免费周报</em> </strong> </a> <em class="mq">。关注我们上</em><a class="ae mm" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="mq">Twitter</em></strong></a><a class="ae mm" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="mq">LinkedIn</em></strong></a><strong class="lq io"><em class="mq"/></strong><a class="ae mm" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="mq">YouTube</em></strong></a><strong class="lq io"><em class="mq"/></strong><em class="mq">和</em> <a class="ae mm" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="mq">不和</em> </strong> </a>  <em class="mq">对成长黑客感兴趣？检查</em> <a class="ae mm" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="mq">电路</em> </strong> </a> <strong class="lq io"> <em class="mq">。</em> </strong></p></div></div>    
</body>
</html>