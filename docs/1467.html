<html>
<head>
<title>How to Create Your Angular Library in 2022</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在2022年创建你的角度库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-angular-library-2022-3965beee6dc6?source=collection_archive---------0-----------------------#2022-03-26">https://javascript.plainenglish.io/create-angular-library-2022-3965beee6dc6?source=collection_archive---------0-----------------------#2022-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="692c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">除了为应用程序创建可重用的组件之外，还要创建可重用的库，以便在不同的项目之间共享。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cbe6854829e165d1e3b90bf890f602d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cqZWZQs2PvnuyH-AVoJ67Q.png"/></div></div></figure><p id="e1dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以前运行过这个命令来安装某些插件或工具吗？有没有想过像<code class="fe ln lo lp lq b">Angular/Material</code>、<code class="fe ln lo lp lq b">lodash</code>、<code class="fe ln lo lp lq b">moment.js</code>或<code class="fe ln lo lp lq b">chart.js</code>这样的软件包是如何创建的？对于像我们前端开发人员这样的最终用户来说，这可能感觉像是魔术，只是<code class="fe ln lo lp lq b">npm i</code>我们需要的包名和每个UI或方法现在都包含在我们的应用程序中了。</p><p id="0614" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，您是否有多个项目具有您在一个项目中创建的相同的复杂定制组件？通常，我们只是将组件从一个项目复制粘贴到另一个项目。但是当有bug或者变更的时候，我们总是需要为一个变更更新多个项目。如果我们可以为这个复杂的定制组件创建一个库，并像我们使用<code class="fe ln lo lp lq b">npm i</code>一样将其导入多个项目，那么当有更改或错误时，我们只需更新库代码，其他项目只需<code class="fe ln lo lp lq b">npm i</code>发布最新的库即可获得错误修复或更改。</p><p id="4966" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">发展没有魔法。今天，我将向您介绍作为Angular开发人员，如何创建您的库并将其导入到您的项目中。</p><h1 id="4fcd" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">步骤1:为库生成工作区</h1><pre class="kg kh ki kj gt mj lq mk ml aw mm bi"><span id="1e75" class="mn ls iq lq b gy mo mp l mq mr"><strong class="lq ir">ng new medium-lib — no-create-application </strong></span><span id="51ab" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">cd medium-lib</strong></span><span id="2dde" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">ng generate library med-lib</strong></span></pre><p id="a5f4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">运行第一个命令，您将能够在您的文件夹中看到这些文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/64f6cb1ebb926a1f3e45715533e59fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*8T3l63r-4ofiDI-rwacnZA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">workspace generated by Angular</figcaption></figure><p id="f11c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过运行上面提供的第二个命令，将目录切换到工作区。运行第三个命令将生成工作空间中所需的库文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/1147bb91a2c87d2fdb4e60c80f0fb9f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*FeaRaQYeImHCzrJsSL4Cxw.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">med-lib folder generated</figcaption></figure><h1 id="50b9" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">步骤2:在库中创建多个模块/组件</h1><p id="f648" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">如果您想要为您的库创建多个模块/组件，您总是可以将所有的med-lib文件提取到一个med-lib文件夹中，并更新<code class="fe ln lo lp lq b">public-api.ts</code>中的导出语句。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/e675b812e9b975f3d0c814bec4d4b7fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*Jk-uXIjdrrgbQ-H2uQofQQ.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/1c3ecb66ec110e050223b75c0e161370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*16J4ozAkmxwAQ5nmqrpzAA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">public-api.ts file</figcaption></figure><p id="2159" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过下面的命令创建一个新模块。</p><pre class="kg kh ki kj gt mj lq mk ml aw mm bi"><span id="21d2" class="mn ls iq lq b gy mo mp l mq mr"><strong class="lq ir">ng g module new-lib</strong></span><span id="a92a" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">ng g c new-lib --project med-lib</strong></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/27f82f809a98273f09315940172d54c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*zLUkt38zoSuwESctxaYSmg.png"/></div></figure><p id="ddcb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将这两行添加到您现有的<code class="fe ln lo lp lq b">public-api.ts</code>中，您的新模块和组件现在也导出了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/7b2eee5f8cfc49c62991e8d44608dfb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*44buqj28ST8NJzc8CHA2lw.png"/></div></figure><p id="ba11" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们为我们的库组件和服务创建一些方法和样式，并将其导入到我们在库项目中初始化的测试项目中。我们可以通过运行这个命令来初始化库根文件夹中的测试项目。</p><h1 id="c0be" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">步骤3:在库中生成虚拟角度应用程序来测试库</h1><pre class="kg kh ki kj gt mj lq mk ml aw mm bi"><span id="ecc3" class="mn ls iq lq b gy mo mp l mq mr"><strong class="lq ir">ng g application testing</strong></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/884dbbf960457c73996791f0c5caf786.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*HH7dQ_nh7AxD0neurUuVpw.png"/></div></figure><p id="856a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在您将能够在<code class="fe ln lo lp lq b">projects/testing</code>下看到您新创建的角度应用程序。尝试使用<code class="fe ln lo lp lq b">ng serve</code>运行您的角度应用程序。现在，您应该能够在浏览器上看到默认的角度模板。让我们做一些修改来定制我们的库组件和服务。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/68477b1052aad298b2833610e88ae290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*-ATN6Jt0PAudQiZLmeuSWw.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">med-lib.component.ts</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/a87a38de3b518e5aabe325c61a7e6b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*IYhBtd8v_bf2xQERKcsYuQ.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">med-lib.service.ts</figcaption></figure><h1 id="4e78" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">步骤4:将您的库文件构建到一个可以由Angular应用程序导入的包中</h1><p id="e333" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">现在是时候将您的库构建到一个可以由您的测试项目导入的包中了。</p><pre class="kg kh ki kj gt mj lq mk ml aw mm bi"><span id="c922" class="mn ls iq lq b gy mo mp l mq mr"><strong class="lq ir">ng build med-lib // build the library and output it to dist/med-lib</strong></span><span id="f1d5" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">or</strong></span><span id="a8c6" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">ng build med-lib --watch // to watch changes from your library files</strong></span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/799f6c77c659a303d61e09930c0dc4bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*lGE_hbw834DaiMVSrmL9ig.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">dist folder</figcaption></figure><p id="4f8e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过编辑您的<code class="fe ln lo lp lq b">angular.json</code>文件中的配置来更改您的包或文件夹的名称。让我们回到前面创建的测试应用程序，测试我们创建的库。</p><h1 id="4705" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">步骤5:将库包导入到测试应用程序中</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/27280bb2316e00fa1912022d82299a05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*V7daMQryiOrbfg5SsNgQ9Q.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">app.module.ts</figcaption></figure><p id="a76e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就像导入其他库一样，首先导入您的<code class="fe ln lo lp lq b">app.module.ts</code>文件中的模块。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/8bf635689658b524b65a6895c5d16bc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*vskRnLZJnwFuOzvUIA8kaQ.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">app.component.ts</figcaption></figure><p id="92d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">导入我们之前在库中导出的<strong class="kt ir">服务</strong>和<strong class="kt ir">方法</strong>，并像使用其他库的方法一样使用它们。从Angular中清除HTML文件中的样板代码，并创建一个简单的模板来查看库组件及其方法是否正常工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/e536c4ccc0668cce0cbf81508865dca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*a4doVlJHuPShy9lqNTo7YA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">app.component.html</figcaption></figure><p id="22a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在运行<code class="fe ln lo lp lq b">ng serve</code>，你应该能在你的浏览器里看到和我一样的东西，<strong class="kt ir"> localhost:4200 </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/5b93e95476dc498da032eb3f0e1e5a23.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*6Zw6rSvtfH-ASi7-lJEVbg.png"/></div></figure><p id="3f27" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">恭喜你！🎉您已经成功地将角度库包创建、导出和导入到角度应用程序中。</p><h1 id="c4ff" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">下一步是什么？</h1><p id="d146" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">在您成功地重构并构建了您的库之后，您有两种方法来共享您在不同项目中创建的这个库。</p><h1 id="4da4" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">1.在您自己的私有服务器中本地托管库</h1><p id="2760" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">您可以<strong class="kt ir">将这个库打包到一个<code class="fe ln lo lp lq b">.tgz</code>文件中，并将这个文件放在一个中央存储库中，这样所有的项目都可以访问它。</strong></p><pre class="kg kh ki kj gt mj lq mk ml aw mm bi"><span id="31b4" class="mn ls iq lq b gy mo mp l mq mr"><strong class="lq ir">cd dist/med-lib/</strong></span><span id="43af" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">npm pack // this will generate the .tgz file</strong></span></pre><p id="f626" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，我可以将我的库放在我的共享驱动器中。(例如:<code class="fe ln lo lp lq b">shared-drive-address</code>:<strong class="kt ir">H:/dev/angular/libraries/med-lib-0 . 0 . 1 . tgz</strong>)。我所需要做的只是执行一个<code class="fe ln lo lp lq b">npm install --save &lt;shared-drive-address&gt;</code>操作，这个库就会被安装到你的项目中。</p><h1 id="b0e5" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">2.npm服务器中的主机库</h1><p id="0e45" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">您可以运行这些命令来发布您的库。请注意，对于这一步，您必须拥有一个npm帐户。你可以在这里注册账户，<a class="ae nq" href="https://www.npmjs.com/signup" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/signup</a>。创建您的帐户后，您可以运行下面的命令来登录您当前计算机中的npm帐户。</p><pre class="kg kh ki kj gt mj lq mk ml aw mm bi"><span id="ea9c" class="mn ls iq lq b gy mo mp l mq mr"><strong class="lq ir">npm adduser // login npm in local machine</strong></span><span id="1a35" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">npm whoami // check that you have login to the right account</strong></span><span id="ae30" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">ng build med-lib</strong></span><span id="a217" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">cd dist/med-lib</strong></span><span id="4d1e" class="mn ls iq lq b gy ms mp l mq mr"><strong class="lq ir">npm publish</strong></span></pre><h1 id="afc6" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated"><strong class="ak">总结</strong></h1><p id="a339" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">希望这篇文章能让您了解如何在当前项目中调整和重构代码，以及如何为跨多个应用程序使用的公共特性实现一个可共享的<strong class="kt ir"> Angular库</strong>。现在，当您使用库和第三方包并阅读其代码时，您将不再觉得它是一个黑盒，而是能够理解不同作者如何创建和构建他们的库。</p><p id="5ac2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nr">编码一次，到处使用。</em></p><p id="0162" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，作为一名前端开发人员，您在您的角度之旅中领先了一步。如果你有其他方法来实现Angular库或者在不同的项目中共享代码，请在下面的评论中告诉我。我很想了解一下。干杯！</p><div class="ns nt gp gr nu nv"><a href="https://medium.com/@devjo/membership" rel="noopener follow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">用我的推荐链接- DevJo加入媒体</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">medium.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kp nv"/></div></div></a></div><p id="20d1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nr">更多内容看</em> <a class="ae nq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nr">说白了就是</em> </strong> </a> <em class="nr">。报名参加我们的</em> <a class="ae nq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nr">免费周报</em> </strong> </a> <em class="nr">。关注我们关于</em><a class="ae nq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nr">Twitter</em></strong></a><em class="nr">和</em><a class="ae nq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nr">LinkedIn</em></strong></a><em class="nr">。加入我们的</em> <a class="ae nq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nr">社区</em> </strong> </a> <em class="nr">。</em></p></div></div>    
</body>
</html>