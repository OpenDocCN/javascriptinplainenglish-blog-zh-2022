<html>
<head>
<title>Difference Between ‘for…of’ and ‘for…in’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“for…of”和“for…in”的区别</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/difference-between-for-of-and-for-in-7244104133bf?source=collection_archive---------11-----------------------#2022-03-22">https://javascript.plainenglish.io/difference-between-for-of-and-for-in-7244104133bf?source=collection_archive---------11-----------------------#2022-03-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="67c7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">它们看起来很像，那么如何正确使用呢？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0a17f925ca5d51f31d8beac2190866c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hvi2AerWdax4-ybp"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@etienneblg?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Etienne Boulanger</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c1e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">for...in</code>和<code class="fe ls lt lu lv b">for...of</code>语句都可以迭代某些东西，但是它们之间很容易混淆。</p><p id="ddcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我会先说明它们在遍历不同类型数据时的特点是什么，然后<strong class="ky ir">分析它们的本质</strong>，这样你才能真正分辨出它们之间的区别，开始吧！</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="238e" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">排列</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/e1b6e309b0ae23f26976f659e7a9dd81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XxJpSgRtBUythw0S_MiBWg.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ca2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当它们被用来迭代一个数组的时候，<code class="fe ls lt lu lv b">for...in</code>会返回数组的索引，但是请注意，<strong class="ky ir">这里会被转换成字符串类型</strong>，这通常违背了我们的理解，容易造成bug。</p><p id="8f6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当使用<code class="fe ls lt lu lv b">for...of</code>时，它返回数组的每一项。当我们使用<code class="fe ls lt lu lv b">Array.prototype.entries()</code>得到一个新的数组迭代器对象(它包含数组中每一项的键/值对)时，我们也可以对它使用<code class="fe ls lt lu lv b">for...of</code>，那么我们得到的数组下标就是一个数值类型。</p><h1 id="2daa" class="md me iq bd mf mg my mi mj mk mz mm mn jw na jx mp jz nb ka mr kc nc kd mt mu bi translated">普通物体</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/f7e335754004f7c1ed488a0824cf01bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7UUsJhyxsbbx8VaGbXgqiA.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="f575" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以看到，<code class="fe ls lt lu lv b">for...in</code>可以直接迭代普通对象的属性名，而<code class="fe ls lt lu lv b">for...of</code>不行。</p><p id="4101" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想使用<code class="fe ls lt lu lv b">for..of</code>来迭代一个对象的属性，我们可以使用<code class="fe ls lt lu lv b">Object.keys()</code>方法来获得一个对象属性的数组。</p><h1 id="ecae" class="md me iq bd mf mg my mi mj mk mz mm mn jw na jx mp jz nb ka mr kc nc kd mt mu bi translated">Unicode字符串</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/07dfff9269581b1386185aa7a54199d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vNF59MUKBidEc83lstqgJw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2faa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">for ... of</code>支持遍历Unicode字符串，而<code class="fe ls lt lu lv b">for...in</code>不支持。</p><h1 id="4ae0" class="md me iq bd mf mg my mi mj mk mz mm mn jw na jx mp jz nb ka mr kc nc kd mt mu bi translated">重要结论</h1><p id="351a" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated"><code class="fe ls lt lu lv b">for...in</code>语句迭代<strong class="ky ir">对象的可枚举、非符号属性</strong>，而<code class="fe ls lt lu lv b">for...of</code>语句迭代<strong class="ky ir">可迭代对象定义要迭代的值。</strong></p><p id="0fcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们根据结论来分析一下<code class="fe ls lt lu lv b">for...in</code>和<code class="fe ls lt lu lv b">for...of</code>。</p><h2 id="c2f0" class="nk me iq bd mf nl nm dn mj nn no dp mn lf np nq mp lj nr ns mr ln nt nu mt nv bi translated">为了…在</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/cb621fe011ae8388c1dd053a86022cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nqo8VMGATGObp9gispWZhQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="99c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着原型链上的可枚举属性也可以被<code class="fe ls lt lu lv b">for...in</code>找到，但是我们也可以在循环中使用<code class="fe ls lt lu lv b">Object.prototype.hasOwnProperty()</code>来过滤掉那些继承的属性。</p><p id="8af4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，不建议使用<code class="fe ls lt lu lv b">for...in</code>循环遍历数组。更适用的场景是对于<strong class="ky ir">调试</strong>，可以检查对象的属性是否如预期存在。</p><h2 id="1bee" class="nk me iq bd mf nl nm dn mj nn no dp mn lf np nq mp lj nr ns mr ln nt nu mt nv bi translated">为了…的</h2><p id="7810" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated"><code class="fe ls lt lu lv b">for...of</code>迭代依赖于<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">可迭代协议</strong> </a> <strong class="ky ir">。</strong>如果一个对象实现了iterable协议，那么<code class="fe ls lt lu lv b">for...of</code>可以用在它上面。</p><p id="3360" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要成为可迭代的，一个对象必须实现<code class="fe ls lt lu lv b">@@iterator</code>方法。这意味着一个对象(或其原型链上的某个对象)必须有一个带有关键字<code class="fe ls lt lu lv b">@@iterator</code>的属性，可以通过常量<a class="ae kv" href="https://developer.mozilla.org/en%20-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">符号访问。</strong></a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/6a8c54f681598aadbd5a5d9da0702f0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3xGqnGRMQQMVfslhHGU4Hw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5234" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript中也有一些内置的iterable对象如String、Array、TypedArray、Map和Set。</p><p id="fdd2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以当遍历数组时，我们得到数组的每一项，这是内置的<code class="fe ls lt lu lv b">Array.prototype[@@iterator]()</code>逻辑。我们也可以改变它来获得不同的效果，虽然通常这没有实际用途。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/b29d875c2b171fa5fcbfc42fc69020ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d37kUOZe0WEHYu97ANzeXQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="61e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以看到我改变了它的内置逻辑来得到数组的下标。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="63ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nz">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nz">中等会员</em> </a> <em class="nz">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nz">我的链接</em> </a> <em class="nz">报名，我会得到一点佣金。</em></p><p id="e6c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的支持对我来说很重要——谢谢。</p></div></div>    
</body>
</html>