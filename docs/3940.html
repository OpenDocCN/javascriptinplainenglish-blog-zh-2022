<html>
<head>
<title>JavaScript Deep Concepts You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的JavaScript深层概念</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-deep-concepts-you-should-know-8965d4e409d3?source=collection_archive---------0-----------------------#2022-10-12">https://javascript.plainenglish.io/javascript-deep-concepts-you-should-know-8965d4e409d3?source=collection_archive---------0-----------------------#2022-10-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="83bf" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第2部分:学习JavaScript令人困惑的部分的下一步，比如事件循环、Web APIs和异步的东西。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/5e1831f38563d6451d73b2ff745c2731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Azk_GykV9NVBsU7t"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@visuallert?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jonas Allert</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="36d6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以通过以下链接访问第1部分:</p><p id="1df1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">第一部分:<a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/javascript-deep-concepts-you-should-know-dde14aafd8d2">https://JavaScript . plain English . io/JavaScript-deep-concepts-you-should-know DDE 14 aafd 8d 2</a>。</p><h1 id="4cd1" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">异步的</h1><p id="0724" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在谈论事件循环和web workers之前，我们应该清楚什么是JavaScript的异步，以及当JavaScript是单线程语言时，它是如何处理的！</p><p id="2f75" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript是一种单线程同步编程语言，本身不支持多线程或异步的东西，但是在浏览器(<strong class="kv io">浏览器API </strong>和JavaScript中的一些机制的帮助下，我们可以拥有<strong class="kv io">异步</strong> <strong class="kv io"> JavaScript </strong>！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/15c7691f140247dd76504366858d694a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ov2UNVvpTV8yfv7CgNcdg.jpeg"/></div></div></figure><p id="834e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面的图片告诉我们JavaScript引擎和我们从浏览器获得的Web API发生了什么，让我们来解释一下。</p><p id="935c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript有一个名为<strong class="kv io">“调用堆栈”</strong>的简单列表，它逐个管理任务(堆栈算法)，但当一个异步任务被传递时，JavaScript会将其弹出到web APIs，浏览器会处理它，就像<strong class="kv io"> setTimeout </strong> API一样，当异步任务的结果准备好时，浏览器会通过某种机制将其带回堆栈，稍后我会告诉你。</p><h1 id="9311" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">事件循环</h1><p id="8653" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">还记得上一节我告诉你异步的东西在后台完成后会被带回调用栈吗？！处理这种机制的部分称为“<strong class="kv io">事件循环</strong>”。</p><p id="9714" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">事件循环会不断检查调用栈，如果里面没有任务，并且是空闲的，它会把事情按优先级推入调用栈，我稍后会告诉你。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/2218eb7a1e5b3cad1f51736501cc0fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*__wPgGBodnci5NWcaa_Aqw.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Gif that explains the event loop from <a class="ae ks" href="https://blog.sessionstack.com/?source=post_page-----2f077c4438b5--------------------------------" rel="noopener ugc nofollow" target="_blank">SessionStack Blog</a></figcaption></figure><h1 id="1d22" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">回拨和微任务队列</h1><p id="bae1" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">想象一下，在同一秒钟内完成两个异步任务，并且它们都刚刚从web APIs返回，那么哪一个将首先被推送到回调？</p><p id="390a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript对此有一个机制，它将回调请求分成两部分:微任务和宏任务。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mo"><img src="../Images/ba1142840b481b22ebb0dd5472688b94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPPoP-Y5OrlTUGLUI9GgdQ.png"/></div></div></figure><p id="87c6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">宏任务队列</strong>在定时器超时后获取来自<strong class="kv io"><em class="mp">setTimeout()</em></strong><em class="mp"/>API的普通回调函数</p><p id="7815" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">宏任务</strong>比<strong class="kv io">微任务队列</strong>优先级低，无法将回调函数提取到事件循环中。</p><p id="664d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">微任务队列</strong>通过承诺和变异观察器获得回调函数。</p><h2 id="9e3b" class="mq lq in bd lr mr ms dn lv mt mu dp lz lc mv mw mb lg mx my md lk mz na mf nb bi translated">总结:</h2><p id="f013" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">感谢您阅读本文，您可以关注我的媒体页面，了解即将发布的JavaScript文章。</p></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><p id="91ce" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mp">更多内容请看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mp">plain English . io</em></strong></a><em class="mp">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mp">免费周报</em> </strong> </a> <em class="mp">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mp">Twitter</em></strong></a><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mp">LinkedIn</em></strong></a><em class="mp"/><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mp">YouTube</em></strong></a><em class="mp"/><a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mp">不和</em> </strong> </a> <em class="mp">。对增长黑客感兴趣？检查</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mp">电路</em> </strong> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>