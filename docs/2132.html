<html>
<head>
<title>2 JavaScript Approaches to Encode/Decode HTML Entities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2编码/解码HTML实体的JavaScript方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/here-are-2-javascript-approaches-to-encode-decode-html-entities-52989bb12031?source=collection_archive---------0-----------------------#2022-05-17">https://javascript.plainenglish.io/here-are-2-javascript-approaches-to-encode-decode-html-entities-52989bb12031?source=collection_archive---------0-----------------------#2022-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="515f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不需要插件。2个策略— (1)一个<textarea> HTML元素&amp; (2) Regex模式实现。</textarea></h2></div><p id="24b9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在直接进入实现细节之前，下面旨在分别展示HTML代码片段的编码/解码，以便为本文的其余部分指定上下文:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/0e8f1462638ad9d22d6b22d12e326d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rg28fExeWzwP1BpWsUlhBg.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Image by Author | Showcases the raw html string <strong class="bd lr">&lt;py-script&gt;&lt;/py-script&gt;</strong> transformed into unicode characters <strong class="bd lr">&amp;#60py-script&amp;#62&amp;#60/py-script&amp;#62</strong> and vice-versa</figcaption></figure><h1 id="cd87" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">为什么这是必要的？</h1><p id="9255" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">一般来说，技术文档通常包含代码片段作为其内容的一部分，以供读者将来自我参考。因此，当这些前述文档被数字编译并以HTML格式呈现时，对代码片段的HTML实体进行编码对于正确显示和查看是必要的。典型的例子是，请随时查看下面这篇文章，这篇文章强调了在任何HTML格式的文档中显示代码片段的各个方面:</p><div class="mp mq gp gr mr ms"><a href="https://medium.com/weekly-webtips/6-useful-but-lesser-known-html-tags-attributes-9e9f2c0208c4" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">6个有用但鲜为人知的HTML标签和属性</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">这些标签的存在是有充分理由的…包括示例+用例。</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">medium.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng ll ms"/></div></div></a></div><ul class=""><li id="b795" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated"><strong class="kh ir">注:标签&lt;代码&gt;和&lt; pre &gt;在以上内容中特别举例说明。</strong></li></ul><p id="a588" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如另一位媒体作家<a class="nq nr ep" href="https://medium.com/u/d77a278794a1?source=post_page-----52989bb12031--------------------------------" rel="noopener" target="_blank"> Vit Tertiumnon </a>在他的文章中所说:</p><div class="mp mq gp gr mr ms"><a href="https://tertiumnon.medium.com/js-how-to-decode-html-entities-8ea807a140e5" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">JS:如何解码HTML实体</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">如果你想把 和其他HTML-entities改成普通的特殊字符。</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">tertiumnon.medium.com</p></div></div></div></a></div><blockquote class="ns nt nu"><p id="cf0f" class="kf kg nv kh b ki kj jr kk kl km ju kn nw kp kq kr nx kt ku kv ny kx ky kz la ij bi translated"><em class="iq">没有编码或解码HTML实体的JavaScript内置功能。</em></p></blockquote><p id="85c1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我也相信，为在线社区中的其他人分享两种不同的(经过验证的)以编程方式执行这项任务的方法是有益的。</p><h2 id="c000" class="nz lt iq bd lu oa ob dn ly oc od dp mc ko oe of me ks og oh mg kw oi oj mi ok bi translated">方法一.使用一个<textarea> HTML DOM元素</textarea></h2><p id="bff8" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">(注意:这只是一个免责声明，这种方法最初来自同一位媒体作家<a class="nq nr ep" href="https://medium.com/u/d77a278794a1?source=post_page-----52989bb12031--------------------------------" rel="noopener" target="_blank"> Vit Tertiumnon </a>的文章，但做了一些调整)</p><ul class=""><li id="71cc" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">要编码:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="bec6" class="oq lt iq om b be or os l ot ou">function encodeHTMLEntities(text) {<br/>  let textArea = document.createElement('textarea');<br/>  textArea.innerText = text;<br/>  let encodedOutput=textArea.innerHTML;<br/>  let arr=encodedOutput.split('&lt;br&gt;');<br/>  encodedOutput=arr.join('\n');<br/>  return encodedOutput;<br/>}</span></pre><ul class=""><li id="a12b" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">用法:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="4181" class="oq lt iq om b be or os l ot ou">let sampleRawHTMLStr="&lt;py-script&gt;&lt;/py-script&gt;";<br/>let encodedOutput=encodeHTMLEntities(sampleRawHTMLStr);<br/>// output: &amp;lt;py-script&amp;gt;&amp;lt;/py-script&amp;gt;</span></pre><ul class=""><li id="c147" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">要解码<code class="fe ov ow ox om b">encodedOutput</code>:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="6c86" class="oq lt iq om b be or os l ot ou">function decodeHTMLEntities(text) {<br/>  let textArea = document.createElement('textarea');<br/>  textArea.innerHTML = text;<br/>  return textArea.value;<br/>}</span></pre><ul class=""><li id="ede4" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">用法:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="40c7" class="oq lt iq om b be or os l ot ou">let decodedOutput=decodeHTMLEntities(encodedOutput);<br/>// output: &lt;py-script&gt;&lt;/py-script&gt;</span></pre><h2 id="cbe0" class="nz lt iq bd lu oa ob dn ly oc od dp mc ko oe of me ks og oh mg kw oi oj mi ok bi translated">方法二。使用正则表达式模式</h2><p id="7342" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">或者，也可以在JavaScript中使用正则表达式模式来获得与上面类似的理想输出:</p><ul class=""><li id="e6b9" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">要编码:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="a867" class="oq lt iq om b be or os l ot ou">function encodeHTMLEntities(rawStr) {<br/>  return rawStr.replace(/[\u00A0-\u9999&lt;&gt;\&amp;]/g, ((i) =&gt; `&amp;#${i.charCodeAt(0)};`));<br/>}</span></pre><ul class=""><li id="a744" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">用法:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="03cb" class="oq lt iq om b be or os l ot ou">let sampleRawHTMLStr="&lt;py-script&gt;&lt;/py-script&gt;";<br/>let encodedOutput=encodeHTMLEntities(sampleRawHTMLStr);<br/>// output: &amp;#60;py-script&amp;#62;&amp;#60;/py-script&amp;#62;</span></pre><ul class=""><li id="512f" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">要解码<code class="fe ov ow ox om b">encodedOutput</code>:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="cbf0" class="oq lt iq om b be or os l ot ou">function decodeHTMLEntities(rawStr) {<br/>  return rawStr.replace(/&amp;#(\d+);/g, ((match, dec) =&gt; `${String.fromCharCode(dec)}`));<br/>}</span></pre><ul class=""><li id="573c" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">用法:</li></ul><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="347e" class="oq lt iq om b be or os l ot ou">let decodedOutput=decodeHTMLEntities(encodedOutput);<br/>// output: &lt;py-script&gt;&lt;/py-script&gt;</span></pre></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><h1 id="29ec" class="ls lt iq bd lu lv pf lx ly lz pg mb mc jw ph jx me jz pi ka mg kc pj kd mi mj bi translated">方法一和方法二概述</h1><p id="db15" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">基于各自的输出，这两种方法都成功地对<code class="fe ov ow ox om b">&lt;py-script&gt;&lt;/py-script&gt;</code>进行了编码</p><p id="ea5b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> I. &lt; textarea &gt;方法</strong></p><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="0e49" class="oq lt iq om b be or os l ot ou">&amp;lt;py-script&amp;gt;&amp;lt;/py-script&amp;gt;</span></pre><p id="bfe2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">二。正则表达式方法</strong></p><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="8e87" class="oq lt iq om b be or os l ot ou">&amp;#60;py-script&amp;#62;&amp;#60;/py-script&amp;#62;</span></pre><p id="2aad" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前者呈现为<em class="nv"> Unicode字符，而</em>后者以<em class="nv">十进制</em>格式编码每个HTML实体。然而，这两种方法在HTML文档中的显示并无不同:</p><pre class="lc ld le lf gt ol om on bn oo op bi"><span id="fa48" class="oq lt iq om b be or os l ot ou">&lt;py-script&gt;&lt;/py-script&gt;</span></pre><ul class=""><li id="48de" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">实际演示可点击查看<a class="ae pk" href="https://incubated-geek-cc.github.io/html-encode-decode/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="e531" class="nh ni iq kh b ki pl kl pm ko pn ks po kw pp la nm nn no np bi translated">请随意参考<a class="ae pk" href="https://www.w3schools.com/charsets/ref_html_entities_4.asp" rel="noopener ugc nofollow" target="_blank"> html_entities </a>获取html实体及其编码对应的完整列表。</li></ul></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><h2 id="2bd7" class="nz lt iq bd lu oa ob dn ly oc od dp mc ko oe of me ks og oh mg kw oi oj mi ok bi translated">个人评论</h2><p id="94c2" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">总的来说，我个人更喜欢后者的方法(即使用正则表达式模式)，因为代码更干净，但这完全取决于个人偏好。理想情况下，整个网页的编码标准是一致的，以便于维护。</p><p id="a667" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">最后但同样重要的是，请在评论中提出更有效的方法！(计算速度提高或代码更简洁)。会非常有兴趣知道任何替代方案！</strong> —😀</p></div><div class="ab cl oy oz hu pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="ij ik il im in"><p id="216a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你知道了！非常感谢你坚持到这篇文章的结尾！❤希望这篇文章对你有所帮助，如果你想了解更多地理信息系统(GIS)、数据分析和Web应用相关的内容，请随时关注Medium 。会非常感激—😀</p><p id="6d47" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">— 🌮请给我买一份玉米卷🎀˶❛◡❛)</p><div class="mp mq gp gr mr ms"><a href="https://geek-cc.medium.com/membership" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">通过我的推荐链接加入灵媒——李思欣·崔</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">获得李思欣·崔和其他作家在媒体上的所有帖子！😃您的会员费直接…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">geek-cc.medium.com</p></div></div><div class="nb l"><div class="pq l nd ne nf nb ng ll ms"/></div></div></a></div><p id="87e3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nv">更多内容看</em> <a class="ae pk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nv">说白了。报名参加我们的</em> <a class="ae pk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nv">免费周报</em> </strong> </a> <em class="nv">。关注我们关于</em><a class="ae pk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nv">Twitter</em></strong></a><em class="nv">和</em><a class="ae pk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nv">LinkedIn</em></strong></a><em class="nv">。查看我们的</em> <a class="ae pk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nv">社区不和谐</em> </strong> </a> <em class="nv">加入我们的</em> <a class="ae pk" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nv">人才集体</em> </strong> </a> <em class="nv">。</em></strong></a></p></div></div>    
</body>
</html>