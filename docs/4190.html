<html>
<head>
<title>Javascript Immediately Invoked Function Expressions (IIFE)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript立即调用函数表达式(IIFE)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-immediately-invoked-function-expressions-iife-6951ff6c029b?source=collection_archive---------6-----------------------#2022-11-07">https://javascript.plainenglish.io/javascript-immediately-invoked-function-expressions-iife-6951ff6c029b?source=collection_archive---------6-----------------------#2022-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2754" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Javascript中到处都有立即调用的函数或匿名函数。让我们看看它们是如何工作的。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/05eccaa73ec20987ce8d47776fec62f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fjmn4oORGNZ63VjA4dyacQ.png"/></div></div></figure><p id="d2cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">立即调用的函数表达式，或IIFE，是一旦定义了函数就运行的函数。你也可能看到人们称它们为匿名函数。它们为我们提供了一种简单的方法来隔离函数中的变量，而不是全局隔离——之后，我们可以轻松地立即运行函数。当顶级<code class="fe ln lo lp lq b">await</code>不可用时，它们对于运行异步函数也很有用。</p><p id="c16e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然我们通常这样定义函数:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="e371" class="lv lw iq lq b gy lx ly l lz ma">let x = () =&gt; {<br/>    console.log("hello");<br/>}<br/>let y = function() {<br/>    console.log("world");</span><span id="45f1" class="lv lw iq lq b gy mb ly l lz ma">}</span><span id="c869" class="lv lw iq lq b gy mb ly l lz ma">function z() {<br/>    console.log("!");<br/>}</span><span id="c1e7" class="lv lw iq lq b gy mb ly l lz ma">x(); y(); z();</span></pre><p id="318c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">定义一个生命意味着调用我们编写的函数。所以我们可以这样定义生活:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="2f9b" class="lv lw iq lq b gy lx ly l lz ma">(function() {<br/>    console.log("hello world!")<br/>})()</span></pre><p id="71e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个函数是匿名的(它没有名字)，并且立即运行。您也可以使用箭头符号来运行它，如下所示:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="ba7f" class="lv lw iq lq b gy lx ly l lz ma">(() =&gt; {<br/>    console.log("hello world!")<br/>})()</span></pre><p id="861d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然上面的生命没有名字，但是你可以给它们起名字。但是，这实际上没有意义，因为你不能在其他地方调用它们。一旦函数以这种格式创建和调用，就不能在其他地方使用。这意味着在下面的例子中，试图在其他地方调用<code class="fe ln lo lp lq b">myFunction()</code>是行不通的:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="c559" class="lv lw iq lq b gy lx ly l lz ma">(function myFunction() {<br/>    console.log("hello world!")<br/>})()</span></pre><p id="4a1e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">匿名或立即调用的函数表达式可以用来封装异步行为。您仍然可以通过使用<code class="fe ln lo lp lq b">async</code>关键字来使生活异步:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="4bb7" class="lv lw iq lq b gy lx ly l lz ma">(async () =&gt; {<br/>    console.log("hello world!")<br/>})()</span></pre><h1 id="2114" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">在Javascript中给生命提供参数</h1><p id="13c8" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我们可以使用预期的格式将变量直接传递给生命。例如，下面我们有一个生活中的争论——那就是<code class="fe ln lo lp lq b">x</code>。我们可以通过使用最后一组括号为<code class="fe ln lo lp lq b">x</code>传入一个值:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="a290" class="lv lw iq lq b gy lx ly l lz ma">let getNumber = 10;<br/>(function(x) {<br/>    console.log(x + 10)<br/>})(getNumber) // console logs 20</span></pre><h1 id="3d15" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">生活中的防御性分号</h1><p id="c774" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">当在开头添加了分号的地方定义字符时，有时您可能会看到下面的代码。</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="8818" class="lv lw iq lq b gy lx ly l lz ma">;(() =&gt; {<br/>    return 10;<br/>})</span></pre><p id="8431" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这看起来很混乱，但这是为了避免一个奇怪的问题，如果前一行没有分号，函数的最后一行将被用作函数名。考虑以下代码:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="dfbb" class="lv lw iq lq b gy lx ly l lz ma">let b = 5<br/>let c = 10<br/>let a = b + c<br/>(function () {<br/>    return 10<br/>})();</span></pre><p id="aee0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果有人忘记在<code class="fe ln lo lp lq b">let a = b + c</code>上加上分号，或者如果您将生命导入到一行，而前一行不包含分号，您可能会遇到一些奇怪的错误。在上面的例子中，您将得到错误<code class="fe ln lo lp lq b">Uncaught TypeError: c is not a function</code>。这是因为代码将其解释为试图运行<code class="fe ln lo lp lq b">c</code>函数。本质上，代码是这样理解的:</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="bc5c" class="lv lw iq lq b gy lx ly l lz ma">c(() =&gt; {<br/>    return 10<br/>})()</span></pre><p id="e71b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，在生命开始时使用防御性分号是避免这种情况的简单方法。</p><h1 id="6448" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">结论</h1><p id="02a7" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">IIFEs在Javascript代码库中很常见，并且是执行许多事情的有用方法，比如异步代码和在特定的函数块中定义变量或代码。虽然现在在Javascript中有其他方法来实现这一点，但你仍然会在任何地方看到这些方法——所以理解它们是如何工作的很重要。</p><p id="4094" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="my">更多内容请看</em><a class="ae mz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">plain English . io</em></strong></a><em class="my">。报名参加我们的</em> <a class="ae mz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">免费周报</em> </strong> </a> <em class="my">。关注我们关于</em><a class="ae mz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">Twitter</em></strong></a><a class="ae mz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">LinkedIn</em></strong></a><em class="my"/><a class="ae mz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">YouTube</em></strong></a><em class="my"/><a class="ae mz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="my">不和</em> </strong> </a> <em class="my">。对增长黑客感兴趣？检查</em> <a class="ae mz" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="my">电路</em> </strong> </a> <em class="my">。</em></p></div></div>    
</body>
</html>