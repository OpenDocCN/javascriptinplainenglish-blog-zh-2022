<html>
<head>
<title>Build a Powerful Reusable Box Component in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中构建一个强大的可重用框组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-powerful-reusable-box-component-in-react-89f4e0354fa0?source=collection_archive---------2-----------------------#2022-02-27">https://javascript.plainenglish.io/build-a-powerful-reusable-box-component-in-react-89f4e0354fa0?source=collection_archive---------2-----------------------#2022-02-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4456" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不要根据名称来判断Box组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cda06df42e956da6f6a0325ef4923915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ByujDoa-3l2nfSUKJtQmFQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image credit — jsmanifest</figcaption></figure><p id="fc81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Box组件是React应用程序中使用的最基本但功能强大的组件之一。它们的行为很简单，但这种简单是将更复杂的组件组合在一起的基础，为创建现代用户界面提供了无限的可能性。</p><p id="6d13" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本帖中，我们将在React中构建一个强大的可重用框组件，只需在函数中进行一些简单的实现。</p><h1 id="34ae" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">写基础</h1><p id="8222" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">我们要做的第一件事是用最少的来定义我们的<code class="fe mp mq mr ms b">Box</code>组件，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="9031" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里已经有两个重要的东西可以看了:</p><ol class=""><li id="53ff" class="mv mw iq kx b ky kz lb lc le mx li my lm mz lq na nb nc nd bi translated">我们选择的元素是<code class="fe mp mq mr ms b">div</code>。这是DOM中最基本的元素，每个可重用组件都需要从它开始。默认情况下，它需要一个<em class="lr">完整的块</em>。如果元素占据了我们需要配置的整个宽度，这将更直观，而不是相反。</li><li id="8386" class="mv mw iq kx b ky ne lb nf le ng li nh lm ni lq na nb nc nd bi translated">我们将<em class="lr">析构</em> <code class="fe mp mq mr ms b">children</code>和<em class="lr">手动</em>应用于我们的<code class="fe mp mq mr ms b">Box</code>组件。我总是喜欢对<em class="lr">期望子节点</em>的每个组件都这样做，因为这是一个<em class="lr">清晰的指示</em>父节点将期望在某个React节点中传递。这也是一个最佳实践，这样做比在<code class="fe mp mq mr ms b">props</code>内部神秘地应用它有更多的好处。这种神秘性违背了React的声明性本质。</li></ol><p id="6207" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们可以在我们的<code class="fe mp mq mr ms b">App</code>组件中使用它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="59b9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">出于本教程的目的，我们将提前在父组件中传递一些样式，以便我们可以清楚地看到在进行过程中应用了什么:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/8780909ea41b213cd7e500b57ea8dcda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_uwrtvPxlOUKw1mp.png"/></div></div></figure><h1 id="8060" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">作为父母的父母</h1><p id="0a62" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">我们可重用的<code class="fe mp mq mr ms b">Box</code>组件<em class="lr">可以在这里完成</em>，但是如果我们想在不降低其当前可重用能力的情况下向其注入更多的能力，我们可以定制我们的<code class="fe mp mq mr ms b">Box</code>实现来接受更多的道具并处理它们<em class="lr">而不让父组件处理它们</em>。</p><p id="e0ad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有些情况下，父<em class="lr">应该</em>处理一些道具，但它们应该是<em class="lr">希望</em>处理它们，比如能够配置上面我们已经有的<code class="fe mp mq mr ms b">style</code>对象。</p><p id="66bc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们的<code class="fe mp mq mr ms b">App</code>组件中，我们应用了一些风格道具:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="7fbe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们为什么要这么做？因为如果我们没有我们的<code class="fe mp mq mr ms b">Box</code>会是这个样子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/c98cca31cccc718de3aeaa3c6ff93945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oKDt-vy5Yns91m01.png"/></div></div></figure><p id="e0b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">想想吧。导入我们的Box组件的每个组件会一直传入<code class="fe mp mq mr ms b">style</code>吗？最有可能的情况是，他们可以只呈现一个<code class="fe mp mq mr ms b">div</code>元素。</p><p id="7ad5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以允许传递一些样式属性，而不需要父类每次都声明一个<code class="fe mp mq mr ms b">style</code>对象:</p><p id="bd42" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">(注意:我添加了额外的道具，我将在这篇文章的后面使用)</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="50ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这样，我们的组件就不必手动传递整个<code class="fe mp mq mr ms b">style</code>对象来改变一些样式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="a983" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还确保在我们的<code class="fe mp mq mr ms b">Box</code>组件中，我们将<code class="fe mp mq mr ms b">style</code>道具放在最后，这样每当父组件想要时，它就可以覆盖其他<em class="lr">:</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/041091ea55cc9f3661cad462afa84890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GNdOqQtQPWdgRsJL.png"/></div></div></figure><p id="bb9b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是一个非常方便的策略，像<a class="ae nm" href="https://chakra-ui.com/" rel="noopener ugc nofollow" target="_blank"> @chakra-ui/react </a>这样的流行库就是这样做的，它改善了开发体验(他们已经完全定制了这一点，本文不会这样做，因为这里的重点是引导用户走上那条道路)。</p><p id="1cc8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它更快、更容易，减少了代码和样板文件。</p><p id="b8c8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们使用我们的<code class="fe mp mq mr ms b">Box</code>组件来创建一个<em class="lr">卡</em>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/f6cda5cbf0e388c9218ab9a5253ed7da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KEq3Qzeyl99mQNdV.png"/></div></div></figure><p id="dfb7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">(女头像取自<a class="ae nm" href="https://www.flaticon.com/free-icons/brown-hair" rel="noopener ugc nofollow" target="_blank"> Freepik </a>)</p><p id="0fa9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">看起来已经很好了！但是我们需要为我们的女性形象应用一些间距、字体样式和边框，这很容易做到，因为我们在<code class="fe mp mq mr ms b">Box</code>中做得更容易。</p><h1 id="fce6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">多做事，少做事</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/3b5ce89940c0492555b6b9cd2f915478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*j8eEdEtkhGj8yuT0.png"/></div></div></figure><p id="4d14" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以进一步优化我们的<code class="fe mp mq mr ms b">Box</code>组件，通过默认它的属性，让父组件更容易使用。每个应用程序都有一组默认的<em class="lr">字体</em>样式供整个应用程序使用，所以我们将<code class="fe mp mq mr ms b">Box</code>字体默认为这些属性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="89fa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们可以删除<code class="fe mp mq mr ms b">App</code>中的一些代码，因为默认情况下<code class="fe mp mq mr ms b">Box</code>会处理它们:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b8bf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的<code class="fe mp mq mr ms b">Box</code>组件的伟大之处在于，它可以由<em class="lr">组合</em>来创建<em class="lr">更复杂的可重用</em>组件。这就是我们的可重用组件<em class="lr">真正</em>发光的地方，因为它已经抽象了基本的样板文件，所以它们可以在任何地方使用，而不用担心基本的必需品:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="eefc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">当样板文件反击时，你的反击会更猛烈</h1><p id="e099" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">我们今天到此为止。但是如果你仔细观察，我们开始看到<code class="fe mp mq mr ms b">Box</code>无处不在，所以它最终再次带来了之前写样板代码的问题。</p><p id="728a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有些React库利用了一个强大的策略，我们可以将它用于我们的<code class="fe mp mq mr ms b">Box</code>组件。我们可以声明一个参数，允许父元素将自定义的React元素、元素标记或组件作为属性传入:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/e987f0cb4b32d2ac95f82e65665e43f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*d9R0-1av6DAaUOhZ.png"/></div></div></figure><h1 id="0ee7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">资源更少</h1><p id="118c" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">有了这些，在像我们的<code class="fe mp mq mr ms b">Card</code>这样的地方使用它会变得很方便:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/6474ed822c1fa2ba514cab74cfe4d9d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nd06NyTbWxuf53Pq.png"/></div></div></figure><p id="c015" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这样做有一个好处:我们减少了一个在虚拟dom中创建的组件。在更多组件中广泛使用时，你的GPU会感谢你的。</p><h1 id="48eb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">助长懒惰</h1><p id="1203" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">还有一件事。还能让用户以偷懒的方式应用道具。例如下面，当我们渲染我们的头像道具时，因为<code class="fe mp mq mr ms b">Box</code>可以是一个组件，我们可以直接利用它，像这样超级懒:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="fa32" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">事先调整</h1><p id="d862" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">我们可以添加到<code class="fe mp mq mr ms b">Box</code>的另一个有用的东西是允许对某些道具进行一些“预设”。</p><p id="c2cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，我们可以允许将<code class="fe mp mq mr ms b">fontSize</code>作为<code class="fe mp mq mr ms b">'xl'</code>、<code class="fe mp mq mr ms b">'lg'</code>、<code class="fe mp mq mr ms b">'md'</code>、<code class="fe mp mq mr ms b">'sm'</code>或<code class="fe mp mq mr ms b">'xs'</code>传入。如果都没有提供，那么它将只应用提供的值。这进一步推动了<code class="fe mp mq mr ms b">Box</code>的功能，使其更易于使用:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="e7a7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mp mq mr ms b">Card</code>组件甚至不需要知道它，只需要转发道具就可以获得它提供的好处。例如，在处理<code class="fe mp mq mr ms b">title</code>道具时，它可以只接收一个对象并结束一天的工作:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/5a3b1900e27e0b926a570a0cc948b59c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2WxHjxsuoqRtax8M.png"/></div></div></figure><h1 id="e8cd" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">将它们放在一起，使其与您的应用程序相结合</h1><p id="9cbb" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">这里我想提到的最后一件事是我喜欢为我的应用程序专用的<code class="fe mp mq mr ms b">Box</code>组件做的事情。创建一个<code class="fe mp mq mr ms b">mode</code>道具是很有用的，它会根据情况切换样式，从而触发不同的<em class="lr"/>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="4f31" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/f570f4b1a4d52cf84f272042912e154b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BnLjx8-YhI1yvNo8.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="ffbc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/ec8664205de3359fe7b983d889f45154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XScsdbS3Z5sQ3TjV.png"/></div></div></figure><p id="4351" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当实现定制样式时，最好不要调整任何宽度/高度或任何位置，而是允许父母定制它们。否则，当他们遇到像重叠元素这样的问题时，他们很难将您的<code class="fe mp mq mr ms b">Box</code>与他们自己的组件结合起来。</p><h1 id="525b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="8699" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">本帖到此结束！我发现你发现这是有价值的，并期待在未来更多！</p><p id="65aa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">更多内容请看</em><a class="ae nm" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">plain English . io</em></strong></a><em class="lr">。报名参加我们的</em> <a class="ae nm" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="lr">免费周报</em> </strong> </a> <em class="lr">。关注我们关于</em><a class="ae nm" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">Twitter</em></strong></a><em class="lr">和</em><a class="ae nm" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">LinkedIn</em></strong></a><em class="lr">。加入我们的</em> <a class="ae nm" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="lr">社区不和谐</em> </strong> </a> <em class="lr">。</em></p></div></div>    
</body>
</html>