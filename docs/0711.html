<html>
<head>
<title>How to Create API Documentation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建API文档</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-api-documentation-eb4561ab6f4f?source=collection_archive---------17-----------------------#2022-02-08">https://javascript.plainenglish.io/how-to-create-api-documentation-eb4561ab6f4f?source=collection_archive---------17-----------------------#2022-02-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a4bf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">第2部分:建立您的第一个API文档</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fc2e2d770a1e499894e92103ef170c3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*STNlG8HZvSyIDvdu"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sigmund</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1e58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文是本系列文章的第二部分。如果你错过了上一篇文章，你可以在下面找到它。我们还研究了各种可用的API规范。</p><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-api-documentation-83941174e6b2"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如何创建API文档</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">第1部分:创建您的第一个API文档</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><p id="c998" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我们将卷起袖子，开始记录一个真正的API。为此，我们将利用OpenAPI规范，因为它是最常用的规范。OpenAPI也有很多围绕它的工具，这些工具上有惊人的资源，可以让你快速上手。</p><h2 id="dac6" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated"><strong class="ak">我们的API工具</strong></h2><p id="940a" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我们将利用一个包管理器，它将允许我们指定API的结构。这将包括数据模式、端点描述、参数描述、定义、安全性、主体/查询参数、响应、状态代码和请求结构。</p><p id="3563" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个工具利用了一个隐藏的swagger规范来处理所有这些。这个包将为我们生成一个包含所有API文档信息的<strong class="ky ir"> <em class="ni"> swager.json </em> </strong>文件。自动生成的文件将遵循swagger格式和规范。</p><p id="4158" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ni">注意:</em> </strong>这是一个JavaScript包，我们将记录一个基于NodeJs的应用程序。</p><h2 id="3f84" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated"><strong class="ak">安装和设置</strong></h2><p id="e80e" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">使用创建快速脚手架项目。</p><p id="522f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">初始化新的应用程序。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="ba13" class="mk ml iq nk b gy no np l nq nr">$ npm inint -y</span></pre><p id="d012" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装express</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="4689" class="mk ml iq nk b gy no np l nq nr">$ npm install express –save</span></pre><p id="6ea5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在目录中，创建一个文件夹，并将其命名为src。在src文件夹中，创建两个文件，即app.js和server.js。</p><h2 id="9d37" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated"><strong class="ak"> app.js </strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="3491" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">App.js将是我们的应用入口。Server.js将运行我们的应用程序开发服务器。</p><p id="5515" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> server.js </strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="635b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经用swagger配置了API文档。在下一部分中，我们将研究如何在处理请求和响应的控制器或路由上添加各种注释。</p><p id="ffe2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想记录一个现有的项目，请继续安装它。</p><pre class="kg kh ki kj gt nj nk nl nm aw nn bi"><span id="7921" class="mk ml iq nk b gy no np l nq nr">$ npm install — save-dev swagger-autogen</span></pre><p id="44f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在应用程序的根目录下，创建一个名为<strong class="ky ir"> <em class="ni"> swagger.js </em> </strong>的文件，并添加以下代码。</p><p id="2b92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">配置swagger.js </strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="419e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这应该是我们的API自动生成的根条目文件。这里我们将为<strong class="ky ir"><em class="ni">swagger-autogen</em></strong>指定文件，以查找我们的注释并生成它们。<br/>为了确保<strong class="ky ir"><em class="ni">swagger-autogen</em></strong>找到并记录我们的API，我们将为其提供注释。</p><p id="116e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些注释将具有与各种端点、请求结构和响应相关的各种描述。您需要将这些注释放在处理API请求的函数中。注释可以放在控制器函数内部。</p><p id="c7d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们可以使用swagger注释来注释掉各种API。注释应该包含在处理控制器和路由请求的函数中。</p><p id="3b2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Swagger-autogen将在运行时生成我们的API，并将其格式化为OpenAPI规范。</p><h2 id="85af" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated"><strong class="ak">出发前</strong></h2><p id="a690" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">在下一篇文章中，我们将对路线和控制器添加必要的注释。我们还将深入研究如何处理必要的查询和主体参数，以便自动生成swagger OpenAPI。</p><p id="9803" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每周三，我都会发送一封独家邮件，里面有我发现的有用的、与技术写作相关的技巧、文章、应用、书籍和想法。</p><p id="0a68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://artisanal-thinker-2556.ck.page/6e2ba71172" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ni">加入像你一样想提高技术写作水平的人吧。</em> </strong> </a></p><h2 id="4811" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated"><strong class="ak">更多阅读内容</strong></h2><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-api-documentation-83941174e6b2"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如何创建API文档</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">第1部分:创建您的第一个API文档</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-effectively-collaborate-with-git-github-as-a-software-developer-f3e073b46ed5"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">作为软件开发人员，如何有效地与Git/GitHub协作</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">有效协作的Git/GitHub清单</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="nu l mg mh mi me mj kp lv"/></div></div></a></div><p id="c13e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ni">更多内容看</em> <a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ni">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ni">免费周报</em> </strong> </a> <em class="ni">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ni">社区不和谐</em> </strong> </a> <em class="ni">获得独家获取写作机会和建议。</em></strong></a></p><h2 id="c855" class="mk ml iq bd mm mn mo dn mp mq mr dp ms lf mt mu mv lj mw mx my ln mz na nb nc bi translated">进一步阅读</h2><div class="ls lt gp gr lu lv"><a href="https://plainenglish.io/blog/5-dev-tools-for-documenting-react-code-like-a-pro" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">像专家一样记录React代码的5个开发工具</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">React作为构建复杂前端应用程序的库非常有用，但它也需要大量的工具…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">简明英语. io</p></div></div><div class="me l"><div class="nv l mg mh mi me mj kp lv"/></div></div></a></div><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/bad-documentation-is-tech-debt-heres-how-you-solve-it-ce1d0b3ee760"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">糟糕的文档是技术债务——以下是解决方法</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">如果你想快速行动，尽可能少破坏东西，文档文化是至关重要的，那么为什么好的文档…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="nw l mg mh mi me mj kp lv"/></div></div></a></div></div></div>    
</body>
</html>