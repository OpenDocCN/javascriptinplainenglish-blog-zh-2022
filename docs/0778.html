<html>
<head>
<title>How to Change a Device’s Screen Orientation using Expo in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中使用Expo更改设备的屏幕方向</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-change-a-devices-screen-orientation-using-expo-in-react-native-af69c10032fb?source=collection_archive---------4-----------------------#2022-02-14">https://javascript.plainenglish.io/how-to-change-a-devices-screen-orientation-using-expo-in-react-native-af69c10032fb?source=collection_archive---------4-----------------------#2022-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="80e1" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/@bookeraziz/list/react-native-3e476cc05fe3" rel="noopener">反应土著</a></h2><div class=""/><div class=""><h2 id="d1bc" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">React Native中处理屏幕方向的初学者指南</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/1980cb826fa3848afda8df86befc401f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ewy796c_6QmypcYQ"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@maxcodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Maxwell Nelson</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="52a1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在今天的文章中，我将向您展示在React原生应用中处理屏幕方向的两种不同方法。第一种方式是使用<code class="fe mb mc md me b"><a class="ae le" href="https://www.npmjs.com/package/expo-screen-orientation" rel="noopener ugc nofollow" target="_blank">expo-screen-orientaiton</a></code>包，第二种方式是允许expo处理我们的应用程序何时应该被旋转。</p><h1 id="37fe" class="mf mg iq bd mh mi mj mk ml mm mn mo mp kf mq kg mr ki ms kj mt kl mu km mv mw bi translated">项目设置</h1><h2 id="5def" class="mx mg iq bd mh my mz dn ml na nb dp mp lo nc nd mr ls ne nf mt lw ng nh mv iw bi translated">添加应用程序样板</h2><p id="1a5d" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nk lq lr ls nl lu lv lw nm ly lz ma ij bi translated">在我们开始阅读设备定位之前。我们首先需要一个应用程序。将以下样板代码粘贴到app.js文件中:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">App Boilerplate</figcaption></figure><p id="5b1a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您的屏幕应该是这样的:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi np"><img src="../Images/72839063c6a8a2a9e186d197da9c7af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*Lfes-Hwlds7JFSt3odJ5fA.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Screenshot of what your HomeScreen should look like</figcaption></figure><h2 id="0738" class="mx mg iq bd mh my mz dn ml na nb dp mp lo nc nd mr ls ne nf mt lw ng nh mv iw bi translated">导入Expo屏幕方向</h2><p id="1e0e" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nk lq lr ls nl lu lv lw nm ly lz ma ij bi translated">在我们开始读取我们设备的屏幕方向之前，我们首先必须安装<code class="fe mb mc md me b"><a class="ae le" href="https://www.npmjs.com/package/expo-screen-orientation" rel="noopener ugc nofollow" target="_blank">expo-screen-orientaiton</a></code>包。在终端中运行以下命令:</p><pre class="kp kq kr ks gt nq me nr ns aw nt bi"><span id="80c8" class="mx mg iq me b gy nu nv l nw nx">expo install expo-screen-orientation</span></pre><p id="df60" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">并将以下导入语句添加到app.js文件的顶部:</p><pre class="kp kq kr ks gt nq me nr ns aw nt bi"><span id="8009" class="mx mg iq me b gy nu nv l nw nx">import * as ScreenOrientation from 'expo-screen-orientation'</span></pre><h1 id="fa64" class="mf mg iq bd mh mi mj mk ml mm mn mo mp kf mq kg mr ki ms kj mt kl mu km mv mw bi translated">读取屏幕方向</h1><h2 id="adfb" class="mx mg iq bd mh my mz dn ml na nb dp mp lo nc nd mr ls ne nf mt lw ng nh mv iw bi translated">存放我们的设备方向</h2><p id="4654" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nk lq lr ls nl lu lv lw nm ly lz ma ij bi translated">我们将使用<strong class="lh ja"> getOrientaitonAsync </strong>函数来读取屏幕的方向。getOrientationAsync 返回一个承诺，指定我们的设备是处于横向模式还是纵向模式。</p><p id="92e9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们需要一种方法来保存我们的设备的方向。为此，我们将使用useState钩子。</p><p id="269a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">导入<a class="ae le" href="https://www.npmjs.com/package/expo-screen-orientation" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> </strong> </a> <strong class="lh ja">使用项目顶部的状态</strong>:</p><pre class="kp kq kr ks gt nq me nr ns aw nt bi"><span id="982b" class="mx mg iq me b gy nu nv l nw nx">import {useState} from 'react'</span></pre><p id="d71b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">并添加以下代码:</p><pre class="kp kq kr ks gt nq me nr ns aw nt bi"><span id="3635" class="mx mg iq me b gy nu nv l nw nx">const [orientationIsLandscape,setOrientation]=useState(true)</span></pre><p id="e893" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您的代码应该如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Importing and Using the useState Hook</figcaption></figure></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="c551" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">旋转你的app其实有两种<strong class="lh ja"> <em class="of">方式。</em></strong></p><p id="7ddd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">第一种</strong>方式是通过调用getOrientationAsync <strong class="lh ja"> </strong>函数手动改变布局。这可以通过点击按钮后创建并调用一个异步函数来实现。</p><p id="8004" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">第二种方法是让expo在用户倾斜设备时旋转我们的应用程序。这只需要对app.json文件做一点小小的修改。</p><p id="6d02" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我会向你展示两种方式。</p><h2 id="bf30" class="mx mg iq bd mh my mz dn ml na nb dp mp lo nc nd mr ls ne nf mt lw ng nh mv iw bi translated">使用getOrientationAsync更改方向</h2><p id="c90b" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nk lq lr ls nl lu lv lw nm ly lz ma ij bi translated">要使用getorientationasync更改我们的屏幕方向，我们需要两个函数:一个toggleOrientation函数和一个async changeScreenOrientation函数。</p><p id="7b06" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们的toggleOrientaiton函数会将orientationIsLandscape状态设置为其相反的值。</p><p id="57bd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果它是真的，orientationIsLandscape就会变成假的，反之亦然。这个函数也将调用changeScreenOrientation。</p><p id="6204" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">changeScreenOrientation将实际处理我们的屏幕旋转。</p><p id="28f4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这方面的代码如下:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Our Two functions</figcaption></figure><p id="ffbf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们必须将toggleOrientation函数添加到按钮的onPress中。</p><pre class="kp kq kr ks gt nq me nr ns aw nt bi"><span id="66a1" class="mx mg iq me b gy nu nv l nw nx">&lt;Button title="Change Orientation" onPress={toggleOrientation} /&gt;</span></pre><p id="89d3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，一旦点击按钮，我们的应用程序将从纵向模式旋转到横向模式。如果你再次按下按钮，应用程序将旋转回到纵向模式。</p><h2 id="6f1f" class="mx mg iq bd mh my mz dn ml na nb dp mp lo nc nd mr ls ne nf mt lw ng nh mv iw bi translated">让Expo处理屏幕方向</h2><p id="0307" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nk lq lr ls nl lu lv lw nm ly lz ma ij bi translated">为了让expo处理屏幕方向的改变，我们必须编辑app.json文件。进入你的app.json文件，删除标题为<strong class="lh ja"> orientation的那一行。</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Delete Line 5 Of the App.json File</figcaption></figure><p id="3e54" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，如果你倾斜你的设备，你的应用程序将自动旋转。如果您的应用程序不旋转，您可能需要在设备的设置中启用自动旋转。</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><h1 id="379f" class="mf mg iq bd mh mi og mk ml mm oh mo mp kf oi kg mr ki oj kj mt kl ok km mv mw bi translated">结论</h1><p id="4a4d" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nk lq lr ls nl lu lv lw nm ly lz ma ij bi translated">感谢您阅读完我的文章<strong class="lh ja">“如何在React Native中使用Expo更改设备屏幕方向”</strong>。如果你有任何问题，请随意提问，我会尽快回答。</p><p id="aebc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我希望你有美好的一天。如果你刚接触媒体，你可以点击这里的<a class="ae le" href="https://bookeraziz.medium.com/membership" rel="noopener">链接</a>加入。</p><h2 id="f48c" class="mx mg iq bd mh my mz dn ml na nb dp mp lo nc nd mr ls ne nf mt lw ng nh mv iw bi translated">资源</h2><ol class=""><li id="3aec" class="ol om iq lh b li ni ll nj lo on ls oo lw op ma oq or os ot bi translated"><a class="ae le" href="https://github.com/AzizBooker/rn-screen-orientation-example" rel="noopener ugc nofollow" target="_blank"> Github项目链接</a></li><li id="728c" class="ol om iq lh b li ou ll ov lo ow ls ox lw oy ma oq or os ot bi translated"><a class="ae le" href="https://www.npmjs.com/package/expo-screen-orientation" rel="noopener ugc nofollow" target="_blank">世博屏幕方向</a></li></ol><p id="7e67" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="of">更多内容看</em> <a class="ae le" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> <em class="of">说白了。报名参加我们的</em> <a class="ae le" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> <em class="of">免费周报</em> </strong> </a> <em class="of">。在我们的</em> <a class="ae le" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> <em class="of">社区不和谐</em> </strong> </a> <em class="of">获得独家获取写作机会和建议。</em></strong></a></p></div></div>    
</body>
</html>