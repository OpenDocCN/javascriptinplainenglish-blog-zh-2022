<html>
<head>
<title>Better Developer Velocity with Shared JavaScript Utility Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用共享的JavaScript实用函数提高开发速度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/better-developer-velocity-with-shared-javascript-utility-functions-8a528d8d1319?source=collection_archive---------8-----------------------#2022-08-03">https://javascript.plainenglish.io/better-developer-velocity-with-shared-javascript-utility-functions-8a528d8d1319?source=collection_archive---------8-----------------------#2022-08-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3847" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">保持代码干燥的实用指南，以及跨项目正确重用JS helper函数的最佳实践</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8286457245bae20083e72c8c14068efd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O9sotVaFjn94yaHh.jpg"/></div></div></figure><p id="fabd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">助手/实用程序功能的行业标准方法是维护一个专用文件夹，根据功能和强相关性标准对它们进行命名和分组，并根据需要隐式导出/导入每个功能。</p><p id="dafd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">到目前为止，一切顺利。但是<strong class="kq io">效用函数是非上下文特定的</strong>。</p><p id="4abe" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当然，您会在其他项目中重用它们，将它们传递给团队成员，甚至在线共享它们，对吗？</p><p id="c3bc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是从以前的项目中复制粘贴代码是一种幼稚的解决方案，不仅扩展性差，而且还会产生许多代码可读性和维护问题。</p><p id="4481" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">那么分享效用函数的正确方法是什么呢？在我看来，这里有三个从差到好的解决方案。</p><blockquote class="lk ll lm"><p id="6036" class="ko kp ln kq b kr ks jo kt ku kv jr kw lo ky kz la lp lc ld le lq lg lh li lj ig bi translated"><em class="in">💡</em>使用npm并不是其中任何一个的严格要求——您可以使用任何其他包管理器——yarn、chocolatey、pnpm等。</p></blockquote><h1 id="0b0a" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">1.将您的模块发布到您自己范围下的NPM注册中心</h1><p id="7841" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">就像罐头上写的一样。你应该这么做:</p><ul class=""><li id="238c" class="mo mp in kq b kr ks ku kv kx mq lb mr lf ms lj mt mu mv mw bi translated">用<code class="fe mx my mz na b">npm init</code>初始化包目录，添加名称和描述，并用您的用户名来确定包的范围。</li><li id="41f9" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">将您的助手/实用函数放入包入口点(默认情况下是<code class="fe mx my mz na b">index.js</code>)，并导出它们。</li><li id="3732" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">在NPM网站上创建一个帐户，验证您的电子邮件，然后使用<code class="fe mx my mz na b">npm login</code>通过CLI登录。</li><li id="11d6" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">一切就绪！用<code class="fe mx my mz na b">npm publish --access=public</code>发布</li></ul><p id="2703" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你将拥有无限的公共访问包和基本的免费层，但这并不总是一个选择，因为你工作的大多数企业项目不会是开源的(即使你的项目是开源的，NPM也不太适合被发现。)</p><p id="89d3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">没有未上市的NPM包这种东西，除非你<a class="ae ng" href="https://www.npmjs.com/products" rel="noopener ugc nofollow" target="_blank">付费</a>，否则你不能发布私人包。即使这样，也不可能进行粒度访问控制或协作。</p><blockquote class="lk ll lm"><p id="e0d7" class="ko kp ln kq b kr ks jo kt ku kv jr kw lo ky kz la lp lc ld le lq lg lh li lj ig bi translated"><em class="in">💡</em> NPM最近被Github收购，Github专注于让它成为一个公共注册中心。Github包将成为私人包的选择，每个帐户每月使用500MB存储空间/1GB数据传输(<strong class="kq io">而不是</strong>每个包)。</p></blockquote><h1 id="5a25" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">2.上传一个秘密网址的tarball</h1><p id="0339" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">这利用了这样一个事实，即像NPM这样的包管理器可以安装从提供的URL 获取的<strong class="kq io">档案。你应该这么做:</strong></p><ul class=""><li id="b767" class="mo mp in kq b kr ks ku kv kx mq lb mr lf ms lj mt mu mv mw bi translated">首先，通常的——<code class="fe mx my mz na b">npm init </code>包目录，包的名称和描述，包括版本信息等。</li><li id="a285" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">从您的包目录中创建一个<a class="ae ng" href="https://en.wikipedia.org/wiki/Tarball" rel="noopener ugc nofollow" target="_blank"> tarball </a>(一个. tar归档文件)，您的函数位于其中的一个子文件夹中(类似于<code class="fe mx my mz na b">package/</code>)。下面是命令。(如果在Windows上使用Powershell)<br/><code class="fe mx my mz na b">tar cvfz FILENAME.tar.gz DIRECTORY/</code></li><li id="17f9" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">将这个档案上传到任何你想上传的地方——你甚至可以自己管理它。然后，您可以自由地使用任何访问控制方法来隔离它。</li><li id="34ee" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">每当你在一个项目中需要它的时候，就像这样通过NPM安装它，并在需要的地方导入它:</li></ul><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="3c0b" class="nl ls in na b gy nm nn l no np">npm i your-url.com/FILENAME</span></pre><p id="c1e8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，适当的访问控制！但是有了条件——<strong class="kq io">这就完全是你的责任了</strong>。除了软件包安装过程，NPM不参与任何事情。这种方法是在拥有未列出+私有包和访问控制之间的一种折衷，代价是<a class="ae ng" href="https://github.com/npm/node-semver" rel="noopener ugc nofollow" target="_blank">语义版本</a>和自动更新。</p><p id="b3df" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">不用说，可发现性将是不存在的，所以这只对私有回购有用；严格的内部用例。</p><h1 id="cc1b" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">3.通过Bit版本化和发布</h1><p id="1750" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">那么，什么是理想的解决方案呢？吸取了前两个解决方案的不足，以下是我们的新标准:</p><ul class=""><li id="917b" class="mo mp in kq b kr ks ku kv kx mq lb mr lf ms lj mt mu mv mw bi translated">发布功能，并简化共享/导入功能的流程。</li><li id="dbb8" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">拥有访问控制、自动依赖管理和版本+更新。</li><li id="072e" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj mt mu mv mw bi translated">让它容易被发现和浏览，改善开发人员的体验。</li></ul><p id="5d42" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">钻头将完全符合我们的需求。它是一个用于发布、共享和发现新组件的开源工具链和中心——最重要的是，它还支持Node.js模块。我们可以将它用于普通的JS实用函数——忠于可组合软件开发的主题。</p><p id="bcb4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们创建并共享几个字符串实用函数——包括测试、文档和演示。要看成品，请前往https://bit.cloud/sixthextinction/shared-utils<a class="ae ng" href="https://bit.cloud/sixthextinction/shared-utils" rel="noopener ugc nofollow" target="_blank">查看。如果你愿意，也可以随意叉它们！</a></p><h2 id="362b" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">步骤0:先决条件</h2><p id="d1c3" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">首先，确保您已经安装了二进制位。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="30e9" class="nl ls in na b gy nm nn l no np">npx <a class="ae ng" href="http://twitter.com/teambit/bvm" rel="noopener ugc nofollow" target="_blank">@teambit/bvm</a> install</span></pre><p id="c302" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">此外，你需要建立一个<a class="ae ng" href="https://bit.cloud/" rel="noopener ugc nofollow" target="_blank"> bit.cloud </a>账户，并且知道如何在那里打开一个远程scope。不要担心这个——Bit会指导你完成这个过程。</p><blockquote class="lk ll lm"><p id="8148" class="ko kp ln kq b kr ks jo kt ku kv jr kw lo ky kz la lp lc ld le lq lg lh li lj ig bi translated"><em class="in">💡</em> <a class="ae ng" href="https://bit.dev/docs/scope/scope-overview" rel="noopener ugc nofollow" target="_blank">作用域</a>允许来自不同组织的同名包通过命名空间共存。</p></blockquote><h2 id="65be" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">步骤1:创建一个Bit工作空间</h2><p id="87ac" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">导航到您的项目文件夹，并在那里初始化一个Bit工作空间。这很像<code class="fe mx my mz na b">npm init</code>——创建一个暂存区，让我们在一个地方构建、导入、预览、修改可组合代码，并管理其依赖关系。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="1420" class="nl ls in na b gy nm nn l no np">bit init</span></pre><p id="45b9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后，在您选择的文本编辑器中打开新创建的<strong class="kq io"> workspace.jsonc </strong>文件，并将<code class="fe mx my mz na b">defaultScope</code>属性的值更改为<code class="fe mx my mz na b">your-bit-cloud-username.your-scope-name</code>。替换您自己的值，但要注意点分隔符！</p><h2 id="e8fb" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">步骤2:我们的第一个效用函数——归一化</h2><p id="ac13" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">在您的工作区文件夹中，运行以下命令:</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="2126" class="nl ls in na b gy nm nn l no np">bit create node utils/normalize</span></pre><p id="f831" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这将创建一堆文件和目录。让我们一次解决一个问题。在<code class="fe mx my mz na b"> ./your-remote-scope/utils/normalize/</code>处的<strong class="kq io"> normalize.ts </strong>是你实际要导出的效用函数。所以让我们先编码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">Simple enough; we’re using a regex pattern, replacing all unicode characters in the range U+0300 — U+036F with an empty character.</figcaption></figure><p id="03f5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这将删除所有组合字符的unicode块，从而使我们的字符串正常化。</p><blockquote class="lk ll lm"><p id="92e3" class="ko kp ln kq b kr ks jo kt ku kv jr kw lo ky kz la lp lc ld le lq lg lh li lj ig bi translated"><em class="in">💡</em>在<code class="fe mx my mz na b">bit create</code>之后的<code class="fe mx my mz na b">node</code>参数告诉Bit创建一个Node.js模块——相对于<a class="ae ng" href="https://bit.dev/docs/getting-started/composing/creating-components" rel="noopener ugc nofollow" target="_blank">其他你可以使用的</a>——比如React、React Native、MDX等等。使用<code class="fe mx my mz na b">bit templates</code>命令了解更多信息！</p></blockquote><h2 id="66e5" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">步骤3:测试、文档和作文。</h2><p id="938a" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">如果没有适当的单元测试、文档，或者展示其工作原理的快速演示，我们的效用函数对任何人都没有用。首先:用Jest进行单元测试。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">Unit tests should be self-explanatory for anyone consuming our module, even if not exhaustive.</figcaption></figure><p id="3228" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">下一个，医生。Bit支持<a class="ae ng" href="https://mdxjs.com/" rel="noopener ugc nofollow" target="_blank"> MDX </a>，因此使用<code class="fe mx my mz na b">ts</code>和<code class="fe mx my mz na b">tsx live</code>降价使您的文档<strong class="kq io">可视化</strong>。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="57a1" class="nl ls in na b gy nm nn l no np">---<br/>labels: ['normalize', 'string utils', 'remove accents']<br/>description: 'A utility function that removes accents and diacritics from a given string'<br/>---<br/><br/>import {normalize} from "./normalize";<br/><br/>Use this function to normalize a string by removing the unicode block of combined diacritical characters (aka accents).<br/>U+030 - U+036F<br/>Read this for more info : https://en.wikipedia.org/wiki/Combining_Diacritical_Marks<br/><br/>API:<br/><br/>```ts<br/>function normalize(): string;<br/>```<br/><br/>```tsx live<br/><br/>&lt;div&gt;For example, "crème pâtissière" will be normalized to "{normalize("crème pâtissière")}"&lt;/div&gt;<br/>```<br/><br/>This function leaves regular characters untouched.<br/><br/>```tsx live<br/><br/>&lt;div&gt;{normalize("This is a normal string with no diacritics")}&lt;/div&gt;<br/>```</span></pre><p id="2446" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">甚至可以直接在MDX文件中使用HTML和React代码。点击阅读更多关于那个<a class="ae ng" href="https://bit.cloud/blog/meet-component-driven-content-applicable-composable-l24cw7ku" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="daa2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，组合——最小的JSX/TSX来预览你的代码在现实世界中的样子。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">Think of compositions as the image gallery/carousel on a product’s landing page.</figcaption></figure><h2 id="23e5" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">步骤4:版本和发布</h2><p id="1a70" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">全部完成！最后一步是标记并导出我们的效用函数。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="5c71" class="nl ls in na b gy nm nn l no np">bit tag --message “First version”</span></pre><p id="f0bb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">标记变更运行我们项目的构建管道— —编译我们的代码并生成一个包，安装依赖项，运行我们的单元测试——并在这个过程结束时创建一个可导出的快照，完成<a class="ae ng" href="https://github.com/npm/node-semver" rel="noopener ugc nofollow" target="_blank">语义版本</a>(与NPM使用的版本相同)以方便依赖项管理。</p><blockquote class="lk ll lm"><p id="5e8f" class="ko kp ln kq b kr ks jo kt ku kv jr kw lo ky kz la lp lc ld le lq lg lh li lj ig bi translated"><em class="in">💡</em>如果您在这个阶段得到任何错误，您可能会丢失依赖项。运行<code class="fe mx my mz na b">bit install</code>来修复这些问题。</p></blockquote><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="ad00" class="nl ls in na b gy nm nn l no np">new components<br/>(first version for components)</span><span id="01ea" class="nl ls in na b gy oh nn l no np">&gt; utils/normalize@0.0.1</span></pre><p id="1ee4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们继续将这个快照发布到我们的远程范围。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="2087" class="nl ls in na b gy nm nn l no np">bit export</span></pre><p id="169b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要查看这个已发布的实用函数在测试、合成和MDX文档中的样子，请访问:</p><div class="oi oj gp gr ok ol"><a href="https://bit.cloud/sixthextinction/shared-utils/string-utils/normalize" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">共享实用程序/字符串实用程序/正常化</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">从给定字符串中删除重音符号和音调符号的实用函数。标有normalize，字符串实用程序…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">比特云</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz km ol"/></div></div></a></div><h2 id="ec3d" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">步骤5:模拟与我们的第二个实用函数——Sanitize的协作</h2><p id="be9b" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">我们到此为止。我们现在可以将<code class="fe mx my mz na b">normalize</code>包<code class="fe mx my mz na b">npm install</code>(在<a class="ae ng" href="https://bit.dev/docs/packages/npmrc" rel="noopener ugc nofollow" target="_blank">将我们的远程作用域的注册表添加到npm配置</a>之后)，导入到我们的项目中，并根据需要使用它。</p><p id="18c7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">不过，在今天结束之前，让我们来看一个模拟的真实场景:<strong class="kq io">嵌套实用函数</strong>。如何创建另一个使用这个函数作为依赖项的实用函数，然后发布它，就像您创建这个函数一样？</p><p id="8b8e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们的第二个实用函数(在一个全新的目录中)是一个字符串杀毒器，它从一个规范化的字符串中删除所有的HTML标签和标记——用浏览器仍然可以读取的符号来替换它，但是消除了潜在的危害。可以看出，这将使用我们的第一个函数(<code class="fe mx my mz na b">normalize</code>)作为依赖项。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="0cc3" class="nl ls in na b gy nm nn l no np">&gt; bit init<br/>&gt; bit create node utils/sanitize</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">Using regex again, this time to escape HTML tags and other tokens globally.</figcaption></figure><p id="02b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如您所见，这个组件将我们的<code class="fe mx my mz na b">normalize</code>函数作为一个依赖项。让我们快速安装它。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="7234" class="nl ls in na b gy nm nn l no np">&gt; bit install @your-username/your-remote-scope.utils.normalize</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">Unit tests are simple enough.</figcaption></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">A composition to showcase each stage of the process.</figcaption></figure><p id="ae71" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后是MDX文档。</p><h2 id="06cf" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">sanitize.docs.mdx</h2><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="fbed" class="nl ls in na b gy nm nn l no np">---<br/>labels: [‘sanitize’, ‘string utils’, ‘escape html tags’]<br/>description: ‘A utility function that normalizes a string to remove diacritical characters, then sanitizes it by properly escaping all HTML tags’<br/>---</span><span id="b7f7" class="nl ls in na b gy oh nn l no np">import {sanitize} from “./sanitize”;</span><span id="b2c6" class="nl ls in na b gy oh nn l no np">Use this function to sanitize a string in two steps : <br/>1) Normalize the string to prep it for Step 2 — Remove the unicode block of combined diacritical characters in the range U+030 — U+036F. <br/>2) Properly escape all HTML tags, to safeguard against potentially malicious behavior without omitting information contained within the string.</span><span id="99e8" class="nl ls in na b gy oh nn l no np">---<br/>`&amp;amp;` to replace &amp;</span><span id="a213" class="nl ls in na b gy oh nn l no np">`&amp;lt;` to replace &lt;</span><span id="4970" class="nl ls in na b gy oh nn l no np">`&amp;gt;` to replace &gt;</span><span id="b4a8" class="nl ls in na b gy oh nn l no np">`&amp;quot;` to replace “</span><span id="1ee0" class="nl ls in na b gy oh nn l no np">`&amp;apos;` to replace ‘</span><span id="37d0" class="nl ls in na b gy oh nn l no np">---</span><span id="80e3" class="nl ls in na b gy oh nn l no np">API:</span><span id="d609" class="nl ls in na b gy oh nn l no np">```ts<br/>function normalize(): string;<br/>```</span><span id="22b2" class="nl ls in na b gy oh nn l no np">```tsx live</span><span id="c54a" class="nl ls in na b gy oh nn l no np">&lt;div&gt;For example, “&lt;i&gt;pâtisserie&lt;/i&gt;” will be sanitized to “{sanitize(“&lt;i&gt;pâtisserie&lt;/i&gt;”)}”&lt;/div&gt;<br/>```</span></pre><p id="00c8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">照常标记和导出。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="c7ab" class="nl ls in na b gy nm nn l no np">bit tag --message ”First version”<br/>bit export</span><span id="78c3" class="nl ls in na b gy oh nn l no np">new components<br/>(first version for components)<br/>     &gt; utils/sanitize@0.0.1</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/198a5784ae4cb652b743029476ac5136.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*0QCuHCDtWD9TbrCnEbRqMg.png"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">Bit provides a visual dependency graph that lets you easily skim through a component/module’s structure.</figcaption></figure><p id="1dd3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">同样，如果你想看看这是什么样子的出版，完成测试，文件，和组成，这里给你。</p><div class="oi oj gp gr ok ol"><a href="https://bit.cloud/sixthextinction/shared-utils/string-utils/sanitize" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">共享实用程序/字符串实用程序/整理</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">一个实用函数，将一个字符串规格化以去除变音字符，然后通过正确转义…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">比特云</p></div></div><div class="ou l"><div class="pb l ow ox oy ou oz km ol"/></div></div></a></div><h2 id="69d4" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">额外收获:用<code class="fe mx my mz na b">bit import</code>重构依赖关系</h2><p id="b527" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">在我们结束之前，还有最后一个场景:如果您遇到了依赖项中的错误或设计缺陷，最终破坏了您自己的代码——一个您无法修复的错误或设计缺陷，因为您无法访问正在导入的模块，该怎么办？</p><p id="ab5c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让<code class="fe mx my mz na b">bit import</code>来拯救我们吧！</p><p id="7651" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">该命令将远程作用域中指定的组件/模块添加到您的工作区中(与<strong class="kq io">安装</strong>一个组件相反，该组件只是将其作为一个包添加到您的<code class="fe mx my mz na b">node_modules/</code>)。这个<strong class="kq io">让您可以访问导入的实用函数的实际代码</strong>，允许您编辑它并立即看到变化。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="b141" class="nl ls in na b gy nm nn l no np">bit import your-username.your-remote-scope/utils/normalize</span></pre><p id="30e5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">哎呦。事实证明，我们在<code class="fe mx my mz na b">normalize </code>的正则表达式没有全球<code class="fe mx my mz na b">/g </code>标志！它不能处理一个字符串中多次出现的音调符号。让我们解决这个问题。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div><figcaption class="od oe gj gh gi of og bd b be z dk">Yikes. Hope no one noticed that…</figcaption></figure><p id="5997" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对代码进行更改，当您标记这些更改时。</p><pre class="kd ke kf kg gt nh na ni nj aw nk bi"><span id="0b97" class="nl ls in na b gy nm nn l no np">changed components<br/>(components that got a version bump) <br/>   &gt; your-username.your-remote-scope/utils/normalize@0.0.2</span><span id="547e" class="nl ls in na b gy oh nn l no np">auto-tagged dependents:</span><span id="0b9c" class="nl ls in na b gy oh nn l no np">utils/sanitize@0.0.2</span></pre><p id="65bc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">…Bit将自动更新任何使用它作为依赖项的版本号；我们例子中的<code class="fe mx my mz na b">sanitize</code>函数。</p><h1 id="f0ba" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">两全其美</h1><p id="e05c" class="pw-post-body-paragraph ko kp in kq b kr mj jo kt ku mk jr kw kx ml kz la lb mm ld le lf mn lh li lj ig bi translated">您的效用函数现在已经发布并可被发现，为选择使用它们的任何人提供了清晰的文档和预览。</p><p id="9353" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">借助Bit，您可以实现以下实用功能:</p><ol class=""><li id="7eb5" class="mo mp in kq b kr ks ku kv kx mq lb mr lf ms lj pc mu mv mw bi translated">你的实用函数现在<strong class="kq io">完全独立</strong>了，可以用来组成任何项目中的任何东西——无论是Node.js后端、React前端还是普通的js应用。任何软件包管理器都可以用来安装它们。</li><li id="df5a" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj pc mu mv mw bi translated">对已发布的包进行范围界定、自动依赖性解析和自动更新，并提供精确的访问控制，无论您是选择公开和开源，还是保持远程范围私有，只在需要时通过Bit添加协作者。</li><li id="2c6a" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj pc mu mv mw bi translated"><strong class="kq io">真相的单一来源</strong>。对一个模块的更新将自动更新所有依赖它的代码库，语义版本控制使得回滚到以前的版本并停留在那里变得很简单——这对于维护遗留代码非常有用。</li><li id="a976" class="mo mp in kq b kr nb ku nc kx nd lb ne lf nf lj pc mu mv mw bi translated"><strong class="kq io">可发现性</strong> —任何加入团队的人都可以快速浏览您的位存储库，发现他们可以轻松导入并构建新的、酷的东西的可组合代码。如果你的远程作用域是公开的，那将适用于世界上的任何人。</li></ol><p id="1ed7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这个话题到此为止。感谢您的阅读。</p></div><div class="ab cl pd pe hr pf" role="separator"><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi pj"/><span class="pg bw bk ph pi"/></div><div class="ig ih ii ij ik"><h2 id="f438" class="nl ls in bd lt nq nr dn lx ns nt dp mb kx nu nv md lb nw nx mf lf ny nz mh oa bi translated">进一步阅读</h2><div class="oi oj gp gr ok ol"><a href="https://bit.cloud/blog/meet-component-driven-content-applicable-composable-l24cw7ku" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">满足组件驱动的内容:适用的、可组合的</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">自从React和Angular等技术出现以来，我们经常将术语“组件”与…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">比特云</p></div></div><div class="ou l"><div class="pk l ow ox oy ou oz km ol"/></div></div></a></div><div class="oi oj gp gr ok ol"><a href="https://bit.cloud/blog/sharing-types-between-your-frontend-and-backend-applications-l5qih48g" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">在前端和后端应用程序之间共享类型</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">您的后端API已经更新，可以返回新类型的数据。必须通知前端团队进行更新…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">比特云</p></div></div><div class="ou l"><div class="pl l ow ox oy ou oz km ol"/></div></div></a></div><div class="oi oj gp gr ok ol"><a href="https://bit.cloud/blog/how-to-reuse-react-components-across-your-projects-l4pz83f4" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">如何在项目中重用React组件</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">最后，您完成了为应用程序中的表单创建一个奇妙的输入字段的任务。你对……很满意</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">比特云</p></div></div><div class="ou l"><div class="pm l ow ox oy ou oz km ol"/></div></div></a></div></div></div>    
</body>
</html>