<html>
<head>
<title>How I Wrote a Color Picker in Vanilla JavaScript and CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何用普通的JavaScript和CSS编写一个颜色选择器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-i-wrote-a-color-picker-in-vanilla-javascript-and-css-7a6afd7618fd?source=collection_archive---------9-----------------------#2022-10-20">https://javascript.plainenglish.io/how-i-wrote-a-color-picker-in-vanilla-javascript-and-css-7a6afd7618fd?source=collection_archive---------9-----------------------#2022-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8a39" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">下面是我如何只用普通的JavaScript和CSS构建一个颜色选择器，而没有使用任何JavaScript框架。</h2></div><p id="6078" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今天，我在为一个web应用程序中的管理用户构建一个表单来定义用户角色。在该表单上，用户可以输入角色的名称，并选择与角色相关联的颜色。我一直在用老式的JavaScript和CSS构建这个应用程序。看，妈妈！没有JavaScript框架！</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/5312ac43e9948a38cf059ec7bc91033a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xr_yHM6shqJh6UvhXjb4Rw.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Screenshot of the admin screen I was working on</figcaption></figure><p id="ee75" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个截图中，你可以看到我写的颜色选择器。它很简单，并没有任何真正的铃铛或哨子，但它的工作，它可以与我的表格一起提交。哦，我提到过它是用普通的JavaScript和CSS构建的吗？😀</p><p id="c8d9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来看看如何构建它。首先，我们将确定我们的特征。</p><ol class=""><li id="9e9c" class="lr ls iq kh b ki kj kl km ko lt ks lu kw lv la lw lx ly lz bi translated">将其构建为一个<a class="ae ma" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" rel="noopener ugc nofollow" target="_blank"> Web组件</a></li><li id="bdb1" class="lr ls iq kh b ki mb kl mc ko md ks me kw mf la lw lx ly lz bi translated">显示用户可以选择的颜色网格。选择后，附加的文本框将填充十六进制颜色代码</li><li id="31a0" class="lr ls iq kh b ki mb kl mc ko md ks me kw mf la lw lx ly lz bi translated">允许组件用户提供他们的颜色列表，但也有一组缺省值，以防没有提供颜色</li><li id="0a9e" class="lr ls iq kh b ki mb kl mc ko md ks me kw mf la lw lx ly lz bi translated">允许组件用户提供名称，以便可以在表单中使用颜色选择器</li><li id="804e" class="lr ls iq kh b ki mb kl mc ko md ks me kw mf la lw lx ly lz bi translated">允许组件用户提供预先选择的颜色</li></ol><p id="93f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑到这些需求，让我们从组件外壳开始，并获得基本的属性。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="9b0d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们已经建立了启动新的颜色选择器web组件的框架。第一个变量<code class="fe mi mj mk ml b">this._color, </code>将检索一个名为<strong class="kh ir">颜色</strong>的属性。如果不存在，默认为空。这可以由调用者设置，因此颜色选择器将预先选择一种颜色。第二个变量将从名为<strong class="kh ir"> colors </strong>的属性中获取值，或者如果为空，将填充一组默认颜色(以逗号分隔)。后来，在第9行，我们把它们分成一个数组。我们还有<code class="fe mi mj mk ml b">this._name</code>，如果没有提供名称属性，它默认为“color”。</p><p id="adad" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们创建一些函数，这些函数将用于构造构成颜色选择器的元素。为此，我们将从外部容器开始。在这个容器中将是另一个用于颜色网格的容器，然后是一个输入元素。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="17b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上述代码具有以下功能:</p><ul class=""><li id="ab25" class="lr ls iq kh b ki kj kl km ko lt ks lu kw lv la mm lx ly lz bi translated">创建一个外部容器来存放我们的项目</li><li id="9bc8" class="lr ls iq kh b ki mb kl mc ko md ks me kw mf la mm lx ly lz bi translated">创建一个网格容器来保存颜色样本</li><li id="1724" class="lr ls iq kh b ki mb kl mc ko md ks me kw mf la mm lx ly lz bi translated">创建单个颜色样本项目</li><li id="cc69" class="lr ls iq kh b ki mb kl mc ko md ks me kw mf la mm lx ly lz bi translated">创建输入元素</li></ul><p id="28cc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在在我们的构造函数中，我们可以调用这些方法来组装元素并将它们添加到DOM中。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="b606" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第10–16行要看的新东西。我们首先调用函数来创建元素。在第14行和第15行，我们向外部容器添加了颜色网格和输入元素。然后在第16行，我们将整个容器添加到自定义web组件中。</p><p id="8129" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很棒，但我们还不能与之互动。当用户单击色样时，它应该用颜色代码填充输入元素。它还应该添加一个CSS类来表明它已经被选中。让我们看看这段代码。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="0e63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里发生了一些事情。首先，您看到click事件处理函数调用了<code class="fe mi mj mk ml b">this.clearGridSelectedClasses()</code>。该函数简单地选择所有的颜色网格项，并从中删除CSS类<strong class="kh ir"> grid-item-selected </strong>。这将删除所有表明它们已被选中的可视指示器。</p><p id="c0c1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来发生的事情是检索<code class="fe mi mj mk ml b">data-color</code>属性。这有十六进制颜色代码。我们获取该值，并首先将其放入输入元素。然后，我们调度一个名为<em class="mn">颜色选择</em>的定制事件，它包含了这个十六进制代码。如果您不熟悉自定义事件，请查看<a class="ae ma" href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events" rel="noopener ugc nofollow" target="_blank">这篇文章。</a></p><p id="d984" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">准备好之后，我们需要将click事件处理程序附加到颜色网格项上。下面是修改后的<code class="fe mi mj mk ml b">createColorItem()</code>函数。唯一的变化出现在第11行，我们添加了click事件监听器。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="2f73" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">把这个放到页面上很容易。确保包含您的JavaScript文件，并在您的HTML中添加一行:<code class="fe mi mj mk ml b">&lt;color-picker id="colorPicker" name="color"&gt;&lt;/color-picker&gt;</code>。如果你运行你的页面，你可能会发现你什么也没看到！我们需要设计这个！</p><p id="9188" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们首先需要设计的是主容器。我们希望颜色样本网格位于输入元素的顶部。为此，我们将这个容器设置为使用方向设置为<code class="fe mi mj mk ml b">column</code>的flex-box。我们还会给它一个宽度，使它保持较小。如果您还记得，分配给我们外部容器的类是<code class="fe mi mj mk ml b">color-picker</code>。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="d5b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这太容易了！下一个元素是外部容器的直接后代，即色样网格。它的类是<code class="fe mi mj mk ml b">grid</code>。我们希望这些项目按行布局，当它们到达外部容器的边缘时进行包装。为此，我们将再次使用flex-box，告诉项目要包装。我们还将在网格中的每个项目之间提供一点空间。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="5703" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个颜色样本项目都需要一个尺寸。我们还将在每个项目上放置一个小边框，并将指针设置为一个光标(手)，这样当用户在视觉上悬停在它上面时，我们就会看到它。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="0072" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们设置一个类，当每个项目被选中时，它会使每个项目周围的边框变得更粗。我们还将为input元素添加一个边距，这样它就不会碰到色板网格。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="40be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Tada！正如你所看到的，这并没有花费太多的努力，现在我们有了一个基本的颜色选择器。下面是一个使用它的小代码示例。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="d673" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里是JS和CSS文件的完整源代码。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="a4f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编码快乐！</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="7650" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">更多内容请看</em><a class="ae ma" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mn">plain English . io</em></strong></a><em class="mn">。报名参加我们的</em> <a class="ae ma" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mn">免费周报</em> </strong> </a> <em class="mn">。关注我们关于</em><a class="ae ma" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mn">Twitter</em></strong></a><a class="ae ma" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mn">LinkedIn</em></strong></a><em class="mn"/><a class="ae ma" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mn">YouTube</em></strong></a><em class="mn"/><a class="ae ma" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="mn">不和</em> </strong> </a> <em class="mn">。对增长黑客感兴趣？检查</em> <a class="ae ma" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="mn">电路</em> </strong> </a> <em class="mn">。</em></p></div></div>    
</body>
</html>