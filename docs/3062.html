<html>
<head>
<title>How to Build a Tree Array from Flat Array in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中从平面数组构建树形数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-tree-array-from-flat-array-in-javascript-8d0414ac1190?source=collection_archive---------2-----------------------#2022-07-27">https://javascript.plainenglish.io/how-to-build-a-tree-array-from-flat-array-in-javascript-8d0414ac1190?source=collection_archive---------2-----------------------#2022-07-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b107" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个关于如何用JavaScript从一个扁平数组构建一个树形数组的教程。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/169f922507b4e1ef61abde2f02061acc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CgMIBgBIdrgEDIMs"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@trevmepix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">trevor pye</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="537b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时候，我们想在JavaScript中从一个展平的数组构建一个树形数组。</p><p id="fc91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将研究如何用JavaScript从扁平数组构建树形数组。</p><h1 id="8208" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使用JavaScript数组方法和递归</h1><p id="f36e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以很容易地用各种数组方法和递归从一个扁平数组构建一个树形数组。</p><p id="b1ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以写:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d7ee" class="mu lt iq mq b gy mv mw l mx my">const comments = [{<br/>  id: 1,<br/>  parentId: null<br/>}, {<br/>  id: 2,<br/>  parentId: 1<br/>}, {<br/>  id: 3,<br/>  parentId: 1<br/>}, {<br/>  id: 4,<br/>  parentId: 2<br/>}, {<br/>  id: 5,<br/>  parentId: 4<br/>}];</span><span id="d17e" class="mu lt iq mq b gy mz mw l mx my">const nest = (items, id = null, link = 'parentId') =&gt;<br/>  items<br/>  .filter(item =&gt; item[link] === id)<br/>  .map(item =&gt; ({<br/>    ...item,<br/>    children: nest(items, item.id)<br/>  }));</span><span id="823f" class="mu lt iq mq b gy mz mw l mx my">console.log(nest(comments))</span></pre><p id="0bf7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有带有<code class="fe na nb nc mq b">id</code>和<code class="fe na nb nc mq b">parentId</code>属性的<code class="fe na nb nc mq b">comments</code>数组，其中<code class="fe na nb nc mq b">parentId</code>是父注释的<code class="fe na nb nc mq b">id</code>。</p><p id="e44d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们创建接受<code class="fe na nb nc mq b">items</code>数组、<code class="fe na nb nc mq b">id</code>和<code class="fe na nb nc mq b">link</code>的<code class="fe na nb nc mq b">nest</code>函数。</p><p id="efb7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe na nb nc mq b">id</code>是<code class="fe na nb nc mq b">parentId</code>的值。</p><p id="cf81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并且<code class="fe na nb nc mq b">link</code>具有父ID的属性名。</p><p id="4670" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在该函数中，我们调用<code class="fe na nb nc mq b">filter</code>来获取具有给定ID的子注释。</p><p id="0a79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后调用<code class="fe na nb nc mq b">map</code>来映射带有<code class="fe na nb nc mq b">children</code>数组属性的<code class="fe na nb nc mq b">item</code>和我们从<code class="fe na nb nc mq b">nest</code>方法中得到的子注释。</p><p id="dbcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，控制台日志应该记录:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="73b4" class="mu lt iq mq b gy mv mw l mx my">[<br/>  {<br/>    "id": 1,<br/>    "parentId": null,<br/>    "children": [<br/>      {<br/>        "id": 2,<br/>        "parentId": 1,<br/>        "children": [<br/>          {<br/>            "id": 4,<br/>            "parentId": 2,<br/>            "children": [<br/>              {<br/>                "id": 5,<br/>                "parentId": 4,<br/>                "children": []<br/>              }<br/>            ]<br/>          }<br/>        ]<br/>      },<br/>      {<br/>        "id": 3,<br/>        "parentId": 1,<br/>        "children": []<br/>      }<br/>    ]<br/>  }<br/>]</span></pre><h1 id="2257" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="920b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以用一些数组方法和JavaScript的递归来取消一个数组的扁平并返回一个树形数组。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="2bb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nk">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nk">plain English . io</em></strong></a><em class="nk">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nk">免费周报</em> </strong> </a> <em class="nk">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nk">Twitter</em></strong></a><strong class="ky ir"><em class="nk"/></strong><em class="nk">和</em><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nk">LinkedIn</em></strong></a><em class="nk">。查看我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nk">社区不和谐</em> </strong> </a> <em class="nk">加入我们的</em> <a class="ae kv" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nk">人才集体</em> </strong> </a> <em class="nk">。</em></p></div></div>    
</body>
</html>