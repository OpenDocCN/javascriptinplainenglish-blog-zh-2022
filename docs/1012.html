<html>
<head>
<title>What TypeScript Really Means for Our JavaScript Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript对我们的JavaScript代码真正意味着什么</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-typescript-really-means-for-our-javascript-code-90f3ea7ad8a5?source=collection_archive---------3-----------------------#2022-02-26">https://javascript.plainenglish.io/what-typescript-really-means-for-our-javascript-code-90f3ea7ad8a5?source=collection_archive---------3-----------------------#2022-02-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7ef86714cb9b87442c3b86a867e93a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j_6UFvfSDAnC8QgB"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@afgprogrammer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mohammad Rahmani</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e569" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">"类型脚本是JavaScript的超集."每个JavaScript/TypeScript开发人员都读过或听过这种说法。但这到底意味着什么呢？</p><p id="8924" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在高层次上，当我们编译TypeScript代码(使用<code class="fe ky kz la lb b">tsc</code>命令)时，我们得到两件事:</p><ul class=""><li id="50e1" class="lc ld in kc b kd ke kh ki kl le kp lf kt lg kx lh li lj lk bi translated">将我们具有现代特性的类型脚本代码转换成旧版本的JavaScript(取决于我们的输出目标)。</li><li id="dee9" class="lc ld in kc b kd ll kh lm kl ln kp lo kt lp kx lh li lj lk bi translated">检查我们的代码中的类型错误。</li></ul><p id="dd67" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这两件事是完全独立的，我们将看到如何。</p><h1 id="8ca5" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated"><strong class="ak">即使我们有类型错误，我们也能得到JavaScript代码</strong></h1><p id="d1b0" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">在像Java或C这样的语言中，如果我们在“编译时”有任何错误，就不会产生任何输出。当我们运行<code class="fe ky kz la lb b">tsc</code>命令来编译我们的类型脚本代码时，出现错误并不妨碍我们获得有效的JavaScript代码。</p><p id="d852" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，如果我们有这样的代码:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/d348b5aa7cc640f54eab82375cba1604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5vozICo6BI4F_1n7ALZZA.png"/></div></div></figure><p id="46b0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们运行<code class="fe ky kz la lb b">tsc</code>命令，我们将得到这样的代码:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/b55aef0b3632e27c0a87b71cc2316977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwxjjEn7JaBwA9kw_8Ogyw.png"/></div></div></figure><p id="7509" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">甚至当我们收到错误<code class="fe ky kz la lb b">Type ‘number' is not assignable to type ‘string'.ts(2322)</code>时。</p><p id="ac7a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们想避免这种情况，我们应该在我们的“tsconfig”文件中使用选项<code class="fe ky kz la lb b">noEmitOnError: true</code>,或者作为命令行选项。通常，这个选项应该是<code class="fe ky kz la lb b">true</code>，但是如果我们需要，我们可以把它设置为<code class="fe ky kz la lb b">false</code>，并且总是得到有效的JavaScript代码。</p><p id="7409" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这种行为在Java或c语言中是不可能的。</p><h1 id="b0df" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">运行时无法检查TypeScript类型</h1><p id="5012" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">参见以下代码:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/24fc4f3486c154307095f747bcede62b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VkGaWwefh-8-v0_JVv9g9A.png"/></div></div></figure><p id="8124" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你以前见过这个错误吗？</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/3a23b7a2b68526cbacf7335cc3bf7b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iC78CUvgqF7G_VmP07rRLA.png"/></div></div></figure><p id="f89c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">TypeScript类型只在我们编码时存在，当代码被“编译”时，它们被删除，所以在运行时它们将不存在。</p><p id="5773" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个错误至少可以用两种方法解决(还有更多方法)。</p><p id="b8da" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用属性进行验证:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/4191d53141d5e39602319b0203cc84b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AqYBpVGijNzKoe8H7WaF5g.png"/></div></div></figure><p id="9043" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用类别:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/be3c1806666b248478463b1abe21dbb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8vbmS7KXwSXLBtJEdEbwvA.png"/></div></div></figure><p id="41bb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一个可行，因为我们有一个值可以使用(“worker”属性)，第二个可行，因为我们有一个类型和值，而接口只引入类型。</p><h1 id="c958" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">运行时值不受类型操作的影响</h1><p id="f2e7" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">我们从这段完全有效的类型脚本代码开始:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/93d6dd8937f5d6e13c83680cac67c709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KN_XwQ57IzKPnep3H_7OiA.png"/></div></div></figure><p id="4f14" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">很容易理解，一个总是以字符串形式获取的代码。让我们看看生成的JavaScript代码:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/a281a090b01ab6da267caedb1cdefda0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xh0gDw9jXUDQ10slGhftkA.png"/></div></div></figure><p id="578a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们真的想规范化数据，我们需要执行某种运行时检查，比如:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/815df5cfd415d27a6eab863bc889a8bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W4Y6YuqZdhMpoR-UE6s-og.png"/></div></div></figure><p id="8d6e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">输出是一样的，只是删除了类型:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/ccc0f5af534cbcf6dd41c60f5167ff0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSzOPhTRfMpn23x746FuEQ.png"/></div></div></figure><h1 id="36f9" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">方法没有重载</h1><p id="a97d" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">TypeScript允许我们定义但不能实现具有不同签名的方法。</p><p id="7fbe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以用不同的签名定义一个方法，然后实现一个方法:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/a7eaea61cc884fece347222527a255a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJ_z0jwk7RwOT4-Q3pKXPw.png"/></div></div></figure><p id="923c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是我们不能用不同的签名实现这个方法:</p><figure class="mu mv mw mx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/529438264fa6ff7c3db5ccfdd0899c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kA2zQS3T6s5S8V6xiSkf0g.png"/></div></div></figure><h1 id="2da3" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">这对运行时性能没有影响</h1><p id="14f5" class="pw-post-body-paragraph ka kb in kc b kd mo kf kg kh mp kj kk kl mq kn ko kp mr kr ks kt ms kv kw kx ig bi translated">与“性能”相关的只有两件事:</p><ul class=""><li id="2796" class="lc ld in kc b kd ke kh ki kl le kp lf kt lg kx lh li lj lk bi translated">编译代码的时间开销。</li><li id="5121" class="lc ld in kc b kd ll kh lm kl ln kp lo kt lp kx lh li lj lk bi translated">与本机实现相比，支持较旧的运行时可能会导致性能开销。</li></ul><p id="734b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这些是使用TypeScript时要记住的一些基本的和更重要的事情。希望这能帮助你更多地了解和理解在你当前的项目中使用它。</p><p id="179b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nh">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nh">plain English . io</em></strong></a><em class="nh">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nh">免费周报</em> </strong> </a> <em class="nh">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nh">Twitter</em></strong></a><em class="nh">和</em><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nh">LinkedIn</em></strong></a><em class="nh">。加入我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nh">社区不和谐</em> </strong> </a> <em class="nh">。</em></p></div></div>    
</body>
</html>