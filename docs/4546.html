<html>
<head>
<title>JavaScript Lexical Environment: A Simple Explanation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript词汇环境:一个简单的解释</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-lexical-environment-a-simple-explanation-6aa295e06340?source=collection_archive---------12-----------------------#2022-12-12">https://javascript.plainenglish.io/javascript-lexical-environment-a-simple-explanation-6aa295e06340?source=collection_archive---------12-----------------------#2022-12-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bb4ed5cec9771e5428b3063ddb1fe140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MrhdSJ3CQaIu6j3-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@purzlbaum?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Claudio Schwarz</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4214" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript中的词汇环境是一种包含标识符-变量映射的结构。换句话说，它是代码中声明的变量和常量的位置。</p><p id="5009" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个词法环境由一个环境记录和一个对外部词法环境的引用组成。标识符-变量映射存储在环境记录中，如果在当前词法环境中没有找到变量值，则使用对外部词法环境的引用来查找变量值。</p><p id="9096" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当创建一个新的执行上下文时，就会创建一个词法环境。每当调用新的函数或代码块时，都会执行该过程。</p><p id="a8f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，考虑以下代码:</p><pre class="lb lc ld le gt lf lg lh bn li lj bi"><span id="d1ed" class="lk ll iq lg b be lm ln l lo lp">function outer() {<br/>  const x = 1;<br/><br/>  function inner() {<br/>    const y = 2;<br/>    console.log(x + y);<br/>  }<br/><br/>  inner();<br/>}<br/><br/>outer();</span></pre><p id="e94f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码生成两个词法环境:一个用于<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>函数，另一个用于<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数。当您调用<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>函数时，一个新的词法环境被创建，变量<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>被声明并用值<code class="fe lq lr ls lg b"><strong class="kf ir">1</strong></code>初始化。当调用<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数时，一个新的词法环境被创建，变量<code class="fe lq lr ls lg b"><strong class="kf ir">y</strong></code>被声明并被设置为<code class="fe lq lr ls lg b"><strong class="kf ir">2</strong></code>。</p><p id="e966" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为变量<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>没有在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数中声明，JavaScript在词法环境中搜索它。因为<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>是在词法环境之外声明的，所以它的值<code class="fe lq lr ls lg b"><strong class="kf ir">1</strong></code>在表达式<code class="fe lq lr ls lg b"><strong class="kf ir">x+y</strong></code> <strong class="kf ir">中使用。</strong></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="7e5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了提供JavaScript中词法环境如何工作的更具体的例子，让我们考虑下面的代码:</p><pre class="lb lc ld le gt lf lg lh bn li lj bi"><span id="7f11" class="lk ll iq lg b be lm ln l lo lp">const x = 1;<br/>let y = 2;<br/><br/>function outer() {<br/>  const a = 3;<br/>  let b = 4;<br/><br/>  function inner() {<br/>    const c = 5;<br/>    let d = 6;<br/><br/>    console.log(x + y + a + b + c + d);<br/>  }<br/><br/>  inner();<br/>}<br/><br/>outer();</span></pre><p id="6cb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码有三个词法环境:全局环境、<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>环境和<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>环境。在脚本顶层声明的变量<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">y</strong></code>存储在全局环境中。在<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>函数中声明的变量<code class="fe lq lr ls lg b"><strong class="kf ir">a</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">b</strong></code>存储在<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>环境中。最后，在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数中声明的变量<code class="fe lq lr ls lg b"><strong class="kf ir">c</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">d</strong></code>包含在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>环境中。</p><p id="ff0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这段代码中，标识符-变量映射的工作方式如下:</p><ol class=""><li id="1642" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated">当调用<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>函数时，会为它创建一个新的词法环境。在这个环境中，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">3</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">a</strong></code>，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">4</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">b</strong></code>。</li><li id="b776" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">当调用<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数时，会为它创建一个新的词法环境。在这个环境中，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">5</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">c</strong></code>，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">6</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">d</strong></code>。</li><li id="266c" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">表达式<code class="fe lq lr ls lg b"><strong class="kf ir">x + y + a + b + c + d</strong></code>在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数中计算。因为变量<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">y</strong></code>没有在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>环境中声明，所以JavaScript在外部词法环境中搜索它们(<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>函数)。表达式中使用了<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">y</strong></code>，因为它们是在全局环境中声明的。因为变量<code class="fe lq lr ls lg b"><strong class="kf ir">a</strong></code>、<code class="fe lq lr ls lg b"><strong class="kf ir">b</strong></code>、<code class="fe lq lr ls lg b"><strong class="kf ir">c</strong></code>、<code class="fe lq lr ls lg b"><strong class="kf ir">d</strong></code>是在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>环境中声明的，直接使用它们的值。</li></ol></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="70c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了更深入地解释词法环境及其工作原理，让我们考虑下面的代码:</p><pre class="lb lc ld le gt lf lg lh bn li lj bi"><span id="aff7" class="lk ll iq lg b be lm ln l lo lp">const x = 1;<br/>let y = 2;<br/><br/>function outer() {<br/>  const a = 3;<br/>  let b = 4;<br/><br/>  function inner() {<br/>    const c = 5;<br/>    let d = 6;<br/><br/>    function innermost() {<br/>      const e = 7;<br/>      let f = 8;<br/><br/>      console.log(x + y + a + b + c + d + e + f);<br/>    }<br/><br/>    innermost();<br/>  }<br/><br/>  inner();<br/>}<br/><br/>outer();</span></pre><p id="4a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码有四个词法环境:全局环境、<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>环境、<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>环境和<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>环境。在脚本顶层声明的变量<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">y</strong></code>存储在全局环境中。在<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>函数中声明的变量<code class="fe lq lr ls lg b"><strong class="kf ir">a</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">b</strong></code>存储在<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>环境中。在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数中声明的变量<code class="fe lq lr ls lg b"><strong class="kf ir">c</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">d</strong></code>存储在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>环境中。</p><p id="70e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，变量<code class="fe lq lr ls lg b"><strong class="kf ir">e</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">f</strong></code>在<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>函数中声明，并在<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>环境中找到。</p><p id="70ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这段代码中，标识符-变量映射的工作方式如下:</p><ol class=""><li id="d23d" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated">当调用<code class="fe lq lr ls lg b"><strong class="kf ir">outer</strong></code>函数时，会为它创建一个新的词法环境。在这个环境中，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">3</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">a</strong></code>，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">4</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">b</strong></code>。</li><li id="9dcb" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">当调用<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数时，会为它创建一个新的词法环境。在这个环境中，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">5</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">c</strong></code>，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">6</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">d</strong></code>。</li><li id="5885" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">当调用<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>函数时，会为<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>函数创建一个新的词法环境。在这个环境中，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">e</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">7</strong></code>，标识符<code class="fe lq lr ls lg b"><strong class="kf ir">f</strong></code>被映射到变量<code class="fe lq lr ls lg b"><strong class="kf ir">8</strong></code>。</li><li id="b467" class="ma mb iq kf b kg mj kk mk ko ml ks mm kw mn la mf mg mh mi bi translated">表达式<code class="fe lq lr ls lg b"><strong class="kf ir">x + y + a + b + c + d + e + f</strong></code>在<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>函数中进行计算。因为变量<code class="fe lq lr ls lg b"><strong class="kf ir">x</strong></code>、<code class="fe lq lr ls lg b"><strong class="kf ir">y</strong></code>、<code class="fe lq lr ls lg b"><strong class="kf ir">a</strong></code>、<code class="fe lq lr ls lg b"><strong class="kf ir">b</strong></code>、<code class="fe lq lr ls lg b"><strong class="kf ir">c</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">d</strong></code>没有在<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>环境中声明，所以JavaScript在外部词法环境(<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>函数)中搜索它们。表达式中使用了这些变量的值，因为它们是在<code class="fe lq lr ls lg b"><strong class="kf ir">inner</strong></code>环境中声明的。因为变量<code class="fe lq lr ls lg b"><strong class="kf ir">e</strong></code>和<code class="fe lq lr ls lg b"><strong class="kf ir">f</strong></code>是在<code class="fe lq lr ls lg b"><strong class="kf ir">innermost</strong></code>环境中声明的，所以直接使用它们的值。</li></ol></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="151b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，词法环境允许我们访问外部环境中声明的变量，并帮助确定JavaScript中变量的范围。理解词法环境可以帮助您编写更加高效、可维护和有效的JavaScript代码。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="b619" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mo">我是一名web开发人员，</em> <a class="ae kc" href="https://medium.com/@wiekiang" rel="noopener"> <em class="mo">计算机智能研究员</em> </a> <em class="mo">带着探索科技与人文交汇点的热情。我有计算机科学的背景，对人工智能及其影响世界的潜力有浓厚的兴趣。</em></p><p id="368c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论我是在开发一个新的网络应用还是在人工智能领域进行研究，我总是在寻找方法来拓展可能性的边界，并对我周围的世界产生积极的影响。</p><p id="1651" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mo">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">plain English . io</em></strong></a><em class="mo">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">LinkedIn</em></strong></a><strong class="kf ir"><em class="mo"/></strong><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">YouTube</em></strong></a><strong class="kf ir"><em class="mo">，以及</em></strong><em class="mo"/><a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mo">不和</em> </strong> </a>T55】</p><p id="9e07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mo">用</em> </strong> <a class="ae kc" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mo">电路</em> </strong> </a> <em class="mo">为你的科技创业建立认知和采用。</em></p></div></div>    
</body>
</html>