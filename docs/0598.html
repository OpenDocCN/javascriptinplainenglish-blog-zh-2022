<html>
<head>
<title>JavaScript ?. Optional Chaining: A Practical Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript？。可选链接:实用指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-optional-chaining-7a2bce30c450?source=collection_archive---------3-----------------------#2022-02-02">https://javascript.plainenglish.io/javascript-optional-chaining-7a2bce30c450?source=collection_archive---------3-----------------------#2022-02-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d3a00f7a2d4a06693cab0a0a01ad599b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D7LcISm0Vz9JO3aj"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pankaj Patel</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c891" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，你知道JavaScript(？？)<a class="ae jz" href="https://medium.com/@lorenzozar/javascript-operator-5d3bd92e835e" rel="noopener">无效合并</a>运算符。</p><p id="44dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您有足够的特权知道唯一一个接受三个操作数的JavaScript操作符，即<a class="ae jz" rel="noopener ugc nofollow" target="_blank" href="/javascript-ternary-operator-b76a02c90850">条件(三元)操作符</a>。</p><p id="1345" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是可选的链接(<strong class="kc io">)呢？。</strong>)操作员？</p><p id="025d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在继续之前，您应该熟悉nullish (null或undefined)的概念，它不同于falsy。快速查看一下<a class="ae jz" href="https://medium.com/@lorenzozar/javascript-operator-5d3bd92e835e" rel="noopener">无效合并操作符</a>会有所帮助！只是我的两分钱。</p><h1 id="efab" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">JavaScript可选链接运算符</h1><p id="5ec0" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">遵循MDN定义，"<em class="mb">可选的链接操作符(？。)使您能够读取位于连接对象链深处的属性值，而不必检查链中的每个引用是否有效</em>”。</p><p id="446d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">换句话说，可选的链接运算符(？。)允许我们检查对象内部，即使一些键值可能不在那里。</p><p id="380c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">MDN报告了以下示例:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="9b5f" class="ml kz in mh b gy mm mn l mo mp">let nestedProp = obj.first?.second;</span></pre><p id="1ba7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，我们再退一步，理解一下这个东西是从哪里来的。</p><h2 id="a695" class="ml kz in bd la mq mr dn le ms mt dp li kl mu mv lm kp mw mx lq kt my mz lu na bi translated">JavaScript链接</h2><p id="60e6" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">我再一次参考<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures" rel="noopener ugc nofollow" target="_blank"> MDN </a>。<em class="mb">在JavaScript中，对象可以看作是属性的集合。[…]属性值可以是任何类型的值，包括其他对象，[…]属性使用键值</em>来标识。</p><p id="78a1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面是一个名为<em class="mb"> books </em>的JavaScript对象:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="b5b9" class="ml kz in mh b gy mm mn l mo mp">let books = {title: 'Animal Farm'}</span></pre><p id="7bee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mb"> books </em>对象有一个名为title的键和一个与该键相关联的值。值是一个字符串，它是<em class="mb">动物庄园</em>。</p><p id="fbfe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，为了访问与<em class="mb">标题</em>键相关联的值，我们从对象的名称开始，并使用<code class="fe nb nc nd mh b">.</code>链接操作符链接键的名称:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="38ce" class="ml kz in mh b gy mm mn l mo mp">console.log(books.title); // Animal Farm</span></pre><p id="1c55" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是基本对象的工作方式。</p><p id="c785" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们将我们的对象扩展到以下内容:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="573f" class="ml kz in mh b gy mm mn l mo mp">let books = {</span><span id="649e" class="ml kz in mh b gy ne mn l mo mp">  title: 'Animal Farm',</span><span id="79a6" class="ml kz in mh b gy ne mn l mo mp">  novel: {</span><span id="48de" class="ml kz in mh b gy ne mn l mo mp">    title: 'Perfume',</span><span id="84ef" class="ml kz in mh b gy ne mn l mo mp">    author: 'P. Süskind',</span><span id="8d02" class="ml kz in mh b gy ne mn l mo mp">  },</span><span id="de8f" class="ml kz in mh b gy ne mn l mo mp">};</span></pre><p id="c861" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mb">书籍</em>对象有两个键:</p><ul class=""><li id="bd06" class="nf ng in kc b kd ke kh ki kl nh kp ni kt nj kx nk nl nm nn bi translated"><strong class="kc io">标题</strong>。该值是一个字符串，它是动物农场。</li><li id="af22" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated"><strong class="kc io">小说</strong>。值是另一个带有两个键的对象:<em class="mb">标题</em>和<em class="mb">作者</em>。</li></ul><p id="1d60" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了访问与<em class="mb"> author </em>键相关联的值，我们从对象的名称开始，并使用<code class="fe nb nc nd mh b">.</code>链接操作符链接键的名称:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="f595" class="ml kz in mh b gy mm mn l mo mp">console.log(books.novel.author); // P. Süskind</span></pre><p id="5164" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">只要每把钥匙都在，这一切都很好。</p><h2 id="13aa" class="ml kz in bd la mq mr dn le ms mt dp li kl mu mv lm kp mw mx lq kt my mz lu na bi translated">打破枷锁</h2><p id="934d" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">如果缺少一个引用，例如，结果是nullish (null或undefined…<em class="mb">我告诉过你… </em>)，一切都崩溃了。</p><p id="068c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里有一个例子:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="4a59" class="ml kz in mh b gy mm mn l mo mp">console.log(books.novel.author); // P. Süskind<br/>console.log(books.horror.title);</span></pre><p id="a78e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是一个可怕的场景！不仅仅是因为我们在寻找一个恐怖的<em class="mb">标题，</em>，还因为这是你的用户将在屏幕上看到的:</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/25f5d659a5c1283e8a97fc18fe77373c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*CTD7XNYNknhU0Z-Qs6R79Q.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">This is the horrible scenario you will face when breaking the chain</figcaption></figure><p id="a93a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这还不是全部！让我们看看控制台。</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/ff3a273273ba23661d12f916daa65383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3izbQALb4DiBVpNQ4d5zg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">This is the error you will see in your console when breaking the chain</figcaption></figure><p id="d27d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该错误表明javascript无法读取未定义内容的<em class="mb">标题</em>属性，例如<em class="mb">恐怖</em>键。结果，一切都崩溃了，这不是一个非常酷的用户体验。</p><h2 id="8e5b" class="ml kz in bd la mq mr dn le ms mt dp li kl mu mv lm kp mw mx lq kt my mz lu na bi translated"><strong class="ak">传统修复</strong></h2><p id="a528" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">避免完全崩溃的最简单方法之一是用逻辑AND (&amp;&amp;)操作符验证每个引用。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="52d4" class="ml kz in mh b gy mm mn l mo mp">console.log(books.novel.author); // P. Süskind</span><span id="ec3a" class="ml kz in mh b gy ne mn l mo mp">console.log(books.horror &amp;&amp; books.horror.title); // undefined</span></pre><p id="f9a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二个console.log返回undefined，因为<em class="mb">恐怖</em>键不存在。但是，应用程序不会崩溃。</p><p id="2e14" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">这是怎么回事？</strong></p><p id="33f8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在访问<em class="mb"> books.horror.title </em>的值之前，确认<em class="mb"> books.horror </em>的值未定义。</p><p id="d2b7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mb">这里的窍门是，逻辑AND表达式是一个短路运算符。当每个操作数都被转换为布尔值时，如果发现一次转换的结果为假，则and运算符停止并返回该假操作数的原始值；它不计算任何剩余的操作数</em>、<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND#short-circuit_evaluation" rel="noopener ugc nofollow" target="_blank"> MDN </a>。</p><p id="fcca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，由于第一个操作数，<em class="mb"> books.horror，</em>是<em class="mb"> undefined </em>即nullish(我告诉过你……)和falsy，and运算符停止并返回<em class="mb"> undefined </em>。</p><p id="9bed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是在后台应用&amp;&amp;操作符来验证每个键和book对象本身所发生的事情。</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/7e6c839c1129047fd17c5eac0af02b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*C2chYs8L9I5A-6ZaHR3Xbg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">The logical AND expression validates every reference where it is used in the chain</figcaption></figure><p id="cc9a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是app不崩溃的原因！它甚至没有到达<em class="mb">books . terror . title .</em></p><p id="b0be" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然验证每个引用是可行的，但是对象通常比上面的例子更复杂，并且以这种方式检查每个引用是不可伸缩的。</p><h2 id="bb7f" class="ml kz in bd la mq mr dn le ms mt dp li kl mu mv lm kp mw mx lq kt my mz lu na bi translated">镇上新来的男孩？。</h2><p id="3499" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">最后，我们回到可选链接(<strong class="kc io">？。</strong>)操作员。</p><p id="855a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如我们所说的，复杂的对象可能有很深的嵌套结构。</p><p id="e5b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用可选的链接运算符(？。)，但是，在尝试访问引用的值之前，您不必使用逻辑AND (&amp;&amp;)运算符显式测试和短路。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="a69d" class="ml kz in mh b gy mm mn l mo mp">console.log(books.novel.author); // P. Süskind</span><span id="22a7" class="ml kz in mh b gy ne mn l mo mp">console.log(books.horror?.title); // undefined</span><span id="3357" class="ml kz in mh b gy ne mn l mo mp">console.log(books.novel.title); // Perfume</span></pre><p id="a009" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过使用？。在尝试访问<em class="mb"> books.horror.title. </em>之前，操作员JavaScript隐式检查<em class="mb"> books.horror </em>是否为空或未定义</p><p id="eff6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">由于<em class="mb"> books.horror </em> <strong class="kc io"> </strong>为nullish，表达式自动短路，返回未定义。</p><p id="38c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我最近得到了JavaScript问号的这个东西，所以你可能想检查以下内容:</p><ul class=""><li id="f44c" class="nf ng in kc b kd ke kh ki kl nh kp ni kt nj kx nk nl nm nn bi translated">N <a class="ae jz" href="https://medium.com/@lorenzozar/javascript-operator-5d3bd92e835e" rel="noopener"> ullish合并</a>运算符</li><li id="a606" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated"><a class="ae jz" rel="noopener ugc nofollow" target="_blank" href="/javascript-ternary-operator-b76a02c90850">条件(三元)运算符</a></li></ul><p id="157e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mb">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mb">说白了。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mb">免费周报</em> </strong> </a> <em class="mb">。在我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mb">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="mb">。</em></strong></a></p></div></div>    
</body>
</html>