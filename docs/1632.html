<html>
<head>
<title>Best Path to Twitter API Using JavaScript in 3 Clear Steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript通过三个清晰的步骤获得Twitter API的最佳途径</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-path-to-twitter-api-using-javascript-3-clear-steps-ca3eba503115?source=collection_archive---------7-----------------------#2022-04-07">https://javascript.plainenglish.io/best-path-to-twitter-api-using-javascript-3-clear-steps-ca3eba503115?source=collection_archive---------7-----------------------#2022-04-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4277" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于如何用JavaScript从Twitter API获取数据的初学者指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/21cbf5160a235b6c2bc106be66a0aa78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ga5xfmq_7RkLvqhXUiN1A.png"/></div></div></figure><h1 id="0d2c" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">介绍</h1><p id="3968" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">Twitter是一个流行的社交媒体平台，用户可以在这里分享他们的观点和想法，并阅读其他用户关于各种主题的帖子。研究人员、开发人员、博客作者和许多领域的人都使用Twitter来收集数据。你可以找到一个写得很好的关于如何为Twitter API创建开发者账户的<a class="ae mf" href="https://blog.learncodeonline.in/introduction-to-twitter-api" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir">博客</strong> </a>。在这篇博客中，提到了标准搜索API可以使用的所有参数和过滤器。强烈建议浏览一下那个博客，了解一下关于<a class="ae mf" href="https://blog.learncodeonline.in/introduction-to-twitter-api" rel="noopener ugc nofollow" target="_blank"> Twitter搜索API </a>的基本概念。你可以在这里找到API <a class="ae mf" href="https://developer.twitter.com/en/docs/twitter-api/v1/tweets/search/api-reference/get-search-tweets" rel="noopener ugc nofollow" target="_blank">的官方文档。</a></p><p id="1c64" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在这篇博文中，我们将探讨如何将Twitter API与JavaScript结合使用。我们将使用核心的<strong class="ll ir"> Fetch </strong>库从Twitter获取想要的数据，而不是使用任何围绕Twitter API的包。我们没有使用任何围绕Twitter API包装的模块，比如<strong class="ll ir"> twitter-v2 </strong>和<strong class="ll ir"> twitter-lite </strong>。目的是让你明白如何利用Fetch库使用核心Twitter API。</p><h1 id="f9d3" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">先决条件</h1><p id="bd60" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在我们开始使用Fetch()之前，需要安装以下内容:</p><ol class=""><li id="efb1" class="ml mm iq ll b lm mg lp mh ls mn lw mo ma mp me mq mr ms mt bi translated"><em class="mu">节点</em> <br/>要在您的系统上获取并安装<strong class="ll ir">节点</strong>，请转到<a class="ae mf" href="https://nodejs.dev/" rel="noopener ugc nofollow" target="_blank"> nodejs.dev </a>并下载LTS(长期支持)版本。安装后，打开系统上的终端，尝试以下命令，您将看到版本号。这里，npm是节点应用程序的包管理器。我们需要npm为我们的应用程序安装第三方库。</li><li id="5bf2" class="ml mm iq ll b lm mv lp mw ls mx lw my ma mz me mq mr ms mt bi translated"><em class="mu">文本编辑器/ IDE(集成开发环境)</em> <br/>你可以使用任何文本编辑器或IDE。但是，我推荐使用VSCode，这是微软的一个免费的开源代码编辑器。</li><li id="285e" class="ml mm iq ll b lm mv lp mw ls mx lw my ma mz me mq mr ms mt bi translated"><em class="mu"> Twitter API密匙</em> <br/>要设置开发者的账号，获取API密匙，跟我之前的<a class="ae mf" href="https://blog.learncodeonline.in/introduction-to-twitter-api" rel="noopener ugc nofollow" target="_blank">博客</a>走。</li></ol><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="2821" class="nf ks iq nb b gy ng nh l ni nj">node -v</span><span id="52a8" class="nf ks iq nb b gy nk nh l ni nj">npm -v</span></pre><h1 id="b802" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">使用Fetch提取数据</h1><p id="289b" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在这一节中，我们将看到如何使用Fetch模块从Twitter中提取数据。Fetch是一个基于承诺的函数，用于从服务器发送和接收数据。对于这个博客，我们将只关注使用Fetch获取数据。</p><p id="75e3" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">我们在浏览器中使用的JavaScript(普通JavaScript)有一个获取模块。这里，我们使用的是<strong class="ll ir">节点</strong>，它是一个<strong class="ll ir"> JavaScript运行时环境</strong>，通过它我们可以在本地机器上运行JavaScript。这个运行时环境的核心模块中没有Fetch。因此，我们需要为我们的项目在外部安装它。</p><p id="fedf" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在安装<strong class="ll ir">节点获取</strong>之前，进入你想要工作的任何目录/文件夹，用你选择的名字创建一个文件夹。现在，要安装Fetch，请打开您在系统上创建的文件夹中的终端，如下所示:</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="47e9" class="nf ks iq nb b gy ng nh l ni nj">npm install node-fetch</span></pre><p id="18a5" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">有两种方法可以处理fetch()方法:</p><ol class=""><li id="9c51" class="ml mm iq ll b lm mg lp mh ls mn lw mo ma mp me mq mr ms mt bi translated">使用then()和catch()</li><li id="4102" class="ml mm iq ll b lm mv lp mw ls mx lw my ma mz me mq mr ms mt bi translated">使用异步/等待</li></ol><h1 id="d74d" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">使用then()和catch()</h1><p id="10f4" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">fetch方法返回一个响应对象，该对象包含一系列有用的基于承诺的方法。这些方法如下:</p><ul class=""><li id="403c" class="ml mm iq ll b lm mg lp mh ls mn lw mo ma mp me nl mr ms mt bi translated"><strong class="ll ir"> response.json() </strong>返回解析为json对象的承诺。</li><li id="1420" class="ml mm iq ll b lm mv lp mw ls mx lw my ma mz me nl mr ms mt bi translated"><strong class="ll ir"> response.text() </strong>返回解析为原始文本的承诺。</li><li id="9fc3" class="ml mm iq ll b lm mv lp mw ls mx lw my ma mz me nl mr ms mt bi translated"><strong class="ll ir"> response.formData() </strong>返回解析为formData的承诺。</li><li id="9f50" class="ml mm iq ll b lm mv lp mw ls mx lw my ma mz me nl mr ms mt bi translated"><strong class="ll ir"> response.blob() </strong>返回解析为blob(原始数据的类似文件的对象)的承诺。</li><li id="d147" class="ml mm iq ll b lm mv lp mw ls mx lw my ma mz me nl mr ms mt bi translated"><strong class="ll ir">response . array buffer()()</strong>返回解析为ArryBuffer(原始通用二进制数据)的承诺。</li></ul><p id="7885" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">由于Twitter API返回JSON数据，我们将只使用<strong class="ll ir"> response.json() </strong>方法。以下代码是获取包含python关键字且不包含任何转发的所有tweets的示例:</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="10d3" class="nf ks iq nb b gy ng nh l ni nj">const fetch = require("node-fetch");</span><span id="1c7a" class="nf ks iq nb b gy nk nh l ni nj">const token =  "Bearer BEARER_TOKEN"; // Replace BEARER_TOKEN with your token<br/>const method = "GET";<br/>const options = {<br/>  method: method,<br/>  headers: {<br/>    "Content-type": "application/json",<br/>    Authorization: token,<br/>  },<br/>};</span><span id="5a5d" class="nf ks iq nb b gy nk nh l ni nj">const query = "python -filter:retweets";</span><span id="9023" class="nf ks iq nb b gy nk nh l ni nj">const a = fetch(<br/>  `https://api.twitter.com/1.1/search/tweets.json?q=${query}`,<br/>  options<br/>)<br/>  .then((response) =&gt; response.json())<br/>  .then((json) =&gt; console.log(json))<br/>  .catch((error) =&gt; {<br/>    console.log(error);<br/>  });</span></pre><p id="1640" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir">注意:</strong>将BEARER_TOKEN一词替换为您从开发者门户获得的Bearer Token。</p><p id="5f54" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">我们可以为查询分配任何搜索字符串和过滤器。如代码块所示，我们使用<strong class="ll ir"> response.json() </strong>获取json格式的数据。在第一个<strong class="ll ir"> then() </strong>块中，我们可以使用我们作为参数传递的任何名称来代替响应。如前所述，response.json()再次返回一个承诺。因此，为了解决这个问题，我们又使用了一个then()块，并得到最终响应作为数据<strong class="ll ir">数据</strong>。在解析承诺的过程中，如果我们得到任何错误，那么控制将被传递给<strong class="ll ir"> catch() </strong>块。这个块用于处理任何种类的错误。</p><h1 id="24c9" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">使用异步/等待</h1><p id="bc51" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">要使用async/await，我们需要创建一个异步函数，并将我们的逻辑放入该函数中。下面的代码展示了我们如何使用带有fetch()方法的async/await。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="48f8" class="nf ks iq nb b gy ng nh l ni nj">const fetch = require("node-fetch");</span><span id="8767" class="nf ks iq nb b gy nk nh l ni nj">const token =  "Bearer BEARER_TOKEN";   // Replace BEARER_TOKEN with your token<br/>const method = "GET";<br/>const options = {<br/>  method: method,<br/>  headers: {<br/>    "Content-type": "application/json",<br/>    Authorization: token,<br/>  },<br/>};</span><span id="04b8" class="nf ks iq nb b gy nk nh l ni nj">const query = "python -filter:retweets";</span><span id="9db2" class="nf ks iq nb b gy nk nh l ni nj">const getData = async () =&gt; {<br/>  try {<br/>    const response = await fetch(<br/>      `https://api.twitter.com/1.1/search/tweets.json?q=${query}`,<br/>      options<br/>    );<br/>    const data = await response.json();<br/>    console.log(data);<br/>  } catch (error) {<br/>    console.log("ERROR");<br/>  }<br/>};</span><span id="2b80" class="nf ks iq nb b gy nk nh l ni nj">getData();</span></pre><p id="d647" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">如代码所示，await将解析承诺并返回响应。这里，我们使用了两个waits作为fetch()方法，response.json()都返回承诺。</p><p id="2a41" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir">注:</strong>我用的是箭头函数，是JavaScript版本ES6的语法。</p><p id="673a" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">对于常见的数据检索任务，上面的代码就足够了。您可以根据需要使用任何查询参数和过滤器，然后将它们分配给<strong class="ll ir">查询。</strong>如果您使用了任何不同的方法或过滤器，请在下面的评论中分享您的专业知识/方法。</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><h1 id="8704" class="kr ks iq bd kt ku nt kw kx ky nu la lb jw nv jx ld jz nw ka lf kc nx kd lh li bi translated">结论</h1><p id="c9f1" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们可以使用任何适合他们的方法。可以有其他方法来获取数据。我在这里只提到其中之一。许多人更喜欢使用<a class="ae mf" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a>，它的使用方式与我们通过Twitter API使用fetch()方法获取数据的方式相同。</p><p id="5170" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">如果你喜欢这个博客，请在评论区告诉我👇。如果你需要任何帮助或者想讨论什么，请告诉我。在<a class="ae mf" href="https://bit.ly/3KjwgZV" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae mf" href="https://bit.ly/3JbsPDm" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。</p><p id="a361" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">如果你想知道Twitter搜索API是如何工作的，可以看看这个博客👇</p><div class="ny nz gp gr oa ob"><a href="https://blog.sahilfruitwala.com/guide-to-extract-tweets-using-tweepy" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">使用Tweepy获取推文的综合指南</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">Twitter是这个人工智能时代最受欢迎的数据来源之一。如今，数据几乎是…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">blog.sahilfruitwala.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op kp ob"/></div></div></a></div><div class="ny nz gp gr oa ob"><a href="https://betterprogramming.pub/an-easy-to-use-guide-for-twitter-search-api-5e1f4835d841" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">Twitter搜索API的易用指南</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">搜索、过滤等</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">better编程. pub</p></div></div><div class="ok l"><div class="oq l om on oo ok op kp ob"/></div></div></a></div><p id="252b" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><em class="mu">更多内容看</em> <a class="ae mf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="mu">说白了。报名参加我们的</em> <a class="ae mf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="mu">免费周报</em> </strong> </a> <em class="mu">。关注我们关于</em><a class="ae mf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mu">Twitter</em></strong></a><em class="mu">和</em><a class="ae mf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="mu">LinkedIn</em></strong></a><em class="mu">。加入我们的</em> <a class="ae mf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> <em class="mu">社区</em> </strong> </a> <em class="mu">。</em></strong></a></p></div></div>    
</body>
</html>