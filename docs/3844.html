<html>
<head>
<title>Build a Dialog Box with <dialog/> Element</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用<dialog/>元素构建一个对话框</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-dialog-box-with-dialog-efb08952551d?source=collection_archive---------10-----------------------#2022-09-30">https://javascript.plainenglish.io/build-a-dialog-box-with-dialog-efb08952551d?source=collection_archive---------10-----------------------#2022-09-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9ef3" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">关于构建对话框或模式的教程。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a71a60bf5a31dac93d65fa3d78e213a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1CfF5YbdHnMsyidF"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@sodacheese?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jouwen Wang</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="00b9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">不管你构建了多少次UI组件，总有一些事情不太容易做到，例如，对话框，也就是模态对话框。在本文中，我们将看到构建对话的挑战，然后看看是否有简单的方法。</p><h2 id="25b9" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">页面内容上方</h2><p id="5b75" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">这是一切开始的地方:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="7d76" class="lp lq in mo b gy ms mt l mu mv">&lt;<strong class="mo io">div </strong>class='body'&gt;<br/>  &lt;<strong class="mo io">button</strong>&gt;Open&lt;/<strong class="mo io">button</strong>&gt;<br/>  &lt;<strong class="mo io">div</strong> class='dialog'&gt;Dialog&lt;/<strong class="mo io">div</strong>&gt;<br/>&lt;/<strong class="mo io">div</strong>&gt;</span></pre><p id="9e6e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有一个按钮，如果我们点击它，我们会打开一个对话框。我们可以应用一些CSS代码，使对话框看起来像是从屏幕上弹出来的，我们可能需要使用一些JavaScript代码来触发open事件。我们还需要在开始时让观众看不到这个对话。如果我们想有一个快速旋转的对话框，这可能就是所有的工作。</p><p id="6190" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然而，如果你想把它变成一个可重用的组件，它缺少一些东西。一个主要问题是，对话内容需要显示在所有内容之上。例如，对话框背景需要覆盖原始页面内容。好了，这里我们可以将对话框的<code class="fe mw mx my mo b">z-index</code>设置得高一点。</p><p id="4dcb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但是无论你如何设置对话框<code class="fe mw mx my mo b">z-index</code>，你很快就会意识到这是一个不可能完成的任务:a)有一个body元素已经预置了高<code class="fe mw mx my mo b">z-index</code>，比如一个下拉面板；b)有一个具有预定宽度和高度的边界可滚动体(通过<code class="fe mw mx my mo b">overflow: scroll</code>)。当您遇到这些情况时，您无能为力，除非我们可以稍微调整HTML的结构，例如重新定位对话框元素，使其不在内容元素中:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="14d4" class="lp lq in mo b gy ms mt l mu mv">&lt;<strong class="mo io">div</strong> class='body'&gt;<br/>  &lt;<strong class="mo io">button</strong>&gt;Open&lt;/<strong class="mo io">button</strong>&gt;<br/>&lt;/<strong class="mo io">div</strong>&gt;<br/>&lt;<strong class="mo io">div</strong> class='dialog'&gt;Dialog&lt;/<strong class="mo io">div</strong>&gt;</span></pre><p id="e4e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">虽然看起来很微妙，但现在对话的更高的<code class="fe mw mx my mo b">z-index</code>会将它提升到主体内所有内容之上。有了这种结构上的改变，主体中的任何东西都不能再覆盖对话内容了。不错！</p><h2 id="4a5c" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">保留旧的HTML</h2><p id="f619" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">现在，我们可能会想，有没有一种方法可以自动转换HTML的结构，这样我们就可以像以前一样继续编写对话框代码？</p><p id="8904" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是一些实用组件背后的想法，比如React社区的<code class="fe mw mx my mo b">Portal</code>:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="4346" class="lp lq in mo b gy ms mt l mu mv">&lt;<strong class="mo io">div</strong> class='body'&gt;<br/>  &lt;<strong class="mo io">button</strong>&gt;Open&lt;/<strong class="mo io">button</strong>&gt;<br/>  &lt;Portal&gt;<br/>    &lt;<strong class="mo io">div</strong> class='dialog'&gt;Dialog&lt;/<strong class="mo io">div</strong>&gt;<br/>  &lt;/Portal&gt;<br/>&lt;/<strong class="mo io">div</strong>&gt;</span></pre><p id="0bb9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通过用<code class="fe mw mx my mo b">Portal</code>包装对话框代码，对话框代码可以保存在页面块中。当对话框将要被创建时，它将被物理地放置在body div之外。因此，有一些幕后的工作为你实现这一点。</p><p id="12b8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">顺着这个思路，更好的是现在HTML也自带了自己的元素<code class="fe mw mx my mo b">dialog</code>。只需用<code class="fe mw mx my mo b">dialog</code>替换<code class="fe mw mx my mo b">Portal</code>即可。有什么区别？最主要的一点是，你不需要使用React。</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="4864" class="lp lq in mo b gy ms mt l mu mv">&lt;<strong class="mo io">div </strong>class='body'&gt;<br/>  &lt;<strong class="mo io">button</strong>&gt;Open&lt;/<strong class="mo io">button</strong>&gt;<br/>  &lt;<strong class="mo io">dialog</strong>&gt;<br/>    &lt;<strong class="mo io">div</strong> class='dialog'&gt;Dialog&lt;/<strong class="mo io">div</strong>&gt;<br/>  &lt;/<strong class="mo io">dialog</strong>&gt;<br/>&lt;/<strong class="mo io">div</strong>&gt;</span></pre><h2 id="099b" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">什么是<code class="fe mw mx my mo b">dialog now</code></h2><p id="0076" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">如果是第一次听说<code class="fe mw mx my mo b">dialog</code>元素，可以看看这个教程:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="b227" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里是文档<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/HTML/Element/dialog</a>。</p><p id="0c6f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">真正令人惊奇的是，如果你打开开发面板看一看HTML的结构:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/6a6539fae7148bfb796f8fd50503124b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U3crlPQA_P8HddYVITliqg.png"/></div></div></figure><p id="af2a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">即使在DOM中物理地创建了它，它仍然存在于body元素中。所以现在这个对话框基本上可以作为一个常规的DOM元素来工作，并且作为一个对话框来操作，而不需要我们知道所有的麻烦。如果你今天刚开始接触网络技术，很容易就能学会并使用它。</p><p id="b1ca" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以，这里是<code class="fe mw mx my mo b">dialog</code>元素。您可以按常规方式设置它的样式，或者向它添加任何动画:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="9032" class="lp lq in mo b gy ms mt l mu mv">dialog {<br/>  padding: 50px;<br/>  border-radius: 5px;<br/>  border: 0;<br/> <br/> &amp;<strong class="mo io">::backdrop</strong> {<br/>   background: rgba(0, 0, 0, 0.4);<br/> }<br/> <br/> &amp;<strong class="mo io">[open]</strong>, <br/> &amp;<strong class="mo io">::backdrop</strong> {<br/>  animation: show 500ms ease;<br/> }<br/>}</span></pre><h1 id="08e8" class="nc lq in bd lr nd ne nf lu ng nh ni lx jt nj ju ma jw nk jx md jz nl ka mg nm bi translated">摘要</h1><p id="cccb" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">如果我们还没有开始使用<code class="fe mw mx my mo b">dialog</code>元素，也许是时候开始使用它了，尤其是在新的或者小的项目中。<code class="fe mw mx my mo b">dialog</code>元素是一个模仿对话框行为的本地HTML元素。</p></div><div class="ab cl nn no hr np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ig ih ii ij ik"><p id="cb01" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nu">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nu">说白了就是io </em> </strong> </a> <em class="nu">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nu">免费周报</em> </strong> </a> <em class="nu">。关注我们关于</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nu">推特</em> </strong> </a>，<a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nu">领英</em> </strong> </a> <em class="nu">，</em><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nu">YouTube</em></strong></a><em class="nu"/><a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nu">不和</em> </strong> </a> <em class="nu">。对增长黑客感兴趣？检查</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nu">电路</em> </strong> </a> <em class="nu">。</em></p></div></div>    
</body>
</html>