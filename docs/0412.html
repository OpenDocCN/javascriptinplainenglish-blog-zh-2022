<html>
<head>
<title>Create Your Own Chrome Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建你自己的Chrome扩展</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-your-own-chrome-extension-bb4e93982eb5?source=collection_archive---------13-----------------------#2022-01-24">https://javascript.plainenglish.io/create-your-own-chrome-extension-bb4e93982eb5?source=collection_archive---------13-----------------------#2022-01-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4dd0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何使用JavaScript创建我们自己的Chrome扩展的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/fde78f1e5c77e61cbedba77fed81dc5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fyTVxfAveBUo3wcS"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@afgprogrammer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mohammad Rahmani</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1189" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在当今世界，我们依赖于许多Chrome扩展来使我们的生活更加轻松。但是你知道这些延伸是怎么做出来的吗？在这篇博客中，我们将探索创建我们自己的Chrome扩展的过程。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/233a5770ccde88522e7b901bb88123bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*oVEOUKrszB3doOEUQ5uV9g.png"/></div></figure><h2 id="ee03" class="lq lr in bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated"><strong class="ak">概念化</strong></h2><p id="9601" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">每天阅读多个领域的多个博客或文章是很常见的。在保存各种领域的博客或文章的链接时，您是否遇到过任何困难，以便将来再次访问？我们正在构建的Chrome扩展将允许我们保存跨多个域的博客文章链接，并能够在需要时重新访问它们。</p><p id="8bc5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mo">让我们开始构建我们的chrome扩展吧</em></p><p id="e34f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"><em class="mo">manifest . JSON</em></strong><em class="mo">是我们需要创建的第一个文件。它是chrome扩展的入口点，就像web应用程序的index.html一样，它保存了与我们的chrome扩展UI相关的所有配置，所有东西都从它那里加载。</em></p><p id="e803" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，让我们在一个专用文件夹中创建一个manifest.json文件，在这个文件夹中，我们将与我们的扩展相关的代码分组。</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="76c9" class="lq lr in mq b gy mu mv l mw mx">BLOGPOSTSSAVE // Root Folder<br/>    -&gt; manifest.json // file</span></pre><p id="8816" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">是时候用一些配置来堆叠这些文件了。根据我们的扩展需求，可以添加多种配置。您可以在这里  <em class="mo">获得所有可用配置的列表<a class="ae ks" href="https://developer.chrome.com/docs/extensions/mv3/intro/mv3-overview/" rel="noopener ugc nofollow" target="_blank"> <em class="mo">。</em></a></em></p><p id="58b8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们现在要添加的内容如下</p><p id="4c14" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="mo">名称</em> </strong> <em class="mo"> - &gt;这是我们的扩展名，对用户可见。</em></p><p id="1d3e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="mo">描述</em> </strong> <em class="mo"> - &gt;我们扩展的简短描述，我们希望在Chrome扩展商店中显示给用户。</em></p><p id="14d5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="mo">版本</em> </strong> <em class="mo"> - &gt;这表示我们扩展的版本。</em></p><p id="a446" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"><em class="mo">manifest _ version</em></strong><em class="mo">-&gt;这是manifest.json文件的版本，浏览器根据上述版本中定义的规则读取并呈现。</em></p><p id="a33f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们将使用manifest_version: 3，因为根据Chrome扩展文档，这是最新版本。</p><p id="11db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="mo">图标</em> </strong> <em class="mo"> - &gt;我们可以根据大小来指定图标的路径，这样浏览器就会在Chrome扩展商店中根据屏幕大小来渲染图标。</em></p><p id="0d59" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="mo">动作</em> </strong> <em class="mo"> - &gt;我们可以指定我们的扩展运行时需要执行的动作列表。一些动作是默认弹出、默认图标等。</em></p><p id="4961" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"><em class="mo">default _ popup</em></strong><em class="mo">-&gt;我们可以指定当用户激活我们的扩展时，需要向用户显示为弹出窗口的HTML文件。</em></p><p id="5754" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"><em class="mo">default _ icon</em></strong><em class="mo">-&gt;我们可以根据大小来指定图标的路径，这样浏览器就会在地址栏附近的浏览器扩展工具栏中根据屏幕大小来渲染图标。</em></p><p id="4faa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mo">我已经将图标包含在资产文件夹中。你可以从Github repo </em> <a class="ae ks" href="https://github.com/itzzmeakhi/blog-posts-save/tree/main/assets" rel="noopener ugc nofollow" target="_blank"> <em class="mo">这里</em> </a> <em class="mo">下载。</em></p><p id="f367" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的manifest.json文件如下所示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="b06e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们将开始构建我们的UI，创建index.css以及用于添加样式的index.css文件和用于为我们的扩展添加功能的script.js文件。</p><p id="11e1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个想法是创建两个按钮，一个用于添加链接，另一个是查看主视图保存的链接，另一个视图显示用户保存的所有链接。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mz l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="1b3a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要将我们的扩展添加到浏览器中，请转到Chrome Extensions选项卡，打开开发人员模式，单击load unpacked，然后选择我们的代码所在目录的路径。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi na"><img src="../Images/5c969b69a2ab79056c348efbd81c3139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T9hUaEZVgayzCA7uP_pSwA.jpeg"/></div></div></figure><p id="b379" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mo">注意:对于我们在代码中所做的每一个改变，都要反映在扩展中，我们需要点击update然后运行扩展。</em></p><p id="0413" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们的扩展将会出现在chrome扩展图标中，在URL标签之后。这样你就可以把它钉住并使用它。我们扩展的外观和感觉如下。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/a09d814bbc6bd4ce6fd15d387cf16ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*6GNkmujWHyuZATCrH6tc0A.jpeg"/></div></figure><p id="1170" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好啊，我们已经创建了我们的第一个chrome扩展。感到兴奋吗？尽管如此，还有很多要补充的。它现在就像一个静态的UI应用程序，我们需要添加JavaScript才能使它具有功能:)</p><p id="d2ba" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们开始构建添加到阅读列表的功能。为此，我们需要获得add button的DOM节点，并添加一个click事件侦听器来执行我们的add功能。</p><p id="2f10" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在深入研究代码之前，对于每个链接，我们需要获得当前的标签URL、标题和favicon图像，以使保存的列表看起来更好，更容易访问，而不是直接保存链接。我们将把链接数据存储在本地存储器中。</p><p id="0720" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，为了访问选项卡数据和存储，我们需要通过在manifest.json文件中添加权限来授予扩展权限。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="6385" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们将使用chrome tabs API获取当前标签数据，如下所示。</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="9757" class="lq lr in mq b gy mu mv l mw mx">const queryOptions = { active: true, currentWindow: true };</span><span id="3ef0" class="lq lr in mq b gy nc mv l mw mx">const [tab] = await chrome.tabs.query(queryOptions);</span><span id="cec5" class="lq lr in mq b gy nc mv l mw mx">const { title, url, favIconUrl } = tab;</span></pre><p id="6571" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以使用chrome storage API从本地存储中读取数据，如下所示。</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="81b6" class="lq lr in mq b gy mu mv l mw mx">chrome.storage.local.get(['blogposts'], function (result) {</span><span id="4924" class="lq lr in mq b gy nc mv l mw mx">  console.log(result);</span><span id="50d4" class="lq lr in mq b gy nc mv l mw mx">});</span></pre><p id="ff77" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">并将数据添加到本地存储，如下所示。</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="5c6b" class="lq lr in mq b gy mu mv l mw mx">chrome.storage.local.set({blogposts: [...postsAdded]}, () =&gt; {</span><span id="ca44" class="lq lr in mq b gy nc mv l mw mx">console.log('blog added');</span><span id="61aa" class="lq lr in mq b gy nc mv l mw mx">});</span></pre><p id="bd2e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这样，我们将添加addBlog处理程序，并将click事件侦听器附加到add button DOM节点。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="0d2a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，当我们点击任何选项卡上的添加到阅读列表按钮时，它会被添加到本地存储。在普通仓库里是找不到的。要查看它，请单击chrome extension，在弹出窗口中右键单击并检查，然后在控制台中键入以下代码。</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="b398" class="lq lr in mq b gy mu mv l mw mx">chrome.storage.local.get(function(result){console.log(result)})</span></pre><p id="8ded" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您将能够看到您保存的链接数据。现在，当我们点击“查看阅读列表”按钮时，让我们在扩展上显示它们。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/88639d9c4aef36efdcabdab0b74d0604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dozNfKgBPUMIeA7nZyABsA.jpeg"/></div></div></figure><p id="7b7c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以类似的方式，我们将获得视图阅读列表按钮、按钮容器和视图列表的DOM节点，这样按钮容器将被隐藏，博客列表将以JavaScript方式显示，当单击它时导航到另一个选项卡中的博客，当单击删除链接时将其从列表中删除。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="9dd1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的chrome扩展几乎完成了，现在让我们添加回选项并清除所有链接以及视图列表容器中附加的事件监听器。最终的JavaScript代码如下所示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="4e5e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最终版本:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/0a3befeb36e472dc80818a16789eaeaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*zNxDe6CRhclcLLyqShe8Lw.gif"/></div></figure><p id="87f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们需要一个Chrome开发者账户，一次性收费5美元。任何有兴趣在Chrome store上发表文章的人，都可以在这里一步一步地完成这个过程。</p><p id="d31a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">就是这样！我们构建了自己的Google Chrome扩展。</p><p id="c29f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://github.com/itzzmeakhi/blog-posts-save" rel="noopener ugc nofollow" target="_blank"> Github repo </a>中的最终代码。</p><p id="4ae2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">它是一个开源软件，你可以通过添加任何额外的特性来为它做出贡献。</p><p id="1b14" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">希望这是有用的<br/>一个❤️将是可怕的😊</p><p id="d0f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mo">更多内容看</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mo">说白了就是io </em> </strong> </a> <em class="mo">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mo">免费周报</em> </strong> </a> <em class="mo">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="mo">社区不和谐</em> </strong> </a> <em class="mo">获得独家获取写作机会和建议。</em></p></div></div>    
</body>
</html>